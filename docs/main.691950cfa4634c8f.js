"use strict";(self.webpackChunkSpotyRFI=self.webpackChunkSpotyRFI||[]).push([[179],{58:(to,kn,ze)=>{ze.d(kn,{BH:()=>vt,G6:()=>Zr,L:()=>_t,LL:()=>Z,Pz:()=>ct,Sg:()=>or,UG:()=>K,ZB:()=>Te,ZR:()=>Y,aH:()=>xt,b$:()=>Wr,eu:()=>L,hl:()=>O,jU:()=>Jt,m9:()=>fu,ne:()=>oo,pd:()=>du,r3:()=>An,ru:()=>Xt,tV:()=>Q,uI:()=>Ln,vZ:()=>ro,w1:()=>Mi,xO:()=>Zs,xb:()=>Rr,z$:()=>tt,zd:()=>Mr});const Fe=function(D){const w=[];let A=0;for(let q=0;q<D.length;q++){let M=D.charCodeAt(q);M<128?w[A++]=M:M<2048?(w[A++]=M>>6|192,w[A++]=63&M|128):55296==(64512&M)&&q+1<D.length&&56320==(64512&D.charCodeAt(q+1))?(M=65536+((1023&M)<<10)+(1023&D.charCodeAt(++q)),w[A++]=M>>18|240,w[A++]=M>>12&63|128,w[A++]=M>>6&63|128,w[A++]=63&M|128):(w[A++]=M>>12|224,w[A++]=M>>6&63|128,w[A++]=63&M|128)}return w},qe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(D,w){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=w?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let M=0;M<D.length;M+=3){const pe=D[M],Ie=M+1<D.length,be=Ie?D[M+1]:0,yr=M+2<D.length,Ce=yr?D[M+2]:0;let dt=(15&be)<<2|Ce>>6,li=63&Ce;yr||(li=64,Ie||(dt=64)),q.push(A[pe>>2],A[(3&pe)<<4|be>>4],A[dt],A[li])}return q.join("")},encodeString(D,w){return this.HAS_NATIVE_SUPPORT&&!w?btoa(D):this.encodeByteArray(Fe(D),w)},decodeString(D,w){return this.HAS_NATIVE_SUPPORT&&!w?atob(D):function(D){const w=[];let A=0,q=0;for(;A<D.length;){const M=D[A++];if(M<128)w[q++]=String.fromCharCode(M);else if(M>191&&M<224){const pe=D[A++];w[q++]=String.fromCharCode((31&M)<<6|63&pe)}else if(M>239&&M<365){const yr=((7&M)<<18|(63&D[A++])<<12|(63&D[A++])<<6|63&D[A++])-65536;w[q++]=String.fromCharCode(55296+(yr>>10)),w[q++]=String.fromCharCode(56320+(1023&yr))}else{const pe=D[A++],Ie=D[A++];w[q++]=String.fromCharCode((15&M)<<12|(63&pe)<<6|63&Ie)}}return w.join("")}(this.decodeStringToByteArray(D,w))},decodeStringToByteArray(D,w){this.init_();const A=w?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let M=0;M<D.length;){const pe=A[D.charAt(M++)],be=M<D.length?A[D.charAt(M)]:0;++M;const Ce=M<D.length?A[D.charAt(M)]:64;++M;const Ke=M<D.length?A[D.charAt(M)]:64;if(++M,null==pe||null==be||null==Ce||null==Ke)throw new ln;q.push(pe<<2|be>>4),64!==Ce&&(q.push(be<<4&240|Ce>>2),64!==Ke&&q.push(Ce<<6&192|Ke))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class ln extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _t=function(D){return function(D){const w=Fe(D);return qe.encodeByteArray(w,!0)}(D).replace(/\./g,"")},Q=function(D){try{return qe.decodeString(D,!0)}catch(w){console.error("base64Decode failed: ",w)}return null};function Te(D,w){if(!(w instanceof Object))return w;switch(w.constructor){case Date:return new Date(w.getTime());case Object:void 0===D&&(D={});break;case Array:D=[];break;default:return w}for(const A in w)!w.hasOwnProperty(A)||!Je(A)||(D[A]=Te(D[A],w[A]));return D}function Je(D){return"__proto__"!==D}const et=()=>{try{return function ut(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const D=process.env.__FIREBASE_DEFAULTS__;return D?JSON.parse(D):void 0})()||(()=>{if(typeof document>"u")return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const w=D&&Q(D[1]);return w&&JSON.parse(w)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},xt=()=>{var D;return null===(D=et())||void 0===D?void 0:D.config},ct=D=>{var w;return null===(w=et())||void 0===w?void 0:w[`_${D}`]};class vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((w,A)=>{this.resolve=w,this.reject=A})}wrapCallback(w){return(A,q)=>{A?this.reject(A):this.resolve(q),"function"==typeof w&&(this.promise.catch(()=>{}),1===w.length?w(A):w(A,q))}}}function or(D,w){if(D.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=w||"demo-project",M=D.iat||0,pe=D.sub||D.user_id;if(!pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ie=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:M,exp:M+3600,auth_time:M,sub:pe,user_id:pe,firebase:{sign_in_provider:"custom",identities:{}}},D);return[_t(JSON.stringify({alg:"none",type:"JWT"})),_t(JSON.stringify(Ie)),""].join(".")}function tt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ln(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function K(){var D;const w=null===(D=et())||void 0===D?void 0:D.forceEnvironment;if("node"===w)return!0;if("browser"===w)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Jt(){return"object"==typeof self&&self.self===self}function Xt(){const D="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof D&&void 0!==D.id}function Wr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Mi(){const D=tt();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function Zr(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O(){try{return"object"==typeof indexedDB}catch{return!1}}function L(){return new Promise((D,w)=>{try{let A=!0;const q="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(q);M.onsuccess=()=>{M.result.close(),A||self.indexedDB.deleteDatabase(q),D(!0)},M.onupgradeneeded=()=>{A=!1},M.onerror=()=>{var pe;w((null===(pe=M.error)||void 0===pe?void 0:pe.message)||"")}}catch(A){w(A)}})}class Y extends Error{constructor(w,A,q){super(A),this.code=w,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Z.prototype.create)}}class Z{constructor(w,A,q){this.service=w,this.serviceName=A,this.errors=q}create(w,...A){const q=A[0]||{},M=`${this.service}/${w}`,pe=this.errors[w],Ie=pe?function Pe(D,w){return D.replace(ot,(A,q)=>{const M=w[q];return null!=M?String(M):`<${q}?>`})}(pe,q):"Error";return new Y(M,`${this.serviceName}: ${Ie} (${M}).`,q)}}const ot=/\{\$([^}]+)}/g;function An(D,w){return Object.prototype.hasOwnProperty.call(D,w)}function Rr(D){for(const w in D)if(Object.prototype.hasOwnProperty.call(D,w))return!1;return!0}function ro(D,w){if(D===w)return!0;const A=Object.keys(D),q=Object.keys(w);for(const M of A){if(!q.includes(M))return!1;const pe=D[M],Ie=w[M];if(Pr(pe)&&Pr(Ie)){if(!ro(pe,Ie))return!1}else if(pe!==Ie)return!1}for(const M of q)if(!A.includes(M))return!1;return!0}function Pr(D){return null!==D&&"object"==typeof D}function Zs(D){const w=[];for(const[A,q]of Object.entries(D))Array.isArray(q)?q.forEach(M=>{w.push(encodeURIComponent(A)+"="+encodeURIComponent(M))}):w.push(encodeURIComponent(A)+"="+encodeURIComponent(q));return w.length?"&"+w.join("&"):""}function Mr(D){const w={};return D.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[M,pe]=q.split("=");w[decodeURIComponent(M)]=decodeURIComponent(pe)}}),w}function du(D){const w=D.indexOf("?");if(!w)return"";const A=D.indexOf("#",w);return D.substring(w,A>0?A:void 0)}function oo(D,w){const A=new xi(D,w);return A.subscribe.bind(A)}class xi{constructor(w,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{w(this)}).catch(q=>{this.error(q)})}next(w){this.forEachObserver(A=>{A.next(w)})}error(w){this.forEachObserver(A=>{A.error(w)}),this.close(w)}complete(){this.forEachObserver(w=>{w.complete()}),this.close()}subscribe(w,A,q){let M;if(void 0===w&&void 0===A&&void 0===q)throw new Error("Missing Observer.");M=function Ni(D,w){if("object"!=typeof D||null===D)return!1;for(const A of w)if(A in D&&"function"==typeof D[A])return!0;return!1}(w,["next","error","complete"])?w:{next:w,error:A,complete:q},void 0===M.next&&(M.next=Co),void 0===M.error&&(M.error=Co),void 0===M.complete&&(M.complete=Co);const pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),pe}unsubscribeOne(w){void 0===this.observers||void 0===this.observers[w]||(delete this.observers[w],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(w){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,w)}sendOne(w,A){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[w])try{A(this.observers[w])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(w){this.finalized||(this.finalized=!0,void 0!==w&&(this.finalError=w),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Co(){}function fu(D){return D&&D._delegate?D._delegate:D}},488:(to,kn,ze)=>{let ve=null,Fe=1;function qe(t){const e=ve;return ve=t,e}function Je(t){if((!vt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Fe)){if(!t.producerMustRecompute(t)&&!yn(t))return t.dirty=!1,void(t.lastCleanEpoch=Fe);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Fe}}function yn(t){or(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Je(n),r!==n.version))return!0}return!1}function ct(t,e){if(function tt(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),or(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)ct(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];or(i),i.producerIndexOfThis[r]=e}}function vt(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function or(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Mi=null;function ke(t){return"function"==typeof t}function Fn(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const vn=Fn(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function An(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ke(r))try{r()}catch(o){e=o instanceof vn?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{ro(o)}catch(s){e=e??[],s instanceof vn?e=[...e,...s.errors]:e.push(s)}}if(e)throw new vn(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ro(e);else{if(e instanceof Ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&An(n,e)}remove(e){const{_finalizers:n}=this;n&&An(n,e),e instanceof Ct&&e._removeParent(this)}}Ct.EMPTY=(()=>{const t=new Ct;return t.closed=!0,t})();const Rr=Ct.EMPTY;function lu(t){return t instanceof Ct||t&&"closed"in t&&ke(t.remove)&&ke(t.add)&&ke(t.unsubscribe)}function ro(t){ke(t)?t():t.unsubscribe()}const Pr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},io={setTimeout(t,e,...n){const{delegate:r}=io;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=io;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Zs(t){io.setTimeout(()=>{const{onUnhandledError:e}=Pr;if(!e)throw t;e(t)})}function Mr(){}const du=xi("C",void 0,void 0);function xi(t,e,n){return{kind:t,value:e,error:n}}let _r=null;function Ni(t){if(Pr.useDeprecatedSynchronousErrorHandling){const e=!_r;if(e&&(_r={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=_r;if(_r=null,n)throw r}}else t()}class Do extends Ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lu(e)&&e.add(this)):this.destination=Qs}static create(e,n,r){return new qn(e,n,r)}next(e){this.isStopped?Ks(function oo(t){return xi("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ks(function xr(t){return xi("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ks(du,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const so=Function.prototype.bind;function ao(t,e){return so.call(t,e)}class Kr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){uo(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){uo(r)}else uo(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){uo(n)}}}class qn extends Do{constructor(e,n,r){let i;if(super(),ke(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Pr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ao(e.next,o),error:e.error&&ao(e.error,o),complete:e.complete&&ao(e.complete,o)}):i=e}this.destination=new Kr(i)}}function uo(t){Pr.useDeprecatedSynchronousErrorHandling?function Co(t){Pr.useDeprecatedSynchronousErrorHandling&&_r&&(_r.errorThrown=!0,_r.error=t)}(t):Zs(t)}function Ks(t,e){const{onStoppedNotification:n}=Pr;n&&io.setTimeout(()=>n(t,e))}const Qs={closed:!0,next:Mr,error:function hu(t){throw t},complete:Mr},ci="function"==typeof Symbol&&Symbol.observable||"@@observable";function Gn(t){return t}function ds(t){return 0===t.length?Gn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let zt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function D(t){return t&&t instanceof Do||function fu(t){return t&&ke(t.next)&&ke(t.error)&&ke(t.complete)}(t)&&lu(t)}(n)?n:new qn(n,r,i);return Ni(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ys(r))((i,o)=>{const s=new qn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ci](){return this}pipe(...n){return ds(n)(this)}toPromise(n){return new(n=Ys(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Ys(t){var e;return null!==(e=t??Pr.Promise)&&void 0!==e?e:Promise}const w=Fn(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let A=(()=>{class t extends zt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new q(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new w}next(n){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Rr:(this.currentObservers=null,o.push(n),new Ct(()=>{this.currentObservers=null,An(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new zt;return n.source=this,n}}return t.create=(e,n)=>new q(e,n),t})();class q extends A{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Rr}}class M extends A{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function pe(t){return ke(t?.lift)}function Ie(t){return e=>{if(pe(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function be(t,e,n,r,i){return new yr(t,e,n,r,i)}class yr extends Do{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ce(t,e){return Ie((n,r)=>{let i=0;n.subscribe(be(r,o=>{r.next(t.call(e,o,i++))}))})}function Ue(t){for(let e in t)if(t[e]===Ue)return e;throw Error("Could not find renamed property on target object.")}function dt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(dt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function li(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Pc=Ue({__forward_ref__:Ue});function F(t){return t.__forward_ref__=F,t.toString=function(){return dt(this())},t}function b(t){return X(t)?t():t}function X(t){return"function"==typeof t&&t.hasOwnProperty(Pc)&&t.__forward_ref__===F}function ye(t){return t&&!!t.\u0275providers}const nt="https://g.co/ng/security#xss";class H extends Error{constructor(e,n){super(function Lt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}const St=Ue({\u0275cmp:Ue}),di=Ue({\u0275dir:Ue}),Ao=Ue({\u0275pipe:Ue}),Lg=Ue({\u0275mod:Ue}),co=Ue({\u0275fac:Ue}),fs=Ue({__NG_ELEMENT_ID__:Ue}),Fg=Ue({__NG_ENV_ID__:Ue});function Be(t){return"string"==typeof t?t:null==t?"":String(t)}function fh(t,e){throw new H(-201,!1)}function vr(t,e){null==t&&function xe(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ee(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ki(t){return{providers:t.providers||[],imports:t.imports||[]}}function Js(t){return xc(t,ps)||xc(t,Wg)}function xc(t,e){return t.hasOwnProperty(e)?t[e]:null}function Xs(t){return t&&(t.hasOwnProperty(gu)||t.hasOwnProperty(ph))?t[gu]:null}const ps=Ue({\u0275prov:Ue}),gu=Ue({\u0275inj:Ue}),Wg=Ue({ngInjectableDef:Ue}),ph=Ue({ngInjectorDef:Ue});var rt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(rt||{});let mu;function Zg(){return mu}function Wn(t){const e=mu;return mu=t,e}function Kg(t,e,n){const r=Js(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&rt.Optional?null:void 0!==e?e:void fh()}const Rt=globalThis;class he{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const _u={},_h="__NG_DI_FLAG__",ea="ngTempTokenPath",NI=/\n/gm,ta="__source";let yu;function Zn(t){const e=yu;return yu=t,e}function na(t,e=rt.Default){if(void 0===yu)throw new H(-203,!1);return null===yu?Kg(t,void 0,e):yu.get(t,e&rt.Optional?null:void 0,e)}function re(t,e=rt.Default){return(Zg()||na)(b(t),e)}function oe(t,e=rt.Default){return re(t,vu(e))}function vu(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ih(t){const e=[];for(let n=0;n<t.length;n++){const r=b(t[n]);if(Array.isArray(r)){if(0===r.length)throw new H(900,!1);let i,o=rt.Default;for(let s=0;s<r.length;s++){const a=r[s],u=kI(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(re(i,o))}else e.push(re(r))}return e}function Fi(t,e){return t[_h]=e,t.prototype[_h]=e,t}function kI(t){return t[_h]}function Vi(t){return{toString:t}.toString()}var ra=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ra||{}),en=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(en||{});const fi={},ht=[];function kc(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function ia(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];wh(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Eh(t){return 3===t||4===t||6===t}function wh(t){return 64===t.charCodeAt(0)}function Iu(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Lc(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Lc(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const Fc="ng-template";function Th(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if("string"==typeof o&&i){const s=t[r++];if(n&&"class"===o&&-1!==kc(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function Eu(t){return 4===t.type&&t.value!==Fc}function Ch(t,e,n){return e===(4!==t.type||n?t.value:Fc)}function nm(t,e,n){let r=4;const i=t.attrs||[],o=function Dh(t){for(let e=0;e<t.length;e++)if(Eh(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Ch(t,u,n)||""===u&&1===e.length){if(Or(r))return!1;s=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Th(t.attrs,d,n)){if(Or(r))return!1;s=!0}continue}const g=rm(8&r?"class":u,i,Eu(t),n);if(-1===g){if(Or(r))return!1;s=!0;continue}if(""!==d){let _;_=g>o?"":i[g+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==kc(y,d,0)||2&r&&d!==_){if(Or(r))return!1;s=!0}}}}else{if(!s&&!Or(r)&&!Or(u))return!1;if(s&&Or(u))continue;s=!1,r=u|1&r}}return Or(r)||s}function Or(t){return 0==(1&t)}function rm(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function im(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Vc(t,e,n=!1){for(let r=0;r<e.length;r++)if(nm(t,e[r],n))return!0;return!1}function Ah(t,e){return t?":not("+e.trim()+")":e}function Sh(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Or(s)&&(e+=Ah(o,i),i=""),r=s,o=o||!Or(r);n++}return""!==i&&(e+=Ah(o,i)),e}function pi(t){return Vi(()=>{const e=om(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ra.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||en.Emulated,styles:t.styles||ht,_:null,schemas:t.schemas||null,tView:null,id:""};jc(n);const r=t.dependencies;return n.directiveDefs=Tu(r,!1),n.pipeDefs=Tu(r,!0),n.id=function FI(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Ph(t){return Qe(t)||In(t)}function wu(t){return null!==t}function gi(t){return Vi(()=>({type:t.type,bootstrap:t.bootstrap||ht,declarations:t.declarations||ht,imports:t.imports||ht,exports:t.exports||ht,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Bc(t,e){if(null==t)return fi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function Sn(t){return Vi(()=>{const e=om(t);return jc(e),e})}function Qe(t){return t[St]||null}function In(t){return t[di]||null}function En(t){return t[Ao]||null}function Rn(t,e){const n=t[Lg]||null;if(!n&&!0===e)throw new Error(`Type ${dt(t)} does not have '\u0275mod' property.`);return n}function om(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||fi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ht,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Bc(t.inputs,e),outputs:Bc(t.outputs),debugInfo:null}}function jc(t){t.features?.forEach(e=>e(t))}function Tu(t,e){if(!t)return null;const n=e?En:Ph;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(wu)}const Vt=0,ie=1,Re=2,an=3,mi=4,Pn=5,_i=6,oa=7,wt=8,sr=9,Qr=10,$e=11,_s=12,sm=13,Ro=14,qt=15,ys=16,sa=17,Yr=18,Cu=19,$c=20,Po=21,Hc=22,Mo=23,Ve=25,xh=1,yi=7,aa=9,un=10;var Nh=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Nh||{});function Qn(t){return Array.isArray(t)&&"object"==typeof t[xh]}function ar(t){return Array.isArray(t)&&!0===t[xh]}function am(t){return 0!=(4&t.flags)}function ua(t){return t.componentOffset>-1}function ca(t){return 1==(1&t.flags)}function vi(t){return!!t.template}function Oh(t){return 0!=(512&t[Re])}function Bi(t,e){return t.hasOwnProperty(co)?t[co]:null}class DA{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ir(){return pm}function pm(t){return t.type.prototype.ngOnChanges&&(t.setInput=bu),UI}function UI(){const t=cn(this),e=t?.current;if(e){const n=t.previous;if(n===fi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function bu(t,e,n,r){const i=this.declaredInputs[n],o=cn(t)||function BI(t,e){return t[gm]=e}(t,{previous:fi,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new DA(u&&u.currentValue,e,a===fi),t[r]=e}Ir.ngInherit=!0;const gm="__ngSimpleChanges__";function cn(t){return t[gm]||null}const Jr=function(t,e,n){};let Lh=!1;function Dt(t){for(;Array.isArray(t);)t=t[Vt];return t}function xo(t,e){return Dt(e[t])}function ur(t,e){return Dt(e[t.index])}function da(t,e){return t.data[e]}function kr(t,e){const n=e[t];return Qn(n)?n:n[Vt]}function qc(t){return 128==(128&t[Re])}function ji(t,e){return null==e?null:t[e]}function zI(t){t[sa]=0}function ha(t){1024&t[Re]||(t[Re]|=1024,qc(t)&&Su(t))}function vm(t){return 9216&t[Re]||t[Mo]?.dirty}function Bh(t){vm(t)?Su(t):64&t[Re]&&(function $I(){return Lh}()?(t[Re]|=1024,Su(t)):t[Qr].changeDetectionScheduler?.notify())}function Su(t){t[Qr].changeDetectionScheduler?.notify();let e=Is(t);for(;null!==e&&!(8192&e[Re])&&(e[Re]|=8192,qc(e));)e=Is(e)}function Gc(t,e){if(256==(256&t[Re]))throw new H(911,!1);null===t[Po]&&(t[Po]=[]),t[Po].push(e)}function Is(t){const e=t[an];return ar(e)?e[an]:e}const Le={lFrame:Yc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wm(){return Le.bindingsEnabled}function B(){return Le.lFrame.lView}function it(){return Le.lFrame.tView}function Wc(t){return Le.lFrame.contextLView=t,t[wt]}function ga(t){return Le.lFrame.contextLView=null,t}function Tt(){let t=Zc();for(;null!==t&&64===t.type;)t=t.parent;return t}function Zc(){return Le.lFrame.currentTNode}function Xr(t,e){const n=Le.lFrame;n.currentTNode=t,n.isParent=e}function $h(){return Le.lFrame.isParent}function lo(){return Le.lFrame.bindingIndex}function ei(){return Le.lFrame.bindingIndex++}function $i(t){const e=Le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Hh(t,e){const n=Le.lFrame;n.bindingIndex=n.bindingRootIndex=t,Mu(e)}function Mu(t){Le.lFrame.currentDirectiveIndex=t}function xu(t){Le.lFrame.currentQueryIndex=t}function XI(t){const e=t[ie];return 2===e.type?e.declTNode:1===e.type?t[Pn]:null}function _a(t,e,n){if(n&rt.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&rt.Host||(i=XI(o),null===i||(o=o[Ro],10&i.type))););if(null===i)return!1;e=i,t=o}const r=Le.lFrame=bm();return r.currentTNode=e,r.lView=t,!0}function qh(t){const e=bm(),n=t[ie];Le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function bm(){const t=Le.lFrame,e=null===t?null:t.child;return null===e?Yc(t):e}function Yc(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Jc(){const t=Le.lFrame;return Le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Xc=Jc;function Gh(){const t=Jc();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Vn(){return Le.lFrame.selectedIndex}function ko(t){Le.lFrame.selectedIndex=t}function Nt(){const t=Le.lFrame;return da(t.tView,t.selectedIndex)}let Am=!0;function tl(){return Am}function Hi(t){Am=t}function ya(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=f&&(t.destroyHooks??=[]).push(n,f)}}function Es(t,e,n){rl(t,e,3,n)}function va(t,e,n,r){(3&t[Re])===n&&rl(t,e,n,r)}function nl(t,e){let n=t[Re];(3&n)===e&&(n&=16383,n+=1,t[Re]=n)}function rl(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[sa]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[sa]+=65536),(a<o||-1==o)&&(Rm(t,n,e,u),t[sa]=(4294901760&t[sa])+u+2),u++}function Sm(t,e){Jr(4,t,e);const n=qe(null);try{e.call(t)}finally{qe(n),Jr(5,t,e)}}function Rm(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[Re]>>14<t[sa]>>16&&(3&t[Re])===e&&(t[Re]+=16384,Sm(a,o)):Sm(a,o)}const ws=-1;class Ia{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Qh(t){return t!==ws}function Nu(t){return 32767&t}function Ou(t,e){let n=function Mm(t){return t>>16}(t),r=e;for(;n>0;)r=r[Ro],n--;return r}let Ea=!0;function ol(t){const e=Ea;return Ea=t,e}const xm=255,Nm=5;let aE=0;const zi={};function sl(t,e){const n=Om(t,e);if(-1!==n)return n;const r=e[ie];r.firstCreatePass&&(t.injectorIndex=e.length,ku(r.data,t),ku(e,null),ku(r.blueprint,null));const i=al(t,e),o=t.injectorIndex;if(Qh(i)){const s=Nu(i),a=Ou(i,e),u=a[ie].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|u[s+d]}return e[o+8]=i,o}function ku(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Om(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function al(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=ll(i),null===r)return ws;if(n++,i=i[Ro],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ws}function Yh(t,e,n){!function uE(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(fs)&&(r=n[fs]),null==r&&(r=n[fs]=aE++);const i=r&xm;e.data[t+(i>>Nm)]|=1<<i}(t,e,n)}function km(t,e,n){if(n&rt.Optional||void 0!==t)return t;fh()}function Jh(t,e,n,r){if(n&rt.Optional&&void 0===r&&(r=null),!(n&(rt.Self|rt.Host))){const i=t[sr],o=Wn(void 0);try{return i?i.get(e,r,n&rt.Optional):Kg(e,r,n&rt.Optional)}finally{Wn(o)}}return km(r,0,n)}function Lm(t,e,n,r=rt.Default,i){if(null!==t){if(2048&e[Re]&&!(r&rt.Self)){const s=function SA(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[Re]&&!(512&s[Re]);){const a=Fm(o,s,n,r|rt.Self,zi);if(a!==zi)return a;let u=o.parent;if(!u){const d=s[$c];if(d){const f=d.get(n,zi,r);if(f!==zi)return f}u=ll(s),s=s[Ro]}o=u}return i}(t,e,n,r,zi);if(s!==zi)return s}const o=Fm(t,e,n,r,zi);if(o!==zi)return o}return Jh(e,n,r,i)}function Fm(t,e,n,r,i){const o=function Xh(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(fs)?t[fs]:void 0;return"number"==typeof e?e>=0?e&xm:dE:e}(n);if("function"==typeof o){if(!_a(e,t,r))return r&rt.Host?km(i,0,r):Jh(e,n,r,i);try{let s;if(s=o(r),null!=s||r&rt.Optional)return s;fh()}finally{Xc()}}else if("number"==typeof o){let s=null,a=Om(t,e),u=ws,d=r&rt.Host?e[qt][Pn]:null;for((-1===a||r&rt.SkipSelf)&&(u=-1===a?al(t,e):e[a+8],u!==ws&&Vm(r,!1)?(s=e[ie],a=Nu(u),e=Ou(u,e)):a=-1);-1!==a;){const f=e[ie];if(cl(o,a,f.data)){const g=lE(a,e,n,s,r,d);if(g!==zi)return g}u=e[a+8],u!==ws&&Vm(r,e[ie].data[a+8]===d)&&cl(o,a,e)?(s=f,a=Nu(u),e=Ou(u,e)):a=-1}}return i}function lE(t,e,n,r,i,o){const s=e[ie],a=s.data[t+8],f=function ul(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,f=o>>20,_=i?a+f:t.directiveEnd;for(let y=r?a:a+f;y<_;y++){const I=s[y];if(y<u&&n===I||y>=u&&I.type===n)return y}if(i){const y=s[u];if(y&&vi(y)&&y.type===n)return u}return null}(a,s,n,null==r?ua(a)&&Ea:r!=s&&0!=(3&a.type),i&rt.Host&&o===a);return null!==f?Ts(e,s,f,a):zi}function Ts(t,e,n,r){let i=t[n];const o=e.data;if(function iE(t){return t instanceof Ia}(i)){const s=i;s.resolving&&function bI(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,`Circular dependency in DI detected for ${t}${n}`)}(function mt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Be(t)}(o[n]));const a=ol(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?Wn(s.injectImpl):null;_a(t,r,rt.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function rE(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=pm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==d&&Wn(d),ol(a),s.resolving=!1,Xc()}}return i}function cl(t,e,n){return!!(n[e+(t>>Nm)]&1<<t)}function Vm(t,e){return!(t&rt.Self||t&rt.Host&&e)}class hn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Lm(this._tNode,this._lView,e,vu(r),n)}}function dE(){return new hn(Tt(),B())}function Lu(t){return Vi(()=>{const e=t.prototype.constructor,n=e[co]||ef(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[co]||ef(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ef(t){return X(t)?()=>{const e=ef(b(t));return e&&e()}:Bi(t)}function ll(t){const e=t[ie],n=e.type;return 2===n?e.declTNode:1===n?t[Pn]:null}const Cs="__parameters__";function Ta(t,e,n){return Vi(()=>{const r=function tf(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,d,f){const g=u.hasOwnProperty(Cs)?u[Cs]:Object.defineProperty(u,Cs,{value:[]})[Cs];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Vo(t,e){t.forEach(n=>Array.isArray(n)?Vo(n,e):e(n))}function Bm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Lr(t,e,n){let r=Uo(t,e);return r>=0?t[1|r]=n:(r=~r,function sf(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function af(t,e){const n=Uo(t,e);if(n>=0)return t[1|n]}function Uo(t,e){return function Hm(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Vu=Fi(Ta("Optional"),8),gl=Fi(Ta("SkipSelf"),4),fo=new he("ENVIRONMENT_INITIALIZER"),Jm=new he("INJECTOR",-1),yl=new he("INJECTOR_DEF_TYPES");class vl{get(e,n=_u){if(n===_u){const r=new Error(`NullInjectorError: No provider for ${dt(e)}!`);throw r.name="NullInjectorError",r}return n}}function Xm(...t){return{\u0275providers:e_(0,t),\u0275fromNgModule:!0}}function e_(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Vo(e,s=>{const a=s;Il(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&t_(i,o),n}function t_(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Yn(i,o=>{e(o,r)})}}function Il(t,e,n,r){if(!(t=b(t)))return!1;let i=null,o=Xs(t);const s=!o&&Qe(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=Xs(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of u)Il(d,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;r.add(i);try{Vo(o.imports,f=>{Il(f,e,n,r)&&(d||=[],d.push(f))})}finally{}void 0!==d&&t_(d,e)}if(!a){const d=Bi(i)||(()=>new i);e({provide:i,useFactory:d,deps:ht},i),e({provide:yl,useValue:i,multi:!0},i),e({provide:fo,useValue:()=>re(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const d=t;Yn(u,f=>{e(f,d)})}}}return i!==t&&void 0!==t.providers}function Yn(t,e){for(let n of t)ye(n)&&(n=n.\u0275providers),Array.isArray(n)?Yn(n,e):e(n)}const hf=Ue({provide:String,useValue:Ue});function Bu(t){return null!==t&&"object"==typeof t&&hf in t}function Ii(t){return"function"==typeof t}const El=new he("Set Injector scope."),wl={},ff={};let pf;function Tl(){return void 0===pf&&(pf=new vl),pf}class ti{}class ba extends ti{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,j(e,s=>this.processProvider(s)),this.records.set(Jm,m(void 0,this)),i.has("environment")&&this.records.set(ti,m(void 0,this));const o=this.records.get(El);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yl,ht,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Zn(this),r=Wn(void 0);try{return e()}finally{Zn(n),Wn(r)}}get(e,n=_u,r=rt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Fg))return e[Fg](this);r=vu(r);const o=Zn(this),s=Wn(void 0);try{if(!(r&rt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function P(t){return"function"==typeof t||"object"==typeof t&&t instanceof he}(e)&&Js(e);u=d&&this.injectableDefInScope(d)?m(h(e),wl):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&rt.Self?Tl():this.parent).get(e,n=r&rt.Optional&&n===_u?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ea]=a[ea]||[]).unshift(dt(e)),o)throw a;return function Oc(t,e,n,r){const i=t[ea];throw e[ta]&&i.unshift(e[ta]),t.message=function tm(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=dt(e);if(Array.isArray(e))i=e.map(dt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):dt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(NI,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ea]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Wn(s),Zn(o)}}resolveInjectorInitializers(){const e=Zn(this),n=Wn(void 0);try{const i=this.get(fo,ht,rt.Self);for(const o of i)o()}finally{Zn(e),Wn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){let n=Ii(e=b(e))?e:b(e&&e.provide);const r=function l(t){return Bu(t)?m(void 0,t.useValue):m(function p(t,e,n){let r;if(Ii(t)){const i=b(t);return Bi(i)||h(i)}if(Bu(t))r=()=>b(t.useValue);else if(function Gi(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Ih(t.deps||[]));else if(function n_(t){return!(!t||!t.useExisting)}(t))r=()=>re(b(t.useExisting));else{const i=b(t&&(t.useClass||t.provide));if(!function v(t){return!!t.deps}(t))return Bi(i)||h(i);r=()=>new i(...Ih(t.deps))}return r}(t),wl)}(e);if(!Ii(e)&&!0===e.multi){let i=this.records.get(n);i||(i=m(void 0,wl,!0),i.factory=()=>Ih(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===wl&&(n.value=ff,n.value=n.factory()),"object"==typeof n.value&&n.value&&function T(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=b(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function h(t){const e=Js(t),n=null!==e?e.factory:Bi(t);if(null!==n)return n;if(t instanceof he)throw new H(204,!1);if(t instanceof Function)return function c(t){if(t.length>0)throw new H(204,!1);const n=function xI(t){return t&&(t[ps]||t[Wg])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new H(204,!1)}function m(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function j(t,e){for(const n of t)Array.isArray(n)?j(n,e):n&&ye(n)?j(n.\u0275providers,e):e(n)}function se(t,e){t instanceof ba&&t.assertNotDestroyed();const r=Zn(t),i=Wn(void 0);try{return e()}finally{Zn(r),Wn(i)}}function gf(t,e=null,n=null,r){const i=mf(t,e,n,r);return i.resolveInjectorInitializers(),i}function mf(t,e=null,n=null,r,i=new Set){const o=[n||ht,Xm(t)];return r=r||("object"==typeof t?void 0:dt(t)),new ba(o,e||Tl(),r||null,i)}let DE,Jn=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=_u;static#t=this.NULL=new vl;static create(n,r){if(Array.isArray(n))return gf({name:""},r,n,"");{const i=n.name??"";return gf({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Ee({token:t,providedIn:"any",factory:()=>re(Jm)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();const c_=new he("AppId",{providedIn:"root",factory:()=>tU}),tU="ng",OA=new he("Platform Initializer"),$o=new he("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kA=new he("CSP nonce",{providedIn:"root",factory:()=>function Sa(){if(void 0!==DE)return DE;if(typeof document<"u")return document;throw new H(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function wi(t){return t instanceof Function?t():t}function f_(t){return 128==(128&t.flags)}var Ma=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ma||{});const PE=new Map;let pU=0;const xE="__ngContext__";function wr(t,e){Qn(e)?(t[xE]=e[Cu],function mU(t){PE.set(t[Cu],t)}(e)):t[xE]=e}let NE;function OE(t,e){return NE(t,e)}function Al(t,e,n,r,i){if(null!=r){let o,s=!1;ar(r)?o=r:Qn(r)&&(s=!0,r=r[Vt]);const a=Dt(r);0===t&&null!==n?null==i?rS(e,n,a):$u(e,n,a,i||null,!0):1===t&&null!==n?$u(e,n,a,i||null,!0):2===t?function I_(t,e,n){const r=y_(t,e);r&&function xU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function kU(t,e,n,r,i){const o=n[yi];o!==Dt(n)&&Al(e,t,r,o,i);for(let a=un;a<n.length;a++){const u=n[a];E_(u[ie],u,t,e,r,o)}}(e,t,o,n,i)}}function m_(t,e,n){return t.createElement(e,n)}function eS(t,e){e[Qr].changeDetectionScheduler?.notify(),E_(t,e,e[$e],2,null,null)}function tS(t,e){const n=t[aa],r=n.indexOf(e);n.splice(r,1)}function Ef(t,e){if(t.length<=un)return;const n=un+e,r=t[n];if(r){const i=r[ys];null!==i&&i!==t&&tS(i,r),e>0&&(t[n-1][mi]=r[mi]);const o=dl(t,un+e);!function DU(t,e){eS(t,e),e[Vt]=null,e[Pn]=null}(r[ie],r);const s=o[Yr];null!==s&&s.detachView(o[ie]),r[an]=null,r[mi]=null,r[Re]&=-129}return r}function __(t,e){if(!(256&e[Re])){const n=e[$e];n.destroyNode&&E_(t,e,n,3,null,null),function AU(t){let e=t[_s];if(!e)return LE(t[ie],t);for(;e;){let n=null;if(Qn(e))n=e[_s];else{const r=e[un];r&&(n=r)}if(!n){for(;e&&!e[mi]&&e!==t;)Qn(e)&&LE(e[ie],e),e=e[an];null===e&&(e=t),Qn(e)&&LE(e[ie],e),n=e&&e[mi]}e=n}}(e)}}function LE(t,e){if(!(256&e[Re])){e[Re]&=-129,e[Re]|=256,e[Mo]&&function zn(t){if(or(t),vt(t))for(let e=0;e<t.producerNode.length;e++)ct(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(e[Mo]),function MU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Ia)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Jr(4,a,u);try{u.call(a)}finally{Jr(5,a,u)}}else{Jr(4,i,o);try{o.call(i)}finally{Jr(5,i,o)}}}}}(t,e),function PU(t,e){const n=t.cleanup,r=e[oa];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[oa]=null);const i=e[Po];if(null!==i){e[Po]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[ie].type&&e[$e].destroy();const n=e[ys];if(null!==n&&ar(e[an])){n!==e[an]&&tS(n,e);const r=e[Yr];null!==r&&r.detachView(t)}!function _U(t){PE.delete(t[Cu])}(e)}}function FE(t,e,n){return function nS(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Vt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===en.None||o===en.Emulated)return null}return ur(r,n)}}(t,e.parent,n)}function $u(t,e,n,r,i){t.insertBefore(e,n,r,i)}function rS(t,e,n){t.appendChild(e,n)}function iS(t,e,n,r,i){null!==r?$u(t,e,n,r,i):rS(t,e,n)}function y_(t,e){return t.parentNode(e)}let VE,w_,T_,aS=function sS(t,e,n){return 40&t.type?ur(t,n):null};function v_(t,e,n,r){const i=FE(t,r,e),o=e[$e],a=function oS(t,e,n){return aS(t,e,n)}(r.parent||e[Pn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)iS(o,i,n[u],a,!1);else iS(o,i,n,a,!1);void 0!==VE&&VE(o,r,e,n,i)}function wf(t,e){if(null!==e){const n=e.type;if(3&n)return ur(e,t);if(4&n)return UE(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return wf(t,r);{const i=t[e.index];return ar(i)?UE(-1,i):Dt(i)}}if(32&n)return OE(e,t)()||Dt(t[e.index]);{const r=cS(t,e);return null!==r?Array.isArray(r)?r[0]:wf(Is(t[qt]),r):wf(t,e.next)}}return null}function cS(t,e){return null!==e?t[qt][Pn].projection[e.projection]:null}function UE(t,e){const n=un+t+1;if(n<e.length){const r=e[n],i=r[ie].firstChild;if(null!==i)return wf(r,i)}return e[yi]}function BE(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&wr(Dt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)BE(t,e,n.child,r,i,o,!1),Al(e,t,i,a,o);else if(32&u){const d=OE(n,r);let f;for(;f=d();)Al(e,t,i,f,o);Al(e,t,i,a,o)}else 16&u?dS(t,e,r,n,i,o):Al(e,t,i,a,o);n=s?n.projectionNext:n.next}}function E_(t,e,n,r,i,o){BE(n,r,t.firstChild,e,i,o,!1)}function dS(t,e,n,r,i,o){const s=n[qt],u=s[Pn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Al(e,t,i,u[d],o);else{let d=u;const f=s[an];f_(r)&&(d.flags|=128),BE(t,e,d,f,i,o,!0)}}function hS(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function fS(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&ia(t,e,r),null!==i&&hS(t,e,i),null!==o&&function FU(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function Sl(t){return function jE(){if(void 0===w_&&(w_=null,Rt.trustedTypes))try{w_=Rt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return w_}()?.createHTML(t)||t}function mS(t){return function $E(){if(void 0===T_&&(T_=null,Rt.trustedTypes))try{T_=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return T_}()?.createScriptURL(t)||t}class Hu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nt})`}}class jU extends Hu{getTypeName(){return"HTML"}}class $U extends Hu{getTypeName(){return"Style"}}class HU extends Hu{getTypeName(){return"Script"}}class zU extends Hu{getTypeName(){return"URL"}}class qU extends Hu{getTypeName(){return"ResourceURL"}}function Ti(t){return t instanceof Hu?t.changingThisBreaksApplicationSecurity:t}function Ho(t,e){const n=function GU(t){return t instanceof Hu&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${nt})`)}return n===e}class JU{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Sl(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class XU{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Sl(e),n}}const tB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function C_(t){return(t=String(t)).match(tB)?t:"unsafe:"+t}function As(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Tf(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const yS=As("area,br,col,hr,img,wbr"),vS=As("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),IS=As("rp,rt"),HE=Tf(yS,Tf(vS,As("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tf(IS,As("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tf(IS,vS)),zE=As("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ES=Tf(zE,As("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),As("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nB=As("script,style,template");class rB{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!HE.hasOwnProperty(n))return this.sanitizedSomething=!0,!nB.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!ES.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;zE[a]&&(u=C_(u)),this.buf.push(" ",s,'="',wS(u),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();HE.hasOwnProperty(n)&&!yS.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(wS(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const iB=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oB=/([^\#-~ |!])/g;function wS(t){return t.replace(/&/g,"&amp;").replace(iB,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(oB,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let D_;function TS(t,e){let n=null;try{D_=D_||function _S(t){const e=new XU(t);return function eB(){try{return!!(new window.DOMParser).parseFromString(Sl(""),"text/html")}catch{return!1}}()?new JU(e):e}(t);let r=e?String(e):"";n=D_.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=D_.getInertBodyElement(r)}while(r!==o);return Sl((new rB).sanitizeChildren(qE(n)||n))}finally{if(n){const r=qE(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function qE(t){return"content"in t&&function sB(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Wi=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Wi||{});function CS(t){const e=Cf();return e?e.sanitize(Wi.URL,t)||"":Ho(t,"URL")?Ti(t):C_(Be(t))}function GE(t){const e=Cf();if(e)return mS(e.sanitize(Wi.RESOURCE_URL,t)||"");if(Ho(t,"ResourceURL"))return mS(Ti(t));throw new H(904,!1)}function Cf(){const t=B();return t&&t[Qr].sanitizer}class bS{}let AS=()=>null;function ew(t,e,n=!1){return AS(t,e,n)}class EB{}class PS{}class TB{resolveComponentFactory(e){throw function wB(t){const e=Error(`No component factory found for ${dt(t)}.`);return e.ngComponent=t,e}(e)}}let M_=(()=>{class t{static#e=this.NULL=new TB}return t})();function CB(){return Ml(Tt(),B())}function Ml(t,e){return new xa(ur(t,e))}let xa=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=CB}return t})();class xS{}let x_=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function bB(){const t=B(),n=kr(Tt().index,t);return(Qn(n)?n:t)[$e]}()}return t})(),AB=(()=>{class t{static#e=this.\u0275prov=Ee({token:t,providedIn:"root",factory:()=>null})}return t})();const rw={};function N_(t){return!!function iw(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}class OS{constructor(){}supports(e){return N_(e)}create(e){return new xB(e)}}const MB=(t,e)=>e;class xB{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||MB}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<LS(r,i,o)?n:r,a=LS(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const d=a-i,f=u-i;if(d!=f){for(let _=0;_<d;_++){const y=_<o.length?o[_]:o[_]=0,I=y+_;f<=I&&I<d&&(o[_]=y+1)}o[s.previousIndex]=f-d}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!N_(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function PB(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new NB(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new kS),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kS),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class NB{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OB{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class kS{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new OB,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LS(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function VS(){return new ow([new OS])}let ow=(()=>{class t{static#e=this.\u0275prov=Ee({token:t,providedIn:"root",factory:VS});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||VS()),deps:[[t,new gl,new Vu]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new H(901,!1)}}return t})();function Af(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(Dt(o)),ar(o)&&BS(o,r);const s=n.type;if(8&s)Af(t,e,n.child,r);else if(32&s){const a=OE(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=cS(e,n);if(Array.isArray(a))r.push(...a);else{const u=Is(e[qt]);Af(u[ie],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function BS(t,e){for(let n=un;n<t.length;n++){const r=t[n],i=r[ie].firstChild;null!==i&&Af(r[ie],r,i,e)}t[yi]!==t[Vt]&&e.push(t[yi])}let jS=[];const jB={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Su(t.lView)},consumerOnSignalRead(){this.lView[Mo]=this}};function $S(t){return zS(t[_s])}function HS(t){return zS(t[mi])}function zS(t){for(;null!==t&&!ar(t);)t=t[mi];return t}function sw(t){return t.ngOriginalError}class Ss{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&sw(e);for(;n&&sw(n);)n=sw(n);return n||null}}const GS=new he("",{providedIn:"root",factory:()=>oe(Ss).handleError.bind(void 0)}),ZS=new he("",{providedIn:"root",factory:()=>!1}),We={};function ri(t=1){JS(it(),B(),Vn()+t,!1)}function JS(t,e,n,r){if(!r)if(3==(3&e[Re])){const o=t.preOrderCheckHooks;null!==o&&Es(e,o,n)}else{const o=t.preOrderHooks;null!==o&&va(e,o,0,n)}ko(n)}function Me(t,e=rt.Default){const n=B();return null===n?re(t,e):Lm(Tt(),n,b(t),e)}function L_(t,e,n,r,i,o,s,a,u,d,f){const g=e.blueprint.slice();return g[Vt]=i,g[Re]=204|r,(null!==d||t&&2048&t[Re])&&(g[Re]|=2048),zI(g),g[an]=g[Ro]=t,g[wt]=n,g[Qr]=s||t&&t[Qr],g[$e]=a||t&&t[$e],g[sr]=u||t&&t[sr]||null,g[Pn]=o,g[Cu]=function gU(){return pU++}(),g[_i]=f,g[$c]=d,g[qt]=2==e.type?t[qt]:g,g}function xl(t,e,n,r,i){let o=t.data[e];if(null===o)o=function aw(t,e,n,r,i){const o=Zc(),s=$h(),u=t.data[e]=function nj(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function pa(){return null!==Le.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function YI(){return Le.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Oo(){const t=Le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Xr(o,!0),o}function Sf(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function eR(t,e,n,r,i){const o=Vn(),s=2&r;try{ko(-1),s&&e.length>Ve&&JS(t,e,Ve,!1),Jr(s?2:0,i),n(r,i)}finally{ko(o),Jr(s?3:1,i)}}function uw(t,e,n){if(am(e)){const r=qe(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{qe(r)}}}function cw(t,e,n){wm()&&(function cj(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;ua(n)&&function mj(t,e,n){const r=ur(e,t),i=tR(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=F_(t,L_(t,i,null,s,r,e,null,t[Qr].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||sl(n,e),wr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],d=Ts(e,t,a,n);wr(d,e),null!==s&&_j(0,a-i,d,u,0,s),vi(u)&&(kr(n.index,e)[wt]=Ts(e,t,a,n))}}(t,e,n,ur(n,e)),64==(64&n.flags)&&sR(t,e,n))}function lw(t,e,n=ur){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function tR(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=dw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function dw(t,e,n,r,i,o,s,a,u,d,f){const g=Ve+r,_=g+i,y=function QB(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:We);return n}(g,_),I="function"==typeof d?d():d;return y[ie]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:I,incompleteFirstPass:!1,ssrId:f}}let nR=()=>null;function rR(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?iR(n,e,i,o):r.hasOwnProperty(i)&&iR(n,e,r[i],o)}return n}function iR(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function hw(t,e,n,r){if(wm()){const i=null===r?null:{"":-1},o=function dj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(Vc(e,s.selectors,!1))if(r||(r=[]),vi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),fw(t,e,a.length)}else r.unshift(s),fw(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&oR(t,e,n,s,i,a),i&&function hj(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new H(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=Iu(n.mergedAttrs,n.attrs)}function oR(t,e,n,r,i,o){for(let d=0;d<r.length;d++)Yh(sl(n,e),t,r[d].type);!function pj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const f=r[d];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,u=Sf(t,e,r.length,null);for(let d=0;d<r.length;d++){const f=r[d];n.mergedAttrs=Iu(n.mergedAttrs,f.hostAttrs),gj(t,n,e,u,f),fj(u,f,i),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const g=f.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function rj(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,d=null;for(let f=e.directiveStart;f<i;f++){const g=o[f],_=n?n.get(g):null,I=_?_.outputs:null;u=rR(g.inputs,f,u,_?_.inputs:null),d=rR(g.outputs,f,d,I);const C=null===u||null===s||Eu(e)?null:yj(u,f,s);a.push(C)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,o)}function sR(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function JI(){return Le.lFrame.currentDirectiveIndex}();try{ko(o);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];Mu(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&lj(u,d)}}finally{ko(-1),Mu(s)}}function lj(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function fw(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function fj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vi(e)&&(n[""]=t)}}function gj(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Bi(i.type)),s=new Ia(o,vi(i),Me);t.blueprint[r]=s,n[r]=s,function aj(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function uj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Sf(t,n,i.hostVars,We),i)}function zo(t,e,n,r,i,o){const s=ur(t,e);!function pw(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?Be(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[$e],s,o,t.value,n,r,i)}function _j(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)aR(r,n,s[a++],s[a++],s[a++])}function aR(t,e,n,r,i){const o=qe(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{qe(o)}}function yj(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function uR(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cR(t,e){const n=t.contentQueries;if(null!==n){const r=qe(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];xu(n[i]),a.contentQueries(2,e[s],s)}}}finally{qe(r)}}}function F_(t,e){return t[_s]?t[sm][mi]=e:t[_s]=e,t[sm]=e,e}function gw(t,e,n){xu(0);const r=qe(null);try{e(t,n)}finally{qe(r)}}function V_(t,e){const n=t[sr],r=n?n.get(Ss,null):null;r&&r.handleError(e)}function mw(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];aR(t.data[s],e[s],r,a,i)}}function Rs(t,e,n){const r=xo(e,t);!function XA(t,e,n){t.setValue(e,n)}(t[$e],r,n)}function Ej(t,e,n,r){const i=e[Re];if(256==(256&i))return;e[Qr].inlineEffectRunner?.flush(),qh(e);let s=null,a=null;(function wj(t){return 2!==t.type})(t)&&(a=function VB(t){return t[Mo]??function UB(t){const e=jS.pop()??Object.create(jB);return e.lView=t,e}(t)}(e),s=function Ze(t){return t&&(t.nextProducerIndex=0),qe(t)}(a));try{zI(e),function Cm(t){return Le.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&eR(t,e,n,2,r);const u=3==(3&i);if(u){const g=t.preOrderCheckHooks;null!==g&&Es(e,g,null)}else{const g=t.preOrderHooks;null!==g&&va(e,g,0,null),nl(e,0)}if(function Tj(t){for(let e=$S(t);null!==e;e=HS(e)){if(!(e[Re]&Nh.HasTransplantedViews))continue;const n=e[aa];for(let r=0;r<n.length;r++){ha(n[r])}}}(e),fR(e,0),null!==t.contentQueries&&cR(t,e),u){const g=t.contentCheckHooks;null!==g&&Es(e,g)}else{const g=t.contentHooks;null!==g&&va(e,g,1),nl(e,1)}!function KB(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)ko(~i);else{const o=i,s=n[++r],a=n[++r];Hh(s,o),a(2,e[o])}}}finally{ko(-1)}}(t,e);const d=t.components;null!==d&&gR(e,d,0);const f=t.viewQuery;if(null!==f&&gw(2,f,r),u){const g=t.viewCheckHooks;null!==g&&Es(e,g)}else{const g=t.viewHooks;null!==g&&va(e,g,2),nl(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Hc]){for(const g of e[Hc])g();e[Hc]=null}e[Re]&=-73}catch(u){throw Su(e),u}finally{null!==a&&(function et(t,e){if(qe(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(vt(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ct(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(a,s),function BB(t){t.lView[Mo]!==t&&(t.lView=null,jS.push(t))}(a)),Gh()}}function fR(t,e){for(let n=$S(t);null!==n;n=HS(n))for(let r=un;r<n.length;r++)pR(n[r],e)}function Cj(t,e,n){pR(kr(e,t),n)}function pR(t,e){qc(t)&&yw(t,e)}function yw(t,e){const r=t[ie],i=t[Re],o=t[Mo];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!yn(o)),o&&(o.dirty=!1),t[Re]&=-9217,s)Ej(r,t,r.template,t[wt]);else if(8192&i){fR(t,1);const a=r.components;null!==a&&gR(t,a,1)}}function gR(t,e,n){for(let r=0;r<e.length;r++)Cj(t,e[r],n)}function Rf(t){for(t[Qr].changeDetectionScheduler?.notify();t;){t[Re]|=64;const e=Is(t);if(Oh(t)&&!e)return t;t=e}return null}class Pf{get rootNodes(){const e=this._lView,n=e[ie];return Af(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wt]}set context(e){this._lView[wt]=e}get destroyed(){return 256==(256&this._lView[Re])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[an];if(ar(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Ef(e,r),dl(n,r))}this._attachedToViewContainer=!1}__(this._lView[ie],this._lView)}onDestroy(e){Gc(this._lView,e)}markForCheck(){Rf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Re]&=-129}reattach(){Bh(this._lView),this._lView[Re]|=128}detectChanges(){this._lView[Re]|=1024,function _w(t,e=!0){const n=t[Qr],r=n.rendererFactory;r.begin?.();try{!function Ij(t){yw(t,0);let e=0;for(;vm(t);){if(100===e)throw new H(103,!1);e++,yw(t,1)}}(t)}catch(o){throw e&&V_(t,o),o}finally{r.end?.(),n.inlineEffectRunner?.flush()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,eS(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e,Bh(this._lView)}}let U_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Dj}return t})();function Dj(t){return function bj(t,e,n){if(ua(t)&&!n){const r=kr(t.index,e);return new Pf(r,r)}return 47&t.type?new Pf(e[qt],e):null}(Tt(),B(),16==(16&t))}let B_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Pj;static#t=this.__NG_ENV_ID__=n=>n}return t})();class Rj extends B_{constructor(e){super(),this._lView=e}onDestroy(e){return Gc(this._lView,e),()=>function fa(t,e){if(null===t[Po])return;const n=t[Po].indexOf(e);-1!==n&&t[Po].splice(n,1)}(this._lView,e)}}function Pj(){return new Rj(B())}const mR=new Set;function zu(t){mR.has(t)||(mR.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function vw(t){return e=>{setTimeout(t,void 0,e)}}const Vr=class Fj extends A{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=vw(o),i&&(i=vw(i)),s&&(s=vw(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ct&&e.add(a),a}};function _R(...t){}class ft{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vr(!1),this.onMicrotaskEmpty=new Vr(!1),this.onStable=new Vr(!1),this.onError=new Vr(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Vj(){const t="function"==typeof Rt.requestAnimationFrame;let e=Rt[t?"requestAnimationFrame":"setTimeout"],n=Rt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function jj(t){const e=()=>{!function Bj(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Rt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ew(t),t.isCheckStableRunning=!0,Iw(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ew(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function $j(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return yR(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),vR(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return yR(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),vR(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Ew(t),Iw(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ft.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(ft.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Uj,_R,_R);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Uj={};function Iw(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ew(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function yR(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vR(t){t._nesting--,Iw(t)}class IR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vr,this.onMicrotaskEmpty=new Vr,this.onStable=new Vr,this.onError=new Vr}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}var qu=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(qu||{});const ER={destroy(){}};function TR(t,e){!e&&function ge(t){if(!Zg()&&!function yh(){return yu}())throw new H(-203,!1)}();const n=e?.injector??oe(Jn);if(!function Ra(t){return"browser"===(t??oe(Jn)).get($o)}(n))return ER;zu("NgAfterNextRender");const r=n.get(Mf),i=r.handler??=new DR,o=e?.phase??qu.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(B_).onDestroy(s),u=new CR(n,o,()=>{s(),t()});return i.register(u),{destroy:s}}class CR{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(ft),this.errorHandler=e.get(Ss,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class DR{constructor(){this.executingCallbacks=!1,this.buckets={[qu.EarlyRead]:new Set,[qu.Write]:new Set,[qu.MixedReadWrite]:new Set,[qu.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){let e=!1;this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const r of n)e=!0,r.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);return this.deferredCallbacks.clear(),e}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let Mf=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of n)i();return!!this.handler?.execute()||n.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Ee({token:t,providedIn:"root",factory:()=>new t})}return t})();function qj(t,e){const n=kr(e,t),r=n[ie];!function Gj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Vt];null!==i&&null===n[_i]&&(n[_i]=ew(i,n[sr])),ww(r,n,n[wt])}function ww(t,e,n){qh(e);try{const r=t.viewQuery;null!==r&&gw(1,r,n);const i=t.template;null!==i&&eR(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&cR(t,e),t.staticViewQueries&&gw(2,t.viewQuery,n);const o=t.components;null!==o&&function Wj(t,e){for(let n=0;n<e.length;n++)qj(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Re]&=-5,Gh()}}function j_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=li(i,a):2==o&&(r=li(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class bR extends M_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Qe(e);return new xf(n,this.ngModule)}}function AR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Kj{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=vu(r);const i=this.injector.get(e,rw,r);return i!==rw||n===rw?i:this.parentInjector.get(e,n,r)}}class xf extends PS{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=AR(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return AR(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function LI(t){return t.map(Sh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof ti?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Kj(e,o):e,a=s.get(xS,null);if(null===a)throw new H(407,!1);const g={rendererFactory:a,sanitizer:s.get(AB,null),inlineEffectRunner:null,afterRenderEventManager:s.get(Mf,null),changeDetectionScheduler:s.get(bS,null)},_=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",I=r?function YB(t,e,n,r){const o=r.get(ZS,!1)||n===en.ShadowDom,s=t.selectRootElement(e,o);return function JB(t){nR(t)}(s),s}(_,r,this.componentDef.encapsulation,s):m_(_,y,function Zj(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y));let C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let S=null;null!==I&&(S=ew(I,s,!0));const N=dw(0,null,null,1,0,null,null,null,null,null,null),R=L_(null,N,null,C,null,null,g,_,s,null,S);let U,ne;qh(R);try{const ae=this.componentDef;let Oe,Ht=null;ae.findHostDirectiveDefs?(Oe=[],Ht=new Map,ae.findHostDirectiveDefs(ae,Oe,Ht),Oe.push(ae)):Oe=[ae];const ui=function Yj(t,e){const n=t[ie],r=Ve;return t[r]=e,xl(n,r,2,"#host",null)}(R,I),oA=function Jj(t,e,n,r,i,o,s){const a=i[ie];!function Xj(t,e,n,r){for(const i of t)e.mergedAttrs=Iu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(j_(e,e.mergedAttrs,!0),null!==n&&fS(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=ew(e,i[sr]));const d=o.rendererFactory.createRenderer(e,n);let f=16;n.signals?f=4096:n.onPush&&(f=64);const g=L_(i,tR(n),null,f,i[t.index],t,o,d,null,null,u);return a.firstCreatePass&&fw(a,t,r.length-1),F_(i,g),i[t.index]=g}(ui,I,ae,Oe,R,g,_);ne=da(N,Ve),I&&function t$(t,e,n,r){if(r)ia(t,n,["ng-version","17.0.9"]);else{const{attrs:i,classes:o}=function Rh(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Or(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&ia(t,n,i),o&&o.length>0&&hS(t,n,o.join(" "))}}(_,ae,I,r),void 0!==n&&function n$(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(ne,this.ngContentSelectors,n),U=function e$(t,e,n,r,i,o){const s=Tt(),a=i[ie],u=ur(s,i);oR(a,i,s,n,null,r);for(let f=0;f<n.length;f++)wr(Ts(i,a,s.directiveStart+f,s),i);sR(a,i,s),u&&wr(u,i);const d=Ts(i,a,s.directiveStart+s.componentOffset,s);if(t[wt]=i[wt]=d,null!==o)for(const f of o)f(d,e);return uw(a,s,t),d}(oA,ae,Oe,Ht,R,[r$]),ww(N,R,null)}finally{Gh()}return new Qj(this.componentType,U,Ml(ne,R),R,ne)}}class Qj extends EB{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Pf(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;mw(o[ie],o,i,e,n),this.previousInputValues.set(e,n),Rf(kr(this._tNode.index,o))}}get injector(){return new hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function r$(){const t=Tt();ya(B()[ie],t)}function NR(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function Mn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Gu(t,e,n,r){const i=Mn(t,e,n);return Mn(t,e+1,r)||i}function Tw(t,e,n,r){const i=B();return Mn(i,ei(),e)&&(it(),zo(Nt(),i,t,e,n,r)),Tw}function Ol(t,e,n,r){return Mn(t,ei(),n)?e+Be(n)+r:We}function Ll(t,e,n,r,i,o,s,a){const d=function H_(t,e,n,r,i){const o=Gu(t,e,n,r);return Mn(t,e+2,i)||o}(t,lo(),n,i,s);return $i(3),d?e+Be(n)+r+Be(i)+o+Be(s)+a:We}function z_(t,e){return t<<17|e<<2}function Na(t){return t>>17&32767}function Cw(t){return 2|t}function Wu(t){return(131068&t)>>2}function Dw(t,e){return-131069&t|e<<2}function bw(t){return 1|t}function HR(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Na(i):Wu(i),a=!1;for(;0!==s&&(!1===a||o);){const d=t[s+1];y$(t[s],e)&&(a=!0,t[s+1]=r?bw(d):Cw(d)),s=r?Na(d):Wu(d)}a&&(t[n+1]=r?Cw(i):bw(i))}function y$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Uo(t,e)>=0}const Un={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zR(t){return t.substring(Un.key,Un.keyEnd)}function v$(t){return t.substring(Un.value,Un.valueEnd)}function GR(t,e){const n=Un.textEnd;let r=Un.key=$l(t,e,n);return n===r?-1:(r=Un.keyEnd=function T$(t,e,n){let r;for(;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=ZR(t,r,n),r=Un.value=$l(t,r,n),r=Un.valueEnd=function C$(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){const u=t.charCodeAt(s++);if(59===u)return a;34===u||39===u?a=s=KR(t,u,s,n):e===s-4&&85===o&&82===i&&76===r&&40===u?a=s=KR(t,41,s,n):u>32&&(a=s),o=i,i=r,r=-33&u}return a}(t,r,n),ZR(t,r,n))}function $l(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ZR(t,e,n,r){return(e=$l(t,e,n))<n&&e++,e}function KR(t,e,n,r){let i=-1,o=n;for(;o<r;){const s=t.charCodeAt(o++);if(s==e&&92!==i)return o;i=92==s&&92===i?0:s}throw new Error}function Ps(t,e,n){const r=B();return Mn(r,ei(),e)&&function Ci(t,e,n,r,i,o,s,a){const u=ur(e,n);let f,d=e.inputs;!a&&null!=d&&(f=d[r])?(mw(t,n,f,r,i),ua(e)&&function oj(t,e){const n=kr(e,t);16&n[Re]||(n[Re]|=64)}(n,e.index)):3&e.type&&(r=function ij(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}(it(),Nt(),r,t,e,r[$e],n,!1),Ps}function Aw(t,e,n,r,i){const s=i?"class":"style";mw(t,n,e.inputs[s],s,r)}function Go(t){!function go(t,e,n,r){const i=it(),o=$i(2);i.firstUpdatePass&&function XR(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Vn()],s=JR(t,n);rP(o,r)&&null===e&&!s&&(e=!1),e=function A$(t,e,n,r){const i=function zh(t){const e=Le.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Of(n=Sw(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Sw(i,t,e,n,r),null===o){let u=function S$(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Wu(r))return t[Na(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=Sw(null,t,e,u[1],r),u=Of(u,e.attrs,r),function R$(t,e,n,r){t[Na(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function P$(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Of(r,t[o].hostAttrs,n);return Of(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function m$(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Na(s),u=Wu(s);t[r]=n;let f,d=!1;if(Array.isArray(n)?(f=n[1],(null===f||Uo(n,f)>0)&&(d=!0)):f=n,i)if(0!==u){const _=Na(t[a+1]);t[r+1]=z_(_,a),0!==_&&(t[_+1]=Dw(t[_+1],r)),t[a+1]=function p$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=z_(a,0),0!==a&&(t[a+1]=Dw(t[a+1],r)),a=r;else t[r+1]=z_(u,0),0===a?a=r:t[u+1]=Dw(t[u+1],r),u=r;d&&(t[r+1]=Cw(t[r+1])),HR(t,f,r,!0),HR(t,f,r,!1),function _$(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Uo(o,e)>=0&&(n[r+1]=bw(n[r+1]))}(e,f,t,r,o),s=z_(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(i,null,o,r);const s=B();if(n!==We&&Mn(s,o,n)){const a=i.data[Vn()];if(rP(a,r)&&!JR(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=li(u,n||"")),Aw(i,a,s,n,r)}else!function N$(t,e,n,r,i,o,s,a){i===We&&(i=ht);let u=0,d=0,f=0<i.length?i[0]:null,g=0<o.length?o[0]:null;for(;null!==f||null!==g;){const _=u<i.length?i[u+1]:void 0,y=d<o.length?o[d+1]:void 0;let C,I=null;f===g?(u+=2,d+=2,_!==y&&(I=g,C=y)):null===g||null!==f&&f<g?(u+=2,I=f):(d+=2,I=g,C=y),null!==I&&tP(t,e,n,r,I,C,s,a),f=u<i.length?i[u]:null,g=d<o.length?o[d]:null}}(i,a,s,s[$e],s[o+1],s[o+1]=function M$(t,e,n){if(null==n||""===n)return ht;const r=[],i=Ti(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}(eP,D$,t,!1)}function D$(t,e){for(let n=function E$(t){return function WR(t){Un.key=0,Un.keyEnd=0,Un.value=0,Un.valueEnd=0,Un.textEnd=t.length}(t),GR(t,$l(t,0,Un.textEnd))}(e);n>=0;n=GR(e,n))eP(t,zR(e),v$(e))}function JR(t,e){return e>=t.expandoStartIndex}function Sw(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Of(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Of(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Lr(t,s,!!n||e[++o]))}return void 0===t?null:t}function eP(t,e,n){Lr(t,e,Ti(n))}function tP(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],f=function g$(t){return 1==(1&t)}(d)?nP(u,e,n,i,Wu(d),s):void 0;q_(f)||(q_(o)||function f$(t){return 2==(2&t)}(d)&&(o=nP(u,null,n,i,a,s)),function LU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Ma.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ma.Important),t.setStyle(n,r,i,o))}}(r,s,xo(Vn(),n),i,o))}function nP(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),f=d?u[1]:u,g=null===f;let _=n[i+1];_===We&&(_=g?ht:void 0);let y=g?af(_,r):f===r?_:void 0;if(d&&!q_(y)&&(y=af(u,r)),q_(y)&&(a=y,s))return a;const I=t[i+1];i=s?Na(I):Wu(I)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=af(u,r))}return a}function q_(t){return void 0!==t}function rP(t,e){return 0!=(t.flags&(e?8:16))}function zl(t,e){return!e||null===e.firstChild||f_(t)}function Bf(t,e,n,r=!0){const i=e[ie];if(function SU(t,e,n,r){const i=un+r,o=n.length;r>0&&(n[i-1][mi]=e),r<o-un?(e[mi]=n[i],Bm(n,un+r,e)):(n.push(e),e[mi]=null),e[an]=n;const s=e[ys];null!==s&&n!==s&&function RU(t,e){const n=t[aa];e[qt]!==e[an][an][qt]&&(t[Re]|=Nh.HasTransplantedViews),null===n?t[aa]=[e]:n.push(e)}(s,e);const a=e[Yr];null!==a&&a.insertView(t),Bh(e),e[Re]|=128}(i,e,t,n),r){const s=UE(n,t),a=e[$e],u=y_(a,t[yi]);null!==u&&function bU(t,e,n,r,i,o){r[Vt]=i,r[Pn]=e,E_(t,r,n,1,i,o)}(i,t[Pn],a,e,u,s)}const o=e[_i];null!==o&&null!==o.firstChild&&(o.firstChild=null)}let mo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=p4}return t})();function p4(){return function mP(t,e){let n;const r=e[t.index];return ar(r)?n=r:(n=uR(r,e,null,t),e[t.index]=n,F_(e,n)),_P(n,e,t,r),new pP(n,t,e)}(Tt(),B())}const g4=mo,pP=class extends g4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ml(this._hostTNode,this._hostLView)}get injector(){return new hn(this._hostTNode,this._hostLView)}get parentInjector(){const e=al(this._hostTNode,this._hostLView);if(Qh(e)){const n=Ou(e,this._hostLView),r=Nu(e);return new hn(n[ie].data[r+8],n)}return new hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=gP(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-un}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,zl(this._hostTNode,null)),a}createComponent(e,n,r,i,o){const s=e&&!function bs(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const I=n||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}const u=s?e:new xf(Qe(e)),d=r||this.parentInjector;if(!o&&null==u.ngModule){const C=(s?d:this.parentInjector).get(ti,null);C&&(o=C)}Qe(u.componentType??{});const y=u.create(d,i,null,o);return this.insertImpl(y.hostView,a,zl(this._hostTNode,null)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function HI(t){return ar(t[an])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const u=i[an],d=new pP(u,u[Pn],u[an]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Bf(s,i,o,r),e.attachToViewContainerRef(),Bm(Fw(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=gP(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Ef(this._lContainer,n);r&&(dl(Fw(this._lContainer),n),__(r[ie],r))}detach(e){const n=this._adjustIndex(e,-1),r=Ef(this._lContainer,n);return r&&null!=dl(Fw(this._lContainer),n)?new Pf(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function gP(t){return t[8]}function Fw(t){return t[8]||(t[8]=[])}let _P=function vP(t,e,n,r){if(t[yi])return;let i;i=8&n.type?Dt(r):function m4(t,e){const n=t[$e],r=n.createComment(""),i=ur(e,t);return $u(n,y_(n,i),r,function NU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[yi]=i},Vw=()=>!1;function Zo(t,e,n,r,i,o,s,a){const u=B(),d=it(),f=t+Ve,g=d.firstCreatePass?function I4(t,e,n,r,i,o,s,a,u){const d=e.consts,f=xl(e,t,4,s||null,ji(d,a));hw(e,n,f,ji(d,u)),ya(e,f);const g=f.tView=dw(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,d,u,e,n,r,i,o,s):d.data[f];Xr(g,!1);const _=IP(d,u,g,t);tl()&&v_(d,u,_,g),wr(_,u);const y=uR(_,u,_,g);return u[f]=y,F_(u,y),function yP(t,e,n){return Vw(t,e,n)}(y,g,u),ca(g)&&cw(d,u,g),null!=s&&lw(u,g,a),Zo}let IP=function EP(t,e,n,r){return Hi(!0),e[$e].createComment("")};function le(t,e,n,r){const i=B(),o=it(),s=Ve+t,a=i[$e],u=o.firstCreatePass?function cH(t,e,n,r,i,o){const s=e.consts,u=xl(e,t,2,r,ji(s,i));return hw(e,n,u,ji(s,o)),null!==u.attrs&&j_(u,u.attrs,!1),null!==u.mergedAttrs&&j_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],d=zP(o,i,u,a,e,t);i[s]=d;const f=ca(u);return Xr(u,!0),fS(a,d,u),32!=(32&u.flags)&&tl()&&v_(o,i,d,u),0===function qI(){return Le.lFrame.elementDepthCount}()&&wr(d,i),function GI(){Le.lFrame.elementDepthCount++}(),f&&(cw(o,i,u),uw(o,u,i)),null!==r&&lw(i,u),le}function de(){let t=Tt();$h()?function Ru(){Le.lFrame.isParent=!1}():(t=t.parent,Xr(t,!1));const e=t;(function Tm(t){return Le.skipHydrationRootTNode===t})(e)&&function jh(){Le.skipHydrationRootTNode=null}(),function WI(){Le.lFrame.elementDepthCount--}();const n=it();return n.firstCreatePass&&(ya(n,t),am(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function oE(t){return 0!=(8&t.flags)}(e)&&Aw(n,e,B(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function sE(t){return 0!=(16&t.flags)}(e)&&Aw(n,e,B(),e.stylesWithoutHost,!1),de}function tn(t,e,n,r){return le(t,e,n,r),de(),tn}let zP=(t,e,n,r,i,o)=>(Hi(!0),m_(r,i,function el(){return Le.lFrame.currentNamespace}()));function Yw(){return B()}const Jl="en-US";let YP=Jl;function oy(t){return!!t&&"function"==typeof t.then}function wM(t){return!!t&&"function"==typeof t.subscribe}function ka(t,e,n,r){const i=B(),o=it(),s=Tt();return function CM(t,e,n,r,i,o,s){const a=ca(r),d=t.firstCreatePass&&function dR(t){return t.cleanup||(t.cleanup=[])}(t),f=e[wt],g=function lR(t){return t[oa]||(t[oa]=[])}(e);let _=!0;if(3&r.type||s){const C=ur(r,e),S=s?s(C):C,N=g.length,R=s?ne=>s(Dt(ne[r.index])):r.index;let U=null;if(!s&&a&&(U=function dz(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[oa],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==U)(U.__ngLastListenerFn__||U).__ngNextListenerFn__=o,U.__ngLastListenerFn__=o,_=!1;else{o=bM(r,e,f,o,!1);const ne=n.listen(S,i,o);g.push(o,ne),d&&d.push(i,R,N,N+1)}}else o=bM(r,e,f,o,!1);const y=r.outputs;let I;if(_&&null!==y&&(I=y[i])){const C=I.length;if(C)for(let S=0;S<C;S+=2){const ae=e[I[S]][I[S+1]].subscribe(o),Oe=g.length;g.push(o,ae),d&&d.push(i,r.index,Oe,-(Oe+1))}}}(o,i,i[$e],s,t,e,r),ka}function DM(t,e,n,r){try{return Jr(6,e,n),!1!==n(r)}catch(i){return V_(t,i),!1}finally{Jr(7,e,n)}}function bM(t,e,n,r,i){return function o(s){if(s===Function)return r;Rf(t.componentOffset>-1?kr(t.index,e):e);let u=DM(e,n,r,s),d=o.__ngNextListenerFn__;for(;d;)u=DM(e,n,d,s)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function La(t=1){return function Wh(t){return(Le.lFrame.contextLView=function ym(t,e){for(;t>0;)e=e[Ro],t--;return e}(t,Le.lFrame.contextLView))[wt]}(t)}function we(t,e=""){const n=B(),r=it(),i=t+Ve,o=r.firstCreatePass?xl(r,i,1,e,null):r.data[i],s=GM(r,n,o,e,t);n[i]=s,tl()&&v_(r,n,s,o),Xr(o,!1)}let GM=(t,e,n,r,i)=>(Hi(!0),function g_(t,e){return t.createText(e)}(e[$e],r));function Kf(t){return sy("",t,""),Kf}function sy(t,e,n){const r=B(),i=Ol(r,t,e,n);return i!==We&&Rs(r,Vn(),i),sy}function tT(t,e,n,r,i){const o=B(),s=function kl(t,e,n,r,i,o){const a=Gu(t,lo(),n,i);return $i(2),a?e+Be(n)+r+Be(i)+o:We}(o,t,e,n,r,i);return s!==We&&Rs(o,Vn(),s),tT}function nT(t,e,n,r,i,o,s){const a=B(),u=Ll(a,t,e,n,r,i,o,s);return u!==We&&Rs(a,Vn(),u),nT}class Qu{}class ex{}class aT extends Qu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bR(this);const i=Rn(e);this._bootstrapComponents=wi(i.bootstrap),this._r3Injector=mf(e,n,[{provide:Qu,useValue:this},{provide:M_,useValue:this.componentFactoryResolver},...r],dt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class uT extends ex{constructor(e){super(),this.moduleType=e}create(e){return new aT(this.moduleType,e,[])}}class tx extends Qu{constructor(e){super(),this.componentFactoryResolver=new bR(this),this.instance=null;const n=new ba([...e.providers,{provide:Qu,useValue:this},{provide:M_,useValue:this.componentFactoryResolver}],e.parent||Tl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function cT(t,e,n=null){return new tx({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Oz=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=e_(0,n.type),i=r.length>0?cT([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ee({token:t,providedIn:"environment",factory:()=>new t(re(ti))})}return t})();function nx(t){zu("NgStandalone"),t.getStandaloneInjector=e=>e.get(Oz).getOrCreateStandaloneInjector(t)}Symbol;let Ms=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=d3}return t})();const c3=Ms,l3=class extends c3{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Uf(t,e,n,r){const i=e.tView,a=L_(t,i,n,4096&t[Re]?4096:16,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null);a[ys]=t[e.index];const d=t[Yr];return null!==d&&(a[Yr]=d.createEmbeddedView(i)),ww(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Pf(i)}};function d3(){return function cy(t,e){return 4&t.type?new l3(e,t,Ml(t,e)):null}(Tt(),B())}class Xf{constructor(e){this.full=e;const n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}const j3=new Xf("17.0.9");let Vx=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();class $3{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Ux=(()=>{class t{compileModuleSync(n){return new uT(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=wi(Rn(n).declarations).reduce((s,a)=>{const u=Qe(a);return u&&s.push(new xf(u)),s},[]);return new $3(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dy=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const zx=new he(""),fy=new he("");let CT,wT=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,CT||(function g9(t){CT=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ft.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(re(ft),re(TT),re(fy))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})(),TT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return CT?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const DT=new he("Application Initializer");let bT=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=oe(DT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(oy(o))n.push(o);else if(wM(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const AT=new he("appBootstrapListener");function Wx(t,e){return Array.isArray(e)?e.reduce(Wx,t):{...t,...e}}let Yu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe(GS),this.afterRenderEffectManager=oe(Mf),this.componentTypes=[],this.components=[],this.isStable=oe(dy).hasPendingTasks.pipe(Ce(n=>!n)),this._injector=oe(ti)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof PS;if(!this._injector.get(bT).done)throw!i&&function So(t){const e=Qe(t)||In(t)||En(t);return null!==e&&e.standalone}(n),new H(405,!1);let s;s=i?n:this._injector.get(M_).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function _9(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Qu),d=s.create(Jn.NULL,[],r||s.selector,a),f=d.location.nativeElement,g=d.injector.get(zx,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),py(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new H(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{try{this.afterRenderEffectManager.execute()}catch(n){this.internalErrorHandler(n)}this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;py(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(AT,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>py(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function py(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let v9=(()=>{class t{constructor(){this.zone=oe(ft),this.applicationRef=oe(Yu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function I9(){const t=oe(ft),e=oe(Ss);return n=>t.runOutsideAngular(()=>e.handleError(n))}let w9=(()=>{class t{constructor(){this.subscription=new Ct,this.initialized=!1,this.zone=oe(ft),this.pendingTasks=oe(dy)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ft.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ft.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const xs=new he("LocaleId",{providedIn:"root",factory:()=>oe(xs,rt.Optional|rt.SkipSelf)||function T9(){return typeof $localize<"u"&&$localize.locale||Jl}()}),ST=new he("PlatformDestroyListeners");let Yx=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function Hj(t="zone.js",e){return"noop"===t?new IR:"zone.js"===t?new ft(e):t}(r?.ngZone,function Qx(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function Nz(t,e,n){return new aT(t,e,n)}(n.moduleType,this.injector,function Kx(t){return[{provide:ft,useFactory:t},{provide:fo,multi:!0,useFactory:()=>{const e=oe(v9,{optional:!0});return()=>e.initialize()}},{provide:fo,multi:!0,useFactory:()=>{const e=oe(w9);return()=>{e.initialize()}}},{provide:GS,useFactory:I9}]}(()=>i)),s=o.injector.get(Ss,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{py(this._modules,o),a.unsubscribe()})}),function Gx(t,e,n){try{const r=n();return oy(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(bT);return a.runInitializers(),a.donePromise.then(()=>(function JP(t){vr(t,"Expected localeId to be defined"),"string"==typeof t&&(YP=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(xs,Jl)||Jl),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=Wx({},r);return function m9(t,e,n){const r=new uT(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Yu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new H(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new H(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(ST,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(re(Jn))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Fa=null;const Jx=new he("AllowMultipleToken");function Xx(t,e,n=[]){const r=`Platform: ${e}`,i=new he(r);return(o=[])=>{let s=RT();if(!s||s.injector.get(Jx,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function b9(t){if(Fa&&!Fa.get(Jx,!1))throw new H(400,!1);(function qx(){!function Ws(t){Mi=t}(()=>{throw new H(600,!1)})})(),Fa=t;const e=t.get(Yx);(function tN(t){t.get(OA,null)?.forEach(n=>n())})(t)}(function eN(t=[],e){return Jn.create({name:e,providers:[{provide:El,useValue:"platform"},{provide:ST,useValue:new Set([()=>Fa=null])},...t]})}(a,r))}return function A9(t){const e=RT();if(!e)throw new H(401,!1);return e}()}}function RT(){return Fa?.get(Yx)??null}const N9=Xx(null,"core",[]);let O9=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(re(Yu))};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=ki({})}return t})();function VT(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let UT=null;function nd(){return UT}class cq{}const jr=new he("DocumentToken");let BT=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:()=>oe(dq),providedIn:"platform"})}return t})();const lq=new he("Location Initialized");let dq=(()=>{class t extends BT{constructor(){super(),this._doc=oe(jr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return nd().getBaseHref(this._doc)}onPopState(n){const r=nd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=nd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function jT(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function DN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ns(t){return t&&"?"!==t[0]?"?"+t:t}let Xu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:()=>oe(AN),providedIn:"root"})}return t})();const bN=new he("appBaseHref");let AN=(()=>{class t extends Xu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??oe(jr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return jT(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ns(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Ns(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Ns(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(BT),re(bN,8))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hq=(()=>{class t extends Xu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=jT(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Ns(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Ns(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(BT),re(bN,8))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})(),rd=(()=>{class t{constructor(n){this._subject=new Vr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function gq(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(DN(SN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ns(r))}normalize(n){return t.stripTrailingSlash(function pq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,SN(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ns(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ns(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Ns;static#t=this.joinWithSlash=jT;static#n=this.stripTrailingSlash=DN;static#r=this.\u0275fac=function(r){return new(r||t)(re(Xu))};static#i=this.\u0275prov=Ee({token:t,factory:()=>function fq(){return new rd(re(Xu))}(),providedIn:"root"})}return t})();function SN(t){return t.replace(/\/index.html$/,"")}class n6{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let JT=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new n6(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),UN(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{UN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Me(mo),Me(Ms),Me(ow))};static#t=this.\u0275dir=Sn({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function UN(t,e){t.context.$implicit=e.item}let XT=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new r6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){BN("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){BN("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Me(mo),Me(Ms))};static#t=this.\u0275dir=Sn({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class r6{constructor(){this.$implicit=null,this.ngIf=null}}function BN(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${dt(e)}'.`)}let R6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=ki({})}return t})();const HN="browser";function Ny(t){return"server"===t}let O6=(()=>{class t{static#e=this.\u0275prov=Ee({token:t,providedIn:"root",factory:()=>function N6(t){return t===HN}(oe($o))?new k6(oe(jr),window):new F6})}return t})();class k6{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function L6(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class F6{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class a5 extends cq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class a0 extends a5{static makeCurrent(){!function uq(t){UT||(UT=t)}(new a0)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function u5(){return sp=sp||document.querySelector("base"),sp?sp.getAttribute("href"):null}();return null==n?null:function c5(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){sp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Xq(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let sp=null,d5=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})();const u0=new he("EventManagerPlugins");let WN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(re(u0),re(ft))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})();class ZN{constructor(e){this._doc=e}}const c0="ng-app-id";let KN=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ny(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${c0}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(c0),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(c0,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(re(jr),re(c_),re(kA,8),re($o))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})();const l0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},d0=/%COMP%/g,g5=new he("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function YN(t,e){return e.map(n=>n.replace(d0,t))}let JN=(()=>{class t{constructor(n,r,i,o,s,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Ny(a),this.defaultRenderer=new h0(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===en.ShadowDom&&(r={...r,encapsulation:en.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof eO?i.applyToHost(n):i instanceof f0&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case en.Emulated:o=new eO(u,d,r,this.appId,f,s,a,g);break;case en.ShadowDom:return new v5(u,d,n,r,s,a,this.nonce,g);default:o=new f0(u,d,r,f,s,a,g)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(re(WN),re(KN),re(c_),re(g5),re(jr),re($o),re(ft),re(kA))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})();class h0{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(l0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(XN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(XN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=l0[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=l0[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ma.DashCase|Ma.Important)?e.style.setProperty(n,r,i&Ma.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ma.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=nd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function XN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class v5 extends h0{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=YN(i.id,i.styles);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class f0 extends h0{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?YN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class eO extends f0{constructor(e,n,r,i,o,s,a,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,u,d),this.contentAttr=function m5(t){return"_ngcontent-%COMP%".replace(d0,t)}(d),this.hostAttr=function _5(t){return"_nghost-%COMP%".replace(d0,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let I5=(()=>{class t extends ZN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(re(jr))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})();const tO=["alt","control","meta","shift"],E5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},w5={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let T5=(()=>{class t extends ZN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>nd().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),tO.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),s+=d+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=E5[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),tO.forEach(s=>{s!==i&&(0,w5[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(re(jr))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})();const rO=[{provide:$o,useValue:HN},{provide:OA,useValue:function C5(){a0.makeCurrent()},multi:!0},{provide:jr,useFactory:function b5(){return function eU(t){DE=t}(document),document},deps:[]}],A5=Xx(N9,"browser",rO),S5=new he(""),iO=[{provide:fy,useClass:class l5{addToWindow(e){Rt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new H(5103,!1);return o},Rt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rt.getAllAngularRootElements=()=>e.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(r=>{const i=Rt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?nd().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:zx,useClass:wT,deps:[ft,TT,fy]},{provide:wT,useClass:wT,deps:[ft,TT,fy]}],oO=[{provide:El,useValue:"root"},{provide:Ss,useFactory:function D5(){return new Ss},deps:[]},{provide:u0,useClass:I5,multi:!0,deps:[jr,ft,$o]},{provide:u0,useClass:T5,multi:!0,deps:[jr]},JN,KN,WN,{provide:xS,useExisting:JN},{provide:class V6{},useClass:d5,deps:[]},[]];let R5=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:c_,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(re(S5,12))};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=ki({providers:[...oO,...iO],imports:[R6,O9]})}return t})(),sO=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(re(jr))};static#t=this.\u0275prov=Ee({token:t,factory:function(r){let i=null;return i=r?new r:function M5(){return new sO(re(jr))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;let cO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:function(r){let i=null;return i=r?new(r||t):re(lO),i},providedIn:"root"})}return t})(),lO=(()=>{class t extends cO{constructor(n){super(),this._doc=n}sanitize(n,r){if(null==r)return null;switch(n){case Wi.NONE:return r;case Wi.HTML:return Ho(r,"HTML")?Ti(r):TS(this._doc,String(r)).toString();case Wi.STYLE:return Ho(r,"Style")?Ti(r):r;case Wi.SCRIPT:if(Ho(r,"Script"))return Ti(r);throw new H(5200,!1);case Wi.URL:return Ho(r,"URL")?Ti(r):C_(String(r));case Wi.RESOURCE_URL:if(Ho(r,"ResourceURL"))return Ti(r);throw new H(5201,!1);default:throw new H(5202,!1)}}bypassSecurityTrustHtml(n){return function WU(t){return new jU(t)}(n)}bypassSecurityTrustStyle(n){return function ZU(t){return new $U(t)}(n)}bypassSecurityTrustScript(n){return function KU(t){return new HU(t)}(n)}bypassSecurityTrustUrl(n){return function QU(t){return new zU(t)}(n)}bypassSecurityTrustResourceUrl(n){return function YU(t){return new qU(t)}(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(jr))};static#t=this.\u0275prov=Ee({token:t,factory:function(r){let i=null;return i=r?new r:function k5(t){return new lO(t.get(jr))}(re(Jn)),i},providedIn:"root"})}return t})();var od=ze(582);const hO=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function fO(t){return ke(t?.then)}function pO(t){return ke(t[ci])}function gO(t){return Symbol.asyncIterator&&ke(t?.[Symbol.asyncIterator])}function mO(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _O=function F5(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yO(t){return ke(t?.[_O])}function vO(t){return(0,od.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,od.qq)(n.read());if(i)return yield(0,od.qq)(void 0);yield yield(0,od.qq)(r)}}finally{n.releaseLock()}})}function IO(t){return ke(t?.getReader)}function Ji(t){if(t instanceof zt)return t;if(null!=t){if(pO(t))return function V5(t){return new zt(e=>{const n=t[ci]();if(ke(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(hO(t))return function U5(t){return new zt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(fO(t))return function B5(t){return new zt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Zs)})}(t);if(gO(t))return EO(t);if(yO(t))return function j5(t){return new zt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(IO(t))return function $5(t){return EO(vO(t))}(t)}throw mO(t)}function EO(t){return new zt(e=>{(function H5(t,e){var n,r,i,o;return(0,od.mG)(this,void 0,void 0,function*(){try{for(n=(0,od.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ls(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function ec(t,e=0){return Ie((n,r)=>{n.subscribe(be(r,i=>Ls(r,t,()=>r.next(i),e),()=>Ls(r,t,()=>r.complete(),e),i=>Ls(r,t,()=>r.error(i),e)))})}function sd(t,e=0){return Ie((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function wO(t,e){if(!t)throw new Error("Iterable cannot be null");return new zt(n=>{Ls(n,e,()=>{const r=t[Symbol.asyncIterator]();Ls(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function nn(t,e){return e?function K5(t,e){if(null!=t){if(pO(t))return function z5(t,e){return Ji(t).pipe(sd(e),ec(e))}(t,e);if(hO(t))return function G5(t,e){return new zt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(fO(t))return function q5(t,e){return Ji(t).pipe(sd(e),ec(e))}(t,e);if(gO(t))return wO(t,e);if(yO(t))return function W5(t,e){return new zt(n=>{let r;return Ls(n,e,()=>{r=t[_O](),Ls(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>ke(r?.return)&&r.return()})}(t,e);if(IO(t))return function Z5(t,e){return wO(vO(t),e)}(t,e)}throw mO(t)}(t,e):Ji(t)}function g0(t){return t[t.length-1]}function ap(t){return function Q5(t){return t&&ke(t.schedule)}(g0(t))?t.pop():void 0}function Ne(...t){return nn(t,ap(t))}const{isArray:X5}=Array,{getPrototypeOf:eG,prototype:tG,keys:nG}=Object;const{isArray:oG}=Array;function m0(...t){const e=ap(t),n=function Y5(t){return ke(g0(t))?t.pop():void 0}(t),{args:r,keys:i}=function rG(t){if(1===t.length){const e=t[0];if(X5(e))return{args:e,keys:null};if(function iG(t){return t&&"object"==typeof t&&eG(t)===tG}(e)){const n=nG(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return nn([],e);const o=new zt(function cG(t,e,n=Gn){return r=>{TO(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)TO(e,()=>{const d=nn(t[u],e);let f=!1;d.subscribe(be(r,g=>{o[u]=g,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>function uG(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,s):Gn));return n?o.pipe(function aG(t){return Ce(e=>function sG(t,e){return oG(e)?t(...e):t(e)}(t,e))}(n)):o}function TO(t,e,n){t?Ls(n,t,e):e()}const Ly=Fn(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Tr(t,e,n=1/0){return ke(e)?Tr((r,i)=>Ce((o,s)=>e(r,o,i,s))(Ji(t(r,i))),n):("number"==typeof e&&(n=e),Ie((r,i)=>function lG(t,e,n,r,i,o,s,a){const u=[];let d=0,f=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},y=C=>d<r?I(C):u.push(C),I=C=>{o&&e.next(C),d++;let S=!1;Ji(n(C,f++)).subscribe(be(e,N=>{i?.(N),o?y(N):e.next(N)},()=>{S=!0},void 0,()=>{if(S)try{for(d--;u.length&&d<r;){const N=u.shift();s?Ls(e,s,()=>I(N)):I(N)}_()}catch(N){e.error(N)}}))};return t.subscribe(be(e,y,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function ad(t=1/0){return Tr(Gn,t)}function _0(...t){return function dG(){return ad(1)}()(nn(t,ap(t)))}function CO(t){return new zt(e=>{Ji(t()).subscribe(e)})}function Fy(t,e){const n=ke(t)?t:()=>t,r=i=>i.error(n());return new zt(e?i=>e.schedule(r,0,i):r)}const Ko=new zt(t=>t.complete());function y0(){return Ie((t,e)=>{let n=null;t._refCount++;const r=be(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class DO extends zt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,pe(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ct;const n=this.getSubject();e.add(this.source.subscribe(be(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ct.EMPTY)}return e}refCount(){return y0()(this)}}function Xn(t,e){return Ie((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(be(r,u=>{i?.unsubscribe();let d=0;const f=o++;Ji(t(u,f)).subscribe(i=be(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ud(t){return t<=0?()=>Ko:Ie((e,n)=>{let r=0;e.subscribe(be(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Vy(...t){const e=ap(t);return Ie((n,r)=>{(e?_0(t,n,e):_0(t,n)).subscribe(r)})}function vo(t,e){return Ie((n,r)=>{let i=0;n.subscribe(be(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Uy(t){return Ie((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function bO(t=fG){return Ie((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function fG(){return new Ly}function Ua(t,e){const n=arguments.length>=2;return r=>r.pipe(t?vo((i,o)=>t(i,o,r)):Gn,ud(1),n?Uy(e):bO(()=>new Ly))}function up(t,e){return ke(e)?Tr(t,e,1):Tr(t,1)}function lr(t,e,n){const r=ke(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ie((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(be(o,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),o.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):Gn}function cd(t){return Ie((e,n)=>{let o,r=null,i=!1;r=e.subscribe(be(n,void 0,void 0,s=>{o=Ji(t(s,cd(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function By(t,e){return Ie(function pG(t,e,n,r,i){return(o,s)=>{let a=n,u=e,d=0;o.subscribe(be(s,f=>{const g=d++;u=a?t(u,f,g):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(t,e,arguments.length>=2,!0))}function v0(t){return t<=0?()=>Ko:Ie((e,n)=>{let r=[];e.subscribe(be(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function I0(t){return Ie((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Xe="primary",cp=Symbol("RouteTitle");class yG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ld(t){return new yG(t)}function vG(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Qo(t,e){const n=t?E0(t):void 0,r=e?E0(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!AO(t[i],e[i]))return!1;return!0}function E0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function AO(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function Ba(t){return function L5(t){return!!t&&(t instanceof zt||ke(t.lift)&&ke(t.subscribe))}(t)?t:oy(t)?nn(Promise.resolve(t)):Ne(t)}const EG={exact:function PO(t,e,n){if(!tc(t.segments,e.segments)||!jy(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!PO(t.children[r],e.children[r],n))return!1;return!0},subset:MO},SO={exact:function wG(t,e){return Qo(t,e)},subset:function TG(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>AO(t[n],e[n]))},ignored:()=>!0};function RO(t,e,n){return EG[n.paths](t.root,e.root,n.matrixParams)&&SO[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function MO(t,e,n){return xO(t,e,e.segments,n)}function xO(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!tc(i,n)||e.hasChildren()||!jy(i,n,r))}if(t.segments.length===n.length){if(!tc(t.segments,n)||!jy(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!MO(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(tc(t.segments,i)&&jy(t.segments,i,r)&&t.children[Xe])&&xO(t.children[Xe],e,o,r)}}function jy(t,e,n){return e.every((r,i)=>SO[n](t[i].parameters,r.parameters))}class dd{constructor(e=new Pt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ld(this.queryParams)),this._queryParamMap}toString(){return bG.serialize(this)}}class Pt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $y(this)}}class lp{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ld(this.parameters)),this._parameterMap}toString(){return kO(this)}}function tc(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let hd=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:()=>new w0,providedIn:"root"})}return t})();class w0{parse(e){const n=new FG(e);return new dd(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${dp(e.root,!0)}`,r=function RG(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Hy(n)}=${Hy(i)}`).join("&"):`${Hy(n)}=${Hy(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function AG(t){return encodeURI(t)}(e.fragment)}`:""}`}}const bG=new w0;function $y(t){return t.segments.map(e=>kO(e)).join("/")}function dp(t,e){if(!t.hasChildren())return $y(t);if(e){const n=t.children[Xe]?dp(t.children[Xe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Xe&&r.push(`${i}:${dp(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function DG(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Xe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Xe&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Xe?[dp(t.children[Xe],!1)]:[`${i}:${dp(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Xe]?`${$y(t)}/${n[0]}`:`${$y(t)}/(${n.join("//")})`}}function NO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hy(t){return NO(t).replace(/%3B/gi,";")}function T0(t){return NO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zy(t){return decodeURIComponent(t)}function OO(t){return zy(t.replace(/\+/g,"%20"))}function kO(t){return`${T0(t.path)}${function SG(t){return Object.entries(t).map(([e,n])=>`;${T0(e)}=${T0(n)}`).join("")}(t.parameters)}`}const PG=/^[^\/()?;#]+/;function C0(t){const e=t.match(PG);return e?e[0]:""}const MG=/^[^\/()?;=#]+/,NG=/^[^=?&#]+/,kG=/^[^&#]+/;class FG{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pt([],{}):new Pt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Xe]=new Pt(e,n)),r}parseSegment(){const e=C0(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new lp(zy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function xG(t){const e=t.match(MG);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=C0(this.remaining);i&&(r=i,this.capture(r))}e[zy(n)]=zy(r)}parseQueryParam(e){const n=function OG(t){const e=t.match(NG);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function LG(t){const e=t.match(kG);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=OO(n),o=OO(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=C0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Xe);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[Xe]:new Pt([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}}function LO(t){return t.segments.length>0?new Pt([],{[Xe]:t}):t}function FO(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=FO(i);if(r===Xe&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function VG(t){if(1===t.numberOfChildren&&t.children[Xe]){const e=t.children[Xe];return new Pt(t.segments.concat(e.segments),e.children)}return t}(new Pt(t.segments,e))}function nc(t){return t instanceof dd}function VO(t){let e;const i=LO(function n(o){const s={};for(const u of o.children){const d=n(u);s[u.outlet]=d}const a=new Pt(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function UO(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return D0(i,i,i,n,r);const o=function BG(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new jO(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new jO(n,e,r)}(e);if(o.toRoot())return D0(i,i,new Pt([],{}),n,r);const s=function jG(t,e,n){if(t.isAbsolute)return new Gy(e,!0,0);if(!n)return new Gy(e,!1,NaN);if(null===n.parent)return new Gy(n,!0,0);const r=qy(t.commands[0])?0:1;return function $G(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Gy(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?fp(s.segmentGroup,s.index,o.commands):$O(s.segmentGroup,s.index,o.commands);return D0(i,s.segmentGroup,a,n,r)}function qy(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function hp(t){return"object"==typeof t&&null!=t&&t.outlets}function D0(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,d])=>{o[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),s=t===e?n:BO(t,e,n);const a=LO(FO(s));return new dd(a,o,i)}function BO(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:BO(o,e,n)}),new Pt(t.segments,r)}class jO{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&qy(r[0]))throw new H(4003,!1);const i=r.find(hp);if(i&&i!==r.at(-1))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gy{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function $O(t,e,n){if(t||(t=new Pt([],{})),0===t.segments.length&&t.hasChildren())return fp(t,e,n);const r=function zG(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(hp(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!zO(u,d,s))return o;r+=2}else{if(!zO(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Pt(t.segments.slice(0,r.pathIndex),{});return o.children[Xe]=new Pt(t.segments.slice(r.pathIndex),t.children),fp(o,0,i)}return r.match&&0===i.length?new Pt(t.segments,{}):r.match&&!t.hasChildren()?b0(t,e,n):r.match?fp(t,0,i):b0(t,e,n)}function fp(t,e,n){if(0===n.length)return new Pt(t.segments,{});{const r=function HG(t){return hp(t[0])?t[0].outlets:{[Xe]:t}}(n),i={};if(Object.keys(r).some(o=>o!==Xe)&&t.children[Xe]&&1===t.numberOfChildren&&0===t.children[Xe].segments.length){const o=fp(t.children[Xe],e,n);return new Pt(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=$O(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Pt(t.segments,i)}}function b0(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(hp(o)){const u=qG(o.outlets);return new Pt(r,u)}if(0===i&&qy(n[0])){r.push(new lp(t.segments[e].path,HO(n[0]))),i++;continue}const s=hp(o)?o.outlets[Xe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&qy(a)?(r.push(new lp(s,HO(a))),i+=2):(r.push(new lp(s,{})),i++)}return new Pt(r,{})}function qG(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=b0(new Pt([],{}),0,r))}),e}function HO(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function zO(t,e,n){return t==n.path&&Qo(e,n.parameters)}const pp="imperative";class Yo{constructor(e,n){this.id=e,this.url=n}}class Wy extends Yo{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jo extends Yo{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fd extends Yo{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pd extends Yo{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class Zy extends Yo{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qO extends Yo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GG extends Yo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WG extends Yo{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ZG extends Yo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KG extends Yo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QG{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YG{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class JG{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XG{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e8{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t8{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GO{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class A0{}class S0{constructor(e){this.url=e}}class n8{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new gp,this.attachRef=null}}let gp=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new n8,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class WO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=R0(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=R0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=P0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return P0(e,this._root).map(n=>n.value)}}function R0(t,e){if(t===e.value)return e;for(const n of e.children){const r=R0(t,n);if(r)return r}return null}function P0(t,e){if(t===e.value)return[e];for(const n of e.children){const r=P0(t,n);if(r.length)return r.unshift(e),r}return[]}class Io{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function gd(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class ZO extends WO{constructor(e,n){super(e),this.snapshot=n,N0(this,e)}toString(){return this.snapshot.toString()}}function KO(t){const e=function r8(t){const o=new x0([],{},{},"",{},Xe,t,null,{});return new QO("",new Io(o,[]))}(t),n=new M([new lp("",{})]),r=new M({}),i=new M({}),o=new M({}),s=new M(""),a=new rc(n,r,o,s,i,Xe,t,e.root);return a.snapshot=e.root,new ZO(new Io(a,[]),e)}class rc{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ce(d=>d[cp]))??Ne(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ce(e=>ld(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ce(e=>ld(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function M0(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&JO(i)&&(r.resolve[cp]=i.title),r}class x0{get title(){return this.data?.[cp]}constructor(e,n,r,i,o,s,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ld(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ld(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class QO extends WO{constructor(e,n){super(n),this.url=e,N0(this,n)}toString(){return YO(this._root)}}function N0(t,e){e.value._routerState=t,e.children.forEach(n=>N0(t,n))}function YO(t){const e=t.children.length>0?` { ${t.children.map(YO).join(", ")} } `:"";return`${t.value}${e}`}function O0(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Qo(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Qo(e.params,n.params)||t.paramsSubject.next(n.params),function IG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Qo(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Qo(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function k0(t,e){const n=Qo(t.params,e.params)&&function CG(t,e){return tc(t,e)&&t.every((n,r)=>Qo(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||k0(t.parent,e.parent))}function JO(t){return"string"==typeof t.title||null===t.title}let L0=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xe,this.activateEvents=new Vr,this.deactivateEvents=new Vr,this.attachEvents=new Vr,this.detachEvents=new Vr,this.parentContexts=oe(gp),this.location=oe(mo),this.changeDetector=oe(U_),this.environmentInjector=oe(ti),this.inputBinder=oe(Ky,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new i8(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Sn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ir]})}return t})();class i8{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===rc?this.route:e===gp?this.childContexts:this.parent.get(e,n)}}const Ky=new he("");let XO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=m0([r.queryParams,r.params,r.data]).pipe(Xn(([o,s,a],u)=>(a={...o,...s,...a},0===u?Ne(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function aq(t){const e=Qe(t);if(!e)return null;const n=new xf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})();function mp(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function s8(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return mp(t,r,i);return mp(t,r)})}(t,e,n);return new Io(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>mp(t,a)),s}}const r=function a8(t){return new rc(new M(t.url),new M(t.params),new M(t.queryParams),new M(t.fragment),new M(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>mp(t,o));return new Io(r,i)}}const F0="ngNavigationCancelingError";function e1(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=nc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=t1(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function t1(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[F0]=!0,r.cancellationCode=e,n&&(r.url=n),r}function n1(t){return t&&t[F0]}let r1=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["ng-component"]],standalone:!0,features:[nx],decls:1,vars:0,template:function(r,i){1&r&&tn(0,"router-outlet")},dependencies:[L0],encapsulation:2})}return t})();function V0(t){const e=t.children&&t.children.map(V0),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Xe&&(n.component=r1),n}function Xo(t){return t.outlet||Xe}function _p(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class g8{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),O0(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=gd(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=gd(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=gd(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=gd(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new t8(o.value.snapshot))}),e.children.length&&this.forwardEvent(new XG(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(O0(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),O0(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=_p(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class i1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Qy{constructor(e,n){this.component=e,this.route=n}}function m8(t,e,n){const r=t._root;return yp(r,e?e._root:null,n,[r.value])}function md(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function MI(t){return null!==Js(t)}(t)?e.get(t):t:r}function yp(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=gd(e);return t.children.forEach(s=>{(function y8(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function v8(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!tc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!tc(t.url,e.url)||!Qo(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!k0(t,e)||!Qo(t.queryParams,e.queryParams);default:return!k0(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new i1(r)):(o.data=s.data,o._resolvedData=s._resolvedData),yp(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qy(a.outlet.component,s))}else s&&vp(e,a,i),i.canActivateChecks.push(new i1(r)),yp(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vp(a,n.getContext(s),i)),i}function vp(t,e,n){const r=gd(t),i=t.value;Object.entries(r).forEach(([o,s])=>{vp(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Qy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ip(t){return"function"==typeof t}function o1(t){return t instanceof Ly||"EmptyError"===t?.name}const Yy=Symbol("INITIAL_VALUE");function _d(){return Xn(t=>m0(t.map(e=>e.pipe(ud(1),Vy(Yy)))).pipe(Ce(e=>{for(const n of e)if(!0!==n){if(n===Yy)return Yy;if(!1===n||n instanceof dd)return n}return!0}),vo(e=>e!==Yy),ud(1)))}function s1(t){return function bo(...t){return ds(t)}(lr(e=>{if(nc(e))throw e1(0,e)}),Ce(e=>!0===e))}class U0{constructor(e){this.segmentGroup=e||null}}class B0 extends Error{constructor(e){super(),this.urlTree=e}}function yd(t){return Fy(new U0(t))}class U8{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ne(r);if(i.numberOfChildren>1||!i.children[Xe])return Fy(new H(4e3,!1));i=i.children[Xe]}}applyRedirectCommands(e,n,r){const i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new B0(i);return i}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new dd(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Pt(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const j0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B8(t,e,n,r,i){const o=$0(t,e,n);return o.matched?(r=function c8(t,e){return t.providers&&!t._injector&&(t._injector=cT(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function L8(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?Ne(i.map(s=>{const a=md(s,t);return Ba(function D8(t){return t&&Ip(t.canMatch)}(a)?a.canMatch(e,n):se(t,()=>a(e,n)))})).pipe(_d(),s1()):Ne(!0)}(r,e,n).pipe(Ce(s=>!0===s?o:{...j0}))):Ne(o)}function $0(t,e,n){if("**"===e.path)return function j8(t){return{matched:!0,parameters:t.at(-1)?.parameters??{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...j0}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||vG)(n,t,e);if(!i)return{...j0};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function a1(t,e,n,r){return n.length>0&&function z8(t,e,n){return n.some(r=>Jy(t,e,r)&&Xo(r)!==Xe)}(t,n,r)?{segmentGroup:new Pt(e,H8(r,new Pt(n,t.children))),slicedSegments:[]}:0===n.length&&function q8(t,e,n){return n.some(r=>Jy(t,e,r))}(t,n,r)?{segmentGroup:new Pt(t.segments,$8(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Pt(t.segments,t.children),slicedSegments:n}}function $8(t,e,n,r){const i={};for(const o of n)if(Jy(t,e,o)&&!r[Xo(o)]){const s=new Pt([],{});i[Xo(o)]=s}return{...r,...i}}function H8(t,e){const n={};n[Xe]=e;for(const r of t)if(""===r.path&&Xo(r)!==Xe){const i=new Pt([],{});n[Xo(r)]=i}return n}function Jy(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Z8{}class Y8{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new U8(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){const e=a1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(n=>{const r=new x0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xe,this.rootComponentType,null,{}),i=new Io(r,n),o=new QO("",i),s=function UG(t,e,n=null,r=null){return UO(VO(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Xe).pipe(cd(r=>{if(r instanceof B0)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof U0?this.noMatchError(r):r}))}inheritParamsAndData(e,n){const r=e.value,i=M0(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Ce(o=>o instanceof Io?[o]:[]))}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return nn(i).pipe(up(o=>{const s=r.children[o],a=function f8(t,e){const n=t.filter(r=>Xo(r)===e);return n.push(...t.filter(r=>Xo(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),By((o,s)=>(o.push(...s),o)),Uy(null),function gG(t,e){const n=arguments.length>=2;return r=>r.pipe(t?vo((i,o)=>t(i,o,r)):Gn,v0(1),n?Uy(e):bO(()=>new Ly))}(),Tr(o=>{if(null===o)return yd(r);const s=u1(o);return function J8(t){t.sort((e,n)=>e.value.outlet===Xe?-1:n.value.outlet===Xe?1:e.value.outlet.localeCompare(n.value.outlet))}(s),Ne(s)}))}processSegment(e,n,r,i,o,s){return nn(n).pipe(up(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(cd(u=>{if(u instanceof U0)return Ne(null);throw u}))),Ua(a=>!!a),cd(a=>{if(o1(a))return function W8(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?Ne(new Z8):yd(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function G8(t,e,n,r){return!!(Xo(t)===r||r!==Xe&&Jy(e,n,t))&&$0(e,t,n).matched}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):yd(i):yd(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=$0(n,i,o);if(!a)return yd(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d);return this.applyRedirects.lineralizeSegments(i,g).pipe(Tr(_=>this.processSegment(e,r,n,_.concat(f),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){const s=B8(n,r,i,e);return"**"===r.path&&(n.children={}),s.pipe(Xn(a=>a.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Xn(({routes:u})=>{const d=r._loadedInjector??e,{consumedSegments:f,remainingSegments:g,parameters:_}=a,y=new x0(f,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function eW(t){return t.data||{}}(r),Xo(r),r.component??r._loadedComponent??null,r,function tW(t){return t.resolve||{}}(r)),{segmentGroup:I,slicedSegments:C}=a1(n,f,g,u);if(0===C.length&&I.hasChildren())return this.processChildren(d,u,I).pipe(Ce(N=>null===N?null:new Io(y,N)));if(0===u.length&&0===C.length)return Ne(new Io(y,[]));const S=Xo(r)===o;return this.processSegment(d,u,I,C,S?Xe:o,!0).pipe(Ce(N=>new Io(y,N instanceof Io?[N]:[])))})):yd(n)))}getChildConfig(e,n,r){return n.children?Ne({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?Ne({routes:n._loadedRoutes,injector:n._loadedInjector}):function k8(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?Ne(!0):Ne(i.map(s=>{const a=md(s,t);return Ba(function E8(t){return t&&Ip(t.canLoad)}(a)?a.canLoad(e,n):se(t,()=>a(e,n)))})).pipe(_d(),s1())}(e,n,r).pipe(Tr(i=>i?this.configLoader.loadChildren(e,n).pipe(lr(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function V8(t){return Fy(t1(!1,3))}())):Ne({routes:[],injector:e})}}function X8(t){const e=t.value.routeConfig;return e&&""===e.path}function u1(t){const e=[],n=new Set;for(const r of t){if(!X8(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=u1(r.children);e.push(new Io(r.value,i))}return e.filter(r=>!n.has(r))}function c1(t){const e=t.children.map(n=>c1(n)).flat();return[t,...e]}function H0(t){return Xn(e=>{const n=t(e);return n?nn(n).pipe(Ce(()=>e)):Ne(e)})}let l1=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Xe);return r}getResolvedTitleForRoute(n){return n.data[cp]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:()=>oe(aW),providedIn:"root"})}return t})(),aW=(()=>{class t extends l1{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(re(sO))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const vd=new he("",{providedIn:"root",factory:()=>({})}),Id=new he("ROUTES");let z0=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=oe(Ux)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ne(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Ba(n.loadComponent()).pipe(Ce(d1),lr(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),I0(()=>{this.componentLoaders.delete(n)})),i=new DO(r,()=>new A).pipe(y0());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function uW(t,e,n,r){return Ba(t.loadChildren()).pipe(Ce(d1),Tr(i=>i instanceof ex||Array.isArray(i)?Ne(i):nn(e.compileModuleAsync(i))),Ce(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(Id,[],{optional:!0,self:!0}).flat()),{routes:s.map(V0),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(I0(()=>{this.childrenLoaders.delete(r)})),s=new DO(o,()=>new A).pipe(y0());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function d1(t){return function cW(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let q0=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:()=>oe(lW),providedIn:"root"})}return t})(),lW=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const h1=new he(""),f1=new he("");function dW(t,e,n){const r=t.get(f1),i=t.get(jr);return t.get(ft).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o;const s=new Promise(d=>{o=d}),a=i.startViewTransition(()=>(o(),function hW(t){return new Promise(e=>{TR(e,{injector:t})})}(t))),{onViewTransitionCreated:u}=r;return u&&se(t,()=>u({transition:a,from:e,to:n})),s})}let Xy=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new A,this.transitionAbortSubject=new A,this.configLoader=oe(z0),this.environmentInjector=oe(ti),this.urlSerializer=oe(hd),this.rootContexts=oe(gp),this.location=oe(rd),this.inputBindingEnabled=null!==oe(Ky,{optional:!0}),this.titleStrategy=oe(l1),this.options=oe(vd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=oe(q0),this.createViewTransition=oe(h1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ne(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new YG(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new QG(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vo(o=>0!==o.id),Ce(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Xn(o=>{this.currentTransition=o;let s=!1,a=!1;return Ne(o).pipe(lr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Xn(u=>{const d=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!d&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const g="";return this.events.next(new pd(u.id,this.urlSerializer.serialize(u.rawUrl),g,0)),u.resolve(null),Ko}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Ne(u).pipe(Xn(g=>{const _=this.transitions?.getValue();return this.events.next(new Wy(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?Ko:Promise.resolve(g)}),function nW(t,e,n,r,i,o){return Tr(s=>function K8(t,e,n,r,i,o,s="emptyOnly"){return new Y8(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(Ce(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),lr(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new qO(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:g,extractedUrl:_,source:y,restoredState:I,extras:C}=u,S=new Wy(g,this.urlSerializer.serialize(_),y,I);this.events.next(S);const N=KO(this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:N,urlAfterRedirects:_,extras:{...C,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=_,Ne(o)}{const g="";return this.events.next(new pd(u.id,this.urlSerializer.serialize(u.extractedUrl),g,1)),u.resolve(null),Ko}}),lr(u=>{const d=new GG(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ce(u=>(this.currentTransition=o={...u,guards:m8(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function A8(t,e){return Tr(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Ne({...n,guardsResult:!0}):function S8(t,e,n,r){return nn(t).pipe(Tr(i=>function O8(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Ne(o.map(a=>{const u=_p(e)??i,d=md(a,u);return Ba(function C8(t){return t&&Ip(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):se(u,()=>d(t,e,n,r))).pipe(Ua())})).pipe(_d()):Ne(!0)}(i.component,i.route,n,e,r)),Ua(i=>!0!==i,!0))}(s,r,i,t).pipe(Tr(a=>a&&function I8(t){return"boolean"==typeof t}(a)?function R8(t,e,n,r){return nn(e).pipe(up(i=>_0(function M8(t,e){return null!==t&&e&&e(new JG(t)),Ne(!0)}(i.route.parent,r),function P8(t,e){return null!==t&&e&&e(new e8(t)),Ne(!0)}(i.route,r),function N8(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function _8(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>CO(()=>Ne(s.guards.map(u=>{const d=_p(s.node)??n,f=md(u,d);return Ba(function T8(t){return t&&Ip(t.canActivateChild)}(f)?f.canActivateChild(r,t):se(d,()=>f(r,t))).pipe(Ua())})).pipe(_d())));return Ne(o).pipe(_d())}(t,i.path,n),function x8(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ne(!0);const i=r.map(o=>CO(()=>{const s=_p(e)??n,a=md(o,s);return Ba(function w8(t){return t&&Ip(t.canActivate)}(a)?a.canActivate(e,t):se(s,()=>a(e,t))).pipe(Ua())}));return Ne(i).pipe(_d())}(t,i.route,n))),Ua(i=>!0!==i,!0))}(r,o,t,e):Ne(a)),Ce(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),lr(u=>{if(o.guardsResult=u.guardsResult,nc(u.guardsResult))throw e1(0,u.guardsResult);const d=new WG(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),vo(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),H0(u=>{if(u.guards.canActivateChecks.length)return Ne(u).pipe(lr(d=>{const f=new ZG(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Xn(d=>{let f=!1;return Ne(d).pipe(function rW(t,e){return Tr(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ne(n);const o=new Set(i.map(u=>u.route)),s=new Set;for(const u of o)if(!s.has(u))for(const d of c1(u))s.add(d);let a=0;return nn(s).pipe(up(u=>o.has(u)?function iW(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!JO(i)&&(o[cp]=i.title),function oW(t,e,n,r){const i=E0(t);if(0===i.length)return Ne({});const o={};return nn(i).pipe(Tr(s=>function sW(t,e,n,r){const i=_p(e)??r,o=md(t,i);return Ba(o.resolve?o.resolve(e,n):se(i,()=>o(e,n)))}(t[s],e,n,r).pipe(Ua(),lr(a=>{o[s]=a}))),v0(1),function mG(t){return Ce(()=>t)}(o),cd(s=>o1(s)?Ko:Fy(s)))}(o,t,e,r).pipe(Ce(s=>(t._resolvedData=s,t.data=M0(t,t.parent,n).resolve,null)))}(u,r,t,e):(u.data=M0(u,u.parent,t).resolve,Ne(void 0))),lr(()=>a++),v0(1),Tr(u=>a===s.size?Ne(n):Ko))})}(this.paramsInheritanceStrategy,this.environmentInjector),lr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",2)}}))}),lr(d=>{const f=new KG(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),H0(u=>{const d=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(lr(_=>{f.component=_}),Ce(()=>{})));for(const _ of f.children)g.push(...d(_));return g};return m0(d(u.targetSnapshot.root)).pipe(Uy(null),ud(1))}),H0(()=>this.afterPreactivation()),Xn(()=>{const{currentSnapshot:u,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?nn(f).pipe(Ce(()=>o)):Ne(o)}),Ce(u=>{const d=function o8(t,e,n){const r=mp(t,e._root,n?n._root:void 0);return new ZO(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:d},this.currentNavigation.targetRouterState=d,o}),lr(()=>{this.events.next(new A0)}),((t,e,n,r)=>Ce(i=>(new g8(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ud(1),lr({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jo(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function _G(t){return Ie((e,n)=>{Ji(t).subscribe(be(n,()=>n.complete(),Mr)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(lr(u=>{throw u}))),I0(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),cd(u=>{if(a=!0,n1(u))this.events.next(new fd(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function u8(t){return n1(t)&&nc(t.url)}(u)?this.events.next(new S0(u.url)):o.resolve(!1);else{this.events.next(new Zy(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(d){o.reject(d)}}return Ko}))}))}cancelNavigationTransition(n,r,i){const o=new fd(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fW(t){return t!==pp}let pW=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:()=>oe(mW),providedIn:"root"})}return t})();class gW{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let mW=(()=>{class t extends gW{static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Lu(t)))(i||t)}})();static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),p1=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:()=>oe(_W),providedIn:"root"})}return t})(),_W=(()=>{class t extends p1{constructor(){super(...arguments),this.location=oe(rd),this.urlSerializer=oe(hd),this.options=oe(vd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=oe(q0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new dd,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=KO(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Wy)this.stateMemento=this.createStateMemento();else if(n instanceof pd)this.rawUrlTree=r.initialUrl;else if(n instanceof qO){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof A0?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof fd&&(3===n.code||2===n.code)?this.restoreHistory(r):n instanceof Zy?this.restoreHistory(r,!0):n instanceof Jo&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&0===o&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Lu(t)))(i||t)}})();static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ep=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ep||{});function g1(t,e){t.events.pipe(vo(n=>n instanceof Jo||n instanceof fd||n instanceof Zy||n instanceof pd),Ce(n=>n instanceof Jo||n instanceof pd?Ep.COMPLETE:n instanceof fd&&(0===n.code||1===n.code)?Ep.REDIRECTING:Ep.FAILED),vo(n=>n!==Ep.REDIRECTING),ud(1)).subscribe(()=>{e()})}function yW(t){throw t}const vW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bi=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=oe(Vx),this.stateManager=oe(p1),this.options=oe(vd,{optional:!0})||{},this.pendingTasks=oe(dy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=oe(Xy),this.urlSerializer=oe(hd),this.location=oe(rd),this.urlHandlingStrategy=oe(q0),this._events=new A,this.errorHandler=this.options.errorHandler||yW,this.navigated=!1,this.routeReuseStrategy=oe(pW),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=oe(Id,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!oe(Ky,{optional:!0}),this.eventsSubscription=new Ct,this.isNgZoneEnabled=oe(ft)instanceof ft&&ft.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof fd&&0!==r.code&&1!==r.code)this.navigated=!0;else if(r instanceof Jo)this.navigated=!0;else if(r instanceof S0){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fW(i.source)};this.scheduleNavigation(s,pp,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function wW(t){return!(t instanceof A0||t instanceof S0)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(V0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:s;let g,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...o};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}null!==f&&(f=this.removeEmptyProps(f));try{g=VO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return UO(g,n,f,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=nc(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,pp,null,r)}navigate(n,r={skipLocationChange:!1}){return function EW(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new H(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...vW}:!1===r?{...IW}:r,nc(n))return RO(this.currentUrlTree,n,i);const o=this.parseUrl(n);return RO(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,d;s?(a=s.resolve,u=s.reject,d=s.promise):d=new Promise((g,_)=>{a=g,u=_});const f=this.pendingTasks.add();return g1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wp=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new A,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof Jo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function DS(t,e,n){return function hB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?GE:CS}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(Me(bi),Me(rc),function Fu(t){return function cE(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Eh(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(Tt(),t)}("tabindex"),Me(x_),Me(xa),Me(Xu))};static#t=this.\u0275dir=Sn({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ka("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Tw("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",VT],skipLocationChange:["skipLocationChange","skipLocationChange",VT],replaceUrl:["replaceUrl","replaceUrl",VT],routerLink:"routerLink"},standalone:!0,features:[NR,Ir]})}return t})();class m1{}let DW=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(vo(n=>n instanceof Jo),up(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=cT(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return nn(i).pipe(ad())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Ne(null);const o=i.pipe(Tr(s=>null===s?Ne(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?nn([o,this.loader.loadComponent(r)]).pipe(ad()):o})}static#e=this.\u0275fac=function(r){return new(r||t)(re(bi),re(Ux),re(ti),re(m1),re(z0))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const G0=new he("");let _1=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Wy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Jo?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof pd&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof GO&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new GO(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function XS(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac})}return t})();function es(t,e){return{\u0275kind:t,\u0275providers:e}}function v1(){const t=oe(Jn);return e=>{const n=t.get(Yu);if(e!==n.components[0])return;const r=t.get(bi),i=t.get(I1);1===t.get(W0)&&r.initialNavigation(),t.get(E1,null,rt.Optional)?.setUpPreloading(),t.get(G0,null,rt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const I1=new he("",{factory:()=>new A}),W0=new he("",{providedIn:"root",factory:()=>1}),E1=new he("");function RW(t){return es(0,[{provide:E1,useExisting:DW},{provide:m1,useExisting:t}])}function MW(t){return es(9,[{provide:h1,useValue:dW},{provide:f1,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const w1=new he("ROUTER_FORROOT_GUARD"),xW=[rd,{provide:hd,useClass:w0},bi,gp,{provide:rc,useFactory:function y1(t){return t.routerState.root},deps:[bi]},z0,[]];let T1=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[xW,[],{provide:Id,multi:!0,useValue:n},{provide:w1,useFactory:LW,deps:[[bi,new Vu,new gl]]},{provide:vd,useValue:r||{}},r?.useHash?{provide:Xu,useClass:hq}:{provide:Xu,useClass:AN},{provide:G0,useFactory:()=>{const t=oe(O6),e=oe(ft),n=oe(vd),r=oe(Xy),i=oe(hd);return n.scrollOffset&&t.setOffset(n.scrollOffset),new _1(i,r,t,e,n)}},r?.preloadingStrategy?RW(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?FW(r):[],r?.bindToComponentInputs?es(8,[XO,{provide:Ky,useExisting:XO}]).\u0275providers:[],r?.enableViewTransitions?MW().\u0275providers:[],[{provide:C1,useFactory:v1},{provide:AT,multi:!0,useExisting:C1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Id,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(re(w1,8))};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=ki({})}return t})();function LW(t){return"guarded"}function FW(t){return["disabled"===t.initialNavigation?es(3,[{provide:DT,multi:!0,useFactory:()=>{const e=oe(bi);return()=>{e.setUpLocationChangeListener()}}},{provide:W0,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?es(2,[{provide:W0,useValue:0},{provide:DT,multi:!0,deps:[Jn],useFactory:e=>{const n=e.get(lq,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(bi),o=e.get(I1);g1(i,()=>{r(!0)}),e.get(Xy).afterPreactivation=()=>(r(!0),o.closed?Ne(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const C1=new he("");let D1=(()=>{class t{constructor(){this.title="app"}ngAfterViewInit(){$(function(){$('[data-toggle="popover"]').popover()})}openLink(n){window.open(n,"_blank")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-home"]],decls:49,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["id","picture"],[1,"about-section","mt-5"],[1,"container"],[1,"row","img-wrap","mb-5","mb-lg-0"],[1,"col-12"],[1,"row"],[1,"mb-4","margin-lg-0","col-lg-6","order-lg-2"],[1,"effect"],["src","assets/lineesiciliane.png","alt","Mappa linee ferroviarie siciliane di RFI",1,"img-fluid"],[1,"col-lg-5","mr-auto","text-lg-right","align-self-center","order-lg-1"],[1,"mb-4"],["id","popover","data-bs-container","body","data-toggle","popover","data-bs-placement","bottom","data-bs-content","Non sono attualmente previsti i posti di movimento, solo STAZIONI e FERMATE. Non sono considerate le linee dismesse. Sono considerate le linee non attive IN FASE DI RIPRISTINO",1,"btn"],["href","https://normativaesercizio.rfi.it/NormativaEsercizio/detail.xhtml?doctype=FCL&compartimento=PA","target","_blank",1,"btn","btn-about"],[1,"material-symbols-outlined"],[1,"mb-4","margin-lg-0","col-lg-6"],["src","https://www.palermomania.it/public/news/image/images/metro.jpg","alt","Cartello passante ferroviario di Palermo",1,"img-fluid"],[1,"col-lg-5","ml-auto","align-self-center","order-lg-1"],["href","https://www.palermomania.it/","target","_blank",1,"btn","btn-about"],["src","https://www.stagniweb.it/altro/orizzf/636gioi0.jpg","alt","Locomotiva E636.010 in transito a Gioiosa Marea(ME)",1,"img-fluid"],["href","https://www.stagniweb.it/foto6.asp?File=orizzf&Inizio=68&Righe=10&InizioI=1&RigheI=150&Col=5&Titolo=0","target","_blank",1,"btn","btn-about"]],template:function(r,i){1&r&&(tn(0,"link",0)(1,"div",1),le(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"a",8),tn(9,"img",9),de()(),le(10,"div",10)(11,"h2"),we(12,"Benvenuto su SpotiRFI! \u{1f684}\u{1f3b5}"),de(),le(13,"p",11),we(14," SpotiRFI \xe8 un viaggio unico attraverso la musica e le linee ferroviarie della Sicilia. Ogni stazione ferroviaria sulla mappa \xe8 associata a una canzone che porta il suo nome"),le(15,"span",12),we(16," * "),de(),we(17,", creando un'esperienza musicale che riflette il viaggio attraverso la nostra bellissima regione. "),de(),le(18,"a",13)(19,"span",14),we(20," open_in_new "),de()()()()()(),le(21,"div",4)(22,"div",5)(23,"div",6)(24,"div",15)(25,"a",8),tn(26,"img",16),de()(),le(27,"div",17)(28,"h2"),we(29,"Come funziona? \u{1f9d0}"),de(),le(30,"p",11),we(31," Scegli una linea ferroviaria sulla mappa e inizia il tuo viaggio musicale. Ad ogni fermata, ti verr\xe0 presentata una canzone che porta il nome della stazione. Puoi ascoltare la canzone mentre leggi informazioni sulla stazione e sulla sua storia. "),de(),le(32,"a",18)(33,"span",14),we(34," open_in_new "),de()()()()()(),le(35,"div",4)(36,"div",5)(37,"div",6)(38,"div",7)(39,"a",8),tn(40,"img",19),de()(),le(41,"div",10)(42,"h2"),we(43,"Perch\xe9 SpotiRFI? \u{1f914}"),de(),le(44,"p",11),we(45," La musica e i viaggi sono due esperienze che possono portarci in luoghi che non abbiamo mai visitato. SpotiRFI combina queste due esperienze in un unico viaggio, permettendoti di esplorare la Sicilia attraverso le sue linee ferroviarie e la sua musica. "),de(),le(46,"a",20)(47,"span",14),we(48," open_in_new "),de()()()()()()()())},styles:['#popover[_ngcontent-%COMP%]{background-color:transparent;border:none;color:inherit;padding:0 0 0 5px}.about-section[_ngcontent-%COMP%]{margin:auto}#picture[_ngcontent-%COMP%]{background-image:url(https://external-preview.redd.it/in-sicilia-su-strade-colabrodo-e-treni-lumaca-aspettando-il-v0-YGYToK560tbwieHeMTYEEwdI9G0MiCoAnOe-kdmPdrU.jpg?auto=webp&s=0d0a9a6e7891b6fe511766e49a45ffb84cf2124f);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}.img-wrap[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{position:relative;margin-bottom:0;display:block}.img-wrap[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]:after{z-index:-1;content:"";position:absolute;inset:10px;background:#2b3035;transition:.3s all ease-in-out}.img-wrap[_ngcontent-%COMP%]:hover   .effect[_ngcontent-%COMP%]:after{right:-10px;bottom:-10px;position:absolute}.btn-about[_ngcontent-%COMP%]{color:#000!important;margin-right:5px;margin-left:5px;animation:skew 3s infinite;animation-direction:normal;animation-direction:alternate;padding:5px 17px}.row[_ngcontent-%COMP%]{color:#000;margin-bottom:4em}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}']})}return t})();var Ed=ze(534);(0,Ed.registerVersion)("firebase","10.7.1","app");class jW extends Ct{constructor(e,n){super()}schedule(e,n=0){return this}}const ev={setInterval(t,e,...n){const{delegate:r}=ev;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=ev;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class b1 extends jW{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ev.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&ev.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,An(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const Z0={now:()=>(Z0.delegate||Date).now(),delegate:void 0};class Tp{constructor(e,n=Tp.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Tp.now=Z0.now;class A1 extends Tp{constructor(e,n=Tp.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const zW=new class HW extends A1{}(class $W extends b1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),S1=new A1(b1),K0=new Xf("ANGULARFIRE2_VERSION");class R1{constructor(){return((t,e)=>{const n=(0,Ed.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(GW)}}const GW="app-check";function wd(){}class P1{zone;delegate;constructor(e,n=zW){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class WW{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wd,{},wd,wd)),n.pipe(lr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let M1=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new P1(Zone.current)),this.insideAngular=n.run(()=>new P1(Zone.current,S1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(re(ft))};static \u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ai(t){return function KW(t){return function(n){return(n=n.lift(new WW(t.ngZone))).pipe(sd(t.outsideAngular),ec(t.insideAngular))}}(function Td(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var ja=ze(106);ja.Z.registerVersion("firebase","10.7.1","app-compat");const XW=["ngOnDestroy"];class x1{constructor(e){return e}}const tv=new he("angularfire2.app.options"),nv=new he("angularfire2.app.name");function Q0(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=ja.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ja.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;n7("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new x1(s)}const n7=(t,...e)=>{},r7={provide:x1,useFactory:Q0,deps:[tv,ft,[new Vu,nv]]};let i7=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:tv,useValue:n},{provide:nv,useValue:r}]}}constructor(n){ja.Z.registerVersion("angularfire",K0.full,"core"),ja.Z.registerVersion("angularfire",K0.full,"app-compat"),ja.Z.registerVersion("angular",j3.full,n.toString())}static \u0275fac=function(r){return new(r||t)(re($o))};static \u0275mod=gi({type:t});static \u0275inj=ki({providers:[r7]})}return t})();function N1(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function o7(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(O1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${s7?" You may need to reload as Firebase is not HMR aware.":""}`),O1("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const s7=typeof module<"u"&&!!module.hot,O1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],ze(230);class u7 extends A{constructor(e=1/0,n=1/0,r=Z0){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function Y0(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new qn({next:()=>{r.unsubscribe(),t()}});return Ji(e(...n)).subscribe(r)}function k1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,function c7(t={}){const{connector:e=(()=>new A),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,d=0,f=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),s=u=void 0,f=g=!1},I=()=>{const C=s;y(),C?.unsubscribe()};return Ie((C,S)=>{d++,!g&&!f&&_();const N=u=u??e();S.add(()=>{d--,0===d&&!g&&!f&&(a=Y0(I,i))}),N.subscribe(S),!s&&d>0&&(s=new qn({next:R=>N.next(R),error:R=>{g=!0,_(),a=Y0(y,n,R),N.error(R)},complete:()=>{f=!0,_(),a=Y0(y,r),N.complete()}}),Ji(C).subscribe(s))})(o)}}({connector:()=>new u7(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function L1(t,e){return ke(e)?Xn(()=>t,e):Xn(()=>t)}const F1=new he("angularfire2.auth.use-emulator"),V1=new he("angularfire2.auth.settings"),U1=new he("angularfire2.auth.tenant-id"),B1=new he("angularfire2.auth.langugage-code"),j1=new he("angularfire2.auth.use-device-language"),$1=new he("angularfire.auth.persistence"),H1=(t,e,n,r,i,o,s,a)=>N1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[d,f]of Object.entries(s))u.settings[d]=f;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]);let z1=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,d,f,g,_,y){const I=new A,C=Ne(void 0).pipe(ec(s.outsideAngular),Xn(()=>o.runOutsideAngular(()=>Promise.resolve().then(ze.bind(ze,230)))),Ce(()=>Q0(n,o,r)),Ce(S=>H1(S,o,a,d,f,g,u,_)),k1({bufferSize:1,refCount:!1}));if(Ny(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ne(null);else{C.pipe(Ua()).subscribe();const S=C.pipe(Xn(U=>U.getRedirectResult().then(ne=>ne,()=>null)),Ai,k1({bufferSize:1,refCount:!1})),N=C.pipe(Xn(U=>new zt(ne=>({unsubscribe:o.runOutsideAngular(()=>U.onAuthStateChanged(ae=>ne.next(ae),ae=>ne.error(ae),()=>ne.complete()))})))),R=C.pipe(Xn(U=>new zt(ne=>({unsubscribe:o.runOutsideAngular(()=>U.onIdTokenChanged(ae=>ne.next(ae),ae=>ne.error(ae),()=>ne.complete()))}))));this.authState=S.pipe(L1(N),sd(s.outsideAngular),ec(s.insideAngular)),this.user=S.pipe(L1(R),sd(s.outsideAngular),ec(s.insideAngular)),this.idToken=this.user.pipe(Xn(U=>U?nn(U.getIdToken()):Ne(null))),this.idTokenResult=this.user.pipe(Xn(U=>U?nn(U.getIdTokenResult()):Ne(null))),this.credential=function a7(...t){const e=ap(t),n=function J5(t,e){return"number"==typeof g0(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Ji(r[0]):ad(n)(nn(r,e)):Ko}(S,I,this.authState.pipe(vo(U=>!U))).pipe(Ce(U=>U?.user?U:null),sd(s.outsideAngular),ec(s.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(XW.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,d)=>s.then(f=>{const g=f?.(...d);return r?.spy?.apply&&r.spy.apply(o,d,g),g})})})}))(this,C,o,{spy:{apply:(S,N,R)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&R.then(U=>I.next(U))}}})}static \u0275fac=function(r){return new(r||t)(re(tv),re(nv,8),re($o),re(ft),re(M1),re(F1,8),re(V1,8),re(U1,8),re(B1,8),re(j1,8),re($1,8),re(R1,8))};static \u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function J0(){return Ie((t,e)=>{let n,r=!1;t.subscribe(be(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}function h7(t,e){return t===e}var fe,W=ze(861),q1=ze(537),ts=ze(879),kt=ze(58),f7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Eo={},X0=X0||{},Ge=f7||self;function rv(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Cp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var eC="closure_uid_"+(1e9*Math.random()>>>0),g7=0;function m7(t,e,n){return t.call.apply(t.bind,arguments)}function _7(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Cr(t,e,n){return(Cr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m7:_7).apply(null,arguments)}function iv(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function er(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function $a(){this.s=this.s,this.o=this.o}$a.prototype.s=!1,$a.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function p7(t){Object.prototype.hasOwnProperty.call(t,eC)&&t[eC]||(t[eC]=++g7)}(this)},$a.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const G1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function tC(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function W1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(rv(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Dr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Dr.prototype.h=function(){this.defaultPrevented=!0};var v7=function(){if(!Ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Ge.addEventListener("test",n,e),Ge.removeEventListener("test",n,e)}catch{}return t}();function Dp(t){return/^[\s\xa0]*$/.test(t)}function ov(){var t=Ge.navigator;return t&&(t=t.userAgent)?t:""}function ns(t){return-1!=ov().indexOf(t)}function nC(t){return nC[" "](t),t}nC[" "]=function(){};var iC,t,E7=ns("Opera"),Cd=ns("Trident")||ns("MSIE"),Z1=ns("Edge"),rC=Z1||Cd,K1=ns("Gecko")&&!(-1!=ov().toLowerCase().indexOf("webkit")&&!ns("Edge"))&&!(ns("Trident")||ns("MSIE"))&&!ns("Edge"),w7=-1!=ov().toLowerCase().indexOf("webkit")&&!ns("Edge");function Q1(){var t=Ge.document;return t?t.documentMode:void 0}e:{var oC="",sC=(t=ov(),K1?/rv:([^\);]+)(\)|;)/.exec(t):Z1?/Edge\/([\d\.]+)/.exec(t):Cd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):w7?/WebKit\/(\S+)/.exec(t):E7?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(sC&&(oC=sC?sC[1]:""),Cd){var aC=Q1();if(null!=aC&&aC>parseFloat(oC)){iC=String(aC);break e}}iC=oC}var T7=Ge.document&&Cd&&(Q1()||parseInt(iC,10))||void 0;function bp(t,e){if(Dr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(K1){e:{try{nC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:C7[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&bp.$.h.call(this)}}er(bp,Dr);var C7={2:"touch",3:"pen",4:"mouse"};bp.prototype.h=function(){bp.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ap="closure_listenable_"+(1e6*Math.random()|0),D7=0;function b7(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++D7,this.fa=this.ia=!1}function sv(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function cC(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function J1(t){const e={};for(const n in t)e[n]=t[n];return e}const X1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ek(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<X1.length;o++)n=X1[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function av(t){this.src=t,this.g={},this.h=0}function lC(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=G1(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(sv(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dC(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}av.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=dC(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new b7(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var hC="closure_lm_"+(1e6*Math.random()|0),fC={};function tk(t,e,n,r,i){if(r&&r.once)return rk(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)tk(t,e[o],n,r,i);return null}return n=_C(n),t&&t[Ap]?t.O(e,n,Cp(r)?!!r.capture:!!r,i):nk(t,e,n,!1,r,i)}function nk(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Cp(i)?!!i.capture:!!i,a=gC(t);if(a||(t[hC]=a=new av(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function S7(){const e=R7;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)v7||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ok(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function rk(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)rk(t,e[o],n,r,i);return null}return n=_C(n),t&&t[Ap]?t.P(e,n,Cp(r)?!!r.capture:!!r,i):nk(t,e,n,!0,r,i)}function ik(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ik(t,e[o],n,r,i);else r=Cp(r)?!!r.capture:!!r,n=_C(n),t&&t[Ap]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=dC(o=t.g[e],n,r,i))&&(sv(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=gC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dC(e,n,r,i)),(n=-1<t?e[t]:null)&&pC(n))}function pC(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Ap])lC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ok(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gC(e))?(lC(n,t),0==n.h&&(n.src=null,e[hC]=null)):sv(t)}}}function ok(t){return t in fC?fC[t]:fC[t]="on"+t}function R7(t,e){if(t.fa)t=!0;else{e=new bp(e,this);var n=t.listener,r=t.la||t.src;t.ia&&pC(t),t=n.call(r,e)}return t}function gC(t){return(t=t[hC])instanceof av?t:null}var mC="__closure_events_fn_"+(1e9*Math.random()>>>0);function _C(t){return"function"==typeof t?t:(t[mC]||(t[mC]=function(e){return t.handleEvent(e)}),t[mC])}function tr(){$a.call(this),this.i=new av(this),this.S=this,this.J=null}function dr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Dr(e,t);else if(e instanceof Dr)e.target=e.target||t;else{var i=e;ek(e=new Dr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=uv(s,r,!0,e)&&i}if(i=uv(s=e.g=t,r,!0,e)&&i,i=uv(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=uv(s=e.g=n[o],r,!1,e)&&i}function uv(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&lC(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}er(tr,$a),tr.prototype[Ap]=!0,tr.prototype.removeEventListener=function(t,e,n,r){ik(this,t,e,n,r)},tr.prototype.N=function(){if(tr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)sv(n[r]);delete t.g[e],t.h--}}this.J=null},tr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},tr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var yC=Ge.JSON.stringify;function M7(){var t=vC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var sk=new class P7{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new N7,t=>t.reset());class N7{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function O7(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function k7(t){Ge.setTimeout(()=>{throw t},0)}let Sp,Rp=!1,vC=new class x7{constructor(){this.h=this.g=null}add(e,n){const r=sk.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},ak=()=>{const t=Ge.Promise.resolve(void 0);Sp=()=>{t.then(L7)}};var L7=()=>{for(var t;t=M7();){try{t.h.call(t.g)}catch(n){k7(n)}var e=sk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Rp=!1};function cv(t,e){tr.call(this),this.h=t||1,this.g=e||Ge,this.j=Cr(this.qb,this),this.l=Date.now()}function IC(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function EC(t,e,n){if("function"==typeof t)n&&(t=Cr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Cr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ge.setTimeout(t,e||0)}function uk(t){t.g=EC(()=>{t.g=null,t.i&&(t.i=!1,uk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}er(cv,tr),(fe=cv.prototype).ga=!1,fe.T=null,fe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),dr(this,"tick"),this.ga&&(IC(this),this.start()))}},fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.N=function(){cv.$.N.call(this),IC(this),delete this.g};class F7 extends $a{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uk(this)}N(){super.N(),this.g&&(Ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pp(t){$a.call(this),this.h=t,this.g={}}er(Pp,$a);var ck=[];function lk(t,e,n,r){Array.isArray(n)||(n&&(ck[0]=n.toString()),n=ck);for(var i=0;i<n.length;i++){var o=tk(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function dk(t){cC(t.g,function(e,n){this.g.hasOwnProperty(n)&&pC(e)},t),t.g={}}function lv(){this.g=!0}function Dd(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function j7(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return yC(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Pp.prototype.N=function(){Pp.$.N.call(this),dk(this)},Pp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lv.prototype.Ea=function(){this.g=!1},lv.prototype.info=function(){};var oc={},hk=null;function dv(){return hk=hk||new tr}function fk(t){Dr.call(this,oc.Ta,t)}function Mp(t){const e=dv();dr(e,new fk(e))}function pk(t,e){Dr.call(this,oc.STAT_EVENT,t),this.stat=e}function Hr(t){const e=dv();dr(e,new pk(e,t))}function gk(t,e){Dr.call(this,oc.Ua,t),this.size=e}function xp(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ge.setTimeout(function(){t()},e)}oc.Ta="serverreachability",er(fk,Dr),oc.STAT_EVENT="statevent",er(pk,Dr),oc.Ua="timingevent",er(gk,Dr);var hv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wC(){}function yk(){}wC.prototype.h=null;var DC,Np={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function TC(){Dr.call(this,"d")}function CC(){Dr.call(this,"c")}function fv(){}function Op(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Pp(this),this.P=$7,this.V=new cv(t=rC?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vk}function vk(){this.i=null,this.g="",this.h=!1}er(TC,Dr),er(CC,Dr),er(fv,wC),fv.prototype.g=function(){return new XMLHttpRequest},fv.prototype.i=function(){return{}},DC=new fv;var $7=45e3,Ik={},bC={};function AC(t,e,n){t.L=1,t.A=_v(Fs(e)),t.u=n,t.S=!0,Ek(t,null)}function Ek(t,e){t.G=Date.now(),kp(t),t.B=Fs(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Mk(n.i,"t",r),t.o=0,n=t.l.J,t.h=new vk,t.g=tL(t.l,n?e:null,!t.u),0<t.O&&(t.M=new F7(Cr(t.Pa,t,t.g),t.O)),lk(t.U,t.g,"readystatechange",t.nb),e=t.I?J1(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Mp(),function V7(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var f=d[0];d=d[1];var g=f.split("_");s=2<=g.length&&"type"==g[1]?s+(f+"=")+d+"&":s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function wk(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function Tk(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=H7(t,n),i==bC){4==e&&(t.s=4,Hr(14),r=!1),Dd(t.j,t.m,null,"[Incomplete Response]");break}if(i==Ik){t.s=4,Hr(15),Dd(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Dd(t.j,t.m,i,null),SC(t,i)}wk(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Hr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),kC(e),e.M=!0,Hr(11))):(Dd(t.j,t.m,n,"[Invalid Chunked Response]"),sc(t),Lp(t))}function H7(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?bC:(n=Number(e.substring(n,r)),isNaN(n)?Ik:(r+=1)+n>e.length?bC:(e=e.slice(r,r+n),t.o=r+n,e))}function kp(t){t.Y=Date.now()+t.P,Ck(t,t.P)}function Ck(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=xp(Cr(t.lb,t),e)}function pv(t){t.C&&(Ge.clearTimeout(t.C),t.C=null)}function Lp(t){0==t.l.H||t.J||Yk(t.l,t)}function sc(t){pv(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,IC(t.V),dk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function SC(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||RC(n.i,t)))if(!t.K&&RC(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Tv(n),Ev(n)}OC(n),Hr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=xp(Cr(n.ib,n),6e3));if(1>=Ok(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else uc(n,11)}else if((t.K||n.g==t)&&Tv(n),!Dp(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const f=d[3];null!=f&&(n.ra=f,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const I=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I){var o=r.i;o.g||-1==I.indexOf("spdy")&&-1==I.indexOf("quic")&&-1==I.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(PC(o,o.h),o.h=null))}if(r.F){const C=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.Da=C,Wt(r.I,r.F,C))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=eL(r,r.J?r.pa:null,r.Y),s.K){kk(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(pv(a),kp(a)),r.g=s}else Kk(r);0<n.j.length&&wv(n)}else"stop"!=d[0]&&"close"!=d[0]||uc(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?uc(n,7):NC(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}Mp()}catch{}}function Dk(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(rv(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function q7(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(rv(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function z7(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(rv(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(fe=Op.prototype).setTimeout=function(t){this.P=t},fe.nb=function(t){t=t.target;const e=this.M;e&&3==rs(t)?e.l():this.Pa(t)},fe.Pa=function(t){try{if(t==this.g)e:{const f=rs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>f)&&(3!=f||rC||this.g&&(this.h.h||this.g.ja()||Hk(this.g)))){this.J||4!=f||7==e||Mp(),pv(this);var n=this.g.da();this.ca=n;t:if(wk(this)){var r=Hk(this.g);t="";var i=r.length,o=4==rs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){sc(this),Lp(this);var s="";break t}this.h.i=new Ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function U7(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,f,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dp(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.s=3,Hr(12),sc(this),Lp(this);break e}Dd(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,SC(this,n)}this.S?(Tk(this,f,s),rC&&this.i&&3==f&&(lk(this.U,this.V,"tick",this.mb),this.V.start())):(Dd(this.j,this.m,s,null),SC(this,s)),4==f&&sc(this),this.i&&!this.J&&(4==f?Yk(this.l,this):(this.i=!1,kp(this)))}else(function cZ(t){const e={};t=(t.g&&2<=rs(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Dp(t[r]))continue;var n=O7(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function A7(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Hr(12)):(this.s=0,Hr(13)),sc(this),Lp(this)}}}catch{}},fe.mb=function(){if(this.g){var t=rs(this.g),e=this.g.ja();this.o<e.length&&(pv(this),Tk(this,t,e),this.i&&4!=t&&kp(this))}},fe.cancel=function(){this.J=!0,sc(this)},fe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function B7(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Mp(),Hr(17)),sc(this),this.s=2,Lp(this)):Ck(this,this.Y-t)};var bk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ac(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ac){this.h=t.h,gv(this,t.j),this.s=t.s,this.g=t.g,mv(this,t.m),this.l=t.l;var e=t.i,n=new Up;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ak(this,n),this.o=t.o}else t&&(e=String(t).match(bk))?(this.h=!1,gv(this,e[1]||"",!0),this.s=Fp(e[2]||""),this.g=Fp(e[3]||"",!0),mv(this,e[4]),this.l=Fp(e[5]||"",!0),Ak(this,e[6]||"",!0),this.o=Fp(e[7]||"")):(this.h=!1,this.i=new Up(null,this.h))}function Fs(t){return new ac(t)}function gv(t,e,n){t.j=n?Fp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function mv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ak(t,e,n){e instanceof Up?(t.i=e,function J7(t,e){e&&!t.j&&(Ha(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Rk(this,r),Mk(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Vp(e,Q7)),t.i=new Up(e,t.h))}function Wt(t,e,n){t.i.set(e,n)}function _v(t){return Wt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,W7),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function W7(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ac.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Vp(e,Sk,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Vp(e,Sk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vp(n,"/"==n.charAt(0)?K7:Z7,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Vp(n,Y7)),t.join("")};var Sk=/[#\/\?@]/g,Z7=/[#\?:]/g,K7=/[#\?]/g,Q7=/[#\?@]/g,Y7=/#/g;function Up(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ha(t){t.g||(t.g=new Map,t.h=0,t.i&&function G7(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Rk(t,e){Ha(t),e=bd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Pk(t,e){return Ha(t),e=bd(t,e),t.g.has(e)}function Mk(t,e,n){Rk(t,e),0<n.length&&(t.i=null,t.g.set(bd(t,e),tC(n)),t.h+=n.length)}function bd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(fe=Up.prototype).add=function(t,e){Ha(this),this.i=null,t=bd(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(t,e){Ha(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},fe.ta=function(){Ha(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},fe.Z=function(t){Ha(this);let e=[];if("string"==typeof t)Pk(this,t)&&(e=e.concat(this.g.get(bd(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},fe.set=function(t,e){return Ha(this),this.i=null,Pk(this,t=bd(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},fe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var X7=class{constructor(t,e){this.g=t,this.map=e}};function xk(t){this.l=t||eZ,t=Ge.PerformanceNavigationTiming?0<(t=Ge.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ge.g&&Ge.g.Ka&&Ge.g.Ka()&&Ge.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var eZ=10;function Nk(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ok(t){return t.h?1:t.g?t.g.size:0}function RC(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function PC(t,e){t.g?t.g.add(e):t.h=e}function kk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Lk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return tC(t.i)}xk.prototype.cancel=function(){if(this.i=Lk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var tZ=class{stringify(t){return Ge.JSON.stringify(t,void 0)}parse(t){return Ge.JSON.parse(t,void 0)}};function nZ(){this.g=new tZ}function rZ(t,e,n){const r=n||"";try{Dk(t,function(i,o){let s=i;Cp(i)&&(s=yC(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Bp(t){this.l=t.ec||null,this.j=t.ob||!1}function vv(t,e){tr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=MC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}er(Bp,wC),Bp.prototype.g=function(){return new vv(this.l,this.j)},Bp.prototype.i=function(t){return function(){return t}}({}),er(vv,tr);var MC=0;function Fk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function jp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,$p(t)}function $p(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(fe=vv.prototype).open=function(t,e){if(this.readyState!=MC)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,$p(this)},fe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jp(this)),this.readyState=MC},fe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,$p(this)),this.g&&(this.readyState=3,$p(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},fe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?jp(this):$p(this),3==this.readyState&&Fk(this)}},fe.Za=function(t){this.g&&(this.response=this.responseText=t,jp(this))},fe.Ya=function(t){this.g&&(this.response=t,jp(this))},fe.ka=function(){this.g&&jp(this)},fe.setRequestHeader=function(t,e){this.v.append(t,e)},fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(vv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var oZ=Ge.JSON.parse;function pn(t){tr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Vk,this.L=this.M=!1}er(pn,tr);var Vk="",sZ=/^https?$/i,aZ=["POST","PUT"];function Uk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Bk(t),Iv(t)}function Bk(t){t.F||(t.F=!0,dr(t,"complete"),dr(t,"error"))}function jk(t){if(t.h&&typeof X0<"u"&&(!t.C[1]||4!=rs(t)||2!=t.da()))if(t.v&&4==rs(t))EC(t.La,0,t);else if(dr(t,"readystatechange"),4==rs(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(bk)[1]||null;!i&&Ge.self&&Ge.self.location&&(i=Ge.self.location.protocol.slice(0,-1)),r=!sZ.test(i?i.toLowerCase():"")}n=r}if(n)dr(t,"complete"),dr(t,"success");else{t.m=6;try{var o=2<rs(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",Bk(t)}}finally{Iv(t)}}}function Iv(t,e){if(t.g){$k(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||dr(t,"ready");try{n.onreadystatechange=r}catch{}}}function $k(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ge.clearTimeout(t.A),t.A=null)}function rs(t){return t.g?t.g.readyState:0}function Hk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Vk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function zk(t){let e="";return cC(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function xC(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Wt(t,e,n))}function Hp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qk(t){this.Ga=0,this.j=[],this.l=new lv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Hp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Hp("baseRetryDelayMs",5e3,t),this.hb=Hp("retryDelaySeedMs",1e4,t),this.eb=Hp("forwardChannelMaxRetries",2,t),this.xa=Hp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new xk(t&&t.concurrentRequestLimit),this.Ja=new nZ,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function NC(t){if(Gk(t),3==t.H){var e=t.W++,n=Fs(t.I);if(Wt(n,"SID",t.K),Wt(n,"RID",e),Wt(n,"TYPE","terminate"),zp(t,n),(e=new Op(t,t.l,e)).L=2,e.A=_v(Fs(n)),n=!1,Ge.navigator&&Ge.navigator.sendBeacon)try{n=Ge.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Ge.Image&&((new Image).src=e.A,n=!0),n||(e.g=tL(e.l,null),e.g.ha(e.A)),e.G=Date.now(),kp(e)}Xk(t)}function Ev(t){t.g&&(kC(t),t.g.cancel(),t.g=null)}function Gk(t){Ev(t),t.u&&(Ge.clearTimeout(t.u),t.u=null),Tv(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ge.clearTimeout(t.m),t.m=null)}function wv(t){if(!Nk(t.i)&&!t.m){t.m=!0;var e=t.Na;Sp||ak(),Rp||(Sp(),Rp=!0),vC.add(e,t),t.C=0}}function Wk(t,e){var n;n=e?e.m:t.W++;const r=Fs(t.I);Wt(r,"SID",t.K),Wt(r,"RID",n),Wt(r,"AID",t.V),zp(t,r),t.o&&t.s&&xC(r,t.o,t.s),n=new Op(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Zk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),PC(t.i,n),AC(n,r,e)}function zp(t,e){t.na&&cC(t.na,function(n,r){Wt(e,r,n)}),t.h&&Dk({},function(n,r){Wt(e,r,n)})}function Zk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Cr(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const f=i[u].map;if(d-=o,0>d)o=Math.max(0,i[u].g-100),a=!1;else try{rZ(f,s,"req"+d+"_")}catch{r&&r(f)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Kk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Sp||ak(),Rp||(Sp(),Rp=!0),vC.add(e,t),t.A=0}}function OC(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=xp(Cr(t.Ma,t),Jk(t,t.A)),t.A++,0))}function kC(t){null!=t.B&&(Ge.clearTimeout(t.B),t.B=null)}function Qk(t){t.g=new Op(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Fs(t.wa);Wt(e,"RID","rpc"),Wt(e,"SID",t.K),Wt(e,"AID",t.V),Wt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Wt(e,"TO",t.qa),Wt(e,"TYPE","xmlhttp"),zp(t,e),t.o&&t.s&&xC(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=_v(Fs(e)),n.u=null,n.S=!0,Ek(n,t)}function Tv(t){null!=t.v&&(Ge.clearTimeout(t.v),t.v=null)}function Yk(t,e){var n=null;if(t.g==e){Tv(t),kC(t),t.g=null;var r=2}else{if(!RC(t.i,e))return;n=e.F,kk(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;dr(r=dv(),new gk(r,n)),wv(t)}else Kk(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function lZ(t,e){return!(Ok(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=xp(Cr(t.Na,t,e),Jk(t,t.C)),t.C++,0)))}(t,e)||2==r&&OC(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:uc(t,5);break;case 4:uc(t,10);break;case 3:uc(t,6);break;default:uc(t,2)}}function Jk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function uc(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Cr(t.pb,t);n||(n=new ac("//www.google.com/images/cleardot.gif"),Ge.location&&"http"==Ge.location.protocol||gv(n,"https"),_v(n)),function iZ(t,e){const n=new lv;if(Ge.Image){const r=new Image;r.onload=iv(yv,n,r,"TestLoadImage: loaded",!0,e),r.onerror=iv(yv,n,r,"TestLoadImage: error",!1,e),r.onabort=iv(yv,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=iv(yv,n,r,"TestLoadImage: timeout",!1,e),Ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Hr(2);t.H=0,t.h&&t.h.za(e),Xk(t),Gk(t)}function Xk(t){if(t.H=0,t.ma=[],t.h){const e=Lk(t.i);(0!=e.length||0!=t.j.length)&&(W1(t.ma,e),W1(t.ma,t.j),t.i.i.length=0,tC(t.j),t.j.length=0),t.h.ya()}}function eL(t,e,n){var r=n instanceof ac?Fs(n):new ac(n);if(""!=r.g)e&&(r.g=e+"."+r.g),mv(r,r.m);else{var i=Ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new ac(null);r&&gv(o,r),e&&(o.g=e),i&&mv(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&Wt(r,n,e),Wt(r,"VER",t.ra),zp(t,r),r}function tL(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pn(t.Ha&&!t.va?new Bp({ob:n}):t.va)).Oa(t.J),e}function nL(){}function Cv(){if(Cd&&!(10<=Number(T7)))throw Error("Environmental error: no available transport.")}function Si(t,e){tr.call(this),this.g=new qk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Dp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dp(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ad(this)}function rL(t){TC.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function iL(){CC.call(this),this.status=1}function Ad(t){this.g=t}function wo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function LC(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function bt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(fe=pn.prototype).Oa=function(t){this.M=t},fe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():DC.g(),this.C=function _k(t){return t.h||(t.h=t.i())}(this.u?this.u:DC),this.g.onreadystatechange=Cr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void Uk(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=Ge.FormData&&t instanceof Ge.FormData,!(0<=G1(aZ,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{$k(this),0<this.B&&((this.L=function uZ(t){return Cd&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cr(this.ua,this)):this.A=EC(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Uk(this,o)}},fe.ua=function(){typeof X0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dr(this,"timeout"),this.abort(8))},fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,dr(this,"complete"),dr(this,"abort"),Iv(this))},fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Iv(this,!0)),pn.$.N.call(this)},fe.La=function(){this.s||(this.G||this.v||this.l?jk(this):this.kb())},fe.kb=function(){jk(this)},fe.isActive=function(){return!!this.g},fe.da=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),oZ(e)}},fe.Ia=function(){return this.m},fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=qk.prototype).ra=8,fe.H=1,fe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Op(this,this.l,t);let o=this.s;if(this.U&&(o?(o=J1(o),ek(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Zk(this,i,e),Wt(n=Fs(this.I),"RID",t),Wt(n,"CVER",22),this.F&&Wt(n,"X-HTTP-Session-Id",this.F),zp(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(zk(o)))+"&"+e:this.o&&xC(n,this.o,o)),PC(this.i,i),this.bb&&Wt(n,"TYPE","init"),this.P?(Wt(n,"$req",e),Wt(n,"SID","null"),i.aa=!0,AC(i,n,null)):AC(i,n,e),this.H=2}}else 3==this.H&&(t?Wk(this,t):0==this.j.length||Nk(this.i)||Wk(this))},fe.Ma=function(){if(this.u=null,Qk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=xp(Cr(this.jb,this),t)}},fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hr(10),Ev(this),Qk(this))},fe.ib=function(){null!=this.v&&(this.v=null,Ev(this),OC(this),Hr(19))},fe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Hr(2)):(this.l.info("Failed to ping google.com"),Hr(1))},fe.isActive=function(){return!!this.h&&this.h.isActive(this)},(fe=nL.prototype).Ba=function(){},fe.Aa=function(){},fe.za=function(){},fe.ya=function(){},fe.isActive=function(){return!0},fe.Va=function(){},Cv.prototype.g=function(t,e){return new Si(t,e)},er(Si,tr),Si.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Hr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=eL(t,null,t.Y),wv(t)},Si.prototype.close=function(){NC(this.g)},Si.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=yC(t),t=n);e.j.push(new X7(e.fb++,t)),3==e.H&&wv(e)},Si.prototype.N=function(){this.g.h=null,delete this.j,NC(this.g),delete this.g,Si.$.N.call(this)},er(rL,TC),er(iL,CC),er(Ad,nL),Ad.prototype.Ba=function(){dr(this.g,"a")},Ad.prototype.Aa=function(t){dr(this.g,new rL(t))},Ad.prototype.za=function(t){dr(this.g,new iL)},Ad.prototype.ya=function(){dr(this.g,"b")},er(wo,function dZ(){this.blockSize=-1}),wo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},wo.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)LC(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){LC(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){LC(this,r),i=0;break}}this.h=i,this.i+=e},wo.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var hZ={};function FC(t){return-128<=t&&128>t?function I7(t,e){var n=hZ;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new bt([0|e],0>e?-1:0)}):new bt([0|t],0>t?-1:0)}function is(t){if(isNaN(t)||!isFinite(t))return Sd;if(0>t)return hr(is(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=VC;return new bt(e,0)}var VC=4294967296,Sd=FC(0),UC=FC(1),sL=FC(16777216);function Vs(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Xi(t){return-1==t.h}function hr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new bt(n,~t.h).add(UC)}function Dv(t,e){return t.add(hr(e))}function bv(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function qp(t,e){this.g=t,this.h=e}function Av(t,e){if(Vs(e))throw Error("division by zero");if(Vs(t))return new qp(Sd,Sd);if(Xi(t))return e=Av(hr(t),e),new qp(hr(e.g),hr(e.h));if(Xi(e))return e=Av(t,hr(e)),new qp(hr(e.g),e.h);if(30<t.g.length){if(Xi(t)||Xi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=UC,r=e;0>=r.X(t);)n=aL(n),r=aL(r);var i=Rd(n,1),o=Rd(r,1);for(r=Rd(r,2),n=Rd(n,2);!Vs(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Rd(r,1),n=Rd(n,1)}return e=Dv(t,i.R(e)),new qp(i,e)}for(i=Sd;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=is(n)).R(e);Xi(s)||0<s.X(t);)s=(o=is(n-=r)).R(e);Vs(o)&&(o=UC),i=i.add(o),t=Dv(t,s)}return new qp(i,t)}function aL(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new bt(n,t.h)}function Rd(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new bt(i,t.h)}(fe=bt.prototype).ea=function(){if(Xi(this))return-hr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:VC+r)*e,e*=VC}return t},fe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Vs(this))return"0";if(Xi(this))return"-"+hr(this).toString(t);for(var e=is(Math.pow(t,6)),n=this,r="";;){var i=Av(n,e).g,o=((0<(n=Dv(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Vs(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},fe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},fe.X=function(t){return Xi(t=Dv(this,t))?-1:Vs(t)?0:1},fe.abs=function(){return Xi(this)?hr(this):this},fe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new bt(n,-2147483648&n[n.length-1]?-1:0)},fe.R=function(t){if(Vs(this)||Vs(t))return Sd;if(Xi(this))return Xi(t)?hr(this).R(hr(t)):hr(hr(this).R(t));if(Xi(t))return hr(this.R(hr(t)));if(0>this.X(sL)&&0>t.X(sL))return is(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=s*u,bv(n,2*r+2*i),n[2*r+2*i+1]+=o*u,bv(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,bv(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,bv(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new bt(n,0)},fe.gb=function(t){return Av(this,t).h},fe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new bt(n,this.h&t.h)},fe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new bt(n,this.h|t.h)},fe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new bt(n,this.h^t.h)},Cv.prototype.createWebChannel=Cv.prototype.g,Si.prototype.send=Si.prototype.u,Si.prototype.open=Si.prototype.m,Si.prototype.close=Si.prototype.close,hv.NO_ERROR=0,hv.TIMEOUT=8,hv.HTTP_ERROR=6,mk.COMPLETE="complete",yk.EventType=Np,Np.OPEN="a",Np.CLOSE="b",Np.ERROR="c",Np.MESSAGE="d",tr.prototype.listen=tr.prototype.O,pn.prototype.listenOnce=pn.prototype.P,pn.prototype.getLastError=pn.prototype.Sa,pn.prototype.getLastErrorCode=pn.prototype.Ia,pn.prototype.getStatus=pn.prototype.da,pn.prototype.getResponseJson=pn.prototype.Wa,pn.prototype.getResponseText=pn.prototype.ja,pn.prototype.send=pn.prototype.ha,pn.prototype.setWithCredentials=pn.prototype.Oa,wo.prototype.digest=wo.prototype.l,wo.prototype.reset=wo.prototype.reset,wo.prototype.update=wo.prototype.j,bt.prototype.add=bt.prototype.add,bt.prototype.multiply=bt.prototype.R,bt.prototype.modulo=bt.prototype.gb,bt.prototype.compare=bt.prototype.X,bt.prototype.toNumber=bt.prototype.ea,bt.prototype.toString=bt.prototype.toString,bt.prototype.getBits=bt.prototype.D,bt.fromNumber=is,bt.fromString=function oL(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return hr(oL(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=is(Math.pow(e,8)),r=Sd,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=is(Math.pow(e,o)),r=r.R(o).add(is(s))):r=(r=r.R(n)).add(is(s))}return r};var fZ=Eo.createWebChannelTransport=function(){return new Cv},pZ=Eo.getStatEventTarget=function(){return dv()},BC=Eo.ErrorCode=hv,gZ=Eo.EventType=mk,mZ=Eo.Event=oc,uL=Eo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sv=(Eo.FetchXmlHttpFactory=Bp,Eo.WebChannel=yk),_Z=Eo.XhrIo=pn,yZ=Eo.Md5=wo,Pd=Eo.Integer=bt;const cL="@firebase/firestore";class nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");let Md="10.7.0";const za=new ts.Yd("@firebase/firestore");function xd(){return za.logLevel}function ee(t,...e){if(za.logLevel<=ts.in.DEBUG){const n=e.map(jC);za.debug(`Firestore (${Md}): ${t}`,...n)}}function Dn(t,...e){if(za.logLevel<=ts.in.ERROR){const n=e.map(jC);za.error(`Firestore (${Md}): ${t}`,...n)}}function oi(t,...e){if(za.logLevel<=ts.in.WARN){const n=e.map(jC);za.warn(`Firestore (${Md}): ${t}`,...n)}}function jC(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function _e(t="Unexpected state"){const e=`FIRESTORE (${Md}) INTERNAL ASSERTION FAILED: `+t;throw Dn(e),new Error(e)}function De(t,e){t||_e()}function ue(t,e){return t}const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends kt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class lL{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nr.UNAUTHENTICATED))}shutdown(){}}class wZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class TZ{constructor(e){this.t=e,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let s=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jn,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const d=s;e.enqueueRetryable((0,W.Z)(function*(){yield d.promise,yield o(r.currentUser)}))},u=d=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De("string"==typeof r.accessToken),new lL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(null===e||"string"==typeof e),new nr(e)}}class CZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class DZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new CZ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De("string"==typeof n.token),this.R=n.token,new dL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function AZ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class hL{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=AZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function He(t,e){return t<e?-1:t>e?1:0}function Nd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function fL(t){return t+"\0"}class rn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rn.fromMillis(Date.now())}static fromDate(e){return rn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new rn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new rn(0,0))}static max(){return new Ae(new rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gp{constructor(e,n,r){void 0===n?n=0:n>e.length&&_e(),void 0===r?r=e.length-n:r>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Gp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pt extends Gp{construct(e,n,r){return new pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pt(n)}static emptyPath(){return new pt([])}}const SZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Gp{construct(e,n,r){return new Zt(e,n,r)}static isValidIdentifier(e){return SZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new J(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new J(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(n)}static emptyPath(){return new Zt([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(pt.fromString(e))}static fromName(e){return new ce(pt.fromString(e).popFirst(5))}static empty(){return new ce(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new pt(e.slice()))}}class Od{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function $C(t){return t.fields.find(e=>2===e.kind)}function cc(t){return t.fields.filter(e=>2!==e.kind)}Od.UNKNOWN_ID=-1;class lc{constructor(e,n){this.fieldPath=e,this.kind=n}}class kd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new kd(0,Ri.min())}}function pL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(1e9===r?new rn(n+1,0):new rn(n,r));return new Ri(i,ce.empty(),e)}function gL(t){return new Ri(t.readTime,t.key,-1)}class Ri{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ri(Ae.min(),ce.empty(),-1)}static max(){return new Ri(Ae.max(),ce.empty(),-1)}}function HC(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ce.comparator(t.documentKey,e.documentKey),0!==n?n:He(t.largestBatchId,e.largestBatchId))}const mL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _L{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qa(t){return zC.apply(this,arguments)}function zC(){return zC=(0,W.Z)(function*(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==mL)throw t;ee("LocalStore","Unexpectedly lost primary lease")}),zC.apply(this,arguments)}class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new x((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):x.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):x.reject(n)}static resolve(e){return new x((n,r)=>{n(e)})}static reject(e){return new x((n,r)=>{r(e)})}static waitFor(e){return new x((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=x.resolve(!1);for(const r of e)n=n.next(i=>i?x.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new x((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(f=>{s[d]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new x((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Rv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new jn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Wp(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=qC(r.target.error);this.V.reject(new Wp(e,i))}}static open(e,n,r,i){try{return new Rv(n,e.transaction(i,r))}catch(o){throw new Wp(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new xZ(n)}}class To{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===To.S((0,kt.z$)())&&Dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),dc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,kt.hl)())return!1;if(To.C())return!0;const e=(0,kt.z$)(),n=To.S(e),r=0<n&&n<10,i=To.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,W.Z)(function*(){return n.db||(ee("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new Wp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new J(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Wp(e,a))},o.onupgradeneeded=s=>{ee("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{ee("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,W.Z)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=Rv.open(o.db,e,s?"readonly":"readwrite",r),d=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),x.reject(f))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,f="FirebaseError"!==d.name&&a<3;if(ee("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),o.close(),!f)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class MZ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return dc(this.k.delete())}}class Wp extends J{constructor(e,n){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ga(t){return"IndexedDbTransactionError"===t.name}class xZ{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ee("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),dc(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),dc(this.store.add(e))}get(e){return dc(this.store.get(e)).next(n=>(void 0===n&&(n=null),ee("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),dc(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),dc(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(s,a)=>{o.push(a)}).next(()=>o)}{const i=this.store.getAll(r.range);return new x((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new x((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new x((r,i)=>{n.onerror=o=>{const s=qC(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new x((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new MZ(a),d=n(a.primaryKey,a.value,u);if(d instanceof x){const f=d.catch(g=>(u.done(),x.reject(g)));r.push(f)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>x.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function dc(t){return new x((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=qC(r.target.error);n(i)}})}let yL=!1;function qC(t){const e=To.S((0,kt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yL||(yL=!0,setTimeout(()=>{throw r},0)),r}}return t}class NZ{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ee("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,W.Z)(function*(){n.task=null;try{ee("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){Ga(r)?ee("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield qa(r)}yield n.ee(6e4)}))}}class OZ{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,W.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return x.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return ee("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(ee("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=gL(o);HC(s,r)>0&&(r=s)}),new Ri(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Pi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Zp(t){return null==t}function Kp(t){return 0===t&&1/t==-1/0}function vL(t){return"number"==typeof t&&Number.isInteger(t)&&!Kp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function br(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IL(e)),e=kZ(t.get(n),e);return IL(e)}function kZ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function IL(t){return t+"\x01\x01"}function os(t){const e=t.length;if(De(e>=2),2===e)return De("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),pt.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&_e(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:_e()}o=s+2}return new pt(r)}const EL=["userId","batchId"];function Pv(t,e){return[t,br(e)]}function wL(t,e,n){return[t,br(e),n]}const LZ={},FZ=["prefixPath","collectionGroup","readTime","documentId"],VZ=["prefixPath","collectionGroup","documentId"],UZ=["collectionGroup","readTime","prefixPath","documentId"],BZ=["canonicalId","targetId"],jZ=["targetId","path"],$Z=["path","targetId"],HZ=["collectionId","parent"],zZ=["indexId","uid"],qZ=["uid","sequenceNumber"],GZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WZ=["indexId","uid","orderedDocumentKey"],ZZ=["userId","collectionPath","documentId"],KZ=["userId","collectionPath","largestBatchId"],QZ=["userId","collectionGroup","largestBatchId"],TL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],YZ=[...TL,"documentOverlays"],CL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DL=CL,JZ=[...DL,"indexConfiguration","indexState","indexEntries"];class GC extends _L{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function rr(t,e){const n=ue(t);return To.M(n.ae,e)}function bL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class jt{constructor(e,n){this.comparator=e,this.root=n||fr.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fr.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mv(this.root,e,this.comparator,!0)}}class Mv{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??fr.RED,this.left=i??fr.EMPTY,this.right=o??fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new fr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return fr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}fr.EMPTY=null,fr.RED=!0,fr.BLACK=!1,fr.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,r,i,o){return this}insert(e,n,r){return new fr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mt{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SL(this.data.getIterator())}getIteratorFrom(e){return new SL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class SL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ld(t){return t.hasNext()?t.getNext():void 0}class si{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new si([])}unionWith(e){let n=new Mt(Zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new si(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Nd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class RL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new RL("Invalid base64 string: "+o):o}}(e);return new $n(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new $n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const eK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(t){if(De(!!t),"string"==typeof t){let e=0;const n=eK.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(t.seconds),nanos:gn(t.nanos)}}function gn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Us(t){return"string"==typeof t?$n.fromBase64String(t):$n.fromUint8Array(t)}function xv(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nv(t){const e=t.mapValue.fields.__previous_value__;return xv(e)?Nv(e):e}function Qp(t){const e=Za(t.mapValue.fields.__local_write_time__.timestampValue);return new rn(e.seconds,e.nanos)}class tK{constructor(e,n,r,i,o,s,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Ka{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ka("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}const Qa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ov={nullValue:"NULL_VALUE"};function Ya(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xv(t)?4:NL(t)?9007199254740991:10:_e()}function ss(t,e){if(t===e)return!0;const n=Ya(t);if(n!==Ya(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qp(t).isEqual(Qp(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Za(i.timestampValue),a=Za(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Us(t.bytesValue).isEqual(Us(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return gn(i.geoPointValue.latitude)===gn(o.geoPointValue.latitude)&&gn(i.geoPointValue.longitude)===gn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return gn(i.integerValue)===gn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=gn(i.doubleValue),a=gn(o.doubleValue);return s===a?Kp(s)===Kp(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Nd(t.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(bL(s)!==bL(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!ss(s[u],a[u])))return!1;return!0}(t,e);default:return _e()}var o}function Yp(t,e){return void 0!==(t.values||[]).find(n=>ss(n,e))}function Ja(t,e){if(t===e)return 0;const n=Ya(t),r=Ya(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=gn(o.integerValue||o.doubleValue),u=gn(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return PL(t.timestampValue,e.timestampValue);case 4:return PL(Qp(t),Qp(e));case 5:return He(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Us(o),u=Us(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=He(a[d],u[d]);if(0!==f)return f}return He(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=He(gn(o.latitude),gn(s.latitude));return 0!==a?a:He(gn(o.longitude),gn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let d=0;d<a.length&&d<u.length;++d){const f=Ja(a[d],u[d]);if(f)return f}return He(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Qa.mapValue&&s===Qa.mapValue)return 0;if(o===Qa.mapValue)return 1;if(s===Qa.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),d=s.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const _=He(u[g],f[g]);if(0!==_)return _;const y=Ja(a[u[g]],d[f[g]]);if(0!==y)return y}return He(u.length,f.length)}(t.mapValue,e.mapValue);default:throw _e()}}function PL(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return He(t,e);const n=Za(t),r=Za(e),i=He(n.seconds,r.seconds);return 0!==i?i:He(n.nanos,r.nanos)}function Fd(t){return WC(t)}function WC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Za(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Us(t.bytesValue).toBase64():"referenceValue"in t?ce.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=WC(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${WC(n.fields[s])}`;return i+"}"}(t.mapValue):_e()}function hc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ZC(t){return!!t&&"integerValue"in t}function Jp(t){return!!t&&"arrayValue"in t}function ML(t){return!!t&&"nullValue"in t}function xL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lv(t){return!!t&&"mapValue"in t}function Xp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NL(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function nK(t){return"nullValue"in t?Ov:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?hc(Ka.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:_e()}function rK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?hc(Ka.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Qa:_e()}function OL(t,e){const n=Ja(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function kL(t,e){const n=Ja(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xp(n)}setAll(e){let n=Zt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Xp(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Lv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wa(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new pr(Xp(this.value))}}function LL(t){const e=[];return Wa(t.fields,(n,r)=>{const i=new Zt([n]);if(Lv(r)){const o=LL(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new si(e)}class Kt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Kt(e,0,Ae.min(),Ae.min(),Ae.min(),pr.empty(),0)}static newFoundDocument(e,n,r,i){return new Kt(e,1,n,Ae.min(),r,i,0)}static newNoDocument(e,n){return new Kt(e,2,n,Ae.min(),Ae.min(),pr.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,Ae.min(),Ae.min(),pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xa{constructor(e,n){this.position=e,this.inclusive=n}}function FL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ce.comparator(ce.fromName(s.referenceValue),n.key):Ja(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function VL(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ss(t.position[n],e.position[n]))return!1;return!0}class eg{constructor(e,n="asc"){this.field=e,this.dir=n}}function iK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class UL{}class at extends UL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new oK(e,n,r):"array-contains"===n?new uK(e,r):"in"===n?new qL(e,r):"not-in"===n?new cK(e,r):"array-contains-any"===n?new lK(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new sK(e,r):new aK(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ja(n,this.value)):null!==n&&Ya(this.value)===Ya(n)&&this.matchesComparison(Ja(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class At extends UL{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new At(e,n)}matches(e){return Vd(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Vd(t){return"and"===t.op}function KC(t){return"or"===t.op}function QC(t){return BL(t)&&Vd(t)}function BL(t){for(const e of t.filters)if(e instanceof At)return!1;return!0}function YC(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+Fd(t.value);if(QC(t))return t.filters.map(e=>YC(e)).join(",");{const e=t.filters.map(n=>YC(n)).join(",");return`${t.op}(${e})`}}function jL(t,e){return t instanceof at?(r=t,(i=e)instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&ss(r.value,i.value)):t instanceof At?function(r,i){return i instanceof At&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&jL(s,i.filters[a]),!0)}(t,e):void _e();var r,i}function $L(t,e){const n=t.filters.concat(e);return At.create(n,t.op)}function HL(t){return t instanceof at?`${(n=t).field.canonicalString()} ${n.op} ${Fd(n.value)}`:t instanceof At?function(n){return n.op.toString()+" {"+n.getFilters().map(HL).join(" ,")+"}"}(t):"Filter";var n}class oK extends at{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class sK extends at{constructor(e,n){super(e,"in",n),this.keys=zL(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aK extends at{constructor(e,n){super(e,"not-in",n),this.keys=zL(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zL(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class uK extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jp(n)&&Yp(n.arrayValue,this.value)}}class qL extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Yp(this.value.arrayValue,n)}}class cK extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Yp(this.value.arrayValue,n)}}class lK extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yp(this.value.arrayValue,r))}}class dK{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function JC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new dK(t,e,n,r,i,o,s)}function fc(t){const e=ue(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>YC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Zp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fd(r)).join(",")),e.ce=n}return e.ce}function tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VL(t.startAt,e.startAt)&&VL(t.endAt,e.endAt)}function Fv(t){return ce.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Vv(t,e){return t.filters.filter(n=>n instanceof at&&n.field.isEqual(e))}function GL(t,e,n){let r=Ov,i=!0;for(const o of Vv(t,e)){let s=Ov,a=!0;switch(o.op){case"<":case"<=":s=nK(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Ov}OL({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];OL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function WL(t,e,n){let r=Qa,i=!0;for(const o of Vv(t,e)){let s=Qa,a=!0;switch(o.op){case">=":case">":s=rK(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Qa}kL({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];kL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class Bs{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function ZL(t,e,n,r,i,o,s,a){return new Bs(t,e,n,r,i,o,s,a)}function Ud(t){return new Bs(t)}function KL(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function XC(t){return null!==t.collectionGroup}function Bd(t){const e=ue(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Mt(Zt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new eg(o,r))}),n.has(Zt.keyField().canonicalString())||e.le.push(new eg(Zt.keyField(),r))}return e.le}function zr(t){const e=ue(t);return e.he||(e.he=function QL(t,e){if("F"===t.limitType)return JC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new eg(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Xa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xa(t.startAt.position,t.startAt.inclusive):null;return JC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Bd(t))),e.he}function eD(t,e){const n=t.filters.concat([e]);return new Bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Uv(t,e,n){return new Bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ng(t,e){return tg(zr(t),zr(e))&&t.limitType===e.limitType}function YL(t){return`${fc(zr(t))}|lt:${t.limitType}`}function jd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>HL(i)).join(", ")}]`),Zp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fd(i)).join(",")),`Target(${r})`}(zr(t))}; limitType=${t.limitType})`}function rg(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ce.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Bd(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const d=FL(s,a,u);return s.inclusive?d<=0:d<0}(r.startAt,Bd(r),i)||r.endAt&&!function(s,a,u){const d=FL(s,a,u);return s.inclusive?d>=0:d>0}(r.endAt,Bd(r),i)));var r,i}function JL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XL(t){return(e,n)=>{let r=!1;for(const i of Bd(t)){const o=hK(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function hK(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),d=a.data.field(o);return null!==u&&null!==d?Ja(u,d):_e()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e()}}class js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return AL(this.inner)}size(){return this.innerSize}}const fK=new jt(ce.comparator);function ai(){return fK}const eF=new jt(ce.comparator);function ig(...t){let e=eF;for(const n of t)e=e.insert(n.key,n);return e}function tF(t){let e=eF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function as(){return og()}function nF(){return og()}function og(){return new js(t=>t.toString(),(t,e)=>t.isEqual(e))}const pK=new jt(ce.comparator),gK=new Mt(ce.comparator);function Ye(...t){let e=gK;for(const n of t)e=e.add(n);return e}const mK=new Mt(He);function tD(){return mK}function rF(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kp(e)?"-0":e}}function iF(t){return{integerValue:""+t}}function oF(t,e){return vL(e)?iF(e):rF(t,e)}class Bv{constructor(){this._=void 0}}function _K(t,e,n){return t instanceof $d?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&xv(o)&&(o=Nv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof pc?aF(t,e):t instanceof gc?uF(t,e):function(i,o){const s=sF(i,o),a=cF(s)+cF(i.Ie);return ZC(s)&&ZC(i.Ie)?iF(a):rF(i.serializer,a)}(t,e)}function yK(t,e,n){return t instanceof pc?aF(t,e):t instanceof gc?uF(t,e):n}function sF(t,e){return t instanceof Hd?ZC(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class $d extends Bv{}class pc extends Bv{constructor(e){super(),this.elements=e}}function aF(t,e){const n=lF(e);for(const r of t.elements)n.some(i=>ss(i,r))||n.push(r);return{arrayValue:{values:n}}}class gc extends Bv{constructor(e){super(),this.elements=e}}function uF(t,e){let n=lF(e);for(const r of t.elements)n=n.filter(i=>!ss(i,r));return{arrayValue:{values:n}}}class Hd extends Bv{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function cF(t){return gn(t.integerValue||t.doubleValue)}function lF(t){return Jp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class sg{constructor(e,n){this.field=e,this.transform=n}}class IK{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class $v{}function dF(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new qd(t.key,on.none()):new zd(t.key,t.data,on.none());{const n=t.data,r=pr.empty();let i=new Mt(Zt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new $s(t.key,r,new si(i.toArray()),on.none())}}function EK(t,e,n){t instanceof zd?function(i,o,s){const a=i.value.clone(),u=pF(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof $s?function(i,o,s){if(!jv(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=pF(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(fF(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function ag(t,e,n,r){return t instanceof zd?function(o,s,a,u){if(!jv(o.precondition,s))return a;const d=o.value.clone(),f=gF(o.fieldTransforms,u,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof $s?function(o,s,a,u){if(!jv(o.precondition,s))return a;const d=gF(o.fieldTransforms,u,s),f=s.data;return f.setAll(fF(o)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,jv(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function wK(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=sF(r.transform,i||null);null!=o&&(null===n&&(n=pr.empty()),n.set(r.field,o))}return n||null}function hF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Nd(r,i,(o,s)=>function vK(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof pc&&i instanceof pc||r instanceof gc&&i instanceof gc?Nd(r.elements,i.elements,ss):r instanceof Hd&&i instanceof Hd?ss(r.Ie,i.Ie):r instanceof $d&&i instanceof $d);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class zd extends $v{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $s extends $v{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function pF(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,yK(s,a,n[i]))}return r}function gF(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,_K(o,s,e))}return r}class qd extends $v{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nD extends $v{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&EK(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ag(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ag(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nF();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=dF(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Nd(this.mutations,e.mutations,(n,r)=>hF(n,r))&&Nd(this.baseMutations,e.baseMutations,(n,r)=>hF(n,r))}}class iD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=pK;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new iD(e,n,r,i)}}class oD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class CK{constructor(e,n){this.count=e,this.unchangedNames=n}}var On,gt;function mF(t){switch(t){default:return _e();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function _F(t){if(void 0===t)return Dn("GRPC error has no .code"),k.UNKNOWN;switch(t){case On.OK:return k.OK;case On.CANCELLED:return k.CANCELLED;case On.UNKNOWN:return k.UNKNOWN;case On.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case On.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case On.INTERNAL:return k.INTERNAL;case On.UNAVAILABLE:return k.UNAVAILABLE;case On.UNAUTHENTICATED:return k.UNAUTHENTICATED;case On.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case On.NOT_FOUND:return k.NOT_FOUND;case On.ALREADY_EXISTS:return k.ALREADY_EXISTS;case On.PERMISSION_DENIED:return k.PERMISSION_DENIED;case On.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case On.ABORTED:return k.ABORTED;case On.OUT_OF_RANGE:return k.OUT_OF_RANGE;case On.UNIMPLEMENTED:return k.UNIMPLEMENTED;case On.DATA_LOSS:return k.DATA_LOSS;default:return _e()}}(gt=On||(On={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";function yF(){return new TextEncoder}const DK=new Pd([4294967295,4294967295],0);function vF(t){const e=yF().encode(t),n=new yZ;return n.update(e),new Uint8Array(n.digest())}function IF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pd([n,r],0),new Pd([i,o],0)]}class sD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ug(`Invalid padding: ${n}`);if(r<0)throw new ug(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ug(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new ug(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Pd.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Pd.fromNumber(r)));return 1===i.compare(DK)&&(i=new Pd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=vF(e),[r,i]=IF(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new sD(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=vF(e),[r,i]=IF(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class ug extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class cg{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,lg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cg(Ae.min(),i,new jt(He),ai(),Ye())}}class lg{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lg(r,n,Ye(),Ye(),Ye())}}class zv{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class EF{constructor(e,n){this.targetId=e,this.fe=n}}class wF{constructor(e,n,r=$n.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TF{constructor(){this.ge=0,this.pe=DF(),this.ye=$n.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ye(),n=Ye(),r=Ye();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:_e()}}),new lg(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=DF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,De(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class bK{constructor(e){this.Le=e,this.ke=new Map,this.qe=ai(),this.Qe=CF(),this.Ke=new jt(He)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Fv(o))if(0===r){const s=new ce(o.path);this.We(n,s,Kt.newNoDocument(s,Ae.min()))}else De(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Us(r).toUint8Array()}catch(u){if(u instanceof RL)return oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new sD(s,i,o)}catch(u){return oi(u instanceof ug?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Fv(a.target)){const u=new ce(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,Kt.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Ye();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new cg(e,n,this.Ke,this.qe,r);return this.qe=ai(),this.Qe=CF(),this.Ke=new jt(He),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new TF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Mt(He),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new TF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function CF(){return new jt(ce.comparator)}function DF(){return new jt(ce.comparator)}const AK={asc:"ASCENDING",desc:"DESCENDING"},SK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RK={and:"AND",or:"OR"};class PK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function aD(t,e){return t.useProto3Json||Zp(e)?e:{value:e}}function Gd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MK(t,e){return Gd(t,e.toTimestamp())}function bn(t){return De(!!t),Ae.fromTimestamp(function(n){const r=Za(n);return new rn(r.seconds,r.nanos)}(t))}function uD(t,e){return(r=t,new pt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function AF(t){const e=pt.fromString(t);return De(LF(e)),e}function dg(t,e){return uD(t.databaseId,e.path)}function us(t,e){const n=AF(e);if(n.get(1)!==t.databaseId.projectId)throw new J(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(RF(n))}function cD(t,e){return uD(t.databaseId,e)}function SF(t){const e=AF(t);return 4===e.length?pt.emptyPath():RF(e)}function hg(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RF(t){return De(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function PF(t,e,n){return{name:dg(t,e),fields:n.value.mapValue.fields}}function MF(t,e,n){const r=us(t,e.name),i=bn(e.updateTime),o=e.createTime?bn(e.createTime):Ae.min(),s=new pr({mapValue:{fields:e.fields}}),a=Kt.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function fg(t,e){let n;if(e instanceof zd)n={update:PF(t,e.key,e.value)};else if(e instanceof qd)n={delete:dg(t,e.key)};else if(e instanceof $s)n={update:PF(t,e.key,e.data),updateMask:UK(e.fieldMask)};else{if(!(e instanceof nD))return _e();n={verify:dg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof $d)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof pc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof gc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hd)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw _e()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:MK(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:_e()),n;var o}function lD(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?on.updateTime(bn(o.updateTime)):void 0!==o.exists?on.exists(o.exists):on.none():on.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(De("REQUEST_TIME"===a.setToServerValue),u=new $d):"appendMissingElements"in a?u=new pc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new gc(a.removeAllFromArray.values||[]):"increment"in a?u=new Hd(s,a.increment):_e();const d=Zt.fromServerFormat(a.fieldPath);return new sg(d,u)}(t,i)):[];var o;if(e.update){const i=us(t,e.update.name),o=new pr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new si((e.updateMask.fieldPaths||[]).map(f=>Zt.fromServerFormat(f)));return new $s(i,o,s,n,r)}return new zd(i,o,n,r)}if(e.delete){const i=us(t,e.delete);return new qd(i,n)}if(e.verify){const i=us(t,e.verify);return new nD(i,n)}return _e()}function xF(t,e){return{documents:[cD(t,e.path)]}}function dD(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=cD(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=cD(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return kF(At.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(0!==u.length)return u.map(d=>{return{field:eu((g=d).field),direction:LK(g.dir)};var g})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const s=aD(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function NF(t){let e=SF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(1===r);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(g){const _=OF(g);return _ instanceof At&&QC(_)?_.getFilters():[_]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(_=>{return new eg(Wd((I=_).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,Zp(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new Xa((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new Xa(g.values||[],!g.before)}(n.endAt)),ZL(e,i,s,o,a,"F",u,d)}function OF(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wd(n.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wd(n.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wd(n.unaryFilter.field);return at.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Wd(n.unaryFilter.field);return at.create(s,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):void 0!==t.fieldFilter?at.create(Wd((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return At.create(n.compositeFilter.filters.map(r=>OF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(t):_e();var n}function LK(t){return AK[t]}function FK(t){return SK[t]}function VK(t){return RK[t]}function eu(t){return{fieldPath:t.canonicalString()}}function Wd(t){return Zt.fromServerFormat(t.fieldPath)}function kF(t){return t instanceof at?function(n){if("=="===n.op){if(xL(n.value))return{unaryFilter:{field:eu(n.field),op:"IS_NAN"}};if(ML(n.value))return{unaryFilter:{field:eu(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(xL(n.value))return{unaryFilter:{field:eu(n.field),op:"IS_NOT_NAN"}};if(ML(n.value))return{unaryFilter:{field:eu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eu(n.field),op:FK(n.op),value:n.value}}}(t):t instanceof At?function(n){const r=n.getFilters().map(i=>kF(i));return 1===r.length?r[0]:{compositeFilter:{op:VK(n.op),filters:r}}}(t):_e()}function UK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Hs{constructor(e,n,r,i,o=Ae.min(),s=Ae.min(),a=$n.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class FF{constructor(e){this.ut=e}}function VF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:dg(o=t.ut,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Gd(o,s.version.toTimestamp()),createTime:Gd(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:mc(e.version)};else{if(!e.isUnknownDocument())return _e();r.unknownDocument={path:n.path.toArray(),version:mc(e.version)}}var o,s;return r}function qv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function mc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _c(t){const e=new rn(t.seconds,t.nanoseconds);return Ae.fromTimestamp(e)}function yc(t,e){const n=(e.baseMutations||[]).map(o=>lD(t.ut,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>lD(t.ut,o)),i=rn.fromMillis(e.localWriteTimeMs);return new rD(e.batchId,i,n,r)}function pg(t){const e=_c(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?_c(t.lastLimboFreeSnapshotVersion):Ae.min();let r;return r=void 0!==t.query.documents?(De(1===(o=t.query).documents.length),zr(Ud(SF(o.documents[0])))):function(o){return zr(NF(o))}(t.query),new Hs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,$n.fromBase64String(t.resumeToken));var o}function UF(t,e){const n=mc(e.snapshotVersion),r=mc(e.lastLimboFreeSnapshotVersion);let i;i=Fv(e.target)?xF(t.ut,e.target):dD(t.ut,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fc(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hD(t){const e=NF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Uv(e,e.limit,"L"):e}function fD(t,e){return new oD(e.largestBatchId,lD(t.ut,e.overlayMutation))}function BF(t,e){const n=e.path.lastSegment();return[t,br(e.path.popLast()),n]}function jF(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:mc(r.readTime),documentKey:br(r.documentKey.path),largestBatchId:r.largestBatchId}}class jK{getBundleMetadata(e,n){return $F(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:_c(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return $F(e).put({bundleId:(i=n).id,createTime:mc(bn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return HF(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:hD(o.bundledQuery),readTime:_c(o.readTime)};var o})}saveNamedQuery(e,n){return HF(e).put({name:(i=n).name,readTime:mc(bn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function $F(t){return rr(t,"bundles")}function HF(t){return rr(t,"namedQueries")}class Gv{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Gv(e,n.uid||"")}getOverlay(e,n){return gg(e).get(BF(this.userId,n)).next(r=>r?fD(this.serializer,r):null)}getOverlays(e,n){const r=as();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new oD(n,s);i.push(this.lt(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(br(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(gg(e).H("collectionPathOverlayIndex",a))}),x.waitFor(o)}getOverlaysForCollection(e,n,r){const i=as(),o=br(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return gg(e).W("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const d=fD(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=as();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return gg(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const g=fD(this.serializer,d);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):f.done()}).next(()=>o)}lt(e,n){return gg(e).put(function(i,o,s){const[a,u,d]=BF(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:d,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:fg(i.ut,s.mutation)}}(this.serializer,this.userId,n))}}function gg(t){return rr(t,"documentOverlays")}class vc{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(gn(e.integerValue));else if("doubleValue"in e){const r=gn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Kp(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Us(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?NL(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):_e()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),ce.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function $K(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function zF(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=$K(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}vc.St=new vc;class HK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=zF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=zF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class zK{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class qK{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class mg{constructor(){this.Wt=new HK,this.Gt=new zK(this.Wt),this.zt=new qK(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Ic{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ic(this.indexId,this.documentKey,this.arrayValue,r)}}function tu(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=qF(t.arrayValue,e.arrayValue),0!==n?n:(n=qF(t.directionalValue,e.directionalValue),0!==n?n:ce.comparator(t.documentKey,e.documentKey)))}function qF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class GF{constructor(e){this.Jt=new Mt((n,r)=>Zt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(De(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=$C(e);if(void 0!==n&&!this.tn(n))return!1;const r=cc(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.nn(a,u)||!this.rn(this.Yt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Yt.length||!this.rn(this.Yt[s++],r[o]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Mt(Zt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new lc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new lc(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new lc(r.field,"asc"===r.dir?0:1)));return new Od(Od.UNKNOWN_ID,this.collectionId,n,kd.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function WF(t){var e,n;if(De(t instanceof at||t instanceof At),t instanceof at){if(t instanceof qL){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>at.create(t.field,"==",o)))||[];return At.create(i,"or")}return t}const r=t.filters.map(i=>WF(i));return At.create(r,t.op)}function GK(t){if(0===t.getFilters().length)return[];const e=mD(WF(t));return De(ZF(e)),pD(e)||gD(e)?[e]:e.getFilters()}function pD(t){return t instanceof at}function gD(t){return t instanceof At&&QC(t)}function ZF(t){return pD(t)||gD(t)||function(n){if(n instanceof At&&KC(n)){for(const r of n.getFilters())if(!pD(r)&&!gD(r))return!1;return!0}return!1}(t)}function mD(t){if(De(t instanceof at||t instanceof At),t instanceof at)return t;if(1===t.filters.length)return mD(t.filters[0]);const e=t.filters.map(r=>mD(r));let n=At.create(e,t.op);return n=Wv(n),ZF(n)?n:(De(n instanceof At),De(Vd(n)),De(n.filters.length>1),n.filters.reduce((r,i)=>_D(r,i)))}function _D(t,e){let n;return De(t instanceof at||t instanceof At),De(e instanceof at||e instanceof At),n=t instanceof at?e instanceof at?At.create([t,e],"and"):KF(t,e):e instanceof at?KF(e,t):function(i,o){if(De(i.filters.length>0&&o.filters.length>0),Vd(i)&&Vd(o))return $L(i,o.getFilters());const s=KC(i)?i:o,a=KC(i)?o:i,u=s.filters.map(d=>_D(d,a));return At.create(u,"or")}(t,e),Wv(n)}function KF(t,e){if(Vd(e))return $L(e,t.getFilters());{const n=e.filters.map(r=>_D(t,r));return At.create(n,"or")}}function Wv(t){if(De(t instanceof at||t instanceof At),t instanceof at)return t;const e=t.getFilters();if(1===e.length)return Wv(e[0]);if(BL(t))return t;const n=e.map(i=>Wv(i)),r=[];return n.forEach(i=>{i instanceof at?r.push(i):i instanceof At&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:At.create(r,t.op)}class WK{constructor(){this.on=new yD}addToCollectionParentIndex(e,n){return this.on.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Ri.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}}class yD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mt(pt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(pt.comparator)).toArray()}}const Zv=new Uint8Array(0);class ZK{constructor(e,n){this.user=e,this.databaseId=n,this._n=new yD,this.an=new js(r=>fc(r),(r,i)=>tg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const o={collectionId:r,parent:br(i)};return QF(e).put(o)}return x.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[fL(n),""],!1,!0);return QF(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(os(s.parent))}return r})}addFieldIndex(e,n){const r=_g(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=Kd(e);return o.next(a=>{s.put(jF(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=_g(e),i=Kd(e),o=Zd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=_g(e),r=Zd(e),i=Kd(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return x.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new GF(r).sn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=Zd(e);let i=!0;const o=new Map;return x.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ye();const a=[];return x.forEach(o,(u,d)=>{var U;ee("IndexedDbIndexManager",`Using index ${U=u,`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`} to execute ${fc(n)}`);const f=function(U,ne){const ae=$C(ne);if(void 0===ae)return null;for(const Oe of Vv(U,ae.fieldPath))switch(Oe.op){case"array-contains-any":return Oe.value.arrayValue.values||[];case"array-contains":return[Oe.value]}return null}(d,u),g=function(U,ne){const ae=new Map;for(const Oe of cc(ne))for(const Ht of Vv(U,Oe.fieldPath))switch(Ht.op){case"==":case"in":ae.set(Oe.fieldPath.canonicalString(),Ht.value);break;case"not-in":case"!=":return ae.set(Oe.fieldPath.canonicalString(),Ht.value),Array.from(ae.values())}return null}(d,u),_=function(U,ne){const ae=[];let Oe=!0;for(const Ht of cc(ne)){const ui=0===Ht.kind?GL(U,Ht.fieldPath,U.startAt):WL(U,Ht.fieldPath,U.startAt);ae.push(ui.value),Oe&&(Oe=ui.inclusive)}return new Xa(ae,Oe)}(d,u),y=function(U,ne){const ae=[];let Oe=!0;for(const Ht of cc(ne)){const ui=0===Ht.kind?WL(U,Ht.fieldPath,U.endAt):GL(U,Ht.fieldPath,U.endAt);ae.push(ui.value),Oe&&(Oe=ui.inclusive)}return new Xa(ae,Oe)}(d,u),I=this.ln(u,d,_),C=this.ln(u,d,y),S=this.hn(u,d,g),N=this.Pn(u.indexId,f,I,_.inclusive,C,y.inclusive,S);return x.forEach(N,R=>r.j(R,n.limit).next(U=>{U.forEach(ne=>{const ae=ce.fromSegments(ne.documentKey);s.has(ae)||(s=s.add(ae),a.push(ae))})}))}).next(()=>a)}return x.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:GK(At.create(e.filters,"and")).map(r=>JC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){const u=(null!=n?n.length:1)*Math.max(r.length,o.length),d=u/(null!=n?n.length:1),f=[];for(let g=0;g<u;++g){const _=n?this.In(n[g/d]):Zv,y=this.Tn(e,_,r[g%d],i),I=this.En(e,_,o[g%d],s),C=a.map(S=>this.Tn(e,_,S,!0));f.push(...this.createRange(y,I,C))}return f}Tn(e,n,r,i){const o=new Ic(e,ce.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){const o=new Ic(e,ce.empty(),n,r);return i?o.Ht():o}cn(e,n){const r=new GF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.un(n);return x.forEach(i,o=>this.cn(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let d=new Mt(Zt.comparator),f=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new mg;for(const i of cc(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.jt(i.kind);vc.St.ht(o,s)}return r.Ut()}In(e){const n=new mg;return vc.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new mg;return vc.St.ht(hc(this.databaseId,n),r.jt(function(o){const s=cc(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new mg);let o=0;for(const s of cc(e)){const a=r[o++];for(const u of i)if(this.Rn(n,s.fieldPath)&&Jp(a))i=this.Vn(i,s,a);else{const d=u.jt(s.kind);vc.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new mg;u.seed(a.Ut()),vc.St.ht(s,u.jt(n.kind)),o.push(u)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof at&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=_g(e),i=Kd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return x.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(f,g){const _=g?new kd(g.sequenceNumber,new Ri(_c(g.readTime),new ce(os(g.documentKey)),g.largestBatchId)):kd.empty(),y=f.fields.map(([I,C])=>new lc(Zt.fromServerFormat(I),C));return new Od(f.indexId,f.collectionGroup,y,_)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:He(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=_g(e),o=Kd(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,u=>o.put(jF(u.indexId,this.user,s,r)))))}updateIndexEntries(e,n){const r=new Map;return x.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?x.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,u=>this.gn(e,i,u).next(d=>{const f=this.pn(o,u);return d.isEqual(f)?x.resolve():this.yn(e,o,u,d,f)}))))})}wn(e,n,r,i){return Zd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Zd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=Zd(e);let o=new Mt(tu);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new Ic(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new Mt(tu);const i=this.dn(n,e);if(null==i)return r;const o=$C(n);if(null!=o){const s=e.data.field(o.fieldPath);if(Jp(s))for(const a of s.arrayValue.values||[])r=r.add(new Ic(n.indexId,e.key,this.In(a),i))}else r=r.add(new Ic(n.indexId,e.key,Zv,i));return r}yn(e,n,r,i,o){ee("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(u,d,f,g,_){const y=u.getIterator(),I=d.getIterator();let C=Ld(y),S=Ld(I);for(;C||S;){let N=!1,R=!1;if(C&&S){const U=f(C,S);U<0?R=!0:U>0&&(N=!0)}else null!=C?R=!0:N=!0;N?(g(S),S=Ld(I)):R?(_(C),C=Ld(y)):(C=Ld(y),S=Ld(I))}}(i,o,tu,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),x.waitFor(s)}fn(e){let n=1;return Kd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>tu(s,a)).filter((s,a,u)=>!a||0!==tu(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=tu(s,e),u=tu(s,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(s),i.push(s.Ht());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Zv,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Zv,[]]))}return o}bn(e,n){return tu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(YF)}getMinOffset(e,n){return x.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||_e())).next(YF)}}function QF(t){return rr(t,"collectionParents")}function Zd(t){return rr(t,"indexEntries")}function _g(t){return rr(t,"indexConfiguration")}function Kd(t){return rr(t,"indexState")}function YF(t){De(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;HC(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ri(e.readTime,e.documentKey,n)}const JF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ar{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function XF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},(f,g,_)=>(a++,_.delete()));o.push(u.next(()=>{De(1===a)}));const d=[];for(const f of n.mutations){const g=wL(e,f.key.path,n.batchId);o.push(i.delete(g)),d.push(f.key)}return x.waitFor(o).next(()=>d)}function Kv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _e();e=t.noDocument}return JSON.stringify(e).length}Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(41943040,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);class Qv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){De(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Qv(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nu(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=Qd(e),s=nu(e);return s.add({}).next(a=>{De("number"==typeof a);const u=new rD(a,n,r,i),d=function(y,I,C){const S=C.baseMutations.map(R=>fg(y.ut,R)),N=C.mutations.map(R=>fg(y.ut,R));return{userId:I,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:S,mutations:N}}(this.serializer,this.userId,u),f=[];let g=new Mt((_,y)=>He(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=wL(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),f.push(s.put(d)),f.push(o.put(y,LZ))}return g.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),x.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return nu(e).get(n).next(r=>r?(De(r.userId===this.userId),yc(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?x.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return nu(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(De(a.batchId>=r),o=yc(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return nu(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nu(e).W("userMutationsIndex",n).next(r=>r.map(i=>yc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Pv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Qd(e).Y({range:i},(s,a,u)=>{const[d,f,g]=s,_=os(f);if(d===this.userId&&n.path.isEqual(_))return nu(e).get(g).next(y=>{if(!y)throw _e();De(y.userId===this.userId),o.push(yc(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(He);const i=[];return n.forEach(o=>{const s=Pv(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Qd(e).Y({range:a},(d,f,g)=>{const[_,y,I]=d,C=os(y);_===this.userId&&o.path.isEqual(C)?r=r.add(I):g.done()});i.push(u)}),x.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=Pv(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Mt(He);return Qd(e).Y({range:s},(u,d,f)=>{const[g,_,y]=u,I=os(_);g===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(y)):f.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(nu(e).get(o).next(s=>{if(null===s)throw _e();De(s.userId===this.userId),r.push(yc(this.serializer,s))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return XF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qd(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=os(o[1]);i.push(u)}else a.done()}).next(()=>{De(0===i.length)})})}containsKey(e,n){return eV(e,this.userId,n)}Mn(e){return tV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function eV(t,e,n){const r=Pv(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Qd(t).Y({range:o,J:!0},(a,u,d)=>{const[f,g,_]=a;f===e&&g===i&&(s=!0),d.done()}).next(()=>s)}function nu(t){return rr(t,"mutations")}function Qd(t){return rr(t,"documentMutations")}function tV(t){return rr(t,"mutationQueues")}class Ec{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Ec(0)}static Nn(){return new Ec(-1)}}class KK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Ec(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Ae.fromTimestamp(new rn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Yd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(De(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return Yd(e).Y((s,a)=>{const u=pg(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>x.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Yd(e).Y((r,i)=>{const o=pg(i);n(o)})}Bn(e){return nV(e).get("targetGlobalKey").next(n=>(De(null!==n),n))}Ln(e,n){return nV(e).put("targetGlobalKey",n)}kn(e,n){return Yd(e).put(UF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=fc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Yd(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const d=pg(a);tg(n,d.target)&&(o=d,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=ru(e);return n.forEach(s=>{const a=br(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),x.waitFor(i)}removeMatchingKeys(e,n,r){const i=ru(e);return x.forEach(n,o=>{const s=br(o.path);return x.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=ru(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ru(e);let o=Ye();return i.Y({range:r,J:!0},(s,a,u)=>{const d=os(s[1]),f=new ce(d);o=o.add(f)}).next(()=>o)}containsKey(e,n){const r=br(n.path),i=IDBKeyRange.bound([r],[fL(r)],!1,!0);let o=0;return ru(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,d)=>{0!==s&&(o++,d.done())}).next(()=>o>0)}_t(e,n){return Yd(e).get(n).next(r=>r?pg(r):null)}}function Yd(t){return rr(t,"targets")}function nV(t){return rr(t,"targetGlobal")}function ru(t){return rr(t,"targetDocuments")}function rV([t,e],[n,r]){const i=He(t,n);return 0===i?He(e,r):i}class QK{constructor(e){this.Qn=e,this.buffer=new Mt(rV),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();rV(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class iV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,W.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Ga(r)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield qa(r)}yield n.Gn(3e5)}))}}class YK{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return x.resolve(Pi._e);const r=new QK(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(JF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JF):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),xd()<=ts.in.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-f}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-f}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}class JK{constructor(e,n){this.db=e,this.garbageCollector=function oV(t,e){return new YK(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Yv(e,r)}removeReference(e,n,r){return Yv(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Yv(e,n)}Xn(e,n){return function(i,o){let s=!1;return tV(i).Z(a=>eV(i,a,o).next(u=>(u&&(s=!0),x.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Zn(e,(s,a)=>{if(a<=n){const u=this.Xn(e,s).next(d=>{if(!d)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Ae.min()),ru(e).delete([0,br(s.path)])))});i.push(u)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Yv(e,n)}Zn(e,n){const r=ru(e);let i,o=Pi._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:d})=>{0===s?(o!==Pi._e&&n(new ce(os(i)),o),o=d,i=u):o=Pi._e}).next(()=>{o!==Pi._e&&n(new ce(os(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yv(t,e){return ru(t).put((i=t.currentSequenceNumber,{targetId:0,path:br(e.path),sequenceNumber:i}));var i}class sV{constructor(){this.changes=new js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return wc(e).put(r)}removeEntry(e,n,r){return wc(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qv(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Kt.newInvalidDocument(n);return wc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(yg(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:Kt.newInvalidDocument(n)};return wc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(yg(n))},(i,o)=>{r={document:this.tr(n,o),size:Kv(o)}}).next(()=>r)}getEntries(e,n){let r=ai();return this.rr(e,n,(i,o)=>{const s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=ai(),i=new jt(ce.comparator);return this.rr(e,n,(o,s)=>{const a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,Kv(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return x.resolve();let i=new Mt(lV);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(yg(i.first()),yg(i.last())),s=i.getIterator();let a=s.getNext();return wc(e).Y({index:"documentKeyIndex",range:o},(u,d,f)=>{const g=ce.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&lV(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,d),a=s.hasNext()?s.getNext():null),a?f.U(yg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),qv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wc(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{o?.incrementDocumentReadCount(d.length);let f=ai();for(const g of d){const _=this.tr(ce.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(rg(n,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,n,r,i){let o=ai();const s=cV(n,r),a=cV(n,Ri.max());return wc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,d,f)=>{const g=this.tr(ce.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(g.key,g),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new eQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return uV(e).get("remoteDocumentGlobalKey").next(n=>(De(!!n),n))}er(e,n){return uV(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function BK(t,e){let n;if(e.document)n=MF(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),i=_c(e.noDocument.readTime);n=Kt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e();{const r=ce.fromSegments(e.unknownDocument.path),i=_c(e.unknownDocument.version);n=Kt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new rn(i[0],i[1]);return Ae.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Ae.min()))return r}return Kt.newInvalidDocument(e)}}function aV(t){return new XK(t)}class eQ extends sV{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new js(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Mt((o,s)=>He(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=VF(this._r.serializer,s);i=i.add(o.path.popLast());const d=Kv(u);r+=d-a.size,n.push(this._r.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=VF(this._r.serializer,s.convertToNoDocument(Ae.min()));n.push(this._r.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function uV(t){return rr(t,"remoteDocumentGlobal")}function wc(t){return rr(t,"remoteDocumentsV14")}function yg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cV(t,e){const n=e.documentKey.path.toArray();return[t,qv(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lV(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=He(n[o],r[o]),i)return i;return i=He(n.length,r.length),i||(i=He(n[n.length-2],r[r.length-2]),i||He(n[n.length-1],r[r.length-1]))}class tQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class dV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&ag(r.mutation,i,si.empty(),rn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ye()){const i=as();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ig();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=as();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ai();const s=og(),a=og();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof $s)?o=o.insert(d.key,d):void 0!==f?(s.set(d.key,f.mutation.getFieldMask()),ag(f.mutation,d,f.mutation.getFieldMask(),rn.now())):s.set(d.key,si.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,f)=>s.set(d,f)),n.forEach((d,f)=>{var g;return a.set(d,new tQ(f,null!==(g=s.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=og();let i=new jt((s,a)=>s-a),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let f=r.get(u)||si.empty();f=a.applyToLocalView(d,f),r.set(u,f);const g=(i.get(a.batchId)||Ye()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,g=nF();f.forEach(_=>{if(!o.has(_)){const y=dF(n.get(_),r.get(_));null!==y&&g.set(_,y),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ce.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):XC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(as());let a=-1,u=o;return s.next(d=>x.forEach(d,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(f)?x.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,Ye())).next(f=>({batchId:a,changes:tF(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=ig();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=ig();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{const d=(g=n,_=u.child(o),new Bs(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{s=s.insert(g,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,d)=>{const f=d.getKey();null===s.get(f)&&(s=s.insert(f,Kt.newInvalidDocument(f)))});let a=ig();return s.forEach((u,d)=>{const f=o.get(u);void 0!==f&&ag(f.mutation,d,si.empty(),rn.now()),rg(n,d)&&(a=a.insert(u,d))}),a})}}class nQ{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return x.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:bn(i.createTime)}),x.resolve();var i}getNamedQuery(e,n){return x.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:hD(i.bundledQuery),readTime:bn(i.readTime)}),x.resolve();var i}}class rQ{constructor(){this.overlays=new jt(ce.comparator),this.lr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){const r=as();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){const i=as(),o=n.length+1,s=new ce(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new jt((d,f)=>d-f);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=o.get(d.largestBatchId);null===f&&(f=as(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=as(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return x.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new oD(n,r));let o=this.lr.get(n);void 0===o&&(o=Ye(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}}class vD{constructor(){this.hr=new Mt(ir.Pr),this.Ir=new Mt(ir.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new ir(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new ir(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new ce(new pt([])),r=new ir(n,e),i=new ir(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new ce(new pt([])),r=new ir(n,e),i=new ir(n,e+1);let o=Ye();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new ir(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class ir{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return ce.comparator(e.key,n.key)||He(e.gr,n.gr)}static Tr(e,n){return He(e.gr,n.gr)||ce.comparator(e.key,n.key)}}class iQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Mt(ir.Pr)}checkEmpty(e){return x.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.pr;this.pr++;const s=new rD(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.yr=this.yr.add(new ir(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ir(n,0),i=new ir(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{const a=this.wr(s.gr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(He);return n.forEach(i=>{const o=new ir(i,0),s=new ir(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),x.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ce.isDocumentKey(o)||(o=o.child(""));const s=new ir(new ce(o),0);let a=new Mt(He);return this.yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.gr)),!0)},s),x.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){De(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return x.forEach(n.mutations,i=>{const o=new ir(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new ir(n,0),i=this.yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return x.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class oQ{constructor(e){this.Cr=e,this.docs=new jt(ce.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let r=ai();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Kt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ai();const s=n.path,a=new ce(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||HC(gL(f),r)<=0||(i.has(f.key)||rg(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){_e()}vr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sQ(this)}getSize(e){return x.resolve(this.size)}}class sQ extends sV{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class aQ{constructor(e){this.persistence=e,this.Fr=new js(n=>fc(n),tg),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Mr=0,this.Or=new vD,this.targetCount=0,this.Nr=Ec.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),x.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ec(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.kn(n),x.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),x.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Or.containsKey(n))}}class ID{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Pi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new aQ(this),this.indexManager=new WK,this.remoteDocumentCache=new oQ(r=>this.referenceDelegate.Qr(r)),this.serializer=new FF(n),this.Kr=new nQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new iQ(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new uQ(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class uQ extends _L{constructor(e){super(),this.currentSequenceNumber=e}}class Jv{constructor(e){this.persistence=e,this.Gr=new vD,this.zr=null}static jr(e){return new Jv(e)}get Hr(){if(this.zr)return this.zr;throw _e()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Hr,r=>{const i=ce.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,Ae.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return x.or([()=>x.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class cQ{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Rv("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",EL,{unique:!0}),u.createObjectStore("documentMutations"),hV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=x.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),hV(e)),s=s.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ae.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,d){return d.store("mutations").W().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",EL,{unique:!0});const g=d.store("mutations"),_=f.map(y=>g.put(y));return x.waitFor(_)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:ZZ});d.createIndex("collectionPathOverlayIndex",KZ,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",QZ,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:FZ});d.createIndex("documentKeyIndex",VZ),d.createIndex("collectionGroupIndex",UZ)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:zZ}).createIndex("sequenceNumberIndex",qZ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:GZ}).createIndex("documentKeyIndex",WZ,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Kv(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>x.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>x.forEach(a,u=>{De(u.userId===o.userId);const d=yc(this.serializer,u);return XF(e,o.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const u=new pt(s),d=[0,br(u)];o.push(n.get(d).next(f=>f?x.resolve():n.put({targetId:0,path:br(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>x.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:HZ});const r=n.store("collectionParents"),i=new yD,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:br(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const u=new pt(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],d)=>{const f=os(a);return o(f.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const o=pg(i),s=UF(this.serializer,o);return n.put(s)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),u=(g=s,g.document?new ce(pt.fromString(g.document.name).popFirst(5)):g.noDocument?ce.fromSegments(g.noDocument.path):g.unknownDocument?ce.fromSegments(g.unknownDocument.path):_e()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>x.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=aV(this.serializer),o=new ID(Jv.jr,this.serializer.ut);return r.W().next(s=>{const a=new Map;return s.forEach(u=>{var d;let f=null!==(d=a.get(u.userId))&&void 0!==d?d:Ye();yc(this.serializer,u).keys().forEach(g=>f=f.add(g)),a.set(u.userId,f)}),x.forEach(a,(u,d)=>{const f=new nr(d),g=Gv.ct(this.serializer,f),_=o.getIndexManager(f),y=Qv.ct(f,this.serializer,_,o.referenceDelegate);return new dV(i,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new GC(n,Pi._e),u).next()})})}}function hV(t){t.createObjectStore("targetDocuments",{keyPath:jZ}).createIndex("documentTargetsIndex",$Z,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",BZ,{unique:!0}),t.createObjectStore("targetGlobal")}const ED="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wD{constructor(e,n,r,i,o,s,a,u,d,f,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=d,this._i=f,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!wD.D())throw new J(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JK(this,i),this.Ii=n+"main",this.serializer=new FF(u),this.Ti=new To(this.Ii,this.ai,new cQ(this.serializer)),this.qr=new KK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=aV(this.serializer),this.Kr=new jK,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===f&&Dn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(k.FAILED_PRECONDITION,ED);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Pi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,W.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,W.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,W.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>eI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Ga(e))return ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return vg(e).get("owner").next(n=>x.resolve(this.wi(n)))}Si(e){return eI(e).delete(this.clientId)}bi(){var e=this;return(0,W.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=rr(r,"clientMetadata");return i.W().next(o=>{const s=e.Ci(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return x.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?x.resolve(!0):vg(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new J(k.FAILED_PRECONDITION,ED);return!1}}return!(!this.networkEnabled||!this.inForeground)||eI(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ee("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,W.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new GC(n,Pi._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>eI(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Qv.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZK(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Gv.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){ee("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(u=this.ai)?JZ:14===u?DL:13===u?CL:12===u?YZ:11===u?TL:void _e();var u;let s;return this.Ti.runTransaction(e,i,o,a=>(s=new GC(a,this.Lr?this.Lr.next():Pi._e),"readwrite-primary"===n?this.fi(s).next(u=>!!u||this.gi(s)).next(u=>{if(!u)throw Dn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new J(k.FAILED_PRECONDITION,mL);return r(s)}).next(u=>this.yi(s).next(()=>u)):this.Li(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return vg(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(k.FAILED_PRECONDITION,ED)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vg(e).put("owner",n)}static D(){return To.D()}pi(e){const n=vg(e);return n.get("owner").next(r=>this.wi(r)?(ee("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(Dn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,kt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return ee("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Dn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vg(t){return rr(t,"owner")}function eI(t){return rr(t,"clientMetadata")}function TD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class CD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ye(),i=Ye();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new CD(e,n.fromCache,r,i)}}class lQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fV{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new lQ;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(xd()<=ts.in.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",jd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),x.resolve()):(xd()<=ts.in.DEBUG&&ee("QueryEngine","Query:",jd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(xd()<=ts.in.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",jd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):x.resolve())}zi(e,n){if(KL(n))return x.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Uv(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ye(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Yi(n,a);return this.Zi(n,d,s,u.readTime)?this.zi(e,Uv(n,null,"F")):this.Xi(e,d,n,u)}))})))}ji(e,n,r,i){return KL(n)||i.isEqual(Ae.min())?x.resolve(null):this.Gi.getDocuments(e,r).next(o=>{const s=this.Yi(n,o);return this.Zi(n,s,r,i)?x.resolve(null):(xd()<=ts.in.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jd(n)),this.Xi(e,s,n,pL(i,-1)).next(a=>a))})}Yi(e,n){let r=new Mt(XL(e));return n.forEach((i,o)=>{rg(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return xd()<=ts.in.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",jd(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ri.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class dQ{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new jt(He),this.ns=new js(o=>fc(o),tg),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dV(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function pV(t,e,n,r){return new dQ(t,e,n,r)}function gV(t,e){return DD.apply(this,arguments)}function DD(){return DD=(0,W.Z)(function*(t,e){const n=ue(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=Ye();for(const d of i){s.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of o){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({_s:d,removedBatchIds:s,addedBatchIds:a}))})})}),DD.apply(this,arguments)}function mV(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function _V(t,e,n){let r=Ye(),i=Ye();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ai();return n.forEach((a,u)=>{const d=o.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Ae.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{us:s,cs:i}})}function pQ(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jd(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new Hs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function Xd(t,e,n){return bD.apply(this,arguments)}function bD(){return bD=(0,W.Z)(function*(t,e,n){const r=ue(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ga(s))throw s;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),bD.apply(this,arguments)}function tI(t,e,n){const r=ue(t);let i=Ae.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,f){const g=ue(u),_=g.ns.get(f);return void 0!==_?x.resolve(g.ts.get(_)):g.qr.getTargetData(d,f)}(r,s,zr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:Ae.min(),n?o:Ye())).next(a=>(IV(r,JL(e),a),{documents:a,ls:o})))}function yV(t,e){const n=ue(t),r=ue(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function vV(t,e){const n=ue(t),r=n.rs.get(e)||Ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,pL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(IV(n,e,i),i))}function IV(t,e,n){let r=t.rs.get(e)||Ae.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function AD(){return AD=(0,W.Z)(function*(t,e,n,r){const i=ue(t);let o=Ye(),s=ai();for(const d of n){const f=e.hs(d.metadata.name);d.document&&(o=o.add(f));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),s=s.insert(f,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield Jd(i,(f=r,zr(Ud(pt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>_V(d,a,s).next(f=>(a.apply(d),f)).next(f=>i.qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.qr.addMatchingKeys(d,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.us,f.cs)).next(()=>f.us)))}),AD.apply(this,arguments)}function mQ(t,e){return SD.apply(this,arguments)}function SD(){return SD=(0,W.Z)(function*(t,e,n=Ye()){const r=yield Jd(t,zr(hD(e.bundledQuery))),i=ue(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=bn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(o,e);const a=r.withResumeToken($n.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(o,a).next(()=>i.qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(o,e))})}),SD.apply(this,arguments)}function EV(t,e){return`firestore_clients_${t}_${e}`}function wV(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function RD(t,e){return`firestore_targets_${t}_${e}`}class nI{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new J(i.error.code,i.error.message))),s?new nI(e,n,i.state,o):(Dn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ig{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new J(r.error.code,r.error.message))),o?new Ig(e,r.state,i):(Dn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rI{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=tD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=vL(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new rI(e,o):(Dn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class PD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new PD(n.clientId,n.onlineState):(Dn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class MD{constructor(){this.activeTargetIds=tD()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xD{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new jt(He),this.started=!1,this.ps=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=EV(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new MD),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,W.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const o=e.getItem(EV(e.persistenceKey,i));if(o){const s=rI.Ts(i,o);s&&(e.gs=e.gs.insert(s.clientId,s))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(RD(this.persistenceKey,e));if(r){const i=Ig.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(RD(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ee("SharedClientState","READ",e,n),n}setItem(e,n){ee("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ee("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Dn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,W.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(s){let a=Pi._e;if(null!=s)try{const u=JSON.parse(s);De("number"==typeof u),a=u}catch(u){Dn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Pi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Js(o)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new nI(this.currentUser,e,n,r),o=wV(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){const n=wV(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=RD(this.persistenceKey,e),o=new Ig(e,n,r);this.setItem(i,o.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return rI.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return nI.Ts(new nr(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Ig.Ts(i,n)}Ms(e){return PD.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,W.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=tD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class TV{constructor(){this.eo=new MD,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new MD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _Q{ro(e){}shutdown(){}}class CV{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let iI=null;function ND(){return null===iI?iI=268435456+Math.round(2147483648*Math.random()):iI++,"0x"+iI.toString(16)}const yQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vQ{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Sr="WebChannelConnection";class IQ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){const a=ND(),u=this.So(n,r);ee("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,o,s),this.Do(n,u,d,i).then(f=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw oi("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}Co(n,r,i,o,s,a){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Md,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){return`${this.mo}/v1/${r}:${yQ[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const o=ND();return new Promise((s,a)=>{const u=new _Z;u.setWithCredentials(!0),u.listenOnce(gZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case BC.NO_ERROR:const f=u.getResponseJson();ee(Sr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case BC.TIMEOUT:ee(Sr,`RPC '${e}' ${o} timed out`),a(new J(k.DEADLINE_EXCEEDED,"Request time out"));break;case BC.HTTP_ERROR:const g=u.getStatus();if(ee(Sr,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const I=function(S){const N=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(N)>=0?N:k.UNKNOWN}(y.status);a(new J(I,y.message))}else a(new J(k.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(k.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{ee(Sr,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);ee(Sr,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}vo(e,n,r){const i=ND(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fZ(),a=pZ(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");ee(Sr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=s.createWebChannel(f,u);let _=!1,y=!1;const I=new vQ({co:S=>{y?ee(Sr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(ee(Sr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),ee(Sr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},lo:()=>g.close()}),C=(S,N,R)=>{S.listen(N,U=>{try{R(U)}catch(ne){setTimeout(()=>{throw ne},0)}})};return C(g,Sv.EventType.OPEN,()=>{y||ee(Sr,`RPC '${e}' stream ${i} transport opened.`)}),C(g,Sv.EventType.CLOSE,()=>{y||(y=!0,ee(Sr,`RPC '${e}' stream ${i} transport closed`),I.Ro())}),C(g,Sv.EventType.ERROR,S=>{y||(y=!0,oi(Sr,`RPC '${e}' stream ${i} transport errored:`,S),I.Ro(new J(k.UNAVAILABLE,"The operation could not be completed")))}),C(g,Sv.EventType.MESSAGE,S=>{var N;if(!y){const R=S.data[0];De(!!R);const ne=R.error||(null===(N=R[0])||void 0===N?void 0:N.error);if(ne){ee(Sr,`RPC '${e}' stream ${i} received error:`,ne);const ae=ne.status;let Oe=function(oA){const Z2=On[oA];if(void 0!==Z2)return _F(Z2)}(ae),Ht=ne.message;void 0===Oe&&(Oe=k.INTERNAL,Ht="Unknown error status: "+ae+" with message "+ne.message),y=!0,I.Ro(new J(Oe,Ht)),g.close()}else ee(Sr,`RPC '${e}' stream ${i} received:`,R),I.Vo(R)}}),C(a,mZ.STAT_EVENT,S=>{S.stat===uL.PROXY?ee(Sr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===uL.NOPROXY&&ee(Sr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.Ao()},0),I}}function DV(){return typeof window<"u"?window:null}function oI(){return typeof document<"u"?document:null}function Eg(t){return new PK(t,!0)}class OD{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class bV{constructor(e,n,r,i,o,s,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new OD(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,W.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,W.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,W.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Dn(n.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===k.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new J(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,W.Z)(function*(){e.state=0,e.start()}))}o_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EQ extends bV{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function NK(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:_e(),i=e.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(De(void 0===f||"string"==typeof f),$n.fromBase64String(f||"")):(De(void 0===f||f instanceof Uint8Array),$n.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){const f=void 0===d.code?k.UNKNOWN:_F(d.code);return new J(f,d.message||"")}(s);n=new wF(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=us(t,r.document.name),o=bn(r.document.updateTime),s=r.document.createTime?bn(r.document.createTime):Ae.min(),a=new pr({mapValue:{fields:r.document.fields}}),u=Kt.newFoundDocument(i,o,s,a);n=new zv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=us(t,r.document),o=r.readTime?bn(r.readTime):Ae.min(),s=Kt.newNoDocument(i,o);n=new zv([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=us(t,r.document);n=new zv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return _e();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new CK(i,o);n=new EF(r.targetId,s)}}var d;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ae.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ae.min():s.readTime?bn(s.readTime):Ae.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=hg(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=Fv(u)?{documents:xF(o,u)}:{query:dD(o,u)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=bF(o,s.resumeToken);const d=aD(o,s.expectedCount);null!==d&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(Ae.min())>0){a.readTime=Gd(o,s.snapshotVersion.toTimestamp());const d=aD(o,s.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function kK(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=hg(this.serializer),n.removeTarget=e,this.e_(n)}}class wQ extends bV{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function OK(t,e){return t&&t.length>0?(De(void 0!==e),t.map(n=>function(i,o){let s=bn(i.updateTime?i.updateTime:o);return s.isEqual(Ae.min())&&(s=bn(o)),new IK(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.I_(r,n)}return De(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=hg(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fg(this.serializer,r))};this.e_(n)}}class TQ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new J(k.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(k.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(k.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class DQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Dn(n),this.f_=!1):ee("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class bQ{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(a=>{r.enqueueAndForget((0,W.Z)(function*(){var u;iu(s)&&(ee("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,W.Z)(function*(f){const g=ue(f);g.C_.add(4),yield eh(g),g.M_.set("Unknown"),g.C_.delete(4),yield wg(g)}),function d(f){return u.apply(this,arguments)})(s))}))}),this.M_=new DQ(r,i)}}function wg(t){return LD.apply(this,arguments)}function LD(){return LD=(0,W.Z)(function*(t){if(iu(t))for(const e of t.v_)yield e(!0)}),LD.apply(this,arguments)}function eh(t){return FD.apply(this,arguments)}function FD(){return FD=(0,W.Z)(function*(t){for(const e of t.v_)yield e(!1)}),FD.apply(this,arguments)}function sI(t,e){const n=ue(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),BD(n)?UD(n):nh(n).Ho()&&VD(n,e))}function Tg(t,e){const n=ue(t),r=nh(n);n.D_.delete(e),r.Ho()&&AV(n,e),0===n.D_.size&&(r.Ho()?r.Zo():iu(n)&&n.M_.set("Unknown"))}function VD(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nh(t).u_(e)}function AV(t,e){t.x_.Oe(e),nh(t).c_(e)}function UD(t){t.x_=new bK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),nh(t).start(),t.M_.g_()}function BD(t){return iu(t)&&!nh(t).jo()&&t.D_.size>0}function iu(t){return 0===ue(t).C_.size}function SV(t){t.x_=void 0}function AQ(t){return jD.apply(this,arguments)}function jD(){return jD=(0,W.Z)(function*(t){t.D_.forEach((e,n)=>{VD(t,e)})}),jD.apply(this,arguments)}function SQ(t,e){return $D.apply(this,arguments)}function $D(){return $D=(0,W.Z)(function*(t,e){SV(t),BD(t)?(t.M_.w_(e),UD(t)):t.M_.set("Unknown")}),$D.apply(this,arguments)}function RQ(t,e,n){return HD.apply(this,arguments)}function HD(){return HD=(0,W.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof wF&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.D_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.D_.delete(u),o.x_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield aI(t,r)}else if(e instanceof zv?t.x_.$e(e):e instanceof EF?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Ae.min()))try{const r=yield mV(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.D_.get(d);f&&o.D_.set(d,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,d)=>{const f=o.D_.get(u);if(!f)return;o.D_.set(u,f.withResumeToken($n.EMPTY_BYTE_STRING,f.snapshotVersion)),AV(o,u);const g=new Hs(f.target,u,d,f.sequenceNumber);VD(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),yield aI(t,r)}var r}),HD.apply(this,arguments)}function aI(t,e,n){return zD.apply(this,arguments)}function zD(){return zD=(0,W.Z)(function*(t,e,n){if(!Ga(e))throw e;t.C_.add(1),yield eh(t),t.M_.set("Offline"),n||(n=()=>mV(t.localStore)),t.asyncQueue.enqueueRetryable((0,W.Z)(function*(){ee("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield wg(t)}))}),zD.apply(this,arguments)}function RV(t,e){return e().catch(n=>aI(t,n,e))}function th(t){return qD.apply(this,arguments)}function qD(){return qD=(0,W.Z)(function*(t){const e=ue(t),n=ou(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;PQ(e);)try{const i=yield pQ(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,MQ(e,i)}catch(i){yield aI(e,i)}PV(e)&&MV(e)}),qD.apply(this,arguments)}function PQ(t){return iu(t)&&t.b_.length<10}function MQ(t,e){t.b_.push(e);const n=ou(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function PV(t){return iu(t)&&!ou(t).jo()&&t.b_.length>0}function MV(t){ou(t).start()}function xQ(t){return GD.apply(this,arguments)}function GD(){return GD=(0,W.Z)(function*(t){ou(t).E_()}),GD.apply(this,arguments)}function NQ(t){return WD.apply(this,arguments)}function WD(){return WD=(0,W.Z)(function*(t){const e=ou(t);for(const n of t.b_)e.P_(n.mutations)}),WD.apply(this,arguments)}function OQ(t,e,n){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,W.Z)(function*(t,e,n){const r=t.b_.shift(),i=iD.from(r,e,n);yield RV(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield th(t)}),ZD.apply(this,arguments)}function kQ(t,e){return KD.apply(this,arguments)}function KD(){return KD=(0,W.Z)(function*(t,e){var n;e&&ou(t).h_&&(yield(n=(0,W.Z)(function*(i,o){if(mF(a=o.code)&&a!==k.ABORTED){const s=i.b_.shift();ou(i).Yo(),yield RV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield th(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),PV(t)&&MV(t)}),KD.apply(this,arguments)}function xV(t,e){return QD.apply(this,arguments)}function QD(){return QD=(0,W.Z)(function*(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=iu(n);n.C_.add(3),yield eh(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield wg(n)}),QD.apply(this,arguments)}function YD(t,e){return JD.apply(this,arguments)}function JD(){return JD=(0,W.Z)(function*(t,e){const n=ue(t);e?(n.C_.delete(2),yield wg(n)):e||(n.C_.add(2),yield eh(n),n.M_.set("Unknown"))}),JD.apply(this,arguments)}function nh(t){return t.O_||(t.O_=function(n,r,i){const o=ue(n);return o.A_(),new EQ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:AQ.bind(null,t),Io:SQ.bind(null,t),a_:RQ.bind(null,t)}),t.v_.push(function(){var e=(0,W.Z)(function*(n){n?(t.O_.Yo(),BD(t)?UD(t):t.M_.set("Unknown")):(yield t.O_.stop(),SV(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function ou(t){return t.N_||(t.N_=function(n,r,i){const o=ue(n);return o.A_(),new wQ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:xQ.bind(null,t),Io:kQ.bind(null,t),T_:NQ.bind(null,t),I_:OQ.bind(null,t)}),t.v_.push(function(){var e=(0,W.Z)(function*(n){n?(t.N_.Yo(),yield th(t)):(yield t.N_.stop(),t.b_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class XD{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new XD(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rh(t,e){if(Dn("AsyncQueue",`${e}: ${t}`),Ga(t))return new J(k.UNAVAILABLE,`${e}: ${t}`);throw t}class ih{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=ig(),this.sortedSet=new jt(this.comparator)}static emptySet(e){return new ih(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ih)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new ih;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class NV{constructor(){this.B_=new jt(ce.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):_e():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class oh{constructor(e,n,r,i,o,s,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new oh(e,n,ih.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ng(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class LQ{constructor(){this.k_=void 0,this.listeners=[]}}class FQ{constructor(){this.queries=new js(e=>YL(e),ng),this.onlineState="Unknown",this.q_=new Set}}function eb(t,e){return tb.apply(this,arguments)}function tb(){return tb=(0,W.Z)(function*(t,e){const n=ue(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new LQ),i)try{o.k_=yield n.onListen(r)}catch(s){const a=rh(s,`Initialization of query '${jd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&ib(n)}),tb.apply(this,arguments)}function nb(t,e){return rb.apply(this,arguments)}function rb(){return rb=(0,W.Z)(function*(t,e){const n=ue(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),rb.apply(this,arguments)}function VQ(t,e){const n=ue(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.listeners)a.K_(i)&&(r=!0);s.k_=i}}r&&ib(n)}function UQ(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(e)}function ib(t){t.q_.forEach(e=>{e.next()})}class ob{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new oh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=oh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class BQ{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class OV{constructor(e){this.serializer=e}hs(e){return us(this.serializer,e)}Ps(e){return e.metadata.exists?MF(this.serializer,e.document,!1):Kt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return bn(e)}}class jQ{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kV(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=pt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new OV(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.hs(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||Ye()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,W.Z)(function*(){const n=yield function gQ(t,e,n,r){return AD.apply(this,arguments)}(e.localStore,new OV(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield mQ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function kV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class LV{constructor(e){this.key=e}}class FV{constructor(e){this.key=e}}class VV{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ye(),this.mutatedKeys=Ye(),this._a=XL(e),this.aa=new ih(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new NV,i=n?n.aa:this.aa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const _=i.get(f),y=rg(this.query,g)?g:null,I=!!_&&this.mutatedKeys.has(_.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;_&&y?_.data.isEqual(y.data)?I!==C&&(r.track({type:3,doc:y}),S=!0):this.ha(_,y)||(r.track({type:2,doc:y}),S=!0,(u&&this._a(y,u)>0||d&&this._a(y,d)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),S=!0):_&&!y&&(r.track({type:1,doc:_}),S=!0,(u||d)&&(a=!0)),S&&(y?(s=s.add(y),o=C?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const f="F"===this.query.limitType?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{aa:s,la:r,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((f,g)=>function(y,I){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return C(y)-C(I)}(f.type,g.type)||this._a(f.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,d=u!==this.sa;return this.sa=u,0!==s.length||d?{snapshot:new oh(this.query,e.aa,o,s,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new NV,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ye(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new FV(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new LV(r))}),n}da(e){this.ia=e.ls,this.oa=Ye();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return oh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class $Q{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HQ{constructor(e){this.key=e,this.Ra=!1}}class zQ{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new js(a=>YL(a),ng),this.fa=new Map,this.ga=new Set,this.pa=new jt(ce.comparator),this.ya=new Map,this.wa=new vD,this.Sa={},this.ba=new Map,this.Da=Ec.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function qQ(t,e){return sb.apply(this,arguments)}function sb(){return sb=(0,W.Z)(function*(t,e){const n=Rb(t);let r,i;const o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const s=yield Jd(n.localStore,zr(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield ab(n,e,r,"current"===a,s.resumeToken),n.isPrimaryClient&&sI(n.remoteStore,s)}return i}),sb.apply(this,arguments)}function ab(t,e,n,r,i){return ub.apply(this,arguments)}function ub(){return ub=(0,W.Z)(function*(t,e,n,r,i){t.va=(g,_,y)=>{return(I=(0,W.Z)(function*(S,N,R,U){let ne=N.view.ca(R);ne.Zi&&(ne=yield tI(S.localStore,N.query,!1).then(({documents:ui})=>N.view.ca(ui,ne)));const ae=U&&U.targetChanges.get(N.targetId),Oe=U&&null!=U.targetMismatches.get(N.targetId),Ht=N.view.applyChanges(ne,S.isPrimaryClient,ae,Oe);return yb(S,N.targetId,Ht.Ta),Ht.snapshot}),function C(S,N,R,U){return I.apply(this,arguments)})(t,g,_,y);var I};const o=yield tI(t.localStore,e,!0),s=new VV(e,o.ls),a=s.ca(o.documents),u=lg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=s.applyChanges(a,t.isPrimaryClient,u);yb(t,n,d.Ta);const f=new $Q(e,n,s);return t.ma.set(e,f),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),ub.apply(this,arguments)}function GQ(t,e){return cb.apply(this,arguments)}function cb(){return cb=(0,W.Z)(function*(t,e){const n=ue(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!ng(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Xd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Tg(n.remoteStore,r.targetId),sh(n,r.targetId)}).catch(qa))):(sh(n,r.targetId),yield Xd(n.localStore,r.targetId,!0))}),cb.apply(this,arguments)}function lb(){return lb=(0,W.Z)(function*(t,e,n){const r=Pb(t);try{const i=yield function(s,a){const u=ue(s),d=rn.now(),f=a.reduce((y,I)=>y.add(I.key),Ye());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=ai(),C=Ye();return u.ss.getEntries(y,f).next(S=>{I=S,I.forEach((N,R)=>{R.isValidDocument()||(C=C.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,I)).next(S=>{g=S;const N=[];for(const R of a){const U=wK(R,g.get(R.key).overlayedDocument);null!=U&&N.push(new $s(R.key,U,LL(U.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,N,a)}).next(S=>{_=S;const N=S.applyToLocalDocumentSet(g,C);return u.documentOverlayCache.saveOverlays(y,S.batchId,N)})}).then(()=>({batchId:_.batchId,changes:tF(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let d=s.Sa[s.currentUser.toKey()];d||(d=new jt(He)),d=d.insert(a,u),s.Sa[s.currentUser.toKey()]=d}(r,i.batchId,n),yield zs(r,i.changes),yield th(r.remoteStore)}catch(i){const o=rh(i,"Failed to persist write");n.reject(o)}}),lb.apply(this,arguments)}function UV(t,e){return db.apply(this,arguments)}function db(){return db=(0,W.Z)(function*(t,e){const n=ue(t);try{const r=yield function fQ(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((f,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(o,f.removedDocuments,g).next(()=>n.qr.addMatchingKeys(o,f.addedDocuments,g)));let y=_.withSequenceNumber(o.currentSequenceNumber);var C,S,N;null!==e.targetMismatches.get(g)?y=y.withResumeToken($n.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(g,y),S=y,N=f,(0===(C=_).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(o,y))});let u=ai(),d=Ye();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(_V(o,s,e.documentUpdates).next(f=>{u=f.us,d=f.cs})),!r.isEqual(Ae.min())){const f=n.qr.getLastRemoteSnapshotVersion(o).next(g=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.ts=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.ya.get(o);s&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?De(s.Ra):i.removedDocuments.size>0&&(De(s.Ra),s.Ra=!1))}),yield zs(n,r,e)}catch(r){yield qa(r)}}),db.apply(this,arguments)}function BV(t,e,n){const r=ue(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=ue(s);u.onlineState=a;let d=!1;u.queries.forEach((f,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&ib(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ZQ(t,e,n){return hb.apply(this,arguments)}function hb(){return hb=(0,W.Z)(function*(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),o=i&&i.key;if(o){let s=new jt(ce.comparator);s=s.insert(o,Kt.newNoDocument(o,Ae.min()));const a=Ye().add(o),u=new cg(Ae.min(),new Map,new jt(He),s,a);yield UV(r,u),r.pa=r.pa.remove(o),r.ya.delete(e),vb(r)}else yield Xd(r.localStore,e,!1).then(()=>sh(r,e,n)).catch(qa)}),hb.apply(this,arguments)}function KQ(t,e){return fb.apply(this,arguments)}function fb(){return fb=(0,W.Z)(function*(t,e){const n=ue(t),r=e.batch.batchId;try{const i=yield function hQ(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const g=d.batch,_=g.keys();let y=x.resolve();return _.forEach(I=>{y=y.next(()=>f.getEntry(u,I)).next(C=>{const S=d.docVersions.get(I);De(null!==S),C.version.compareTo(S)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ye();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);_b(n,r,null),mb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield zs(n,i)}catch(i){yield qa(i)}}),fb.apply(this,arguments)}function QQ(t,e,n){return pb.apply(this,arguments)}function pb(){return pb=(0,W.Z)(function*(t,e,n){const r=ue(t);try{const i=yield function(s,a){const u=ue(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(De(null!==g),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);_b(r,e,n),mb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield zs(r,i)}catch(i){yield qa(i)}}),pb.apply(this,arguments)}function gb(){return gb=(0,W.Z)(function*(t,e){const n=ue(t);iu(n.remoteStore)||ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=ue(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=rh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),gb.apply(this,arguments)}function mb(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function _b(t,e,n){const r=ue(t);let i=r.Sa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function sh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||jV(t,r)})}function jV(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Tg(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),vb(t))}function yb(t,e,n){for(const r of n)r instanceof LV?(t.wa.addReference(r.key,e),JQ(t,r)):r instanceof FV?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||jV(t,r.key)):_e()}function JQ(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.ga.add(r),vb(t))}function vb(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new ce(pt.fromString(e)),r=t.Da.next();t.ya.set(r,new HQ(n)),t.pa=t.pa.insert(n,r),sI(t.remoteStore,new Hs(zr(Ud(n.path)),r,"TargetPurposeLimboResolution",Pi._e))}}function zs(t,e,n){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,W.Z)(function*(t,e,n){const r=ue(t),i=[],o=[],s=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{s.push(r.va(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const f=CD.Qi(u.targetId,d);o.push(f)}}))}),yield Promise.all(s),r.Va.a_(i),yield(a=(0,W.Z)(function*(d,f){const g=ue(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>x.forEach(f,y=>x.forEach(y.ki,I=>g.persistence.referenceDelegate.addReference(_,y.targetId,I)).next(()=>x.forEach(y.qi,I=>g.persistence.referenceDelegate.removeReference(_,y.targetId,I)))))}catch(_){if(!Ga(_))throw _;ee("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const I=g.ts.get(y),S=I.withLastLimboFreeSnapshotVersion(I.snapshotVersion);g.ts=g.ts.insert(y,S)}}}),function u(d,f){return a.apply(this,arguments)})(r.localStore,o))}),Ib.apply(this,arguments)}function XQ(t,e){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,W.Z)(function*(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=yield gV(n.localStore,e);n.currentUser=e,(o=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new J(k.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zs(n,r._s)}var o}),Eb.apply(this,arguments)}function eY(t,e){const n=ue(t),r=n.ya.get(e);if(r&&r.Ra)return Ye().add(r.key);{let i=Ye();const o=n.fa.get(e);if(!o)return i;for(const s of o){const a=n.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function tY(t,e){return wb.apply(this,arguments)}function wb(){return wb=(0,W.Z)(function*(t,e){const n=ue(t),r=yield tI(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&yb(n,e.targetId,i.Ta),i}),wb.apply(this,arguments)}function nY(t,e){return Tb.apply(this,arguments)}function Tb(){return Tb=(0,W.Z)(function*(t,e){const n=ue(t);return vV(n.localStore,e).then(r=>zs(n,r))}),Tb.apply(this,arguments)}function rY(t,e,n,r){return Cb.apply(this,arguments)}function Cb(){return Cb=(0,W.Z)(function*(t,e,n,r){const i=ue(t),o=yield function(a,u){const d=ue(a),f=ue(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.Cn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):x.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===n?yield th(i.remoteStore):"acknowledged"===n||"rejected"===n?(_b(i,e,r||null),mb(i,e),u=e,ue(ue(i.localStore).mutationQueue).Fn(u)):_e(),yield zs(i,o)):ee("SyncEngine","Cannot apply mutation batch with id: "+e)}),Cb.apply(this,arguments)}function Db(){return Db=(0,W.Z)(function*(t,e){const n=ue(t);if(Rb(n),Pb(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield $V(n,r.toArray());n.Ca=!0,yield YD(n.remoteStore,!0);for(const o of i)sI(n.remoteStore,o)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(sh(n,s),Xd(n.localStore,s,!0))),Tg(n.remoteStore,s)}),yield i,yield $V(n,r),function(s){const a=ue(s);a.ya.forEach((u,d)=>{Tg(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new jt(ce.comparator)}(n),n.Ca=!1,yield YD(n.remoteStore,!1)}}),Db.apply(this,arguments)}function $V(t,e,n){return bb.apply(this,arguments)}function bb(){return bb=(0,W.Z)(function*(t,e,n){const r=ue(t),i=[],o=[];for(const s of e){let a;const u=r.fa.get(s);if(u&&0!==u.length){a=yield Jd(r.localStore,zr(u[0]));for(const d of u){const f=r.ma.get(d),g=yield tY(r,f);g.snapshot&&o.push(g.snapshot)}}else{const d=yield yV(r.localStore,s);a=yield Jd(r.localStore,d),yield ab(r,HV(d),s,!1,a.resumeToken)}i.push(a)}return r.Va.a_(o),i}),bb.apply(this,arguments)}function HV(t){return ZL(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function oY(t){return n=ue(t).localStore,ue(ue(n).persistence).Bi();var n}function sY(t,e,n,r){return Ab.apply(this,arguments)}function Ab(){return Ab=(0,W.Z)(function*(t,e,n,r){const i=ue(t);if(i.Ca)return void ee("SyncEngine","Ignoring unexpected query state notification.");const o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield vV(i.localStore,JL(o[0])),a=cg.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,$n.EMPTY_BYTE_STRING);yield zs(i,s,a);break}case"rejected":yield Xd(i.localStore,e,!0),sh(i,e,r);break;default:_e()}}),Ab.apply(this,arguments)}function aY(t,e,n){return Sb.apply(this,arguments)}function Sb(){return Sb=(0,W.Z)(function*(t,e,n){const r=Rb(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){ee("SyncEngine","Adding an already active target "+i);continue}const o=yield yV(r.localStore,i),s=yield Jd(r.localStore,o);yield ab(r,HV(o),s.targetId,!1,s.resumeToken),sI(r.remoteStore,s)}for(const i of n)r.fa.has(i)&&(yield Xd(r.localStore,i,!1).then(()=>{Tg(r.remoteStore,i),sh(r,i)}).catch(qa))}}),Sb.apply(this,arguments)}function Rb(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZQ.bind(null,e),e.Va.a_=VQ.bind(null,e.eventManager),e.Va.Fa=UQ.bind(null,e.eventManager),e}function Pb(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QQ.bind(null,e),e}class Cg{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,W.Z)(function*(){n.serializer=Eg(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return pV(this.persistence,new fV,e.initialUser,this.serializer)}createPersistence(e){return new ID(Jv.jr,this.serializer)}createSharedClientState(e){return new TV}terminate(){var e=this;return(0,W.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Mb extends Cg{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield Pb(r.xa.syncEngine),yield th(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return pV(this.persistence,new fV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new iV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new OZ(n,this.persistence);return new NZ(e.asyncQueue,r)}createPersistence(e){const n=TD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new wD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,DV(),oI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new TV}}class zV extends Mb{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof xD&&(r.sharedClientState.syncEngine={Ys:rY.bind(null,i),Zs:sY.bind(null,i),Xs:aY.bind(null,i),Bi:oY.bind(null,i),Js:nY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var o=(0,W.Z)(function*(s){yield function iY(t,e){return Db.apply(this,arguments)}(r.xa.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=DV();if(!xD.D(n))throw new J(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=TD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xD(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ah{initialize(e,n){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>BV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=XQ.bind(null,r.syncEngine),yield YD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new FQ}createDatastore(e){const n=Eg(e.databaseInfo.databaseId),r=new IQ(e.databaseInfo);return new TQ(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>BV(this.syncEngine,n,0),a=CV.D()?new CV:new _Q,new bQ(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,u,d,f){const g=new zQ(i,o,s,a,u,d);return f&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,W.Z)(function*(r){const i=ue(r);ee("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield eh(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function qV(t,e=10240){let n=0;return{read:()=>(0,W.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,W.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class uI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Dn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class lY{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new jn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,W.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,W.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,W.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const o=yield e.Ka(i);return new BQ(JSON.parse(o),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,W.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,W.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,W.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class dY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,W.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new J(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,W.Z)(function*(s,a){const u=ue(s),d=hg(u.serializer)+"/documents",f={documents:a.map(I=>dg(u.serializer,I))},g=yield u.Co("BatchGetDocuments",d,f,a.length),_=new Map;g.forEach(I=>{const C=function xK(t,e){return"found"in e?function(r,i){De(!!i.found);const o=us(r,i.found.name),s=bn(i.found.updateTime),a=i.found.createTime?bn(i.found.createTime):Ae.min(),u=new pr({mapValue:{fields:i.found.fields}});return Kt.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){De(!!i.missing),De(!!i.readTime);const o=us(r,i.missing),s=bn(i.readTime);return Kt.newNoDocument(o,s)}(t,e):_e()}(u.serializer,I);_.set(C.key.toString(),C)});const y=[];return a.forEach(I=>{const C=_.get(I.toString());De(!!C),y.push(C)}),y}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,W.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=ce.fromPath(i);e.mutations.push(new nD(o,e.precondition(o)))}),yield(r=(0,W.Z)(function*(o,s){const a=ue(o),u=hg(a.serializer)+"/documents",d={writes:s.map(f=>fg(a.serializer,f))};yield a.wo("Commit",u,d)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw _e();n=Ae.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ae.min())?on.exists(!1):on.updateTime(n):on.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ae.min()))throw new J(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(n)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hY{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new OD(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,W.Z)(function*(){const n=new dY(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.ja(o)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!Zp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!mF(n)}return!1}}class fY{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nr.UNAUTHENTICATED,this.clientId=hL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,W.Z)(function*(a){ee("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(ee("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return(0,W.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=rh(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function cI(t,e){return xb.apply(this,arguments)}function xb(){return xb=(0,W.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,W.Z)(function*(o){r.isEqual(o)||(yield gV(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),xb.apply(this,arguments)}function Nb(t,e){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,W.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield kb(t);ee("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>xV(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>xV(e.remoteStore,o)),t._onlineComponents=e}),Ob.apply(this,arguments)}function GV(t){return"FirebaseError"===t.name?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function kb(t){return Lb.apply(this,arguments)}function Lb(){return Lb=(0,W.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{yield cI(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!GV(n))throw n;oi("Error using user provided cache. Falling back to memory cache: "+n),yield cI(t,new Cg)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),yield cI(t,new Cg);return t._offlineComponents}),Lb.apply(this,arguments)}function lI(t){return Fb.apply(this,arguments)}function Fb(){return Fb=(0,W.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),yield Nb(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),yield Nb(t,new ah))),t._onlineComponents}),Fb.apply(this,arguments)}function WV(t){return kb(t).then(e=>e.persistence)}function uh(t){return kb(t).then(e=>e.localStore)}function ZV(t){return lI(t).then(e=>e.remoteStore)}function Vb(t){return lI(t).then(e=>e.syncEngine)}function ch(t){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,W.Z)(function*(t){const e=yield lI(t),n=e.eventManager;return n.onListen=qQ.bind(null,e.syncEngine),n.onUnlisten=GQ.bind(null,e.syncEngine),n}),Ub.apply(this,arguments)}function QV(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(o,s,a,u,d){const f=new uI({next:_=>{s.enqueueAndForget(()=>nb(o,g));const y=_.docs.has(a);!y&&_.fromCache?d.reject(new J(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&u&&"server"===u.source?d.reject(new J(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new ob(Ud(a.path),f,{includeMetadataChanges:!0,J_:!0});return eb(o,g)}(yield ch(t),t.asyncQueue,e,n,r)})),r.promise}function YV(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(o,s,a,u,d){const f=new uI({next:_=>{s.enqueueAndForget(()=>nb(o,g)),_.fromCache&&"server"===u.source?d.reject(new J(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new ob(a,f,{includeMetadataChanges:!0,J_:!0});return eb(o,g)}(yield ch(t),t.asyncQueue,e,n,r)})),r.promise}function JV(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const XV=new Map;function Bb(t,e,n){if(!n)throw new J(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e2(t,e,n,r){if(!0===e&&!0===r)throw new J(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t2(t){if(!ce.isDocumentKey(t))throw new J(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n2(t){if(ce.isDocumentKey(t))throw new J(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dI(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":_e()}function st(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dI(t);throw new J(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function r2(t,e){if(e<=0)throw new J(k.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class i2{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=JV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new J(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i2(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new EZ;switch(r.type){case"firstParty":return new DZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=XV.get(n);r&&(ee("ComponentProvider","Removing Datastore"),XV.delete(n),r.terminate())}(this),Promise.resolve()}}class gr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gr(this.firestore,e,this._query)}}class Qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class cs extends gr{constructor(e,n,r){super(e,n,Ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new ce(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function s2(t,e,...n){if(t=(0,kt.m9)(t),Bb("collection","path",e),t instanceof Dg){const r=pt.fromString(e,...n);return n2(r),new cs(t,null,r)}{if(!(t instanceof Qt||t instanceof cs))throw new J(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return n2(r),new cs(t.firestore,null,r)}}function hI(t,e,...n){if(t=(0,kt.m9)(t),1===arguments.length&&(e=hL.newId()),Bb("doc","path",e),t instanceof Dg){const r=pt.fromString(e,...n);return t2(r),new Qt(t,null,new ce(r))}{if(!(t instanceof Qt||t instanceof cs))throw new J(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return t2(r),new Qt(t.firestore,t instanceof cs?t.converter:null,new ce(r))}}function a2(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),(t instanceof Qt||t instanceof cs)&&(e instanceof Qt||e instanceof cs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function jb(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),t instanceof gr&&e instanceof gr&&t.firestore===e.firestore&&ng(t._query,e._query)&&t.converter===e.converter}class DY{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new OD(this,"async_queue_retry"),this.iu=()=>{const n=oI();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=oI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=oI();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new jn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,W.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Ga(n))throw n;ee("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Dn("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=XD.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&_e()}verifyOperationInProgress(){}uu(){var e=this;return(0,W.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function $b(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class bY{constructor(){this._progressObserver={},this._taskCompletionResolver=new jn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $t extends Dg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new DY,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||u2(this),this._firestoreClient.terminate()}}function mn(t){return t._firestoreClient||u2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function u2(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new tK(t._databaseId,u,t._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,JV(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;t._firestoreClient=new fY(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function c2(t,e,n){const r=new jn;return t.asyncQueue.enqueue((0,W.Z)(function*(){try{yield cI(t,n),yield Nb(t,e),r.resolve()}catch(i){const o=i;if(!GV(o))throw o;oi("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function l2(t){if(t._initialized||t._terminated)throw new J(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ls{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ls($n.fromBase64String(e))}catch(n){throw new J(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ls($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qs{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tc{constructor(e){this._methodName=e}}class fI{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}const FY=/^__.*__$/;class VY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new $s(e,this.data,this.fieldMask,n,this.fieldTransforms):new zd(e,this.data,n,this.fieldTransforms)}}class d2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function h2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class pI{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new pI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return _I(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(h2(this.Iu)&&FY.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class UY{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Eg(e)}pu(e,n,r,i=!1){return new pI({Iu:e,methodName:n,gu:r,path:Zt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cc(t){const e=t._freezeSettings(),n=Eg(t._databaseId);return new UY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gI(t,e,n,r,i,o={}){const s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);Gb("Data must be an object, but it was:",s,r);const a=g2(r,s);let u,d;if(o.merge)u=new si(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const g of o.mergeFields){const _=Sg(e,g,n);if(!s.contains(_))throw new J(k.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);_2(f,_)||f.push(_)}u=new si(f),d=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=s.fieldTransforms;return new VY(new pr(a),u,d)}class Ag extends Tc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ag}}function f2(t,e,n){return new pI({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Hb extends Tc{_toFieldTransform(e){return new sg(e.path,new $d)}isEqual(e){return e instanceof Hb}}class BY extends Tc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=f2(this,e,!0),r=this.yu.map(o=>Dc(o,n)),i=new pc(r);return new sg(e.path,i)}isEqual(e){return this===e}}class jY extends Tc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=f2(this,e,!0),r=this.yu.map(o=>Dc(o,n)),i=new gc(r);return new sg(e.path,i)}isEqual(e){return this===e}}class $Y extends Tc{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Hd(e.serializer,oF(e.serializer,this.wu));return new sg(e.path,n)}isEqual(e){return this===e}}function zb(t,e,n,r){const i=t.pu(1,e,n);Gb("Data must be an object, but it was:",i,r);const o=[],s=pr.empty();Wa(r,(u,d)=>{const f=mI(e,u,n);d=(0,kt.m9)(d);const g=i.Ru(f);if(d instanceof Ag)o.push(f);else{const _=Dc(d,g);null!=_&&(o.push(f),s.set(f,_))}});const a=new si(o);return new d2(s,a,i.fieldTransforms)}function qb(t,e,n,r,i,o){const s=t.pu(1,e,n),a=[Sg(e,r,n)],u=[i];if(o.length%2!=0)throw new J(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(Sg(e,o[_])),u.push(o[_+1]);const d=[],f=pr.empty();for(let _=a.length-1;_>=0;--_)if(!_2(d,a[_])){const y=a[_];let I=u[_];I=(0,kt.m9)(I);const C=s.Ru(y);if(I instanceof Ag)d.push(y);else{const S=Dc(I,C);null!=S&&(d.push(y),f.set(y,S))}}const g=new si(d);return new d2(f,g,s.fieldTransforms)}function p2(t,e,n,r=!1){return Dc(n,t.pu(r?4:3,e))}function Dc(t,e){if(m2(t=(0,kt.m9)(t)))return Gb("Unsupported field value:",e,t),g2(t,e);if(t instanceof Tc)return function(r,i){if(!h2(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=Dc(a,i.Vu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,kt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return oF(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=rn.fromDate(r);return{timestampValue:Gd(i.serializer,o)}}if(r instanceof rn){const o=new rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gd(i.serializer,o)}}if(r instanceof fI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ls)return{bytesValue:bF(i.serializer,r._byteString)};if(r instanceof Qt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${dI(r)}`)}(t,e)}function g2(t,e){const n={};return AL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(t,(r,i)=>{const o=Dc(i,e.Eu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function m2(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof rn||t instanceof fI||t instanceof ls||t instanceof Qt||t instanceof Tc)}function Gb(t,e,n){if(!m2(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=dI(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Sg(t,e,n){if((e=(0,kt.m9)(e))instanceof qs)return e._internalPath;if("string"==typeof e)return mI(t,e);throw _I("Field path arguments must be of type string or ",t,!1,void 0,n)}const HY=new RegExp("[~\\*/\\[\\]]");function mI(t,e,n){if(e.search(HY)>=0)throw _I(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qs(...e.split("."))._internalPath}catch{throw _I(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _I(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new J(k.INVALID_ARGUMENT,a+t+u)}function _2(t,e){return t.some(n=>n.isEqual(e))}class Rg{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class zY extends Rg{data(){return super.data()}}function yI(t,e){return"string"==typeof e?mI(t,e):e instanceof qs?e._internalPath:e._delegate._internalPath}function y2(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wb{}class Pg extends Wb{}function su(t,e,...n){let r=[];e instanceof Wb&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof lh).length,a=o.filter(u=>u instanceof Mg).length;if(s>1||s>0&&a>0)throw new J(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Mg extends Pg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mg(e,n,r)}_apply(e){const n=this._parse(e);return w2(e._query,n),new gr(e.firestore,e.converter,eD(e._query,n))}_parse(e){const n=Cc(e.firestore);return function(o,s,a,u,d,f,g){let _;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new J(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){E2(g,f);const y=[];for(const I of g)y.push(I2(u,o,I));_={arrayValue:{values:y}}}else _=I2(u,o,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||E2(g,f),_=p2(a,"where",g,"in"===f||"not-in"===f);return at.create(d,f,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class lh extends Wb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:At.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)w2(s,u),s=eD(s,u)}(e._query,n),new gr(e.firestore,e.converter,eD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zb extends Pg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Zb(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new J(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eg(o,s)}(e._query,this._field,this._direction);return new gr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Bs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class vI extends Pg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new vI(e,n,r)}_apply(e){return new gr(e.firestore,e.converter,Uv(e._query,this._limit,this._limitType))}}class II extends Pg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new II(e,n,r)}_apply(e){const n=v2(e,this.type,this._docOrFields,this._inclusive);return new gr(e.firestore,e.converter,(o=n,new Bs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class EI extends Pg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new EI(e,n,r)}_apply(e){const n=v2(e,this.type,this._docOrFields,this._inclusive);return new gr(e.firestore,e.converter,(o=n,new Bs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function v2(t,e,n,r){if(n[0]=(0,kt.m9)(n[0]),n[0]instanceof Rg)return function(o,s,a,u,d){if(!u)throw new J(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of Bd(o))if(g.field.isKeyField())f.push(hc(s,u.key));else{const _=u.data.field(g.field);if(xv(_))throw new J(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=g.field.canonicalString();throw new J(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(_)}return new Xa(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Cc(t.firestore);return function(s,a,u,d,f,g){const _=s.explicitOrderBy;if(f.length>_.length)throw new J(k.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let I=0;I<f.length;I++){const C=f[I];if(_[I].field.isKeyField()){if("string"!=typeof C)throw new J(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof C}`);if(!XC(s)&&-1!==C.indexOf("/"))throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${C}' contains a slash.`);const S=s.path.child(pt.fromString(C));if(!ce.isDocumentKey(S))throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const N=new ce(S);y.push(hc(a,N))}else{const S=p2(u,d,C);y.push(S)}}return new Xa(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function I2(t,e,n){if("string"==typeof(n=(0,kt.m9)(n))){if(""===n)throw new J(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XC(e)&&-1!==n.indexOf("/"))throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pt.fromString(n));if(!ce.isDocumentKey(r))throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hc(t,new ce(r))}if(n instanceof Qt)return hc(t,n._key);throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dI(n)}.`)}function E2(t,e){if(!Array.isArray(t)||0===t.length)throw new J(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w2(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(k.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Kb{convertValue(e,n="none"){switch(Ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wa(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new fI(gn(e.latitude),gn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nv(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qp(e));default:return null}}convertTimestamp(e){const n=Za(e);return new rn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pt.fromString(e);De(LF(r));const i=new Ka(r.get(1),r.get(3)),o=new ce(r.popFirst(5));return i.isEqual(n)||Dn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function wI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class XY extends Kb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ls(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}class bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gs extends Rg{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xg extends Gs{data(e={}){return super.data(e)}}class au{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xg(this._firestore,this._userDataWriter,r.key,r,new bc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new xg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new xg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return 0!==a.type&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:tJ(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tJ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}function C2(t,e){return t instanceof Gs&&e instanceof Gs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof au&&e instanceof au&&t._firestore===e._firestore&&jb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class uu extends Kb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ls(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function D2(t,e,n){t=st(t,Qt);const r=st(t.firestore,$t),i=wI(t.converter,e,n);return dh(r,[gI(Cc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,on.none())])}function b2(t,e,n,...r){t=st(t,Qt);const i=st(t.firestore,$t),o=Cc(i);let s;return s="string"==typeof(e=(0,kt.m9)(e))||e instanceof qs?qb(o,"updateDoc",t._key,e,n,r):zb(o,"updateDoc",t._key,e),dh(i,[s.toMutation(t._key,on.exists(!0))])}function A2(t,...e){var n,r,i;t=(0,kt.m9)(t);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||$b(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if($b(e[s])){const g=e[s];e[s]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[s+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[s+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,f;if(t instanceof Qt)d=st(t.firestore,$t),f=Ud(t._key.path),u={next:g=>{e[s]&&e[s](Qb(d,t,g))},error:e[s+1],complete:e[s+2]};else{const g=st(t,gr);d=st(g.firestore,$t),f=g._query;const _=new uu(d);u={next:y=>{e[s]&&e[s](new au(d,_,g,y))},error:e[s+1],complete:e[s+2]},y2(t._query)}return function(_,y,I,C){const S=new uI(C),N=new ob(y,S,I);return _.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return eb(yield ch(_),N)})),()=>{S.Na(),_.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return nb(yield ch(_),N)}))}}(mn(d),f,a,u)}function dh(t,e){return function(r,i){const o=new jn;return r.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function WQ(t,e,n){return lb.apply(this,arguments)}(yield Vb(r),i,o)})),o.promise}(mn(t),e)}function Qb(t,e,n){const r=n.docs.get(e._key),i=new uu(t);return new Gs(t,i,e._key,r,new bc(n.hasPendingWrites,n.fromCache),e.converter)}const vJ={maxAttempts:5};class S2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Cc(e)}set(e,n,r){this._verifyNotCommitted();const i=cu(e,this._firestore),o=wI(i.converter,n,r),s=gI(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,on.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=cu(e,this._firestore);let s;return s="string"==typeof(n=(0,kt.m9)(n))||n instanceof qs?qb(this._dataReader,"WriteBatch.update",o._key,n,r,i):zb(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=cu(e,this._firestore);return this._mutations=this._mutations.concat(new qd(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cu(t,e){if((t=(0,kt.m9)(t)).firestore!==e)throw new J(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class IJ extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Cc(n)}get(n){const r=cu(n,this._firestore),i=new XY(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return _e();const s=o[0];if(s.isFoundDocument())return new Rg(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Rg(this._firestore,i,r._key,null,r.converter);throw _e()})}set(n,r,i){const o=cu(n,this._firestore),s=wI(o.converter,r,i),a=gI(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=cu(n,this._firestore);let a;return a="string"==typeof(r=(0,kt.m9)(r))||r instanceof qs?qb(this._dataReader,"Transaction.update",s._key,r,i,o):zb(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=cu(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=cu(e,this._firestore),r=new uu(this._firestore);return super.get(e).then(i=>new Gs(this._firestore,r,n._key,i._document,new bc(!1,!1),n.converter))}}function Jb(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function x2(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function N2(){if(!function XZ(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Md=Ed.SDK_VERSION,(0,Ed._registerComponent)(new q1.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new $t(new TZ(r.getProvider("auth-internal")),new bZ(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(d.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Ed.registerVersion)(cL,"4.4.0",e),(0,Ed.registerVersion)(cL,"4.4.0","esm2017")}();class Ng{constructor(e){this._delegate=e}static fromBase64String(e){return N2(),new Ng(ls.fromBase64String(e))}static fromUint8Array(e){return x2(),new Ng(ls.fromUint8Array(e))}toBase64(){return N2(),this._delegate.toBase64()}toUint8Array(){return x2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Xb(t){return function PJ(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class MJ{enableIndexedDbPersistence(e,n){return function SY(t,e){l2(t=st(t,$t));const n=mn(t);if(n._uninitializedComponentsProvider)throw new J(k.FAILED_PRECONDITION,"SDK cache is already specified.");oi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new ah;return c2(n,i,new Mb(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function RY(t){l2(t=st(t,$t));const e=mn(t);if(e._uninitializedComponentsProvider)throw new J(k.FAILED_PRECONDITION,"SDK cache is already specified.");oi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new ah;return c2(e,r,new zV(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function PY(t){if(t._initialized&&!t._terminated)throw new J(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new jn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{yield(n=(0,W.Z)(function*(i){if(!To.D())return Promise.resolve();const o=i+"main";yield To.delete(o)}),function r(i){return n.apply(this,arguments)})(TD(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class O2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ka||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&oi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function o2(t,e,n,r={}){var i;const o=(t=st(t,Dg))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=nr.MOCK_USER;else{a=(0,kt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new J(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nr(d)}t._authCredentials=new wZ(new lL(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function xY(t){return function pY(t){return t.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield WV(t),n=yield ZV(t);return e.setNetworkEnabled(!0),function(i){const o=ue(i);return o.C_.delete(0),wg(o)}(n)}))}(mn(t=st(t,$t)))}(this._delegate)}disableNetwork(){return function NY(t){return function gY(t){return t.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield WV(t),n=yield ZV(t);return e.setNetworkEnabled(!1),(r=(0,W.Z)(function*(o){const s=ue(o);s.C_.add(0),yield eh(s),s.M_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(mn(t=st(t,$t)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,e2("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function MY(t){return function(n){const r=new jn;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function YQ(t,e){return gb.apply(this,arguments)}(yield Vb(n),r)})),r.promise}(mn(t=st(t,$t)))}(this._delegate)}onSnapshotsInSync(e){return function lJ(t,e){return function yY(t,e){const n=new uI(e);return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield ch(t),o=n,ue(i).q_.add(o),void o.next();var i,o})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield ch(t),o=n,void ue(i).q_.delete(o);var i,o}))}}(mn(t=st(t,$t)),$b(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hh(this,s2(this._delegate,e))}catch(n){throw qr(n,"collection()","Firestore.collection()")}}doc(e){try{return new eo(this,hI(this._delegate,e))}catch(n){throw qr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gr(this,function CY(t,e){if(t=st(t,Dg),Bb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(k.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gr(t,null,(r=e,new Bs(pt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw qr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function EJ(t,e,n){t=st(t,$t);const r=Object.assign(Object.assign({},vJ),n);return function(o){if(o.maxAttempts<1)throw new J(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new jn;return o.asyncQueue.enqueueAndForget((0,W.Z)(function*(){const d=yield function KV(t){return lI(t).then(e=>e.datastore)}(o);new hY(o.asyncQueue,d,a,s,u).run()})),u.promise}(mn(t),i=>e(new IJ(t,i)),r)}(this._delegate,n=>e(new k2(this,n)))}batch(){return mn(this._delegate),new L2(new S2(this._delegate,e=>dh(this._delegate,e)))}loadBundle(e){return function OY(t,e){const n=mn(t=st(t,$t)),r=new bY;return function vY(t,e,n,r){const i=function(s,a){let u;return u="string"==typeof s?yF().encode(s):s,f=function(f,g){if(f instanceof Uint8Array)return qV(f,g);if(f instanceof ArrayBuffer)return qV(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new lY(f,a);var f}(n,Eg(e));t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){!function uY(t,e,n){const r=ue(t);var i;(i=(0,W.Z)(function*(s,a,u){try{const d=yield a.getMetadata();if(yield function(I,C){const S=ue(I),N=bn(C.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",R=>S.Kr.getBundleMetadata(R,C.id)).then(R=>!!R&&R.createTime.compareTo(N)>=0)}(s.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(I=d).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);u._updateProgress(kV(d));const f=new jQ(d,s.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield f.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const _=yield f.complete();return yield zs(s,_.ra,void 0),yield function(I,C){const S=ue(I);return S.persistence.runTransaction("Save bundle","readwrite",N=>S.Kr.saveBundleMetadata(N,C))}(s.localStore,d),u._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return oi("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var I}),function o(s,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Vb(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function kY(t,e){return function IY(t,e){return t.asyncQueue.enqueue((0,W.Z)(function*(){return function(r,i){const o=ue(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield uh(t),e)}))}(mn(t=st(t,$t)),e).then(n=>n?new gr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Gr(this,n):null)}}class CI extends Kb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ng(new ls(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return eo.forKey(n,this.firestore,null)}}class k2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new CI(e)}get(e){const n=Sc(e);return this._delegate.get(n).then(r=>new Og(this._firestore,new Gs(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Sc(e);return r?(Jb("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Sc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Sc(e);return this._delegate.delete(n),this}}class L2{constructor(e){this._delegate=e}set(e,n,r){const i=Sc(e);return r?(Jb("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Sc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Sc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ac{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new xg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kg(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ac.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Ac(e,new CI(e),n),i.set(n,o)),o}}Ac.INSTANCES=new WeakMap;class eo{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new CI(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new eo(n,new Qt(n._delegate,r,new ce(e)))}static forKey(e,n,r){return new eo(n,new Qt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hh(this.firestore,s2(this._delegate,e))}catch(n){throw qr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,kt.m9)(e))instanceof Qt&&a2(this._delegate,e)}set(e,n){n=Jb("DocumentReference.set",n);try{return n?D2(this._delegate,e,n):D2(this._delegate,e)}catch(r){throw qr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?b2(this._delegate,e):b2(this._delegate,e,n,...r)}catch(i){throw qr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function uJ(t){return dh(st(t.firestore,$t),[new qd(t._key,on.none())])}(this._delegate)}onSnapshot(...e){const n=F2(e),r=V2(e,i=>new Og(this.firestore,new Gs(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return A2(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function rJ(t){t=st(t,Qt);const e=st(t.firestore,$t),n=mn(e),r=new uu(e);return function mY(t,e){const n=new jn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(o,s,a){try{const u=yield function(f,g){const _=ue(f);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,g))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=rh(u,`Failed to get document '${s} from cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield uh(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Gs(e,r,t._key,i,new bc(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function iJ(t){t=st(t,Qt);const e=st(t.firestore,$t);return QV(mn(e),t._key,{source:"server"}).then(n=>Qb(e,t,n))}(this._delegate):function nJ(t){t=st(t,Qt);const e=st(t.firestore,$t);return QV(mn(e),t._key).then(n=>Qb(e,t,n))}(this._delegate),n.then(r=>new Og(this.firestore,new Gs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new eo(this.firestore,this._delegate.withConverter(e?Ac.getInstance(this.firestore,e):null))}}function qr(t,e,n){return t.message=t.message.replace(e,n),t}function F2(t){for(const e of t)if("object"==typeof e&&!Xb(e))return e;return{}}function V2(t,e){var n,r;let i;return i=Xb(t[0])?t[0]:Xb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Og{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new eo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return C2(this._delegate,e._delegate)}}class kg extends Og{data(e){const n=this._delegate.data(e);return this._delegate._converter||function IZ(t,e){t||_e()}(void 0!==n),n}}class Gr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new CI(e)}where(e,n,r){try{return new Gr(this.firestore,su(this._delegate,function qY(t,e,n){const r=e,i=yI("where",t);return Mg._create(i,r,n)}(e,n,r)))}catch(i){throw qr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Gr(this.firestore,su(this._delegate,function GY(t,e="asc"){const n=e,r=yI("orderBy",t);return Zb._create(r,n)}(e,n)))}catch(r){throw qr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gr(this.firestore,su(this._delegate,function WY(t){return r2("limit",t),vI._create("limit",t,"F")}(e)))}catch(n){throw qr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Gr(this.firestore,su(this._delegate,function ZY(t){return r2("limitToLast",t),vI._create("limitToLast",t,"L")}(e)))}catch(n){throw qr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gr(this.firestore,su(this._delegate,function KY(...t){return II._create("startAt",t,!0)}(...e)))}catch(n){throw qr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gr(this.firestore,su(this._delegate,function QY(...t){return II._create("startAfter",t,!1)}(...e)))}catch(n){throw qr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gr(this.firestore,su(this._delegate,function YY(...t){return EI._create("endBefore",t,!1)}(...e)))}catch(n){throw qr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gr(this.firestore,su(this._delegate,function JY(...t){return EI._create("endAt",t,!0)}(...e)))}catch(n){throw qr(n,"endAt()","Query.endAt()")}}isEqual(e){return jb(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function sJ(t){t=st(t,gr);const e=st(t.firestore,$t),n=mn(e),r=new uu(e);return function _Y(t,e){const n=new jn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(o,s,a){try{const u=yield tI(o,s,!0),d=new VV(s,u.ls),f=d.ca(u.documents),g=d.applyChanges(f,!1);a.resolve(g.snapshot)}catch(u){const d=rh(u,`Failed to execute query '${s} against cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield uh(t),e,n);var r})),n.promise}(n,t._query).then(i=>new au(e,r,t,i))}(this._delegate):"server"===e?.source?function aJ(t){t=st(t,gr);const e=st(t.firestore,$t),n=mn(e),r=new uu(e);return YV(n,t._query,{source:"server"}).then(i=>new au(e,r,t,i))}(this._delegate):function oJ(t){t=st(t,gr);const e=st(t.firestore,$t),n=mn(e),r=new uu(e);return y2(t._query),YV(n,t._query).then(i=>new au(e,r,t,i))}(this._delegate),n.then(r=>new eA(this.firestore,new au(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=F2(e),r=V2(e,i=>new eA(this.firestore,new au(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return A2(this._delegate,n,r)}withConverter(e){return new Gr(this.firestore,this._delegate.withConverter(e?Ac.getInstance(this.firestore,e):null))}}class NJ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new kg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Gr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new kg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new NJ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new kg(this._firestore,r))})}isEqual(e){return C2(this._delegate,e._delegate)}}class hh extends Gr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new eo(this.firestore,e):null}doc(e){try{return new eo(this.firestore,void 0===e?hI(this._delegate):hI(this._delegate,e))}catch(n){throw qr(n,"doc()","CollectionReference.doc()")}}add(e){return function cJ(t,e){const n=st(t.firestore,$t),r=hI(t),i=wI(t.converter,e);return dh(n,[gI(Cc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new eo(this.firestore,n))}isEqual(e){return a2(this._delegate,e._delegate)}withConverter(e){return new hh(this.firestore,this._delegate.withConverter(e?Ac.getInstance(this.firestore,e):null))}}function Sc(t){return st(t,Qt)}class tA{constructor(...e){this._delegate=new qs(...e)}static documentId(){return new tA(Zt.keyField().canonicalString())}isEqual(e){return(e=(0,kt.m9)(e))instanceof qs&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function TJ(){return new Hb("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rc(e)}static delete(){const e=function wJ(){return new Ag("deleteField")}();return e._methodName="FieldValue.delete",new Rc(e)}static arrayUnion(...e){const n=function CJ(...t){return new BY("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Rc(n)}static arrayRemove(...e){const n=function DJ(...t){return new jY("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Rc(n)}static increment(e){const n=function bJ(t){return new $Y("increment",t)}(e);return n._methodName="FieldValue.increment",new Rc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OJ={Firestore:O2,GeoPoint:fI,Timestamp:rn,Blob:Ng,Transaction:k2,WriteBatch:L2,DocumentReference:eo,DocumentSnapshot:Og,Query:Gr,QueryDocumentSnapshot:kg,QuerySnapshot:eA,CollectionReference:hh,FieldPath:tA,FieldValue:Rc,setLogLevel:function xJ(t){!function vZ(t){za.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function U2(t,e){return function FJ(t,e=S1){return new zt(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function nA(t,e){return U2(t,e).pipe(Ce(n=>({payload:n,type:"query"})))}!function LJ(t){(function kJ(t,e){t.INTERNAL.registerComponent(new q1.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OJ)))})(t,(e,n)=>new O2(e,n,new MJ)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(ja.Z);class B2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=G2(r,n);return new H2(i,o,this.afs)}snapshotChanges(){return function VJ(t,e){return U2(t,e).pipe(Vy(void 0),J0(),Ce(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ai)}valueChanges(e={}){return this.snapshotChanges().pipe(Ce(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return nn(this.ref.get(e)).pipe(Ai)}}function DI(t,e){return nA(t,e).pipe(Vy(void 0),J0(),Ce(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=o.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function j2(t,e,n){return DI(t,n).pipe(By((r,i)=>function UJ(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function BJ(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return rA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return rA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),function d7(t,e=Gn){return t=t??h7,Ie((n,r)=>{let i,o=!0;n.subscribe(be(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}(),Ce(r=>r.map(i=>({type:i.type,payload:i}))))}function rA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function $2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class H2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=DI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Ce(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Vy(void 0),J0(),vo(([r,i])=>i.length>0||!r),Ce(([,r])=>r),Ai)}auditTrail(e){return this.stateChanges(e).pipe(By((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=$2(e);return j2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ai)}valueChanges(e={}){return nA(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ai)}get(e){return nn(this.query.get(e)).pipe(Ai)}add(e){return this.ref.add(e)}doc(e){return new B2(this.ref.doc(e),this.afs)}}class jJ{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?DI(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(n=>n.filter(r=>e.indexOf(r.type)>-1)),vo(n=>n.length>0),Ai):DI(this.query,this.afs.schedulers.outsideAngular).pipe(Ai)}auditTrail(e){return this.stateChanges(e).pipe(By((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=$2(e);return j2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ai)}valueChanges(e={}){return nA(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ai)}get(e){return nn(this.query.get(e)).pipe(Ai)}}const z2=new he("angularfire2.enableFirestorePersistence"),q2=new he("angularfire2.firestore.persistenceSettings"),$J=new he("angularfire2.firestore.settings"),HJ=new he("angularfire2.firestore.use-emulator");function G2(t,e=(n=>n)){return{query:e(t),ref:t}}let iA=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,d,f,g,_,y,I,C,S,N,R){this.schedulers=u;const U=Q0(n,a,r),ne=f;g&&H1(U,a,_,I,C,S,y,N),[this.firestore,this.persistenceEnabled$]=N1(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{const ae=a.runOutsideAngular(()=>U.firestore());if(o&&ae.settings(o),ne&&ae.useEmulator(...ne),i&&!Ny(s)){const Oe=()=>{try{return nn(ae.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(Ht){return typeof console<"u"&&console.warn(Ht),Ne(!1)}};return[ae,a.runOutsideAngular(Oe)]}return[ae,Ne(!1)]},[o,ne,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:o,query:s}=G2(i,r),a=this.schedulers.ngZone.run(()=>o);return new H2(a,s,this)}collectionGroup(n,r){const i=r||(s=>s),o=this.firestore.collectionGroup(n);return new jJ(i(o),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new B2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(re(tv),re(nv,8),re(z2,8),re($J,8),re($o),re(ft),re(M1),re(q2,8),re(HJ,8),re(z1,8),re(F1,8),re(V1,8),re(U1,8),re(B1,8),re(j1,8),re($1,8),re(R1,8))};static \u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),zJ=(()=>{class t{constructor(){ja.Z.registerVersion("angularfire",K0.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:z2,useValue:!0},{provide:q2,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=gi({type:t});static \u0275inj=ki({providers:[iA]})}return t})(),W2=(()=>{class t{constructor(n){this.firestore=n}getTratte(){return this.firestore.collection("tratte").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||t)(re(iA))};static#t=this.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qJ(t,e){1&t&&(le(0,"div",12),we(1,"Inspiration"),de())}function GJ(t,e){if(1&t&&(le(0,"div",12),we(1),de()),2&t){const n=La().$implicit;ri(),Kf(n.note)}}function WJ(t,e){if(1&t){const n=Yw();le(0,"article")(1,"div",4)(2,"div",5)(3,"h3")(4,"a",6),ka("click",function(){const o=Wc(n).$implicit;return ga(La().sendInfo(o.id))}),we(5),de()(),Zo(6,qJ,2,0,"div",7)(7,GJ,2,1,"div",7),de(),le(8,"div",8),we(9),le(10,"a",6),ka("click",function(){const o=Wc(n).$implicit;return ga(La().sendInfo(o.id))}),we(11,"Playlist"),tn(12,"span",9),de()(),tn(13,"div",10)(14,"div",11),de()()}if(2&t){const n=e.$implicit;ri(),function LM(t,e,n){Go(Ol(B(),t,e,n))}("background: url(",n.srcimg,") center no-repeat;"),ri(4),tT("",n.partenza," - ",n.destinazione,""),ri(),Ps("ngIf",""==n.note),ri(),Ps("ngIf",""!=n.note),ri(2),nT(" Vivi il viaggio da ",n.partenza," a ",n.destinazione," (",n.note,") con questa playlist ")}}let ZJ=(()=>{class t{constructor(n,r){this.firebase=n,this.router=r,this.listaTratte=[],this.sendID=new A,this.sendID$=this.sendID.asObservable()}ngOnInit(){this.firebase.getTratte().subscribe(n=>{this.listaTratte=n})}sendInfo(n){this.sendID.next(n),this.router.navigateByUrl(`/tratta/${n}`)}static#e=this.\u0275fac=function(r){return new(r||t)(Me(W2),Me(bi))};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-tratte"]],decls:9,vars:1,consts:[["id","picture"],[2,"width","auto"],["role","alert","id","disclaimer",1,"alert","alert-warning"],[4,"ngFor","ngForOf"],[1,"blog-card","spring-fever"],[1,"title-content"],[3,"click"],["class","intro",4,"ngIf"],[1,"card-info"],[1,"licon","icon-arr","icon-black"],[1,"gradient-overlay"],[1,"color-overlay"],[1,"intro"]],template:function(r,i){1&r&&(tn(0,"div",0),le(1,"article",1)(2,"div",2)(3,"p")(4,"strong"),we(5,"Disclaimer :"),de(),we(6," Le canzoni presentate su SpotiRFI sono state scelte esclusivamente sulla base dell'adeguatezza del titolo con il nome delle stazioni ferroviarie. La scelta di una canzone non implica un'approvazione o un'adesione al testo, al significato o a qualsiasi altro aspetto della canzone stessa. Le canzoni sono fornite solo a scopo di intrattenimento e non intendono rappresentare o riflettere le opinioni di SpotiRFI. "),de()()(),le(7,"section"),Zo(8,WJ,15,10,"article",3),de()),2&r&&(ri(8),Ps("ngForOf",i.listaTratte))},dependencies:[JT,XT],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";@import"//fonts.googleapis.com/css?family=Abril+Fatface|Droid+Serif:400,700,400italic,700italic";#picture[_ngcontent-%COMP%]{background-image:url(https://images.lonelyplanetitalia.it/uploads/treno-sicilia?q=80&p=slider&s=d688b722008ebe2d69bad96ef1c4624f);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:bottom center;background-attachment:fixed;z-index:0}article[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;margin:auto auto 4rem;font-family:Merienda,cursive;width:500px}section[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}#disclaimer[_ngcontent-%COMP%]{margin:4em 1em 3.5em;text-align:justify}p[_ngcontent-%COMP%]{font-size:1.2em}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{background:linear-gradient(to bottom,rgba(0,5,10,.4) 0%,rgba(0,0,0,0) 100%);font-family:"Droid Serif",serif}.blog-card[_ngcontent-%COMP%]{max-width:550px;width:100%;height:500px;position:relative;font-family:"Droid Serif",serif;color:#fff;top:20%;right:0;left:0;margin:0 auto;overflow:hidden;border-radius:0;box-shadow:0 10px 20px -9px #00000080;text-align:center;transition:all .4s;background-size:100%}.blog-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:all .2s;cursor:pointer}.blog-card[_ngcontent-%COMP%]   .color-overlay[_ngcontent-%COMP%]{background:rgba(64,84,94,.5);width:550px;height:500px;position:absolute;z-index:10;top:0;left:0;transition:background .3s cubic-bezier(.33,.66,.66,1)}.blog-card[_ngcontent-%COMP%]   .gradient-overlay[_ngcontent-%COMP%]{background-image:linear-gradient(transparent 0%,rgba(0,0,0,.6) 21%);width:550px;height:500px;position:absolute;top:350px;left:0;z-index:15}.blog-card[_ngcontent-%COMP%]:hover{box-shadow:0 18px 20px -9px #000a1ebf}.blog-card[_ngcontent-%COMP%]:hover   .card-info[_ngcontent-%COMP%]{opacity:1;bottom:100px}.blog-card[_ngcontent-%COMP%]:hover   .color-overlay[_ngcontent-%COMP%]{background:rgba(64,64,70,.8)}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%]{margin-top:70px}.title-content[_ngcontent-%COMP%]{text-align:center;margin:170px 0 0;position:absolute;z-index:20;width:100%;top:0;left:0;transition:all .6s}.blog-card[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_changeLetter .3s 1 linear;width:80%}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-size:1.9em;font-weight:400;letter-spacing:1px;font-family:Abril Fatface,serif;margin-bottom:0;display:inline-block}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-shadow:0px 0px 10px rgba(0,0,0,.5);transition:all .2s}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-shadow:0px 8px 20px rgba(0,0,0,.95)}h3[_ngcontent-%COMP%]:after{content:" ";display:block;width:10%;height:2px;margin:20px auto;border:0;background:#BDA26B;transition:all .2s}@keyframes _ngcontent-%COMP%_changeLetter{0%{width:10%}to{width:80%}}.intro[_ngcontent-%COMP%]{width:170px;margin:0 auto;color:#ddd;font-style:italic;line-height:18px}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ddd}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.card-info[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;position:absolute;bottom:-40px;left:0;margin:0 auto;padding:0 50px;font-style:16px;line-height:24px;z-index:20;opacity:0;transition:bottom .64s,opacity .63s cubic-bezier(.33,.66,.66,1)}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;width:100px;margin:15px auto;background:#fff;color:#444;padding:3px 10px;border-radius:2px;font-size:.8em}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#8e7c49;color:#fff}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{filter:brightness(10);opacity:1}.licon[_ngcontent-%COMP%]{position:relative;width:23px;height:15px;display:inline-block;vertical-align:middle}.licon[_ngcontent-%COMP%]:before{content:"";background:url(https://rawcdn.githack.com/Nodws/NodPen/ffad95aa5244b4b09a3c7c1508a018959bbedb7e/postItem/licons.svg?) -2px -6px no-repeat;background-size:250px;width:26px;height:20px;display:inline-block;vertical-align:middle;position:absolute;top:-3px;left:0}.icon-black[_ngcontent-%COMP%]{filter:brightness(0);opacity:.6}@media (max-width:750px){.utility-info[_ngcontent-%COMP%]{text-align:center}.utility-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;margin:0;box-sizing:border-box}.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:49%;display:inline-block;box-sizing:border-box;margin:0}}@media (max-width:500px){.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type{width:100%}.card-info[_ngcontent-%COMP%]{display:none}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%], .title-content[_ngcontent-%COMP%]{margin-top:40px}.blog-card[_ngcontent-%COMP%]{height:300px}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3em}.intro[_ngcontent-%COMP%]{font-size:.8em}}#profile-badges[_ngcontent-%COMP%]:after{content:"BRO";font-family:"Lato","Lucida Grande","Lucida Sans Unicode",Tahoma,Sans-Serif;font-size:13px;font-weight:500;text-transform:uppercase;padding:1px 4px;color:#000!important;border-radius:3px;position:relative;top:-2px;text-shadow:none!important;white-space:nowrap;letter-spacing:0;background:#FFDD40}.profile-header[_ngcontent-%COMP%]{background:#333 url(https://images.unsplash.com/photo-1435783099294-283725c37230?dpr=1&auto=compress,format&fit=crop&w=1376&h=635&q=80&cs=tinysrgb&crop=&bg=) top center no-repeat;background-size:cover;font-size:3em;position:relative}.profile-header[_ngcontent-%COMP%]:after{position:absolute;content:"";display:block;width:100%;height:100%;top:0;left:0;background:rgba(23,23,31,.42);z-index:0}#profile-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Abril Fatface,serif;font-size:1.2em}.profile-links[_ngcontent-%COMP%]   a[href*="nodws.com"][_ngcontent-%COMP%]:before{content:"\\2616";color:#0a45b5;padding-right:3px}.profile-links[_ngcontent-%COMP%]   a[href*=twitter][_ngcontent-%COMP%]:before{content:"\\1f426";color:#08c}.profile-links[_ngcontent-%COMP%]   a[href*=dribbble][_ngcontent-%COMP%]:before{content:"\\26be";color:#d055bf}#following-this-user[_ngcontent-%COMP%]{pointer-events:none}#follow-this-user[_ngcontent-%COMP%]{font-size:1.2em;border-color:#359ef9}#follow-this-user[_ngcontent-%COMP%]:after{content:"\\1f448"}.links-and-stats[_ngcontent-%COMP%]{background:rgb(20,20,21)}.profile-name[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-shadow:0 6px 9px rgba(0,0,0,.48)}.profile-avatar[_ngcontent-%COMP%]{bottom:-10px;width:150px;height:150px;border:0px solid #1E1E1E;background:rgba(2,2,2,.49);box-shadow:0 19px 19px -10px #000000a1}.profile-username[_ngcontent-%COMP%], .upsell[_ngcontent-%COMP%], .profile-location[_ngcontent-%COMP%], .primary-pro[_ngcontent-%COMP%]{opacity:0}.upsell[_ngcontent-%COMP%], #pen-as-header-question[_ngcontent-%COMP%]{display:none}.profile-nav-1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.2rem}.profile-bio[_ngcontent-%COMP%], .profile-nav-1[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .profile-nav-1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#14141596!important;font-size:1.2rem}.meta[_ngcontent-%COMP%]   .pen-title[_ngcontent-%COMP%]{font-family:"Droid Serif",serif;text-align:center}.pagination-button[_ngcontent-%COMP%]{background-color:#2f2f31;border-color:#2f2f31;transition:all .2s}.pagination-button[_ngcontent-%COMP%]:hover{box-shadow:0 3px 8px #0003}.single-project[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%], .single-pen[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{text-align:center;width:100%}.stats[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#bda26b}.stats[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .loves[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{fill:#2f2f3100!important;stroke:#ba6!important;stroke-width:.1em!important}.loves[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{stroke-width:.5em!important}.comments[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-width:.35em!important}.single-stat.loves.loved-1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff!important}.single-pen[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]:after{width:40%;transition:all .2s}.pen-actions[_ngcontent-%COMP%]{border:0px!important}.meta[_ngcontent-%COMP%]{box-shadow:none!important}']})}return t})(),KJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-chisiamo"]],decls:7,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["id","picture"],["id","content"],[1,"mb-4"]],template:function(r,i){1&r&&(tn(0,"link",0)(1,"div",1),le(2,"div",2)(3,"h2"),we(4,"Chi Siamo"),de(),le(5,"p",3),we(6," Siamo un gruppo di appassionati di viaggi e di musica, con un amore particolare per le ferrovie. La nostra passione per l'esplorazione e la scoperta ci ha portato a creare SpotiRFI, un progetto unico che unisce la bellezza del viaggio in treno con il potere evocativo della musica. Ogni stazione ferroviaria sulla mappa diventa una tappa di un viaggio musicale attraverso la Sicilia, offrendo un'esperienza unica che speriamo possa arricchire i vostri viaggi tanto quanto ha arricchito i nostri. "),de()())},styles:["#picture[_ngcontent-%COMP%]{background-image:url(https://www.ilportaledeitreni.it/wp-content/uploads/2020/10/E656.439D345.1118E656.590E646.028Carrozza-Centoporte-INV-Arquata-Scrivia-La-Spezia-Migliarina.jpg);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}h2[_ngcontent-%COMP%]{margin-top:2em}#content[_ngcontent-%COMP%]{max-width:58em;text-align:justify;margin:0 auto;padding:2em}"]})}return t})(),QJ=(()=>{class t{constructor(n){this.path="";let r=n.path().split("/");this.path=r[1].toUpperCase()}static#e=this.\u0275fac=function(r){return new(r||t)(Me(rd))};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-tabellone"]],decls:50,vars:1,consts:[["href","https://fonts.cdnfonts.com/css/caros","rel","stylesheet"],[1,"background"],[1,"riga"],[1,"binario"],[1,"destinazione"],[1,"pdest"],[1,"treno"],[1,"ptreno"],[1,"partenza"],[1,"ppart"],[1,"info"],[1,"pinfo"]],template:function(r,i){1&r&&(tn(0,"link",0),le(1,"div",1),tn(2,"br"),le(3,"div",2)(4,"div",3)(5,"h2")(6,"b"),we(7,"1"),de()()(),le(8,"div",4)(9,"p")(10,"b"),we(11,"destinazione "),de(),le(12,"i"),we(13,"destination"),de()(),le(14,"div",5)(15,"h4"),we(16),de()()()(),tn(17,"br"),le(18,"div",2)(19,"div",6)(20,"p")(21,"b"),we(22,"treno "),de(),le(23,"i"),we(24,"train"),de()(),le(25,"div",7)(26,"h4"),we(27,"SPOTIRFI"),de(),le(28,"h5"),we(29,"REG 21886"),de()()(),le(30,"div",8)(31,"p")(32,"b"),we(33,"partenza "),de(),le(34,"i"),we(35,"departure"),de()(),le(36,"div",9)(37,"h4"),we(38,"CANCELLATO"),de()()()(),tn(39,"br"),le(40,"div",2)(41,"div",10)(42,"p")(43,"b"),we(44,"informazioni "),de(),le(45,"i"),we(46,"informations"),de()(),le(47,"div",11)(48,"h4"),we(49,"E' SEVERAMENTE VIETATO ATTRAVERSARE LA LINEA GIALLA"),de()()()()()),2&r&&(ri(16),Kf(i.path))},styles:['@import"https://fonts.cdnfonts.com/css/caros";.background[_ngcontent-%COMP%]{width:40em;height:20.35em;background-color:#000;margin:auto}.riga[_ngcontent-%COMP%]{border-top:.1em white solid;width:38em;margin:0 1em}.binario[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}h2[_ngcontent-%COMP%]{font-size:5em}.destinazione[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.destinazione[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pdest[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 20s linear infinite}.pdest[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em;overflow:hidden}.treno[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}.treno[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ptreno[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:10.99em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ptreno[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em;margin-left:.2em;margin-bottom:.1em}.ptreno[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1em;margin-left:.2em}.partenza[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.partenza[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ppart[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ppart[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em}.info[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pinfo[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:38em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite;overflow:hidden}.pinfo[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8em;white-space:nowrap;position:relative;animation:_ngcontent-%COMP%_scroll-left 20s linear infinite}@keyframes _ngcontent-%COMP%_lighting{0%{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}to{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}}@keyframes _ngcontent-%COMP%_scroll-left{0%{transform:translate(100%)}to{transform:translate(-100%)}}']})}return t})(),YJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-notfound"]],decls:6,vars:0,consts:[["controls","","autoplay",""],["src","assets/404.mp3","type","audio/mpeg"]],template:function(r,i){1&r&&(le(0,"article"),tn(1,"app-tabellone"),de(),le(2,"article")(3,"audio",0),tn(4,"source",1),we(5," Il tuo browser non supporta l'elemento audio. "),de()())},dependencies:[QJ],styles:["article[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;margin:6em;font-family:Merienda,cursive}"]})}return t})();function JJ(t,e){if(1&t){const n=Yw();le(0,"li",16),ka("click",function(){const o=Wc(n).$implicit;return ga(La(3).stationToModal(o))}),we(1),de()}if(2&t){const n=e.$implicit;ri(),Kf(n)}}function XJ(t,e){if(1&t&&(le(0,"div",13),tn(1,"iframe",14)(2,"br")(3,"br")(4,"br"),le(5,"ul"),Zo(6,JJ,2,1,"li",15),de()()),2&t){const n=La().index,r=La();ri(),Ps("src",r.srcs[n],GE),ri(5),Ps("ngForOf",r.stations[n])}}function eX(t,e){if(1&t&&(le(0,"div",11),Zo(1,XJ,7,2,"div",12),de()),2&t){const n=e.$implicit,r=La();ri(),Ps("ngIf",n.id==r.id)}}const tX=[{path:"",component:D1},{path:"home",component:D1},{path:"tratte",component:ZJ},{path:"chisiamo",component:KJ},{path:"tratta/:id",component:(()=>{class t{constructor(n,r,i){this.fireServ=n,this.route=r,this.sanitizer=i,this.id=null,this.tratte=[],this.stations=[],this.srcs=[],this.actualStation=""}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.fireServ.getTratte().subscribe(n=>{let r=0;for(let i of n){let o;this.trattaSrc=this.sanitizer.bypassSecurityTrustResourceUrl(i.src),this.srcs.push(this.trattaSrc),this.stations[r]=this.stations[r]||[],o=i.stations.split("_"),this.stations[r]=o,r++}this.tratte=n})}stationToModal(n){this.actualStation=n}openMaps(){let r="https://www.google.com/maps/search/?api=1&query="+encodeURIComponent("stazione di "+this.actualStation);window.open(r,"_blank"),console.log(r)}static#e=this.\u0275fac=function(r){return new(r||t)(Me(W2),Me(rc),Me(cO))};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-playlist-page"]],decls:15,vars:2,consts:[["class","container",4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],[1,"container"],["class","incontainer",4,"ngIf"],[1,"incontainer"],["width","100%","height","500","frameBorder","0","allowfullscreen","","allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture","loading","lazy",2,"border-radius","12px",3,"src"],["data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click"]],template:function(r,i){1&r&&(Zo(0,eX,2,1,"div",0),le(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),we(6),de(),tn(7,"button",6),de(),le(8,"div",7),we(9," ... "),de(),le(10,"div",8)(11,"button",9),we(12,"Close"),de(),le(13,"button",10),ka("click",function(){return i.openMaps()}),we(14,"Apri su Maps"),de()()()()()),2&r&&(Ps("ngForOf",i.tratte),ri(6),sy("Stazione di ",i.actualStation,""))},dependencies:[JT,XT],styles:['@import"https://fonts.cdnfonts.com/css/futura-std-4";.container[_ngcontent-%COMP%]{align-items:center;width:55%;margin-bottom:4em;margin-top:6em}.incontainer[_ngcontent-%COMP%]{align-items:center;font-family:Futura Std,sans-serif;font-weight:700;font-size:x-large}.map[_ngcontent-%COMP%]{display:block;margin:auto;width:75%;height:auto}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:auto;width:max-content}li[_ngcontent-%COMP%]:before{content:"";border-radius:50%;width:.625em;height:.625em;background:red;display:inline-block;margin-right:.625em}li[_ngcontent-%COMP%]{margin:.625em 0;position:relative;cursor:pointer}li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:.125em;height:calc(100% + .625em);background:red;left:.25em;top:.625em}li[_ngcontent-%COMP%]:first-child:after{top:.625em}li[_ngcontent-%COMP%]:last-child:after{height:0}@media screen and (min-width: 1025px) and (max-width: 1300px){.container[_ngcontent-%COMP%]{align-items:center;width:72%}}@media screen and (min-width: 768px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{align-items:center;width:77%}}@media screen and (min-width: 281px) and (max-width: 767px){.container[_ngcontent-%COMP%]{align-items:center;width:90%}}@media screen and (max-width: 280px){.container[_ngcontent-%COMP%]{align-items:center;width:97%}}']})}return t})()},{path:"**",component:YJ}];let nX=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=ki({imports:[T1.forRoot(tX),T1]})}return t})(),rX=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-navbar"]],decls:20,vars:0,consts:[["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body","fixed-top"],[1,"container-fluid"],["routerLink","home",1,"navbar-brand"],["src","assets/logocompatto.png","alt","Logo","height","30",1,"d-inline-block","align-text-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","tratte",1,"nav-link"],["routerLink","chisiamo",1,"nav-link"],["href","https://www.rfi.it/it.html","target","_blank",1,"nav-link"],["href","https://open.spotify.com/intl-it","target","_blank",1,"nav-link"]],template:function(r,i){1&r&&(le(0,"nav",0)(1,"div",1)(2,"a",2),tn(3,"img",3),de(),le(4,"button",4),tn(5,"span",5),de(),le(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),we(10,"Le tratte"),de()(),le(11,"li",8)(12,"a",10),we(13,"Chi siamo"),de()(),le(14,"li",8)(15,"a",11),we(16," RFI "),de()(),le(17,"li",8)(18,"a",12),we(19," Spotify "),de()()()()()())},dependencies:[wp],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";#shareButton[_ngcontent-%COMP%]{color:transparent;background-color:transparent;border:transparent;float:right}nav[_ngcontent-%COMP%]{font-family:Merienda,cursive}']})}return t})(),iX=(()=>{class t{constructor(){}disclaimer(){window.alert("SpotiRFI \xe8 un sito indipendente e non \xe8 affiliato, sponsorizzato o approvato da Spotify o RFI. Non abbiamo l\u2019intenzione di ledere in alcun modo la loro immagine o reputazione. Il nostro obiettivo \xe8 fornire un servizio utile e di qualit\xe0 per i nostri utenti, nel rispetto dei diritti di propriet\xe0 intellettuale e delle normative vigenti.")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-footer"]],decls:66,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body"],[1,"layout"],[1,"footer-wrapper","clearfix"],[1,"grid-3","footer-logo"],["href","#"],["alt","html layout logo","src","assets/logo.png"],[1,"footer-text"],["type","button","id","liveAlertBtn",3,"click"],["id","liveAlertBtn",1,"material-symbols-outlined"],[1,"grid-3"],[1,"footer-heading"],[1,"footermenu"],["routerLink","tratte"],["routerLink","chisiamo"],["href","https://www.rfi.it/it.html","target","_blank"],["href","https://open.spotify.com/intl-it","target","_blank"],[1,"footer-contact"],["href","./tratta/08"],["href","./tratta/04"],["href","./tratta/02"],["href","./tratta/01"],["href","./tratta/05"],[1,"footerblog"],["href","https://www.fsitaliane.it/content/dam/fsitaliane/Documents/impegno/per-lambiente/progetti/Atlante%20delle%20linee%20ferroviarie%20dismesse.pdf","target","_blank"],["href","https://epodweb.rfi.it/Download.ashx?q=lTmHEqG6%2FeC61zq42ZZheV8ouJSzS%2B5udsN2POFdeD4hdoONi5u5MvreFVXiIbvj","target","_blank"],["href","https://www.rfi.it/it/chi-siamo/Il-rapporto-con-lo-Stato-e-con-gli-stakeholder/il-piano-commerciale.html","target","_blank"]],template:function(r,i){1&r&&(tn(0,"link",0),le(1,"footer",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),tn(6,"img",6),de(),le(7,"p",7),we(8," SpotiRFI: Un viaggio musicale unico attraverso le linee ferroviarie della Sicilia. Ogni stazione, una nuova canzone. "),de(),le(9,"button",8),ka("click",function(){return i.disclaimer()}),le(10,"span",9),we(11," info "),de()()(),le(12,"div",10)(13,"p",11),we(14,"pagine"),de(),le(15,"ul",12)(16,"li")(17,"a",13),we(18,"Le tratte"),de()(),le(19,"li")(20,"a",14),we(21,"Chi siamo"),de()(),le(22,"li")(23,"a",15),we(24,"RFI"),de()(),le(25,"li")(26,"a",16),we(27,"Spotify"),de()()()(),le(28,"div",10)(29,"p",11),we(30,"link"),de(),le(31,"ul",17)(32,"li")(33,"a",18),we(34,"Palermo - Messina"),de()(),le(35,"li")(36,"a",19),we(37,"Anello Ferroviario Palermo"),de()(),le(38,"li")(39,"a",20),we(40,"Agrigento - Palermo"),de()(),le(41,"li")(42,"a",21),we(43,"Siracusa - Caltanissetta"),de()(),le(44,"li")(45,"a",22),we(46,"Catania - Gela"),de()()()(),le(47,"div",10)(48,"p",11),we(49,"link utili"),de(),le(50,"ul",23)(51,"li")(52,"a",24),we(53,"Linee dismesse"),de(),le(54,"p"),we(55,"FS Italiane"),de()(),le(56,"li")(57,"a",25),we(58,"Regolamento Circolazione Treni"),de(),le(59,"p"),we(60,"RFI"),de()(),le(61,"li")(62,"a",26),we(63,"Piano Commerciale"),de(),le(64,"p"),we(65,"RFI"),de()()()()()()())},dependencies:[wp],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-%COMP%]{list-style:none;text-decoration:none;margin:0}img[_ngcontent-%COMP%]{height:3.7em}html[_ngcontent-%COMP%]{overflow-y:scroll}body[_ngcontent-%COMP%]{background:#b7b7b7 none repeat scroll 0 0;font-family:Open Sans,sans-serif}ul[_ngcontent-%COMP%]{padding:0}.clearfix[_ngcontent-%COMP%]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.clearfix[_ngcontent-%COMP%]{display:inline-block}*[_ngcontent-%COMP%]   html[_ngcontent-%COMP%]   .clearfix[_ngcontent-%COMP%]{height:1%}.clearfix[_ngcontent-%COMP%]{display:block}.layout[_ngcontent-%COMP%]{margin:0 auto;max-width:1170px;width:100%;padding:0 15px}.grid-3[_ngcontent-%COMP%]{width:25%;float:left;min-height:1px;padding-left:15px;padding-right:15px;position:relative}.footer-wrapper[_ngcontent-%COMP%]{padding:100px 0}.footer-text[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;margin:40px 0 0;text-align:justify}footer[_ngcontent-%COMP%]   .footer-heading[_ngcontent-%COMP%]{color:#e1e1e1;font:18px/19px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]{margin-top:32px}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{line-height:25px}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"-";margin:0 5px 0 0}.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;line-height:34px;text-transform:capitalize}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;margin:0 8px 0 0;color:#fff}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:14px}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#c7c7c7;font:13px/28px Open Sans,sans-serif;letter-spacing:1.2px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#b4b4b4;font:13px/18px Open Sans,sans-serif;letter-spacing:1.2px;padding-bottom:10px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c7c7c7;font:italic 12px/18px Open Sans,sans-serif}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#22c489}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 200,"GRAD" 200,"opsz" 24}button[_ngcontent-%COMP%]{background-color:transparent;border:none;margin:1em}#liveAlertPlaceholder[_ngcontent-%COMP%]{width:75%;margin:auto}@media (max-width:980px){.layout[_ngcontent-%COMP%]{width:767px}.grid-3[_ngcontent-%COMP%]{width:50%}.footer-heading[_ngcontent-%COMP%]{margin-top:18px}}@media (max-width:640px){.layout[_ngcontent-%COMP%]{width:300px}.grid-3[_ngcontent-%COMP%]{width:100%}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;float:none;line-height:25px}}']})}return t})(),oX=(()=>{class t{constructor(n){this.router=n,this.title="SpotiRFI",this.router.events.subscribe(r=>{r instanceof Jo&&window.scrollTo(0,0)})}static#e=this.\u0275fac=function(r){return new(r||t)(Me(bi))};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(r,i){1&r&&tn(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[L0,rX,iX]})}return t})();const sX_firebaseConfig={apiKey:"AIzaSyBhT4vrImMOpXLps9RtD_GROoPflfGtM4U",authDomain:"spotirfi-cd7a9.firebaseapp.com",databaseURL:"https://spotirfi-cd7a9-default-rtdb.firebaseio.com",projectId:"spotirfi-cd7a9",storageBucket:"spotirfi-cd7a9.appspot.com",messagingSenderId:"207743558815",appId:"1:207743558815:web:1d28c36da0a303fca7eeaa",measurementId:"G-8Z6DVSWE34"};let aX=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gi({type:t,bootstrap:[oX]});static#n=this.\u0275inj=ki({providers:[iA],imports:[R5,nX,i7.initializeApp(sX_firebaseConfig),zJ]})}return t})();A5().bootstrapModule(aX).catch(t=>console.error(t))},106:(to,kn,ze)=>{ze.d(kn,{Z:()=>_n});var E=ze(58),ve=ze(537),V=ze(534),Fe=ze(879);class Yt{constructor(Ze,et){this._delegate=Ze,this.firebase=et,(0,V._addComponent)(Ze,new ve.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(Ze,et=V._DEFAULT_ENTRY_NAME){var yn;this._delegate.checkDestroyed();const zn=this._delegate.container.getProvider(Ze);return!zn.isInitialized()&&"EXPLICIT"===(null===(yn=zn.getComponent())||void 0===yn?void 0:yn.instantiationMode)&&zn.initialize(),zn.getImmediate({identifier:et})}_removeServiceInstance(Ze,et=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(et)}_addComponent(Ze){(0,V._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,V._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ln=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function _t(){const yt=function Hn(yt){const Ze={},et={__esModule:!0,initializeApp:function xt(tt,Ln={}){const K=V.initializeApp(tt,Ln);if((0,E.r3)(Ze,K.name))return Ze[K.name];const Jt=new yt(K,et);return Ze[K.name]=Jt,Jt},app:zn,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function vt(tt){const Ln=tt.name,K=Ln.replace("-compat","");if(V._registerComponent(tt)&&"PUBLIC"===tt.type){const Jt=(Xt=zn())=>{if("function"!=typeof Xt[K])throw ln.create("invalid-app-argument",{appName:Ln});return Xt[K]()};void 0!==tt.serviceProps&&(0,E.ZB)(Jt,tt.serviceProps),et[K]=Jt,yt.prototype[K]=function(...Xt){return this._getService.bind(this,Ln).apply(this,tt.multipleInstances?Xt:[])}}return"PUBLIC"===tt.type?et[K]:null},removeApp:function yn(tt){delete Ze[tt]},useAsService:function or(tt,Ln){return"serverAuth"===Ln?null:Ln},modularAPIs:V}};function zn(tt){if(!(0,E.r3)(Ze,tt=tt||V._DEFAULT_ENTRY_NAME))throw ln.create("no-app",{appName:tt});return Ze[tt]}return et.default=et,Object.defineProperty(et,"apps",{get:function ct(){return Object.keys(Ze).map(tt=>Ze[tt])}}),zn.App=yt,et}(Yt);return yt.INTERNAL=Object.assign(Object.assign({},yt.INTERNAL),{createFirebaseNamespace:_t,extendNamespace:function Ze(et){(0,E.ZB)(yt,et)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),yt}(),te=new Fe.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const yt=self.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _n=Q;!function ut(yt){(0,V.registerVersion)("@firebase/app-compat","0.2.25",yt)}()},534:(to,kn,ze)=>{ze.r(kn),ze.d(kn,{FirebaseError:()=>Fe.ZR,SDK_VERSION:()=>uo,_DEFAULT_ENTRY_NAME:()=>Mr,_addComponent:()=>xi,_addOrOverwriteComponent:()=>_r,_apps:()=>xr,_clearComponents:()=>so,_components:()=>oo,_getProvider:()=>Co,_registerComponent:()=>Ni,_removeServiceInstance:()=>Do,deleteApp:()=>ci,getApp:()=>Ks,getApps:()=>Qs,initializeApp:()=>hu,onLog:()=>ds,registerVersion:()=>bo,setLogLevel:()=>zt});var E=ze(861),ve=ze(537),V=ze(879),Fe=ze(58);const Yt=(F,b)=>b.some(X=>F instanceof X);let qe,ln;const Q=new WeakMap,te=new WeakMap,Te=new WeakMap,Je=new WeakMap,ut=new WeakMap;let Ze={get(F,b,X){if(F instanceof IDBTransaction){if("done"===b)return te.get(F);if("objectStoreNames"===b)return F.objectStoreNames||Te.get(F);if("store"===b)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return xt(F[b])},set:(F,b,X)=>(F[b]=X,!0),has:(F,b)=>F instanceof IDBTransaction&&("done"===b||"store"===b)||b in F};function zn(F){return"function"==typeof F?function yn(F){return F!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _t(){return ln||(ln=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(F)?function(...b){return F.apply(ct(this),b),xt(Q.get(this))}:function(...b){return xt(F.apply(ct(this),b))}:function(b,...X){const ye=F.call(ct(this),b,...X);return Te.set(ye,b.sort?b.sort():[b]),xt(ye)}}(F):(F instanceof IDBTransaction&&function yt(F){if(te.has(F))return;const b=new Promise((X,ye)=>{const je=()=>{F.removeEventListener("complete",nt),F.removeEventListener("error",H),F.removeEventListener("abort",H)},nt=()=>{X(),je()},H=()=>{ye(F.error||new DOMException("AbortError","AbortError")),je()};F.addEventListener("complete",nt),F.addEventListener("error",H),F.addEventListener("abort",H)});te.set(F,b)}(F),Yt(F,function Hn(){return qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(F,Ze):F)}function xt(F){if(F instanceof IDBRequest)return function _n(F){const b=new Promise((X,ye)=>{const je=()=>{F.removeEventListener("success",nt),F.removeEventListener("error",H)},nt=()=>{X(xt(F.result)),je()},H=()=>{ye(F.error),je()};F.addEventListener("success",nt),F.addEventListener("error",H)});return b.then(X=>{X instanceof IDBCursor&&Q.set(X,F)}).catch(()=>{}),ut.set(b,F),b}(F);if(Je.has(F))return Je.get(F);const b=zn(F);return b!==F&&(Je.set(F,b),ut.set(b,F)),b}const ct=F=>ut.get(F),tt=["get","getKey","getAll","getAllKeys","count"],Ln=["put","add","delete","clear"],K=new Map;function Jt(F,b){if(!(F instanceof IDBDatabase)||b in F||"string"!=typeof b)return;if(K.get(b))return K.get(b);const X=b.replace(/FromIndex$/,""),ye=b!==X,je=Ln.includes(X);if(!(X in(ye?IDBIndex:IDBObjectStore).prototype)||!je&&!tt.includes(X))return;const nt=function(){var H=(0,E.Z)(function*(Lt,...St){const di=this.transaction(Lt,je?"readwrite":"readonly");let Ao=di.store;return ye&&(Ao=Ao.index(St.shift())),(yield Promise.all([Ao[X](...St),je&&di.done]))[0]});return function(St){return H.apply(this,arguments)}}();return K.set(b,nt),nt}!function et(F){Ze=F(Ze)}(F=>({...F,get:(b,X,ye)=>Jt(b,X)||F.get(b,X,ye),has:(b,X)=>!!Jt(b,X)||F.has(b,X)}));class Xt{constructor(b){this.container=b}getPlatformInfoString(){return this.container.getProviders().map(X=>{if(function Wr(F){const b=F.getComponent();return"VERSION"===b?.type}(X)){const ye=X.getImmediate();return`${ye.library}/${ye.version}`}return null}).filter(X=>X).join(" ")}}const no="@firebase/app",mr=new V.Yd("@firebase/app"),Mr="[DEFAULT]",du={[no]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xr=new Map,oo=new Map;function xi(F,b){try{F.container.addComponent(b)}catch(X){mr.debug(`Component ${b.name} failed to register with FirebaseApp ${F.name}`,X)}}function _r(F,b){F.container.addOrOverwriteComponent(b)}function Ni(F){const b=F.name;if(oo.has(b))return mr.debug(`There were multiple attempts to register component ${b}.`),!1;oo.set(b,F);for(const X of xr.values())xi(X,F);return!0}function Co(F,b){const X=F.container.getProvider("heartbeat").getImmediate({optional:!0});return X&&X.triggerHeartbeat(),F.container.getProvider(b)}function Do(F,b,X=Mr){Co(F,b).clearInstance(X)}function so(){oo.clear()}const Kr=new Fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qn{constructor(b,X,ye){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},X),this._name=X.name,this._automaticDataCollectionEnabled=X.automaticDataCollectionEnabled,this._container=ye,this.container.addComponent(new ve.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(b){this.checkDestroyed(),this._automaticDataCollectionEnabled=b}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(b){this._isDeleted=b}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}const uo="10.7.1";function hu(F,b={}){let X=F;"object"!=typeof b&&(b={name:b});const ye=Object.assign({name:Mr,automaticDataCollectionEnabled:!1},b),je=ye.name;if("string"!=typeof je||!je)throw Kr.create("bad-app-name",{appName:String(je)});if(X||(X=(0,Fe.aH)()),!X)throw Kr.create("no-options");const nt=xr.get(je);if(nt){if((0,Fe.vZ)(X,nt.options)&&(0,Fe.vZ)(ye,nt.config))return nt;throw Kr.create("duplicate-app",{appName:je})}const H=new ve.H0(je);for(const St of oo.values())H.addComponent(St);const Lt=new qn(X,ye,H);return xr.set(je,Lt),Lt}function Ks(F=Mr){const b=xr.get(F);if(!b&&F===Mr&&(0,Fe.aH)())return hu();if(!b)throw Kr.create("no-app",{appName:F});return b}function Qs(){return Array.from(xr.values())}function ci(F){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,E.Z)(function*(F){const b=F.name;xr.has(b)&&(xr.delete(b),yield Promise.all(F.container.getProviders().map(X=>X.delete())),F.isDeleted=!0)})).apply(this,arguments)}function bo(F,b,X){var ye;let je=null!==(ye=du[F])&&void 0!==ye?ye:F;X&&(je+=`-${X}`);const nt=je.match(/\s|\//),H=b.match(/\s|\//);if(nt||H){const Lt=[`Unable to register library "${je}" with version "${b}":`];return nt&&Lt.push(`library name "${je}" contains illegal characters (whitespace or "/")`),nt&&H&&Lt.push("and"),H&&Lt.push(`version name "${b}" contains illegal characters (whitespace or "/")`),void mr.warn(Lt.join(" "))}Ni(new ve.wA(`${je}-version`,()=>({library:je,version:b}),"VERSION"))}function ds(F,b){if(null!==F&&"function"!=typeof F)throw Kr.create("invalid-log-argument");(0,V.Am)(F,b)}function zt(F){(0,V.Ub)(F)}const Ys="firebase-heartbeat-database",fu=1,D="firebase-heartbeat-store";let w=null;function A(){return w||(w=function vt(F,b,{blocked:X,upgrade:ye,blocking:je,terminated:nt}={}){const H=indexedDB.open(F,b),Lt=xt(H);return ye&&H.addEventListener("upgradeneeded",St=>{ye(xt(H.result),St.oldVersion,St.newVersion,xt(H.transaction),St)}),X&&H.addEventListener("blocked",St=>X(St.oldVersion,St.newVersion,St)),Lt.then(St=>{nt&&St.addEventListener("close",()=>nt()),je&&St.addEventListener("versionchange",di=>je(di.oldVersion,di.newVersion,di))}).catch(()=>{}),Lt}(Ys,fu,{upgrade:(F,b)=>{0===b&&F.createObjectStore(D)}}).catch(F=>{throw Kr.create("idb-open",{originalErrorMessage:F.message})})),w}function M(){return(M=(0,E.Z)(function*(F){try{return yield(yield A()).transaction(D).objectStore(D).get(be(F))}catch(b){if(b instanceof Fe.ZR)mr.warn(b.message);else{const X=Kr.create("idb-get",{originalErrorMessage:b?.message});mr.warn(X.message)}}})).apply(this,arguments)}function pe(F,b){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,E.Z)(function*(F,b){try{const ye=(yield A()).transaction(D,"readwrite");yield ye.objectStore(D).put(b,be(F)),yield ye.done}catch(X){if(X instanceof Fe.ZR)mr.warn(X.message);else{const ye=Kr.create("idb-set",{originalErrorMessage:X?.message});mr.warn(ye.message)}}})).apply(this,arguments)}function be(F){return`${F.name}!${F.options.appId}`}class Ue{constructor(b){this.container=b,this._heartbeatsCache=null;const X=this.container.getProvider("app").getImmediate();this._storage=new li(X),this._heartbeatsCachePromise=this._storage.read().then(ye=>(this._heartbeatsCache=ye,ye))}triggerHeartbeat(){var b=this;return(0,E.Z)(function*(){var X,ye;const nt=b.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),H=Ke();if((null!=(null===(X=b._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||(b._heartbeatsCache=yield b._heartbeatsCachePromise,null!=(null===(ye=b._heartbeatsCache)||void 0===ye?void 0:ye.heartbeats)))&&b._heartbeatsCache.lastSentHeartbeatDate!==H&&!b._heartbeatsCache.heartbeats.some(Lt=>Lt.date===H))return b._heartbeatsCache.heartbeats.push({date:H,agent:nt}),b._heartbeatsCache.heartbeats=b._heartbeatsCache.heartbeats.filter(Lt=>{const St=new Date(Lt.date).valueOf();return Date.now()-St<=2592e6}),b._storage.overwrite(b._heartbeatsCache)})()}getHeartbeatsHeader(){var b=this;return(0,E.Z)(function*(){var X;if(null===b._heartbeatsCache&&(yield b._heartbeatsCachePromise),null==(null===(X=b._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||0===b._heartbeatsCache.heartbeats.length)return"";const ye=Ke(),{heartbeatsToSend:je,unsentEntries:nt}=function dt(F,b=1024){const X=[];let ye=F.slice();for(const je of F){const nt=X.find(H=>H.agent===je.agent);if(nt){if(nt.dates.push(je.date),hs(X)>b){nt.dates.pop();break}}else if(X.push({agent:je.agent,dates:[je.date]}),hs(X)>b){X.pop();break}ye=ye.slice(1)}return{heartbeatsToSend:X,unsentEntries:ye}}(b._heartbeatsCache.heartbeats),H=(0,Fe.L)(JSON.stringify({version:2,heartbeats:je}));return b._heartbeatsCache.lastSentHeartbeatDate=ye,nt.length>0?(b._heartbeatsCache.heartbeats=nt,yield b._storage.overwrite(b._heartbeatsCache)):(b._heartbeatsCache.heartbeats=[],b._storage.overwrite(b._heartbeatsCache)),H})()}}function Ke(){return(new Date).toISOString().substring(0,10)}class li{constructor(b){this.app=b,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Fe.hl)()&&(0,Fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var b=this;return(0,E.Z)(function*(){if(yield b._canUseIndexedDBPromise){const ye=yield function q(F){return M.apply(this,arguments)}(b.app);return ye?.heartbeats?ye:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(b){var X=this;return(0,E.Z)(function*(){var ye;if(yield X._canUseIndexedDBPromise){const nt=yield X.read();return pe(X.app,{lastSentHeartbeatDate:null!==(ye=b.lastSentHeartbeatDate)&&void 0!==ye?ye:nt.lastSentHeartbeatDate,heartbeats:b.heartbeats})}})()}add(b){var X=this;return(0,E.Z)(function*(){var ye;if(yield X._canUseIndexedDBPromise){const nt=yield X.read();return pe(X.app,{lastSentHeartbeatDate:null!==(ye=b.lastSentHeartbeatDate)&&void 0!==ye?ye:nt.lastSentHeartbeatDate,heartbeats:[...nt.heartbeats,...b.heartbeats]})}})()}}function hs(F){return(0,Fe.L)(JSON.stringify({version:2,heartbeats:F})).length}!function Pc(F){Ni(new ve.wA("platform-logger",b=>new Xt(b),"PRIVATE")),Ni(new ve.wA("heartbeat",b=>new Ue(b),"PRIVATE")),bo(no,"0.9.25",F),bo(no,"0.9.25","esm2017"),bo("fire-js","")}("")},537:(to,kn,ze)=>{ze.d(kn,{H0:()=>Hn,wA:()=>V});var E=ze(861),ve=ze(58);class V{constructor(Q,te,Te){this.name=Q,this.instanceFactory=te,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const Fe="[DEFAULT]";class Yt{constructor(Q,te){this.name=Q,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const te=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(te)){const Te=new ve.BH;if(this.instancesDeferred.set(te,Te),this.isInitialized(te)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:te});Je&&Te.resolve(Je)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(Q){var te;const Te=this.normalizeInstanceIdentifier(Q?.identifier),Je=null!==(te=Q?.optional)&&void 0!==te&&te;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(ut){if(Je)return null;throw ut}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function ln(_t){return"EAGER"===_t.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:Fe})}catch{}for(const[te,Te]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(te);try{const ut=this.getOrInitializeService({instanceIdentifier:Je});Te.resolve(ut)}catch{}}}}clearInstance(Q=Fe){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,E.Z)(function*(){const te=Array.from(Q.instances.values());yield Promise.all([...te.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...te.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=Fe){return this.instances.has(Q)}getOptions(Q=Fe){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:te={}}=Q,Te=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:Te,options:te});for(const[ut,_n]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(ut)&&_n.resolve(Je);return Je}onInit(Q,te){var Te;const Je=this.normalizeInstanceIdentifier(te),ut=null!==(Te=this.onInitCallbacks.get(Je))&&void 0!==Te?Te:new Set;ut.add(Q),this.onInitCallbacks.set(Je,ut);const _n=this.instances.get(Je);return _n&&Q(_n,Je),()=>{ut.delete(Q)}}invokeOnInitCallbacks(Q,te){const Te=this.onInitCallbacks.get(te);if(Te)for(const Je of Te)try{Je(Q,te)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:te={}}){let Te=this.instances.get(Q);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(_t=Q,_t===Fe?void 0:_t),options:te}),this.instances.set(Q,Te),this.instancesOptions.set(Q,te),this.invokeOnInitCallbacks(Te,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,Te)}catch{}var _t;return Te||null}normalizeInstanceIdentifier(Q=Fe){return this.component?this.component.multipleInstances?Q:Fe:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Hn{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const te=this.getProvider(Q.name);if(te.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);te.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const te=new Yt(Q,this);return this.providers.set(Q,te),te}getProviders(){return Array.from(this.providers.values())}}},879:(to,kn,ze)=>{ze.d(kn,{Am:()=>_t,Ub:()=>Hn,Yd:()=>ln,in:()=>ve});const E=[];var ve=function(Q){return Q[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",Q}(ve||{});const V={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},Fe=ve.INFO,Yt={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},qe=(Q,te,...Te)=>{if(te<Q.logLevel)return;const Je=(new Date).toISOString(),ut=Yt[te];if(!ut)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[ut](`[${Je}]  ${Q.name}:`,...Te)};class ln{constructor(te){this.name=te,this._logLevel=Fe,this._logHandler=qe,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in ve))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?V[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...te),this._logHandler(this,ve.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...te),this._logHandler(this,ve.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...te),this._logHandler(this,ve.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...te),this._logHandler(this,ve.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...te),this._logHandler(this,ve.ERROR,...te)}}function Hn(Q){E.forEach(te=>{te.setLogLevel(Q)})}function _t(Q,te){for(const Te of E){let Je=null;te&&te.level&&(Je=V[te.level]),Te.userLogHandler=null===Q?null:(ut,_n,...yt)=>{const Ze=yt.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");_n>=(Je??ut.logLevel)&&Q({level:ve[_n].toLowerCase(),message:Ze,args:yt,type:ut.name})}}}},230:(to,kn,ze)=>{ze.r(kn);var E=ze(861),ve=ze(106),V=ze(58),Fe=ze(534),Yt=ze(879),qe=ze(582),ln=ze(537);const _t={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const _n=function Je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},yt=function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yn=new Yt.Yd("@firebase/auth");function xt(h,...c){yn.logLevel<=Yt.in.ERROR&&yn.error(`Auth (${Fe.SDK_VERSION}): ${h}`,...c)}function ct(h,...c){throw Ln(h,...c)}function vt(h,...c){return Ln(h,...c)}function or(h,c,l){const p=Object.assign(Object.assign({},yt()),{[c]:l});return new V.LL("auth","Firebase",p).create(c,{appName:h.name})}function tt(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&ct(h,"argument-error"),or(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ln(h,...c){if("string"!=typeof h){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=h.name),h._errorFactory.create(l,...p)}return Ze.create(h,...c)}function K(h,c,...l){if(!h)throw Ln(c,...l)}function Jt(h){const c="INTERNAL ASSERTION FAILED: "+h;throw xt(c),new Error(c)}function Xt(h,c){h||Jt(c)}function Wr(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function no(){return"http:"===Mi()||"https:"===Mi()}function Mi(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class Zr{constructor(c,l){this.shortDelay=c,this.longDelay=l,Xt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function mr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(no()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function O(h,c){Xt(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class L{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Jt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Jt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Jt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const G={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},z=new Zr(3e4,6e4);function Y(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function Z(h,c,l,p){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,E.Z)(function*(h,c,l,p,m={}){return ot(h,m,(0,E.Z)(function*(){let v={},T={};p&&("GET"===c?T=p:v={body:JSON.stringify(p)});const P=(0,V.xO)(Object.assign({key:h.config.apiKey},T)).slice(1),j=yield h._getAdditionalHeaders();return j["Content-Type"]="application/json",h.languageCode&&(j["X-Firebase-Locale"]=h.languageCode),L.fetch()(sn(h,h.config.apiHost,l,P),Object.assign({method:c,headers:j,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function ot(h,c,l){return dn.apply(this,arguments)}function dn(){return(dn=(0,E.Z)(function*(h,c,l){h._canInitEmulator=!1;const p=Object.assign(Object.assign({},G),c);try{const m=new Fn(h),v=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const T=yield v.json();if("needConfirmation"in T)throw vn(h,"account-exists-with-different-credential",T);if(v.ok&&!("errorMessage"in T))return T;{const P=v.ok?T.errorMessage:T.error.message,[j,se]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===j)throw vn(h,"credential-already-in-use",T);if("EMAIL_EXISTS"===j)throw vn(h,"email-already-in-use",T);if("USER_DISABLED"===j)throw vn(h,"user-disabled",T);const ge=p[j]||j.toLowerCase().replace(/[_\s]+/g,"-");if(se)throw or(h,ge,se);ct(h,ge)}}catch(m){if(m instanceof V.ZR)throw m;ct(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function Se(h,c,l,p){return lt.apply(this,arguments)}function lt(){return(lt=(0,E.Z)(function*(h,c,l,p,m={}){const v=yield Z(h,c,l,p,m);return"mfaPendingCredential"in v&&ct(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function sn(h,c,l,p){const m=`${c}${l}?${p}`;return h.config.emulator?O(h.config,m):`${h.config.apiScheme}://${m}`}function ke(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(vt(this.auth,"network-request-failed")),z.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vn(h,c,l){const p={appName:h.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const m=vt(h,c,p);return m.customData._tokenResponse=l,m}function An(h){return void 0!==h&&void 0!==h.getResponse}function Ct(h){return void 0!==h&&void 0!==h.enterprise}class Rr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return ke(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function ro(){return(ro=(0,E.Z)(function*(h){return(yield Z(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pr(h,c){return io.apply(this,arguments)}function io(){return(io=(0,E.Z)(function*(h,c){return Z(h,"GET","/v2/recaptchaConfig",Y(h,c))})).apply(this,arguments)}function Mr(){return(Mr=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function xr(){return(xr=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function xi(){return(xi=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function _r(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Do(){return(Do=(0,E.Z)(function*(h,c=!1){const l=(0,V.m9)(h),p=yield l.getIdToken(c),m=ao(p);K(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const v="object"==typeof m.firebase?m.firebase:void 0,T=v?.sign_in_provider;return{claims:m,token:p,authTime:_r(so(m.auth_time)),issuedAtTime:_r(so(m.iat)),expirationTime:_r(so(m.exp)),signInProvider:T||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function so(h){return 1e3*Number(h)}function ao(h){const[c,l,p]=h.split(".");if(void 0===c||void 0===l||void 0===p)return xt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,V.tV)(l);return m?JSON.parse(m):(xt("Failed to decode base64 JWT payload"),null)}catch(m){return xt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function qn(h,c){return uo.apply(this,arguments)}function uo(){return(uo=(0,E.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof V.ZR&&function hu({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(p)&&h.auth.currentUser===h&&(yield h.auth.signOut()),p}})).apply(this,arguments)}class Ks{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,E.Z)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,E.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Qs{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ci(h){return Gn.apply(this,arguments)}function Gn(){return Gn=(0,E.Z)(function*(h){var c;const l=h.auth,p=yield h.getIdToken(),m=yield qn(h,function oo(h,c){return xi.apply(this,arguments)}(l,{idToken:p}));K(m?.users.length,l,"internal-error");const v=m.users[0];h._notifyReloadListener(v);const T=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function Ys(h){return h.map(c=>{var{providerId:l}=c,p=(0,qe._T)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],P=function zt(h,c){return[...h.filter(p=>!c.some(m=>m.providerId===p.providerId)),...c]}(h.providerData,T),ge=!!h.isAnonymous&&!(h.email&&v.passwordHash||P?.length),me={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:P,metadata:new Qs(v.createdAt,v.lastLoginAt),isAnonymous:ge};Object.assign(h,me)}),Gn.apply(this,arguments)}function ds(){return(ds=(0,E.Z)(function*(h){const c=(0,V.m9)(h);yield ci(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function D(){return(D=(0,E.Z)(function*(h,c){const l=yield ot(h,{},(0,E.Z)(function*(){const p=(0,V.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:v}=h.config,T=sn(h,m,"/v1/token",`key=${v}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(T,{method:"POST",headers:P,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function A(){return(A=(0,E.Z)(function*(h,c){return Z(h,"POST","/v2/accounts:revokeToken",Y(h,c))})).apply(this,arguments)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){K(c.idToken,"internal-error"),K(typeof c.idToken<"u","internal-error"),K(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Kr(h){const c=ao(h);return K(c,"internal-error"),K(typeof c.exp<"u","internal-error"),K(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var p=this;return(0,E.Z)(function*(){return K(!p.accessToken||p.refreshToken,c,"user-token-expired"),l||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,E.Z)(function*(){const{accessToken:m,refreshToken:v,expiresIn:T}=yield function fu(h,c){return D.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(m,v,Number(T))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:m,expirationTime:v}=l,T=new q;return p&&(K("string"==typeof p,"internal-error",{appName:c}),T.refreshToken=p),m&&(K("string"==typeof m,"internal-error",{appName:c}),T.accessToken=m),v&&(K("number"==typeof v,"internal-error",{appName:c}),T.expirationTime=v),T}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return Jt("not implemented")}}function M(h,c){K("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class pe{constructor(c){var{uid:l,auth:p,stsTokenManager:m}=c,v=(0,qe._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ks(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new Qs(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,E.Z)(function*(){const p=yield qn(l,l.stsTokenManager.getToken(l.auth,c));return K(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function Co(h){return Do.apply(this,arguments)}(this,c)}reload(){return function bo(h){return ds.apply(this,arguments)}(this)}_assign(c){this!==c&&(K(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new pe(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,E.Z)(function*(){let m=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield ci(p)),yield p.auth._persistUserIfCurrent(p),m&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,E.Z)(function*(){const l=yield c.getIdToken();return yield qn(c,function Zs(h,c){return Mr.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,m,v,T,P,j,se,ge;const me=null!==(p=l.displayName)&&void 0!==p?p:void 0,Gt=null!==(m=l.email)&&void 0!==m?m:void 0,Ei=null!==(v=l.phoneNumber)&&void 0!==v?v:void 0,ju=null!==(T=l.photoURL)&&void 0!==T?T:void 0,i_=null!==(P=l.tenantId)&&void 0!==P?P:void 0,Cl=null!==(j=l._redirectEventId)&&void 0!==j?j:void 0,o_=null!==(se=l.createdAt)&&void 0!==se?se:void 0,s_=null!==(ge=l.lastLoginAt)&&void 0!==ge?ge:void 0,{uid:a_,emailVerified:gf,isAnonymous:mf,providerData:Jn,stsTokenManager:Dl}=l;K(a_&&Dl,c,"internal-error");const jo=q.fromJSON(this.name,Dl);K("string"==typeof a_,c,"internal-error"),M(me,c.name),M(Gt,c.name),K("boolean"==typeof gf,c,"internal-error"),K("boolean"==typeof mf,c,"internal-error"),M(Ei,c.name),M(ju,c.name),M(i_,c.name),M(Cl,c.name),M(o_,c.name),M(s_,c.name);const Aa=new pe({uid:a_,auth:c,email:Gt,emailVerified:gf,displayName:me,isAnonymous:mf,photoURL:ju,phoneNumber:Ei,tenantId:i_,stsTokenManager:jo,createdAt:o_,lastLoginAt:s_});return Jn&&Array.isArray(Jn)&&(Aa.providerData=Jn.map(u_=>Object.assign({},u_))),Cl&&(Aa._redirectEventId=Cl),Aa}static _fromIdTokenResponse(c,l,p=!1){return(0,E.Z)(function*(){const m=new q;m.updateFromServerResponse(l);const v=new pe({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:p});return yield ci(v),v})()}}const Ie=new Map;function be(h){Xt(h instanceof Function,"Expected a class definition");let c=Ie.get(h);return c?(Xt(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Ie.set(h,c),c)}const Ce=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(l,p){var m=this;return(0,E.Z)(function*(){m.storage[l]=p})()}_get(l){var p=this;return(0,E.Z)(function*(){const m=p.storage[l];return void 0===m?null:m})()}_remove(l){var p=this;return(0,E.Z)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return h.type="NONE",h})();function Ue(h,c,l){return`firebase:${h}:${c}:${l}`}class Ke{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:m,name:v}=this.auth;this.fullUserKey=Ue(this.userKey,m.apiKey,v),this.fullPersistenceKey=Ue("persistence",m.apiKey,v),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,E.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?pe._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,E.Z)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,E.Z)(function*(){if(!l.length)return new Ke(be(Ce),c,p);const m=(yield Promise.all(l.map(function(){var se=(0,E.Z)(function*(ge){if(yield ge._isAvailable())return ge});return function(ge){return se.apply(this,arguments)}}()))).filter(se=>se);let v=m[0]||be(Ce);const T=Ue(p,c.config.apiKey,c.name);let P=null;for(const se of l)try{const ge=yield se._get(T);if(ge){const me=pe._fromJSON(c,ge);se!==v&&(P=me),v=se;break}}catch{}const j=m.filter(se=>se._shouldAllowMigration);return v._shouldAllowMigration&&j.length?(v=j[0],P&&(yield v._set(T,P.toJSON())),yield Promise.all(l.map(function(){var se=(0,E.Z)(function*(ge){if(ge!==v)try{yield ge._remove(T)}catch{}});return function(ge){return se.apply(this,arguments)}}())),new Ke(v,c,p)):new Ke(v,c,p)})()}}function dt(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(F(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(li(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(X(c))return"Blackberry";if(ye(c))return"Webos";if(hs(c))return"Safari";if((c.includes("chrome/")||Pc(c))&&!c.includes("edge/"))return"Chrome";if(b(c))return"Android";{const p=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function li(h=(0,V.z$)()){return/firefox\//i.test(h)}function hs(h=(0,V.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Pc(h=(0,V.z$)()){return/crios\//i.test(h)}function F(h=(0,V.z$)()){return/iemobile/i.test(h)}function b(h=(0,V.z$)()){return/android/i.test(h)}function X(h=(0,V.z$)()){return/blackberry/i.test(h)}function ye(h=(0,V.z$)()){return/webos/i.test(h)}function je(h=(0,V.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function St(h=(0,V.z$)()){return je(h)||b(h)||ye(h)||X(h)||/windows phone/i.test(h)||F(h)}function Ao(h,c=[]){let l;switch(h){case"Browser":l=dt((0,V.z$)());break;case"Worker":l=`${dt((0,V.z$)())}-${h}`;break;default:l=h}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Fe.SDK_VERSION}/${p}`}class Lg{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=v=>new Promise((T,P)=>{try{T(c(v))}catch(j){P(j)}});p.onAbort=l,this.queue.push(p);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,E.Z)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const m of l.queue)yield m(c),m.onAbort&&p.push(m.onAbort)}catch(m){p.reverse();for(const v of p)try{v()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function fs(){return(fs=(0,E.Z)(function*(h,c={}){return Z(h,"GET","/v2/passwordPolicy",Y(h,c))})).apply(this,arguments)}class Be{constructor(c){var l,p,m,v;const T=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=T.minPasswordLength)&&void 0!==l?l:6,T.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=T.maxPasswordLength),void 0!==T.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=T.containsLowercaseCharacter),void 0!==T.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=T.containsUppercaseCharacter),void 0!==T.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=T.containsNumericCharacter),void 0!==T.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=T.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,m,v,T,P;const j={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,j),this.validatePasswordCharacterOptions(c,j),j.isValid&&(j.isValid=null===(l=j.meetsMinPasswordLength)||void 0===l||l),j.isValid&&(j.isValid=null===(p=j.meetsMaxPasswordLength)||void 0===p||p),j.isValid&&(j.isValid=null===(m=j.containsLowercaseLetter)||void 0===m||m),j.isValid&&(j.isValid=null===(v=j.containsUppercaseLetter)||void 0===v||v),j.isValid&&(j.isValid=null===(T=j.containsNumericCharacter)||void 0===T||T),j.isValid&&(j.isValid=null===(P=j.containsNonAlphanumericCharacter)||void 0===P||P),j}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)p=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,m,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class mt{constructor(c,l,p,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vg(this),this.idTokenSubscription=new Vg(this),this.beforeStateQueue=new Lg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=be(l)),this._initializationPromise=this.queue((0,E.Z)(function*(){var m,v;if(!p._deleted&&(p.persistenceManager=yield Ke.create(p,c),!p._deleted)){if(null!==(m=p._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,E.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,E.Z)(function*(){var p;const m=yield l.assertedPersistence.getCurrentUser();let v=m,T=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,j=v?._redirectEventId,se=yield l.tryRedirectSignIn(c);(!P||P===j)&&se?.user&&(v=se.user,T=!0)}if(!v)return l.directlySetCurrentUser(null);if(!v._redirectEventId){if(T)try{yield l.beforeStateQueue.runMiddleware(v)}catch(P){v=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return v?l.reloadAndSetCurrentUserOrClear(v):l.directlySetCurrentUser(null)}return K(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===v._redirectEventId?l.directlySetCurrentUser(v):l.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var l=this;return(0,E.Z)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,E.Z)(function*(){try{yield ci(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Ws(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,E.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,E.Z)(function*(){const p=c?(0,V.m9)(c):null;return p&&K(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,E.Z)(function*(){if(!p._deleted)return c&&K(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,E.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,E.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,E.Z)(function*(){yield l.assertedPersistence.setPersistence(be(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,E.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,E.Z)(function*(){const l=yield function co(h){return fs.apply(this,arguments)}(c),p=new Be(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new V.LL("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,E.Z)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function w(h,c){return A.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,E.Z)(function*(){const m=yield p.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,E.Z)(function*(){if(!l.redirectPersistenceManager){const p=c&&be(c)||l._popupRedirectResolver;K(p,l,"argument-error"),l.redirectPersistenceManager=yield Ke.create(l,[be(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,E.Z)(function*(){var p,m;return l._isInitialized&&(yield l.queue((0,E.Z)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,E.Z)(function*(){if(c===l.currentUser)return l.queue((0,E.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,m){if(this._deleted)return()=>{};const v="function"==typeof l?l:l.next.bind(l);let T=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(P,this,"internal-error"),P.then(()=>{T||v(this.currentUser)}),"function"==typeof l){const j=c.addObserver(l,p,m);return()=>{T=!0,j()}}{const j=c.addObserver(l);return()=>{T=!0,j()}}}directlySetCurrentUser(c){var l=this;return(0,E.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Ao(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,E.Z)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(p["X-Firebase-Client"]=m);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,E.Z)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function zn(h,...c){yn.logLevel<=Yt.in.WARN&&yn.warn(`Auth (${Fe.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Ft(h){return(0,V.m9)(h)}class Vg{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,V.ne)(l=>this.observer=l)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ug(h){return new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",h),p.onload=c,p.onerror=m=>{const v=vt("internal-error");v.customData=m,l(v)},p.type="text/javascript",p.charset="UTF-8",function bI(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(p)})}function Bg(h){return`__${h}${Math.floor(1e6*Math.random())}`}class jg{constructor(c){this.type="recaptcha-enterprise",this.auth=Ft(c)}verify(c="verify",l=!1){var p=this;return(0,E.Z)(function*(){function v(){return v=(0,E.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var j=(0,E.Z)(function*(se,ge){Pr(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(me=>{if(void 0!==me.recaptchaKey){const Gt=new Rr(me);return null==P.tenantId?P._agentRecaptchaConfig=Gt:P._tenantRecaptchaConfigs[P.tenantId]=Gt,se(Gt.siteKey)}ge(new Error("recaptcha Enterprise site key undefined"))}).catch(me=>{ge(me)})});return function(se,ge){return j.apply(this,arguments)}}())}),v.apply(this,arguments)}function T(P,j,se){const ge=window.grecaptcha;Ct(ge)?ge.enterprise.ready(()=>{ge.enterprise.execute(P,{action:c}).then(me=>{j(me)}).catch(()=>{j("NO_RECAPTCHA")})}):se(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,j)=>{(function m(P){return v.apply(this,arguments)})(p.auth).then(se=>{if(!l&&Ct(window.grecaptcha))T(se,P,j);else{if(typeof window>"u")return void j(new Error("RecaptchaVerifier is only supported in browser"));Ug("https://www.google.com/recaptcha/enterprise.js?render="+se).then(()=>{T(se,P,j)}).catch(ge=>{j(ge)})}}).catch(se=>{j(se)})})})()}}function AI(h,c,l){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,E.Z)(function*(h,c,l,p=!1){const m=new jg(h);let v;try{v=yield m.verify(l)}catch{v=yield m.verify(l,!0)}const T=Object.assign({},c);return Object.assign(T,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T})).apply(this,arguments)}function Mc(h,c,l,p){return $g.apply(this,arguments)}function $g(){return $g=(0,E.Z)(function*(h,c,l,p){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield AI(h,c,l,"getOobCode"===l);return p(h,v)}return p(h,c).catch(function(){var v=(0,E.Z)(function*(T){if("auth/missing-recaptcha-token"===T.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield AI(h,c,l,"getOobCode"===l);return p(h,P)}return Promise.reject(T)});return function(T){return v.apply(this,arguments)}}())}),$g.apply(this,arguments)}function RI(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function xe(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class pu{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Jt("not implemented")}_getIdTokenResponse(c){return Jt("not implemented")}_linkToIdToken(c,l){return Jt("not implemented")}_getReauthenticationResolver(c){return Jt("not implemented")}}function PI(h,c){return qg.apply(this,arguments)}function qg(){return(qg=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:resetPassword",Y(h,c))})).apply(this,arguments)}function Gg(){return(Gg=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ki(h,c){return Js.apply(this,arguments)}function Js(){return(Js=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function xc(){return(xc=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:update",Y(h,c))})).apply(this,arguments)}function xI(h,c){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,E.Z)(function*(h,c){return Se(h,"POST","/v1/accounts:signInWithPassword",Y(h,c))})).apply(this,arguments)}function ps(h,c){return gu.apply(this,arguments)}function gu(){return(gu=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:sendOobCode",Y(h,c))})).apply(this,arguments)}function ph(){return(ph=(0,E.Z)(function*(h,c){return ps(h,c)})).apply(this,arguments)}function rt(h,c){return mu.apply(this,arguments)}function mu(){return(mu=(0,E.Z)(function*(h,c){return ps(h,c)})).apply(this,arguments)}function Zg(h,c){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,E.Z)(function*(h,c){return ps(h,c)})).apply(this,arguments)}function Qg(){return(Qg=(0,E.Z)(function*(h,c){return ps(h,c)})).apply(this,arguments)}function Yg(){return(Yg=(0,E.Z)(function*(h,c){return Se(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}function he(){return(he=(0,E.Z)(function*(h,c){return Se(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}class gs extends pu{constructor(c,l,p,m=null){super("password",p),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new gs(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new gs(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,E.Z)(function*(){switch(l.signInMethod){case"password":return Mc(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",xI);case"emailLink":return function Rt(h,c){return Yg.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:ct(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,E.Z)(function*(){switch(p.signInMethod){case"password":return Mc(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ki);case"emailLink":return function lA(h,c){return he.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:ct(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function hi(h,c){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,E.Z)(function*(h,c){return Se(h,"POST","/v1/accounts:signInWithIdp",Y(h,c))})).apply(this,arguments)}class Li extends pu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Li(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):ct("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m}=l,v=(0,qe._T)(l,["providerId","signInMethod"]);if(!p||!m)return null;const T=new Li(p,m);return T.idToken=v.idToken||void 0,T.accessToken=v.accessToken||void 0,T.secret=v.secret,T.nonce=v.nonce,T.pendingToken=v.pendingToken||null,T}_getIdTokenResponse(c){return hi(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,hi(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,hi(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,V.xO)(l)}return c}}function Jg(){return(Jg=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:sendVerificationCode",Y(h,c))})).apply(this,arguments)}function Xg(){return(Xg=(0,E.Z)(function*(h,c){return Se(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c))})).apply(this,arguments)}function em(){return(em=(0,E.Z)(function*(h,c){const l=yield Se(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c));if(l.temporaryProof)throw vn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const _u={USER_NOT_FOUND:"user-not-found"};function ea(){return(ea=(0,E.Z)(function*(h,c){return Se(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),_u)})).apply(this,arguments)}class ms extends pu{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new ms({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new ms({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function dA(h,c){return Xg.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function hA(h,c){return em.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function _h(h,c){return ea.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}=c;return p||l||m||v?new ms({verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}):null}}class ta{constructor(c){var l,p,m,v,T,P;const j=(0,V.zd)((0,V.pd)(c)),se=null!==(l=j.apiKey)&&void 0!==l?l:null,ge=null!==(p=j.oobCode)&&void 0!==p?p:null,me=function NI(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=j.mode)&&void 0!==m?m:null);K(se&&ge&&me,"argument-error"),this.apiKey=se,this.operation=me,this.code=ge,this.continueUrl=null!==(v=j.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(T=j.languageCode)&&void 0!==T?T:null,this.tenantId=null!==(P=j.tenantId)&&void 0!==P?P:null}static parseLink(c){const l=function OI(h){const c=(0,V.zd)((0,V.pd)(h)).link,l=c?(0,V.zd)((0,V.pd)(c)).deep_link_id:null,p=(0,V.zd)((0,V.pd)(h)).deep_link_id;return(p?(0,V.zd)((0,V.pd)(p)).link:null)||p||l||c||h}(c);try{return new ta(l)}catch{return null}}}let yh=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,p){return gs._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const m=ta.parseLink(p);return K(m,"argument-error"),gs._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class Zn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class na extends Zn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class re extends na{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return K("providerId"in l&&"signInMethod"in l,"argument-error"),Li._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return K(c.idToken||c.accessToken,"argument-error"),Li._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return re.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return re.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:m,pendingToken:v,nonce:T,providerId:P}=c;if(!p&&!m&&!l&&!v||!P)return null;try{return new re(P)._credential({idToken:l,accessToken:p,nonce:T,pendingToken:v})}catch{return null}}}let vh=(()=>{class h extends na{constructor(){super("facebook.com")}static credential(l){return Li._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),oe=(()=>{class h extends na{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Li._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:m}=l;if(!p&&!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),vu=(()=>{class h extends na{constructor(){super("github.com")}static credential(l){return Li._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class Fi extends pu{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return hi(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,hi(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,hi(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m,pendingToken:v}=l;return p&&m&&v&&p===m?new Fi(p,v):null}static _create(c,l){return new Fi(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oc extends Zn{constructor(c){K(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Oc.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Oc.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=Fi.fromJSON(c);return K(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return Fi._create(p,l)}catch{return null}}}let tm=(()=>{class h extends na{constructor(){super("twitter.com")}static credential(l,p){return Li._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:m}=l;if(!p||!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function Vi(h,c){return ra.apply(this,arguments)}function ra(){return(ra=(0,E.Z)(function*(h,c){return Se(h,"POST","/v1/accounts:signUp",Y(h,c))})).apply(this,arguments)}class en{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,m=!1){return(0,E.Z)(function*(){const v=yield pe._fromIdTokenResponse(c,p,m),T=fi(p);return new en({user:v,providerId:T,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,E.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const m=fi(p);return new en({user:c,providerId:m,_tokenResponse:p,operationType:l})})()}}function fi(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function kc(){return(kc=(0,E.Z)(function*(h){var c;const l=Ft(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new en({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield Vi(l,{returnSecureToken:!0}),m=yield en._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class ia extends V.ZR{constructor(c,l,p,m){var v;super(l.code,l.message),this.operationType=p,this.user=m,Object.setPrototypeOf(this,ia.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,m){return new ia(c,l,p,m)}}function Eh(h,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?ia._fromErrorAndOperation(h,v,c,p):v})}function wh(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function Lc(){return Lc=(0,E.Z)(function*(h,c){const l=(0,V.m9)(h);yield Eu(!0,l,c);const{providerUserInfo:p}=yield function du(h,c){return xr.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=wh(p||[]);return l.providerData=l.providerData.filter(v=>m.has(v.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),Lc.apply(this,arguments)}function Fc(h,c){return Th.apply(this,arguments)}function Th(){return(Th=(0,E.Z)(function*(h,c,l=!1){const p=yield qn(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return en._forOperation(h,"link",p)})).apply(this,arguments)}function Eu(h,c,l){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,E.Z)(function*(h,c,l){yield ci(c);const m=!1===h?"provider-already-linked":"no-such-provider";K(wh(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function nm(h,c){return Or.apply(this,arguments)}function Or(){return(Or=(0,E.Z)(function*(h,c,l=!1){const{auth:p}=h,m="reauthenticate";try{const v=yield qn(h,Eh(p,m,c,h),l);K(v.idToken,p,"internal-error");const T=ao(v.idToken);K(T,p,"internal-error");const{sub:P}=T;return K(h.uid===P,p,"user-mismatch"),en._forOperation(h,m,v)}catch(v){throw"auth/user-not-found"===v?.code&&ct(p,"user-mismatch"),v}})).apply(this,arguments)}function rm(h,c){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,E.Z)(function*(h,c,l=!1){const p="signIn",m=yield Eh(h,p,c),v=yield en._fromIdTokenResponse(h,p,m);return l||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function Uc(h,c){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,E.Z)(function*(h,c){return rm(Ft(h),c)})).apply(this,arguments)}function im(h,c){return bh.apply(this,arguments)}function bh(){return(bh=(0,E.Z)(function*(h,c){const l=(0,V.m9)(h);return yield Eu(!1,l,c.providerId),Fc(l,c)})).apply(this,arguments)}function Ah(h,c){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,E.Z)(function*(h,c){return nm((0,V.m9)(h),c)})).apply(this,arguments)}function Rh(){return(Rh=(0,E.Z)(function*(h,c){return Se(h,"POST","/v1/accounts:signInWithCustomToken",Y(h,c))})).apply(this,arguments)}function Ph(){return Ph=(0,E.Z)(function*(h,c){const l=Ft(h),p=yield function LI(h,c){return Rh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield en._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(m.user),m}),Ph.apply(this,arguments)}class wu{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?gi._fromServerResponse(c,l):"totpInfo"in l?Bc._fromServerResponse(c,l):ct(c,"internal-error")}}class gi extends wu{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new gi(l)}}class Bc extends wu{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Bc(l)}}function Sn(h,c,l){var p;K((null===(p=l.url)||void 0===p?void 0:p.length)>0,h,"invalid-continue-uri"),K(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(K(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(K(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function Kn(h){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,E.Z)(function*(h){const c=Ft(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function En(){return(En=(0,E.Z)(function*(h,c,l){const p=Ft(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Sn(p,m,l),yield Mc(p,m,"getOobCode",rt)})).apply(this,arguments)}function Rn(){return Rn=(0,E.Z)(function*(h,c,l){yield PI((0,V.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var p=(0,E.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Kn(h),m});return function(m){return p.apply(this,arguments)}}())}),Rn.apply(this,arguments)}function jc(){return jc=(0,E.Z)(function*(h,c){yield function MI(h,c){return xc.apply(this,arguments)}((0,V.m9)(h),{oobCode:c})}),jc.apply(this,arguments)}function Tu(h,c){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,E.Z)(function*(h,c){const l=(0,V.m9)(h),p=yield PI(l,{oobCode:c}),m=p.requestType;switch(K(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(p.mfaInfo,l,"internal-error");default:K(p.email,l,"internal-error")}let v=null;return p.mfaInfo&&(v=wu._fromServerResponse(Ft(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:m}})).apply(this,arguments)}function Vt(){return(Vt=(0,E.Z)(function*(h,c){const{data:l}=yield Tu((0,V.m9)(h),c);return l.email})).apply(this,arguments)}function Re(){return(Re=(0,E.Z)(function*(h,c,l){const p=Ft(h),T=yield Mc(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vi).catch(j=>{throw"auth/password-does-not-meet-requirements"===j.code&&Kn(h),j}),P=yield en._fromIdTokenResponse(p,"signIn",T);return yield p._updateCurrentUser(P.user),P})).apply(this,arguments)}function Pn(){return(Pn=(0,E.Z)(function*(h,c,l){const p=Ft(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(T,P){K(P.handleCodeInApp,p,"argument-error"),P&&Sn(p,T,P)})(m,l),yield Mc(p,m,"getOobCode",Zg)})).apply(this,arguments)}function wt(){return(wt=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h),m=yh.credentialWithLink(c,l||Wr());return K(m._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),Uc(p,m)})).apply(this,arguments)}function Qr(){return(Qr=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:createAuthUri",Y(h,c))})).apply(this,arguments)}function _s(){return _s=(0,E.Z)(function*(h,c){const p={identifier:c,continueUri:no()?Wr():"http://localhost"},{signinMethods:m}=yield function sr(h,c){return Qr.apply(this,arguments)}((0,V.m9)(h),p);return m||[]}),_s.apply(this,arguments)}function Ro(){return Ro=(0,E.Z)(function*(h,c){const l=(0,V.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&Sn(l.auth,m,c);const{email:v}=yield function Wg(h,c){return ph.apply(this,arguments)}(l.auth,m);v!==h.email&&(yield h.reload())}),Ro.apply(this,arguments)}function ys(){return ys=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&Sn(p.auth,v,l);const{email:T}=yield function Kg(h,c){return Qg.apply(this,arguments)}(p.auth,v);T!==h.email&&(yield h.reload())}),ys.apply(this,arguments)}function Yr(){return(Yr=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function $c(){return $c=(0,E.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,V.m9)(h),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},T=yield qn(p,function sa(h,c){return Yr.apply(this,arguments)}(p.auth,v));p.displayName=T.displayName||null,p.photoURL=T.photoUrl||null;const P=p.providerData.find(({providerId:j})=>"password"===j);P&&(P.displayName=p.displayName,P.photoURL=p.photoURL),yield p._updateTokensIfNecessary(T)}),$c.apply(this,arguments)}function Mo(h,c,l){return Ve.apply(this,arguments)}function Ve(){return Ve=(0,E.Z)(function*(h,c,l){const{auth:p}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),l&&(v.password=l);const T=yield qn(h,function Ee(h,c){return Gg.apply(this,arguments)}(p,v));yield h._updateTokensIfNecessary(T,!0)}),Ve.apply(this,arguments)}class Ui{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class yi extends Ui{constructor(c,l,p,m){super(c,l,p),this.username=m}}class zc extends Ui{constructor(c,l){super(c,"facebook.com",l)}}class aa extends yi{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class un extends Ui{constructor(c,l){super(c,"google.com",l)}}class Nh extends yi{constructor(c,l,p){super(c,"twitter.com",l,p)}}function Qn(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function xh(h){var c,l;if(!h)return null;const{providerId:p}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!p&&h?.idToken){const T=null===(l=null===(c=ao(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(T)return new Ui(v,"anonymous"!==T&&"custom"!==T?T:null)}if(!p)return null;switch(p){case"facebook.com":return new zc(v,m);case"github.com":return new aa(v,m);case"google.com":return new un(v,m);case"twitter.com":return new Nh(v,m,h.screenName||null);case"custom":case"anonymous":return new Ui(v,null);default:return new Ui(v,p,m)}}(l)}class la{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new la("enroll",c,l)}static _fromMfaPendingCredential(c){return new la("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return la._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return la._fromIdtoken(c.multiFactorSession.idToken)}return null}}class dm{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Ft(c),m=l.customData._serverResponse,v=(m.mfaInfo||[]).map(P=>wu._fromServerResponse(p,P));K(m.mfaPendingCredential,p,"internal-error");const T=la._fromMfaPendingCredential(m.mfaPendingCredential);return new dm(T,v,function(){var P=(0,E.Z)(function*(j){const se=yield j._process(p,T);delete m.mfaInfo,delete m.mfaPendingCredential;const ge=Object.assign(Object.assign({},m),{idToken:se.idToken,refreshToken:se.refreshToken});switch(l.operationType){case"signIn":const me=yield en._fromIdTokenResponse(p,l.operationType,ge);return yield p._updateCurrentUser(me.user),me;case"reauthenticate":return K(l.user,p,"internal-error"),en._forOperation(l.user,l.operationType,ge);default:ct(p,"internal-error")}});return function(j){return P.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,E.Z)(function*(){return l.signInResolver(c)})()}}class hm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>wu._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new hm(c)}getSession(){var c=this;return(0,E.Z)(function*(){return la._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,E.Z)(function*(){const m=c,v=yield p.getSession(),T=yield qn(p.user,m._process(p.user.auth,v,l));return yield p.user._updateTokensIfNecessary(T),p.user.reload()})()}unenroll(c){var l=this;return(0,E.Z)(function*(){const p="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const v=yield qn(l.user,function IA(h,c){return Z(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Y(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:T})=>T!==p),yield l.user._updateTokensIfNecessary(v),yield l.user.reload()}catch(v){throw v}})()}}const fm=new WeakMap,Du="__sak";class kh{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Du,"1"),this.storage.removeItem(Du),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bi=(()=>{class h extends kh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wA(){const h=(0,V.z$)();return hs(h)||je(h)}()&&function di(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=St(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const m=this.storage.getItem(p),v=this.localCache[p];m!==v&&l(p,v,m)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((P,j,se)=>{this.notifyListeners(P,se)});const m=l.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!p)return}const v=()=>{const P=this.storage.getItem(m);!p&&this.localCache[m]===P||this.notifyListeners(m,P)},T=this.storage.getItem(m);!function Lt(){return(0,V.w1)()&&10===document.documentMode}()||T===l.newValue||l.newValue===l.oldValue?v():setTimeout(v,10)}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var m=()=>super._set,v=this;return(0,E.Z)(function*(){yield m().call(v,l,p),v.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,m=this;return(0,E.Z)(function*(){const v=yield p().call(m,l);return m.localCache[l]=JSON.stringify(v),v})()}_remove(l){var p=()=>super._remove,m=this;return(0,E.Z)(function*(){yield p().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),Ir=(()=>{class h extends kh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return h.type="SESSION",h})();let UI=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(v=>v.isListeningto(l));if(p)return p;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,E.Z)(function*(){const m=l,{eventId:v,eventType:T,data:P}=m.data,j=p.handlersMap[T];if(!j?.size)return;m.ports[0].postMessage({status:"ack",eventId:v,eventType:T});const se=Array.from(j).map(function(){var me=(0,E.Z)(function*(Gt){return Gt(m.origin,P)});return function(Gt){return me.apply(this,arguments)}}()),ge=yield function pm(h){return Promise.all(h.map(function(){var c=(0,E.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(se);m.ports[0].postMessage({status:"done",eventId:v,eventType:T,response:ge})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function bu(h="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return h+l}class gm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var m=this;return(0,E.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let T,P;return new Promise((j,se)=>{const ge=bu("",20);v.port1.start();const me=setTimeout(()=>{se(new Error("unsupported_event"))},p);P={messageChannel:v,onMessage(Gt){const Ei=Gt;if(Ei.data.eventId===ge)switch(Ei.data.status){case"ack":clearTimeout(me),T=setTimeout(()=>{se(new Error("timeout"))},3e3);break;case"done":clearTimeout(T),j(Ei.data.response);break;default:clearTimeout(me),clearTimeout(T),se(new Error("invalid_response"))}}},m.handlers.add(P),v.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:c,eventId:ge,data:l},[v.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function cn(){return window}function Au(){return typeof cn().WorkerGlobalScope<"u"&&"function"==typeof cn().importScripts}function Jr(){return(Jr=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Lh="firebaseLocalStorageDb",Fh="firebaseLocalStorage",Dt="fbase_key";class vs{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function xo(h,c){return h.transaction([Fh],c?"readwrite":"readonly").objectStore(Fh)}function Vh(){const h=indexedDB.open(Lh,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const p=h.result;try{p.createObjectStore(Fh,{keyPath:Dt})}catch(m){l(m)}}),h.addEventListener("success",(0,E.Z)(function*(){const p=h.result;p.objectStoreNames.contains(Fh)?c(p):(p.close(),yield function ur(){const h=indexedDB.deleteDatabase(Lh);return new vs(h).toPromise()}(),c(yield Vh()))}))})}function da(h,c,l){return No.apply(this,arguments)}function No(){return(No=(0,E.Z)(function*(h,c,l){const p=xo(h,!0).put({[Dt]:c,value:l});return new vs(p).toPromise()})).apply(this,arguments)}function Uh(){return(Uh=(0,E.Z)(function*(h,c){const l=xo(h,!1).get(c),p=yield new vs(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function qc(h,c){const l=xo(h,!0).delete(c);return new vs(l).toPromise()}const ha=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,E.Z)(function*(){return l.db||(l.db=yield Vh()),l.db})()}_withRetries(l){var p=this;return(0,E.Z)(function*(){let m=0;for(;;)try{const v=yield p._openDb();return yield l(v)}catch(v){if(m++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,E.Z)(function*(){return Au()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,E.Z)(function*(){l.receiver=UI._getInstance(function _m(){return Au()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,E.Z)(function*(m,v){return{keyProcessed:(yield l._poll()).includes(v.key)}});return function(m,v){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,E.Z)(function*(m,v){return["keyChanged"]});return function(m,v){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,E.Z)(function*(){var p,m;if(l.activeServiceWorker=yield function jI(){return Jr.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new gm(l.activeServiceWorker);const v=yield l.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(m=v[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,E.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function mm(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const l=yield Vh();return yield da(l,Du,"1"),yield qc(l,Du),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,E.Z)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var m=this;return(0,E.Z)(function*(){return m._withPendingWrite((0,E.Z)(function*(){return yield m._withRetries(v=>da(v,l,p)),m.localCache[l]=p,m.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,E.Z)(function*(){const m=yield p._withRetries(v=>function kr(h,c){return Uh.apply(this,arguments)}(v,l));return p.localCache[l]=m,m})()}_remove(l){var p=this;return(0,E.Z)(function*(){return p._withPendingWrite((0,E.Z)(function*(){return yield p._withRetries(m=>qc(m,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,E.Z)(function*(){const p=yield l._withRetries(T=>{const P=xo(T,!1).getAll();return new vs(P).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const m=[],v=new Set;if(0!==p.length)for(const{fbase_key:T,value:P}of p)v.add(T),JSON.stringify(l.localCache[T])!==JSON.stringify(P)&&(l.notifyListeners(T,P),m.push(T));for(const T of Object.keys(l.localCache))l.localCache[T]&&!v.has(T)&&(l.notifyListeners(T,null),m.push(T));return m})()}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),fa=1e12;class Is{constructor(c){this.auth=c,this.counter=fa,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new Le(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||fa;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||fa))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,E.Z)(function*(){var p;return null===(p=l._widgets.get(c||fa))||void 0===p||p.execute(),""})()}}class Le{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;K(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Im(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<h;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Em=Bg("rcb"),qI=new Zr(3e4,6e4);class WI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=cn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return K(function wm(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&An(cn().grecaptcha)?Promise.resolve(cn().grecaptcha):new Promise((p,m)=>{const v=cn().setTimeout(()=>{m(vt(c,"network-request-failed"))},qI.get());cn()[Em]=()=>{cn().clearTimeout(v),delete cn()[Em];const P=cn().grecaptcha;if(!P||!An(P))return void m(vt(c,"internal-error"));const j=P.render;P.render=(se,ge)=>{const me=j(se,ge);return this.counter++,me},this.hostLanguage=l,p(P)},Ug(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Em,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(v),m(vt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=cn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class pa{load(c){return(0,E.Z)(function*(){return new Is(c)})()}clearedOneInstance(){}}const Tm="recaptcha",ZI={theme:"light",type:"image"};class KI{constructor(c,l,p=Object.assign({},ZI)){this.parameters=p,this.type=Tm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ft(c),this.isInvisible="invisible"===this.parameters.size,K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;K(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pa:new WI,this.validateStartingState()}verify(){var c=this;return(0,E.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(v=>{const T=P=>{P&&(c.tokenChangeListeners.delete(T),v(P))};c.tokenChangeListeners.add(T),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=cn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,E.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,E.Z)(function*(){K(no()&&!Au(),c.auth,"internal-error"),yield function QI(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function lu(h){return ro.apply(this,arguments)}(c.auth);K(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class jh{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=ms._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function it(){return(it=(0,E.Z)(function*(h,c,l){const p=Ft(h),m=yield Oo(p,c,(0,V.m9)(l));return new jh(m,v=>Uc(p,v))})).apply(this,arguments)}function ga(){return(ga=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);yield Eu(!1,p,"phone");const m=yield Oo(p.auth,c,(0,V.m9)(l));return new jh(m,v=>im(p,v))})).apply(this,arguments)}function Zc(){return(Zc=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h),m=yield Oo(p.auth,c,(0,V.m9)(l));return new jh(m,v=>Ah(p,v))})).apply(this,arguments)}function Oo(h,c,l){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,E.Z)(function*(h,c,l){var p;const m=yield l.verify();try{let v;if(K("string"==typeof m,h,"argument-error"),K(l.type===Tm,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const T=v.session;if("phoneNumber"in v)return K("enroll"===T.type,h,"internal-error"),(yield function _A(h,c){return Z(h,"POST","/v2/accounts/mfaEnrollment:start",Y(h,c))}(h,{idToken:T.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{K("signin"===T.type,h,"internal-error");const P=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return K(P,h,"missing-multi-factor-info"),(yield function ym(h,c){return Z(h,"POST","/v2/accounts/mfaSignIn:start",Y(h,c))}(h,{mfaPendingCredential:T.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:T}=yield function mh(h,c){return Jg.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:m});return T}}finally{l._reset()}}),Xr.apply(this,arguments)}function Ru(){return(Ru=(0,E.Z)(function*(h,c){yield Fc((0,V.m9)(h),c)})).apply(this,arguments)}let Pu=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Ft(l)}verifyPhoneNumber(l,p){return Oo(this.auth,l,(0,V.m9)(p))}static credential(l,p){return ms._fromVerification(l,p)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:m}=l;return p&&m?ms._fromTokenResponse(p,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function ma(h,c){return c?be(c):(K(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class Kc extends pu{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return hi(c,this._buildIdpRequest())}_linkToIdToken(c,l){return hi(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return hi(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function cr(h){return rm(h.auth,new Kc(h),h.bypassAuthState)}function lo(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),nm(l,new Kc(h),h.bypassAuthState)}function Cm(h){return ei.apply(this,arguments)}function ei(){return(ei=(0,E.Z)(function*(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),Fc(l,new Kc(h),h.bypassAuthState)})).apply(this,arguments)}class $i{constructor(c,l,p,m,v=!1){this.auth=c,this.resolver=p,this.user=m,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,E.Z)(function*(p,m){c.pendingPromise={resolve:p,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,E.Z)(function*(){const{urlResponse:p,sessionId:m,postBody:v,tenantId:T,error:P,type:j}=c;if(P)return void l.reject(P);const se={auth:l.auth,requestUri:p,sessionId:m,tenantId:T||void 0,postBody:v||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(j)(se))}catch(ge){l.reject(ge)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return cr;case"linkViaPopup":case"linkViaRedirect":return Cm;case"reauthViaPopup":case"reauthViaRedirect":return lo;default:ct(this.auth,"internal-error")}}resolve(c){Xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const YI=new Zr(2e3,1e4);function Hh(){return(Hh=(0,E.Z)(function*(h,c,l){const p=Ft(h);tt(h,c,Zn);const m=ma(p,l);return new xu(p,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function Mu(){return(Mu=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);tt(p.auth,c,Zn);const m=ma(p.auth,l);return new xu(p.auth,"reauthViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}function Qc(){return(Qc=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);tt(p.auth,c,Zn);const m=ma(p.auth,l);return new xu(p.auth,"linkViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}let xu=(()=>{class h extends $i{constructor(l,p,m,v,T){super(l,p,v,T),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,E.Z)(function*(){const p=yield l.execute();return K(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,E.Z)(function*(){Xt(1===l.filter.length,"Popup operations only handle one event");const p=bu();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(vt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,m;this.pollId=null!==(m=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(vt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,YI.get())};l()}}return h.currentPopupAction=null,h})();const XI="pendingRedirect",_a=new Map;class qh extends $i{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,E.Z)(function*(){let p=_a.get(l.auth._key());if(!p){try{const v=(yield function bm(h,c){return Yc.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(v)}catch(m){p=()=>Promise.reject(m)}_a.set(l.auth._key(),p)}return l.bypassAuthState||_a.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,E.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const m=yield p.auth._redirectUserForId(c.eventId);if(m)return p.user=m,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Yc(){return(Yc=(0,E.Z)(function*(h,c){const l=ko(c),p=Vn(h);if(!(yield p._isAvailable()))return!1;const m="true"===(yield p._get(l));return yield p._remove(l),m})).apply(this,arguments)}function Jc(h,c){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,E.Z)(function*(h,c){return Vn(h)._set(ko(c),"true")})).apply(this,arguments)}function Wh(h,c){_a.set(h._key(),c)}function Vn(h){return be(h._redirectPersistence)}function ko(h){return Ue(XI,h.config.apiKey,h.name)}function Nt(h,c,l){return function eE(h,c,l){return Zh.apply(this,arguments)}(h,c,l)}function Zh(){return(Zh=(0,E.Z)(function*(h,c,l){const p=Ft(h);tt(h,c,Zn),yield p._initializationPromise;const m=ma(p,l);return yield Jc(m,p),m._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function tE(h,c,l){return function nE(h,c,l){return el.apply(this,arguments)}(h,c,l)}function el(){return(el=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);tt(p.auth,c,Zn),yield p.auth._initializationPromise;const m=ma(p.auth,l);yield Jc(m,p.auth);const v=yield nl(p);return m._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function Am(h,c,l){return function tl(h,c,l){return Hi.apply(this,arguments)}(h,c,l)}function Hi(){return(Hi=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);tt(p.auth,c,Zn),yield p.auth._initializationPromise;const m=ma(p.auth,l);yield Eu(!1,p,c.providerId),yield Jc(m,p.auth);const v=yield nl(p);return m._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function ya(){return(ya=(0,E.Z)(function*(h,c){return yield Ft(h)._initializationPromise,Es(h,c,!1)})).apply(this,arguments)}function Es(h,c){return va.apply(this,arguments)}function va(){return(va=(0,E.Z)(function*(h,c,l=!1){const p=Ft(h),m=ma(p,c),T=yield new qh(p,m,l).execute();return T&&!l&&(delete T.user._redirectEventId,yield p._persistUserIfCurrent(T.user),yield p._setRedirectUser(null,c)),T})).apply(this,arguments)}function nl(h){return rl.apply(this,arguments)}function rl(){return(rl=(0,E.Z)(function*(h){const c=bu(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class Rm{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function iE(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ia(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!Ia(c)){const m=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(vt(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ws(c))}saveEventToCache(c){this.cachedEventUids.add(ws(c)),this.lastProcessedEventTime=Date.now()}}function ws(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function Ia({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function il(h){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,E.Z)(function*(h,c={}){return Z(h,"GET","/v1/projects",c)})).apply(this,arguments)}const oE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sE=/^https?/;function Pm(){return(Pm=(0,E.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield il(h);for(const l of c)try{if(Qh(l))return}catch{}ct(h,"unauthorized-domain")})).apply(this,arguments)}function Qh(h){const c=Wr(),{protocol:l,hostname:p}=new URL(c);if(h.startsWith("chrome-extension://")){const T=new URL(h);return""===T.hostname&&""===p?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&T.hostname===p}if(!sE.test(l))return!1;if(oE.test(h))return p===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(p)}const Nu=new Zr(3e4,6e4);function Mm(){const h=cn().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let Ea=null;const AA=new Zr(5e3,15e3),xm="__/auth/iframe",Nm="emulator/auth/iframe",aE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uE(h){const c=h.config;K(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?O(c,Nm):`https://${h.config.authDomain}/${xm}`,p={apiKey:c.apiKey,appName:h.name,v:Fe.SDK_VERSION},m=zi.get(h.config.apiHost);m&&(p.eid=m);const v=h._getFrameworks();return v.length&&(p.fw=v.join(",")),`${l}?${(0,V.xO)(p).slice(1)}`}function ku(){return ku=(0,E.Z)(function*(h){const c=yield function ol(h){return Ea=Ea||function Ou(h){return new Promise((c,l)=>{var p,m,v;function T(){Mm(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Mm(),l(vt(h,"network-request-failed"))},timeout:Nu.get()})}if(null!==(m=null===(p=cn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(v=cn().gapi)||void 0===v||!v.load){const P=Bg("iframefcb");return cn()[P]=()=>{gapi.load?T():l(vt(h,"network-request-failed"))},Ug(`https://apis.google.com/js/api.js?onload=${P}`).catch(j=>l(j))}T()}}).catch(c=>{throw Ea=null,c})}(h),Ea}(h),l=cn().gapi;return K(l,h,"internal-error"),c.open({where:document.body,url:uE(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aE,dontclear:!0},p=>new Promise(function(){var m=(0,E.Z)(function*(v,T){yield p.restyle({setHideOnLeave:!1});const P=vt(h,"network-request-failed"),j=cn().setTimeout(()=>{T(P)},AA.get());function se(){cn().clearTimeout(j),v(p)}p.ping(se).then(se,()=>{T(P)})});return function(v,T){return m.apply(this,arguments)}}()))}),ku.apply(this,arguments)}const Om={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const lE="__/auth/handler",ul="emulator/auth/handler",Ts=encodeURIComponent("fac");function Xh(h,c,l,p,m,v){return cl.apply(this,arguments)}function cl(){return(cl=(0,E.Z)(function*(h,c,l,p,m,v){K(h.config.authDomain,h,"auth-domain-config-required"),K(h.config.apiKey,h,"invalid-api-key");const T={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:p,v:Fe.SDK_VERSION,eventId:m};if(c instanceof Zn){c.setDefaultLanguage(h.languageCode),T.providerId=c.providerId||"",(0,V.xb)(c.getCustomParameters())||(T.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ge,me]of Object.entries(v||{}))T[ge]=me}if(c instanceof na){const ge=c.getScopes().filter(me=>""!==me);ge.length>0&&(T.scopes=ge.join(","))}h.tenantId&&(T.tid=h.tenantId);const P=T;for(const ge of Object.keys(P))void 0===P[ge]&&delete P[ge];const j=yield h._getAppCheckToken(),se=j?`#${Ts}=${encodeURIComponent(j)}`:"";return`${function Vm({config:h}){return h.emulator?O(h,ul):`https://${h.authDomain}/${lE}`}(h)}?${(0,V.xO)(P).slice(1)}${se}`})).apply(this,arguments)}const Lo="webStorageSupport",hn=class wa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ir,this._completeRedirectFn=Es,this._overrideRedirectResult=Wh}_openPopup(c,l,p,m){var v=this;return(0,E.Z)(function*(){var T;Xt(null===(T=v.eventManagers[c._key()])||void 0===T?void 0:T.manager,"_initialize() not called before _openPopup()");const P=yield Xh(c,l,p,Wr(),m);return function Lm(h,c,l,p=500,m=600){const v=Math.max((window.screen.availHeight-m)/2,0).toString(),T=Math.max((window.screen.availWidth-p)/2,0).toString();let P="";const j=Object.assign(Object.assign({},Om),{width:p.toString(),height:m.toString(),top:v,left:T}),se=(0,V.z$)().toLowerCase();l&&(P=Pc(se)?"_blank":l),li(se)&&(c=c||"http://localhost",j.scrollbars="yes");const ge=Object.entries(j).reduce((Gt,[Ei,ju])=>`${Gt}${Ei}=${ju},`,"");if(function H(h=(0,V.z$)()){var c;return je(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(se)&&"_self"!==P)return function Fm(h,c){const l=document.createElement("a");l.href=h,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",P),new Jh(null);const me=window.open(c||"",P,ge);K(me,h,"popup-blocked");try{me.focus()}catch{}return new Jh(me)}(c,P,bu())})()}_openRedirect(c,l,p,m){var v=this;return(0,E.Z)(function*(){return yield v._originValidation(c),function BI(h){cn().location.href=h}(yield Xh(c,l,p,Wr(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:v}=this.eventManagers[l];return m?Promise.resolve(m):(Xt(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,E.Z)(function*(){const p=yield function sl(h){return ku.apply(this,arguments)}(c),m=new Rm(c);return p.register("authEvent",v=>(K(v?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=p,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Lo,{type:Lo},m=>{var v;const T=null===(v=m?.[0])||void 0===v?void 0:v[Lo];void 0!==T&&l(!!T),ct(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function bA(h){return Pm.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return St()||hs()||je()}};class dE{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Jt("unexpected MultiFactorSessionType")}}}class Lu extends dE{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Lu(c)}_finalizeEnroll(c,l,p){return function yA(h,c){return Z(h,"POST","/v2/accounts/mfaEnrollment:finalize",Y(h,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function vm(h,c){return Z(h,"POST","/v2/accounts/mfaSignIn:finalize",Y(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ef=(()=>{class h{constructor(){}static assertion(l){return Lu._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var Cs="@firebase/auth";class Um{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,E.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ca(){return window}(0,V.Pz)("authIdTokenMaxAge"),function Ta(h){(0,Fe._registerComponent)(new ln.wA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:T,authDomain:P}=p.options;K(T&&!T.includes(":"),"invalid-api-key",{appName:p.name});const j={apiKey:T,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ao(h)},se=new mt(p,m,v,j);return function uA(h,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(be);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(p,c?.popupRedirectResolver)}(se,l),se},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Fe._registerComponent)(new ln.wA("auth-internal",c=>{const l=Ft(c.getProvider("auth").getImmediate());return new Um(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Fe.registerVersion)(Cs,"1.5.1",function tf(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Fe.registerVersion)(Cs,"1.5.1","esm2017")}("Browser");function Fo(){return Fo=(0,E.Z)(function*(h,c,l){var p;const{BuildInfo:m}=Ca();Xt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function Er(h){return Vo.apply(this,arguments)}(c.sessionId),T={};return je()?T.ibi=m.packageName:b()?T.apn=m.packageName:ct(h,"operation-not-supported-in-this-environment"),m.displayName&&(T.appDisplayName=m.displayName),T.sessionId=v,Xh(h,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,T)}),Fo.apply(this,arguments)}function nf(){return(nf=(0,E.Z)(function*(h){const{BuildInfo:c}=Ca(),l={};je()?l.iosBundleId=c.packageName:b()?l.androidPackageName=c.packageName:ct(h,"operation-not-supported-in-this-environment"),yield il(h,l)})).apply(this,arguments)}function bs(){return(bs=(0,E.Z)(function*(h,c,l){const{cordova:p}=Ca();let m=()=>{};try{yield new Promise((v,T)=>{let P=null;function j(){var me;v();const Gt=null===(me=p.plugins.browsertab)||void 0===me?void 0:me.close;"function"==typeof Gt&&Gt(),"function"==typeof l?.close&&l.close()}function se(){P||(P=window.setTimeout(()=>{T(vt(h,"redirect-cancelled-by-user"))},2e3))}function ge(){"visible"===document?.visibilityState&&se()}c.addPassiveListener(j),document.addEventListener("resume",se,!1),b()&&document.addEventListener("visibilitychange",ge,!1),m=()=>{c.removePassiveListener(j),document.removeEventListener("resume",se,!1),document.removeEventListener("visibilitychange",ge,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function Vo(){return(Vo=(0,E.Z)(function*(h){const c=function Bm(h){if(Xt(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let p=0;p<h.length;p++)l[p]=h.charCodeAt(p);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class hl extends Rm{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,E.Z)(function*(){yield c.initPromise})()}}function sf(h){return jm.apply(this,arguments)}function jm(){return(jm=(0,E.Z)(function*(h){const c=yield Uo()._get($m(h));return c&&(yield Uo()._remove($m(h))),c})).apply(this,arguments)}function af(){const h=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return h.join("")}function Uo(){return be(Bi)}function $m(h){return Ue("authEvent",h.config.apiKey,h.name)}function fl(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,V.zd)(l.join("?"))}const IE=class vE{constructor(){this._redirectPersistence=Ir,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Es,this._overrideRedirectResult=Wh}_initialize(c){var l=this;return(0,E.Z)(function*(){const p=c._key();let m=l.eventManagers.get(p);return m||(m=new hl(c),l.eventManagers.set(p,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){ct(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,m){var v=this;return(0,E.Z)(function*(){!function mE(h){var c,l,p,m,v,T,P,j,se,ge;const me=Ca();K("function"==typeof(null===(c=me?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(typeof(null===(l=me?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(v=null===(m=null===(p=me?.cordova)||void 0===p?void 0:p.plugins)||void 0===m?void 0:m.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(j=null===(P=null===(T=me?.cordova)||void 0===T?void 0:T.plugins)||void 0===P?void 0:P.browsertab)||void 0===j?void 0:j.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(ge=null===(se=me?.cordova)||void 0===se?void 0:se.InAppBrowser)||void 0===ge?void 0:ge.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const T=yield v._initialize(c);yield T.initialized(),T.resetRedirect(),function Gh(){_a.clear()}(),yield v._originValidation(c);const P=function rf(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:af(),postBody:null,tenantId:h.tenantId,error:vt(h,"no-auth-event")}}(c,p,m);yield function NA(h,c){return Uo()._set($m(h),c)}(c,P);const j=yield function xA(h,c,l){return Fo.apply(this,arguments)}(c,P,l),se=yield function wn(h){const{cordova:c}=Ca();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let m=null;p?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function nt(h=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(j);return function gE(h,c,l){return bs.apply(this,arguments)}(c,T,se)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function pE(h){return nf.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:m,BuildInfo:v}=Ca(),T=setTimeout((0,E.Z)(function*(){yield sf(c),l.onEvent(zm())}),500),P=function(){var ge=(0,E.Z)(function*(me){clearTimeout(T);const Gt=yield sf(c);let Ei=null;Gt&&me?.url&&(Ei=function Lr(h,c){var l,p;const m=function _E(h){const c=fl(h),l=c.link?decodeURIComponent(c.link):void 0,p=fl(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return fl(m).link||m||p||l||h}(c);if(m.includes("/__/auth/callback")){const v=fl(m),T=v.firebaseError?function Hm(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,P=null===(p=null===(l=T?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],j=P?vt(P):null;return j?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:j,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(Gt,me.url)),l.onEvent(Ei||zm())});return function(Gt){return ge.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,P);const j=m,se=`${v.packageName.toLowerCase()}://`;Ca().handleOpenURL=function(){var ge=(0,E.Z)(function*(me){if(me.toLowerCase().startsWith(se)&&P({url:me}),"function"==typeof j)try{j(me)}catch(Gt){console.error(Gt)}});return function(me){return ge.apply(this,arguments)}}()}};function zm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vt("no-auth-event")}}function Uu(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function qm(h=(0,V.z$)()){return!("file:"!==Uu()&&"ionic:"!==Uu()&&"capacitor:"!==Uu()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zm(){try{const h=self.localStorage,c=bu();if(h)return h.setItem(c,"1"),h.removeItem(c),!function Wm(h=(0,V.z$)()){return function cf(){return(0,V.w1)()&&11===document?.documentMode}()||function ml(h=(0,V.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,V.hl)()}catch{return lf()&&(0,V.hl)()}return!1}function lf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bo(){return(function gl(){return"http:"===Uu()||"https:"===Uu()}()||(0,V.ru)()||qm())&&!function Gm(){return(0,V.b$)()||(0,V.UG)()}()&&Zm()&&!lf()}function Da(){return qm()&&typeof document<"u"}function Km(){return(Km=(0,E.Z)(function*(){return!!Da()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const Fr={LOCAL:"local",NONE:"none",SESSION:"session"},_l=K,Ym="persistence";function df(h){return fo.apply(this,arguments)}function fo(){return(fo=(0,E.Z)(function*(h){yield h._initializationPromise;const c=yl(),l=Ue(Ym,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function yl(){var h;try{return(null===(h=function Qm(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const vl=K;class qi{constructor(){this.browserResolver=be(hn),this.cordovaResolver=be(IE),this.underlyingResolver=null,this._redirectPersistence=Ir,this._completeRedirectFn=Es,this._overrideRedirectResult=Wh}_initialize(c){var l=this;return(0,E.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,m){var v=this;return(0,E.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,l,p,m)})()}_openRedirect(c,l,p,m){var v=this;return(0,E.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,l,p,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Da()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,E.Z)(function*(){if(c.underlyingResolver)return;const l=yield function wE(){return Km.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function Xm(h){return h.unwrap()}function t_(h){return CE(h)}function CE(h){const{_tokenResponse:c}=h instanceof V.ZR?h.customData:h;if(!c)return null;if(!(h instanceof V.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Pu.credentialFromResult(h);const l=c.providerId;if(!l||l===_t.PASSWORD)return null;let p;switch(l){case _t.GOOGLE:p=oe;break;case _t.FACEBOOK:p=vh;break;case _t.GITHUB:p=vu;break;case _t.TWITTER:p=tm;break;default:const{oauthIdToken:m,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:P,nonce:j}=c;return v||T||m||P?P?l.startsWith("saml.")?Fi._create(l,P):Li._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:v}):new re(l).credential({idToken:m,accessToken:v,rawNonce:j}):null}return h instanceof V.ZR?p.credentialFromError(h):p.credentialFromResult(h)}function Yn(h,c){return c.catch(l=>{throw l instanceof V.ZR&&function Il(h,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new n_(h,function mA(h,c){var l;const p=(0,V.m9)(h),m=c;return K(c.customData.operationType,p,"argument-error"),K(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),dm._fromError(p,m)}(h,c));else if(p){const m=CE(c),v=c;m&&(v.credential=m,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:t_(l),additionalUserInfo:Qn(l),user:Gi.getOrCreate(m)}})}function hf(h,c){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,E.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>Yn(h,l.confirm(p))}})).apply(this,arguments)}class n_{constructor(c,l){this.resolver=l,this.auth=function e_(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Yn(Xm(this.auth),this.resolver.resolveSignIn(c))}}class Gi{constructor(c){this._delegate=c,this.multiFactor=function EA(h){const c=(0,V.m9)(h);return fm.has(c)||fm.set(c,hm._fromUser(c)),fm.get(c)}(c)}static getOrCreate(c){return Gi.USER_MAP.has(c)||Gi.USER_MAP.set(c,new Gi(c)),Gi.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,E.Z)(function*(){return Yn(l.auth,im(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,E.Z)(function*(){return hf(p.auth,function Wc(h,c,l){return ga.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,E.Z)(function*(){return Yn(l.auth,function zh(h,c,l){return Qc.apply(this,arguments)}(l._delegate,c,qi))})()}linkWithRedirect(c){var l=this;return(0,E.Z)(function*(){return yield df(Ft(l.auth)),Am(l._delegate,c,qi)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,E.Z)(function*(){return Yn(l.auth,Ah(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return hf(this.auth,function Tt(h,c,l){return Zc.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Yn(this.auth,function JI(h,c,l){return Mu.apply(this,arguments)}(this._delegate,c,qi))}reauthenticateWithRedirect(c){var l=this;return(0,E.Z)(function*(){return yield df(Ft(l.auth)),tE(l._delegate,c,qi)})()}sendEmailVerification(c){return function sm(h,c){return Ro.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,E.Z)(function*(){return yield function Iu(h,c){return Lc.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function Po(h,c){return Mo((0,V.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function Hc(h,c){return Mo((0,V.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function $h(h,c){return Ru.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Cu(h,c){return $c.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function qt(h,c,l){return ys.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Gi.USER_MAP=new WeakMap;const Ii=K;let r_=(()=>{class h{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;Ii(m,"invalid-api-key",{appName:l.name}),Ii(m,"invalid-api-key",{appName:l.name});const v=typeof window<"u"?qi:void 0;this._delegate=p.initialize({options:{persistence:wl(m,l.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(_n),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Gi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function zg(h,c,l){const p=Ft(h);K(p._canInitEmulator,p,"emulator-config-failed"),K(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const m=!!l?.disableWarnings,v=RI(c),{host:T,port:P}=function vr(h){const c=RI(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(p);if(m){const v=m[1];return{host:v,port:xe(p.substr(v.length+1))}}{const[v,T]=p.split(":");return{host:v,port:xe(T)}}}(c);p.config.emulator={url:`${v}//${T}${null===P?"":`:${P}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:T,port:P,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function cA(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,p)}applyActionCode(l){return function om(h,c){return jc.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Tu(this._delegate,l)}confirmPasswordReset(l,p){return function So(h,c,l){return Rn.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var m=this;return(0,E.Z)(function*(){return Yn(m._delegate,function ie(h,c,l){return Re.apply(this,arguments)}(m._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function $e(h,c){return _s.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function _i(h,c){const l=ta.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,E.Z)(function*(){Ii(Bo(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function rE(h,c){return ya.apply(this,arguments)}(l._delegate,qi);return p?Yn(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function uf(h,c){Ft(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,m){const{next:v,error:T,complete:P}=El(l,p,m);return this._delegate.onAuthStateChanged(v,T,P)}onIdTokenChanged(l,p,m){const{next:v,error:T,complete:P}=El(l,p,m);return this._delegate.onIdTokenChanged(v,T,P)}sendSignInLinkToEmail(l,p){return function mi(h,c,l){return Pn.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function In(h,c,l){return En.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,E.Z)(function*(){let m;switch(function TE(h,c){_l(Object.values(Fr).includes(c),h,"invalid-persistence-type"),(0,V.b$)()?_l(c!==Fr.SESSION,h,"unsupported-persistence-type"):(0,V.UG)()?_l(c===Fr.NONE,h,"unsupported-persistence-type"):lf()?_l(c===Fr.NONE||c===Fr.LOCAL&&(0,V.hl)(),h,"unsupported-persistence-type"):_l(c===Fr.NONE||Zm(),h,"unsupported-persistence-type")}(p._delegate,l),l){case Fr.SESSION:m=Ir;break;case Fr.LOCAL:m=(yield be(ha)._isAvailable())?ha:Bi;break;case Fr.NONE:m=Ce;break;default:return ct("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Yn(this._delegate,function ht(h){return kc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Yn(this._delegate,Uc(this._delegate,l))}signInWithCustomToken(l){return Yn(this._delegate,function pi(h,c){return Ph.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return Yn(this._delegate,function an(h,c,l){return Uc((0,V.m9)(h),yh.credential(c,l)).catch(function(){var p=(0,E.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Kn(h),m});return function(m){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return Yn(this._delegate,function oa(h,c,l){return wt.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return hf(this._delegate,function B(h,c,l){return it.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,E.Z)(function*(){return Ii(Bo(),p._delegate,"operation-not-supported-in-this-environment"),Yn(p._delegate,function Dm(h,c,l){return Hh.apply(this,arguments)}(p._delegate,l,qi))})()}signInWithRedirect(l){var p=this;return(0,E.Z)(function*(){return Ii(Bo(),p._delegate,"operation-not-supported-in-this-environment"),yield df(p._delegate),Nt(p._delegate,l,qi)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function FI(h,c){return Vt.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=Fr,h})();function El(h,c,l){let p=h;"function"!=typeof h&&({next:p,error:c,complete:l}=h);const m=p;return{next:T=>m(T&&Gi.getOrCreate(T)),error:c,complete:l}}function wl(h,c){const l=function Jm(h,c){const l=yl();if(!l)return[];const p=Ue(Ym,h,c);switch(l.getItem(p)){case Fr.NONE:return[Ce];case Fr.LOCAL:return[ha,Ir];case Fr.SESSION:return[Ir];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(ha)&&l.push(ha),typeof window<"u")for(const p of[Bi,Ir])l.includes(p)||l.push(p);return l.includes(Ce)||l.push(Ce),l}class ff{constructor(){this.providerId="phone",this._delegate=new Pu(Xm(ve.Z.auth()))}static credential(c,l){return Pu.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}ff.PHONE_SIGN_IN_METHOD=Pu.PHONE_SIGN_IN_METHOD,ff.PROVIDER_ID=Pu.PROVIDER_ID;const pf=K;class Tl{constructor(c,l,p=ve.Z.app()){var m;pf(null===(m=p.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new KI(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ba(h){h.INTERNAL.registerComponent(new ln.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new r_(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:yh,FacebookAuthProvider:vh,GithubAuthProvider:vu,GoogleAuthProvider:oe,OAuthProvider:re,SAMLAuthProvider:Oc,PhoneAuthProvider:ff,PhoneMultiFactorGenerator:ef,RecaptchaVerifier:Tl,TwitterAuthProvider:tm,Auth:r_,AuthCredential:pu,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.1")}(ve.Z)},861:(to,kn,ze)=>{function E(V,Fe,Yt,qe,ln,Hn,_t){try{var Q=V[Hn](_t),te=Q.value}catch(Te){return void Yt(Te)}Q.done?Fe(te):Promise.resolve(te).then(qe,ln)}function ve(V){return function(){var Fe=this,Yt=arguments;return new Promise(function(qe,ln){var Hn=V.apply(Fe,Yt);function _t(te){E(Hn,qe,ln,_t,Q,"next",te)}function Q(te){E(Hn,qe,ln,_t,Q,"throw",te)}_t(void 0)})}}ze.d(kn,{Z:()=>ve})},582:(to,kn,ze)=>{function Fe(O,L){var G={};for(var z in O)Object.prototype.hasOwnProperty.call(O,z)&&L.indexOf(z)<0&&(G[z]=O[z]);if(null!=O&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(z=Object.getOwnPropertySymbols(O);Y<z.length;Y++)L.indexOf(z[Y])<0&&Object.prototype.propertyIsEnumerable.call(O,z[Y])&&(G[z[Y]]=O[z[Y]])}return G}function Te(O,L,G,z){return new(G||(G=Promise))(function(Z,Pe){function ot(lt){try{Se(z.next(lt))}catch(sn){Pe(sn)}}function dn(lt){try{Se(z.throw(lt))}catch(sn){Pe(sn)}}function Se(lt){lt.done?Z(lt.value):function Y(Z){return Z instanceof G?Z:new G(function(Pe){Pe(Z)})}(lt.value).then(ot,dn)}Se((z=z.apply(O,L||[])).next())})}function xt(O){return this instanceof xt?(this.v=O,this):new xt(O)}function ct(O,L,G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,z=G.apply(O,L||[]),Z=[];return Y={},Pe("next"),Pe("throw"),Pe("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function Pe(ke){z[ke]&&(Y[ke]=function(Fn){return new Promise(function(vn,An){Z.push([ke,Fn,vn,An])>1||ot(ke,Fn)})})}function ot(ke,Fn){try{!function dn(ke){ke.value instanceof xt?Promise.resolve(ke.value.v).then(Se,lt):sn(Z[0][2],ke)}(z[ke](Fn))}catch(vn){sn(Z[0][3],vn)}}function Se(ke){ot("next",ke)}function lt(ke){ot("throw",ke)}function sn(ke,Fn){ke(Fn),Z.shift(),Z.length&&ot(Z[0][0],Z[0][1])}}function or(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G,L=O[Symbol.asyncIterator];return L?L.call(O):(O=function yt(O){var L="function"==typeof Symbol&&Symbol.iterator,G=L&&O[L],z=0;if(G)return G.call(O);if(O&&"number"==typeof O.length)return{next:function(){return O&&z>=O.length&&(O=void 0),{value:O&&O[z++],done:!O}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}(O),G={},z("next"),z("throw"),z("return"),G[Symbol.asyncIterator]=function(){return this},G);function z(Z){G[Z]=O[Z]&&function(Pe){return new Promise(function(ot,dn){!function Y(Z,Pe,ot,dn){Promise.resolve(dn).then(function(Se){Z({value:Se,done:ot})},Pe)}(ot,dn,(Pe=O[Z](Pe)).done,Pe.value)})}}}ze.d(kn,{FC:()=>ct,KL:()=>or,_T:()=>Fe,mG:()=>Te,qq:()=>xt}),"function"==typeof SuppressedError&&SuppressedError}},to=>{to(to.s=488)}]);