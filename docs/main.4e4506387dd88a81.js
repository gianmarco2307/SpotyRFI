"use strict";(self.webpackChunkSpotyRFI=self.webpackChunkSpotyRFI||[]).push([[179],{414:(Xi,Ln,ze)=>{let ve=null,Fe=1;function qe(t){const e=ve;return ve=t,e}function Je(t){if((!vt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Fe)){if(!t.producerMustRecompute(t)&&!yn(t))return t.dirty=!1,void(t.lastCleanEpoch=Fe);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Fe}}function yn(t){or(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Je(n),r!==n.version))return!0}return!1}function lt(t,e){if(function tt(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),or(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)lt(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];or(i),i.producerIndexOfThis[r]=e}}function vt(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function or(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let xi=null;function ke(t){return"function"==typeof t}function Vn(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const vn=Vn(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function An(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ke(r))try{r()}catch(o){e=o instanceof vn?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{to(o)}catch(s){e=e??[],s instanceof vn?e=[...e,...s.errors]:e.push(s)}}if(e)throw new vn(e)}}add(e){var n;if(e&&e!==this)if(this.closed)to(e);else{if(e instanceof Ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&An(n,e)}remove(e){const{_finalizers:n}=this;n&&An(n,e),e instanceof Ct&&e._removeParent(this)}}Ct.EMPTY=(()=>{const t=new Ct;return t.closed=!0,t})();const Mr=Ct.EMPTY;function au(t){return t instanceof Ct||t&&"closed"in t&&ke(t.remove)&&ke(t.add)&&ke(t.unsubscribe)}function to(t){ke(t)?t():t.unsubscribe()}const xr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},no={setTimeout(t,e,...n){const{delegate:r}=no;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=no;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Zs(t){no.setTimeout(()=>{const{onUnhandledError:e}=xr;if(!e)throw t;e(t)})}function Nr(){}const uu=Ni("C",void 0,void 0);function Ni(t,e,n){return{kind:t,value:e,error:n}}let yr=null;function Oi(t){if(xr.useDeprecatedSynchronousErrorHandling){const e=!yr;if(e&&(yr={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=yr;if(yr=null,n)throw r}}else t()}class Co extends Ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,au(e)&&e.add(this)):this.destination=Qs}static create(e,n,r){return new Zn(e,n,r)}next(e){this.isStopped?Ks(function ro(t){return Ni("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ks(function Or(t){return Ni("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ks(uu,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const io=Function.prototype.bind;function oo(t,e){return io.call(t,e)}class Yr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){so(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){so(r)}else so(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){so(n)}}}class Zn extends Co{constructor(e,n,r){let i;if(super(),ke(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&xr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&oo(e.next,o),error:e.error&&oo(e.error,o),complete:e.complete&&oo(e.complete,o)}):i=e}this.destination=new Yr(i)}}function so(t){xr.useDeprecatedSynchronousErrorHandling?function To(t){xr.useDeprecatedSynchronousErrorHandling&&yr&&(yr.errorThrown=!0,yr.error=t)}(t):Zs(t)}function Ks(t,e){const{onStoppedNotification:n}=xr;n&&no.setTimeout(()=>n(t,e))}const Qs={closed:!0,next:Nr,error:function cu(t){throw t},complete:Nr},ci="function"==typeof Symbol&&Symbol.observable||"@@observable";function Kn(t){return t}function us(t){return 0===t.length?Kn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let qt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function D(t){return t&&t instanceof Co||function lu(t){return t&&ke(t.next)&&ke(t.error)&&ke(t.complete)}(t)&&au(t)}(n)?n:new Zn(n,r,i);return Oi(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ys(r))((i,o)=>{const s=new Zn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ci](){return this}pipe(...n){return us(n)(this)}toPromise(n){return new(n=Ys(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Ys(t){var e;return null!==(e=t??xr.Promise)&&void 0!==e?e:Promise}const w=Vn(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let A=(()=>{class t extends qt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new q(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new w}next(n){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Mr:(this.currentObservers=null,o.push(n),new Ct(()=>{this.currentObservers=null,An(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new qt;return n.source=this,n}}return t.create=(e,n)=>new q(e,n),t})();class q extends A{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Mr}}class M extends A{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function pe(t){return ke(t?.lift)}function Ie(t){return e=>{if(pe(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(t,e,n,r,i){return new vr(t,e,n,r,i)}class vr extends Co{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function we(t,e){return Ie((n,r)=>{let i=0;n.subscribe(Ae(r,o=>{r.next(t.call(e,o,i++))}))})}function Ue(t){for(let e in t)if(t[e]===Ue)return e;throw Error("Could not find renamed property on target object.")}function ct(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ct).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function li(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const kc=Ue({__forward_ref__:Ue});function F(t){return t.__forward_ref__=F,t.toString=function(){return ct(this())},t}function b(t){return X(t)?t():t}function X(t){return"function"==typeof t&&t.hasOwnProperty(kc)&&t.__forward_ref__===F}function _e(t){return t&&!!t.\u0275providers}const nt="https://g.co/ng/security#xss";class H extends Error{constructor(e,n){super(function Lt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}const St=Ue({\u0275cmp:Ue}),di=Ue({\u0275dir:Ue}),bo=Ue({\u0275pipe:Ue}),Hg=Ue({\u0275mod:Ue}),ao=Ue({\u0275fac:Ue}),ls=Ue({__NG_ELEMENT_ID__:Ue}),zg=Ue({__NG_ENV_ID__:Ue});function Be(t){return"string"==typeof t?t:null==t?"":String(t)}function _h(t,e){throw new H(-201,!1)}function Ir(t,e){null==t&&function xe(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Te(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Li(t){return{providers:t.providers||[],imports:t.imports||[]}}function Js(t){return Fc(t,ds)||Fc(t,em)}function Fc(t,e){return t.hasOwnProperty(e)?t[e]:null}function Xs(t){return t&&(t.hasOwnProperty(hu)||t.hasOwnProperty(yh))?t[hu]:null}const ds=Ue({\u0275prov:Ue}),hu=Ue({\u0275inj:Ue}),em=Ue({ngInjectableDef:Ue}),yh=Ue({ngInjectorDef:Ue});var rt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(rt||{});let fu;function tm(){return fu}function Qn(t){const e=fu;return fu=t,e}function nm(t,e,n){const r=Js(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&rt.Optional?null:void 0!==e?e:void _h(ct(t))}const Rt=globalThis;class de{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const pu={},Eh="__NG_DI_FLAG__",ea="ngTempTokenPath",DI=/\n/gm,ta="__source";let gu;function Yn(t){const e=gu;return gu=t,e}function na(t,e=rt.Default){if(void 0===gu)throw new H(-203,!1);return null===gu?nm(t,void 0,e):gu.get(t,e&rt.Optional?null:void 0,e)}function re(t,e=rt.Default){return(tm()||na)(b(t),e)}function se(t,e=rt.Default){return re(t,mu(e))}function mu(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ch(t){const e=[];for(let n=0;n<t.length;n++){const r=b(t[n]);if(Array.isArray(r)){if(0===r.length)throw new H(900,!1);let i,o=rt.Default;for(let s=0;s<r.length;s++){const a=r[s],u=AI(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(re(i,o))}else e.push(re(r))}return e}function Vi(t,e){return t[Eh]=e,t.prototype[Eh]=e,t}function AI(t){return t[Eh]}function Ui(t){return{toString:t}.toString()}var ra=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ra||{}),tn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(tn||{});const fi={},ht=[];function Bc(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function ia(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];bh(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Dh(t){return 3===t||4===t||6===t}function bh(t){return 64===t.charCodeAt(0)}function _u(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||jc(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function jc(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const $c="ng-template";function Ah(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if("string"==typeof o&&i){const s=t[r++];if(n&&"class"===o&&-1!==Bc(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function yu(t){return 4===t.type&&t.value!==$c}function Sh(t,e,n){return e===(4!==t.type||n?t.value:$c)}function cm(t,e,n){let r=4;const i=t.attrs||[],o=function Rh(t){for(let e=0;e<t.length;e++)if(Dh(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Sh(t,u,n)||""===u&&1===e.length){if(Lr(r))return!1;s=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Ah(t.attrs,d,n)){if(Lr(r))return!1;s=!0}continue}const g=lm(8&r?"class":u,i,yu(t),n);if(-1===g){if(Lr(r))return!1;s=!0;continue}if(""!==d){let _;_=g>o?"":i[g+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==Bc(y,d,0)||2&r&&d!==_){if(Lr(r))return!1;s=!0}}}}else{if(!s&&!Lr(r)&&!Lr(u))return!1;if(s&&Lr(u))continue;s=!1,r=u|1&r}}return Lr(r)||s}function Lr(t){return 0==(1&t)}function lm(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function dm(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Hc(t,e,n=!1){for(let r=0;r<e.length;r++)if(cm(t,e[r],n))return!0;return!1}function Mh(t,e){return t?":not("+e.trim()+")":e}function xh(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Lr(s)&&(e+=Mh(o,i),i=""),r=s,o=o||!Lr(r);n++}return""!==i&&(e+=Mh(o,i)),e}function pi(t){return Ui(()=>{const e=hm(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ra.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||tn.Emulated,styles:t.styles||ht,_:null,schemas:t.schemas||null,tView:null,id:""};Gc(n);const r=t.dependencies;return n.directiveDefs=Iu(r,!1),n.pipeDefs=Iu(r,!0),n.id=function RI(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Oh(t){return Qe(t)||In(t)}function vu(t){return null!==t}function gi(t){return Ui(()=>({type:t.type,bootstrap:t.bootstrap||ht,declarations:t.declarations||ht,imports:t.imports||ht,exports:t.exports||ht,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function qc(t,e){if(null==t)return fi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function Sn(t){return Ui(()=>{const e=hm(t);return Gc(e),e})}function Qe(t){return t[St]||null}function In(t){return t[di]||null}function En(t){return t[bo]||null}function Rn(t,e){const n=t[Hg]||null;if(!n&&!0===e)throw new Error(`Type ${ct(t)} does not have '\u0275mod' property.`);return n}function hm(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||fi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ht,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qc(t.inputs,e),outputs:qc(t.outputs),debugInfo:null}}function Gc(t){t.features?.forEach(e=>e(t))}function Iu(t,e){if(!t)return null;const n=e?En:Oh;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(vu)}const Vt=0,ie=1,be=2,Ut=3,mi=4,Pn=5,_i=6,oa=7,Tt=8,sr=9,yi=10,je=11,ps=12,fm=13,So=14,Gt=15,gs=16,sa=17,Jr=18,Eu=19,Wc=20,Ro=21,Zc=22,Po=23,Ve=25,Lh=1,vi=7,aa=9,un=10;var ua=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(ua||{});function Un(t){return Array.isArray(t)&&"object"==typeof t[Lh]}function Bn(t){return Array.isArray(t)&&!0===t[Lh]}function pm(t){return 0!=(4&t.flags)}function ca(t){return t.componentOffset>-1}function la(t){return 1==(1&t.flags)}function Ii(t){return!!t.template}function Fh(t){return 0!=(512&t[be])}function ji(t,e){return t.hasOwnProperty(ao)?t[ao]:null}class wA{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Er(){return Em}function Em(t){return t.type.prototype.ngOnChanges&&(t.setInput=Tu),MI}function MI(){const t=cn(this),e=t?.current;if(e){const n=t.previous;if(n===fi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Tu(t,e,n,r){const i=this.declaredInputs[n],o=cn(t)||function xI(t,e){return t[wm]=e}(t,{previous:fi,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new wA(u&&u.currentValue,e,a===fi),t[r]=e}Er.ngInherit=!0;const wm="__ngSimpleChanges__";function cn(t){return t[wm]||null}const Xr=function(t,e,n){};let Uh=!1;function Dt(t){for(;Array.isArray(t);)t=t[Vt];return t}function Mo(t,e){return Dt(e[t])}function ar(t,e){return Dt(e[t.index])}function ha(t,e){return t.data[e]}function Fr(t,e){const n=e[t];return Un(n)?n:n[Vt]}function Qc(t){return 128==(128&t[be])}function $i(t,e){return null==e?null:t[e]}function LI(t){t[sa]=0}function fa(t){1024&t[be]||(t[be]|=1024,Qc(t)&&Du(t))}function bm(t){return 9216&t[be]||t[Po]?.dirty}function Hh(t){bm(t)?Du(t):64&t[be]&&(function OI(){return Uh}()?(t[be]|=1024,Du(t)):t[yi].changeDetectionScheduler?.notify())}function Du(t){t[yi].changeDetectionScheduler?.notify();let e=t[Ut];for(;null!==e&&!(Bn(e)&&e[be]&ua.HasChildViewsToRefresh||Un(e)&&8192&e[be]);){if(Bn(e))e[be]|=ua.HasChildViewsToRefresh;else if(e[be]|=8192,!Qc(e))break;e=e[Ut]}}function Yc(t,e){if(256==(256&t[be]))throw new H(911,!1);null===t[Ro]&&(t[Ro]=[]),t[Ro].push(e)}const Le={lFrame:Fm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Sm(){return Le.bindingsEnabled}function B(){return Le.lFrame.lView}function ot(){return Le.lFrame.tView}function bu(t){return Le.lFrame.contextLView=t,t[Tt]}function qh(t){return Le.lFrame.contextLView=null,t}function It(){let t=Pm();for(;null!==t&&64===t.type;)t=t.parent;return t}function Pm(){return Le.lFrame.currentTNode}function Vr(t,e){const n=Le.lFrame;n.currentTNode=t,n.isParent=e}function Au(){return Le.lFrame.isParent}function uo(){return Le.lFrame.bindingIndex}function Hi(){return Le.lFrame.bindingIndex++}function Ei(t){const e=Le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function HI(t,e){const n=Le.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kh(e)}function Kh(t){Le.lFrame.currentDirectiveIndex=t}function Ru(t){Le.lFrame.currentQueryIndex=t}function Qh(t){const e=t[ie];return 2===e.type?e.declTNode:1===e.type?t[Pn]:null}function km(t,e,n){if(n&rt.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&rt.Host||(i=Qh(o),null===i||(o=o[So],10&i.type))););if(null===i)return!1;e=i,t=o}const r=Le.lFrame=Lm();return r.currentTNode=e,r.lView=t,!0}function ys(t){const e=Lm(),n=t[ie];Le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Lm(){const t=Le.lFrame,e=null===t?null:t.child;return null===e?Fm(t):e}function Fm(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Xc(){const t=Le.lFrame;return Le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const el=Xc;function Pu(){const t=Xc();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Mn(){return Le.lFrame.selectedIndex}function Oo(t){Le.lFrame.selectedIndex=t}function Pt(){const t=Le.lFrame;return ha(t.tView,t.selectedIndex)}let tl=!0;function nl(){return tl}function ko(t){tl=t}function rl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=f&&(t.destroyHooks??=[]).push(n,f)}}function ma(t,e,n){Xh(t,e,3,n)}function vs(t,e,n,r){(3&t[be])===n&&Xh(t,e,n,r)}function Mu(t,e){let n=t[be];(3&n)===e&&(n&=16383,n+=1,t[be]=n)}function Xh(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[sa]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[sa]+=65536),(a<o||-1==o)&&(ZI(t,n,e,u),t[sa]=(4294901760&t[sa])+u+2),u++}function il(t,e){Xr(4,t,e);const n=qe(null);try{e.call(t)}finally{qe(n),Xr(5,t,e)}}function ZI(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[be]>>14<t[sa]>>16&&(3&t[be])===e&&(t[be]+=16384,il(a,o)):il(a,o)}const Is=-1;class _a{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function xu(t){return t!==Is}function Nu(t){return 32767&t}function ya(t,e){let n=function QI(t){return t>>16}(t),r=e;for(;n>0;)r=r[So],n--;return r}let nf=!0;function Es(t){const e=nf;return nf=t,e}const jm=255,$m=5;let YI=0;const zi={};function ol(t,e){const n=sl(t,e);if(-1!==n)return n;const r=e[ie];r.firstCreatePass&&(t.injectorIndex=e.length,rf(r.data,t),rf(e,null),rf(r.blueprint,null));const i=al(t,e),o=t.injectorIndex;if(xu(i)){const s=Nu(i),a=ya(i,e),u=a[ie].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|u[s+d]}return e[o+8]=i,o}function rf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sl(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function al(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=rE(i),null===r)return Is;if(n++,i=i[So],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Is}function sf(t,e,n){!function JI(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ls)&&(r=n[ls]),null==r&&(r=n[ls]=YI++);const i=r&jm;e.data[t+(i>>$m)]|=1<<i}(t,e,n)}function Hm(t,e,n){if(n&rt.Optional||void 0!==t)return t;_h()}function zm(t,e,n,r){if(n&rt.Optional&&void 0===r&&(r=null),!(n&(rt.Self|rt.Host))){const i=t[sr],o=Qn(void 0);try{return i?i.get(e,r,n&rt.Optional):nm(e,r,n&rt.Optional)}finally{Qn(o)}}return Hm(r,0,n)}function af(t,e,n,r=rt.Default,i){if(null!==t){if(2048&e[be]&&!(r&rt.Self)){const s=function nE(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[be]&&!(512&s[be]);){const a=qm(o,s,n,r|rt.Self,zi);if(a!==zi)return a;let u=o.parent;if(!u){const d=s[Wc];if(d){const f=d.get(n,zi,r);if(f!==zi)return f}u=rE(s),s=s[So]}o=u}return i}(t,e,n,r,zi);if(s!==zi)return s}const o=qm(t,e,n,r,zi);if(o!==zi)return o}return zm(e,n,r,i)}function qm(t,e,n,r,i){const o=function tE(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ls)?t[ls]:void 0;return"number"==typeof e?e>=0?e&jm:Gm:e}(n);if("function"==typeof o){if(!km(e,t,r))return r&rt.Host?Hm(i,0,r):zm(e,n,r,i);try{let s;if(s=o(r),null!=s||r&rt.Optional)return s;_h()}finally{el()}}else if("number"==typeof o){let s=null,a=sl(t,e),u=Is,d=r&rt.Host?e[Gt][Pn]:null;for((-1===a||r&rt.SkipSelf)&&(u=-1===a?al(t,e):e[a+8],u!==Is&&ll(r,!1)?(s=e[ie],a=Nu(u),e=ya(u,e)):a=-1);-1!==a;){const f=e[ie];if(cl(o,a,f.data)){const g=eE(a,e,n,s,r,d);if(g!==zi)return g}u=e[a+8],u!==Is&&ll(r,e[ie].data[a+8]===d)&&cl(o,a,e)?(s=f,a=Nu(u),e=ya(u,e)):a=-1}}return i}function eE(t,e,n,r,i,o){const s=e[ie],a=s.data[t+8],f=function ul(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,f=o>>20,_=i?a+f:t.directiveEnd;for(let y=r?a:a+f;y<_;y++){const I=s[y];if(y<u&&n===I||y>=u&&I.type===n)return y}if(i){const y=s[u];if(y&&Ii(y)&&y.type===n)return u}return null}(a,s,n,null==r?ca(a)&&nf:r!=s&&0!=(3&a.type),i&rt.Host&&o===a);return null!==f?ws(e,s,f,a):zi}function ws(t,e,n,r){let i=t[n];const o=e.data;if(function Um(t){return t instanceof _a}(i)){const s=i;s.resolving&&function yI(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,`Circular dependency in DI detected for ${t}${n}`)}(function gt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Be(t)}(o[n]));const a=Es(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?Qn(s.injectImpl):null;km(t,r,rt.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function Jh(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=Em(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==d&&Qn(d),Es(a),s.resolving=!1,el()}}return i}function cl(t,e,n){return!!(n[e+(t>>$m)]&1<<t)}function ll(t,e){return!(t&rt.Self||t&rt.Host&&e)}class wn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return af(this._tNode,this._lView,e,mu(r),n)}}function Gm(){return new wn(It(),B())}function uf(t){return Ui(()=>{const e=t.prototype.constructor,n=e[ao]||Ou(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[ao]||Ou(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ou(t){return X(t)?()=>{const e=Ou(b(t));return e&&e()}:ji(t)}function rE(t){const e=t[ie],n=e.type;return 2===n?e.declTNode:1===n?t[Pn]:null}const co="__parameters__";function Ea(t,e,n){return Ui(()=>{const r=function lf(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,d,f){const g=u.hasOwnProperty(co)?u[co]:Object.defineProperty(u,co,{value:[]})[co];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Ca(t,e){t.forEach(n=>Array.isArray(n)?Ca(n,e):e(n))}function dl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ur(t,e,n){let r=Da(t,e);return r>=0?t[1|r]=n:(r=~r,function Wm(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function pf(t,e){const n=Da(t,e);if(n>=0)return t[1|n]}function Da(t,e){return function fl(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Fu=Vi(Ea("Optional"),8),Fo=Vi(Ea("SkipSelf"),4),lo=new de("ENVIRONMENT_INITIALIZER"),vl=new de("INJECTOR",-1),_f=new de("INJECTOR_DEF_TYPES");class Uu{get(e,n=pu){if(n===pu){const r=new Error(`NullInjectorError: No provider for ${ct(e)}!`);throw r.name="NullInjectorError",r}return n}}function Uo(...t){return{\u0275providers:yf(0,t),\u0275fromNgModule:!0}}function yf(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Ca(e,s=>{const a=s;Il(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&e_(i,o),n}function e_(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];El(i,o=>{e(o,r)})}}function Il(t,e,n,r){if(!(t=b(t)))return!1;let i=null,o=Xs(t);const s=!o&&Qe(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=Xs(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of u)Il(d,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;r.add(i);try{Ca(o.imports,f=>{Il(f,e,n,r)&&(d||=[],d.push(f))})}finally{}void 0!==d&&e_(d,e)}if(!a){const d=ji(i)||(()=>new i);e({provide:i,useFactory:d,deps:ht},i),e({provide:_f,useValue:i,multi:!0},i),e({provide:lo,useValue:()=>re(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const d=t;El(u,f=>{e(f,d)})}}}return i!==t&&void 0!==t.providers}function El(t,e){for(let n of t)_e(n)&&(n=n.\u0275providers),Array.isArray(n)?El(n,e):e(n)}const Tr=Ue({provide:String,useValue:Ue});function Bu(t){return null!==t&&"object"==typeof t&&Tr in t}function cr(t){return"function"==typeof t}const Tl=new de("Set Injector scope."),$u={},IE={};let Hu;function Cl(){return void 0===Hu&&(Hu=new Uu),Hu}class ti{}class ba extends ti{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,P(e,s=>this.processProvider(s)),this.records.set(vl,p(void 0,this)),i.has("environment")&&this.records.set(ti,p(void 0,this));const o=this.records.get(Tl);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_f,ht,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Yn(this),r=Qn(void 0);try{return e()}finally{Yn(n),Qn(r)}}get(e,n=pu,r=rt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zg))return e[zg](this);r=mu(r);const o=Yn(this),s=Qn(void 0);try{if(!(r&rt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function T(t){return"function"==typeof t||"object"==typeof t&&t instanceof de}(e)&&Js(e);u=d&&this.injectableDefInScope(d)?p(vf(e),$u):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&rt.Self?Cl():this.parent).get(e,n=r&rt.Optional&&n===pu?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ea]=a[ea]||[]).unshift(ct(e)),o)throw a;return function Uc(t,e,n,r){const i=t[ea];throw e[ta]&&i.unshift(e[ta]),t.message=function um(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=ct(e);if(Array.isArray(e))i=e.map(ct).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):ct(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(DI,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ea]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Qn(s),Yn(o)}}resolveInjectorInitializers(){const e=Yn(this),n=Qn(void 0);try{const i=this.get(lo,ht,rt.Self);for(const o of i)o()}finally{Yn(e),Qn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(ct(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){let n=cr(e=b(e))?e:b(e&&e.provide);const r=function c(t){return Bu(t)?p(void 0,t.useValue):p(function l(t,e,n){let r;if(cr(t)){const i=b(t);return ji(i)||vf(i)}if(Bu(t))r=()=>b(t.useValue);else if(function t_(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Ch(t.deps||[]));else if(function wl(t){return!(!t||!t.useExisting)}(t))r=()=>re(b(t.useExisting));else{const i=b(t&&(t.useClass||t.provide));if(!function m(t){return!!t.deps}(t))return ji(i)||vf(i);r=()=>new i(...Ch(t.deps))}return r}(t),$u)}(e);if(cr(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=p(void 0,$u,!0),i.factory=()=>Ch(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===$u&&(n.value=IE,n.value=n.factory()),"object"==typeof n.value&&n.value&&function v(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=b(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function vf(t){const e=Js(t),n=null!==e?e.factory:ji(t);if(null!==n)return n;if(t instanceof de)throw new H(204,!1);if(t instanceof Function)return function h(t){const e=t.length;if(e>0)throw function Lu(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new H(204,!1);const n=function CI(t){return t&&(t[ds]||t[em])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new H(204,!1)}function p(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function P(t,e){for(const n of t)Array.isArray(n)?P(n,e):n&&_e(n)?P(n.\u0275providers,e):e(n)}function j(t,e){t instanceof ba&&t.assertNotDestroyed();const r=Yn(t),i=Qn(void 0);try{return e()}finally{Yn(r),Qn(i)}}function bl(t,e=null,n=null,r){const i=wf(t,e,n,r);return i.resolveInjectorInitializers(),i}function wf(t,e=null,n=null,r,i=new Set){const o=[n||ht,Uo(t)];return r=r||("object"==typeof t?void 0:ct(t)),new ba(o,e||Cl(),r||null,i)}let wE,lr=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=pu;static#t=this.NULL=new Uu;static create(n,r){if(Array.isArray(n))return bl({name:""},r,n,"");{const i=n.name??"";return bl({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Te({token:t,providedIn:"any",factory:()=>re(vl)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();const r_=new de("AppId",{providedIn:"root",factory:()=>eU}),eU="ng",OA=new de("Platform Initializer"),bs=new de("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kA=new de("CSP nonce",{providedIn:"root",factory:()=>function Aa(){if(void 0!==wE)return wE;if(typeof document<"u")return document;throw new H(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function wi(t){return t instanceof Function?t():t}function a_(t){return 128==(128&t.flags)}var Pa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Pa||{});const AE=new Map;let fU=0;const RE="__ngContext__";function Cr(t,e){Un(e)?(t[RE]=e[Eu],function gU(t){AE.set(t[Eu],t)}(e)):t[RE]=e}let PE;function ME(t,e){return PE(t,e)}function bf(t){const e=t[Ut];return Bn(e)?e[Ut]:e}function XA(t){return tS(t[ps])}function eS(t){return tS(t[mi])}function tS(t){for(;null!==t&&!Bn(t);)t=t[mi];return t}function Pl(t,e,n,r,i){if(null!=r){let o,s=!1;Bn(r)?o=r:Un(r)&&(s=!0,r=r[Vt]);const a=Dt(r);0===t&&null!==n?null==i?oS(e,n,a):Gu(e,n,a,i||null,!0):1===t&&null!==n?Gu(e,n,a,i||null,!0):2===t?function p_(t,e,n){const r=h_(t,e);r&&function OU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function FU(t,e,n,r,i){const o=n[vi];o!==Dt(n)&&Pl(e,t,r,o,i);for(let a=un;a<n.length;a++){const u=n[a];Rf(u[ie],u,t,e,r,o)}}(e,t,o,n,i)}}function l_(t,e,n){return t.createElement(e,n)}function rS(t,e){const n=t[aa],r=n.indexOf(e);n.splice(r,1)}function Af(t,e){if(t.length<=un)return;const n=un+e,r=t[n];if(r){const i=r[gs];null!==i&&i!==t&&rS(i,r),e>0&&(t[n-1][mi]=r[mi]);const o=hl(t,un+e);!function bU(t,e){Rf(t,e,e[je],2,null,null),e[Vt]=null,e[Pn]=null}(r[ie],r);const s=o[Jr];null!==s&&s.detachView(o[ie]),r[Ut]=null,r[mi]=null,r[be]&=-129}return r}function d_(t,e){if(!(256&e[be])){const n=e[je];n.destroyNode&&Rf(t,e,n,3,null,null),function RU(t){let e=t[ps];if(!e)return NE(t[ie],t);for(;e;){let n=null;if(Un(e))n=e[ps];else{const r=e[un];r&&(n=r)}if(!n){for(;e&&!e[mi]&&e!==t;)Un(e)&&NE(e[ie],e),e=e[Ut];null===e&&(e=t),Un(e)&&NE(e[ie],e),n=e&&e[mi]}e=n}}(e)}}function NE(t,e){if(!(256&e[be])){e[be]&=-129,e[be]|=256,e[Po]&&function Wn(t){if(or(t),vt(t))for(let e=0;e<t.producerNode.length;e++)lt(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(e[Po]),function NU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof _a)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Xr(4,a,u);try{u.call(a)}finally{Xr(5,a,u)}}else{Xr(4,i,o);try{o.call(i)}finally{Xr(5,i,o)}}}}}(t,e),function xU(t,e){const n=t.cleanup,r=e[oa];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[oa]=null);const i=e[Ro];if(null!==i){e[Ro]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[ie].type&&e[je].destroy();const n=e[gs];if(null!==n&&Bn(e[Ut])){n!==e[Ut]&&rS(n,e);const r=e[Jr];null!==r&&r.detachView(t)}!function mU(t){AE.delete(t[Eu])}(e)}}function OE(t,e,n){return function iS(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Vt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===tn.None||o===tn.Emulated)return null}return ar(r,n)}}(t,e.parent,n)}function Gu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function oS(t,e,n){t.appendChild(e,n)}function sS(t,e,n,r,i){null!==r?Gu(t,e,n,r,i):oS(t,e,n)}function h_(t,e){return t.parentNode(e)}let kE,g_,m_,cS=function uS(t,e,n){return 40&t.type?ar(t,n):null};function f_(t,e,n,r){const i=OE(t,r,e),o=e[je],a=function aS(t,e,n){return cS(t,e,n)}(r.parent||e[Pn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)sS(o,i,n[u],a,!1);else sS(o,i,n,a,!1);void 0!==kE&&kE(o,r,e,n,i)}function Sf(t,e){if(null!==e){const n=e.type;if(3&n)return ar(e,t);if(4&n)return LE(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Sf(t,r);{const i=t[e.index];return Bn(i)?LE(-1,i):Dt(i)}}if(32&n)return ME(e,t)()||Dt(t[e.index]);{const r=dS(t,e);return null!==r?Array.isArray(r)?r[0]:Sf(bf(t[Gt]),r):Sf(t,e.next)}}return null}function dS(t,e){return null!==e?t[Gt][Pn].projection[e.projection]:null}function LE(t,e){const n=un+t+1;if(n<e.length){const r=e[n],i=r[ie].firstChild;if(null!==i)return Sf(r,i)}return e[vi]}function FE(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Cr(Dt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)FE(t,e,n.child,r,i,o,!1),Pl(e,t,i,a,o);else if(32&u){const d=ME(n,r);let f;for(;f=d();)Pl(e,t,i,f,o);Pl(e,t,i,a,o)}else 16&u?fS(t,e,r,n,i,o):Pl(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Rf(t,e,n,r,i,o){FE(n,r,t.firstChild,e,i,o,!1)}function fS(t,e,n,r,i,o){const s=n[Gt],u=s[Pn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Pl(e,t,i,u[d],o);else{let d=u;const f=s[Ut];a_(r)&&(d.flags|=128),FE(t,e,d,f,i,o,!0)}}function pS(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function gS(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&ia(t,e,r),null!==i&&pS(t,e,i),null!==o&&function UU(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function Ml(t){return function VE(){if(void 0===g_&&(g_=null,Rt.trustedTypes))try{g_=Rt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return g_}()?.createHTML(t)||t}function yS(t){return function UE(){if(void 0===m_&&(m_=null,Rt.trustedTypes))try{m_=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return m_}()?.createScriptURL(t)||t}class Wu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nt})`}}class HU extends Wu{getTypeName(){return"HTML"}}class zU extends Wu{getTypeName(){return"Style"}}class qU extends Wu{getTypeName(){return"Script"}}class GU extends Wu{getTypeName(){return"URL"}}class WU extends Wu{getTypeName(){return"ResourceURL"}}function Ti(t){return t instanceof Wu?t.changingThisBreaksApplicationSecurity:t}function Bo(t,e){const n=function ZU(t){return t instanceof Wu&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${nt})`)}return n===e}class eB{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Ml(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class tB{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Ml(e),n}}const rB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function __(t){return(t=String(t)).match(rB)?t:"unsafe:"+t}function As(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Pf(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const IS=As("area,br,col,hr,img,wbr"),ES=As("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wS=As("rp,rt"),BE=Pf(IS,Pf(ES,As("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pf(wS,As("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pf(wS,ES)),jE=As("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),TS=Pf(jE,As("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),As("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),iB=As("script,style,template");class oB{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!BE.hasOwnProperty(n))return this.sanitizedSomething=!0,!iB.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!TS.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;jE[a]&&(u=__(u)),this.buf.push(" ",s,'="',CS(u),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();BE.hasOwnProperty(n)&&!IS.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(CS(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const sB=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,aB=/([^\#-~ |!])/g;function CS(t){return t.replace(/&/g,"&amp;").replace(sB,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(aB,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let y_;function DS(t,e){let n=null;try{y_=y_||function vS(t){const e=new tB(t);return function nB(){try{return!!(new window.DOMParser).parseFromString(Ml(""),"text/html")}catch{return!1}}()?new eB(e):e}(t);let r=e?String(e):"";n=y_.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=y_.getInertBodyElement(r)}while(r!==o);return Ml((new oB).sanitizeChildren($E(n)||n))}finally{if(n){const r=$E(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function $E(t){return"content"in t&&function uB(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var qi=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(qi||{});function bS(t){const e=Mf();return e?e.sanitize(qi.URL,t)||"":Bo(t,"URL")?Ti(t):__(Be(t))}function HE(t){const e=Mf();if(e)return yS(e.sanitize(qi.RESOURCE_URL,t)||"");if(Bo(t,"ResourceURL"))return yS(Ti(t));throw new H(904,!1)}function Mf(){const t=B();return t&&t[yi].sanitizer}class gB{}let SS=(t,e,n)=>null;function YE(t,e,n=!1){return SS(t,e,n)}class CB{}class MS{}class bB{resolveComponentFactory(e){throw function DB(t){const e=Error(`No component factory found for ${ct(t)}.`);return e.ngComponent=t,e}(e)}}let C_=(()=>{class t{static#e=this.NULL=new bB}return t})();function AB(){return Ol(It(),B())}function Ol(t,e){return new Ma(ar(t,e))}let Ma=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=AB}return t})();class NS{}let D_=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function RB(){const t=B(),n=Fr(It().index,t);return(Un(n)?n:t)[je]}()}return t})(),PB=(()=>{class t{static#e=this.\u0275prov=Te({token:t,providedIn:"root",factory:()=>null})}return t})();const ew={};function b_(t){return!!function tw(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}class kS{constructor(){}supports(e){return b_(e)}create(e){return new kB(e)}}const OB=(t,e)=>e;class kB{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||OB}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<FS(r,i,o)?n:r,a=FS(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const d=a-i,f=u-i;if(d!=f){for(let _=0;_<d;_++){const y=_<o.length?o[_]:o[_]=0,I=y+_;f<=I&&I<d&&(o[_]=y+1)}o[s.previousIndex]=f-d}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!b_(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function NB(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new LB(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new LS),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LS),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class LB{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FB{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class LS{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new FB,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FS(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function US(){return new A_([new kS])}let A_=(()=>{class t{static#e=this.\u0275prov=Te({token:t,providedIn:"root",factory:US});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||US()),deps:[[t,new Fo,new Fu]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new H(901,!1)}}return t})();function kf(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(Dt(o)),Bn(o)&&jS(o,r);const s=n.type;if(8&s)kf(t,e,n.child,r);else if(32&s){const a=ME(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=dS(e,n);if(Array.isArray(a))r.push(...a);else{const u=bf(e[Gt]);kf(u[ie],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function jS(t,e){for(let n=un;n<t.length;n++){const r=t[n],i=r[ie].firstChild;null!==i&&kf(r[ie],r,i,e)}t[vi]!==t[Vt]&&e.push(t[vi])}let $S=[];const zB={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Du(t.lView)},consumerOnSignalRead(){this.lView[Po]=this}};function nw(t){return t.ngOriginalError}class Ss{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&nw(e);for(;n&&nw(n);)n=nw(n);return n||null}}const zS=new de("",{providedIn:"root",factory:()=>se(Ss).handleError.bind(void 0)}),GS=new de("",{providedIn:"root",factory:()=>!1}),We={};function Ci(t){QS(ot(),B(),Mn()+t,!1)}function QS(t,e,n,r){if(!r)if(3==(3&e[be])){const o=t.preOrderCheckHooks;null!==o&&ma(e,o,n)}else{const o=t.preOrderHooks;null!==o&&vs(e,o,0,n)}Oo(n)}function Pe(t,e=rt.Default){const n=B();return null===n?re(t,e):af(It(),n,b(t),e)}function R_(t,e,n,r,i,o,s,a,u,d,f){const g=e.blueprint.slice();return g[Vt]=i,g[be]=204|r,(null!==d||t&&2048&t[be])&&(g[be]|=2048),LI(g),g[Ut]=g[So]=t,g[Tt]=n,g[yi]=s||t&&t[yi],g[je]=a||t&&t[je],g[sr]=u||t&&t[sr]||null,g[Pn]=o,g[Eu]=function pU(){return fU++}(),g[_i]=f,g[Wc]=d,g[Gt]=2==e.type?t[Gt]:g,g}function kl(t,e,n,r,i){let o=t.data[e];if(null===o)o=function rw(t,e,n,r,i){const o=Pm(),s=Au(),u=t.data[e]=function rj(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function ga(){return null!==Le.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function xm(){return Le.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function _s(){const t=Le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Vr(o,!0),o}function Lf(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function JS(t,e,n,r,i){const o=Mn(),s=2&r;try{Oo(-1),s&&e.length>Ve&&QS(t,e,Ve,!1),Xr(s?2:0,i),n(r,i)}finally{Oo(o),Xr(s?3:1,i)}}function iw(t,e,n){if(pm(e)){const r=qe(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{qe(r)}}}function ow(t,e,n){Sm()&&(function lj(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;ca(n)&&function _j(t,e,n){const r=ar(e,t),i=XS(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=P_(t,R_(t,i,null,s,r,e,null,t[yi].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ol(n,e),Cr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],d=ws(e,t,a,n);Cr(d,e),null!==s&&yj(0,a-i,d,u,0,s),Ii(u)&&(Fr(n.index,e)[Tt]=ws(e,t,a,n))}}(t,e,n,ar(n,e)),64==(64&n.flags)&&iR(t,e,n))}function sw(t,e,n=ar){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function XS(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=aw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function aw(t,e,n,r,i,o,s,a,u,d,f){const g=Ve+r,_=g+i,y=function YB(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:We);return n}(g,_),I="function"==typeof d?d():d;return y[ie]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:I,incompleteFirstPass:!1,ssrId:f}}let eR=t=>null;function tR(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?nR(n,e,i,o):r.hasOwnProperty(i)&&nR(n,e,r[i],o)}return n}function nR(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function uw(t,e,n,r){if(Sm()){const i=null===r?null:{"":-1},o=function hj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(Hc(e,s.selectors,!1))if(r||(r=[]),Ii(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),cw(t,e,a.length)}else r.unshift(s),cw(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&rR(t,e,n,s,i,a),i&&function fj(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new H(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=_u(n.mergedAttrs,n.attrs)}function rR(t,e,n,r,i,o){for(let d=0;d<r.length;d++)sf(ol(n,e),t,r[d].type);!function gj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const f=r[d];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,u=Lf(t,e,r.length,null);for(let d=0;d<r.length;d++){const f=r[d];n.mergedAttrs=_u(n.mergedAttrs,f.hostAttrs),mj(t,n,e,u,f),pj(u,f,i),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const g=f.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function ij(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,d=null;for(let f=e.directiveStart;f<i;f++){const g=o[f],_=n?n.get(g):null,I=_?_.outputs:null;u=tR(g.inputs,f,u,_?_.inputs:null),d=tR(g.outputs,f,d,I);const C=null===u||null===s||yu(e)?null:vj(u,f,s);a.push(C)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,o)}function iR(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function Zh(){return Le.lFrame.currentDirectiveIndex}();try{Oo(o);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];Kh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&dj(u,d)}}finally{Oo(-1),Kh(s)}}function dj(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function cw(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function pj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ii(e)&&(n[""]=t)}}function mj(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ji(i.type)),s=new _a(o,Ii(i),Pe);t.blueprint[r]=s,n[r]=s,function uj(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function cj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Lf(t,n,i.hostVars,We),i)}function jo(t,e,n,r,i,o){const s=ar(t,e);!function lw(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?Be(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[je],s,o,t.value,n,r,i)}function yj(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)oR(r,n,s[a++],s[a++],s[a++])}function oR(t,e,n,r,i){const o=qe(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{qe(o)}}function vj(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function sR(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function aR(t,e){const n=t.contentQueries;if(null!==n){const r=qe(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];Ru(n[i]),a.contentQueries(2,e[s],s)}}}finally{qe(r)}}}function P_(t,e){return t[ps]?t[fm][mi]=e:t[ps]=e,t[fm]=e,e}function dw(t,e,n){Ru(0);const r=qe(null);try{e(t,n)}finally{qe(r)}}function M_(t,e){const n=t[sr],r=n?n.get(Ss,null):null;r&&r.handleError(e)}function hw(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];oR(t.data[s],e[s],r,a,i)}}function Rs(t,e,n){const r=Mo(e,t);!function nS(t,e,n){t.setValue(e,n)}(t[je],r,n)}function wj(t,e,n,r){const i=e[be];if(256==(256&i))return;e[yi].inlineEffectRunner?.flush(),ys(e);let s=null,a=null;(function Tj(t){return 2!==t.type})(t)&&(a=function jB(t){return t[Po]??function $B(t){const e=$S.pop()??Object.create(zB);return e.lView=t,e}(t)}(e),s=function Ze(t){return t&&(t.nextProducerIndex=0),qe(t)}(a));try{LI(e),function Mm(t){return Le.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&JS(t,e,n,2,r);const u=3==(3&i);if(u){const g=t.preOrderCheckHooks;null!==g&&ma(e,g,null)}else{const g=t.preOrderHooks;null!==g&&vs(e,g,0,null),Mu(e,0)}if(function Cj(t){for(let e=XA(t);null!==e;e=eS(e)){if(!(e[be]&ua.HasTransplantedViews))continue;const n=e[aa];for(let r=0;r<n.length;r++){fa(n[r])}}}(e),dR(e,0),null!==t.contentQueries&&aR(t,e),u){const g=t.contentCheckHooks;null!==g&&ma(e,g)}else{const g=t.contentHooks;null!==g&&vs(e,g,1),Mu(e,1)}!function QB(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Oo(~i);else{const o=i,s=n[++r],a=n[++r];HI(s,o),a(2,e[o])}}}finally{Oo(-1)}}(t,e);const d=t.components;null!==d&&fR(e,d,0);const f=t.viewQuery;if(null!==f&&dw(2,f,r),u){const g=t.viewCheckHooks;null!==g&&ma(e,g)}else{const g=t.viewHooks;null!==g&&vs(e,g,2),Mu(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Zc]){for(const g of e[Zc])g();e[Zc]=null}e[be]&=-73}catch(u){throw Du(e),u}finally{null!==a&&(function et(t,e){if(qe(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(vt(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)lt(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(a,s),function HB(t){t.lView[Po]!==t&&(t.lView=null,$S.push(t))}(a)),Pu()}}function dR(t,e){for(let n=XA(t);null!==n;n=eS(n)){n[be]&=~ua.HasChildViewsToRefresh;for(let r=un;r<n.length;r++)hR(n[r],e)}}function Dj(t,e,n){hR(Fr(e,t),n)}function hR(t,e){Qc(t)&&pw(t,e)}function pw(t,e){const r=t[ie],i=t[be],o=t[Po];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!yn(o)),o&&(o.dirty=!1),t[be]&=-9217,s)wj(r,t,r.template,t[Tt]);else if(8192&i){dR(t,1);const a=r.components;null!==a&&fR(t,a,1)}}function fR(t,e,n){for(let r=0;r<e.length;r++)Dj(t,e[r],n)}function Ff(t){for(t[yi].changeDetectionScheduler?.notify();t;){t[be]|=64;const e=bf(t);if(Fh(t)&&!e)return t;t=e}return null}class Vf{get rootNodes(){const e=this._lView,n=e[ie];return kf(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tt]}set context(e){this._lView[Tt]=e}get destroyed(){return 256==(256&this._lView[be])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ut];if(Bn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Af(e,r),hl(n,r))}this._attachedToViewContainer=!1}d_(this._lView[ie],this._lView)}onDestroy(e){Yc(this._lView,e)}markForCheck(){Ff(this._cdRefInjectingView||this._lView)}detach(){this._lView[be]&=-129}reattach(){Hh(this._lView),this._lView[be]|=128}detectChanges(){this._lView[be]|=1024,function fw(t,e=!0){const n=t[yi],r=n.rendererFactory,i=n.afterRenderEventManager;r.begin?.(),i?.begin();try{!function Ej(t){pw(t,0);let e=0;for(;bm(t);){if(100===e)throw new H(103,!1);e++,pw(t,1)}}(t)}catch(s){throw e&&M_(t,s),s}finally{r.end?.(),n.inlineEffectRunner?.flush(),i?.end()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function SU(t,e){Rf(t,e,e[je],2,null,null)}(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e,Hh(this._lView)}}let x_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=bj}return t})();function bj(t){return function Aj(t,e,n){if(ca(t)&&!n){const r=Fr(t.index,e);return new Vf(r,r)}return 47&t.type?new Vf(e[Gt],e):null}(It(),B(),16==(16&t))}let N_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Mj;static#t=this.__NG_ENV_ID__=n=>n}return t})();class Pj extends N_{constructor(e){super(),this._lView=e}onDestroy(e){return Yc(this._lView,e),()=>function pa(t,e){if(null===t[Ro])return;const n=t[Ro].indexOf(e);-1!==n&&t[Ro].splice(n,1)}(this._lView,e)}}function Mj(){return new Pj(B())}const pR=new Set;function Zu(t){pR.has(t)||(pR.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function gw(t){return e=>{setTimeout(t,void 0,e)}}const Ur=class Vj extends A{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=gw(o),i&&(i=gw(i)),s&&(s=gw(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ct&&e.add(a),a}};function gR(...t){}class mt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ur(!1),this.onMicrotaskEmpty=new Ur(!1),this.onStable=new Ur(!1),this.onError=new Ur(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Uj(){const t="function"==typeof Rt.requestAnimationFrame;let e=Rt[t?"requestAnimationFrame":"setTimeout"],n=Rt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function $j(t){const e=()=>{!function jj(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Rt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_w(t),t.isCheckStableRunning=!0,mw(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_w(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function zj(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return mR(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),_R(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return mR(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),_R(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,_w(t),mw(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mt.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(mt.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Bj,gR,gR);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Bj={};function mw(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _w(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function mR(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _R(t){t._nesting--,mw(t)}class Hj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ur,this.onMicrotaskEmpty=new Ur,this.onStable=new Ur,this.onError=new Ur}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}var Ku=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ku||{});const yR={destroy(){}};function IR(t,e){!e&&function ae(t){if(!tm()&&!function wh(){return gu}())throw new H(-203,!1)}();const n=e?.injector??se(lr);if(!function Sa(t){return"browser"===(t??se(lr)).get(bs)}(n))return yR;Zu("NgAfterNextRender");const r=n.get(O_),i=r.handler??=new wR,o=e?.phase??Ku.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(N_).onDestroy(s),u=new ER(n,o,()=>{s(),t()});return i.register(u),{destroy:s}}class ER{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(mt),this.errorHandler=e.get(Ss,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class wR{constructor(){this.executingCallbacks=!1,this.buckets={[Ku.EarlyRead]:new Set,[Ku.Write]:new Set,[Ku.MixedReadWrite]:new Set,[Ku.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new H(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const n of e)n.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let O_=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth){for(const n of this.internalCallbacks)n();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Te({token:t,providedIn:"root",factory:()=>new t})}return t})();function Wj(t,e){const n=Fr(e,t),r=n[ie];!function Zj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Vt];null!==i&&null===n[_i]&&(n[_i]=YE(i,n[sr])),yw(r,n,n[Tt])}function yw(t,e,n){ys(e);try{const r=t.viewQuery;null!==r&&dw(1,r,n);const i=t.template;null!==i&&JS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&aR(t,e),t.staticViewQueries&&dw(2,t.viewQuery,n);const o=t.components;null!==o&&function Kj(t,e){for(let n=0;n<e.length;n++)Wj(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[be]&=-5,Pu()}}function k_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=li(i,a):2==o&&(r=li(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class TR extends C_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Qe(e);return new Uf(n,this.ngModule)}}function CR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Yj{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=mu(r);const i=this.injector.get(e,ew,r);return i!==ew||n===ew?i:this.parentInjector.get(e,n,r)}}class Uf extends MS{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=CR(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return CR(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function SI(t){return t.map(xh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof ti?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Yj(e,o):e,a=s.get(NS,null);if(null===a)throw new H(407,!1);const g={rendererFactory:a,sanitizer:s.get(PB,null),inlineEffectRunner:null,afterRenderEventManager:s.get(O_,null),changeDetectionScheduler:s.get(gB,null)},_=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",I=r?function JB(t,e,n,r){const o=r.get(GS,!1)||n===tn.ShadowDom,s=t.selectRootElement(e,o);return function XB(t){eR(t)}(s),s}(_,r,this.componentDef.encapsulation,s):l_(_,y,function Qj(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y));let C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let S=null;null!==I&&(S=YE(I,s,!0));const N=aw(0,null,null,1,0,null,null,null,null,null,null),R=R_(null,N,null,C,null,null,g,_,s,null,S);let U,ne;ys(R);try{const oe=this.componentDef;let Oe,zt=null;oe.findHostDirectiveDefs?(Oe=[],zt=new Map,oe.findHostDirectiveDefs(oe,Oe,zt),Oe.push(oe)):Oe=[oe];const ui=function Xj(t,e){const n=t[ie],r=Ve;return t[r]=e,kl(n,r,2,"#host",null)}(R,I),nA=function e$(t,e,n,r,i,o,s){const a=i[ie];!function t$(t,e,n,r){for(const i of t)e.mergedAttrs=_u(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(k_(e,e.mergedAttrs,!0),null!==n&&gS(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=YE(e,i[sr]));const d=o.rendererFactory.createRenderer(e,n);let f=16;n.signals?f=4096:n.onPush&&(f=64);const g=R_(i,XS(n),null,f,i[t.index],t,o,d,null,null,u);return a.firstCreatePass&&cw(a,t,r.length-1),P_(i,g),i[t.index]=g}(ui,I,oe,Oe,R,g,_);ne=ha(N,Ve),I&&function r$(t,e,n,r){if(r)ia(t,n,["ng-version","17.0.8"]);else{const{attrs:i,classes:o}=function Nh(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Lr(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&ia(t,n,i),o&&o.length>0&&pS(t,n,o.join(" "))}}(_,oe,I,r),void 0!==n&&function i$(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(ne,this.ngContentSelectors,n),U=function n$(t,e,n,r,i,o){const s=It(),a=i[ie],u=ar(s,i);rR(a,i,s,n,null,r);for(let f=0;f<n.length;f++)Cr(ws(i,a,s.directiveStart+f,s),i);iR(a,i,s),u&&Cr(u,i);const d=ws(i,a,s.directiveStart+s.componentOffset,s);if(t[Tt]=i[Tt]=d,null!==o)for(const f of o)f(d,e);return iw(a,s,t),d}(nA,oe,Oe,zt,R,[o$]),yw(N,R,null)}finally{Pu()}return new Jj(this.componentType,U,Ol(ne,R),R,ne)}}class Jj extends CB{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Vf(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;hw(o[ie],o,i,e,n),this.previousInputValues.set(e,n),Ff(Fr(this._tNode.index,o))}}get injector(){return new wn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function o$(){const t=It();rl(B()[ie],t)}function PR(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function xn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Qu(t,e,n,r){const i=xn(t,e,n);return xn(t,e+1,r)||i}function vw(t,e,n,r){const i=B();return xn(i,Hi(),e)&&(ot(),jo(Pt(),i,t,e,n,r)),vw}function Fl(t,e,n,r){return xn(t,Hi(),n)?e+Be(n)+r:We}function Ul(t,e,n,r,i,o,s,a){const d=function F_(t,e,n,r,i){const o=Qu(t,e,n,r);return xn(t,e+2,i)||o}(t,uo(),n,i,s);return Ei(3),d?e+Be(n)+r+Be(i)+o+Be(s)+a:We}function V_(t,e){return t<<17|e<<2}function xa(t){return t>>17&32767}function Iw(t){return 2|t}function Yu(t){return(131068&t)>>2}function Ew(t,e){return-131069&t|e<<2}function ww(t){return 1|t}function BR(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?xa(o):Yu(o),u=!1;for(;0!==a&&(!1===u||s);){const f=t[a+1];I$(t[a],e)&&(u=!0,t[a+1]=r?ww(f):Iw(f)),a=r?xa(f):Yu(f)}u&&(t[n+1]=r?Iw(o):ww(o))}function I$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Da(t,e)>=0}const $n={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jR(t){return t.substring($n.key,$n.keyEnd)}function E$(t){return t.substring($n.value,$n.valueEnd)}function HR(t,e){const n=$n.textEnd;let r=$n.key=ql(t,e,n);return n===r?-1:(r=$n.keyEnd=function D$(t,e,n){let r;for(;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=qR(t,r,n),r=$n.value=ql(t,r,n),r=$n.valueEnd=function b$(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){const u=t.charCodeAt(s++);if(59===u)return a;34===u||39===u?a=s=GR(t,u,s,n):e===s-4&&85===o&&82===i&&76===r&&40===u?a=s=GR(t,41,s,n):u>32&&(a=s),o=i,i=r,r=-33&u}return a}(t,r,n),qR(t,r,n))}function ql(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function qR(t,e,n,r){return(e=ql(t,e,n))<n&&e++,e}function GR(t,e,n,r){let i=-1,o=n;for(;o<r;){const s=t.charCodeAt(o++);if(s==e&&92!==i)return o;i=92==s&&92===i?0:s}throw new Error}function Ps(t,e,n){const r=B();return xn(r,Hi(),e)&&function Di(t,e,n,r,i,o,s,a){const u=ar(e,n);let f,d=e.inputs;!a&&null!=d&&(f=d[r])?(hw(t,n,f,r,i),ca(e)&&function sj(t,e){const n=Fr(e,t);16&n[be]||(n[be]|=64)}(n,e.index)):3&e.type&&(r=function oj(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}(ot(),Pt(),r,t,e,r[je],n,!1),Ps}function Tw(t,e,n,r,i){const s=i?"class":"style";hw(t,n,e.inputs[s],s,r)}function Ho(t){!function po(t,e,n,r){const i=ot(),o=Ei(2);i.firstUpdatePass&&function QR(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Mn()],s=KR(t,n);eP(o,r)&&null===e&&!s&&(e=!1),e=function R$(t,e,n,r){const i=function Su(t){const e=Le.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=jf(n=Cw(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Cw(i,t,e,n,r),null===o){let u=function P$(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Yu(r))return t[xa(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=Cw(null,t,e,u[1],r),u=jf(u,e.attrs,r),function M$(t,e,n,r){t[xa(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function x$(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=jf(r,t[o].hostAttrs,n);return jf(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function y$(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=xa(s),u=Yu(s);t[r]=n;let f,d=!1;if(Array.isArray(n)?(f=n[1],(null===f||Da(n,f)>0)&&(d=!0)):f=n,i)if(0!==u){const _=xa(t[a+1]);t[r+1]=V_(_,a),0!==_&&(t[_+1]=Ew(t[_+1],r)),t[a+1]=function m$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=V_(a,0),0!==a&&(t[a+1]=Ew(t[a+1],r)),a=r;else t[r+1]=V_(u,0),0===a?a=r:t[u+1]=Ew(t[u+1],r),u=r;d&&(t[r+1]=Iw(t[r+1])),BR(t,f,r,!0),BR(t,f,r,!1),function v$(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Da(o,e)>=0&&(n[r+1]=ww(n[r+1]))}(e,f,t,r,o),s=V_(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(i,null,o,r);const s=B();if(n!==We&&xn(s,o,n)){const a=i.data[Mn()];if(eP(a,r)&&!KR(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=li(u,n||"")),Tw(i,a,s,n,r)}else!function k$(t,e,n,r,i,o,s,a){i===We&&(i=ht);let u=0,d=0,f=0<i.length?i[0]:null,g=0<o.length?o[0]:null;for(;null!==f||null!==g;){const _=u<i.length?i[u+1]:void 0,y=d<o.length?o[d+1]:void 0;let C,I=null;f===g?(u+=2,d+=2,_!==y&&(I=g,C=y)):null===g||null!==f&&f<g?(u+=2,I=f):(d+=2,I=g,C=y),null!==I&&JR(t,e,n,r,I,C,s,a),f=u<i.length?i[u]:null,g=d<o.length?o[d]:null}}(i,a,s,s[je],s[o+1],s[o+1]=function N$(t,e,n){if(null==n||""===n)return ht;const r=[],i=Ti(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}(YR,A$,t,!1)}function A$(t,e){for(let n=function T$(t){return function zR(t){$n.key=0,$n.keyEnd=0,$n.value=0,$n.valueEnd=0,$n.textEnd=t.length}(t),HR(t,ql(t,0,$n.textEnd))}(e);n>=0;n=HR(e,n))YR(t,jR(e),E$(e))}function KR(t,e){return e>=t.expandoStartIndex}function Cw(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=jf(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function jf(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ur(t,s,!!n||e[++o]))}return void 0===t?null:t}function YR(t,e,n){ur(t,e,Ti(n))}function JR(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],f=function _$(t){return 1==(1&t)}(d)?XR(u,e,n,i,Yu(d),s):void 0;U_(f)||(U_(o)||function g$(t){return 2==(2&t)}(d)&&(o=XR(u,null,n,i,a,s)),function VU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Pa.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Pa.Important),t.setStyle(n,r,i,o))}}(r,s,Mo(Mn(),n),i,o))}function XR(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),f=d?u[1]:u,g=null===f;let _=n[i+1];_===We&&(_=g?ht:void 0);let y=g?pf(_,r):f===r?_:void 0;if(d&&!U_(y)&&(y=pf(u,r)),U_(y)&&(a=y,s))return a;const I=t[i+1];i=s?xa(I):Yu(I)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=pf(u,r))}return a}function U_(t){return void 0!==t}function eP(t,e){return 0!=(t.flags&(e?8:16))}function Wl(t,e){return!e||null===e.firstChild||a_(t)}function Wf(t,e,n,r=!0){const i=e[ie];if(function PU(t,e,n,r){const i=un+r,o=n.length;r>0&&(n[i-1][mi]=e),r<o-un?(e[mi]=n[i],dl(n,un+r,e)):(n.push(e),e[mi]=null),e[Ut]=n;const s=e[gs];null!==s&&n!==s&&function MU(t,e){const n=t[aa];e[Gt]!==e[Ut][Ut][Gt]&&(t[be]|=ua.HasTransplantedViews),null===n?t[aa]=[e]:n.push(e)}(s,e);const a=e[Jr];null!==a&&a.insertView(t),Hh(e),e[be]|=128}(i,e,t,n),r){const s=LE(n,t),a=e[je],u=h_(a,t[vi]);null!==u&&function AU(t,e,n,r,i,o){r[Vt]=i,r[Pn]=e,Rf(t,r,n,1,i,o)}(i,t[Pn],a,e,u,s)}const o=e[_i];null!==o&&null!==o.firstChild&&(o.firstChild=null)}let go=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=m4}return t})();function m4(){return function fP(t,e){let n;const r=e[t.index];return Bn(r)?n=r:(n=sR(r,e,null,t),e[t.index]=n,P_(e,n)),pP(n,e,t,r),new dP(n,t,e)}(It(),B())}const _4=go,dP=class extends _4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ol(this._hostTNode,this._hostLView)}get injector(){return new wn(this._hostTNode,this._hostLView)}get parentInjector(){const e=al(this._hostTNode,this._hostLView);if(xu(e)){const n=ya(e,this._hostLView),r=Nu(e);return new wn(n[ie].data[r+8],n)}return new wn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=hP(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-un}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,Wl(this._hostTNode,null)),a}createComponent(e,n,r,i,o){const s=e&&!function ku(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const I=n||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}const u=s?e:new Uf(Qe(e)),d=r||this.parentInjector;if(!o&&null==u.ngModule){const C=(s?d:this.parentInjector).get(ti,null);C&&(o=C)}Qe(u.componentType??{});const y=u.create(d,i,null,o);return this.insertImpl(y.hostView,a,Wl(this._hostTNode,null)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function kI(t){return Bn(t[Ut])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const u=i[Ut],d=new dP(u,u[Pn],u[Ut]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Wf(s,i,o,r),e.attachToViewContainerRef(),dl(Nw(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=hP(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Af(this._lContainer,n);r&&(hl(Nw(this._lContainer),n),d_(r[ie],r))}detach(e){const n=this._adjustIndex(e,-1),r=Af(this._lContainer,n);return r&&null!=hl(Nw(this._lContainer),n)?new Vf(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function hP(t){return t[8]}function Nw(t){return t[8]||(t[8]=[])}let pP=function mP(t,e,n,r){if(t[vi])return;let i;i=8&n.type?Dt(r):function y4(t,e){const n=t[je],r=n.createComment(""),i=ar(e,t);return Gu(n,h_(n,i),r,function kU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[vi]=i},Ow=(t,e,n)=>!1;function qo(t,e,n,r,i,o,s,a){const u=B(),d=ot(),f=t+Ve,g=d.firstCreatePass?function w4(t,e,n,r,i,o,s,a,u){const d=e.consts,f=kl(e,t,4,s||null,$i(d,a));uw(e,n,f,$i(d,u)),rl(e,f);const g=f.tView=aw(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,d,u,e,n,r,i,o,s):d.data[f];Vr(g,!1);const _=_P(d,u,g,t);nl()&&f_(d,u,_,g),Cr(_,u);const y=sR(_,u,_,g);return u[f]=y,P_(u,y),function gP(t,e,n){return Ow(t,e,n)}(y,g,u),la(g)&&ow(d,u,g),null!=s&&sw(u,g,a),qo}let _P=function yP(t,e,n,r){return ko(!0),e[je].createComment("")};function le(t,e,n,r){const i=B(),o=ot(),s=Ve+t,a=i[je],u=o.firstCreatePass?function dH(t,e,n,r,i,o){const s=e.consts,u=kl(e,t,2,r,$i(s,i));return uw(e,n,u,$i(s,o)),null!==u.attrs&&k_(u,u.attrs,!1),null!==u.mergedAttrs&&k_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],d=jP(o,i,u,a,e,t);i[s]=d;const f=la(u);return Vr(u,!0),gS(a,d,u),32!=(32&u.flags)&&nl()&&f_(o,i,d,u),0===function zh(){return Le.lFrame.elementDepthCount}()&&Cr(d,i),function FI(){Le.lFrame.elementDepthCount++}(),f&&(ow(o,i,u),iw(o,u,i)),null!==r&&sw(i,u),le}function fe(){let t=It();Au()?function Gh(){Le.lFrame.isParent=!1}():(t=t.parent,Vr(t,!1));const e=t;(function UI(t){return Le.skipHydrationRootTNode===t})(e)&&function $I(){Le.skipHydrationRootTNode=null}(),function VI(){Le.lFrame.elementDepthCount--}();const n=ot();return n.firstCreatePass&&(rl(n,t),pm(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function tf(t){return 0!=(8&t.flags)}(e)&&Tw(n,e,B(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function KI(t){return 0!=(16&t.flags)}(e)&&Tw(n,e,B(),e.stylesWithoutHost,!1),fe}function nn(t,e,n,r){return le(t,e,n,r),fe(),nn}let jP=(t,e,n,r,i,o)=>(ko(!0),l_(r,i,function Vm(){return Le.lFrame.currentNamespace}()));const td="en-US";let KP=td;function X_(t){return!!t&&"function"==typeof t.then}function IM(t){return!!t&&"function"==typeof t.subscribe}function ec(t,e,n,r){const i=B(),o=ot(),s=It();return function wM(t,e,n,r,i,o,s){const a=la(r),d=t.firstCreatePass&&function cR(t){return t.cleanup||(t.cleanup=[])}(t),f=e[Tt],g=function uR(t){return t[oa]||(t[oa]=[])}(e);let _=!0;if(3&r.type||s){const C=ar(r,e),S=s?s(C):C,N=g.length,R=s?ne=>s(Dt(ne[r.index])):r.index;let U=null;if(!s&&a&&(U=function fz(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[oa],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==U)(U.__ngLastListenerFn__||U).__ngNextListenerFn__=o,U.__ngLastListenerFn__=o,_=!1;else{o=CM(r,e,f,o,!1);const ne=n.listen(S,i,o);g.push(o,ne),d&&d.push(i,R,N,N+1)}}else o=CM(r,e,f,o,!1);const y=r.outputs;let I;if(_&&null!==y&&(I=y[i])){const C=I.length;if(C)for(let S=0;S<C;S+=2){const oe=e[I[S]][I[S+1]].subscribe(o),Oe=g.length;g.push(o,oe),d&&d.push(i,r.index,Oe,-(Oe+1))}}}(o,i,i[je],s,t,e,r),ec}function TM(t,e,n,r){try{return Xr(6,e,n),!1!==n(r)}catch(i){return M_(t,i),!1}finally{Xr(7,e,n)}}function CM(t,e,n,r,i){return function o(s){if(s===Function)return r;Ff(t.componentOffset>-1?Fr(t.index,e):e);let u=TM(e,n,r,s),d=o.__ngNextListenerFn__;for(;d;)u=TM(e,n,d,s)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function tc(t=1){return function zI(t){return(Le.lFrame.contextLView=function Dm(t,e){for(;t>0;)e=e[So],t--;return e}(t,Le.lFrame.contextLView))[Tt]}(t)}function Ce(t,e=""){const n=B(),r=ot(),i=t+Ve,o=r.firstCreatePass?kl(r,i,1,e,null):r.data[i],s=zM(r,n,o,e,t);n[i]=s,nl()&&f_(r,n,s,o),Vr(o,!1)}let zM=(t,e,n,r,i)=>(ko(!0),function c_(t,e){return t.createText(e)}(e[je],r));function np(t){return Qw("",t,""),np}function Qw(t,e,n){const r=B(),i=Fl(r,t,e,n);return i!==We&&Rs(r,Mn(),i),Qw}function Yw(t,e,n,r,i){const o=B(),s=function Vl(t,e,n,r,i,o){const a=Qu(t,uo(),n,i);return Ei(2),a?e+Be(n)+r+Be(i)+o:We}(o,t,e,n,r,i);return s!==We&&Rs(o,Mn(),s),Yw}function Jw(t,e,n,r,i,o,s){const a=B(),u=Ul(a,t,e,n,r,i,o,s);return u!==We&&Rs(a,Mn(),u),Jw}class nc{}class JM{}class rT extends nc{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new TR(this);const i=Rn(e);this._bootstrapComponents=wi(i.bootstrap),this._r3Injector=wf(e,n,[{provide:nc,useValue:this},{provide:C_,useValue:this.componentFactoryResolver},...r],ct(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class iT extends JM{constructor(e){super(),this.moduleType=e}create(e){return new rT(this.moduleType,e,[])}}class XM extends nc{constructor(e){super(),this.componentFactoryResolver=new TR(this),this.instance=null;const n=new ba([...e.providers,{provide:nc,useValue:this},{provide:C_,useValue:this.componentFactoryResolver}],e.parent||Cl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function oT(t,e,n=null){return new XM({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Lz=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=yf(0,n.type),i=r.length>0?oT([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Te({token:t,providedIn:"environment",factory:()=>new t(re(ti))})}return t})();function ex(t){Zu("NgStandalone"),t.getStandaloneInjector=e=>e.get(Lz).getOrCreateStandaloneInjector(t)}Symbol;let Ms=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=f3}return t})();const d3=Ms,h3=class extends d3{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Gf(t,e,n,r){const i=e.tView,a=R_(t,i,n,4096&t[be]?4096:16,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null);a[gs]=t[e.index];const d=t[Jr];return null!==d&&(a[Jr]=d.createEmbeddedView(i)),yw(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Vf(i)}};function f3(){return function ny(t,e){return 4&t.type?new h3(e,t,Ol(t,e)):null}(It(),B())}class sp{constructor(e){this.full=e;const n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}const H3=new sp("17.0.8");let Lx=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();class z3{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Fx=(()=>{class t{compileModuleSync(n){return new iT(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=wi(Rn(n).declarations).reduce((s,a)=>{const u=Qe(a);return u&&s.push(new Uf(u)),s},[]);return new z3(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_T=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const $x=new de(""),oy=new de("");let ET,vT=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ET||(function g9(t){ET=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(re(mt),re(IT),re(oy))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),IT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ET?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const wT=new de("Application Initializer");let TT=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=se(wT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(X_(o))n.push(o);else if(IM(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const CT=new de("appBootstrapListener");function qx(t,e){return Array.isArray(e)?e.reduce(qx,t):{...t,...e}}let id=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=se(zS),this.componentTypes=[],this.components=[],this.isStable=se(_T).hasPendingTasks.pipe(we(n=>!n)),this._injector=se(ti)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof MS;if(!this._injector.get(TT).done)throw!i&&function Ao(t){const e=Qe(t)||In(t)||En(t);return null!==e&&e.standalone}(n),new H(405,!1);let s;s=i?n:this._injector.get(C_).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function _9(t){return t.isBoundToModule}(s)?void 0:this._injector.get(nc),d=s.create(lr.NULL,[],r||s.selector,a),f=d.location.nativeElement,g=d.injector.get($x,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),sy(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new H(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;sy(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(CT,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>sy(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let v9=(()=>{class t{constructor(){this.zone=se(mt),this.applicationRef=se(id)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function I9(){const t=se(mt),e=se(Ss);return n=>t.runOutsideAngular(()=>e.handleError(n))}let w9=(()=>{class t{constructor(){this.subscription=new Ct,this.initialized=!1,this.zone=se(mt),this.pendingTasks=se(_T)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{mt.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{mt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const xs=new de("LocaleId",{providedIn:"root",factory:()=>se(xs,rt.Optional|rt.SkipSelf)||function T9(){return typeof $localize<"u"&&$localize.locale||td}()}),DT=new de("PlatformDestroyListeners");let Kx=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function qj(t="zone.js",e){return"noop"===t?new Hj:"zone.js"===t?new mt(e):t}(r?.ngZone,function Zx(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function kz(t,e,n){return new rT(t,e,n)}(n.moduleType,this.injector,function Wx(t){return[{provide:mt,useFactory:t},{provide:lo,multi:!0,useFactory:()=>{const e=se(v9,{optional:!0});return()=>e.initialize()}},{provide:lo,multi:!0,useFactory:()=>{const e=se(w9);return()=>{e.initialize()}}},{provide:zS,useFactory:I9}]}(()=>i)),s=o.injector.get(Ss,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{sy(this._modules,o),a.unsubscribe()})}),function zx(t,e,n){try{const r=n();return X_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(TT);return a.runInitializers(),a.donePromise.then(()=>(function QP(t){Ir(t,"Expected localeId to be defined"),"string"==typeof t&&(KP=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(xs,td)||td),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=qx({},r);return function m9(t,e,n){const r=new iT(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(id);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new H(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new H(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(DT,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(re(lr))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Oa=null;const Qx=new de("AllowMultipleToken");function Yx(t,e,n=[]){const r=`Platform: ${e}`,i=new de(r);return(o=[])=>{let s=bT();if(!s||s.injector.get(Qx,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function b9(t){if(Oa&&!Oa.get(Qx,!1))throw new H(400,!1);(function Hx(){!function Ws(t){xi=t}(()=>{throw new H(600,!1)})})(),Oa=t;const e=t.get(Kx);(function Xx(t){t.get(OA,null)?.forEach(n=>n())})(t)}(function Jx(t=[],e){return lr.create({name:e,providers:[{provide:Tl,useValue:"platform"},{provide:DT,useValue:new Set([()=>Oa=null])},...t]})}(a,r))}return function A9(t){const e=bT();if(!e)throw new H(401,!1);return e}()}}function bT(){return Oa?.get(Kx)??null}const N9=Yx(null,"core",[]);let O9=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(re(id))};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=Li({})}return t})();function kT(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let LT=null;function sd(){return LT}class uq{}const Hr=new de("DocumentToken");let FT=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:()=>se(lq),providedIn:"platform"})}return t})();const cq=new de("Location Initialized");let lq=(()=>{class t extends FT{constructor(){super(),this._doc=se(Hr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sd().getBaseHref(this._doc)}onPopState(n){const r=sd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=sd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function VT(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function TN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ns(t){return t&&"?"!==t[0]?"?"+t:t}let ic=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:()=>se(DN),providedIn:"root"})}return t})();const CN=new de("appBaseHref");let DN=(()=>{class t extends ic{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??se(Hr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return VT(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ns(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Ns(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Ns(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(FT),re(CN,8))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dq=(()=>{class t extends ic{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=VT(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Ns(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Ns(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(FT),re(CN,8))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),ad=(()=>{class t{constructor(n){this._subject=new Ur,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function pq(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(TN(bN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ns(r))}normalize(n){return t.stripTrailingSlash(function fq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,bN(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ns(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ns(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Ns;static#t=this.joinWithSlash=VT;static#n=this.stripTrailingSlash=TN;static#r=this.\u0275fac=function(r){return new(r||t)(re(ic))};static#i=this.\u0275prov=Te({token:t,factory:()=>function hq(){return new ad(re(ic))}(),providedIn:"root"})}return t})();function bN(t){return t.replace(/\/index.html$/,"")}class t5{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let KT=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new t5(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),FN(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{FN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Pe(go),Pe(Ms),Pe(A_))};static#t=this.\u0275dir=Sn({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function FN(t,e){t.context.$implicit=e.item}let QT=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new n5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){VN("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){VN("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Pe(go),Pe(Ms))};static#t=this.\u0275dir=Sn({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class n5{constructor(){this.$implicit=null,this.ngIf=null}}function VN(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ct(e)}'.`)}let S5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=Li({})}return t})();function Dy(t){return"server"===t}let x5=(()=>{class t{static#e=this.\u0275prov=Te({token:t,providedIn:"root",factory:()=>new N5(re(Hr),window)})}return t})();class N5{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function O5(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class i6 extends uq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class r0 extends i6{static makeCurrent(){!function aq(t){LT||(LT=t)}(new r0)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function o6(){return fp=fp||document.querySelector("base"),fp?fp.getAttribute("href"):null}();return null==n?null:function s6(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){fp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Jq(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let fp=null,u6=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();const o0=new de("EventManagerPlugins");let qN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(re(o0),re(mt))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();class GN{constructor(e){this._doc=e}}const s0="ng-app-id";let WN=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Dy(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${s0}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(s0),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(s0,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(re(Hr),re(r_),re(kA,8),re(bs))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();const a0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},u0=/%COMP%/g,h6=new de("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function KN(t,e){return e.map(n=>n.replace(u0,t))}let QN=(()=>{class t{constructor(n,r,i,o,s,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Dy(a),this.defaultRenderer=new c0(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===tn.ShadowDom&&(r={...r,encapsulation:tn.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof JN?i.applyToHost(n):i instanceof l0&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case tn.Emulated:o=new JN(u,d,r,this.appId,f,s,a,g);break;case tn.ShadowDom:return new m6(u,d,n,r,s,a,this.nonce,g);default:o=new l0(u,d,r,f,s,a,g)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(re(qN),re(WN),re(r_),re(h6),re(Hr),re(bs),re(mt),re(kA))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();class c0{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(a0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(YN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(YN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=a0[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=a0[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Pa.DashCase|Pa.Important)?e.style.setProperty(n,r,i&Pa.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Pa.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=sd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function YN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class m6 extends c0{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=KN(i.id,i.styles);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class l0 extends c0{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?KN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class JN extends l0{constructor(e,n,r,i,o,s,a,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,u,d),this.contentAttr=function f6(t){return"_ngcontent-%COMP%".replace(u0,t)}(d),this.hostAttr=function p6(t){return"_nghost-%COMP%".replace(u0,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let _6=(()=>{class t extends GN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(re(Hr))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();const XN=["alt","control","meta","shift"],y6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},v6={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let I6=(()=>{class t extends GN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sd().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),XN.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),s+=d+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=y6[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),XN.forEach(s=>{s!==i&&(0,v6[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(re(Hr))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();const tO=[{provide:bs,useValue:"browser"},{provide:OA,useValue:function E6(){r0.makeCurrent()},multi:!0},{provide:Hr,useFactory:function T6(){return function X2(t){wE=t}(document),document},deps:[]}],C6=Yx(N9,"browser",tO),D6=new de(""),nO=[{provide:oy,useClass:class a6{addToWindow(e){Rt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new H(5103,!1);return o},Rt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rt.getAllAngularRootElements=()=>e.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(r=>{const i=Rt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?sd().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:$x,useClass:vT,deps:[mt,IT,oy]},{provide:vT,useClass:vT,deps:[mt,IT,oy]}],rO=[{provide:Tl,useValue:"root"},{provide:Ss,useFactory:function w6(){return new Ss},deps:[]},{provide:o0,useClass:_6,multi:!0,deps:[Hr,mt,bs]},{provide:o0,useClass:I6,multi:!0,deps:[Hr]},QN,WN,qN,{provide:NS,useExisting:QN},{provide:class k5{},useClass:u6,deps:[]},[]];let b6=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:r_,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(re(D6,12))};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=Li({providers:[...rO,...nO],imports:[S5,O9]})}return t})(),iO=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(re(Hr))};static#t=this.\u0275prov=Te({token:t,factory:function(r){let i=null;return i=r?new r:function S6(){return new iO(re(Hr))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;let aO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:function(r){let i=null;return i=r?new(r||t):re(uO),i},providedIn:"root"})}return t})(),uO=(()=>{class t extends aO{constructor(n){super(),this._doc=n}sanitize(n,r){if(null==r)return null;switch(n){case qi.NONE:return r;case qi.HTML:return Bo(r,"HTML")?Ti(r):DS(this._doc,String(r)).toString();case qi.STYLE:return Bo(r,"Style")?Ti(r):r;case qi.SCRIPT:if(Bo(r,"Script"))return Ti(r);throw new H(5200,!1);case qi.URL:return Bo(r,"URL")?Ti(r):__(String(r));case qi.RESOURCE_URL:if(Bo(r,"ResourceURL"))return Ti(r);throw new H(5201,!1);default:throw new H(5202,!1)}}bypassSecurityTrustHtml(n){return function KU(t){return new HU(t)}(n)}bypassSecurityTrustStyle(n){return function QU(t){return new zU(t)}(n)}bypassSecurityTrustScript(n){return function YU(t){return new qU(t)}(n)}bypassSecurityTrustUrl(n){return function JU(t){return new GU(t)}(n)}bypassSecurityTrustResourceUrl(n){return function XU(t){return new WU(t)}(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(Hr))};static#t=this.\u0275prov=Te({token:t,factory:function(r){let i=null;return i=r?new r:function x6(t){return new uO(t.get(Hr))}(re(lr)),i},providedIn:"root"})}return t})();var cd=ze(582);const lO=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function dO(t){return ke(t?.then)}function hO(t){return ke(t[ci])}function fO(t){return Symbol.asyncIterator&&ke(t?.[Symbol.asyncIterator])}function pO(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const gO=function O6(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function mO(t){return ke(t?.[gO])}function _O(t){return(0,cd.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,cd.qq)(n.read());if(i)return yield(0,cd.qq)(void 0);yield yield(0,cd.qq)(r)}}finally{n.releaseLock()}})}function yO(t){return ke(t?.getReader)}function Qi(t){if(t instanceof qt)return t;if(null!=t){if(hO(t))return function k6(t){return new qt(e=>{const n=t[ci]();if(ke(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(lO(t))return function L6(t){return new qt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(dO(t))return function F6(t){return new qt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Zs)})}(t);if(fO(t))return vO(t);if(mO(t))return function V6(t){return new qt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(yO(t))return function U6(t){return vO(_O(t))}(t)}throw pO(t)}function vO(t){return new qt(e=>{(function B6(t,e){var n,r,i,o;return(0,cd.mG)(this,void 0,void 0,function*(){try{for(n=(0,cd.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ls(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function oc(t,e=0){return Ie((n,r)=>{n.subscribe(Ae(r,i=>Ls(r,t,()=>r.next(i),e),()=>Ls(r,t,()=>r.complete(),e),i=>Ls(r,t,()=>r.error(i),e)))})}function ld(t,e=0){return Ie((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function IO(t,e){if(!t)throw new Error("Iterable cannot be null");return new qt(n=>{Ls(n,e,()=>{const r=t[Symbol.asyncIterator]();Ls(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function rn(t,e){return e?function G6(t,e){if(null!=t){if(hO(t))return function j6(t,e){return Qi(t).pipe(ld(e),oc(e))}(t,e);if(lO(t))return function H6(t,e){return new qt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(dO(t))return function $6(t,e){return Qi(t).pipe(ld(e),oc(e))}(t,e);if(fO(t))return IO(t,e);if(mO(t))return function z6(t,e){return new qt(n=>{let r;return Ls(n,e,()=>{r=t[gO](),Ls(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>ke(r?.return)&&r.return()})}(t,e);if(yO(t))return function q6(t,e){return IO(_O(t),e)}(t,e)}throw pO(t)}(t,e):Qi(t)}function h0(t){return t[t.length-1]}function pp(t){return function W6(t){return t&&ke(t.schedule)}(h0(t))?t.pop():void 0}function Ne(...t){return rn(t,pp(t))}const{isArray:Q6}=Array,{getPrototypeOf:Y6,prototype:J6,keys:X6}=Object;const{isArray:nG}=Array;function f0(...t){const e=pp(t),n=function Z6(t){return ke(h0(t))?t.pop():void 0}(t),{args:r,keys:i}=function eG(t){if(1===t.length){const e=t[0];if(Q6(e))return{args:e,keys:null};if(function tG(t){return t&&"object"==typeof t&&Y6(t)===J6}(e)){const n=X6(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return rn([],e);const o=new qt(function sG(t,e,n=Kn){return r=>{EO(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)EO(e,()=>{const d=rn(t[u],e);let f=!1;d.subscribe(Ae(r,g=>{o[u]=g,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>function oG(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,s):Kn));return n?o.pipe(function iG(t){return we(e=>function rG(t,e){return nG(e)?t(...e):t(e)}(t,e))}(n)):o}function EO(t,e,n){t?Ls(n,t,e):e()}const Sy=Vn(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Dr(t,e,n=1/0){return ke(e)?Dr((r,i)=>we((o,s)=>e(r,o,i,s))(Qi(t(r,i))),n):("number"==typeof e&&(n=e),Ie((r,i)=>function aG(t,e,n,r,i,o,s,a){const u=[];let d=0,f=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},y=C=>d<r?I(C):u.push(C),I=C=>{o&&e.next(C),d++;let S=!1;Qi(n(C,f++)).subscribe(Ae(e,N=>{i?.(N),o?y(N):e.next(N)},()=>{S=!0},void 0,()=>{if(S)try{for(d--;u.length&&d<r;){const N=u.shift();s?Ls(e,s,()=>I(N)):I(N)}_()}catch(N){e.error(N)}}))};return t.subscribe(Ae(e,y,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function dd(t=1/0){return Dr(Kn,t)}function p0(...t){return function uG(){return dd(1)}()(rn(t,pp(t)))}function wO(t){return new qt(e=>{Qi(t()).subscribe(e)})}function Ry(t,e){const n=ke(t)?t:()=>t,r=i=>i.error(n());return new qt(e?i=>e.schedule(r,0,i):r)}const Go=new qt(t=>t.complete());function g0(){return Ie((t,e)=>{let n=null;t._refCount++;const r=Ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class TO extends qt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,pe(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ct;const n=this.getSubject();e.add(this.source.subscribe(Ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ct.EMPTY)}return e}refCount(){return g0()(this)}}function Xn(t,e){return Ie((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Ae(r,u=>{i?.unsubscribe();let d=0;const f=o++;Qi(t(u,f)).subscribe(i=Ae(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function hd(t){return t<=0?()=>Go:Ie((e,n)=>{let r=0;e.subscribe(Ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Py(...t){const e=pp(t);return Ie((n,r)=>{(e?p0(t,n,e):p0(t,n)).subscribe(r)})}function yo(t,e){return Ie((n,r)=>{let i=0;n.subscribe(Ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function My(t){return Ie((e,n)=>{let r=!1;e.subscribe(Ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function CO(t=lG){return Ie((e,n)=>{let r=!1;e.subscribe(Ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function lG(){return new Sy}function La(t,e){const n=arguments.length>=2;return r=>r.pipe(t?yo((i,o)=>t(i,o,r)):Kn,hd(1),n?My(e):CO(()=>new Sy))}function gp(t,e){return ke(e)?Dr(t,e,1):Dr(t,1)}function dr(t,e,n){const r=ke(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ie((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Ae(o,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),o.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):Kn}function fd(t){return Ie((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Ae(n,void 0,void 0,s=>{o=Qi(t(s,fd(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function xy(t,e){return Ie(function dG(t,e,n,r,i){return(o,s)=>{let a=n,u=e,d=0;o.subscribe(Ae(s,f=>{const g=d++;u=a?t(u,f,g):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(t,e,arguments.length>=2,!0))}function m0(t){return t<=0?()=>Go:Ie((e,n)=>{let r=[];e.subscribe(Ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function _0(t){return Ie((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Xe="primary",mp=Symbol("RouteTitle");class gG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function pd(t){return new gG(t)}function mG(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Wo(t,e){const n=t?y0(t):void 0,r=e?y0(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!DO(t[i],e[i]))return!1;return!0}function y0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function DO(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function bO(t){return t.length>0?t[t.length-1]:null}function Fa(t){return function N6(t){return!!t&&(t instanceof qt||ke(t.lift)&&ke(t.subscribe))}(t)?t:X_(t)?rn(Promise.resolve(t)):Ne(t)}const yG={exact:function RO(t,e,n){if(!sc(t.segments,e.segments)||!Ny(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!RO(t.children[r],e.children[r],n))return!1;return!0},subset:PO},AO={exact:function vG(t,e){return Wo(t,e)},subset:function IG(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>DO(t[n],e[n]))},ignored:()=>!0};function SO(t,e,n){return yG[n.paths](t.root,e.root,n.matrixParams)&&AO[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function PO(t,e,n){return MO(t,e,e.segments,n)}function MO(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!sc(i,n)||e.hasChildren()||!Ny(i,n,r))}if(t.segments.length===n.length){if(!sc(t.segments,n)||!Ny(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!PO(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(sc(t.segments,i)&&Ny(t.segments,i,r)&&t.children[Xe])&&MO(t.children[Xe],e,o,r)}}function Ny(t,e,n){return e.every((r,i)=>AO[n](t[i].parameters,r.parameters))}class gd{constructor(e=new Mt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pd(this.queryParams)),this._queryParamMap}toString(){return TG.serialize(this)}}class Mt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oy(this)}}class _p{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=pd(this.parameters)),this._parameterMap}toString(){return OO(this)}}function sc(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let md=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:()=>new v0,providedIn:"root"})}return t})();class v0{parse(e){const n=new OG(e);return new gd(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${yp(e.root,!0)}`,r=function bG(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${ky(n)}=${ky(i)}`).join("&"):`${ky(n)}=${ky(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function CG(t){return encodeURI(t)}(e.fragment)}`:""}`}}const TG=new v0;function Oy(t){return t.segments.map(e=>OO(e)).join("/")}function yp(t,e){if(!t.hasChildren())return Oy(t);if(e){const n=t.children[Xe]?yp(t.children[Xe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Xe&&r.push(`${i}:${yp(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function wG(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Xe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Xe&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Xe?[yp(t.children[Xe],!1)]:[`${i}:${yp(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Xe]?`${Oy(t)}/${n[0]}`:`${Oy(t)}/(${n.join("//")})`}}function xO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ky(t){return xO(t).replace(/%3B/gi,";")}function I0(t){return xO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ly(t){return decodeURIComponent(t)}function NO(t){return Ly(t.replace(/\+/g,"%20"))}function OO(t){return`${I0(t.path)}${function DG(t){return Object.keys(t).map(e=>`;${I0(e)}=${I0(t[e])}`).join("")}(t.parameters)}`}const AG=/^[^\/()?;#]+/;function E0(t){const e=t.match(AG);return e?e[0]:""}const SG=/^[^\/()?;=#]+/,PG=/^[^=?&#]+/,xG=/^[^&#]+/;class OG{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mt([],{}):new Mt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Xe]=new Mt(e,n)),r}parseSegment(){const e=E0(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new _p(Ly(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function RG(t){const e=t.match(SG);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=E0(this.remaining);i&&(r=i,this.capture(r))}e[Ly(n)]=Ly(r)}parseQueryParam(e){const n=function MG(t){const e=t.match(PG);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function NG(t){const e=t.match(xG);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=NO(n),o=NO(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=E0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Xe);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[Xe]:new Mt([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}}function kO(t){return t.segments.length>0?new Mt([],{[Xe]:t}):t}function LO(t){const e={};for(const r of Object.keys(t.children)){const o=LO(t.children[r]);if(r===Xe&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function kG(t){if(1===t.numberOfChildren&&t.children[Xe]){const e=t.children[Xe];return new Mt(t.segments.concat(e.segments),e.children)}return t}(new Mt(t.segments,e))}function ac(t){return t instanceof gd}function FO(t){let e;const i=kO(function n(o){const s={};for(const u of o.children){const d=n(u);s[u.outlet]=d}const a=new Mt(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function VO(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return w0(i,i,i,n,r);const o=function FG(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new BO(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new BO(n,e,r)}(e);if(o.toRoot())return w0(i,i,new Mt([],{}),n,r);const s=function VG(t,e,n){if(t.isAbsolute)return new Vy(e,!0,0);if(!n)return new Vy(e,!1,NaN);if(null===n.parent)return new Vy(n,!0,0);const r=Fy(t.commands[0])?0:1;return function UG(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Vy(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?Ip(s.segmentGroup,s.index,o.commands):jO(s.segmentGroup,s.index,o.commands);return w0(i,s.segmentGroup,a,n,r)}function Fy(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function vp(t){return"object"==typeof t&&null!=t&&t.outlets}function w0(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,d])=>{o[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),s=t===e?n:UO(t,e,n);const a=kO(LO(s));return new gd(a,o,i)}function UO(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:UO(o,e,n)}),new Mt(t.segments,r)}class BO{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fy(r[0]))throw new H(4003,!1);const i=r.find(vp);if(i&&i!==bO(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vy{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function jO(t,e,n){if(t||(t=new Mt([],{})),0===t.segments.length&&t.hasChildren())return Ip(t,e,n);const r=function jG(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(vp(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!HO(u,d,s))return o;r+=2}else{if(!HO(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Mt(t.segments.slice(0,r.pathIndex),{});return o.children[Xe]=new Mt(t.segments.slice(r.pathIndex),t.children),Ip(o,0,i)}return r.match&&0===i.length?new Mt(t.segments,{}):r.match&&!t.hasChildren()?T0(t,e,n):r.match?Ip(t,0,i):T0(t,e,n)}function Ip(t,e,n){if(0===n.length)return new Mt(t.segments,{});{const r=function BG(t){return vp(t[0])?t[0].outlets:{[Xe]:t}}(n),i={};if(Object.keys(r).some(o=>o!==Xe)&&t.children[Xe]&&1===t.numberOfChildren&&0===t.children[Xe].segments.length){const o=Ip(t.children[Xe],e,n);return new Mt(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=jO(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Mt(t.segments,i)}}function T0(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(vp(o)){const u=$G(o.outlets);return new Mt(r,u)}if(0===i&&Fy(n[0])){r.push(new _p(t.segments[e].path,$O(n[0]))),i++;continue}const s=vp(o)?o.outlets[Xe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Fy(a)?(r.push(new _p(s,$O(a))),i+=2):(r.push(new _p(s,{})),i++)}return new Mt(r,{})}function $G(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=T0(new Mt([],{}),0,r))}),e}function $O(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function HO(t,e,n){return t==n.path&&Wo(e,n.parameters)}const Ep="imperative";class Zo{constructor(e,n){this.id=e,this.url=n}}class Uy extends Zo{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ko extends Zo{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _d extends Zo{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yd extends Zo{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class By extends Zo{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zO extends Zo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HG extends Zo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zG extends Zo{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qG extends Zo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GG extends Zo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WG{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ZG{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class KG{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QG{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YG{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JG{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qO{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class C0{}class D0{constructor(e){this.url=e}}class XG{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new wp,this.attachRef=null}}let wp=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new XG,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class GO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=b0(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=b0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=A0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return A0(e,this._root).map(n=>n.value)}}function b0(t,e){if(t===e.value)return e;for(const n of e.children){const r=b0(t,n);if(r)return r}return null}function A0(t,e){if(t===e.value)return[e];for(const n of e.children){const r=A0(t,n);if(r.length)return r.unshift(e),r}return[]}class vo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function vd(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class WO extends GO{constructor(e,n){super(e),this.snapshot=n,P0(this,e)}toString(){return this.snapshot.toString()}}function ZO(t,e){const n=function e8(t,e){const s=new R0([],{},{},"",{},Xe,e,null,{});return new KO("",new vo(s,[]))}(0,e),r=new M([new _p("",{})]),i=new M({}),o=new M({}),s=new M({}),a=new M(""),u=new uc(r,i,s,a,o,Xe,e,n.root);return u.snapshot=n.root,new WO(new vo(u,[]),n)}class uc{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(we(d=>d[mp]))??Ne(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(we(e=>pd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(we(e=>pd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function S0(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&YO(i)&&(r.resolve[mp]=i.title),r}class R0{get title(){return this.data?.[mp]}constructor(e,n,r,i,o,s,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class KO extends GO{constructor(e,n){super(n),this.url=e,P0(this,n)}toString(){return QO(this._root)}}function P0(t,e){e.value._routerState=t,e.children.forEach(n=>P0(t,n))}function QO(t){const e=t.children.length>0?` { ${t.children.map(QO).join(", ")} } `:"";return`${t.value}${e}`}function M0(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Wo(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Wo(e.params,n.params)||t.paramsSubject.next(n.params),function _G(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Wo(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Wo(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function x0(t,e){const n=Wo(t.params,e.params)&&function EG(t,e){return sc(t,e)&&t.every((n,r)=>Wo(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||x0(t.parent,e.parent))}function YO(t){return"string"==typeof t.title||null===t.title}let N0=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xe,this.activateEvents=new Ur,this.deactivateEvents=new Ur,this.attachEvents=new Ur,this.detachEvents=new Ur,this.parentContexts=se(wp),this.location=se(go),this.changeDetector=se(x_),this.environmentInjector=se(ti),this.inputBinder=se(jy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new t8(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Sn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Er]})}return t})();class t8{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===uc?this.route:e===wp?this.childContexts:this.parent.get(e,n)}}const jy=new de("");let JO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=f0([r.queryParams,r.params,r.data]).pipe(Xn(([o,s,a],u)=>(a={...o,...s,...a},0===u?Ne(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function sq(t){const e=Qe(t);if(!e)return null;const n=new Uf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();function Tp(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function r8(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Tp(t,r,i);return Tp(t,r)})}(t,e,n);return new vo(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Tp(t,a)),s}}const r=function i8(t){return new uc(new M(t.url),new M(t.params),new M(t.queryParams),new M(t.fragment),new M(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Tp(t,o));return new vo(r,i)}}const O0="ngNavigationCancelingError";function XO(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=ac(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=e1(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function e1(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[O0]=!0,r.cancellationCode=e,n&&(r.url=n),r}function t1(t){return t&&t[O0]}let n1=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["ng-component"]],standalone:!0,features:[ex],decls:1,vars:0,template:function(r,i){1&r&&nn(0,"router-outlet")},dependencies:[N0],encapsulation:2})}return t})();function k0(t){const e=t.children&&t.children.map(k0),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Xe&&(n.component=n1),n}function Qo(t){return t.outlet||Xe}function Cp(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class h8{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),M0(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=vd(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=vd(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=vd(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=vd(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new JG(o.value.snapshot))}),e.children.length&&this.forwardEvent(new QG(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(M0(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),M0(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Cp(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class r1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $y{constructor(e,n){this.component=e,this.route=n}}function f8(t,e,n){const r=t._root;return Dp(r,e?e._root:null,n,[r.value])}function Id(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function TI(t){return null!==Js(t)}(t)?e.get(t):t:r}function Dp(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=vd(e);return t.children.forEach(s=>{(function g8(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function m8(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!sc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!sc(t.url,e.url)||!Wo(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!x0(t,e)||!Wo(t.queryParams,e.queryParams);default:return!x0(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new r1(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Dp(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $y(a.outlet.component,s))}else s&&bp(e,a,i),i.canActivateChecks.push(new r1(r)),Dp(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bp(a,n.getContext(s),i)),i}function bp(t,e,n){const r=vd(t),i=t.value;Object.entries(r).forEach(([o,s])=>{bp(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new $y(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ap(t){return"function"==typeof t}function i1(t){return t instanceof Sy||"EmptyError"===t?.name}const Hy=Symbol("INITIAL_VALUE");function Ed(){return Xn(t=>f0(t.map(e=>e.pipe(hd(1),Py(Hy)))).pipe(we(e=>{for(const n of e)if(!0!==n){if(n===Hy)return Hy;if(!1===n||n instanceof gd)return n}return!0}),yo(e=>e!==Hy),hd(1)))}function o1(t){return function Do(...t){return us(t)}(dr(e=>{if(ac(e))throw XO(0,e)}),we(e=>!0===e))}class L0{constructor(e){this.segmentGroup=e||null}}class F0 extends Error{constructor(e){super(),this.urlTree=e}}function wd(t){return Ry(new L0(t))}class L8{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ne(r);if(i.numberOfChildren>1||!i.children[Xe])return Ry(new H(4e3,!1));i=i.children[Xe]}}applyRedirectCommands(e,n,r){const i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new F0(i);return i}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new gd(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Mt(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const V0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function F8(t,e,n,r,i){const o=U0(t,e,n);return o.matched?(r=function s8(t,e){return t.providers&&!t._injector&&(t._injector=oT(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function N8(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?Ne(i.map(s=>{const a=Id(s,t);return Fa(function w8(t){return t&&Ap(t.canMatch)}(a)?a.canMatch(e,n):j(t,()=>a(e,n)))})).pipe(Ed(),o1()):Ne(!0)}(r,e,n).pipe(we(s=>!0===s?o:{...V0}))):Ne(o)}function U0(t,e,n){if("**"===e.path)return function V8(t){return{matched:!0,parameters:t.length>0?bO(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...V0}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||mG)(n,t,e);if(!i)return{...V0};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function s1(t,e,n,r){return n.length>0&&function j8(t,e,n){return n.some(r=>zy(t,e,r)&&Qo(r)!==Xe)}(t,n,r)?{segmentGroup:new Mt(e,B8(r,new Mt(n,t.children))),slicedSegments:[]}:0===n.length&&function $8(t,e,n){return n.some(r=>zy(t,e,r))}(t,n,r)?{segmentGroup:new Mt(t.segments,U8(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Mt(t.segments,t.children),slicedSegments:n}}function U8(t,e,n,r,i){const o={};for(const s of r)if(zy(t,n,s)&&!i[Qo(s)]){const a=new Mt([],{});o[Qo(s)]=a}return{...i,...o}}function B8(t,e){const n={};n[Xe]=e;for(const r of t)if(""===r.path&&Qo(r)!==Xe){const i=new Mt([],{});n[Qo(r)]=i}return n}function zy(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class q8{}class Z8{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new L8(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){const e=s1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(we(n=>{const r=new R0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xe,this.rootComponentType,null,{}),i=new vo(r,n),o=new KO("",i),s=function LG(t,e,n=null,r=null){return VO(FO(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Xe).pipe(fd(r=>{if(r instanceof F0)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof L0?this.noMatchError(r):r}))}inheritParamsAndData(e,n){const r=e.value,i=S0(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(we(o=>o instanceof vo?[o]:[]))}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return rn(i).pipe(gp(o=>{const s=r.children[o],a=function l8(t,e){const n=t.filter(r=>Qo(r)===e);return n.push(...t.filter(r=>Qo(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),xy((o,s)=>(o.push(...s),o)),My(null),function hG(t,e){const n=arguments.length>=2;return r=>r.pipe(t?yo((i,o)=>t(i,o,r)):Kn,m0(1),n?My(e):CO(()=>new Sy))}(),Dr(o=>{if(null===o)return wd(r);const s=a1(o);return function K8(t){t.sort((e,n)=>e.value.outlet===Xe?-1:n.value.outlet===Xe?1:e.value.outlet.localeCompare(n.value.outlet))}(s),Ne(s)}))}processSegment(e,n,r,i,o,s){return rn(n).pipe(gp(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(fd(u=>{if(u instanceof L0)return Ne(null);throw u}))),La(a=>!!a),fd(a=>{if(i1(a))return function z8(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?Ne(new q8):wd(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function H8(t,e,n,r){return!!(Qo(t)===r||r!==Xe&&zy(e,n,t))&&U0(e,t,n).matched}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):wd(i):wd(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=U0(n,i,o);if(!a)return wd(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d);return this.applyRedirects.lineralizeSegments(i,g).pipe(Dr(_=>this.processSegment(e,r,n,_.concat(f),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){const s=F8(n,r,i,e);return"**"===r.path&&(n.children={}),s.pipe(Xn(a=>a.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Xn(({routes:u})=>{const d=r._loadedInjector??e,{consumedSegments:f,remainingSegments:g,parameters:_}=a,y=new R0(f,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Y8(t){return t.data||{}}(r),Qo(r),r.component??r._loadedComponent??null,r,function J8(t){return t.resolve||{}}(r)),{segmentGroup:I,slicedSegments:C}=s1(n,f,g,u);if(0===C.length&&I.hasChildren())return this.processChildren(d,u,I).pipe(we(N=>null===N?null:new vo(y,N)));if(0===u.length&&0===C.length)return Ne(new vo(y,[]));const S=Qo(r)===o;return this.processSegment(d,u,I,C,S?Xe:o,!0).pipe(we(N=>new vo(y,N instanceof vo?[N]:[])))})):wd(n)))}getChildConfig(e,n,r){return n.children?Ne({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?Ne({routes:n._loadedRoutes,injector:n._loadedInjector}):function x8(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?Ne(!0):Ne(i.map(s=>{const a=Id(s,t);return Fa(function y8(t){return t&&Ap(t.canLoad)}(a)?a.canLoad(e,n):j(t,()=>a(e,n)))})).pipe(Ed(),o1())}(e,n,r).pipe(Dr(i=>i?this.configLoader.loadChildren(e,n).pipe(dr(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function k8(t){return Ry(e1(!1,3))}())):Ne({routes:[],injector:e})}}function Q8(t){const e=t.value.routeConfig;return e&&""===e.path}function a1(t){const e=[],n=new Set;for(const r of t){if(!Q8(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=a1(r.children);e.push(new vo(r.value,i))}return e.filter(r=>!n.has(r))}function u1(t){const e=t.children.map(n=>u1(n)).flat();return[t,...e]}function B0(t){return Xn(e=>{const n=t(e);return n?rn(n).pipe(we(()=>e)):Ne(e)})}let c1=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Xe);return r}getResolvedTitleForRoute(n){return n.data[mp]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:()=>se(iW),providedIn:"root"})}return t})(),iW=(()=>{class t extends c1{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(re(iO))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Td=new de("",{providedIn:"root",factory:()=>({})}),Cd=new de("ROUTES");let j0=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=se(Fx)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ne(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Fa(n.loadComponent()).pipe(we(l1),dr(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),_0(()=>{this.componentLoaders.delete(n)})),i=new TO(r,()=>new A).pipe(g0());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function oW(t,e,n,r){return Fa(t.loadChildren()).pipe(we(l1),Dr(i=>i instanceof JM||Array.isArray(i)?Ne(i):rn(e.compileModuleAsync(i))),we(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(Cd,[],{optional:!0,self:!0}).flat()),{routes:s.map(k0),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(_0(()=>{this.childrenLoaders.delete(r)})),s=new TO(o,()=>new A).pipe(g0());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function l1(t){return function sW(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let $0=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:()=>se(aW),providedIn:"root"})}return t})(),aW=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const d1=new de(""),h1=new de("");function uW(t,e,n){const r=t.get(h1),i=t.get(Hr);return t.get(mt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o;const s=new Promise(d=>{o=d}),a=i.startViewTransition(()=>(o(),function cW(t){return new Promise(e=>{IR(e,{injector:t})})}(t))),{onViewTransitionCreated:u}=r;return u&&j(t,()=>u({transition:a,from:e,to:n})),s})}let qy=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new A,this.transitionAbortSubject=new A,this.configLoader=se(j0),this.environmentInjector=se(ti),this.urlSerializer=se(md),this.rootContexts=se(wp),this.location=se(ad),this.inputBindingEnabled=null!==se(jy,{optional:!0}),this.titleStrategy=se(c1),this.options=se(Td,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=se($0),this.createViewTransition=se(d1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ne(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new ZG(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new WG(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ep,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yo(o=>0!==o.id),we(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Xn(o=>{this.currentTransition=o;let s=!1,a=!1;return Ne(o).pipe(dr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Xn(u=>{const d=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!d&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const g="";return this.events.next(new yd(u.id,this.urlSerializer.serialize(u.rawUrl),g,0)),u.resolve(null),Go}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Ne(u).pipe(Xn(g=>{const _=this.transitions?.getValue();return this.events.next(new Uy(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?Go:Promise.resolve(g)}),function X8(t,e,n,r,i,o){return Dr(s=>function G8(t,e,n,r,i,o,s="emptyOnly"){return new Z8(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(we(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),dr(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new zO(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:g,extractedUrl:_,source:y,restoredState:I,extras:C}=u,S=new Uy(g,this.urlSerializer.serialize(_),y,I);this.events.next(S);const N=ZO(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:N,urlAfterRedirects:_,extras:{...C,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=_,Ne(o)}{const g="";return this.events.next(new yd(u.id,this.urlSerializer.serialize(u.extractedUrl),g,1)),u.resolve(null),Go}}),dr(u=>{const d=new HG(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),we(u=>(this.currentTransition=o={...u,guards:f8(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function C8(t,e){return Dr(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Ne({...n,guardsResult:!0}):function D8(t,e,n,r){return rn(t).pipe(Dr(i=>function M8(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Ne(o.map(a=>{const u=Cp(e)??i,d=Id(a,u);return Fa(function E8(t){return t&&Ap(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):j(u,()=>d(t,e,n,r))).pipe(La())})).pipe(Ed()):Ne(!0)}(i.component,i.route,n,e,r)),La(i=>!0!==i,!0))}(s,r,i,t).pipe(Dr(a=>a&&function _8(t){return"boolean"==typeof t}(a)?function b8(t,e,n,r){return rn(e).pipe(gp(i=>p0(function S8(t,e){return null!==t&&e&&e(new KG(t)),Ne(!0)}(i.route.parent,r),function A8(t,e){return null!==t&&e&&e(new YG(t)),Ne(!0)}(i.route,r),function P8(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function p8(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>wO(()=>Ne(s.guards.map(u=>{const d=Cp(s.node)??n,f=Id(u,d);return Fa(function I8(t){return t&&Ap(t.canActivateChild)}(f)?f.canActivateChild(r,t):j(d,()=>f(r,t))).pipe(La())})).pipe(Ed())));return Ne(o).pipe(Ed())}(t,i.path,n),function R8(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ne(!0);const i=r.map(o=>wO(()=>{const s=Cp(e)??n,a=Id(o,s);return Fa(function v8(t){return t&&Ap(t.canActivate)}(a)?a.canActivate(e,t):j(s,()=>a(e,t))).pipe(La())}));return Ne(i).pipe(Ed())}(t,i.route,n))),La(i=>!0!==i,!0))}(r,o,t,e):Ne(a)),we(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),dr(u=>{if(o.guardsResult=u.guardsResult,ac(u.guardsResult))throw XO(0,u.guardsResult);const d=new zG(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),yo(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),B0(u=>{if(u.guards.canActivateChecks.length)return Ne(u).pipe(dr(d=>{const f=new qG(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Xn(d=>{let f=!1;return Ne(d).pipe(function eW(t,e){return Dr(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ne(n);const o=new Set(i.map(u=>u.route)),s=new Set;for(const u of o)if(!s.has(u))for(const d of u1(u))s.add(d);let a=0;return rn(s).pipe(gp(u=>o.has(u)?function tW(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!YO(i)&&(o[mp]=i.title),function nW(t,e,n,r){const i=y0(t);if(0===i.length)return Ne({});const o={};return rn(i).pipe(Dr(s=>function rW(t,e,n,r){const i=Cp(e)??r,o=Id(t,i);return Fa(o.resolve?o.resolve(e,n):j(i,()=>o(e,n)))}(t[s],e,n,r).pipe(La(),dr(a=>{o[s]=a}))),m0(1),function fG(t){return we(()=>t)}(o),fd(s=>i1(s)?Go:Ry(s)))}(o,t,e,r).pipe(we(s=>(t._resolvedData=s,t.data=S0(t,t.parent,n).resolve,null)))}(u,r,t,e):(u.data=S0(u,u.parent,t).resolve,Ne(void 0))),dr(()=>a++),m0(1),Dr(u=>a===s.size?Ne(n):Go))})}(this.paramsInheritanceStrategy,this.environmentInjector),dr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",2)}}))}),dr(d=>{const f=new GG(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),B0(u=>{const d=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(dr(_=>{f.component=_}),we(()=>{})));for(const _ of f.children)g.push(...d(_));return g};return f0(d(u.targetSnapshot.root)).pipe(My(null),hd(1))}),B0(()=>this.afterPreactivation()),Xn(()=>{const{currentSnapshot:u,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?rn(f).pipe(we(()=>o)):Ne(o)}),we(u=>{const d=function n8(t,e,n){const r=Tp(t,e._root,n?n._root:void 0);return new WO(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:d},this.currentNavigation.targetRouterState=d,o}),dr(()=>{this.events.next(new C0)}),((t,e,n,r)=>we(i=>(new h8(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),hd(1),dr({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ko(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function pG(t){return Ie((e,n)=>{Qi(t).subscribe(Ae(n,()=>n.complete(),Nr)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(dr(u=>{throw u}))),_0(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),fd(u=>{if(a=!0,t1(u))this.events.next(new _d(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function o8(t){return t1(t)&&ac(t.url)}(u)?this.events.next(new D0(u.url)):o.resolve(!1);else{this.events.next(new By(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(d){o.reject(d)}}return Go}))}))}cancelNavigationTransition(n,r,i){const o=new _d(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lW(t){return t!==Ep}let dW=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:()=>se(fW),providedIn:"root"})}return t})();class hW{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let fW=(()=>{class t extends hW{static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=uf(t)))(i||t)}})();static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),f1=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:()=>se(pW),providedIn:"root"})}return t})(),pW=(()=>{class t extends f1{constructor(){super(...arguments),this.location=se(ad),this.urlSerializer=se(md),this.options=se(Td,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=se($0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gd,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ZO(0,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Uy)this.stateMemento=this.createStateMemento();else if(n instanceof yd)this.rawUrlTree=r.initialUrl;else if(n instanceof zO){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof C0?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof _d&&(3===n.code||2===n.code)?this.restoreHistory(r):n instanceof By?this.restoreHistory(r,!0):n instanceof Ko&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&0===o&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=uf(t)))(i||t)}})();static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Sp=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Sp||{});function p1(t,e){t.events.pipe(yo(n=>n instanceof Ko||n instanceof _d||n instanceof By||n instanceof yd),we(n=>n instanceof Ko||n instanceof yd?Sp.COMPLETE:n instanceof _d&&(0===n.code||1===n.code)?Sp.REDIRECTING:Sp.FAILED),yo(n=>n!==Sp.REDIRECTING),hd(1)).subscribe(()=>{e()})}function gW(t){throw t}const mW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_W={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ai=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=se(Lx),this.stateManager=se(f1),this.options=se(Td,{optional:!0})||{},this.pendingTasks=se(_T),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=se(qy),this.urlSerializer=se(md),this.location=se(ad),this.urlHandlingStrategy=se($0),this._events=new A,this.errorHandler=this.options.errorHandler||gW,this.navigated=!1,this.routeReuseStrategy=se(dW),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=se(Cd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!se(jy,{optional:!0}),this.eventsSubscription=new Ct,this.isNgZoneEnabled=se(mt)instanceof mt&&mt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof _d&&0!==r.code&&1!==r.code)this.navigated=!0;else if(r instanceof Ko)this.navigated=!0;else if(r instanceof D0){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||lW(i.source)};this.scheduleNavigation(s,Ep,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function vW(t){return!(t instanceof C0||t instanceof D0)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ep,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(k0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:s;let g,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...o};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}null!==f&&(f=this.removeEmptyProps(f));try{g=FO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return VO(g,n,f,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=ac(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ep,null,r)}navigate(n,r={skipLocationChange:!1}){return function yW(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new H(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...mW}:!1===r?{..._W}:r,ac(n))return SO(this.currentUrlTree,n,i);const o=this.parseUrl(n);return SO(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,d;s?(a=s.resolve,u=s.reject,d=s.promise):d=new Promise((g,_)=>{a=g,u=_});const f=this.pendingTasks.add();return p1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rp=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new A,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof Ko&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function AS(t,e,n){return function pB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?HE:bS}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(Pe(Ai),Pe(uc),function Ia(t){return function XI(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Dh(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(It(),t)}("tabindex"),Pe(D_),Pe(Ma),Pe(ic))};static#t=this.\u0275dir=Sn({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ec("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&vw("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",kT],skipLocationChange:["skipLocationChange","skipLocationChange",kT],replaceUrl:["replaceUrl","replaceUrl",kT],routerLink:"routerLink"},standalone:!0,features:[PR,Er]})}return t})();class g1{}let wW=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(yo(n=>n instanceof Ko),gp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=oT(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return rn(i).pipe(dd())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Ne(null);const o=i.pipe(Dr(s=>null===s?Ne(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?rn([o,this.loader.loadComponent(r)]).pipe(dd()):o})}static#e=this.\u0275fac=function(r){return new(r||t)(re(Ai),re(Fx),re(ti),re(g1),re(j0))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const H0=new de("");let m1=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Uy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ko?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof yd&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof qO&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new qO(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function YS(){throw new Error("invalid")}()};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();function Yo(t,e){return{\u0275kind:t,\u0275providers:e}}function y1(){const t=se(lr);return e=>{const n=t.get(id);if(e!==n.components[0])return;const r=t.get(Ai),i=t.get(v1);1===t.get(z0)&&r.initialNavigation(),t.get(I1,null,rt.Optional)?.setUpPreloading(),t.get(H0,null,rt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const v1=new de("",{factory:()=>new A}),z0=new de("",{providedIn:"root",factory:()=>1}),I1=new de("");function bW(t){return Yo(0,[{provide:I1,useExisting:wW},{provide:g1,useExisting:t}])}function SW(t){return Yo(9,[{provide:d1,useValue:uW},{provide:h1,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const E1=new de("ROUTER_FORROOT_GUARD"),RW=[ad,{provide:md,useClass:v0},Ai,wp,{provide:uc,useFactory:function _1(t){return t.routerState.root},deps:[Ai]},j0,[]];let w1=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[RW,[],{provide:Cd,multi:!0,useValue:n},{provide:E1,useFactory:NW,deps:[[Ai,new Fu,new Fo]]},{provide:Td,useValue:r||{}},r?.useHash?{provide:ic,useClass:dq}:{provide:ic,useClass:DN},{provide:H0,useFactory:()=>{const t=se(x5),e=se(mt),n=se(Td),r=se(qy),i=se(md);return n.scrollOffset&&t.setOffset(n.scrollOffset),new m1(i,r,t,e,n)}},r?.preloadingStrategy?bW(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?OW(r):[],r?.bindToComponentInputs?Yo(8,[JO,{provide:jy,useExisting:JO}]).\u0275providers:[],r?.enableViewTransitions?SW().\u0275providers:[],[{provide:T1,useFactory:y1},{provide:CT,multi:!0,useExisting:T1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Cd,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(re(E1,8))};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=Li({})}return t})();function NW(t){return"guarded"}function OW(t){return["disabled"===t.initialNavigation?Yo(3,[{provide:wT,multi:!0,useFactory:()=>{const e=se(Ai);return()=>{e.setUpLocationChangeListener()}}},{provide:z0,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Yo(2,[{provide:z0,useValue:0},{provide:wT,multi:!0,deps:[lr],useFactory:e=>{const n=e.get(cq,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Ai),o=e.get(v1);p1(i,()=>{r(!0)}),e.get(qy).afterPreactivation=()=>(r(!0),o.closed?Ne(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const T1=new de("");let C1=(()=>{class t{constructor(){this.title="app"}ngAfterViewInit(){$(function(){$('[data-toggle="popover"]').popover()})}openLink(n){window.open(n,"_blank")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-home"]],decls:49,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["id","picture"],[1,"about-section","mt-5"],[1,"container"],[1,"row","img-wrap","mb-5","mb-lg-0"],[1,"col-12"],[1,"row"],[1,"mb-4","margin-lg-0","col-lg-6","order-lg-2"],[1,"effect"],["src","assets/lineesiciliane.png","alt","Mappa linee ferroviarie siciliane di RFI",1,"img-fluid"],[1,"col-lg-5","mr-auto","text-lg-right","align-self-center","order-lg-1"],[1,"mb-4"],["id","popover","data-bs-container","body","data-toggle","popover","data-bs-placement","bottom","data-bs-content","Non sono attualmente previsti i posti di movimento, solo STAZIONI e FERMATE. Non sono considerate le linee dismesse. Sono considerate le linee non attive IN FASE DI RIPRISTINO",1,"btn"],["href","https://normativaesercizio.rfi.it/NormativaEsercizio/detail.xhtml?doctype=FCL&compartimento=PA","target","_blank",1,"btn","btn-about"],[1,"material-symbols-outlined"],[1,"mb-4","margin-lg-0","col-lg-6"],["src","https://www.palermomania.it/public/news/image/images/metro.jpg","alt","Cartello passante ferroviario di Palermo",1,"img-fluid"],[1,"col-lg-5","ml-auto","align-self-center","order-lg-1"],["href","https://www.palermomania.it/","target","_blank",1,"btn","btn-about"],["src","https://www.stagniweb.it/altro/orizzf/636gioi0.jpg","alt","Locomotiva E636.010 in transito a Gioiosa Marea(ME)",1,"img-fluid"],["href","https://www.stagniweb.it/foto6.asp?File=orizzf&Inizio=68&Righe=10&InizioI=1&RigheI=150&Col=5&Titolo=0","target","_blank",1,"btn","btn-about"]],template:function(r,i){1&r&&(nn(0,"link",0)(1,"div",1),le(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"a",8),nn(9,"img",9),fe()(),le(10,"div",10)(11,"h2"),Ce(12,"Benvenuto su SpotiRFI! \u{1f684}\u{1f3b5}"),fe(),le(13,"p",11),Ce(14," SpotiRFI \xe8 un viaggio unico attraverso la musica e le linee ferroviarie della Sicilia. Ogni stazione ferroviaria sulla mappa \xe8 associata a una canzone che porta il suo nome"),le(15,"span",12),Ce(16," * "),fe(),Ce(17,", creando un'esperienza musicale che riflette il viaggio attraverso la nostra bellissima regione. "),fe(),le(18,"a",13)(19,"span",14),Ce(20," open_in_new "),fe()()()()()(),le(21,"div",4)(22,"div",5)(23,"div",6)(24,"div",15)(25,"a",8),nn(26,"img",16),fe()(),le(27,"div",17)(28,"h2"),Ce(29,"Come funziona? \u{1f9d0}"),fe(),le(30,"p",11),Ce(31," Scegli una linea ferroviaria sulla mappa e inizia il tuo viaggio musicale. Ad ogni fermata, ti verr\xe0 presentata una canzone che porta il nome della stazione. Puoi ascoltare la canzone mentre leggi informazioni sulla stazione e sulla sua storia. "),fe(),le(32,"a",18)(33,"span",14),Ce(34," open_in_new "),fe()()()()()(),le(35,"div",4)(36,"div",5)(37,"div",6)(38,"div",7)(39,"a",8),nn(40,"img",19),fe()(),le(41,"div",10)(42,"h2"),Ce(43,"Perch\xe9 SpotiRFI? \u{1f914}"),fe(),le(44,"p",11),Ce(45," La musica e i viaggi sono due esperienze che possono portarci in luoghi che non abbiamo mai visitato. SpotiRFI combina queste due esperienze in un unico viaggio, permettendoti di esplorare la Sicilia attraverso le sue linee ferroviarie e la sua musica. "),fe(),le(46,"a",20)(47,"span",14),Ce(48," open_in_new "),fe()()()()()()()())},styles:['#popover[_ngcontent-%COMP%]{background-color:transparent;border:none;color:inherit;padding:0 0 0 5px}.about-section[_ngcontent-%COMP%]{margin:auto}#picture[_ngcontent-%COMP%]{background-image:url(https://external-preview.redd.it/in-sicilia-su-strade-colabrodo-e-treni-lumaca-aspettando-il-v0-YGYToK560tbwieHeMTYEEwdI9G0MiCoAnOe-kdmPdrU.jpg?auto=webp&s=0d0a9a6e7891b6fe511766e49a45ffb84cf2124f);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}.img-wrap[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{position:relative;margin-bottom:0;display:block}.img-wrap[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]:after{z-index:-1;content:"";position:absolute;inset:10px;background:#2b3035;transition:.3s all ease-in-out}.img-wrap[_ngcontent-%COMP%]:hover   .effect[_ngcontent-%COMP%]:after{right:-10px;bottom:-10px;position:absolute}.btn-about[_ngcontent-%COMP%]{color:#000!important;margin-right:5px;margin-left:5px;animation:skew 3s infinite;animation-direction:normal;animation-direction:alternate;padding:5px 17px}.row[_ngcontent-%COMP%]{color:#000;margin-bottom:4em}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}']})}return t})();var Dd=ze(534);(0,Dd.registerVersion)("firebase","10.7.0","app");class VW extends Ct{constructor(e,n){super()}schedule(e,n=0){return this}}const Gy={setInterval(t,e,...n){const{delegate:r}=Gy;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Gy;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class D1 extends VW{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Gy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Gy.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,An(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const q0={now:()=>(q0.delegate||Date).now(),delegate:void 0};class Pp{constructor(e,n=Pp.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Pp.now=q0.now;class b1 extends Pp{constructor(e,n=Pp.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const jW=new class BW extends b1{}(class UW extends D1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),A1=new b1(D1),G0=new sp("ANGULARFIRE2_VERSION");class S1{constructor(){return((t,e)=>{const n=(0,Dd.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(HW)}}const HW="app-check";function bd(){}class R1{zone;delegate;constructor(e,n=jW){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class zW{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bd,{},bd,bd)),n.pipe(dr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let P1=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new R1(Zone.current)),this.insideAngular=n.run(()=>new R1(Zone.current,A1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(re(mt))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Si(t){return function GW(t){return function(n){return(n=n.lift(new zW(t.ngZone))).pipe(ld(t.outsideAngular),oc(t.insideAngular))}}(function Ad(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var Va=ze(106);Va.Z.registerVersion("firebase","10.7.0","app-compat");const QW=["ngOnDestroy"];class M1{constructor(e){return e}}const Wy=new de("angularfire2.app.options"),Zy=new de("angularfire2.app.name");function W0(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=Va.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Va.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;XW("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new M1(s)}const XW=(t,...e)=>{},e7={provide:M1,useFactory:W0,deps:[Wy,mt,[new Fu,Zy]]};let t7=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Wy,useValue:n},{provide:Zy,useValue:r}]}}constructor(n){Va.Z.registerVersion("angularfire",G0.full,"core"),Va.Z.registerVersion("angularfire",G0.full,"app-compat"),Va.Z.registerVersion("angular",H3.full,n.toString())}static \u0275fac=function(r){return new(r||t)(re(bs))};static \u0275mod=gi({type:t});static \u0275inj=Li({providers:[e7]})}return t})();function x1(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function n7(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(N1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${r7?" You may need to reload as Firebase is not HMR aware.":""}`),N1("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const r7=typeof module<"u"&&!!module.hot,N1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],ze(377);class o7 extends A{constructor(e=1/0,n=1/0,r=q0){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function Z0(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Zn({next:()=>{r.unsubscribe(),t()}});return Qi(e(...n)).subscribe(r)}function O1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,function s7(t={}){const{connector:e=(()=>new A),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,d=0,f=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),s=u=void 0,f=g=!1},I=()=>{const C=s;y(),C?.unsubscribe()};return Ie((C,S)=>{d++,!g&&!f&&_();const N=u=u??e();S.add(()=>{d--,0===d&&!g&&!f&&(a=Z0(I,i))}),N.subscribe(S),!s&&d>0&&(s=new Zn({next:R=>N.next(R),error:R=>{g=!0,_(),a=Z0(y,n,R),N.error(R)},complete:()=>{f=!0,_(),a=Z0(y,r),N.complete()}}),Qi(C).subscribe(s))})(o)}}({connector:()=>new o7(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function k1(t,e){return ke(e)?Xn(()=>t,e):Xn(()=>t)}const L1=new de("angularfire2.auth.use-emulator"),F1=new de("angularfire2.auth.settings"),V1=new de("angularfire2.auth.tenant-id"),U1=new de("angularfire2.auth.langugage-code"),B1=new de("angularfire2.auth.use-device-language"),j1=new de("angularfire.auth.persistence"),$1=(t,e,n,r,i,o,s,a)=>x1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[d,f]of Object.entries(s))u.settings[d]=f;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]);let H1=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,d,f,g,_,y){const I=new A,C=Ne(void 0).pipe(oc(s.outsideAngular),Xn(()=>o.runOutsideAngular(()=>Promise.resolve().then(ze.bind(ze,377)))),we(()=>W0(n,o,r)),we(S=>$1(S,o,a,d,f,g,u,_)),O1({bufferSize:1,refCount:!1}));if(Dy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ne(null);else{C.pipe(La()).subscribe();const S=C.pipe(Xn(U=>U.getRedirectResult().then(ne=>ne,()=>null)),Si,O1({bufferSize:1,refCount:!1})),N=C.pipe(Xn(U=>new qt(ne=>({unsubscribe:o.runOutsideAngular(()=>U.onAuthStateChanged(oe=>ne.next(oe),oe=>ne.error(oe),()=>ne.complete()))})))),R=C.pipe(Xn(U=>new qt(ne=>({unsubscribe:o.runOutsideAngular(()=>U.onIdTokenChanged(oe=>ne.next(oe),oe=>ne.error(oe),()=>ne.complete()))}))));this.authState=S.pipe(k1(N),ld(s.outsideAngular),oc(s.insideAngular)),this.user=S.pipe(k1(R),ld(s.outsideAngular),oc(s.insideAngular)),this.idToken=this.user.pipe(Xn(U=>U?rn(U.getIdToken()):Ne(null))),this.idTokenResult=this.user.pipe(Xn(U=>U?rn(U.getIdTokenResult()):Ne(null))),this.credential=function i7(...t){const e=pp(t),n=function K6(t,e){return"number"==typeof h0(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Qi(r[0]):dd(n)(rn(r,e)):Go}(S,I,this.authState.pipe(yo(U=>!U))).pipe(we(U=>U?.user?U:null),ld(s.outsideAngular),oc(s.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(QW.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,d)=>s.then(f=>{const g=f?.(...d);return r?.spy?.apply&&r.spy.apply(o,d,g),g})})})}))(this,C,o,{spy:{apply:(S,N,R)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&R.then(U=>I.next(U))}}})}static \u0275fac=function(r){return new(r||t)(re(Wy),re(Zy,8),re(bs),re(mt),re(P1),re(L1,8),re(F1,8),re(V1,8),re(U1,8),re(B1,8),re(j1,8),re(S1,8))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function K0(){return Ie((t,e)=>{let n,r=!1;t.subscribe(Ae(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}function c7(t,e){return t===e}var he,W=ze(861),z1=ze(537),Jo=ze(879),kt=ze(58),l7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Io={},Q0=Q0||{},Ge=l7||self;function Ky(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Mp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Y0="closure_uid_"+(1e9*Math.random()>>>0),h7=0;function f7(t,e,n){return t.call.apply(t.bind,arguments)}function p7(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function br(t,e,n){return(br=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f7:p7).apply(null,arguments)}function Qy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function er(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Ua(){this.s=this.s,this.o=this.o}Ua.prototype.s=!1,Ua.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function d7(t){Object.prototype.hasOwnProperty.call(t,Y0)&&t[Y0]||(t[Y0]=++h7)}(this)},Ua.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const q1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function J0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function G1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ky(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Ar(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ar.prototype.h=function(){this.defaultPrevented=!0};var m7=function(){if(!Ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Ge.addEventListener("test",n,e),Ge.removeEventListener("test",n,e)}catch{}return t}();function xp(t){return/^[\s\xa0]*$/.test(t)}function Yy(){var t=Ge.navigator;return t&&(t=t.userAgent)?t:""}function Xo(t){return-1!=Yy().indexOf(t)}function X0(t){return X0[" "](t),t}X0[" "]=function(){};var tC,t,y7=Xo("Opera"),Sd=Xo("Trident")||Xo("MSIE"),W1=Xo("Edge"),eC=W1||Sd,Z1=Xo("Gecko")&&!(-1!=Yy().toLowerCase().indexOf("webkit")&&!Xo("Edge"))&&!(Xo("Trident")||Xo("MSIE"))&&!Xo("Edge"),v7=-1!=Yy().toLowerCase().indexOf("webkit")&&!Xo("Edge");function K1(){var t=Ge.document;return t?t.documentMode:void 0}e:{var nC="",rC=(t=Yy(),Z1?/rv:([^\);]+)(\)|;)/.exec(t):W1?/Edge\/([\d\.]+)/.exec(t):Sd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):v7?/WebKit\/(\S+)/.exec(t):y7?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(rC&&(nC=rC?rC[1]:""),Sd){var iC=K1();if(null!=iC&&iC>parseFloat(nC)){tC=String(iC);break e}}tC=nC}var I7=Ge.document&&Sd&&(K1()||parseInt(tC,10))||void 0;function Np(t,e){if(Ar.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Z1){e:{try{X0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:E7[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Np.$.h.call(this)}}er(Np,Ar);var E7={2:"touch",3:"pen",4:"mouse"};Np.prototype.h=function(){Np.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Op="closure_listenable_"+(1e6*Math.random()|0),w7=0;function T7(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++w7,this.fa=this.ia=!1}function Jy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function sC(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Y1(t){const e={};for(const n in t)e[n]=t[n];return e}const J1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X1(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<J1.length;o++)n=J1[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Xy(t){this.src=t,this.g={},this.h=0}function aC(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=q1(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Jy(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function uC(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}Xy.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=uC(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new T7(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var cC="closure_lm_"+(1e6*Math.random()|0),lC={};function ek(t,e,n,r,i){if(r&&r.once)return nk(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ek(t,e[o],n,r,i);return null}return n=pC(n),t&&t[Op]?t.O(e,n,Mp(r)?!!r.capture:!!r,i):tk(t,e,n,!1,r,i)}function tk(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Mp(i)?!!i.capture:!!i,a=hC(t);if(a||(t[cC]=a=new Xy(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function D7(){const e=b7;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)m7||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ik(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function nk(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)nk(t,e[o],n,r,i);return null}return n=pC(n),t&&t[Op]?t.P(e,n,Mp(r)?!!r.capture:!!r,i):tk(t,e,n,!0,r,i)}function rk(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rk(t,e[o],n,r,i);else r=Mp(r)?!!r.capture:!!r,n=pC(n),t&&t[Op]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=uC(o=t.g[e],n,r,i))&&(Jy(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=hC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=uC(e,n,r,i)),(n=-1<t?e[t]:null)&&dC(n))}function dC(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Op])aC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ik(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hC(e))?(aC(n,t),0==n.h&&(n.src=null,e[cC]=null)):Jy(t)}}}function ik(t){return t in lC?lC[t]:lC[t]="on"+t}function b7(t,e){if(t.fa)t=!0;else{e=new Np(e,this);var n=t.listener,r=t.la||t.src;t.ia&&dC(t),t=n.call(r,e)}return t}function hC(t){return(t=t[cC])instanceof Xy?t:null}var fC="__closure_events_fn_"+(1e9*Math.random()>>>0);function pC(t){return"function"==typeof t?t:(t[fC]||(t[fC]=function(e){return t.handleEvent(e)}),t[fC])}function tr(){Ua.call(this),this.i=new Xy(this),this.S=this,this.J=null}function hr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Ar(e,t);else if(e instanceof Ar)e.target=e.target||t;else{var i=e;X1(e=new Ar(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=ev(s,r,!0,e)&&i}if(i=ev(s=e.g=t,r,!0,e)&&i,i=ev(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ev(s=e.g=n[o],r,!1,e)&&i}function ev(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&aC(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}er(tr,Ua),tr.prototype[Op]=!0,tr.prototype.removeEventListener=function(t,e,n,r){rk(this,t,e,n,r)},tr.prototype.N=function(){if(tr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Jy(n[r]);delete t.g[e],t.h--}}this.J=null},tr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},tr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var gC=Ge.JSON.stringify;function S7(){var t=mC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ok=new class A7{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new P7,t=>t.reset());class P7{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function M7(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function x7(t){Ge.setTimeout(()=>{throw t},0)}let kp,Lp=!1,mC=new class R7{constructor(){this.h=this.g=null}add(e,n){const r=ok.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},sk=()=>{const t=Ge.Promise.resolve(void 0);kp=()=>{t.then(N7)}};var N7=()=>{for(var t;t=S7();){try{t.h.call(t.g)}catch(n){x7(n)}var e=ok;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Lp=!1};function tv(t,e){tr.call(this),this.h=t||1,this.g=e||Ge,this.j=br(this.qb,this),this.l=Date.now()}function _C(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function yC(t,e,n){if("function"==typeof t)n&&(t=br(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=br(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ge.setTimeout(t,e||0)}function ak(t){t.g=yC(()=>{t.g=null,t.i&&(t.i=!1,ak(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}er(tv,tr),(he=tv.prototype).ga=!1,he.T=null,he.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hr(this,"tick"),this.ga&&(_C(this),this.start()))}},he.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},he.N=function(){tv.$.N.call(this),_C(this),delete this.g};class O7 extends Ua{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ak(this)}N(){super.N(),this.g&&(Ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fp(t){Ua.call(this),this.h=t,this.g={}}er(Fp,Ua);var uk=[];function ck(t,e,n,r){Array.isArray(n)||(n&&(uk[0]=n.toString()),n=uk);for(var i=0;i<n.length;i++){var o=ek(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function lk(t){sC(t.g,function(e,n){this.g.hasOwnProperty(n)&&dC(e)},t),t.g={}}function nv(){this.g=!0}function Rd(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function V7(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return gC(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Fp.prototype.N=function(){Fp.$.N.call(this),lk(this)},Fp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nv.prototype.Ea=function(){this.g=!1},nv.prototype.info=function(){};var lc={},dk=null;function rv(){return dk=dk||new tr}function hk(t){Ar.call(this,lc.Ta,t)}function Vp(t){const e=rv();hr(e,new hk(e))}function fk(t,e){Ar.call(this,lc.STAT_EVENT,t),this.stat=e}function qr(t){const e=rv();hr(e,new fk(e,t))}function pk(t,e){Ar.call(this,lc.Ua,t),this.size=e}function Up(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ge.setTimeout(function(){t()},e)}lc.Ta="serverreachability",er(hk,Ar),lc.STAT_EVENT="statevent",er(fk,Ar),lc.Ua="timingevent",er(pk,Ar);var iv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function vC(){}function _k(){}vC.prototype.h=null;var wC,Bp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function IC(){Ar.call(this,"d")}function EC(){Ar.call(this,"c")}function ov(){}function jp(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Fp(this),this.P=U7,this.V=new tv(t=eC?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new yk}function yk(){this.i=null,this.g="",this.h=!1}er(IC,Ar),er(EC,Ar),er(ov,vC),ov.prototype.g=function(){return new XMLHttpRequest},ov.prototype.i=function(){return{}},wC=new ov;var U7=45e3,vk={},TC={};function CC(t,e,n){t.L=1,t.A=cv(Fs(e)),t.u=n,t.S=!0,Ik(t,null)}function Ik(t,e){t.G=Date.now(),$p(t),t.B=Fs(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Pk(n.i,"t",r),t.o=0,n=t.l.J,t.h=new yk,t.g=eL(t.l,n?e:null,!t.u),0<t.O&&(t.M=new O7(br(t.Pa,t,t.g),t.O)),ck(t.U,t.g,"readystatechange",t.nb),e=t.I?Y1(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Vp(),function k7(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var f=d[0];d=d[1];var g=f.split("_");s=2<=g.length&&"type"==g[1]?s+(f+"=")+d+"&":s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function Ek(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function wk(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=B7(t,n),i==TC){4==e&&(t.s=4,qr(14),r=!1),Rd(t.j,t.m,null,"[Incomplete Response]");break}if(i==vk){t.s=4,qr(15),Rd(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Rd(t.j,t.m,i,null),DC(t,i)}Ek(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,qr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),xC(e),e.M=!0,qr(11))):(Rd(t.j,t.m,n,"[Invalid Chunked Response]"),dc(t),Hp(t))}function B7(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?TC:(n=Number(e.substring(n,r)),isNaN(n)?vk:(r+=1)+n>e.length?TC:(e=e.slice(r,r+n),t.o=r+n,e))}function $p(t){t.Y=Date.now()+t.P,Tk(t,t.P)}function Tk(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Up(br(t.lb,t),e)}function sv(t){t.C&&(Ge.clearTimeout(t.C),t.C=null)}function Hp(t){0==t.l.H||t.J||Qk(t.l,t)}function dc(t){sv(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,_C(t.V),lk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function DC(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||bC(n.i,t)))if(!t.K&&bC(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;gv(n),fv(n)}MC(n),qr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Up(br(n.ib,n),6e3));if(1>=Nk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else fc(n,11)}else if((t.K||n.g==t)&&gv(n),!xp(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const f=d[3];null!=f&&(n.ra=f,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const I=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I){var o=r.i;o.g||-1==I.indexOf("spdy")&&-1==I.indexOf("quic")&&-1==I.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(AC(o,o.h),o.h=null))}if(r.F){const C=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.Da=C,Zt(r.I,r.F,C))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=Xk(r,r.J?r.pa:null,r.Y),s.K){Ok(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(sv(a),$p(a)),r.g=s}else Zk(r);0<n.j.length&&pv(n)}else"stop"!=d[0]&&"close"!=d[0]||fc(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?fc(n,7):PC(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}Vp()}catch{}}function Ck(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ky(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function $7(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ky(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function j7(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Ky(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(he=jp.prototype).setTimeout=function(t){this.P=t},he.nb=function(t){t=t.target;const e=this.M;e&&3==es(t)?e.l():this.Pa(t)},he.Pa=function(t){try{if(t==this.g)e:{const f=es(this.g);var e=this.g.Ia();if(this.g.da(),!(3>f)&&(3!=f||eC||this.g&&(this.h.h||this.g.ja()||$k(this.g)))){this.J||4!=f||7==e||Vp(),sv(this);var n=this.g.da();this.ca=n;t:if(Ek(this)){var r=$k(this.g);t="";var i=r.length,o=4==es(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){dc(this),Hp(this);var s="";break t}this.h.i=new Ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function L7(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,f,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xp(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.s=3,qr(12),dc(this),Hp(this);break e}Rd(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,DC(this,n)}this.S?(wk(this,f,s),eC&&this.i&&3==f&&(ck(this.U,this.V,"tick",this.mb),this.V.start())):(Rd(this.j,this.m,s,null),DC(this,s)),4==f&&dc(this),this.i&&!this.J&&(4==f?Qk(this.l,this):(this.i=!1,$p(this)))}else(function sZ(t){const e={};t=(t.g&&2<=es(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(xp(t[r]))continue;var n=M7(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function C7(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,qr(12)):(this.s=0,qr(13)),dc(this),Hp(this)}}}catch{}},he.mb=function(){if(this.g){var t=es(this.g),e=this.g.ja();this.o<e.length&&(sv(this),wk(this,t,e),this.i&&4!=t&&$p(this))}},he.cancel=function(){this.J=!0,dc(this)},he.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function F7(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Vp(),qr(17)),dc(this),this.s=2,Hp(this)):Tk(this,this.Y-t)};var Dk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hc(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof hc){this.h=t.h,av(this,t.j),this.s=t.s,this.g=t.g,uv(this,t.m),this.l=t.l;var e=t.i,n=new Gp;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),bk(this,n),this.o=t.o}else t&&(e=String(t).match(Dk))?(this.h=!1,av(this,e[1]||"",!0),this.s=zp(e[2]||""),this.g=zp(e[3]||"",!0),uv(this,e[4]),this.l=zp(e[5]||"",!0),bk(this,e[6]||"",!0),this.o=zp(e[7]||"")):(this.h=!1,this.i=new Gp(null,this.h))}function Fs(t){return new hc(t)}function av(t,e,n){t.j=n?zp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function uv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function bk(t,e,n){e instanceof Gp?(t.i=e,function K7(t,e){e&&!t.j&&(Ba(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Sk(this,r),Pk(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=qp(e,W7)),t.i=new Gp(e,t.h))}function Zt(t,e,n){t.i.set(e,n)}function cv(t){return Zt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function zp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,z7),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function z7(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}hc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qp(e,Ak,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qp(e,Ak,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(qp(n,"/"==n.charAt(0)?G7:q7,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qp(n,Z7)),t.join("")};var Ak=/[#\/\?@]/g,q7=/[#\?:]/g,G7=/[#\?]/g,W7=/[#\?@]/g,Z7=/#/g;function Gp(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ba(t){t.g||(t.g=new Map,t.h=0,t.i&&function H7(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Sk(t,e){Ba(t),e=Pd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Rk(t,e){return Ba(t),e=Pd(t,e),t.g.has(e)}function Pk(t,e,n){Sk(t,e),0<n.length&&(t.i=null,t.g.set(Pd(t,e),J0(n)),t.h+=n.length)}function Pd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(he=Gp.prototype).add=function(t,e){Ba(this),this.i=null,t=Pd(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},he.forEach=function(t,e){Ba(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},he.ta=function(){Ba(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},he.Z=function(t){Ba(this);let e=[];if("string"==typeof t)Rk(this,t)&&(e=e.concat(this.g.get(Pd(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},he.set=function(t,e){return Ba(this),this.i=null,Rk(this,t=Pd(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},he.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},he.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var Q7=class{constructor(t,e){this.g=t,this.map=e}};function Mk(t){this.l=t||Y7,t=Ge.PerformanceNavigationTiming?0<(t=Ge.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ge.g&&Ge.g.Ka&&Ge.g.Ka()&&Ge.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Y7=10;function xk(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Nk(t){return t.h?1:t.g?t.g.size:0}function bC(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function AC(t,e){t.g?t.g.add(e):t.h=e}function Ok(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function kk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return J0(t.i)}Mk.prototype.cancel=function(){if(this.i=kk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var J7=class{stringify(t){return Ge.JSON.stringify(t,void 0)}parse(t){return Ge.JSON.parse(t,void 0)}};function X7(){this.g=new J7}function eZ(t,e,n){const r=n||"";try{Ck(t,function(i,o){let s=i;Mp(i)&&(s=gC(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function lv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Wp(t){this.l=t.ec||null,this.j=t.ob||!1}function dv(t,e){tr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=SC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}er(Wp,vC),Wp.prototype.g=function(){return new dv(this.l,this.j)},Wp.prototype.i=function(t){return function(){return t}}({}),er(dv,tr);var SC=0;function Lk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Zp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Kp(t)}function Kp(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(he=dv.prototype).open=function(t,e){if(this.readyState!=SC)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Kp(this)},he.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},he.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zp(this)),this.readyState=SC},he.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Kp(this)),this.g&&(this.readyState=3,Kp(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Lk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},he.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Zp(this):Kp(this),3==this.readyState&&Lk(this)}},he.Za=function(t){this.g&&(this.response=this.responseText=t,Zp(this))},he.Ya=function(t){this.g&&(this.response=t,Zp(this))},he.ka=function(){this.g&&Zp(this)},he.setRequestHeader=function(t,e){this.v.append(t,e)},he.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},he.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(dv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var nZ=Ge.JSON.parse;function pn(t){tr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Fk,this.L=this.M=!1}er(pn,tr);var Fk="",rZ=/^https?$/i,iZ=["POST","PUT"];function Vk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Uk(t),hv(t)}function Uk(t){t.F||(t.F=!0,hr(t,"complete"),hr(t,"error"))}function Bk(t){if(t.h&&typeof Q0<"u"&&(!t.C[1]||4!=es(t)||2!=t.da()))if(t.v&&4==es(t))yC(t.La,0,t);else if(hr(t,"readystatechange"),4==es(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(Dk)[1]||null;!i&&Ge.self&&Ge.self.location&&(i=Ge.self.location.protocol.slice(0,-1)),r=!rZ.test(i?i.toLowerCase():"")}n=r}if(n)hr(t,"complete"),hr(t,"success");else{t.m=6;try{var o=2<es(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",Uk(t)}}finally{hv(t)}}}function hv(t,e){if(t.g){jk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||hr(t,"ready");try{n.onreadystatechange=r}catch{}}}function jk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ge.clearTimeout(t.A),t.A=null)}function es(t){return t.g?t.g.readyState:0}function $k(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Fk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Hk(t){let e="";return sC(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function RC(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Hk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Zt(t,e,n))}function Qp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zk(t){this.Ga=0,this.j=[],this.l=new nv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Qp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Qp("baseRetryDelayMs",5e3,t),this.hb=Qp("retryDelaySeedMs",1e4,t),this.eb=Qp("forwardChannelMaxRetries",2,t),this.xa=Qp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Mk(t&&t.concurrentRequestLimit),this.Ja=new X7,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function PC(t){if(qk(t),3==t.H){var e=t.W++,n=Fs(t.I);if(Zt(n,"SID",t.K),Zt(n,"RID",e),Zt(n,"TYPE","terminate"),Yp(t,n),(e=new jp(t,t.l,e)).L=2,e.A=cv(Fs(n)),n=!1,Ge.navigator&&Ge.navigator.sendBeacon)try{n=Ge.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Ge.Image&&((new Image).src=e.A,n=!0),n||(e.g=eL(e.l,null),e.g.ha(e.A)),e.G=Date.now(),$p(e)}Jk(t)}function fv(t){t.g&&(xC(t),t.g.cancel(),t.g=null)}function qk(t){fv(t),t.u&&(Ge.clearTimeout(t.u),t.u=null),gv(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ge.clearTimeout(t.m),t.m=null)}function pv(t){if(!xk(t.i)&&!t.m){t.m=!0;var e=t.Na;kp||sk(),Lp||(kp(),Lp=!0),mC.add(e,t),t.C=0}}function Gk(t,e){var n;n=e?e.m:t.W++;const r=Fs(t.I);Zt(r,"SID",t.K),Zt(r,"RID",n),Zt(r,"AID",t.V),Yp(t,r),t.o&&t.s&&RC(r,t.o,t.s),n=new jp(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Wk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),AC(t.i,n),CC(n,r,e)}function Yp(t,e){t.na&&sC(t.na,function(n,r){Zt(e,r,n)}),t.h&&Ck({},function(n,r){Zt(e,r,n)})}function Wk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?br(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const f=i[u].map;if(d-=o,0>d)o=Math.max(0,i[u].g-100),a=!1;else try{eZ(f,s,"req"+d+"_")}catch{r&&r(f)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Zk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;kp||sk(),Lp||(kp(),Lp=!0),mC.add(e,t),t.A=0}}function MC(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Up(br(t.Ma,t),Yk(t,t.A)),t.A++,0))}function xC(t){null!=t.B&&(Ge.clearTimeout(t.B),t.B=null)}function Kk(t){t.g=new jp(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Fs(t.wa);Zt(e,"RID","rpc"),Zt(e,"SID",t.K),Zt(e,"AID",t.V),Zt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Zt(e,"TO",t.qa),Zt(e,"TYPE","xmlhttp"),Yp(t,e),t.o&&t.s&&RC(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=cv(Fs(e)),n.u=null,n.S=!0,Ik(n,t)}function gv(t){null!=t.v&&(Ge.clearTimeout(t.v),t.v=null)}function Qk(t,e){var n=null;if(t.g==e){gv(t),xC(t),t.g=null;var r=2}else{if(!bC(t.i,e))return;n=e.F,Ok(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;hr(r=rv(),new pk(r,n)),pv(t)}else Zk(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function aZ(t,e){return!(Nk(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Up(br(t.Na,t,e),Yk(t,t.C)),t.C++,0)))}(t,e)||2==r&&MC(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:fc(t,5);break;case 4:fc(t,10);break;case 3:fc(t,6);break;default:fc(t,2)}}function Yk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function fc(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=br(t.pb,t);n||(n=new hc("//www.google.com/images/cleardot.gif"),Ge.location&&"http"==Ge.location.protocol||av(n,"https"),cv(n)),function tZ(t,e){const n=new nv;if(Ge.Image){const r=new Image;r.onload=Qy(lv,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Qy(lv,n,r,"TestLoadImage: error",!1,e),r.onabort=Qy(lv,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qy(lv,n,r,"TestLoadImage: timeout",!1,e),Ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else qr(2);t.H=0,t.h&&t.h.za(e),Jk(t),qk(t)}function Jk(t){if(t.H=0,t.ma=[],t.h){const e=kk(t.i);(0!=e.length||0!=t.j.length)&&(G1(t.ma,e),G1(t.ma,t.j),t.i.i.length=0,J0(t.j),t.j.length=0),t.h.ya()}}function Xk(t,e,n){var r=n instanceof hc?Fs(n):new hc(n);if(""!=r.g)e&&(r.g=e+"."+r.g),uv(r,r.m);else{var i=Ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new hc(null);r&&av(o,r),e&&(o.g=e),i&&uv(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&Zt(r,n,e),Zt(r,"VER",t.ra),Yp(t,r),r}function eL(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pn(t.Ha&&!t.va?new Wp({ob:n}):t.va)).Oa(t.J),e}function tL(){}function mv(){if(Sd&&!(10<=Number(I7)))throw Error("Environmental error: no available transport.")}function Ri(t,e){tr.call(this),this.g=new zk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!xp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xp(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Md(this)}function nL(t){IC.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function rL(){EC.call(this),this.status=1}function Md(t){this.g=t}function Eo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function NC(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function bt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(he=pn.prototype).Oa=function(t){this.M=t},he.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wC.g(),this.C=function mk(t){return t.h||(t.h=t.i())}(this.u?this.u:wC),this.g.onreadystatechange=br(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void Vk(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=Ge.FormData&&t instanceof Ge.FormData,!(0<=q1(iZ,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jk(this),0<this.B&&((this.L=function oZ(t){return Sd&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=br(this.ua,this)):this.A=yC(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Vk(this,o)}},he.ua=function(){typeof Q0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hr(this,"timeout"),this.abort(8))},he.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,hr(this,"complete"),hr(this,"abort"),hv(this))},he.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hv(this,!0)),pn.$.N.call(this)},he.La=function(){this.s||(this.G||this.v||this.l?Bk(this):this.kb())},he.kb=function(){Bk(this)},he.isActive=function(){return!!this.g},he.da=function(){try{return 2<es(this)?this.g.status:-1}catch{return-1}},he.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},he.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),nZ(e)}},he.Ia=function(){return this.m},he.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(he=zk.prototype).ra=8,he.H=1,he.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new jp(this,this.l,t);let o=this.s;if(this.U&&(o?(o=Y1(o),X1(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Wk(this,i,e),Zt(n=Fs(this.I),"RID",t),Zt(n,"CVER",22),this.F&&Zt(n,"X-HTTP-Session-Id",this.F),Yp(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(Hk(o)))+"&"+e:this.o&&RC(n,this.o,o)),AC(this.i,i),this.bb&&Zt(n,"TYPE","init"),this.P?(Zt(n,"$req",e),Zt(n,"SID","null"),i.aa=!0,CC(i,n,null)):CC(i,n,e),this.H=2}}else 3==this.H&&(t?Gk(this,t):0==this.j.length||xk(this.i)||Gk(this))},he.Ma=function(){if(this.u=null,Kk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Up(br(this.jb,this),t)}},he.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qr(10),fv(this),Kk(this))},he.ib=function(){null!=this.v&&(this.v=null,fv(this),MC(this),qr(19))},he.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qr(2)):(this.l.info("Failed to ping google.com"),qr(1))},he.isActive=function(){return!!this.h&&this.h.isActive(this)},(he=tL.prototype).Ba=function(){},he.Aa=function(){},he.za=function(){},he.ya=function(){},he.isActive=function(){return!0},he.Va=function(){},mv.prototype.g=function(t,e){return new Ri(t,e)},er(Ri,tr),Ri.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Xk(t,null,t.Y),pv(t)},Ri.prototype.close=function(){PC(this.g)},Ri.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=gC(t),t=n);e.j.push(new Q7(e.fb++,t)),3==e.H&&pv(e)},Ri.prototype.N=function(){this.g.h=null,delete this.j,PC(this.g),delete this.g,Ri.$.N.call(this)},er(nL,IC),er(rL,EC),er(Md,tL),Md.prototype.Ba=function(){hr(this.g,"a")},Md.prototype.Aa=function(t){hr(this.g,new nL(t))},Md.prototype.za=function(t){hr(this.g,new rL)},Md.prototype.ya=function(){hr(this.g,"b")},er(Eo,function uZ(){this.blockSize=-1}),Eo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Eo.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)NC(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){NC(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){NC(this,r),i=0;break}}this.h=i,this.i+=e},Eo.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var cZ={};function OC(t){return-128<=t&&128>t?function _7(t,e){var n=cZ;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new bt([0|e],0>e?-1:0)}):new bt([0|t],0>t?-1:0)}function ts(t){if(isNaN(t)||!isFinite(t))return xd;if(0>t)return fr(ts(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=kC;return new bt(e,0)}var kC=4294967296,xd=OC(0),LC=OC(1),oL=OC(16777216);function Vs(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Yi(t){return-1==t.h}function fr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new bt(n,~t.h).add(LC)}function _v(t,e){return t.add(fr(e))}function yv(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Jp(t,e){this.g=t,this.h=e}function vv(t,e){if(Vs(e))throw Error("division by zero");if(Vs(t))return new Jp(xd,xd);if(Yi(t))return e=vv(fr(t),e),new Jp(fr(e.g),fr(e.h));if(Yi(e))return e=vv(t,fr(e)),new Jp(fr(e.g),e.h);if(30<t.g.length){if(Yi(t)||Yi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=LC,r=e;0>=r.X(t);)n=sL(n),r=sL(r);var i=Nd(n,1),o=Nd(r,1);for(r=Nd(r,2),n=Nd(n,2);!Vs(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Nd(r,1),n=Nd(n,1)}return e=_v(t,i.R(e)),new Jp(i,e)}for(i=xd;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=ts(n)).R(e);Yi(s)||0<s.X(t);)s=(o=ts(n-=r)).R(e);Vs(o)&&(o=LC),i=i.add(o),t=_v(t,s)}return new Jp(i,t)}function sL(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new bt(n,t.h)}function Nd(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new bt(i,t.h)}(he=bt.prototype).ea=function(){if(Yi(this))return-fr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:kC+r)*e,e*=kC}return t},he.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Vs(this))return"0";if(Yi(this))return"-"+fr(this).toString(t);for(var e=ts(Math.pow(t,6)),n=this,r="";;){var i=vv(n,e).g,o=((0<(n=_v(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Vs(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},he.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},he.X=function(t){return Yi(t=_v(this,t))?-1:Vs(t)?0:1},he.abs=function(){return Yi(this)?fr(this):this},he.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new bt(n,-2147483648&n[n.length-1]?-1:0)},he.R=function(t){if(Vs(this)||Vs(t))return xd;if(Yi(this))return Yi(t)?fr(this).R(fr(t)):fr(fr(this).R(t));if(Yi(t))return fr(this.R(fr(t)));if(0>this.X(oL)&&0>t.X(oL))return ts(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=s*u,yv(n,2*r+2*i),n[2*r+2*i+1]+=o*u,yv(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,yv(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,yv(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new bt(n,0)},he.gb=function(t){return vv(this,t).h},he.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new bt(n,this.h&t.h)},he.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new bt(n,this.h|t.h)},he.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new bt(n,this.h^t.h)},mv.prototype.createWebChannel=mv.prototype.g,Ri.prototype.send=Ri.prototype.u,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,iv.NO_ERROR=0,iv.TIMEOUT=8,iv.HTTP_ERROR=6,gk.COMPLETE="complete",_k.EventType=Bp,Bp.OPEN="a",Bp.CLOSE="b",Bp.ERROR="c",Bp.MESSAGE="d",tr.prototype.listen=tr.prototype.O,pn.prototype.listenOnce=pn.prototype.P,pn.prototype.getLastError=pn.prototype.Sa,pn.prototype.getLastErrorCode=pn.prototype.Ia,pn.prototype.getStatus=pn.prototype.da,pn.prototype.getResponseJson=pn.prototype.Wa,pn.prototype.getResponseText=pn.prototype.ja,pn.prototype.send=pn.prototype.ha,pn.prototype.setWithCredentials=pn.prototype.Oa,Eo.prototype.digest=Eo.prototype.l,Eo.prototype.reset=Eo.prototype.reset,Eo.prototype.update=Eo.prototype.j,bt.prototype.add=bt.prototype.add,bt.prototype.multiply=bt.prototype.R,bt.prototype.modulo=bt.prototype.gb,bt.prototype.compare=bt.prototype.X,bt.prototype.toNumber=bt.prototype.ea,bt.prototype.toString=bt.prototype.toString,bt.prototype.getBits=bt.prototype.D,bt.fromNumber=ts,bt.fromString=function iL(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return fr(iL(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ts(Math.pow(e,8)),r=xd,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=ts(Math.pow(e,o)),r=r.R(o).add(ts(s))):r=(r=r.R(n)).add(ts(s))}return r};var lZ=Io.createWebChannelTransport=function(){return new mv},dZ=Io.getStatEventTarget=function(){return rv()},FC=Io.ErrorCode=iv,hZ=Io.EventType=gk,fZ=Io.Event=lc,aL=Io.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Iv=(Io.FetchXmlHttpFactory=Wp,Io.WebChannel=_k),pZ=Io.XhrIo=pn,gZ=Io.Md5=Eo,Od=Io.Integer=bt;const uL="@firebase/firestore";class nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");let kd="10.7.0";const ja=new Jo.Yd("@firebase/firestore");function Ld(){return ja.logLevel}function ee(t,...e){if(ja.logLevel<=Jo.in.DEBUG){const n=e.map(VC);ja.debug(`Firestore (${kd}): ${t}`,...n)}}function Dn(t,...e){if(ja.logLevel<=Jo.in.ERROR){const n=e.map(VC);ja.error(`Firestore (${kd}): ${t}`,...n)}}function oi(t,...e){if(ja.logLevel<=Jo.in.WARN){const n=e.map(VC);ja.warn(`Firestore (${kd}): ${t}`,...n)}}function VC(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function me(t="Unexpected state"){const e=`FIRESTORE (${kd}) INTERNAL ASSERTION FAILED: `+t;throw Dn(e),new Error(e)}function De(t,e){t||me()}function ue(t,e){return t}const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends kt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class cL{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nr.UNAUTHENTICATED))}shutdown(){}}class vZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IZ{constructor(e){this.t=e,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let s=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zn,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const d=s;e.enqueueRetryable((0,W.Z)(function*(){yield d.promise,yield o(r.currentUser)}))},u=d=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De("string"==typeof r.accessToken),new cL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(null===e||"string"==typeof e),new nr(e)}}class EZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new EZ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De("string"==typeof n.token),this.R=n.token,new lL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function CZ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class dL{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=CZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function He(t,e){return t<e?-1:t>e?1:0}function Fd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function hL(t){return t+"\0"}class on{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new on(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new on(0,0))}static max(){return new Se(new on(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xp{constructor(e,n,r){void 0===n?n=0:n>e.length&&me(),void 0===r?r=e.length-n:r>e.length-n&&me(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Xp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ft extends Xp{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const DZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Xp{construct(e,n,r){return new Kt(e,n,r)}static isValidIdentifier(e){return DZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new J(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new J(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(ft.fromString(e))}static fromName(e){return new ce(ft.fromString(e).popFirst(5))}static empty(){return new ce(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ft.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new ft(e.slice()))}}class Vd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function UC(t){return t.fields.find(e=>2===e.kind)}function pc(t){return t.fields.filter(e=>2!==e.kind)}Vd.UNKNOWN_ID=-1;class gc{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ud{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ud(0,Pi.min())}}function fL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(1e9===r?new on(n+1,0):new on(n,r));return new Pi(i,ce.empty(),e)}function pL(t){return new Pi(t.readTime,t.key,-1)}class Pi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pi(Se.min(),ce.empty(),-1)}static max(){return new Pi(Se.max(),ce.empty(),-1)}}function BC(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ce.comparator(t.documentKey,e.documentKey),0!==n?n:He(t.largestBatchId,e.largestBatchId))}const gL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function $a(t){return jC.apply(this,arguments)}function jC(){return jC=(0,W.Z)(function*(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==gL)throw t;ee("LocalStore","Unexpectedly lost primary lease")}),jC.apply(this,arguments)}class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new x((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):x.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):x.reject(n)}static resolve(e){return new x((n,r)=>{n(e)})}static reject(e){return new x((n,r)=>{r(e)})}static waitFor(e){return new x((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=x.resolve(!1);for(const r of e)n=n.next(i=>i?x.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new x((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(f=>{s[d]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new x((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Ev{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new zn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new eg(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=$C(r.target.error);this.V.reject(new eg(e,i))}}static open(e,n,r,i){try{return new Ev(n,e.transaction(i,r))}catch(o){throw new eg(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new RZ(n)}}class wo{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===wo.S((0,kt.z$)())&&Dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),mc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,kt.hl)())return!1;if(wo.C())return!0;const e=(0,kt.z$)(),n=wo.S(e),r=0<n&&n<10,i=wo.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,W.Z)(function*(){return n.db||(ee("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new eg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new J(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new eg(e,a))},o.onupgradeneeded=s=>{ee("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{ee("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,W.Z)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=Ev.open(o.db,e,s?"readonly":"readwrite",r),d=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),x.reject(f))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,f="FirebaseError"!==d.name&&a<3;if(ee("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),o.close(),!f)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class SZ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return mc(this.k.delete())}}class eg extends J{constructor(e,n){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ha(t){return"IndexedDbTransactionError"===t.name}class RZ{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ee("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mc(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),mc(this.store.add(e))}get(e){return mc(this.store.get(e)).next(n=>(void 0===n&&(n=null),ee("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),mc(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),mc(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(s,a)=>{o.push(a)}).next(()=>o)}{const i=this.store.getAll(r.range);return new x((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new x((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new x((r,i)=>{n.onerror=o=>{const s=$C(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new x((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new SZ(a),d=n(a.primaryKey,a.value,u);if(d instanceof x){const f=d.catch(g=>(u.done(),x.reject(g)));r.push(f)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>x.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function mc(t){return new x((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=$C(r.target.error);n(i)}})}let _L=!1;function $C(t){const e=wo.S((0,kt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _L||(_L=!0,setTimeout(()=>{throw r},0)),r}}return t}class PZ{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ee("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,W.Z)(function*(){n.task=null;try{ee("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){Ha(r)?ee("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield $a(r)}yield n.ee(6e4)}))}}class MZ{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,W.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return x.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return ee("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(ee("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=pL(o);BC(s,r)>0&&(r=s)}),new Pi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Mi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function tg(t){return null==t}function ng(t){return 0===t&&1/t==-1/0}function yL(t){return"number"==typeof t&&Number.isInteger(t)&&!ng(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Sr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vL(e)),e=xZ(t.get(n),e);return vL(e)}function xZ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function vL(t){return t+"\x01\x01"}function ns(t){const e=t.length;if(De(e>=2),2===e)return De("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ft.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&me(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:me()}o=s+2}return new ft(r)}const IL=["userId","batchId"];function wv(t,e){return[t,Sr(e)]}function EL(t,e,n){return[t,Sr(e),n]}const NZ={},OZ=["prefixPath","collectionGroup","readTime","documentId"],kZ=["prefixPath","collectionGroup","documentId"],LZ=["collectionGroup","readTime","prefixPath","documentId"],FZ=["canonicalId","targetId"],VZ=["targetId","path"],UZ=["path","targetId"],BZ=["collectionId","parent"],jZ=["indexId","uid"],$Z=["uid","sequenceNumber"],HZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zZ=["indexId","uid","orderedDocumentKey"],qZ=["userId","collectionPath","documentId"],GZ=["userId","collectionPath","largestBatchId"],WZ=["userId","collectionGroup","largestBatchId"],wL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZZ=[...wL,"documentOverlays"],TL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],CL=TL,KZ=[...CL,"indexConfiguration","indexState","indexEntries"];class HC extends mL{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function rr(t,e){const n=ue(t);return wo.M(n.ae,e)}function DL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class $t{constructor(e,n){this.comparator=e,this.root=n||pr.EMPTY}insert(e,n){return new $t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tv(this.root,e,this.comparator,!0)}}class Tv{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??pr.RED,this.left=i??pr.EMPTY,this.right=o??pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new pr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1,pr.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,n,r,i,o){return this}insert(e,n,r){return new pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xt{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new AL(this.data.getIterator())}getIteratorFrom(e){return new AL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class AL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bd(t){return t.hasNext()?t.getNext():void 0}class si{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new si([])}unionWith(e){let n=new xt(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new si(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class SL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new SL("Invalid base64 string: "+o):o}}(e);return new qn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const YZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qa(t){if(De(!!t),"string"==typeof t){let e=0;const n=YZ.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(t.seconds),nanos:gn(t.nanos)}}function gn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Us(t){return"string"==typeof t?qn.fromBase64String(t):qn.fromUint8Array(t)}function Cv(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Dv(t){const e=t.mapValue.fields.__previous_value__;return Cv(e)?Dv(e):e}function rg(t){const e=qa(t.mapValue.fields.__local_write_time__.timestampValue);return new on(e.seconds,e.nanos)}class JZ{constructor(e,n,r,i,o,s,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Ga{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ga("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ga&&e.projectId===this.projectId&&e.database===this.database}}const Wa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bv={nullValue:"NULL_VALUE"};function Za(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cv(t)?4:xL(t)?9007199254740991:10:me()}function rs(t,e){if(t===e)return!0;const n=Za(t);if(n!==Za(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rg(t).isEqual(rg(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=qa(i.timestampValue),a=qa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Us(t.bytesValue).isEqual(Us(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return gn(i.geoPointValue.latitude)===gn(o.geoPointValue.latitude)&&gn(i.geoPointValue.longitude)===gn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return gn(i.integerValue)===gn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=gn(i.doubleValue),a=gn(o.doubleValue);return s===a?ng(s)===ng(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Fd(t.arrayValue.values||[],e.arrayValue.values||[],rs);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(DL(s)!==DL(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!rs(s[u],a[u])))return!1;return!0}(t,e);default:return me()}var o}function ig(t,e){return void 0!==(t.values||[]).find(n=>rs(n,e))}function Ka(t,e){if(t===e)return 0;const n=Za(t),r=Za(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=gn(o.integerValue||o.doubleValue),u=gn(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return RL(t.timestampValue,e.timestampValue);case 4:return RL(rg(t),rg(e));case 5:return He(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Us(o),u=Us(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=He(a[d],u[d]);if(0!==f)return f}return He(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=He(gn(o.latitude),gn(s.latitude));return 0!==a?a:He(gn(o.longitude),gn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let d=0;d<a.length&&d<u.length;++d){const f=Ka(a[d],u[d]);if(f)return f}return He(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Wa.mapValue&&s===Wa.mapValue)return 0;if(o===Wa.mapValue)return 1;if(s===Wa.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),d=s.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const _=He(u[g],f[g]);if(0!==_)return _;const y=Ka(a[u[g]],d[f[g]]);if(0!==y)return y}return He(u.length,f.length)}(t.mapValue,e.mapValue);default:throw me()}}function RL(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return He(t,e);const n=qa(t),r=qa(e),i=He(n.seconds,r.seconds);return 0!==i?i:He(n.nanos,r.nanos)}function jd(t){return zC(t)}function zC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Us(t.bytesValue).toBase64():"referenceValue"in t?ce.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=zC(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${zC(n.fields[s])}`;return i+"}"}(t.mapValue):me()}function _c(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qC(t){return!!t&&"integerValue"in t}function og(t){return!!t&&"arrayValue"in t}function PL(t){return!!t&&"nullValue"in t}function ML(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sv(t){return!!t&&"mapValue"in t}function sg(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return za(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sg(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sg(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xL(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function XZ(t){return"nullValue"in t?bv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?_c(Ga.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:me()}function eK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?_c(Ga.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Wa:me()}function NL(t,e){const n=Ka(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function OL(t,e){const n=Ka(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sg(n)}setAll(e){let n=Kt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=sg(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Sv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Sv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){za(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new gr(sg(this.value))}}function kL(t){const e=[];return za(t.fields,(n,r)=>{const i=new Kt([n]);if(Sv(r)){const o=kL(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new si(e)}class Qt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Qt(e,0,Se.min(),Se.min(),Se.min(),gr.empty(),0)}static newFoundDocument(e,n,r,i){return new Qt(e,1,n,Se.min(),r,i,0)}static newNoDocument(e,n){return new Qt(e,2,n,Se.min(),Se.min(),gr.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,Se.min(),Se.min(),gr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qa{constructor(e,n){this.position=e,this.inclusive=n}}function LL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ce.comparator(ce.fromName(s.referenceValue),n.key):Ka(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function FL(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rs(t.position[n],e.position[n]))return!1;return!0}class ag{constructor(e,n="asc"){this.field=e,this.dir=n}}function tK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class VL{}class at extends VL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new nK(e,n,r):"array-contains"===n?new oK(e,r):"in"===n?new zL(e,r):"not-in"===n?new sK(e,r):"array-contains-any"===n?new aK(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new rK(e,r):new iK(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ka(n,this.value)):null!==n&&Za(this.value)===Za(n)&&this.matchesComparison(Ka(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class At extends VL{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new At(e,n)}matches(e){return $d(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function $d(t){return"and"===t.op}function GC(t){return"or"===t.op}function WC(t){return UL(t)&&$d(t)}function UL(t){for(const e of t.filters)if(e instanceof At)return!1;return!0}function ZC(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+jd(t.value);if(WC(t))return t.filters.map(e=>ZC(e)).join(",");{const e=t.filters.map(n=>ZC(n)).join(",");return`${t.op}(${e})`}}function BL(t,e){return t instanceof at?(r=t,(i=e)instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&rs(r.value,i.value)):t instanceof At?function(r,i){return i instanceof At&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&BL(s,i.filters[a]),!0)}(t,e):void me();var r,i}function jL(t,e){const n=t.filters.concat(e);return At.create(n,t.op)}function $L(t){return t instanceof at?`${(n=t).field.canonicalString()} ${n.op} ${jd(n.value)}`:t instanceof At?function(n){return n.op.toString()+" {"+n.getFilters().map($L).join(" ,")+"}"}(t):"Filter";var n}class nK extends at{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class rK extends at{constructor(e,n){super(e,"in",n),this.keys=HL(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iK extends at{constructor(e,n){super(e,"not-in",n),this.keys=HL(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HL(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class oK extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return og(n)&&ig(n.arrayValue,this.value)}}class zL extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&ig(this.value.arrayValue,n)}}class sK extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(ig(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!ig(this.value.arrayValue,n)}}class aK extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!og(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ig(this.value.arrayValue,r))}}class uK{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function KC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new uK(t,e,n,r,i,o,s)}function yc(t){const e=ue(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ZC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),tg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jd(r)).join(",")),e.ce=n}return e.ce}function ug(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!FL(t.startAt,e.startAt)&&FL(t.endAt,e.endAt)}function Rv(t){return ce.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Pv(t,e){return t.filters.filter(n=>n instanceof at&&n.field.isEqual(e))}function qL(t,e,n){let r=bv,i=!0;for(const o of Pv(t,e)){let s=bv,a=!0;switch(o.op){case"<":case"<=":s=XZ(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=bv}NL({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];NL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function GL(t,e,n){let r=Wa,i=!0;for(const o of Pv(t,e)){let s=Wa,a=!0;switch(o.op){case">=":case">":s=eK(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Wa}OL({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];OL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class Bs{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function WL(t,e,n,r,i,o,s,a){return new Bs(t,e,n,r,i,o,s,a)}function Hd(t){return new Bs(t)}function ZL(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function QC(t){return null!==t.collectionGroup}function zd(t){const e=ue(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xt(Kt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new ag(o,r))}),n.has(Kt.keyField().canonicalString())||e.le.push(new ag(Kt.keyField(),r))}return e.le}function Gr(t){const e=ue(t);return e.he||(e.he=function KL(t,e){if("F"===t.limitType)return KC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new ag(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Qa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qa(t.startAt.position,t.startAt.inclusive):null;return KC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,zd(t))),e.he}function YC(t,e){const n=t.filters.concat([e]);return new Bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mv(t,e,n){return new Bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cg(t,e){return ug(Gr(t),Gr(e))&&t.limitType===e.limitType}function QL(t){return`${yc(Gr(t))}|lt:${t.limitType}`}function qd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$L(i)).join(", ")}]`),tg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>jd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>jd(i)).join(",")),`Target(${r})`}(Gr(t))}; limitType=${t.limitType})`}function lg(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ce.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of zd(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const d=LL(s,a,u);return s.inclusive?d<=0:d<0}(r.startAt,zd(r),i)||r.endAt&&!function(s,a,u){const d=LL(s,a,u);return s.inclusive?d>=0:d>0}(r.endAt,zd(r),i)));var r,i}function YL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JL(t){return(e,n)=>{let r=!1;for(const i of zd(t)){const o=cK(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function cK(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),d=a.data.field(o);return null!==u&&null!==d?Ka(u,d):me()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}class js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){za(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return bL(this.inner)}size(){return this.innerSize}}const lK=new $t(ce.comparator);function ai(){return lK}const XL=new $t(ce.comparator);function dg(...t){let e=XL;for(const n of t)e=e.insert(n.key,n);return e}function eF(t){let e=XL;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function is(){return hg()}function tF(){return hg()}function hg(){return new js(t=>t.toString(),(t,e)=>t.isEqual(e))}const dK=new $t(ce.comparator),hK=new xt(ce.comparator);function Ye(...t){let e=hK;for(const n of t)e=e.add(n);return e}const fK=new xt(He);function JC(){return fK}function nF(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ng(e)?"-0":e}}function rF(t){return{integerValue:""+t}}function iF(t,e){return yL(e)?rF(e):nF(t,e)}class xv{constructor(){this._=void 0}}function pK(t,e,n){return t instanceof Gd?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Cv(o)&&(o=Dv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof vc?sF(t,e):t instanceof Ic?aF(t,e):function(i,o){const s=oF(i,o),a=uF(s)+uF(i.Ie);return qC(s)&&qC(i.Ie)?rF(a):nF(i.serializer,a)}(t,e)}function gK(t,e,n){return t instanceof vc?sF(t,e):t instanceof Ic?aF(t,e):n}function oF(t,e){return t instanceof Wd?qC(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Gd extends xv{}class vc extends xv{constructor(e){super(),this.elements=e}}function sF(t,e){const n=cF(e);for(const r of t.elements)n.some(i=>rs(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ic extends xv{constructor(e){super(),this.elements=e}}function aF(t,e){let n=cF(e);for(const r of t.elements)n=n.filter(i=>!rs(i,r));return{arrayValue:{values:n}}}class Wd extends xv{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function uF(t){return gn(t.integerValue||t.doubleValue)}function cF(t){return og(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class fg{constructor(e,n){this.field=e,this.transform=n}}class _K{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ov{}function lF(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Kd(t.key,sn.none()):new Zd(t.key,t.data,sn.none());{const n=t.data,r=gr.empty();let i=new xt(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new $s(t.key,r,new si(i.toArray()),sn.none())}}function yK(t,e,n){t instanceof Zd?function(i,o,s){const a=i.value.clone(),u=fF(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof $s?function(i,o,s){if(!Nv(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=fF(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(hF(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function pg(t,e,n,r){return t instanceof Zd?function(o,s,a,u){if(!Nv(o.precondition,s))return a;const d=o.value.clone(),f=pF(o.fieldTransforms,u,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof $s?function(o,s,a,u){if(!Nv(o.precondition,s))return a;const d=pF(o.fieldTransforms,u,s),f=s.data;return f.setAll(hF(o)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,Nv(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function vK(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=oF(r.transform,i||null);null!=o&&(null===n&&(n=gr.empty()),n.set(r.field,o))}return n||null}function dF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Fd(r,i,(o,s)=>function mK(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof vc&&i instanceof vc||r instanceof Ic&&i instanceof Ic?Fd(r.elements,i.elements,rs):r instanceof Wd&&i instanceof Wd?rs(r.Ie,i.Ie):r instanceof Gd&&i instanceof Gd);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Zd extends Ov{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $s extends Ov{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fF(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gK(s,a,n[i]))}return r}function pF(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,pK(o,s,e))}return r}class Kd extends Ov{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XC extends Ov{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&yK(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tF();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=lF(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Fd(this.mutations,e.mutations,(n,r)=>dF(n,r))&&Fd(this.baseMutations,e.baseMutations,(n,r)=>dF(n,r))}}class tD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=dK;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new tD(e,n,r,i)}}class nD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class EK{constructor(e,n){this.count=e,this.unchangedNames=n}}var kn,pt;function gF(t){switch(t){default:return me();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function mF(t){if(void 0===t)return Dn("GRPC error has no .code"),k.UNKNOWN;switch(t){case kn.OK:return k.OK;case kn.CANCELLED:return k.CANCELLED;case kn.UNKNOWN:return k.UNKNOWN;case kn.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case kn.INTERNAL:return k.INTERNAL;case kn.UNAVAILABLE:return k.UNAVAILABLE;case kn.UNAUTHENTICATED:return k.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case kn.NOT_FOUND:return k.NOT_FOUND;case kn.ALREADY_EXISTS:return k.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return k.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case kn.ABORTED:return k.ABORTED;case kn.OUT_OF_RANGE:return k.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return k.UNIMPLEMENTED;case kn.DATA_LOSS:return k.DATA_LOSS;default:return me()}}(pt=kn||(kn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";function _F(){return new TextEncoder}const wK=new Od([4294967295,4294967295],0);function yF(t){const e=_F().encode(t),n=new gZ;return n.update(e),new Uint8Array(n.digest())}function vF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Od([n,r],0),new Od([i,o],0)]}class rD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gg(`Invalid padding: ${n}`);if(r<0)throw new gg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new gg(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new gg(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Od.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Od.fromNumber(r)));return 1===i.compare(wK)&&(i=new Od([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=yF(e),[r,i]=vF(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new rD(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=yF(e),[r,i]=vF(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class gg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mg{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,_g.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mg(Se.min(),i,new $t(He),ai(),Ye())}}class _g{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _g(r,n,Ye(),Ye(),Ye())}}class Lv{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class IF{constructor(e,n){this.targetId=e,this.fe=n}}class EF{constructor(e,n,r=qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wF{constructor(){this.ge=0,this.pe=CF(),this.ye=qn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ye(),n=Ye(),r=Ye();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me()}}),new _g(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=CF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,De(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class TK{constructor(e){this.Le=e,this.ke=new Map,this.qe=ai(),this.Qe=TF(),this.Ke=new $t(He)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Rv(o))if(0===r){const s=new ce(o.path);this.We(n,s,Qt.newNoDocument(s,Se.min()))}else De(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Us(r).toUint8Array()}catch(u){if(u instanceof SL)return oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new rD(s,i,o)}catch(u){return oi(u instanceof gg?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Rv(a.target)){const u=new ce(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,Qt.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Ye();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new mg(e,n,this.Ke,this.qe,r);return this.qe=ai(),this.Qe=TF(),this.Ke=new $t(He),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new wF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new xt(He),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new wF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function TF(){return new $t(ce.comparator)}function CF(){return new $t(ce.comparator)}const CK={asc:"ASCENDING",desc:"DESCENDING"},DK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bK={and:"AND",or:"OR"};class AK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iD(t,e){return t.useProto3Json||tg(e)?e:{value:e}}function Qd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SK(t,e){return Qd(t,e.toTimestamp())}function bn(t){return De(!!t),Se.fromTimestamp(function(n){const r=qa(n);return new on(r.seconds,r.nanos)}(t))}function oD(t,e){return(r=t,new ft(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function bF(t){const e=ft.fromString(t);return De(kF(e)),e}function yg(t,e){return oD(t.databaseId,e.path)}function os(t,e){const n=bF(e);if(n.get(1)!==t.databaseId.projectId)throw new J(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(SF(n))}function sD(t,e){return oD(t.databaseId,e)}function AF(t){const e=bF(t);return 4===e.length?ft.emptyPath():SF(e)}function vg(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SF(t){return De(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function RF(t,e,n){return{name:yg(t,e),fields:n.value.mapValue.fields}}function PF(t,e,n){const r=os(t,e.name),i=bn(e.updateTime),o=e.createTime?bn(e.createTime):Se.min(),s=new gr({mapValue:{fields:e.fields}}),a=Qt.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ig(t,e){let n;if(e instanceof Zd)n={update:RF(t,e.key,e.value)};else if(e instanceof Kd)n={delete:yg(t,e.key)};else if(e instanceof $s)n={update:RF(t,e.key,e.data),updateMask:LK(e.fieldMask)};else{if(!(e instanceof XC))return me();n={verify:yg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Gd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ic)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wd)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw me()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:SK(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:me()),n;var o}function aD(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?sn.updateTime(bn(o.updateTime)):void 0!==o.exists?sn.exists(o.exists):sn.none():sn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(De("REQUEST_TIME"===a.setToServerValue),u=new Gd):"appendMissingElements"in a?u=new vc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Ic(a.removeAllFromArray.values||[]):"increment"in a?u=new Wd(s,a.increment):me();const d=Kt.fromServerFormat(a.fieldPath);return new fg(d,u)}(t,i)):[];var o;if(e.update){const i=os(t,e.update.name),o=new gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new si((e.updateMask.fieldPaths||[]).map(f=>Kt.fromServerFormat(f)));return new $s(i,o,s,n,r)}return new Zd(i,o,n,r)}if(e.delete){const i=os(t,e.delete);return new Kd(i,n)}if(e.verify){const i=os(t,e.verify);return new XC(i,n)}return me()}function MF(t,e){return{documents:[sD(t,e.path)]}}function uD(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=sD(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=sD(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return OF(At.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(0!==u.length)return u.map(d=>{return{field:Ya((g=d).field),direction:NK(g.dir)};var g})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const s=iD(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function xF(t){let e=AF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(1===r);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(g){const _=NF(g);return _ instanceof At&&WC(_)?_.getFilters():[_]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(_=>{return new ag(Yd((I=_).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,tg(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new Qa((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new Qa(g.values||[],!g.before)}(n.endAt)),WL(e,i,s,o,a,"F",u,d)}function NF(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yd(n.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yd(n.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yd(n.unaryFilter.field);return at.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Yd(n.unaryFilter.field);return at.create(s,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(t):void 0!==t.fieldFilter?at.create(Yd((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return At.create(n.compositeFilter.filters.map(r=>NF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me()}}(n.compositeFilter.op))}(t):me();var n}function NK(t){return CK[t]}function OK(t){return DK[t]}function kK(t){return bK[t]}function Ya(t){return{fieldPath:t.canonicalString()}}function Yd(t){return Kt.fromServerFormat(t.fieldPath)}function OF(t){return t instanceof at?function(n){if("=="===n.op){if(ML(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NAN"}};if(PL(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(ML(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NAN"}};if(PL(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(n.field),op:OK(n.op),value:n.value}}}(t):t instanceof At?function(n){const r=n.getFilters().map(i=>OF(i));return 1===r.length?r[0]:{compositeFilter:{op:kK(n.op),filters:r}}}(t):me()}function LK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Hs{constructor(e,n,r,i,o=Se.min(),s=Se.min(),a=qn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class LF{constructor(e){this.ut=e}}function FF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Fv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:yg(o=t.ut,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Qd(o,s.version.toTimestamp()),createTime:Qd(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ec(e.version)};else{if(!e.isUnknownDocument())return me();r.unknownDocument={path:n.path.toArray(),version:Ec(e.version)}}var o,s;return r}function Fv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ec(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wc(t){const e=new on(t.seconds,t.nanoseconds);return Se.fromTimestamp(e)}function Tc(t,e){const n=(e.baseMutations||[]).map(o=>aD(t.ut,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>aD(t.ut,o)),i=on.fromMillis(e.localWriteTimeMs);return new eD(e.batchId,i,n,r)}function Eg(t){const e=wc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?wc(t.lastLimboFreeSnapshotVersion):Se.min();let r;return r=void 0!==t.query.documents?(De(1===(o=t.query).documents.length),Gr(Hd(AF(o.documents[0])))):function(o){return Gr(xF(o))}(t.query),new Hs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qn.fromBase64String(t.resumeToken));var o}function VF(t,e){const n=Ec(e.snapshotVersion),r=Ec(e.lastLimboFreeSnapshotVersion);let i;i=Rv(e.target)?MF(t.ut,e.target):uD(t.ut,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yc(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function cD(t){const e=xF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Mv(e,e.limit,"L"):e}function lD(t,e){return new nD(e.largestBatchId,aD(t.ut,e.overlayMutation))}function UF(t,e){const n=e.path.lastSegment();return[t,Sr(e.path.popLast()),n]}function BF(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ec(r.readTime),documentKey:Sr(r.documentKey.path),largestBatchId:r.largestBatchId}}class VK{getBundleMetadata(e,n){return jF(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:wc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return jF(e).put({bundleId:(i=n).id,createTime:Ec(bn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return $F(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:cD(o.bundledQuery),readTime:wc(o.readTime)};var o})}saveNamedQuery(e,n){return $F(e).put({name:(i=n).name,readTime:Ec(bn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function jF(t){return rr(t,"bundles")}function $F(t){return rr(t,"namedQueries")}class Vv{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Vv(e,n.uid||"")}getOverlay(e,n){return wg(e).get(UF(this.userId,n)).next(r=>r?lD(this.serializer,r):null)}getOverlays(e,n){const r=is();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new nD(n,s);i.push(this.lt(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(Sr(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(wg(e).H("collectionPathOverlayIndex",a))}),x.waitFor(o)}getOverlaysForCollection(e,n,r){const i=is(),o=Sr(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return wg(e).W("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const d=lD(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=is();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return wg(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const g=lD(this.serializer,d);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):f.done()}).next(()=>o)}lt(e,n){return wg(e).put(function(i,o,s){const[a,u,d]=UF(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:d,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ig(i.ut,s.mutation)}}(this.serializer,this.userId,n))}}function wg(t){return rr(t,"documentOverlays")}class Cc{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(gn(e.integerValue));else if("doubleValue"in e){const r=gn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),ng(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Us(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?xL(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):me()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),ce.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function UK(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function HF(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=UK(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}Cc.St=new Cc;class BK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=HF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=HF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class jK{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class $K{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Tg{constructor(){this.Wt=new BK,this.Gt=new jK(this.Wt),this.zt=new $K(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Dc{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Dc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ja(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=zF(t.arrayValue,e.arrayValue),0!==n?n:(n=zF(t.directionalValue,e.directionalValue),0!==n?n:ce.comparator(t.documentKey,e.documentKey)))}function zF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class qF{constructor(e){this.Jt=new xt((n,r)=>Kt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(De(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=UC(e);if(void 0!==n&&!this.tn(n))return!1;const r=pc(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.nn(a,u)||!this.rn(this.Yt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Yt.length||!this.rn(this.Yt[s++],r[o]))return!1;return!0}sn(){if(this.Xt)return null;let e=new xt(Kt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new gc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new gc(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new gc(r.field,"asc"===r.dir?0:1)));return new Vd(Vd.UNKNOWN_ID,this.collectionId,n,Ud.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function GF(t){var e,n;if(De(t instanceof at||t instanceof At),t instanceof at){if(t instanceof zL){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>at.create(t.field,"==",o)))||[];return At.create(i,"or")}return t}const r=t.filters.map(i=>GF(i));return At.create(r,t.op)}function HK(t){if(0===t.getFilters().length)return[];const e=fD(GF(t));return De(WF(e)),dD(e)||hD(e)?[e]:e.getFilters()}function dD(t){return t instanceof at}function hD(t){return t instanceof At&&WC(t)}function WF(t){return dD(t)||hD(t)||function(n){if(n instanceof At&&GC(n)){for(const r of n.getFilters())if(!dD(r)&&!hD(r))return!1;return!0}return!1}(t)}function fD(t){if(De(t instanceof at||t instanceof At),t instanceof at)return t;if(1===t.filters.length)return fD(t.filters[0]);const e=t.filters.map(r=>fD(r));let n=At.create(e,t.op);return n=Uv(n),WF(n)?n:(De(n instanceof At),De($d(n)),De(n.filters.length>1),n.filters.reduce((r,i)=>pD(r,i)))}function pD(t,e){let n;return De(t instanceof at||t instanceof At),De(e instanceof at||e instanceof At),n=t instanceof at?e instanceof at?At.create([t,e],"and"):ZF(t,e):e instanceof at?ZF(e,t):function(i,o){if(De(i.filters.length>0&&o.filters.length>0),$d(i)&&$d(o))return jL(i,o.getFilters());const s=GC(i)?i:o,a=GC(i)?o:i,u=s.filters.map(d=>pD(d,a));return At.create(u,"or")}(t,e),Uv(n)}function ZF(t,e){if($d(e))return jL(e,t.getFilters());{const n=e.filters.map(r=>pD(t,r));return At.create(n,"or")}}function Uv(t){if(De(t instanceof at||t instanceof At),t instanceof at)return t;const e=t.getFilters();if(1===e.length)return Uv(e[0]);if(UL(t))return t;const n=e.map(i=>Uv(i)),r=[];return n.forEach(i=>{i instanceof at?r.push(i):i instanceof At&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:At.create(r,t.op)}class zK{constructor(){this.on=new gD}addToCollectionParentIndex(e,n){return this.on.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Pi.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}}class gD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xt(ft.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(ft.comparator)).toArray()}}const Bv=new Uint8Array(0);class qK{constructor(e,n){this.user=e,this.databaseId=n,this._n=new gD,this.an=new js(r=>yc(r),(r,i)=>ug(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const o={collectionId:r,parent:Sr(i)};return KF(e).put(o)}return x.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[hL(n),""],!1,!0);return KF(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(ns(s.parent))}return r})}addFieldIndex(e,n){const r=Cg(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=Xd(e);return o.next(a=>{s.put(BF(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=Cg(e),i=Xd(e),o=Jd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Cg(e),r=Jd(e),i=Xd(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return x.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new qF(r).sn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=Jd(e);let i=!0;const o=new Map;return x.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ye();const a=[];return x.forEach(o,(u,d)=>{var U;ee("IndexedDbIndexManager",`Using index ${U=u,`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`} to execute ${yc(n)}`);const f=function(U,ne){const oe=UC(ne);if(void 0===oe)return null;for(const Oe of Pv(U,oe.fieldPath))switch(Oe.op){case"array-contains-any":return Oe.value.arrayValue.values||[];case"array-contains":return[Oe.value]}return null}(d,u),g=function(U,ne){const oe=new Map;for(const Oe of pc(ne))for(const zt of Pv(U,Oe.fieldPath))switch(zt.op){case"==":case"in":oe.set(Oe.fieldPath.canonicalString(),zt.value);break;case"not-in":case"!=":return oe.set(Oe.fieldPath.canonicalString(),zt.value),Array.from(oe.values())}return null}(d,u),_=function(U,ne){const oe=[];let Oe=!0;for(const zt of pc(ne)){const ui=0===zt.kind?qL(U,zt.fieldPath,U.startAt):GL(U,zt.fieldPath,U.startAt);oe.push(ui.value),Oe&&(Oe=ui.inclusive)}return new Qa(oe,Oe)}(d,u),y=function(U,ne){const oe=[];let Oe=!0;for(const zt of pc(ne)){const ui=0===zt.kind?GL(U,zt.fieldPath,U.endAt):qL(U,zt.fieldPath,U.endAt);oe.push(ui.value),Oe&&(Oe=ui.inclusive)}return new Qa(oe,Oe)}(d,u),I=this.ln(u,d,_),C=this.ln(u,d,y),S=this.hn(u,d,g),N=this.Pn(u.indexId,f,I,_.inclusive,C,y.inclusive,S);return x.forEach(N,R=>r.j(R,n.limit).next(U=>{U.forEach(ne=>{const oe=ce.fromSegments(ne.documentKey);s.has(oe)||(s=s.add(oe),a.push(oe))})}))}).next(()=>a)}return x.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:HK(At.create(e.filters,"and")).map(r=>KC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){const u=(null!=n?n.length:1)*Math.max(r.length,o.length),d=u/(null!=n?n.length:1),f=[];for(let g=0;g<u;++g){const _=n?this.In(n[g/d]):Bv,y=this.Tn(e,_,r[g%d],i),I=this.En(e,_,o[g%d],s),C=a.map(S=>this.Tn(e,_,S,!0));f.push(...this.createRange(y,I,C))}return f}Tn(e,n,r,i){const o=new Dc(e,ce.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){const o=new Dc(e,ce.empty(),n,r);return i?o.Ht():o}cn(e,n){const r=new qF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.un(n);return x.forEach(i,o=>this.cn(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let d=new xt(Kt.comparator),f=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Tg;for(const i of pc(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.jt(i.kind);Cc.St.ht(o,s)}return r.Ut()}In(e){const n=new Tg;return Cc.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Tg;return Cc.St.ht(_c(this.databaseId,n),r.jt(function(o){const s=pc(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Tg);let o=0;for(const s of pc(e)){const a=r[o++];for(const u of i)if(this.Rn(n,s.fieldPath)&&og(a))i=this.Vn(i,s,a);else{const d=u.jt(s.kind);Cc.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new Tg;u.seed(a.Ut()),Cc.St.ht(s,u.jt(n.kind)),o.push(u)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof at&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Cg(e),i=Xd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return x.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(f,g){const _=g?new Ud(g.sequenceNumber,new Pi(wc(g.readTime),new ce(ns(g.documentKey)),g.largestBatchId)):Ud.empty(),y=f.fields.map(([I,C])=>new gc(Kt.fromServerFormat(I),C));return new Vd(f.indexId,f.collectionGroup,y,_)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:He(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Cg(e),o=Xd(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,u=>o.put(BF(u.indexId,this.user,s,r)))))}updateIndexEntries(e,n){const r=new Map;return x.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?x.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,u=>this.gn(e,i,u).next(d=>{const f=this.pn(o,u);return d.isEqual(f)?x.resolve():this.yn(e,o,u,d,f)}))))})}wn(e,n,r,i){return Jd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Jd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=Jd(e);let o=new xt(Ja);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new Dc(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new xt(Ja);const i=this.dn(n,e);if(null==i)return r;const o=UC(n);if(null!=o){const s=e.data.field(o.fieldPath);if(og(s))for(const a of s.arrayValue.values||[])r=r.add(new Dc(n.indexId,e.key,this.In(a),i))}else r=r.add(new Dc(n.indexId,e.key,Bv,i));return r}yn(e,n,r,i,o){ee("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(u,d,f,g,_){const y=u.getIterator(),I=d.getIterator();let C=Bd(y),S=Bd(I);for(;C||S;){let N=!1,R=!1;if(C&&S){const U=f(C,S);U<0?R=!0:U>0&&(N=!0)}else null!=C?R=!0:N=!0;N?(g(S),S=Bd(I)):R?(_(C),C=Bd(y)):(C=Bd(y),S=Bd(I))}}(i,o,Ja,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),x.waitFor(s)}fn(e){let n=1;return Xd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Ja(s,a)).filter((s,a,u)=>!a||0!==Ja(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=Ja(s,e),u=Ja(s,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(s),i.push(s.Ht());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Bv,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Bv,[]]))}return o}bn(e,n){return Ja(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(QF)}getMinOffset(e,n){return x.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||me())).next(QF)}}function KF(t){return rr(t,"collectionParents")}function Jd(t){return rr(t,"indexEntries")}function Cg(t){return rr(t,"indexConfiguration")}function Xd(t){return rr(t,"indexState")}function QF(t){De(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;BC(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Pi(e.readTime,e.documentKey,n)}const YF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Rr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Rr(e,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function JF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},(f,g,_)=>(a++,_.delete()));o.push(u.next(()=>{De(1===a)}));const d=[];for(const f of n.mutations){const g=EL(e,f.key.path,n.batchId);o.push(i.delete(g)),d.push(f.key)}return x.waitFor(o).next(()=>d)}function jv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw me();e=t.noDocument}return JSON.stringify(e).length}Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(41943040,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);class $v{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){De(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new $v(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xa(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=eh(e),s=Xa(e);return s.add({}).next(a=>{De("number"==typeof a);const u=new eD(a,n,r,i),d=function(y,I,C){const S=C.baseMutations.map(R=>Ig(y.ut,R)),N=C.mutations.map(R=>Ig(y.ut,R));return{userId:I,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:S,mutations:N}}(this.serializer,this.userId,u),f=[];let g=new xt((_,y)=>He(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=EL(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),f.push(s.put(d)),f.push(o.put(y,NZ))}return g.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),x.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return Xa(e).get(n).next(r=>r?(De(r.userId===this.userId),Tc(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?x.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Xa(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(De(a.batchId>=r),o=Tc(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xa(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xa(e).W("userMutationsIndex",n).next(r=>r.map(i=>Tc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=wv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return eh(e).Y({range:i},(s,a,u)=>{const[d,f,g]=s,_=ns(f);if(d===this.userId&&n.path.isEqual(_))return Xa(e).get(g).next(y=>{if(!y)throw me();De(y.userId===this.userId),o.push(Tc(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(He);const i=[];return n.forEach(o=>{const s=wv(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=eh(e).Y({range:a},(d,f,g)=>{const[_,y,I]=d,C=ns(y);_===this.userId&&o.path.isEqual(C)?r=r.add(I):g.done()});i.push(u)}),x.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=wv(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new xt(He);return eh(e).Y({range:s},(u,d,f)=>{const[g,_,y]=u,I=ns(_);g===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(y)):f.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(Xa(e).get(o).next(s=>{if(null===s)throw me();De(s.userId===this.userId),r.push(Tc(this.serializer,s))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return JF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return eh(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=ns(o[1]);i.push(u)}else a.done()}).next(()=>{De(0===i.length)})})}containsKey(e,n){return XF(e,this.userId,n)}Mn(e){return eV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function XF(t,e,n){const r=wv(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return eh(t).Y({range:o,J:!0},(a,u,d)=>{const[f,g,_]=a;f===e&&g===i&&(s=!0),d.done()}).next(()=>s)}function Xa(t){return rr(t,"mutations")}function eh(t){return rr(t,"documentMutations")}function eV(t){return rr(t,"mutationQueues")}class bc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new bc(0)}static Nn(){return new bc(-1)}}class GK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new bc(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Se.fromTimestamp(new on(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>th(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(De(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return th(e).Y((s,a)=>{const u=Eg(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>x.waitFor(o)).next(()=>i)}forEachTarget(e,n){return th(e).Y((r,i)=>{const o=Eg(i);n(o)})}Bn(e){return tV(e).get("targetGlobalKey").next(n=>(De(null!==n),n))}Ln(e,n){return tV(e).put("targetGlobalKey",n)}kn(e,n){return th(e).put(VF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=yc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return th(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const d=Eg(a);ug(n,d.target)&&(o=d,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=eu(e);return n.forEach(s=>{const a=Sr(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),x.waitFor(i)}removeMatchingKeys(e,n,r){const i=eu(e);return x.forEach(n,o=>{const s=Sr(o.path);return x.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=eu(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=eu(e);let o=Ye();return i.Y({range:r,J:!0},(s,a,u)=>{const d=ns(s[1]),f=new ce(d);o=o.add(f)}).next(()=>o)}containsKey(e,n){const r=Sr(n.path),i=IDBKeyRange.bound([r],[hL(r)],!1,!0);let o=0;return eu(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,d)=>{0!==s&&(o++,d.done())}).next(()=>o>0)}_t(e,n){return th(e).get(n).next(r=>r?Eg(r):null)}}function th(t){return rr(t,"targets")}function tV(t){return rr(t,"targetGlobal")}function eu(t){return rr(t,"targetDocuments")}function nV([t,e],[n,r]){const i=He(t,n);return 0===i?He(e,r):i}class WK{constructor(e){this.Qn=e,this.buffer=new xt(nV),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();nV(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,W.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Ha(r)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield $a(r)}yield n.Gn(3e5)}))}}class ZK{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return x.resolve(Mi._e);const r=new WK(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(YF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YF):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Ld()<=Jo.in.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-f}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-f}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}class KK{constructor(e,n){this.db=e,this.garbageCollector=function iV(t,e){return new ZK(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Hv(e,r)}removeReference(e,n,r){return Hv(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Hv(e,n)}Xn(e,n){return function(i,o){let s=!1;return eV(i).Z(a=>XF(i,a,o).next(u=>(u&&(s=!0),x.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Zn(e,(s,a)=>{if(a<=n){const u=this.Xn(e,s).next(d=>{if(!d)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Se.min()),eu(e).delete([0,Sr(s.path)])))});i.push(u)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Hv(e,n)}Zn(e,n){const r=eu(e);let i,o=Mi._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:d})=>{0===s?(o!==Mi._e&&n(new ce(ns(i)),o),o=d,i=u):o=Mi._e}).next(()=>{o!==Mi._e&&n(new ce(ns(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hv(t,e){return eu(t).put((i=t.currentSequenceNumber,{targetId:0,path:Sr(e.path),sequenceNumber:i}));var i}class oV{constructor(){this.changes=new js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ac(e).put(r)}removeEntry(e,n,r){return Ac(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Fv(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Qt.newInvalidDocument(n);return Ac(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Dg(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:Qt.newInvalidDocument(n)};return Ac(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Dg(n))},(i,o)=>{r={document:this.tr(n,o),size:jv(o)}}).next(()=>r)}getEntries(e,n){let r=ai();return this.rr(e,n,(i,o)=>{const s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=ai(),i=new $t(ce.comparator);return this.rr(e,n,(o,s)=>{const a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,jv(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return x.resolve();let i=new xt(cV);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(Dg(i.first()),Dg(i.last())),s=i.getIterator();let a=s.getNext();return Ac(e).Y({index:"documentKeyIndex",range:o},(u,d,f)=>{const g=ce.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&cV(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,d),a=s.hasNext()?s.getNext():null),a?f.U(Dg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Fv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ac(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{o?.incrementDocumentReadCount(d.length);let f=ai();for(const g of d){const _=this.tr(ce.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(lg(n,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,n,r,i){let o=ai();const s=uV(n,r),a=uV(n,Pi.max());return Ac(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,d,f)=>{const g=this.tr(ce.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(g.key,g),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new YK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return aV(e).get("remoteDocumentGlobalKey").next(n=>(De(!!n),n))}er(e,n){return aV(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function FK(t,e){let n;if(e.document)n=PF(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),i=wc(e.noDocument.readTime);n=Qt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return me();{const r=ce.fromSegments(e.unknownDocument.path),i=wc(e.unknownDocument.version);n=Qt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new on(i[0],i[1]);return Se.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Se.min()))return r}return Qt.newInvalidDocument(e)}}function sV(t){return new QK(t)}class YK extends oV{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new js(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new xt((o,s)=>He(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=FF(this._r.serializer,s);i=i.add(o.path.popLast());const d=jv(u);r+=d-a.size,n.push(this._r.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=FF(this._r.serializer,s.convertToNoDocument(Se.min()));n.push(this._r.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function aV(t){return rr(t,"remoteDocumentGlobal")}function Ac(t){return rr(t,"remoteDocumentsV14")}function Dg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uV(t,e){const n=e.documentKey.path.toArray();return[t,Fv(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cV(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=He(n[o],r[o]),i)return i;return i=He(n.length,r.length),i||(i=He(n[n.length-2],r[r.length-2]),i||He(n[n.length-1],r[r.length-1]))}class JK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class lV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&pg(r.mutation,i,si.empty(),on.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ye()){const i=is();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=dg();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ai();const s=hg(),a=hg();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof $s)?o=o.insert(d.key,d):void 0!==f?(s.set(d.key,f.mutation.getFieldMask()),pg(f.mutation,d,f.mutation.getFieldMask(),on.now())):s.set(d.key,si.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,f)=>s.set(d,f)),n.forEach((d,f)=>{var g;return a.set(d,new JK(f,null!==(g=s.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=hg();let i=new $t((s,a)=>s-a),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let f=r.get(u)||si.empty();f=a.applyToLocalView(d,f),r.set(u,f);const g=(i.get(a.batchId)||Ye()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,g=tF();f.forEach(_=>{if(!o.has(_)){const y=lF(n.get(_),r.get(_));null!==y&&g.set(_,y),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ce.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):QC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(is());let a=-1,u=o;return s.next(d=>x.forEach(d,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(f)?x.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,Ye())).next(f=>({batchId:a,changes:eF(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=dg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=dg();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{const d=(g=n,_=u.child(o),new Bs(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{s=s.insert(g,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,d)=>{const f=d.getKey();null===s.get(f)&&(s=s.insert(f,Qt.newInvalidDocument(f)))});let a=dg();return s.forEach((u,d)=>{const f=o.get(u);void 0!==f&&pg(f.mutation,d,si.empty(),on.now()),lg(n,d)&&(a=a.insert(u,d))}),a})}}class XK{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return x.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:bn(i.createTime)}),x.resolve();var i}getNamedQuery(e,n){return x.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:cD(i.bundledQuery),readTime:bn(i.readTime)}),x.resolve();var i}}class eQ{constructor(){this.overlays=new $t(ce.comparator),this.lr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){const r=is();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){const i=is(),o=n.length+1,s=new ce(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new $t((d,f)=>d-f);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=o.get(d.largestBatchId);null===f&&(f=is(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=is(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return x.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new nD(n,r));let o=this.lr.get(n);void 0===o&&(o=Ye(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}}class mD{constructor(){this.hr=new xt(ir.Pr),this.Ir=new xt(ir.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new ir(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new ir(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new ce(new ft([])),r=new ir(n,e),i=new ir(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new ce(new ft([])),r=new ir(n,e),i=new ir(n,e+1);let o=Ye();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new ir(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class ir{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return ce.comparator(e.key,n.key)||He(e.gr,n.gr)}static Tr(e,n){return He(e.gr,n.gr)||ce.comparator(e.key,n.key)}}class tQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new xt(ir.Pr)}checkEmpty(e){return x.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.pr;this.pr++;const s=new eD(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.yr=this.yr.add(new ir(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ir(n,0),i=new ir(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{const a=this.wr(s.gr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(He);return n.forEach(i=>{const o=new ir(i,0),s=new ir(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),x.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ce.isDocumentKey(o)||(o=o.child(""));const s=new ir(new ce(o),0);let a=new xt(He);return this.yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.gr)),!0)},s),x.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){De(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return x.forEach(n.mutations,i=>{const o=new ir(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new ir(n,0),i=this.yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return x.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class nQ{constructor(e){this.Cr=e,this.docs=new $t(ce.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=ai();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Qt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ai();const s=n.path,a=new ce(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||BC(pL(f),r)<=0||(i.has(f.key)||lg(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){me()}vr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rQ(this)}getSize(e){return x.resolve(this.size)}}class rQ extends oV{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class iQ{constructor(e){this.persistence=e,this.Fr=new js(n=>yc(n),ug),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Mr=0,this.Or=new mD,this.targetCount=0,this.Nr=bc.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),x.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new bc(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.kn(n),x.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),x.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Or.containsKey(n))}}class _D{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Mi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new iQ(this),this.indexManager=new zK,this.remoteDocumentCache=new nQ(r=>this.referenceDelegate.Qr(r)),this.serializer=new LF(n),this.Kr=new XK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new tQ(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new oQ(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class oQ extends mL{constructor(e){super(),this.currentSequenceNumber=e}}class zv{constructor(e){this.persistence=e,this.Gr=new mD,this.zr=null}static jr(e){return new zv(e)}get Hr(){if(this.zr)return this.zr;throw me()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Hr,r=>{const i=ce.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,Se.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return x.or([()=>x.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class sQ{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Ev("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IL,{unique:!0}),u.createObjectStore("documentMutations"),dV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=x.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),dV(e)),s=s.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,d){return d.store("mutations").W().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IL,{unique:!0});const g=d.store("mutations"),_=f.map(y=>g.put(y));return x.waitFor(_)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:qZ});d.createIndex("collectionPathOverlayIndex",GZ,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",WZ,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:OZ});d.createIndex("documentKeyIndex",kZ),d.createIndex("collectionGroupIndex",LZ)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:jZ}).createIndex("sequenceNumberIndex",$Z,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:HZ}).createIndex("documentKeyIndex",zZ,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=jv(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>x.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>x.forEach(a,u=>{De(u.userId===o.userId);const d=Tc(this.serializer,u);return JF(e,o.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const u=new ft(s),d=[0,Sr(u)];o.push(n.get(d).next(f=>f?x.resolve():n.put({targetId:0,path:Sr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>x.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:BZ});const r=n.store("collectionParents"),i=new gD,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Sr(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const u=new ft(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],d)=>{const f=ns(a);return o(f.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const o=Eg(i),s=VF(this.serializer,o);return n.put(s)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),u=(g=s,g.document?new ce(ft.fromString(g.document.name).popFirst(5)):g.noDocument?ce.fromSegments(g.noDocument.path):g.unknownDocument?ce.fromSegments(g.unknownDocument.path):me()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>x.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=sV(this.serializer),o=new _D(zv.jr,this.serializer.ut);return r.W().next(s=>{const a=new Map;return s.forEach(u=>{var d;let f=null!==(d=a.get(u.userId))&&void 0!==d?d:Ye();Tc(this.serializer,u).keys().forEach(g=>f=f.add(g)),a.set(u.userId,f)}),x.forEach(a,(u,d)=>{const f=new nr(d),g=Vv.ct(this.serializer,f),_=o.getIndexManager(f),y=$v.ct(f,this.serializer,_,o.referenceDelegate);return new lV(i,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new HC(n,Mi._e),u).next()})})}}function dV(t){t.createObjectStore("targetDocuments",{keyPath:VZ}).createIndex("documentTargetsIndex",UZ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",FZ,{unique:!0}),t.createObjectStore("targetGlobal")}const yD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vD{constructor(e,n,r,i,o,s,a,u,d,f,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=d,this._i=f,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!vD.D())throw new J(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KK(this,i),this.Ii=n+"main",this.serializer=new LF(u),this.Ti=new wo(this.Ii,this.ai,new sQ(this.serializer)),this.qr=new GK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sV(this.serializer),this.Kr=new VK,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===f&&Dn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(k.FAILED_PRECONDITION,yD);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Mi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,W.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,W.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,W.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Ha(e))return ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return bg(e).get("owner").next(n=>x.resolve(this.wi(n)))}Si(e){return Gv(e).delete(this.clientId)}bi(){var e=this;return(0,W.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=rr(r,"clientMetadata");return i.W().next(o=>{const s=e.Ci(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return x.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?x.resolve(!0):bg(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new J(k.FAILED_PRECONDITION,yD);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gv(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ee("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,W.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new HC(n,Mi._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Gv(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return $v.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qK(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Vv.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){ee("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(u=this.ai)?KZ:14===u?CL:13===u?TL:12===u?ZZ:11===u?wL:void me();var u;let s;return this.Ti.runTransaction(e,i,o,a=>(s=new HC(a,this.Lr?this.Lr.next():Mi._e),"readwrite-primary"===n?this.fi(s).next(u=>!!u||this.gi(s)).next(u=>{if(!u)throw Dn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new J(k.FAILED_PRECONDITION,gL);return r(s)}).next(u=>this.yi(s).next(()=>u)):this.Li(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return bg(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(k.FAILED_PRECONDITION,yD)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bg(e).put("owner",n)}static D(){return wo.D()}pi(e){const n=bg(e);return n.get("owner").next(r=>this.wi(r)?(ee("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(Dn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,kt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return ee("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Dn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bg(t){return rr(t,"owner")}function Gv(t){return rr(t,"clientMetadata")}function ID(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class ED{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ye(),i=Ye();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new ED(e,n.fromCache,r,i)}}class aQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hV{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new aQ;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Ld()<=Jo.in.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",qd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),x.resolve()):(Ld()<=Jo.in.DEBUG&&ee("QueryEngine","Query:",qd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Ld()<=Jo.in.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",qd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(n))):x.resolve())}zi(e,n){if(ZL(n))return x.resolve(null);let r=Gr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Mv(n,null,"F"),r=Gr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ye(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Yi(n,a);return this.Zi(n,d,s,u.readTime)?this.zi(e,Mv(n,null,"F")):this.Xi(e,d,n,u)}))})))}ji(e,n,r,i){return ZL(n)||i.isEqual(Se.min())?x.resolve(null):this.Gi.getDocuments(e,r).next(o=>{const s=this.Yi(n,o);return this.Zi(n,s,r,i)?x.resolve(null):(Ld()<=Jo.in.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qd(n)),this.Xi(e,s,n,fL(i,-1)).next(a=>a))})}Yi(e,n){let r=new xt(JL(e));return n.forEach((i,o)=>{lg(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return Ld()<=Jo.in.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",qd(n)),this.Gi.getDocumentsMatchingQuery(e,n,Pi.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class uQ{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new $t(He),this.ns=new js(o=>yc(o),ug),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lV(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function fV(t,e,n,r){return new uQ(t,e,n,r)}function pV(t,e){return wD.apply(this,arguments)}function wD(){return wD=(0,W.Z)(function*(t,e){const n=ue(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=Ye();for(const d of i){s.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of o){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({_s:d,removedBatchIds:s,addedBatchIds:a}))})})}),wD.apply(this,arguments)}function gV(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function mV(t,e,n){let r=Ye(),i=Ye();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ai();return n.forEach((a,u)=>{const d=o.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{us:s,cs:i}})}function dQ(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nh(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new Hs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function rh(t,e,n){return TD.apply(this,arguments)}function TD(){return TD=(0,W.Z)(function*(t,e,n){const r=ue(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ha(s))throw s;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),TD.apply(this,arguments)}function Wv(t,e,n){const r=ue(t);let i=Se.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,f){const g=ue(u),_=g.ns.get(f);return void 0!==_?x.resolve(g.ts.get(_)):g.qr.getTargetData(d,f)}(r,s,Gr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:Se.min(),n?o:Ye())).next(a=>(vV(r,YL(e),a),{documents:a,ls:o})))}function _V(t,e){const n=ue(t),r=ue(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function yV(t,e){const n=ue(t),r=n.rs.get(e)||Se.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,fL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(vV(n,e,i),i))}function vV(t,e,n){let r=t.rs.get(e)||Se.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function CD(){return CD=(0,W.Z)(function*(t,e,n,r){const i=ue(t);let o=Ye(),s=ai();for(const d of n){const f=e.hs(d.metadata.name);d.document&&(o=o.add(f));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),s=s.insert(f,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield nh(i,(f=r,Gr(Hd(ft.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>mV(d,a,s).next(f=>(a.apply(d),f)).next(f=>i.qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.qr.addMatchingKeys(d,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.us,f.cs)).next(()=>f.us)))}),CD.apply(this,arguments)}function fQ(t,e){return DD.apply(this,arguments)}function DD(){return DD=(0,W.Z)(function*(t,e,n=Ye()){const r=yield nh(t,Gr(cD(e.bundledQuery))),i=ue(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=bn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(o,e);const a=r.withResumeToken(qn.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(o,a).next(()=>i.qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(o,e))})}),DD.apply(this,arguments)}function IV(t,e){return`firestore_clients_${t}_${e}`}function EV(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function bD(t,e){return`firestore_targets_${t}_${e}`}class Zv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new J(i.error.code,i.error.message))),s?new Zv(e,n,i.state,o):(Dn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ag{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new J(r.error.code,r.error.message))),o?new Ag(e,r.state,i):(Dn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=JC();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=yL(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new Kv(e,o):(Dn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class AD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new AD(n.clientId,n.onlineState):(Dn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class SD{constructor(){this.activeTargetIds=JC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RD{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new $t(He),this.started=!1,this.ps=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=IV(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new SD),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,W.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const o=e.getItem(IV(e.persistenceKey,i));if(o){const s=Kv.Ts(i,o);s&&(e.gs=e.gs.insert(s.clientId,s))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(bD(this.persistenceKey,e));if(r){const i=Ag.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bD(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ee("SharedClientState","READ",e,n),n}setItem(e,n){ee("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ee("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Dn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,W.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(s){let a=Mi._e;if(null!=s)try{const u=JSON.parse(s);De("number"==typeof u),a=u}catch(u){Dn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Mi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Js(o)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new Zv(this.currentUser,e,n,r),o=EV(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){const n=EV(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=bD(this.persistenceKey,e),o=new Ag(e,n,r);this.setItem(i,o.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return Kv.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return Zv.Ts(new nr(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Ag.Ts(i,n)}Ms(e){return AD.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,W.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=JC();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class wV{constructor(){this.eo=new SD,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new SD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pQ{ro(e){}shutdown(){}}class TV{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Qv=null;function PD(){return null===Qv?Qv=268435456+Math.round(2147483648*Math.random()):Qv++,"0x"+Qv.toString(16)}const gQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mQ{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Pr="WebChannelConnection";class _Q extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){const a=PD(),u=this.So(n,r);ee("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,o,s),this.Do(n,u,d,i).then(f=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw oi("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}Co(n,r,i,o,s,a){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+kd,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){return`${this.mo}/v1/${r}:${gQ[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const o=PD();return new Promise((s,a)=>{const u=new pZ;u.setWithCredentials(!0),u.listenOnce(hZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case FC.NO_ERROR:const f=u.getResponseJson();ee(Pr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case FC.TIMEOUT:ee(Pr,`RPC '${e}' ${o} timed out`),a(new J(k.DEADLINE_EXCEEDED,"Request time out"));break;case FC.HTTP_ERROR:const g=u.getStatus();if(ee(Pr,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const I=function(S){const N=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(N)>=0?N:k.UNKNOWN}(y.status);a(new J(I,y.message))}else a(new J(k.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(k.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{ee(Pr,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);ee(Pr,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}vo(e,n,r){const i=PD(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=lZ(),a=dZ(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");ee(Pr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=s.createWebChannel(f,u);let _=!1,y=!1;const I=new mQ({co:S=>{y?ee(Pr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(ee(Pr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),ee(Pr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},lo:()=>g.close()}),C=(S,N,R)=>{S.listen(N,U=>{try{R(U)}catch(ne){setTimeout(()=>{throw ne},0)}})};return C(g,Iv.EventType.OPEN,()=>{y||ee(Pr,`RPC '${e}' stream ${i} transport opened.`)}),C(g,Iv.EventType.CLOSE,()=>{y||(y=!0,ee(Pr,`RPC '${e}' stream ${i} transport closed`),I.Ro())}),C(g,Iv.EventType.ERROR,S=>{y||(y=!0,oi(Pr,`RPC '${e}' stream ${i} transport errored:`,S),I.Ro(new J(k.UNAVAILABLE,"The operation could not be completed")))}),C(g,Iv.EventType.MESSAGE,S=>{var N;if(!y){const R=S.data[0];De(!!R);const ne=R.error||(null===(N=R[0])||void 0===N?void 0:N.error);if(ne){ee(Pr,`RPC '${e}' stream ${i} received error:`,ne);const oe=ne.status;let Oe=function(nA){const W2=kn[nA];if(void 0!==W2)return mF(W2)}(oe),zt=ne.message;void 0===Oe&&(Oe=k.INTERNAL,zt="Unknown error status: "+oe+" with message "+ne.message),y=!0,I.Ro(new J(Oe,zt)),g.close()}else ee(Pr,`RPC '${e}' stream ${i} received:`,R),I.Vo(R)}}),C(a,fZ.STAT_EVENT,S=>{S.stat===aL.PROXY?ee(Pr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===aL.NOPROXY&&ee(Pr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.Ao()},0),I}}function CV(){return typeof window<"u"?window:null}function Yv(){return typeof document<"u"?document:null}function Sg(t){return new AK(t,!0)}class MD{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class DV{constructor(e,n,r,i,o,s,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new MD(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,W.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,W.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,W.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Dn(n.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===k.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new J(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,W.Z)(function*(){e.state=0,e.start()}))}o_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yQ extends DV{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function PK(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:me(),i=e.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(De(void 0===f||"string"==typeof f),qn.fromBase64String(f||"")):(De(void 0===f||f instanceof Uint8Array),qn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){const f=void 0===d.code?k.UNKNOWN:mF(d.code);return new J(f,d.message||"")}(s);n=new EF(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=os(t,r.document.name),o=bn(r.document.updateTime),s=r.document.createTime?bn(r.document.createTime):Se.min(),a=new gr({mapValue:{fields:r.document.fields}}),u=Qt.newFoundDocument(i,o,s,a);n=new Lv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=os(t,r.document),o=r.readTime?bn(r.readTime):Se.min(),s=Qt.newNoDocument(i,o);n=new Lv([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=os(t,r.document);n=new Lv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return me();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new EK(i,o);n=new IF(r.targetId,s)}}var d;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Se.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Se.min():s.readTime?bn(s.readTime):Se.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=vg(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=Rv(u)?{documents:MF(o,u)}:{query:uD(o,u)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=DF(o,s.resumeToken);const d=iD(o,s.expectedCount);null!==d&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(Se.min())>0){a.readTime=Qd(o,s.snapshotVersion.toTimestamp());const d=iD(o,s.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function xK(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=vg(this.serializer),n.removeTarget=e,this.e_(n)}}class vQ extends DV{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function MK(t,e){return t&&t.length>0?(De(void 0!==e),t.map(n=>function(i,o){let s=bn(i.updateTime?i.updateTime:o);return s.isEqual(Se.min())&&(s=bn(o)),new _K(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.I_(r,n)}return De(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=vg(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ig(this.serializer,r))};this.e_(n)}}class IQ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new J(k.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(k.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(k.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class wQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Dn(n),this.f_=!1):ee("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class TQ{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(a=>{r.enqueueAndForget((0,W.Z)(function*(){var u;tu(s)&&(ee("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,W.Z)(function*(f){const g=ue(f);g.C_.add(4),yield ih(g),g.M_.set("Unknown"),g.C_.delete(4),yield Rg(g)}),function d(f){return u.apply(this,arguments)})(s))}))}),this.M_=new wQ(r,i)}}function Rg(t){return ND.apply(this,arguments)}function ND(){return ND=(0,W.Z)(function*(t){if(tu(t))for(const e of t.v_)yield e(!0)}),ND.apply(this,arguments)}function ih(t){return OD.apply(this,arguments)}function OD(){return OD=(0,W.Z)(function*(t){for(const e of t.v_)yield e(!1)}),OD.apply(this,arguments)}function Jv(t,e){const n=ue(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),FD(n)?LD(n):sh(n).Ho()&&kD(n,e))}function Pg(t,e){const n=ue(t),r=sh(n);n.D_.delete(e),r.Ho()&&bV(n,e),0===n.D_.size&&(r.Ho()?r.Zo():tu(n)&&n.M_.set("Unknown"))}function kD(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sh(t).u_(e)}function bV(t,e){t.x_.Oe(e),sh(t).c_(e)}function LD(t){t.x_=new TK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),sh(t).start(),t.M_.g_()}function FD(t){return tu(t)&&!sh(t).jo()&&t.D_.size>0}function tu(t){return 0===ue(t).C_.size}function AV(t){t.x_=void 0}function CQ(t){return VD.apply(this,arguments)}function VD(){return VD=(0,W.Z)(function*(t){t.D_.forEach((e,n)=>{kD(t,e)})}),VD.apply(this,arguments)}function DQ(t,e){return UD.apply(this,arguments)}function UD(){return UD=(0,W.Z)(function*(t,e){AV(t),FD(t)?(t.M_.w_(e),LD(t)):t.M_.set("Unknown")}),UD.apply(this,arguments)}function bQ(t,e,n){return BD.apply(this,arguments)}function BD(){return BD=(0,W.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof EF&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.D_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.D_.delete(u),o.x_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xv(t,r)}else if(e instanceof Lv?t.x_.$e(e):e instanceof IF?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Se.min()))try{const r=yield gV(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.D_.get(d);f&&o.D_.set(d,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,d)=>{const f=o.D_.get(u);if(!f)return;o.D_.set(u,f.withResumeToken(qn.EMPTY_BYTE_STRING,f.snapshotVersion)),bV(o,u);const g=new Hs(f.target,u,d,f.sequenceNumber);kD(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),yield Xv(t,r)}var r}),BD.apply(this,arguments)}function Xv(t,e,n){return jD.apply(this,arguments)}function jD(){return jD=(0,W.Z)(function*(t,e,n){if(!Ha(e))throw e;t.C_.add(1),yield ih(t),t.M_.set("Offline"),n||(n=()=>gV(t.localStore)),t.asyncQueue.enqueueRetryable((0,W.Z)(function*(){ee("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Rg(t)}))}),jD.apply(this,arguments)}function SV(t,e){return e().catch(n=>Xv(t,n,e))}function oh(t){return $D.apply(this,arguments)}function $D(){return $D=(0,W.Z)(function*(t){const e=ue(t),n=nu(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;AQ(e);)try{const i=yield dQ(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,SQ(e,i)}catch(i){yield Xv(e,i)}RV(e)&&PV(e)}),$D.apply(this,arguments)}function AQ(t){return tu(t)&&t.b_.length<10}function SQ(t,e){t.b_.push(e);const n=nu(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function RV(t){return tu(t)&&!nu(t).jo()&&t.b_.length>0}function PV(t){nu(t).start()}function RQ(t){return HD.apply(this,arguments)}function HD(){return HD=(0,W.Z)(function*(t){nu(t).E_()}),HD.apply(this,arguments)}function PQ(t){return zD.apply(this,arguments)}function zD(){return zD=(0,W.Z)(function*(t){const e=nu(t);for(const n of t.b_)e.P_(n.mutations)}),zD.apply(this,arguments)}function MQ(t,e,n){return qD.apply(this,arguments)}function qD(){return qD=(0,W.Z)(function*(t,e,n){const r=t.b_.shift(),i=tD.from(r,e,n);yield SV(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield oh(t)}),qD.apply(this,arguments)}function xQ(t,e){return GD.apply(this,arguments)}function GD(){return GD=(0,W.Z)(function*(t,e){var n;e&&nu(t).h_&&(yield(n=(0,W.Z)(function*(i,o){if(gF(a=o.code)&&a!==k.ABORTED){const s=i.b_.shift();nu(i).Yo(),yield SV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield oh(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),RV(t)&&PV(t)}),GD.apply(this,arguments)}function MV(t,e){return WD.apply(this,arguments)}function WD(){return WD=(0,W.Z)(function*(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=tu(n);n.C_.add(3),yield ih(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Rg(n)}),WD.apply(this,arguments)}function ZD(t,e){return KD.apply(this,arguments)}function KD(){return KD=(0,W.Z)(function*(t,e){const n=ue(t);e?(n.C_.delete(2),yield Rg(n)):e||(n.C_.add(2),yield ih(n),n.M_.set("Unknown"))}),KD.apply(this,arguments)}function sh(t){return t.O_||(t.O_=function(n,r,i){const o=ue(n);return o.A_(),new yQ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:CQ.bind(null,t),Io:DQ.bind(null,t),a_:bQ.bind(null,t)}),t.v_.push(function(){var e=(0,W.Z)(function*(n){n?(t.O_.Yo(),FD(t)?LD(t):t.M_.set("Unknown")):(yield t.O_.stop(),AV(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function nu(t){return t.N_||(t.N_=function(n,r,i){const o=ue(n);return o.A_(),new vQ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:RQ.bind(null,t),Io:xQ.bind(null,t),T_:PQ.bind(null,t),I_:MQ.bind(null,t)}),t.v_.push(function(){var e=(0,W.Z)(function*(n){n?(t.N_.Yo(),yield oh(t)):(yield t.N_.stop(),t.b_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class QD{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new QD(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ah(t,e){if(Dn("AsyncQueue",`${e}: ${t}`),Ha(t))return new J(k.UNAVAILABLE,`${e}: ${t}`);throw t}class uh{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=dg(),this.sortedSet=new $t(this.comparator)}static emptySet(e){return new uh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof uh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new uh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class xV{constructor(){this.B_=new $t(ce.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):me():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ch{constructor(e,n,r,i,o,s,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new ch(e,n,uh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class NQ{constructor(){this.k_=void 0,this.listeners=[]}}class OQ{constructor(){this.queries=new js(e=>QL(e),cg),this.onlineState="Unknown",this.q_=new Set}}function YD(t,e){return JD.apply(this,arguments)}function JD(){return JD=(0,W.Z)(function*(t,e){const n=ue(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new NQ),i)try{o.k_=yield n.onListen(r)}catch(s){const a=ah(s,`Initialization of query '${qd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&tb(n)}),JD.apply(this,arguments)}function XD(t,e){return eb.apply(this,arguments)}function eb(){return eb=(0,W.Z)(function*(t,e){const n=ue(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),eb.apply(this,arguments)}function kQ(t,e){const n=ue(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.listeners)a.K_(i)&&(r=!0);s.k_=i}}r&&tb(n)}function LQ(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(e)}function tb(t){t.q_.forEach(e=>{e.next()})}class nb{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ch(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=ch.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class FQ{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class NV{constructor(e){this.serializer=e}hs(e){return os(this.serializer,e)}Ps(e){return e.metadata.exists?PF(this.serializer,e.document,!1):Qt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return bn(e)}}class VQ{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=OV(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=ft.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new NV(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.hs(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||Ye()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,W.Z)(function*(){const n=yield function hQ(t,e,n,r){return CD.apply(this,arguments)}(e.localStore,new NV(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield fQ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function OV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class kV{constructor(e){this.key=e}}class LV{constructor(e){this.key=e}}class FV{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ye(),this.mutatedKeys=Ye(),this._a=JL(e),this.aa=new uh(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new xV,i=n?n.aa:this.aa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const _=i.get(f),y=lg(this.query,g)?g:null,I=!!_&&this.mutatedKeys.has(_.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;_&&y?_.data.isEqual(y.data)?I!==C&&(r.track({type:3,doc:y}),S=!0):this.ha(_,y)||(r.track({type:2,doc:y}),S=!0,(u&&this._a(y,u)>0||d&&this._a(y,d)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),S=!0):_&&!y&&(r.track({type:1,doc:_}),S=!0,(u||d)&&(a=!0)),S&&(y?(s=s.add(y),o=C?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const f="F"===this.query.limitType?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{aa:s,la:r,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((f,g)=>function(y,I){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return C(y)-C(I)}(f.type,g.type)||this._a(f.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,d=u!==this.sa;return this.sa=u,0!==s.length||d?{snapshot:new ch(this.query,e.aa,o,s,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new xV,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ye(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new LV(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new kV(r))}),n}da(e){this.ia=e.ls,this.oa=Ye();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return ch.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class UQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BQ{constructor(e){this.key=e,this.Ra=!1}}class jQ{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new js(a=>QL(a),cg),this.fa=new Map,this.ga=new Set,this.pa=new $t(ce.comparator),this.ya=new Map,this.wa=new mD,this.Sa={},this.ba=new Map,this.Da=bc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function $Q(t,e){return rb.apply(this,arguments)}function rb(){return rb=(0,W.Z)(function*(t,e){const n=bb(t);let r,i;const o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const s=yield nh(n.localStore,Gr(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield ib(n,e,r,"current"===a,s.resumeToken),n.isPrimaryClient&&Jv(n.remoteStore,s)}return i}),rb.apply(this,arguments)}function ib(t,e,n,r,i){return ob.apply(this,arguments)}function ob(){return ob=(0,W.Z)(function*(t,e,n,r,i){t.va=(g,_,y)=>{return(I=(0,W.Z)(function*(S,N,R,U){let ne=N.view.ca(R);ne.Zi&&(ne=yield Wv(S.localStore,N.query,!1).then(({documents:ui})=>N.view.ca(ui,ne)));const oe=U&&U.targetChanges.get(N.targetId),Oe=U&&null!=U.targetMismatches.get(N.targetId),zt=N.view.applyChanges(ne,S.isPrimaryClient,oe,Oe);return gb(S,N.targetId,zt.Ta),zt.snapshot}),function C(S,N,R,U){return I.apply(this,arguments)})(t,g,_,y);var I};const o=yield Wv(t.localStore,e,!0),s=new FV(e,o.ls),a=s.ca(o.documents),u=_g.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=s.applyChanges(a,t.isPrimaryClient,u);gb(t,n,d.Ta);const f=new UQ(e,n,s);return t.ma.set(e,f),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),ob.apply(this,arguments)}function HQ(t,e){return sb.apply(this,arguments)}function sb(){return sb=(0,W.Z)(function*(t,e){const n=ue(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!cg(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield rh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Pg(n.remoteStore,r.targetId),lh(n,r.targetId)}).catch($a))):(lh(n,r.targetId),yield rh(n.localStore,r.targetId,!0))}),sb.apply(this,arguments)}function ab(){return ab=(0,W.Z)(function*(t,e,n){const r=Ab(t);try{const i=yield function(s,a){const u=ue(s),d=on.now(),f=a.reduce((y,I)=>y.add(I.key),Ye());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=ai(),C=Ye();return u.ss.getEntries(y,f).next(S=>{I=S,I.forEach((N,R)=>{R.isValidDocument()||(C=C.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,I)).next(S=>{g=S;const N=[];for(const R of a){const U=vK(R,g.get(R.key).overlayedDocument);null!=U&&N.push(new $s(R.key,U,kL(U.value.mapValue),sn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,N,a)}).next(S=>{_=S;const N=S.applyToLocalDocumentSet(g,C);return u.documentOverlayCache.saveOverlays(y,S.batchId,N)})}).then(()=>({batchId:_.batchId,changes:eF(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let d=s.Sa[s.currentUser.toKey()];d||(d=new $t(He)),d=d.insert(a,u),s.Sa[s.currentUser.toKey()]=d}(r,i.batchId,n),yield zs(r,i.changes),yield oh(r.remoteStore)}catch(i){const o=ah(i,"Failed to persist write");n.reject(o)}}),ab.apply(this,arguments)}function VV(t,e){return ub.apply(this,arguments)}function ub(){return ub=(0,W.Z)(function*(t,e){const n=ue(t);try{const r=yield function lQ(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((f,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(o,f.removedDocuments,g).next(()=>n.qr.addMatchingKeys(o,f.addedDocuments,g)));let y=_.withSequenceNumber(o.currentSequenceNumber);var C,S,N;null!==e.targetMismatches.get(g)?y=y.withResumeToken(qn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(g,y),S=y,N=f,(0===(C=_).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(o,y))});let u=ai(),d=Ye();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(mV(o,s,e.documentUpdates).next(f=>{u=f.us,d=f.cs})),!r.isEqual(Se.min())){const f=n.qr.getLastRemoteSnapshotVersion(o).next(g=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.ts=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.ya.get(o);s&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?De(s.Ra):i.removedDocuments.size>0&&(De(s.Ra),s.Ra=!1))}),yield zs(n,r,e)}catch(r){yield $a(r)}}),ub.apply(this,arguments)}function UV(t,e,n){const r=ue(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=ue(s);u.onlineState=a;let d=!1;u.queries.forEach((f,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&tb(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qQ(t,e,n){return cb.apply(this,arguments)}function cb(){return cb=(0,W.Z)(function*(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),o=i&&i.key;if(o){let s=new $t(ce.comparator);s=s.insert(o,Qt.newNoDocument(o,Se.min()));const a=Ye().add(o),u=new mg(Se.min(),new Map,new $t(He),s,a);yield VV(r,u),r.pa=r.pa.remove(o),r.ya.delete(e),mb(r)}else yield rh(r.localStore,e,!1).then(()=>lh(r,e,n)).catch($a)}),cb.apply(this,arguments)}function GQ(t,e){return lb.apply(this,arguments)}function lb(){return lb=(0,W.Z)(function*(t,e){const n=ue(t),r=e.batch.batchId;try{const i=yield function cQ(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const g=d.batch,_=g.keys();let y=x.resolve();return _.forEach(I=>{y=y.next(()=>f.getEntry(u,I)).next(C=>{const S=d.docVersions.get(I);De(null!==S),C.version.compareTo(S)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ye();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);pb(n,r,null),fb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield zs(n,i)}catch(i){yield $a(i)}}),lb.apply(this,arguments)}function WQ(t,e,n){return db.apply(this,arguments)}function db(){return db=(0,W.Z)(function*(t,e,n){const r=ue(t);try{const i=yield function(s,a){const u=ue(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(De(null!==g),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);pb(r,e,n),fb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield zs(r,i)}catch(i){yield $a(i)}}),db.apply(this,arguments)}function hb(){return hb=(0,W.Z)(function*(t,e){const n=ue(t);tu(n.remoteStore)||ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=ue(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=ah(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),hb.apply(this,arguments)}function fb(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function pb(t,e,n){const r=ue(t);let i=r.Sa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function lh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||BV(t,r)})}function BV(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Pg(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),mb(t))}function gb(t,e,n){for(const r of n)r instanceof kV?(t.wa.addReference(r.key,e),KQ(t,r)):r instanceof LV?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||BV(t,r.key)):me()}function KQ(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.ga.add(r),mb(t))}function mb(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new ce(ft.fromString(e)),r=t.Da.next();t.ya.set(r,new BQ(n)),t.pa=t.pa.insert(n,r),Jv(t.remoteStore,new Hs(Gr(Hd(n.path)),r,"TargetPurposeLimboResolution",Mi._e))}}function zs(t,e,n){return _b.apply(this,arguments)}function _b(){return _b=(0,W.Z)(function*(t,e,n){const r=ue(t),i=[],o=[],s=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{s.push(r.va(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const f=ED.Qi(u.targetId,d);o.push(f)}}))}),yield Promise.all(s),r.Va.a_(i),yield(a=(0,W.Z)(function*(d,f){const g=ue(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>x.forEach(f,y=>x.forEach(y.ki,I=>g.persistence.referenceDelegate.addReference(_,y.targetId,I)).next(()=>x.forEach(y.qi,I=>g.persistence.referenceDelegate.removeReference(_,y.targetId,I)))))}catch(_){if(!Ha(_))throw _;ee("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const I=g.ts.get(y),S=I.withLastLimboFreeSnapshotVersion(I.snapshotVersion);g.ts=g.ts.insert(y,S)}}}),function u(d,f){return a.apply(this,arguments)})(r.localStore,o))}),_b.apply(this,arguments)}function QQ(t,e){return yb.apply(this,arguments)}function yb(){return yb=(0,W.Z)(function*(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=yield pV(n.localStore,e);n.currentUser=e,(o=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new J(k.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zs(n,r._s)}var o}),yb.apply(this,arguments)}function YQ(t,e){const n=ue(t),r=n.ya.get(e);if(r&&r.Ra)return Ye().add(r.key);{let i=Ye();const o=n.fa.get(e);if(!o)return i;for(const s of o){const a=n.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function JQ(t,e){return vb.apply(this,arguments)}function vb(){return vb=(0,W.Z)(function*(t,e){const n=ue(t),r=yield Wv(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&gb(n,e.targetId,i.Ta),i}),vb.apply(this,arguments)}function XQ(t,e){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,W.Z)(function*(t,e){const n=ue(t);return yV(n.localStore,e).then(r=>zs(n,r))}),Ib.apply(this,arguments)}function eY(t,e,n,r){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,W.Z)(function*(t,e,n,r){const i=ue(t),o=yield function(a,u){const d=ue(a),f=ue(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.Cn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):x.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===n?yield oh(i.remoteStore):"acknowledged"===n||"rejected"===n?(pb(i,e,r||null),fb(i,e),u=e,ue(ue(i.localStore).mutationQueue).Fn(u)):me(),yield zs(i,o)):ee("SyncEngine","Cannot apply mutation batch with id: "+e)}),Eb.apply(this,arguments)}function wb(){return wb=(0,W.Z)(function*(t,e){const n=ue(t);if(bb(n),Ab(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield jV(n,r.toArray());n.Ca=!0,yield ZD(n.remoteStore,!0);for(const o of i)Jv(n.remoteStore,o)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(lh(n,s),rh(n.localStore,s,!0))),Pg(n.remoteStore,s)}),yield i,yield jV(n,r),function(s){const a=ue(s);a.ya.forEach((u,d)=>{Pg(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new $t(ce.comparator)}(n),n.Ca=!1,yield ZD(n.remoteStore,!1)}}),wb.apply(this,arguments)}function jV(t,e,n){return Tb.apply(this,arguments)}function Tb(){return Tb=(0,W.Z)(function*(t,e,n){const r=ue(t),i=[],o=[];for(const s of e){let a;const u=r.fa.get(s);if(u&&0!==u.length){a=yield nh(r.localStore,Gr(u[0]));for(const d of u){const f=r.ma.get(d),g=yield JQ(r,f);g.snapshot&&o.push(g.snapshot)}}else{const d=yield _V(r.localStore,s);a=yield nh(r.localStore,d),yield ib(r,$V(d),s,!1,a.resumeToken)}i.push(a)}return r.Va.a_(o),i}),Tb.apply(this,arguments)}function $V(t){return WL(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function nY(t){return n=ue(t).localStore,ue(ue(n).persistence).Bi();var n}function rY(t,e,n,r){return Cb.apply(this,arguments)}function Cb(){return Cb=(0,W.Z)(function*(t,e,n,r){const i=ue(t);if(i.Ca)return void ee("SyncEngine","Ignoring unexpected query state notification.");const o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield yV(i.localStore,YL(o[0])),a=mg.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,qn.EMPTY_BYTE_STRING);yield zs(i,s,a);break}case"rejected":yield rh(i.localStore,e,!0),lh(i,e,r);break;default:me()}}),Cb.apply(this,arguments)}function iY(t,e,n){return Db.apply(this,arguments)}function Db(){return Db=(0,W.Z)(function*(t,e,n){const r=bb(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){ee("SyncEngine","Adding an already active target "+i);continue}const o=yield _V(r.localStore,i),s=yield nh(r.localStore,o);yield ib(r,$V(o),s.targetId,!1,s.resumeToken),Jv(r.remoteStore,s)}for(const i of n)r.fa.has(i)&&(yield rh(r.localStore,i,!1).then(()=>{Pg(r.remoteStore,i),lh(r,i)}).catch($a))}}),Db.apply(this,arguments)}function bb(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qQ.bind(null,e),e.Va.a_=kQ.bind(null,e.eventManager),e.Va.Fa=LQ.bind(null,e.eventManager),e}function Ab(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WQ.bind(null,e),e}class Mg{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,W.Z)(function*(){n.serializer=Sg(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return fV(this.persistence,new hV,e.initialUser,this.serializer)}createPersistence(e){return new _D(zv.jr,this.serializer)}createSharedClientState(e){return new wV}terminate(){var e=this;return(0,W.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Sb extends Mg{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield Ab(r.xa.syncEngine),yield oh(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return fV(this.persistence,new hV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new rV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new MZ(n,this.persistence);return new PZ(e.asyncQueue,r)}createPersistence(e){const n=ID(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new vD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,CV(),Yv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new wV}}class HV extends Sb{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof RD&&(r.sharedClientState.syncEngine={Ys:eY.bind(null,i),Zs:rY.bind(null,i),Xs:iY.bind(null,i),Bi:nY.bind(null,i),Js:XQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var o=(0,W.Z)(function*(s){yield function tY(t,e){return wb.apply(this,arguments)}(r.xa.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=CV();if(!RD.D(n))throw new J(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ID(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new RD(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class dh{initialize(e,n){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>UV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=QQ.bind(null,r.syncEngine),yield ZD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OQ}createDatastore(e){const n=Sg(e.databaseInfo.databaseId),r=new _Q(e.databaseInfo);return new IQ(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>UV(this.syncEngine,n,0),a=TV.D()?new TV:new pQ,new TQ(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,u,d,f){const g=new jQ(i,o,s,a,u,d);return f&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,W.Z)(function*(r){const i=ue(r);ee("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield ih(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function zV(t,e=10240){let n=0;return{read:()=>(0,W.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,W.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class eI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Dn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class aY{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new zn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,W.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,W.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,W.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const o=yield e.Ka(i);return new FQ(JSON.parse(o),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,W.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,W.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,W.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class uY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,W.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new J(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,W.Z)(function*(s,a){const u=ue(s),d=vg(u.serializer)+"/documents",f={documents:a.map(I=>yg(u.serializer,I))},g=yield u.Co("BatchGetDocuments",d,f,a.length),_=new Map;g.forEach(I=>{const C=function RK(t,e){return"found"in e?function(r,i){De(!!i.found);const o=os(r,i.found.name),s=bn(i.found.updateTime),a=i.found.createTime?bn(i.found.createTime):Se.min(),u=new gr({mapValue:{fields:i.found.fields}});return Qt.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){De(!!i.missing),De(!!i.readTime);const o=os(r,i.missing),s=bn(i.readTime);return Qt.newNoDocument(o,s)}(t,e):me()}(u.serializer,I);_.set(C.key.toString(),C)});const y=[];return a.forEach(I=>{const C=_.get(I.toString());De(!!C),y.push(C)}),y}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,W.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=ce.fromPath(i);e.mutations.push(new XC(o,e.precondition(o)))}),yield(r=(0,W.Z)(function*(o,s){const a=ue(o),u=vg(a.serializer)+"/documents",d={writes:s.map(f=>Ig(a.serializer,f))};yield a.wo("Commit",u,d)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw me();n=Se.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Se.min())?sn.exists(!1):sn.updateTime(n):sn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Se.min()))throw new J(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sn.updateTime(n)}return sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cY{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new MD(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,W.Z)(function*(){const n=new uY(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.ja(o)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!tg(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!gF(n)}return!1}}class lY{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nr.UNAUTHENTICATED,this.clientId=dL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,W.Z)(function*(a){ee("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(ee("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return(0,W.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=ah(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function tI(t,e){return Rb.apply(this,arguments)}function Rb(){return Rb=(0,W.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,W.Z)(function*(o){r.isEqual(o)||(yield pV(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),Rb.apply(this,arguments)}function Pb(t,e){return Mb.apply(this,arguments)}function Mb(){return Mb=(0,W.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield xb(t);ee("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>MV(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>MV(e.remoteStore,o)),t._onlineComponents=e}),Mb.apply(this,arguments)}function qV(t){return"FirebaseError"===t.name?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function xb(t){return Nb.apply(this,arguments)}function Nb(){return Nb=(0,W.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{yield tI(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!qV(n))throw n;oi("Error using user provided cache. Falling back to memory cache: "+n),yield tI(t,new Mg)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),yield tI(t,new Mg);return t._offlineComponents}),Nb.apply(this,arguments)}function nI(t){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,W.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),yield Pb(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),yield Pb(t,new dh))),t._onlineComponents}),Ob.apply(this,arguments)}function GV(t){return xb(t).then(e=>e.persistence)}function hh(t){return xb(t).then(e=>e.localStore)}function WV(t){return nI(t).then(e=>e.remoteStore)}function kb(t){return nI(t).then(e=>e.syncEngine)}function fh(t){return Lb.apply(this,arguments)}function Lb(){return Lb=(0,W.Z)(function*(t){const e=yield nI(t),n=e.eventManager;return n.onListen=$Q.bind(null,e.syncEngine),n.onUnlisten=HQ.bind(null,e.syncEngine),n}),Lb.apply(this,arguments)}function KV(t,e,n={}){const r=new zn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(o,s,a,u,d){const f=new eI({next:_=>{s.enqueueAndForget(()=>XD(o,g));const y=_.docs.has(a);!y&&_.fromCache?d.reject(new J(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&u&&"server"===u.source?d.reject(new J(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new nb(Hd(a.path),f,{includeMetadataChanges:!0,J_:!0});return YD(o,g)}(yield fh(t),t.asyncQueue,e,n,r)})),r.promise}function QV(t,e,n={}){const r=new zn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(o,s,a,u,d){const f=new eI({next:_=>{s.enqueueAndForget(()=>XD(o,g)),_.fromCache&&"server"===u.source?d.reject(new J(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new nb(a,f,{includeMetadataChanges:!0,J_:!0});return YD(o,g)}(yield fh(t),t.asyncQueue,e,n,r)})),r.promise}function YV(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const JV=new Map;function Fb(t,e,n){if(!n)throw new J(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XV(t,e,n,r){if(!0===e&&!0===r)throw new J(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function e2(t){if(!ce.isDocumentKey(t))throw new J(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function t2(t){if(ce.isDocumentKey(t))throw new J(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rI(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":me()}function st(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rI(t);throw new J(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function n2(t,e){if(e<=0)throw new J(k.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class r2{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=YV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new J(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r2(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new yZ;switch(r.type){case"firstParty":return new wZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=JV.get(n);r&&(ee("ComponentProvider","Removing Datastore"),JV.delete(n),r.terminate())}(this),Promise.resolve()}}class mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mr(this.firestore,e,this._query)}}class Yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}}class ss extends mr{constructor(e,n,r){super(e,n,Hd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new ce(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function o2(t,e,...n){if(t=(0,kt.m9)(t),Fb("collection","path",e),t instanceof xg){const r=ft.fromString(e,...n);return t2(r),new ss(t,null,r)}{if(!(t instanceof Yt||t instanceof ss))throw new J(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return t2(r),new ss(t.firestore,null,r)}}function iI(t,e,...n){if(t=(0,kt.m9)(t),1===arguments.length&&(e=dL.newId()),Fb("doc","path",e),t instanceof xg){const r=ft.fromString(e,...n);return e2(r),new Yt(t,null,new ce(r))}{if(!(t instanceof Yt||t instanceof ss))throw new J(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return e2(r),new Yt(t.firestore,t instanceof ss?t.converter:null,new ce(r))}}function s2(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),(t instanceof Yt||t instanceof ss)&&(e instanceof Yt||e instanceof ss)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Vb(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),t instanceof mr&&e instanceof mr&&t.firestore===e.firestore&&cg(t._query,e._query)&&t.converter===e.converter}class wY{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new MD(this,"async_queue_retry"),this.iu=()=>{const n=Yv();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Yv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Yv();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new zn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,W.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Ha(n))throw n;ee("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Dn("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=QD.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&me()}verifyOperationInProgress(){}uu(){var e=this;return(0,W.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function Ub(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class TY{constructor(){this._progressObserver={},this._taskCompletionResolver=new zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ht extends xg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new wY,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||a2(this),this._firestoreClient.terminate()}}function mn(t){return t._firestoreClient||a2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function a2(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new JZ(t._databaseId,u,t._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,YV(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;t._firestoreClient=new lY(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function u2(t,e,n){const r=new zn;return t.asyncQueue.enqueue((0,W.Z)(function*(){try{yield tI(t,n),yield Pb(t,e),r.resolve()}catch(i){const o=i;if(!qV(o))throw o;oi("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function c2(t){if(t._initialized||t._terminated)throw new J(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class as{constructor(e){this._byteString=e}static fromBase64String(e){try{return new as(qn.fromBase64String(e))}catch(n){throw new J(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new as(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qs{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sc{constructor(e){this._methodName=e}}class oI{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}const OY=/^__.*__$/;class kY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new $s(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zd(e,this.data,n,this.fieldTransforms)}}class l2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function d2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class sI{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new sI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return cI(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(d2(this.Iu)&&OY.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class LY{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sg(e)}pu(e,n,r,i=!1){return new sI({Iu:e,methodName:n,gu:r,path:Kt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rc(t){const e=t._freezeSettings(),n=Sg(t._databaseId);return new LY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aI(t,e,n,r,i,o={}){const s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);Hb("Data must be an object, but it was:",s,r);const a=p2(r,s);let u,d;if(o.merge)u=new si(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const g of o.mergeFields){const _=kg(e,g,n);if(!s.contains(_))throw new J(k.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);m2(f,_)||f.push(_)}u=new si(f),d=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=s.fieldTransforms;return new kY(new gr(a),u,d)}class Og extends Sc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Og}}function h2(t,e,n){return new sI({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bb extends Sc{_toFieldTransform(e){return new fg(e.path,new Gd)}isEqual(e){return e instanceof Bb}}class FY extends Sc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=h2(this,e,!0),r=this.yu.map(o=>Pc(o,n)),i=new vc(r);return new fg(e.path,i)}isEqual(e){return this===e}}class VY extends Sc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=h2(this,e,!0),r=this.yu.map(o=>Pc(o,n)),i=new Ic(r);return new fg(e.path,i)}isEqual(e){return this===e}}class UY extends Sc{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Wd(e.serializer,iF(e.serializer,this.wu));return new fg(e.path,n)}isEqual(e){return this===e}}function jb(t,e,n,r){const i=t.pu(1,e,n);Hb("Data must be an object, but it was:",i,r);const o=[],s=gr.empty();za(r,(u,d)=>{const f=uI(e,u,n);d=(0,kt.m9)(d);const g=i.Ru(f);if(d instanceof Og)o.push(f);else{const _=Pc(d,g);null!=_&&(o.push(f),s.set(f,_))}});const a=new si(o);return new l2(s,a,i.fieldTransforms)}function $b(t,e,n,r,i,o){const s=t.pu(1,e,n),a=[kg(e,r,n)],u=[i];if(o.length%2!=0)throw new J(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(kg(e,o[_])),u.push(o[_+1]);const d=[],f=gr.empty();for(let _=a.length-1;_>=0;--_)if(!m2(d,a[_])){const y=a[_];let I=u[_];I=(0,kt.m9)(I);const C=s.Ru(y);if(I instanceof Og)d.push(y);else{const S=Pc(I,C);null!=S&&(d.push(y),f.set(y,S))}}const g=new si(d);return new l2(f,g,s.fieldTransforms)}function f2(t,e,n,r=!1){return Pc(n,t.pu(r?4:3,e))}function Pc(t,e){if(g2(t=(0,kt.m9)(t)))return Hb("Unsupported field value:",e,t),p2(t,e);if(t instanceof Sc)return function(r,i){if(!d2(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=Pc(a,i.Vu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,kt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return iF(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=on.fromDate(r);return{timestampValue:Qd(i.serializer,o)}}if(r instanceof on){const o=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qd(i.serializer,o)}}if(r instanceof oI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof as)return{bytesValue:DF(i.serializer,r._byteString)};if(r instanceof Yt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:oD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${rI(r)}`)}(t,e)}function p2(t,e){const n={};return bL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):za(t,(r,i)=>{const o=Pc(i,e.Eu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function g2(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof on||t instanceof oI||t instanceof as||t instanceof Yt||t instanceof Sc)}function Hb(t,e,n){if(!g2(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=rI(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function kg(t,e,n){if((e=(0,kt.m9)(e))instanceof qs)return e._internalPath;if("string"==typeof e)return uI(t,e);throw cI("Field path arguments must be of type string or ",t,!1,void 0,n)}const BY=new RegExp("[~\\*/\\[\\]]");function uI(t,e,n){if(e.search(BY)>=0)throw cI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qs(...e.split("."))._internalPath}catch{throw cI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cI(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new J(k.INVALID_ARGUMENT,a+t+u)}function m2(t,e){return t.some(n=>n.isEqual(e))}class Lg{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class jY extends Lg{data(){return super.data()}}function lI(t,e){return"string"==typeof e?uI(t,e):e instanceof qs?e._internalPath:e._delegate._internalPath}function _2(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zb{}class Fg extends zb{}function ru(t,e,...n){let r=[];e instanceof zb&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof ph).length,a=o.filter(u=>u instanceof Vg).length;if(s>1||s>0&&a>0)throw new J(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Vg extends Fg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Vg(e,n,r)}_apply(e){const n=this._parse(e);return E2(e._query,n),new mr(e.firestore,e.converter,YC(e._query,n))}_parse(e){const n=Rc(e.firestore);return function(o,s,a,u,d,f,g){let _;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new J(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){I2(g,f);const y=[];for(const I of g)y.push(v2(u,o,I));_={arrayValue:{values:y}}}else _=v2(u,o,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||I2(g,f),_=f2(a,"where",g,"in"===f||"not-in"===f);return at.create(d,f,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class ph extends zb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ph(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:At.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)E2(s,u),s=YC(s,u)}(e._query,n),new mr(e.firestore,e.converter,YC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qb extends Fg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new qb(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new J(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ag(o,s)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Bs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class dI extends Fg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dI(e,n,r)}_apply(e){return new mr(e.firestore,e.converter,Mv(e._query,this._limit,this._limitType))}}class hI extends Fg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new hI(e,n,r)}_apply(e){const n=y2(e,this.type,this._docOrFields,this._inclusive);return new mr(e.firestore,e.converter,(o=n,new Bs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class fI extends Fg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new fI(e,n,r)}_apply(e){const n=y2(e,this.type,this._docOrFields,this._inclusive);return new mr(e.firestore,e.converter,(o=n,new Bs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function y2(t,e,n,r){if(n[0]=(0,kt.m9)(n[0]),n[0]instanceof Lg)return function(o,s,a,u,d){if(!u)throw new J(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of zd(o))if(g.field.isKeyField())f.push(_c(s,u.key));else{const _=u.data.field(g.field);if(Cv(_))throw new J(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=g.field.canonicalString();throw new J(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(_)}return new Qa(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Rc(t.firestore);return function(s,a,u,d,f,g){const _=s.explicitOrderBy;if(f.length>_.length)throw new J(k.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let I=0;I<f.length;I++){const C=f[I];if(_[I].field.isKeyField()){if("string"!=typeof C)throw new J(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof C}`);if(!QC(s)&&-1!==C.indexOf("/"))throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${C}' contains a slash.`);const S=s.path.child(ft.fromString(C));if(!ce.isDocumentKey(S))throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const N=new ce(S);y.push(_c(a,N))}else{const S=f2(u,d,C);y.push(S)}}return new Qa(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function v2(t,e,n){if("string"==typeof(n=(0,kt.m9)(n))){if(""===n)throw new J(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QC(e)&&-1!==n.indexOf("/"))throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!ce.isDocumentKey(r))throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _c(t,new ce(r))}if(n instanceof Yt)return _c(t,n._key);throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rI(n)}.`)}function I2(t,e){if(!Array.isArray(t)||0===t.length)throw new J(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E2(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(k.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Gb{convertValue(e,n="none"){switch(Za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return za(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new oI(gn(e.latitude),gn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dv(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rg(e));default:return null}}convertTimestamp(e){const n=qa(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);De(kF(r));const i=new Ga(r.get(1),r.get(3)),o=new ce(r.popFirst(5));return i.isEqual(n)||Dn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function pI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class QY extends Gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new as(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}class Mc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gs extends Lg{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ug(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ug extends Gs{data(e={}){return super.data(e)}}class iu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Mc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ug(this._firestore,this._userDataWriter,r.key,r,new Mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Ug(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new Ug(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return 0!==a.type&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:JY(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function JY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}function T2(t,e){return t instanceof Gs&&e instanceof Gs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof iu&&e instanceof iu&&t._firestore===e._firestore&&Vb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class ou extends Gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new as(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function C2(t,e,n){t=st(t,Yt);const r=st(t.firestore,Ht),i=pI(t.converter,e,n);return gh(r,[aI(Rc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,sn.none())])}function D2(t,e,n,...r){t=st(t,Yt);const i=st(t.firestore,Ht),o=Rc(i);let s;return s="string"==typeof(e=(0,kt.m9)(e))||e instanceof qs?$b(o,"updateDoc",t._key,e,n,r):jb(o,"updateDoc",t._key,e),gh(i,[s.toMutation(t._key,sn.exists(!0))])}function b2(t,...e){var n,r,i;t=(0,kt.m9)(t);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||Ub(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(Ub(e[s])){const g=e[s];e[s]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[s+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[s+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,f;if(t instanceof Yt)d=st(t.firestore,Ht),f=Hd(t._key.path),u={next:g=>{e[s]&&e[s](Wb(d,t,g))},error:e[s+1],complete:e[s+2]};else{const g=st(t,mr);d=st(g.firestore,Ht),f=g._query;const _=new ou(d);u={next:y=>{e[s]&&e[s](new iu(d,_,g,y))},error:e[s+1],complete:e[s+2]},_2(t._query)}return function(_,y,I,C){const S=new eI(C),N=new nb(y,S,I);return _.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return YD(yield fh(_),N)})),()=>{S.Na(),_.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return XD(yield fh(_),N)}))}}(mn(d),f,a,u)}function gh(t,e){return function(r,i){const o=new zn;return r.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function zQ(t,e,n){return ab.apply(this,arguments)}(yield kb(r),i,o)})),o.promise}(mn(t),e)}function Wb(t,e,n){const r=n.docs.get(e._key),i=new ou(t);return new Gs(t,i,e._key,r,new Mc(n.hasPendingWrites,n.fromCache),e.converter)}const mJ={maxAttempts:5};class A2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Rc(e)}set(e,n,r){this._verifyNotCommitted();const i=su(e,this._firestore),o=pI(i.converter,n,r),s=aI(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,sn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=su(e,this._firestore);let s;return s="string"==typeof(n=(0,kt.m9)(n))||n instanceof qs?$b(this._dataReader,"WriteBatch.update",o._key,n,r,i):jb(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=su(e,this._firestore);return this._mutations=this._mutations.concat(new Kd(n._key,sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function su(t,e){if((t=(0,kt.m9)(t)).firestore!==e)throw new J(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class _J extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Rc(n)}get(n){const r=su(n,this._firestore),i=new QY(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return me();const s=o[0];if(s.isFoundDocument())return new Lg(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Lg(this._firestore,i,r._key,null,r.converter);throw me()})}set(n,r,i){const o=su(n,this._firestore),s=pI(o.converter,r,i),a=aI(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=su(n,this._firestore);let a;return a="string"==typeof(r=(0,kt.m9)(r))||r instanceof qs?$b(this._dataReader,"Transaction.update",s._key,r,i,o):jb(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=su(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=su(e,this._firestore),r=new ou(this._firestore);return super.get(e).then(i=>new Gs(this._firestore,r,n._key,i._document,new Mc(!1,!1),n.converter))}}function Kb(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function M2(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function x2(){if(!function QZ(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){kd=Dd.SDK_VERSION,(0,Dd._registerComponent)(new z1.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ht(new IZ(r.getProvider("auth-internal")),new TZ(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(d.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Dd.registerVersion)(uL,"4.4.0",e),(0,Dd.registerVersion)(uL,"4.4.0","esm2017")}();class Bg{constructor(e){this._delegate=e}static fromBase64String(e){return x2(),new Bg(as.fromBase64String(e))}static fromUint8Array(e){return M2(),new Bg(as.fromUint8Array(e))}toBase64(){return x2(),this._delegate.toBase64()}toUint8Array(){return M2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qb(t){return function AJ(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class SJ{enableIndexedDbPersistence(e,n){return function DY(t,e){c2(t=st(t,Ht));const n=mn(t);if(n._uninitializedComponentsProvider)throw new J(k.FAILED_PRECONDITION,"SDK cache is already specified.");oi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new dh;return u2(n,i,new Sb(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function bY(t){c2(t=st(t,Ht));const e=mn(t);if(e._uninitializedComponentsProvider)throw new J(k.FAILED_PRECONDITION,"SDK cache is already specified.");oi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new dh;return u2(e,r,new HV(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function AY(t){if(t._initialized&&!t._terminated)throw new J(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{yield(n=(0,W.Z)(function*(i){if(!wo.D())return Promise.resolve();const o=i+"main";yield wo.delete(o)}),function r(i){return n.apply(this,arguments)})(ID(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class N2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ga||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&oi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function i2(t,e,n,r={}){var i;const o=(t=st(t,xg))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=nr.MOCK_USER;else{a=(0,kt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new J(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nr(d)}t._authCredentials=new vZ(new cL(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function RY(t){return function dY(t){return t.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield GV(t),n=yield WV(t);return e.setNetworkEnabled(!0),function(i){const o=ue(i);return o.C_.delete(0),Rg(o)}(n)}))}(mn(t=st(t,Ht)))}(this._delegate)}disableNetwork(){return function PY(t){return function hY(t){return t.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield GV(t),n=yield WV(t);return e.setNetworkEnabled(!1),(r=(0,W.Z)(function*(o){const s=ue(o);s.C_.add(0),yield ih(s),s.M_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(mn(t=st(t,Ht)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XV("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function SY(t){return function(n){const r=new zn;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function ZQ(t,e){return hb.apply(this,arguments)}(yield kb(n),r)})),r.promise}(mn(t=st(t,Ht)))}(this._delegate)}onSnapshotsInSync(e){return function aJ(t,e){return function gY(t,e){const n=new eI(e);return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield fh(t),o=n,ue(i).q_.add(o),void o.next();var i,o})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield fh(t),o=n,void ue(i).q_.delete(o);var i,o}))}}(mn(t=st(t,Ht)),Ub(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mh(this,o2(this._delegate,e))}catch(n){throw Wr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ji(this,iI(this._delegate,e))}catch(n){throw Wr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zr(this,function EY(t,e){if(t=st(t,xg),Fb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(k.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mr(t,null,(r=e,new Bs(ft.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Wr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function yJ(t,e,n){t=st(t,Ht);const r=Object.assign(Object.assign({},mJ),n);return function(o){if(o.maxAttempts<1)throw new J(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new zn;return o.asyncQueue.enqueueAndForget((0,W.Z)(function*(){const d=yield function ZV(t){return nI(t).then(e=>e.datastore)}(o);new cY(o.asyncQueue,d,a,s,u).run()})),u.promise}(mn(t),i=>e(new _J(t,i)),r)}(this._delegate,n=>e(new O2(this,n)))}batch(){return mn(this._delegate),new k2(new A2(this._delegate,e=>gh(this._delegate,e)))}loadBundle(e){return function MY(t,e){const n=mn(t=st(t,Ht)),r=new TY;return function mY(t,e,n,r){const i=function(s,a){let u;return u="string"==typeof s?_F().encode(s):s,f=function(f,g){if(f instanceof Uint8Array)return zV(f,g);if(f instanceof ArrayBuffer)return zV(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new aY(f,a);var f}(n,Sg(e));t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){!function oY(t,e,n){const r=ue(t);var i;(i=(0,W.Z)(function*(s,a,u){try{const d=yield a.getMetadata();if(yield function(I,C){const S=ue(I),N=bn(C.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",R=>S.Kr.getBundleMetadata(R,C.id)).then(R=>!!R&&R.createTime.compareTo(N)>=0)}(s.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(I=d).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);u._updateProgress(OV(d));const f=new VQ(d,s.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield f.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const _=yield f.complete();return yield zs(s,_.ra,void 0),yield function(I,C){const S=ue(I);return S.persistence.runTransaction("Save bundle","readwrite",N=>S.Kr.saveBundleMetadata(N,C))}(s.localStore,d),u._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return oi("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var I}),function o(s,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield kb(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function xY(t,e){return function _Y(t,e){return t.asyncQueue.enqueue((0,W.Z)(function*(){return function(r,i){const o=ue(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield hh(t),e)}))}(mn(t=st(t,Ht)),e).then(n=>n?new mr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Zr(this,n):null)}}class mI extends Gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bg(new as(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ji.forKey(n,this.firestore,null)}}class O2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new mI(e)}get(e){const n=Nc(e);return this._delegate.get(n).then(r=>new jg(this._firestore,new Gs(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Nc(e);return r?(Kb("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Nc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Nc(e);return this._delegate.delete(n),this}}class k2{constructor(e){this._delegate=e}set(e,n,r){const i=Nc(e);return r?(Kb("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Nc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Nc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class xc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Ug(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $g(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=xc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new xc(e,new mI(e),n),i.set(n,o)),o}}xc.INSTANCES=new WeakMap;class Ji{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new mI(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ji(n,new Yt(n._delegate,r,new ce(e)))}static forKey(e,n,r){return new Ji(n,new Yt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mh(this.firestore,o2(this._delegate,e))}catch(n){throw Wr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,kt.m9)(e))instanceof Yt&&s2(this._delegate,e)}set(e,n){n=Kb("DocumentReference.set",n);try{return n?C2(this._delegate,e,n):C2(this._delegate,e)}catch(r){throw Wr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?D2(this._delegate,e):D2(this._delegate,e,n,...r)}catch(i){throw Wr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function oJ(t){return gh(st(t.firestore,Ht),[new Kd(t._key,sn.none())])}(this._delegate)}onSnapshot(...e){const n=L2(e),r=F2(e,i=>new jg(this.firestore,new Gs(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return b2(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function eJ(t){t=st(t,Yt);const e=st(t.firestore,Ht),n=mn(e),r=new ou(e);return function fY(t,e){const n=new zn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(o,s,a){try{const u=yield function(f,g){const _=ue(f);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,g))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=ah(u,`Failed to get document '${s} from cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield hh(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Gs(e,r,t._key,i,new Mc(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function tJ(t){t=st(t,Yt);const e=st(t.firestore,Ht);return KV(mn(e),t._key,{source:"server"}).then(n=>Wb(e,t,n))}(this._delegate):function XY(t){t=st(t,Yt);const e=st(t.firestore,Ht);return KV(mn(e),t._key).then(n=>Wb(e,t,n))}(this._delegate),n.then(r=>new jg(this.firestore,new Gs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ji(this.firestore,this._delegate.withConverter(e?xc.getInstance(this.firestore,e):null))}}function Wr(t,e,n){return t.message=t.message.replace(e,n),t}function L2(t){for(const e of t)if("object"==typeof e&&!Qb(e))return e;return{}}function F2(t,e){var n,r;let i;return i=Qb(t[0])?t[0]:Qb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class jg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ji(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return T2(this._delegate,e._delegate)}}class $g extends jg{data(e){const n=this._delegate.data(e);return this._delegate._converter||function _Z(t,e){t||me()}(void 0!==n),n}}class Zr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new mI(e)}where(e,n,r){try{return new Zr(this.firestore,ru(this._delegate,function $Y(t,e,n){const r=e,i=lI("where",t);return Vg._create(i,r,n)}(e,n,r)))}catch(i){throw Wr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Zr(this.firestore,ru(this._delegate,function HY(t,e="asc"){const n=e,r=lI("orderBy",t);return qb._create(r,n)}(e,n)))}catch(r){throw Wr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zr(this.firestore,ru(this._delegate,function zY(t){return n2("limit",t),dI._create("limit",t,"F")}(e)))}catch(n){throw Wr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Zr(this.firestore,ru(this._delegate,function qY(t){return n2("limitToLast",t),dI._create("limitToLast",t,"L")}(e)))}catch(n){throw Wr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zr(this.firestore,ru(this._delegate,function GY(...t){return hI._create("startAt",t,!0)}(...e)))}catch(n){throw Wr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zr(this.firestore,ru(this._delegate,function WY(...t){return hI._create("startAfter",t,!1)}(...e)))}catch(n){throw Wr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zr(this.firestore,ru(this._delegate,function ZY(...t){return fI._create("endBefore",t,!1)}(...e)))}catch(n){throw Wr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zr(this.firestore,ru(this._delegate,function KY(...t){return fI._create("endAt",t,!0)}(...e)))}catch(n){throw Wr(n,"endAt()","Query.endAt()")}}isEqual(e){return Vb(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function rJ(t){t=st(t,mr);const e=st(t.firestore,Ht),n=mn(e),r=new ou(e);return function pY(t,e){const n=new zn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(o,s,a){try{const u=yield Wv(o,s,!0),d=new FV(s,u.ls),f=d.ca(u.documents),g=d.applyChanges(f,!1);a.resolve(g.snapshot)}catch(u){const d=ah(u,`Failed to execute query '${s} against cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield hh(t),e,n);var r})),n.promise}(n,t._query).then(i=>new iu(e,r,t,i))}(this._delegate):"server"===e?.source?function iJ(t){t=st(t,mr);const e=st(t.firestore,Ht),n=mn(e),r=new ou(e);return QV(n,t._query,{source:"server"}).then(i=>new iu(e,r,t,i))}(this._delegate):function nJ(t){t=st(t,mr);const e=st(t.firestore,Ht),n=mn(e),r=new ou(e);return _2(t._query),QV(n,t._query).then(i=>new iu(e,r,t,i))}(this._delegate),n.then(r=>new Yb(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=L2(e),r=F2(e,i=>new Yb(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return b2(this._delegate,n,r)}withConverter(e){return new Zr(this.firestore,this._delegate.withConverter(e?xc.getInstance(this.firestore,e):null))}}class PJ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new $g(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Yb{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Zr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $g(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new PJ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new $g(this._firestore,r))})}isEqual(e){return T2(this._delegate,e._delegate)}}class mh extends Zr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ji(this.firestore,e):null}doc(e){try{return new Ji(this.firestore,void 0===e?iI(this._delegate):iI(this._delegate,e))}catch(n){throw Wr(n,"doc()","CollectionReference.doc()")}}add(e){return function sJ(t,e){const n=st(t.firestore,Ht),r=iI(t),i=pI(t.converter,e);return gh(n,[aI(Rc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Ji(this.firestore,n))}isEqual(e){return s2(this._delegate,e._delegate)}withConverter(e){return new mh(this.firestore,this._delegate.withConverter(e?xc.getInstance(this.firestore,e):null))}}function Nc(t){return st(t,Yt)}class Jb{constructor(...e){this._delegate=new qs(...e)}static documentId(){return new Jb(Kt.keyField().canonicalString())}isEqual(e){return(e=(0,kt.m9)(e))instanceof qs&&this._delegate._internalPath.isEqual(e._internalPath)}}class Oc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function IJ(){return new Bb("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Oc(e)}static delete(){const e=function vJ(){return new Og("deleteField")}();return e._methodName="FieldValue.delete",new Oc(e)}static arrayUnion(...e){const n=function EJ(...t){return new FY("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Oc(n)}static arrayRemove(...e){const n=function wJ(...t){return new VY("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Oc(n)}static increment(e){const n=function TJ(t){return new UY("increment",t)}(e);return n._methodName="FieldValue.increment",new Oc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const MJ={Firestore:N2,GeoPoint:oI,Timestamp:on,Blob:Bg,Transaction:O2,WriteBatch:k2,DocumentReference:Ji,DocumentSnapshot:jg,Query:Zr,QueryDocumentSnapshot:$g,QuerySnapshot:Yb,CollectionReference:mh,FieldPath:Jb,FieldValue:Oc,setLogLevel:function RJ(t){!function mZ(t){ja.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function V2(t,e){return function OJ(t,e=A1){return new qt(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function Xb(t,e){return V2(t,e).pipe(we(n=>({payload:n,type:"query"})))}!function NJ(t){(function xJ(t,e){t.INTERNAL.registerComponent(new z1.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},MJ)))})(t,(e,n)=>new N2(e,n,new SJ)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(Va.Z);class U2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=q2(r,n);return new $2(i,o,this.afs)}snapshotChanges(){return function kJ(t,e){return V2(t,e).pipe(Py(void 0),K0(),we(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Si)}valueChanges(e={}){return this.snapshotChanges().pipe(we(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return rn(this.ref.get(e)).pipe(Si)}}function _I(t,e){return Xb(t,e).pipe(Py(void 0),K0(),we(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=o.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function B2(t,e,n){return _I(t,n).pipe(xy((r,i)=>function LJ(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function FJ(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return eA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return eA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),function u7(t,e=Kn){return t=t??c7,Ie((n,r)=>{let i,o=!0;n.subscribe(Ae(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}(),we(r=>r.map(i=>({type:i.type,payload:i}))))}function eA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function j2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class $2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=_I(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(we(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Py(void 0),K0(),yo(([r,i])=>i.length>0||!r),we(([,r])=>r),Si)}auditTrail(e){return this.stateChanges(e).pipe(xy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=j2(e);return B2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Si)}valueChanges(e={}){return Xb(this.query,this.afs.schedulers.outsideAngular).pipe(we(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Si)}get(e){return rn(this.query.get(e)).pipe(Si)}add(e){return this.ref.add(e)}doc(e){return new U2(this.ref.doc(e),this.afs)}}class VJ{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?_I(this.query,this.afs.schedulers.outsideAngular).pipe(we(n=>n.filter(r=>e.indexOf(r.type)>-1)),yo(n=>n.length>0),Si):_I(this.query,this.afs.schedulers.outsideAngular).pipe(Si)}auditTrail(e){return this.stateChanges(e).pipe(xy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=j2(e);return B2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Si)}valueChanges(e={}){return Xb(this.query,this.afs.schedulers.outsideAngular).pipe(we(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Si)}get(e){return rn(this.query.get(e)).pipe(Si)}}const H2=new de("angularfire2.enableFirestorePersistence"),z2=new de("angularfire2.firestore.persistenceSettings"),UJ=new de("angularfire2.firestore.settings"),BJ=new de("angularfire2.firestore.use-emulator");function q2(t,e=(n=>n)){return{query:e(t),ref:t}}let tA=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,d,f,g,_,y,I,C,S,N,R){this.schedulers=u;const U=W0(n,a,r),ne=f;g&&$1(U,a,_,I,C,S,y,N),[this.firestore,this.persistenceEnabled$]=x1(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{const oe=a.runOutsideAngular(()=>U.firestore());if(o&&oe.settings(o),ne&&oe.useEmulator(...ne),i&&!Dy(s)){const Oe=()=>{try{return rn(oe.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(zt){return typeof console<"u"&&console.warn(zt),Ne(!1)}};return[oe,a.runOutsideAngular(Oe)]}return[oe,Ne(!1)]},[o,ne,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:o,query:s}=q2(i,r),a=this.schedulers.ngZone.run(()=>o);return new $2(a,s,this)}collectionGroup(n,r){const i=r||(s=>s),o=this.firestore.collectionGroup(n);return new VJ(i(o),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new U2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(re(Wy),re(Zy,8),re(H2,8),re(UJ,8),re(bs),re(mt),re(P1),re(z2,8),re(BJ,8),re(H1,8),re(L1,8),re(F1,8),re(V1,8),re(U1,8),re(B1,8),re(j1,8),re(S1,8))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),jJ=(()=>{class t{constructor(){Va.Z.registerVersion("angularfire",G0.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:H2,useValue:!0},{provide:z2,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=gi({type:t});static \u0275inj=Li({providers:[tA]})}return t})(),G2=(()=>{class t{constructor(n){this.firestore=n}getTratte(){return this.firestore.collection("tratte").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||t)(re(tA))};static#t=this.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $J(t,e){1&t&&(le(0,"div",12),Ce(1,"Inspiration"),fe())}function HJ(t,e){if(1&t&&(le(0,"div",12),Ce(1),fe()),2&t){const n=tc().$implicit;Ci(1),np(n.note)}}function zJ(t,e){if(1&t){const n=function zP(){return B()}();le(0,"article")(1,"div",4)(2,"div",5)(3,"h3")(4,"a",6),ec("click",function(){const o=bu(n).$implicit;return qh(tc().sendInfo(o.id))}),Ce(5),fe()(),qo(6,$J,2,0,"div",7)(7,HJ,2,1,"div",7),fe(),le(8,"div",8),Ce(9),le(10,"a",6),ec("click",function(){const o=bu(n).$implicit;return qh(tc().sendInfo(o.id))}),Ce(11,"Playlist"),nn(12,"span",9),fe()(),nn(13,"div",10)(14,"div",11),fe()()}if(2&t){const n=e.$implicit;Ci(1),function OM(t,e,n){Ho(Fl(B(),t,e,n))}("background: url(",n.srcimg,") center no-repeat;"),Ci(4),Yw("",n.partenza," - ",n.destinazione,""),Ci(1),Ps("ngIf",""==n.note),Ci(1),Ps("ngIf",""!=n.note),Ci(2),Jw(" Vivi il viaggio da ",n.partenza," a ",n.destinazione," ",n.note," con questa playlist ")}}let qJ=(()=>{class t{constructor(n,r){this.firebase=n,this.router=r,this.listaTratte=[],this.sendID=new A,this.sendID$=this.sendID.asObservable()}ngOnInit(){this.firebase.getTratte().subscribe(n=>{this.listaTratte=n})}sendInfo(n){this.sendID.next(n),this.router.navigateByUrl(`/tratta/${n}`)}static#e=this.\u0275fac=function(r){return new(r||t)(Pe(G2),Pe(Ai))};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-tratte"]],decls:9,vars:1,consts:[["id","picture"],[2,"width","auto"],["role","alert","id","disclaimer",1,"alert","alert-warning"],[4,"ngFor","ngForOf"],[1,"blog-card","spring-fever"],[1,"title-content"],[3,"click"],["class","intro",4,"ngIf"],[1,"card-info"],[1,"licon","icon-arr","icon-black"],[1,"gradient-overlay"],[1,"color-overlay"],[1,"intro"]],template:function(r,i){1&r&&(nn(0,"div",0),le(1,"article",1)(2,"div",2)(3,"p")(4,"strong"),Ce(5,"Disclaimer :"),fe(),Ce(6," Le canzoni presentate su SpotiRFI sono state scelte esclusivamente sulla base dell'adeguatezza del titolo con il nome delle stazioni ferroviarie. La scelta di una canzone non implica un'approvazione o un'adesione al testo, al significato o a qualsiasi altro aspetto della canzone stessa. Le canzoni sono fornite solo a scopo di intrattenimento e non intendono rappresentare o riflettere le opinioni di SpotiRFI. "),fe()()(),le(7,"section"),qo(8,zJ,15,10,"article",3),fe()),2&r&&(Ci(8),Ps("ngForOf",i.listaTratte))},dependencies:[KT,QT],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";@import"//fonts.googleapis.com/css?family=Abril+Fatface|Droid+Serif:400,700,400italic,700italic";#picture[_ngcontent-%COMP%]{background-image:url(https://images.lonelyplanetitalia.it/uploads/treno-sicilia?q=80&p=slider&s=d688b722008ebe2d69bad96ef1c4624f);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:bottom center;background-attachment:fixed;z-index:0}article[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;margin:auto auto 4rem;font-family:Merienda,cursive;width:500px}section[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}#disclaimer[_ngcontent-%COMP%]{margin:4em 1em 3.5em;text-align:justify}p[_ngcontent-%COMP%]{font-size:1.2em}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{background:linear-gradient(to bottom,rgba(0,5,10,.4) 0%,rgba(0,0,0,0) 100%);font-family:"Droid Serif",serif}.blog-card[_ngcontent-%COMP%]{max-width:550px;width:100%;height:500px;position:relative;font-family:"Droid Serif",serif;color:#fff;top:20%;right:0;left:0;margin:0 auto;overflow:hidden;border-radius:0;box-shadow:0 10px 20px -9px #00000080;text-align:center;transition:all .4s;background-size:100%}.blog-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:all .2s;cursor:pointer}.blog-card[_ngcontent-%COMP%]   .color-overlay[_ngcontent-%COMP%]{background:rgba(64,84,94,.5);width:550px;height:500px;position:absolute;z-index:10;top:0;left:0;transition:background .3s cubic-bezier(.33,.66,.66,1)}.blog-card[_ngcontent-%COMP%]   .gradient-overlay[_ngcontent-%COMP%]{background-image:linear-gradient(transparent 0%,rgba(0,0,0,.6) 21%);width:550px;height:500px;position:absolute;top:350px;left:0;z-index:15}.blog-card[_ngcontent-%COMP%]:hover{box-shadow:0 18px 20px -9px #000a1ebf}.blog-card[_ngcontent-%COMP%]:hover   .card-info[_ngcontent-%COMP%]{opacity:1;bottom:100px}.blog-card[_ngcontent-%COMP%]:hover   .color-overlay[_ngcontent-%COMP%]{background:rgba(64,64,70,.8)}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%]{margin-top:70px}.title-content[_ngcontent-%COMP%]{text-align:center;margin:170px 0 0;position:absolute;z-index:20;width:100%;top:0;left:0;transition:all .6s}.blog-card[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_changeLetter .3s 1 linear;width:80%}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-size:1.9em;font-weight:400;letter-spacing:1px;font-family:Abril Fatface,serif;margin-bottom:0;display:inline-block}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-shadow:0px 0px 10px rgba(0,0,0,.5);transition:all .2s}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-shadow:0px 8px 20px rgba(0,0,0,.95)}h3[_ngcontent-%COMP%]:after{content:" ";display:block;width:10%;height:2px;margin:20px auto;border:0;background:#BDA26B;transition:all .2s}@keyframes _ngcontent-%COMP%_changeLetter{0%{width:10%}to{width:80%}}.intro[_ngcontent-%COMP%]{width:170px;margin:0 auto;color:#ddd;font-style:italic;line-height:18px}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ddd}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.card-info[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;position:absolute;bottom:-40px;left:0;margin:0 auto;padding:0 50px;font-style:16px;line-height:24px;z-index:20;opacity:0;transition:bottom .64s,opacity .63s cubic-bezier(.33,.66,.66,1)}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;width:100px;margin:15px auto;background:#fff;color:#444;padding:3px 10px;border-radius:2px;font-size:.8em}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#8e7c49;color:#fff}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{filter:brightness(10);opacity:1}.licon[_ngcontent-%COMP%]{position:relative;width:23px;height:15px;display:inline-block;vertical-align:middle}.licon[_ngcontent-%COMP%]:before{content:"";background:url(https://rawcdn.githack.com/Nodws/NodPen/ffad95aa5244b4b09a3c7c1508a018959bbedb7e/postItem/licons.svg?) -2px -6px no-repeat;background-size:250px;width:26px;height:20px;display:inline-block;vertical-align:middle;position:absolute;top:-3px;left:0}.icon-black[_ngcontent-%COMP%]{filter:brightness(0);opacity:.6}@media (max-width:750px){.utility-info[_ngcontent-%COMP%]{text-align:center}.utility-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;margin:0;box-sizing:border-box}.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:49%;display:inline-block;box-sizing:border-box;margin:0}}@media (max-width:500px){.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type{width:100%}.card-info[_ngcontent-%COMP%]{display:none}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%], .title-content[_ngcontent-%COMP%]{margin-top:40px}.blog-card[_ngcontent-%COMP%]{height:300px}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3em}.intro[_ngcontent-%COMP%]{font-size:.8em}}#profile-badges[_ngcontent-%COMP%]:after{content:"BRO";font-family:"Lato","Lucida Grande","Lucida Sans Unicode",Tahoma,Sans-Serif;font-size:13px;font-weight:500;text-transform:uppercase;padding:1px 4px;color:#000!important;border-radius:3px;position:relative;top:-2px;text-shadow:none!important;white-space:nowrap;letter-spacing:0;background:#FFDD40}.profile-header[_ngcontent-%COMP%]{background:#333 url(https://images.unsplash.com/photo-1435783099294-283725c37230?dpr=1&auto=compress,format&fit=crop&w=1376&h=635&q=80&cs=tinysrgb&crop=&bg=) top center no-repeat;background-size:cover;font-size:3em;position:relative}.profile-header[_ngcontent-%COMP%]:after{position:absolute;content:"";display:block;width:100%;height:100%;top:0;left:0;background:rgba(23,23,31,.42);z-index:0}#profile-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Abril Fatface,serif;font-size:1.2em}.profile-links[_ngcontent-%COMP%]   a[href*="nodws.com"][_ngcontent-%COMP%]:before{content:"\\2616";color:#0a45b5;padding-right:3px}.profile-links[_ngcontent-%COMP%]   a[href*=twitter][_ngcontent-%COMP%]:before{content:"\\1f426";color:#08c}.profile-links[_ngcontent-%COMP%]   a[href*=dribbble][_ngcontent-%COMP%]:before{content:"\\26be";color:#d055bf}#following-this-user[_ngcontent-%COMP%]{pointer-events:none}#follow-this-user[_ngcontent-%COMP%]{font-size:1.2em;border-color:#359ef9}#follow-this-user[_ngcontent-%COMP%]:after{content:"\\1f448"}.links-and-stats[_ngcontent-%COMP%]{background:rgb(20,20,21)}.profile-name[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-shadow:0 6px 9px rgba(0,0,0,.48)}.profile-avatar[_ngcontent-%COMP%]{bottom:-10px;width:150px;height:150px;border:0px solid #1E1E1E;background:rgba(2,2,2,.49);box-shadow:0 19px 19px -10px #000000a1}.profile-username[_ngcontent-%COMP%], .upsell[_ngcontent-%COMP%], .profile-location[_ngcontent-%COMP%], .primary-pro[_ngcontent-%COMP%]{opacity:0}.upsell[_ngcontent-%COMP%], #pen-as-header-question[_ngcontent-%COMP%]{display:none}.profile-nav-1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.2rem}.profile-bio[_ngcontent-%COMP%], .profile-nav-1[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .profile-nav-1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#14141596!important;font-size:1.2rem}.meta[_ngcontent-%COMP%]   .pen-title[_ngcontent-%COMP%]{font-family:"Droid Serif",serif;text-align:center}.pagination-button[_ngcontent-%COMP%]{background-color:#2f2f31;border-color:#2f2f31;transition:all .2s}.pagination-button[_ngcontent-%COMP%]:hover{box-shadow:0 3px 8px #0003}.single-project[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%], .single-pen[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{text-align:center;width:100%}.stats[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#bda26b}.stats[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .loves[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{fill:#2f2f3100!important;stroke:#ba6!important;stroke-width:.1em!important}.loves[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{stroke-width:.5em!important}.comments[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-width:.35em!important}.single-stat.loves.loved-1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff!important}.single-pen[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]:after{width:40%;transition:all .2s}.pen-actions[_ngcontent-%COMP%]{border:0px!important}.meta[_ngcontent-%COMP%]{box-shadow:none!important}']})}return t})(),GJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-chisiamo"]],decls:7,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["id","picture"],["id","content"],[1,"mb-4"]],template:function(r,i){1&r&&(nn(0,"link",0)(1,"div",1),le(2,"div",2)(3,"h2"),Ce(4,"Chi Siamo"),fe(),le(5,"p",3),Ce(6," Siamo un gruppo di appassionati di viaggi e di musica, con un amore particolare per le ferrovie. La nostra passione per l'esplorazione e la scoperta ci ha portato a creare SpotiRFI, un progetto unico che unisce la bellezza del viaggio in treno con il potere evocativo della musica. Ogni stazione ferroviaria sulla mappa diventa una tappa di un viaggio musicale attraverso la Sicilia, offrendo un'esperienza unica che speriamo possa arricchire i vostri viaggi tanto quanto ha arricchito i nostri. "),fe()())},styles:["#picture[_ngcontent-%COMP%]{background-image:url(https://www.ilportaledeitreni.it/wp-content/uploads/2020/10/E656.439D345.1118E656.590E646.028Carrozza-Centoporte-INV-Arquata-Scrivia-La-Spezia-Migliarina.jpg);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}h2[_ngcontent-%COMP%]{margin-top:2em}#content[_ngcontent-%COMP%]{max-width:58em;text-align:justify;margin:0 auto;padding:2em}"]})}return t})(),WJ=(()=>{class t{constructor(n){this.path="";let r=n.path().split("/");this.path=r[1].toUpperCase()}static#e=this.\u0275fac=function(r){return new(r||t)(Pe(ad))};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-tabellone"]],decls:50,vars:1,consts:[["href","https://fonts.cdnfonts.com/css/caros","rel","stylesheet"],[1,"background"],[1,"riga"],[1,"binario"],[1,"destinazione"],[1,"pdest"],[1,"treno"],[1,"ptreno"],[1,"partenza"],[1,"ppart"],[1,"info"],[1,"pinfo"]],template:function(r,i){1&r&&(nn(0,"link",0),le(1,"div",1),nn(2,"br"),le(3,"div",2)(4,"div",3)(5,"h2")(6,"b"),Ce(7,"1"),fe()()(),le(8,"div",4)(9,"p")(10,"b"),Ce(11,"destinazione "),fe(),le(12,"i"),Ce(13,"destination"),fe()(),le(14,"div",5)(15,"h4"),Ce(16),fe()()()(),nn(17,"br"),le(18,"div",2)(19,"div",6)(20,"p")(21,"b"),Ce(22,"treno "),fe(),le(23,"i"),Ce(24,"train"),fe()(),le(25,"div",7)(26,"h4"),Ce(27,"SPOTIRFI"),fe(),le(28,"h5"),Ce(29,"REG 21886"),fe()()(),le(30,"div",8)(31,"p")(32,"b"),Ce(33,"partenza "),fe(),le(34,"i"),Ce(35,"departure"),fe()(),le(36,"div",9)(37,"h4"),Ce(38,"CANCELLATO"),fe()()()(),nn(39,"br"),le(40,"div",2)(41,"div",10)(42,"p")(43,"b"),Ce(44,"informazioni "),fe(),le(45,"i"),Ce(46,"informations"),fe()(),le(47,"div",11)(48,"h4"),Ce(49,"E' SEVERAMENTE VIETATO ATTRAVERSARE LA LINEA GIALLA"),fe()()()()()),2&r&&(Ci(16),np(i.path))},styles:['@import"https://fonts.cdnfonts.com/css/caros";.background[_ngcontent-%COMP%]{width:40em;height:20.35em;background-color:#000;margin:auto}.riga[_ngcontent-%COMP%]{border-top:.1em white solid;width:38em;margin:0 1em}.binario[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}h2[_ngcontent-%COMP%]{font-size:5em}.destinazione[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.destinazione[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pdest[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 20s linear infinite}.pdest[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em;overflow:hidden}.treno[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}.treno[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ptreno[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:10.99em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ptreno[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em;margin-left:.2em;margin-bottom:.1em}.ptreno[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1em;margin-left:.2em}.partenza[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.partenza[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ppart[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ppart[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em}.info[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pinfo[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:38em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite;overflow:hidden}.pinfo[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8em;white-space:nowrap;position:relative;animation:_ngcontent-%COMP%_scroll-left 20s linear infinite}@keyframes _ngcontent-%COMP%_lighting{0%{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}to{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}}@keyframes _ngcontent-%COMP%_scroll-left{0%{transform:translate(100%)}to{transform:translate(-100%)}}']})}return t})(),ZJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-notfound"]],decls:6,vars:0,consts:[["controls","","autoplay",""],["src","assets/404.mp3","type","audio/mpeg"]],template:function(r,i){1&r&&(le(0,"article"),nn(1,"app-tabellone"),fe(),le(2,"article")(3,"audio",0),nn(4,"source",1),Ce(5," Il tuo browser non supporta l'elemento audio. "),fe()())},dependencies:[WJ],styles:["article[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;margin:6em;font-family:Merienda,cursive}"]})}return t})();function KJ(t,e){if(1&t&&(le(0,"li"),Ce(1),fe()),2&t){const n=e.$implicit;Ci(1),np(n)}}function QJ(t,e){if(1&t&&(le(0,"div",3),nn(1,"iframe",4)(2,"br")(3,"br")(4,"br"),le(5,"ul"),qo(6,KJ,2,1,"li",5),fe()()),2&t){const n=tc().index,r=tc();Ci(1),Ps("src",r.srcs[n],HE),Ci(5),Ps("ngForOf",r.stations[n])}}function YJ(t,e){if(1&t&&(le(0,"div",1),qo(1,QJ,7,2,"div",2),fe()),2&t){const n=e.$implicit,r=tc();Ci(1),Ps("ngIf",n.id==r.id)}}const JJ=[{path:"",component:C1},{path:"home",component:C1},{path:"tratte",component:qJ},{path:"chisiamo",component:GJ},{path:"tratta/:id",component:(()=>{class t{constructor(n,r,i){this.fireServ=n,this.route=r,this.sanitizer=i,this.id=null,this.tratte=[],this.stations=[],this.srcs=[]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.fireServ.getTratte().subscribe(n=>{let r=0;for(let i of n){let o;this.trattaSrc=this.sanitizer.bypassSecurityTrustResourceUrl(i.src),this.srcs.push(this.trattaSrc),this.stations[r]=this.stations[r]||[],o=i.stations.split("_"),this.stations[r]=o,r++}this.tratte=n})}static#e=this.\u0275fac=function(r){return new(r||t)(Pe(G2),Pe(uc),Pe(aO))};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-playlist-page"]],decls:1,vars:1,consts:[["class","container",4,"ngFor","ngForOf"],[1,"container"],["class","incontainer",4,"ngIf"],[1,"incontainer"],["width","100%","height","500","frameBorder","0","allowfullscreen","","allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture","loading","lazy",2,"border-radius","12px",3,"src"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&qo(0,YJ,2,1,"div",0),2&r&&Ps("ngForOf",i.tratte)},dependencies:[KT,QT],styles:['@import"https://fonts.cdnfonts.com/css/futura-std-4";.container[_ngcontent-%COMP%]{align-items:center;width:55%;margin-bottom:4em;margin-top:6em}.incontainer[_ngcontent-%COMP%]{align-items:center;font-family:Futura Std,sans-serif;font-weight:700;font-size:x-large}.map[_ngcontent-%COMP%]{display:block;margin:auto;width:75%;height:auto}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:auto;width:max-content}li[_ngcontent-%COMP%]:before{content:"";border-radius:50%;width:.625em;height:.625em;background:red;display:inline-block;margin-right:.625em}li[_ngcontent-%COMP%]{margin:.625em 0;position:relative}li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:.125em;height:calc(100% + .625em);background:red;left:.25em;top:.625em}li[_ngcontent-%COMP%]:first-child:after{top:.625em}li[_ngcontent-%COMP%]:last-child:after{height:0}@media screen and (min-width: 1025px) and (max-width: 1300px){.container[_ngcontent-%COMP%]{align-items:center;width:72%}}@media screen and (min-width: 768px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{align-items:center;width:77%}}@media screen and (min-width: 281px) and (max-width: 767px){.container[_ngcontent-%COMP%]{align-items:center;width:90%}}@media screen and (max-width: 280px){.container[_ngcontent-%COMP%]{align-items:center;width:97%}}']})}return t})()},{path:"**",component:ZJ}];let XJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gi({type:t});static#n=this.\u0275inj=Li({imports:[w1.forRoot(JJ),w1]})}return t})(),eX=(()=>{class t{sharePage(){navigator.share?navigator.share({title:"SpotiRFI",text:"",url:window.location.href}).then(()=>console.log("Pagina condivisa")).catch(n=>console.error("Errore: ",n)):window.alert("Condivisione non riuscita")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-navbar"]],decls:24,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body","fixed-top"],[1,"container-fluid"],["routerLink","home",1,"navbar-brand"],["src","assets/logocompatto.png","alt","Logo","height","30",1,"d-inline-block","align-text-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","tratte",1,"nav-link"],["routerLink","chisiamo",1,"nav-link"],["href","https://www.rfi.it/it.html","target","_blank",1,"nav-link"],["href","https://open.spotify.com/intl-it","target","_blank",1,"nav-link"],["type","button","id","shareButton",3,"click"],[1,"material-symbols-outlined"]],template:function(r,i){1&r&&(nn(0,"link",0),le(1,"nav",1)(2,"div",2)(3,"a",3),nn(4,"img",4),fe(),le(5,"button",5),nn(6,"span",6),fe(),le(7,"div",7)(8,"ul",8)(9,"li",9)(10,"a",10),Ce(11,"Le tratte"),fe()(),le(12,"li",9)(13,"a",11),Ce(14,"Chi siamo"),fe()(),le(15,"li",9)(16,"a",12),Ce(17," RFI "),fe()(),le(18,"li",9)(19,"a",13),Ce(20," Spotify "),fe()()()(),le(21,"button",14),ec("click",function(){return i.sharePage()}),le(22,"span",15),Ce(23,"share"),fe()()()())},dependencies:[Rp],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 24;cursor:pointer;color:#9fa2a4}#shareButton[_ngcontent-%COMP%]{color:transparent;background-color:transparent;border:transparent;float:right}nav[_ngcontent-%COMP%]{font-family:Merienda,cursive}']})}return t})(),tX=(()=>{class t{constructor(){}disclaimer(){window.alert("SpotiRFI \xe8 un sito indipendente e non \xe8 affiliato, sponsorizzato o approvato da Spotify o RFI. Non abbiamo l\u2019intenzione di ledere in alcun modo la loro immagine o reputazione. Il nostro obiettivo \xe8 fornire un servizio utile e di qualit\xe0 per i nostri utenti, nel rispetto dei diritti di propriet\xe0 intellettuale e delle normative vigenti.")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-footer"]],decls:66,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body"],[1,"layout"],[1,"footer-wrapper","clearfix"],[1,"grid-3","footer-logo"],["href","#"],["alt","html layout logo","src","assets/logo.png"],[1,"footer-text"],["type","button","id","liveAlertBtn",3,"click"],["id","liveAlertBtn",1,"material-symbols-outlined"],[1,"grid-3"],[1,"footer-heading"],[1,"footermenu"],["routerLink","tratte"],["routerLink","chisiamo"],["href","https://www.rfi.it/it.html","target","_blank"],["href","https://open.spotify.com/intl-it","target","_blank"],[1,"footer-contact"],["href","./tratta/08"],["href","./tratta/04"],["href","./tratta/02"],["href","./tratta/01"],["href","./tratta/05"],[1,"footerblog"],["href","https://www.fsitaliane.it/content/dam/fsitaliane/Documents/impegno/per-lambiente/progetti/Atlante%20delle%20linee%20ferroviarie%20dismesse.pdf","target","_blank"],["href","https://epodweb.rfi.it/Download.ashx?q=lTmHEqG6%2FeC61zq42ZZheV8ouJSzS%2B5udsN2POFdeD4hdoONi5u5MvreFVXiIbvj","target","_blank"],["href","https://www.rfi.it/it/chi-siamo/Il-rapporto-con-lo-Stato-e-con-gli-stakeholder/il-piano-commerciale.html","target","_blank"]],template:function(r,i){1&r&&(nn(0,"link",0),le(1,"footer",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),nn(6,"img",6),fe(),le(7,"p",7),Ce(8," SpotiRFI: Un viaggio musicale unico attraverso le linee ferroviarie della Sicilia. Ogni stazione, una nuova canzone. "),fe(),le(9,"button",8),ec("click",function(){return i.disclaimer()}),le(10,"span",9),Ce(11," info "),fe()()(),le(12,"div",10)(13,"p",11),Ce(14,"pagine"),fe(),le(15,"ul",12)(16,"li")(17,"a",13),Ce(18,"Le tratte"),fe()(),le(19,"li")(20,"a",14),Ce(21,"Chi siamo"),fe()(),le(22,"li")(23,"a",15),Ce(24,"RFI"),fe()(),le(25,"li")(26,"a",16),Ce(27,"Spotify"),fe()()()(),le(28,"div",10)(29,"p",11),Ce(30,"link"),fe(),le(31,"ul",17)(32,"li")(33,"a",18),Ce(34,"Palermo - Messina"),fe()(),le(35,"li")(36,"a",19),Ce(37,"Anello Ferroviario Palermo"),fe()(),le(38,"li")(39,"a",20),Ce(40,"Agrigento - Palermo"),fe()(),le(41,"li")(42,"a",21),Ce(43,"Siracusa - Caltanissetta"),fe()(),le(44,"li")(45,"a",22),Ce(46,"Catania - Gela"),fe()()()(),le(47,"div",10)(48,"p",11),Ce(49,"link utili"),fe(),le(50,"ul",23)(51,"li")(52,"a",24),Ce(53,"Linee dismesse"),fe(),le(54,"p"),Ce(55,"FS Italiane"),fe()(),le(56,"li")(57,"a",25),Ce(58,"Regolamento Circolazione Treni"),fe(),le(59,"p"),Ce(60,"RFI"),fe()(),le(61,"li")(62,"a",26),Ce(63,"Piano Commerciale"),fe(),le(64,"p"),Ce(65,"RFI"),fe()()()()()()())},dependencies:[Rp],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-%COMP%]{list-style:none;text-decoration:none;margin:0}img[_ngcontent-%COMP%]{height:3.7em}html[_ngcontent-%COMP%]{overflow-y:scroll}body[_ngcontent-%COMP%]{background:#b7b7b7 none repeat scroll 0 0;font-family:Open Sans,sans-serif}ul[_ngcontent-%COMP%]{padding:0}.clearfix[_ngcontent-%COMP%]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.clearfix[_ngcontent-%COMP%]{display:inline-block}*[_ngcontent-%COMP%]   html[_ngcontent-%COMP%]   .clearfix[_ngcontent-%COMP%]{height:1%}.clearfix[_ngcontent-%COMP%]{display:block}.layout[_ngcontent-%COMP%]{margin:0 auto;max-width:1170px;width:100%;padding:0 15px}.grid-3[_ngcontent-%COMP%]{width:25%;float:left;min-height:1px;padding-left:15px;padding-right:15px;position:relative}.footer-wrapper[_ngcontent-%COMP%]{padding:100px 0}.footer-text[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;margin:40px 0 0;text-align:justify}footer[_ngcontent-%COMP%]   .footer-heading[_ngcontent-%COMP%]{color:#e1e1e1;font:18px/19px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]{margin-top:32px}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{line-height:25px}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"-";margin:0 5px 0 0}.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;line-height:34px;text-transform:capitalize}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;margin:0 8px 0 0;color:#fff}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:14px}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#c7c7c7;font:13px/28px Open Sans,sans-serif;letter-spacing:1.2px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#b4b4b4;font:13px/18px Open Sans,sans-serif;letter-spacing:1.2px;padding-bottom:10px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c7c7c7;font:italic 12px/18px Open Sans,sans-serif}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#22c489}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 200,"GRAD" 200,"opsz" 24}button[_ngcontent-%COMP%]{background-color:transparent;border:none;margin:1em}#liveAlertPlaceholder[_ngcontent-%COMP%]{width:75%;margin:auto}@media (max-width:980px){.layout[_ngcontent-%COMP%]{width:767px}.grid-3[_ngcontent-%COMP%]{width:50%}.footer-heading[_ngcontent-%COMP%]{margin-top:18px}}@media (max-width:640px){.layout[_ngcontent-%COMP%]{width:300px}.grid-3[_ngcontent-%COMP%]{width:100%}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;float:none;line-height:25px}}']})}return t})(),nX=(()=>{class t{constructor(n){this.router=n,this.title="SpotiRFI",this.router.events.subscribe(r=>{r instanceof Ko&&window.scrollTo(0,0)})}static#e=this.\u0275fac=function(r){return new(r||t)(Pe(Ai))};static#t=this.\u0275cmp=pi({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(r,i){1&r&&nn(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[N0,eX,tX]})}return t})();const rX_firebaseConfig={apiKey:"AIzaSyBhT4vrImMOpXLps9RtD_GROoPflfGtM4U",authDomain:"spotirfi-cd7a9.firebaseapp.com",databaseURL:"https://spotirfi-cd7a9-default-rtdb.firebaseio.com",projectId:"spotirfi-cd7a9",storageBucket:"spotirfi-cd7a9.appspot.com",messagingSenderId:"207743558815",appId:"1:207743558815:web:1d28c36da0a303fca7eeaa",measurementId:"G-8Z6DVSWE34"};let iX=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gi({type:t,bootstrap:[nX]});static#n=this.\u0275inj=Li({providers:[tA],imports:[b6,XJ,t7.initializeApp(rX_firebaseConfig),jJ]})}return t})();C6().bootstrapModule(iX).catch(t=>console.error(t))},58:(Xi,Ln,ze)=>{ze.d(Ln,{BH:()=>vt,G6:()=>Qr,L:()=>_t,LL:()=>Z,Pz:()=>lt,Sg:()=>or,UG:()=>K,ZB:()=>Ee,ZR:()=>Y,aH:()=>Nt,b$:()=>Kr,eu:()=>L,hl:()=>O,jU:()=>Xt,m9:()=>lu,ne:()=>ro,pd:()=>uu,r3:()=>An,ru:()=>en,tV:()=>Q,uI:()=>Fn,vZ:()=>to,w1:()=>xi,xO:()=>Zs,xb:()=>Mr,z$:()=>tt,zd:()=>Nr});const Fe=function(D){const w=[];let A=0;for(let q=0;q<D.length;q++){let M=D.charCodeAt(q);M<128?w[A++]=M:M<2048?(w[A++]=M>>6|192,w[A++]=63&M|128):55296==(64512&M)&&q+1<D.length&&56320==(64512&D.charCodeAt(q+1))?(M=65536+((1023&M)<<10)+(1023&D.charCodeAt(++q)),w[A++]=M>>18|240,w[A++]=M>>12&63|128,w[A++]=M>>6&63|128,w[A++]=63&M|128):(w[A++]=M>>12|224,w[A++]=M>>6&63|128,w[A++]=63&M|128)}return w},qe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(D,w){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=w?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let M=0;M<D.length;M+=3){const pe=D[M],Ie=M+1<D.length,Ae=Ie?D[M+1]:0,vr=M+2<D.length,we=vr?D[M+2]:0;let ct=(15&Ae)<<2|we>>6,li=63&we;vr||(li=64,Ie||(ct=64)),q.push(A[pe>>2],A[(3&pe)<<4|Ae>>4],A[ct],A[li])}return q.join("")},encodeString(D,w){return this.HAS_NATIVE_SUPPORT&&!w?btoa(D):this.encodeByteArray(Fe(D),w)},decodeString(D,w){return this.HAS_NATIVE_SUPPORT&&!w?atob(D):function(D){const w=[];let A=0,q=0;for(;A<D.length;){const M=D[A++];if(M<128)w[q++]=String.fromCharCode(M);else if(M>191&&M<224){const pe=D[A++];w[q++]=String.fromCharCode((31&M)<<6|63&pe)}else if(M>239&&M<365){const vr=((7&M)<<18|(63&D[A++])<<12|(63&D[A++])<<6|63&D[A++])-65536;w[q++]=String.fromCharCode(55296+(vr>>10)),w[q++]=String.fromCharCode(56320+(1023&vr))}else{const pe=D[A++],Ie=D[A++];w[q++]=String.fromCharCode((15&M)<<12|(63&pe)<<6|63&Ie)}}return w.join("")}(this.decodeStringToByteArray(D,w))},decodeStringToByteArray(D,w){this.init_();const A=w?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let M=0;M<D.length;){const pe=A[D.charAt(M++)],Ae=M<D.length?A[D.charAt(M)]:0;++M;const we=M<D.length?A[D.charAt(M)]:64;++M;const Ke=M<D.length?A[D.charAt(M)]:64;if(++M,null==pe||null==Ae||null==we||null==Ke)throw new dn;q.push(pe<<2|Ae>>4),64!==we&&(q.push(Ae<<4&240|we>>2),64!==Ke&&q.push(we<<6&192|Ke))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class dn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _t=function(D){return function(D){const w=Fe(D);return qe.encodeByteArray(w,!0)}(D).replace(/\./g,"")},Q=function(D){try{return qe.decodeString(D,!0)}catch(w){console.error("base64Decode failed: ",w)}return null};function Ee(D,w){if(!(w instanceof Object))return w;switch(w.constructor){case Date:return new Date(w.getTime());case Object:void 0===D&&(D={});break;case Array:D=[];break;default:return w}for(const A in w)!w.hasOwnProperty(A)||!Je(A)||(D[A]=Ee(D[A],w[A]));return D}function Je(D){return"__proto__"!==D}const et=()=>{try{return function ut(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const D=process.env.__FIREBASE_DEFAULTS__;return D?JSON.parse(D):void 0})()||(()=>{if(typeof document>"u")return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const w=D&&Q(D[1]);return w&&JSON.parse(w)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},Nt=()=>{var D;return null===(D=et())||void 0===D?void 0:D.config},lt=D=>{var w;return null===(w=et())||void 0===w?void 0:w[`_${D}`]};class vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((w,A)=>{this.resolve=w,this.reject=A})}wrapCallback(w){return(A,q)=>{A?this.reject(A):this.resolve(q),"function"==typeof w&&(this.promise.catch(()=>{}),1===w.length?w(A):w(A,q))}}}function or(D,w){if(D.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=w||"demo-project",M=D.iat||0,pe=D.sub||D.user_id;if(!pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ie=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:M,exp:M+3600,auth_time:M,sub:pe,user_id:pe,firebase:{sign_in_provider:"custom",identities:{}}},D);return[_t(JSON.stringify({alg:"none",type:"JWT"})),_t(JSON.stringify(Ie)),""].join(".")}function tt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function K(){var D;const w=null===(D=et())||void 0===D?void 0:D.forceEnvironment;if("node"===w)return!0;if("browser"===w)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xt(){return"object"==typeof self&&self.self===self}function en(){const D="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof D&&void 0!==D.id}function Kr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xi(){const D=tt();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function Qr(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O(){try{return"object"==typeof indexedDB}catch{return!1}}function L(){return new Promise((D,w)=>{try{let A=!0;const q="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(q);M.onsuccess=()=>{M.result.close(),A||self.indexedDB.deleteDatabase(q),D(!0)},M.onupgradeneeded=()=>{A=!1},M.onerror=()=>{var pe;w((null===(pe=M.error)||void 0===pe?void 0:pe.message)||"")}}catch(A){w(A)}})}class Y extends Error{constructor(w,A,q){super(A),this.code=w,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Z.prototype.create)}}class Z{constructor(w,A,q){this.service=w,this.serviceName=A,this.errors=q}create(w,...A){const q=A[0]||{},M=`${this.service}/${w}`,pe=this.errors[w],Ie=pe?function Me(D,w){return D.replace(it,(A,q)=>{const M=w[q];return null!=M?String(M):`<${q}?>`})}(pe,q):"Error";return new Y(M,`${this.serviceName}: ${Ie} (${M}).`,q)}}const it=/\{\$([^}]+)}/g;function An(D,w){return Object.prototype.hasOwnProperty.call(D,w)}function Mr(D){for(const w in D)if(Object.prototype.hasOwnProperty.call(D,w))return!1;return!0}function to(D,w){if(D===w)return!0;const A=Object.keys(D),q=Object.keys(w);for(const M of A){if(!q.includes(M))return!1;const pe=D[M],Ie=w[M];if(xr(pe)&&xr(Ie)){if(!to(pe,Ie))return!1}else if(pe!==Ie)return!1}for(const M of q)if(!A.includes(M))return!1;return!0}function xr(D){return null!==D&&"object"==typeof D}function Zs(D){const w=[];for(const[A,q]of Object.entries(D))Array.isArray(q)?q.forEach(M=>{w.push(encodeURIComponent(A)+"="+encodeURIComponent(M))}):w.push(encodeURIComponent(A)+"="+encodeURIComponent(q));return w.length?"&"+w.join("&"):""}function Nr(D){const w={};return D.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[M,pe]=q.split("=");w[decodeURIComponent(M)]=decodeURIComponent(pe)}}),w}function uu(D){const w=D.indexOf("?");if(!w)return"";const A=D.indexOf("#",w);return D.substring(w,A>0?A:void 0)}function ro(D,w){const A=new Ni(D,w);return A.subscribe.bind(A)}class Ni{constructor(w,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{w(this)}).catch(q=>{this.error(q)})}next(w){this.forEachObserver(A=>{A.next(w)})}error(w){this.forEachObserver(A=>{A.error(w)}),this.close(w)}complete(){this.forEachObserver(w=>{w.complete()}),this.close()}subscribe(w,A,q){let M;if(void 0===w&&void 0===A&&void 0===q)throw new Error("Missing Observer.");M=function Oi(D,w){if("object"!=typeof D||null===D)return!1;for(const A of w)if(A in D&&"function"==typeof D[A])return!0;return!1}(w,["next","error","complete"])?w:{next:w,error:A,complete:q},void 0===M.next&&(M.next=To),void 0===M.error&&(M.error=To),void 0===M.complete&&(M.complete=To);const pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),pe}unsubscribeOne(w){void 0===this.observers||void 0===this.observers[w]||(delete this.observers[w],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(w){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,w)}sendOne(w,A){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[w])try{A(this.observers[w])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(w){this.finalized||(this.finalized=!0,void 0!==w&&(this.finalError=w),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function To(){}function lu(D){return D&&D._delegate?D._delegate:D}},106:(Xi,Ln,ze)=>{ze.d(Ln,{Z:()=>_n});var E=ze(58),ve=ze(537),V=ze(534),Fe=ze(879);class Jt{constructor(Ze,et){this._delegate=Ze,this.firebase=et,(0,V._addComponent)(Ze,new ve.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(Ze,et=V._DEFAULT_ENTRY_NAME){var yn;this._delegate.checkDestroyed();const Wn=this._delegate.container.getProvider(Ze);return!Wn.isInitialized()&&"EXPLICIT"===(null===(yn=Wn.getComponent())||void 0===yn?void 0:yn.instantiationMode)&&Wn.initialize(),Wn.getImmediate({identifier:et})}_removeServiceInstance(Ze,et=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(et)}_addComponent(Ze){(0,V._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,V._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const dn=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function _t(){const yt=function Gn(yt){const Ze={},et={__esModule:!0,initializeApp:function Nt(tt,Fn={}){const K=V.initializeApp(tt,Fn);if((0,E.r3)(Ze,K.name))return Ze[K.name];const Xt=new yt(K,et);return Ze[K.name]=Xt,Xt},app:Wn,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function vt(tt){const Fn=tt.name,K=Fn.replace("-compat","");if(V._registerComponent(tt)&&"PUBLIC"===tt.type){const Xt=(en=Wn())=>{if("function"!=typeof en[K])throw dn.create("invalid-app-argument",{appName:Fn});return en[K]()};void 0!==tt.serviceProps&&(0,E.ZB)(Xt,tt.serviceProps),et[K]=Xt,yt.prototype[K]=function(...en){return this._getService.bind(this,Fn).apply(this,tt.multipleInstances?en:[])}}return"PUBLIC"===tt.type?et[K]:null},removeApp:function yn(tt){delete Ze[tt]},useAsService:function or(tt,Fn){return"serverAuth"===Fn?null:Fn},modularAPIs:V}};function Wn(tt){if(!(0,E.r3)(Ze,tt=tt||V._DEFAULT_ENTRY_NAME))throw dn.create("no-app",{appName:tt});return Ze[tt]}return et.default=et,Object.defineProperty(et,"apps",{get:function lt(){return Object.keys(Ze).map(tt=>Ze[tt])}}),Wn.App=yt,et}(Jt);return yt.INTERNAL=Object.assign(Object.assign({},yt.INTERNAL),{createFirebaseNamespace:_t,extendNamespace:function Ze(et){(0,E.ZB)(yt,et)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),yt}(),te=new Fe.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const yt=self.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _n=Q;!function ut(yt){(0,V.registerVersion)("@firebase/app-compat","0.2.24",yt)}()},534:(Xi,Ln,ze)=>{ze.r(Ln),ze.d(Ln,{FirebaseError:()=>Fe.ZR,SDK_VERSION:()=>so,_DEFAULT_ENTRY_NAME:()=>Nr,_addComponent:()=>Ni,_addOrOverwriteComponent:()=>yr,_apps:()=>Or,_clearComponents:()=>io,_components:()=>ro,_getProvider:()=>To,_registerComponent:()=>Oi,_removeServiceInstance:()=>Co,deleteApp:()=>ci,getApp:()=>Ks,getApps:()=>Qs,initializeApp:()=>cu,onLog:()=>us,registerVersion:()=>Do,setLogLevel:()=>qt});var E=ze(861),ve=ze(537),V=ze(879),Fe=ze(58);const Jt=(F,b)=>b.some(X=>F instanceof X);let qe,dn;const Q=new WeakMap,te=new WeakMap,Ee=new WeakMap,Je=new WeakMap,ut=new WeakMap;let Ze={get(F,b,X){if(F instanceof IDBTransaction){if("done"===b)return te.get(F);if("objectStoreNames"===b)return F.objectStoreNames||Ee.get(F);if("store"===b)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Nt(F[b])},set:(F,b,X)=>(F[b]=X,!0),has:(F,b)=>F instanceof IDBTransaction&&("done"===b||"store"===b)||b in F};function Wn(F){return"function"==typeof F?function yn(F){return F!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _t(){return dn||(dn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(F)?function(...b){return F.apply(lt(this),b),Nt(Q.get(this))}:function(...b){return Nt(F.apply(lt(this),b))}:function(b,...X){const _e=F.call(lt(this),b,...X);return Ee.set(_e,b.sort?b.sort():[b]),Nt(_e)}}(F):(F instanceof IDBTransaction&&function yt(F){if(te.has(F))return;const b=new Promise((X,_e)=>{const $e=()=>{F.removeEventListener("complete",nt),F.removeEventListener("error",H),F.removeEventListener("abort",H)},nt=()=>{X(),$e()},H=()=>{_e(F.error||new DOMException("AbortError","AbortError")),$e()};F.addEventListener("complete",nt),F.addEventListener("error",H),F.addEventListener("abort",H)});te.set(F,b)}(F),Jt(F,function Gn(){return qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(F,Ze):F)}function Nt(F){if(F instanceof IDBRequest)return function _n(F){const b=new Promise((X,_e)=>{const $e=()=>{F.removeEventListener("success",nt),F.removeEventListener("error",H)},nt=()=>{X(Nt(F.result)),$e()},H=()=>{_e(F.error),$e()};F.addEventListener("success",nt),F.addEventListener("error",H)});return b.then(X=>{X instanceof IDBCursor&&Q.set(X,F)}).catch(()=>{}),ut.set(b,F),b}(F);if(Je.has(F))return Je.get(F);const b=Wn(F);return b!==F&&(Je.set(F,b),ut.set(b,F)),b}const lt=F=>ut.get(F),tt=["get","getKey","getAll","getAllKeys","count"],Fn=["put","add","delete","clear"],K=new Map;function Xt(F,b){if(!(F instanceof IDBDatabase)||b in F||"string"!=typeof b)return;if(K.get(b))return K.get(b);const X=b.replace(/FromIndex$/,""),_e=b!==X,$e=Fn.includes(X);if(!(X in(_e?IDBIndex:IDBObjectStore).prototype)||!$e&&!tt.includes(X))return;const nt=function(){var H=(0,E.Z)(function*(Lt,...St){const di=this.transaction(Lt,$e?"readwrite":"readonly");let bo=di.store;return _e&&(bo=bo.index(St.shift())),(yield Promise.all([bo[X](...St),$e&&di.done]))[0]});return function(St){return H.apply(this,arguments)}}();return K.set(b,nt),nt}!function et(F){Ze=F(Ze)}(F=>({...F,get:(b,X,_e)=>Xt(b,X)||F.get(b,X,_e),has:(b,X)=>!!Xt(b,X)||F.has(b,X)}));class en{constructor(b){this.container=b}getPlatformInfoString(){return this.container.getProviders().map(X=>{if(function Kr(F){const b=F.getComponent();return"VERSION"===b?.type}(X)){const _e=X.getImmediate();return`${_e.library}/${_e.version}`}return null}).filter(X=>X).join(" ")}}const eo="@firebase/app",_r=new V.Yd("@firebase/app"),Nr="[DEFAULT]",uu={[eo]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Or=new Map,ro=new Map;function Ni(F,b){try{F.container.addComponent(b)}catch(X){_r.debug(`Component ${b.name} failed to register with FirebaseApp ${F.name}`,X)}}function yr(F,b){F.container.addOrOverwriteComponent(b)}function Oi(F){const b=F.name;if(ro.has(b))return _r.debug(`There were multiple attempts to register component ${b}.`),!1;ro.set(b,F);for(const X of Or.values())Ni(X,F);return!0}function To(F,b){const X=F.container.getProvider("heartbeat").getImmediate({optional:!0});return X&&X.triggerHeartbeat(),F.container.getProvider(b)}function Co(F,b,X=Nr){To(F,b).clearInstance(X)}function io(){ro.clear()}const Yr=new Fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zn{constructor(b,X,_e){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},X),this._name=X.name,this._automaticDataCollectionEnabled=X.automaticDataCollectionEnabled,this._container=_e,this.container.addComponent(new ve.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(b){this.checkDestroyed(),this._automaticDataCollectionEnabled=b}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(b){this._isDeleted=b}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}const so="10.7.0";function cu(F,b={}){let X=F;"object"!=typeof b&&(b={name:b});const _e=Object.assign({name:Nr,automaticDataCollectionEnabled:!1},b),$e=_e.name;if("string"!=typeof $e||!$e)throw Yr.create("bad-app-name",{appName:String($e)});if(X||(X=(0,Fe.aH)()),!X)throw Yr.create("no-options");const nt=Or.get($e);if(nt){if((0,Fe.vZ)(X,nt.options)&&(0,Fe.vZ)(_e,nt.config))return nt;throw Yr.create("duplicate-app",{appName:$e})}const H=new ve.H0($e);for(const St of ro.values())H.addComponent(St);const Lt=new Zn(X,_e,H);return Or.set($e,Lt),Lt}function Ks(F=Nr){const b=Or.get(F);if(!b&&F===Nr&&(0,Fe.aH)())return cu();if(!b)throw Yr.create("no-app",{appName:F});return b}function Qs(){return Array.from(Or.values())}function ci(F){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,E.Z)(function*(F){const b=F.name;Or.has(b)&&(Or.delete(b),yield Promise.all(F.container.getProviders().map(X=>X.delete())),F.isDeleted=!0)})).apply(this,arguments)}function Do(F,b,X){var _e;let $e=null!==(_e=uu[F])&&void 0!==_e?_e:F;X&&($e+=`-${X}`);const nt=$e.match(/\s|\//),H=b.match(/\s|\//);if(nt||H){const Lt=[`Unable to register library "${$e}" with version "${b}":`];return nt&&Lt.push(`library name "${$e}" contains illegal characters (whitespace or "/")`),nt&&H&&Lt.push("and"),H&&Lt.push(`version name "${b}" contains illegal characters (whitespace or "/")`),void _r.warn(Lt.join(" "))}Oi(new ve.wA(`${$e}-version`,()=>({library:$e,version:b}),"VERSION"))}function us(F,b){if(null!==F&&"function"!=typeof F)throw Yr.create("invalid-log-argument");(0,V.Am)(F,b)}function qt(F){(0,V.Ub)(F)}const Ys="firebase-heartbeat-database",lu=1,D="firebase-heartbeat-store";let w=null;function A(){return w||(w=function vt(F,b,{blocked:X,upgrade:_e,blocking:$e,terminated:nt}={}){const H=indexedDB.open(F,b),Lt=Nt(H);return _e&&H.addEventListener("upgradeneeded",St=>{_e(Nt(H.result),St.oldVersion,St.newVersion,Nt(H.transaction),St)}),X&&H.addEventListener("blocked",St=>X(St.oldVersion,St.newVersion,St)),Lt.then(St=>{nt&&St.addEventListener("close",()=>nt()),$e&&St.addEventListener("versionchange",di=>$e(di.oldVersion,di.newVersion,di))}).catch(()=>{}),Lt}(Ys,lu,{upgrade:(F,b)=>{0===b&&F.createObjectStore(D)}}).catch(F=>{throw Yr.create("idb-open",{originalErrorMessage:F.message})})),w}function M(){return(M=(0,E.Z)(function*(F){try{return yield(yield A()).transaction(D).objectStore(D).get(Ae(F))}catch(b){if(b instanceof Fe.ZR)_r.warn(b.message);else{const X=Yr.create("idb-get",{originalErrorMessage:b?.message});_r.warn(X.message)}}})).apply(this,arguments)}function pe(F,b){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,E.Z)(function*(F,b){try{const _e=(yield A()).transaction(D,"readwrite");yield _e.objectStore(D).put(b,Ae(F)),yield _e.done}catch(X){if(X instanceof Fe.ZR)_r.warn(X.message);else{const _e=Yr.create("idb-set",{originalErrorMessage:X?.message});_r.warn(_e.message)}}})).apply(this,arguments)}function Ae(F){return`${F.name}!${F.options.appId}`}class Ue{constructor(b){this.container=b,this._heartbeatsCache=null;const X=this.container.getProvider("app").getImmediate();this._storage=new li(X),this._heartbeatsCachePromise=this._storage.read().then(_e=>(this._heartbeatsCache=_e,_e))}triggerHeartbeat(){var b=this;return(0,E.Z)(function*(){var X,_e;const nt=b.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),H=Ke();if((null!=(null===(X=b._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||(b._heartbeatsCache=yield b._heartbeatsCachePromise,null!=(null===(_e=b._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)))&&b._heartbeatsCache.lastSentHeartbeatDate!==H&&!b._heartbeatsCache.heartbeats.some(Lt=>Lt.date===H))return b._heartbeatsCache.heartbeats.push({date:H,agent:nt}),b._heartbeatsCache.heartbeats=b._heartbeatsCache.heartbeats.filter(Lt=>{const St=new Date(Lt.date).valueOf();return Date.now()-St<=2592e6}),b._storage.overwrite(b._heartbeatsCache)})()}getHeartbeatsHeader(){var b=this;return(0,E.Z)(function*(){var X;if(null===b._heartbeatsCache&&(yield b._heartbeatsCachePromise),null==(null===(X=b._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||0===b._heartbeatsCache.heartbeats.length)return"";const _e=Ke(),{heartbeatsToSend:$e,unsentEntries:nt}=function ct(F,b=1024){const X=[];let _e=F.slice();for(const $e of F){const nt=X.find(H=>H.agent===$e.agent);if(nt){if(nt.dates.push($e.date),cs(X)>b){nt.dates.pop();break}}else if(X.push({agent:$e.agent,dates:[$e.date]}),cs(X)>b){X.pop();break}_e=_e.slice(1)}return{heartbeatsToSend:X,unsentEntries:_e}}(b._heartbeatsCache.heartbeats),H=(0,Fe.L)(JSON.stringify({version:2,heartbeats:$e}));return b._heartbeatsCache.lastSentHeartbeatDate=_e,nt.length>0?(b._heartbeatsCache.heartbeats=nt,yield b._storage.overwrite(b._heartbeatsCache)):(b._heartbeatsCache.heartbeats=[],b._storage.overwrite(b._heartbeatsCache)),H})()}}function Ke(){return(new Date).toISOString().substring(0,10)}class li{constructor(b){this.app=b,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Fe.hl)()&&(0,Fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var b=this;return(0,E.Z)(function*(){if(yield b._canUseIndexedDBPromise){const _e=yield function q(F){return M.apply(this,arguments)}(b.app);return _e?.heartbeats?_e:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(b){var X=this;return(0,E.Z)(function*(){var _e;if(yield X._canUseIndexedDBPromise){const nt=yield X.read();return pe(X.app,{lastSentHeartbeatDate:null!==(_e=b.lastSentHeartbeatDate)&&void 0!==_e?_e:nt.lastSentHeartbeatDate,heartbeats:b.heartbeats})}})()}add(b){var X=this;return(0,E.Z)(function*(){var _e;if(yield X._canUseIndexedDBPromise){const nt=yield X.read();return pe(X.app,{lastSentHeartbeatDate:null!==(_e=b.lastSentHeartbeatDate)&&void 0!==_e?_e:nt.lastSentHeartbeatDate,heartbeats:[...nt.heartbeats,...b.heartbeats]})}})()}}function cs(F){return(0,Fe.L)(JSON.stringify({version:2,heartbeats:F})).length}!function kc(F){Oi(new ve.wA("platform-logger",b=>new en(b),"PRIVATE")),Oi(new ve.wA("heartbeat",b=>new Ue(b),"PRIVATE")),Do(eo,"0.9.24",F),Do(eo,"0.9.24","esm2017"),Do("fire-js","")}("")},537:(Xi,Ln,ze)=>{ze.d(Ln,{H0:()=>Gn,wA:()=>V});var E=ze(861),ve=ze(58);class V{constructor(Q,te,Ee){this.name=Q,this.instanceFactory=te,this.type=Ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const Fe="[DEFAULT]";class Jt{constructor(Q,te){this.name=Q,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const te=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(te)){const Ee=new ve.BH;if(this.instancesDeferred.set(te,Ee),this.isInitialized(te)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:te});Je&&Ee.resolve(Je)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(Q){var te;const Ee=this.normalizeInstanceIdentifier(Q?.identifier),Je=null!==(te=Q?.optional)&&void 0!==te&&te;if(!this.isInitialized(Ee)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ee})}catch(ut){if(Je)return null;throw ut}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function dn(_t){return"EAGER"===_t.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:Fe})}catch{}for(const[te,Ee]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(te);try{const ut=this.getOrInitializeService({instanceIdentifier:Je});Ee.resolve(ut)}catch{}}}}clearInstance(Q=Fe){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,E.Z)(function*(){const te=Array.from(Q.instances.values());yield Promise.all([...te.filter(Ee=>"INTERNAL"in Ee).map(Ee=>Ee.INTERNAL.delete()),...te.filter(Ee=>"_delete"in Ee).map(Ee=>Ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=Fe){return this.instances.has(Q)}getOptions(Q=Fe){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:te={}}=Q,Ee=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(Ee))throw Error(`${this.name}(${Ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:Ee,options:te});for(const[ut,_n]of this.instancesDeferred.entries())Ee===this.normalizeInstanceIdentifier(ut)&&_n.resolve(Je);return Je}onInit(Q,te){var Ee;const Je=this.normalizeInstanceIdentifier(te),ut=null!==(Ee=this.onInitCallbacks.get(Je))&&void 0!==Ee?Ee:new Set;ut.add(Q),this.onInitCallbacks.set(Je,ut);const _n=this.instances.get(Je);return _n&&Q(_n,Je),()=>{ut.delete(Q)}}invokeOnInitCallbacks(Q,te){const Ee=this.onInitCallbacks.get(te);if(Ee)for(const Je of Ee)try{Je(Q,te)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:te={}}){let Ee=this.instances.get(Q);if(!Ee&&this.component&&(Ee=this.component.instanceFactory(this.container,{instanceIdentifier:(_t=Q,_t===Fe?void 0:_t),options:te}),this.instances.set(Q,Ee),this.instancesOptions.set(Q,te),this.invokeOnInitCallbacks(Ee,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,Ee)}catch{}var _t;return Ee||null}normalizeInstanceIdentifier(Q=Fe){return this.component?this.component.multipleInstances?Q:Fe:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Gn{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const te=this.getProvider(Q.name);if(te.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);te.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const te=new Jt(Q,this);return this.providers.set(Q,te),te}getProviders(){return Array.from(this.providers.values())}}},879:(Xi,Ln,ze)=>{ze.d(Ln,{Am:()=>_t,Ub:()=>Gn,Yd:()=>dn,in:()=>ve});const E=[];var ve=function(Q){return Q[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",Q}(ve||{});const V={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},Fe=ve.INFO,Jt={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},qe=(Q,te,...Ee)=>{if(te<Q.logLevel)return;const Je=(new Date).toISOString(),ut=Jt[te];if(!ut)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[ut](`[${Je}]  ${Q.name}:`,...Ee)};class dn{constructor(te){this.name=te,this._logLevel=Fe,this._logHandler=qe,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in ve))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?V[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...te),this._logHandler(this,ve.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...te),this._logHandler(this,ve.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...te),this._logHandler(this,ve.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...te),this._logHandler(this,ve.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...te),this._logHandler(this,ve.ERROR,...te)}}function Gn(Q){E.forEach(te=>{te.setLogLevel(Q)})}function _t(Q,te){for(const Ee of E){let Je=null;te&&te.level&&(Je=V[te.level]),Ee.userLogHandler=null===Q?null:(ut,_n,...yt)=>{const Ze=yt.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");_n>=(Je??ut.logLevel)&&Q({level:ve[_n].toLowerCase(),message:Ze,args:yt,type:ut.name})}}}},377:(Xi,Ln,ze)=>{ze.r(Ln);var E=ze(861),ve=ze(106),V=ze(58),Fe=ze(534),Jt=ze(879),qe=ze(582),dn=ze(537);const _t={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const _n=function Je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},yt=function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yn=new Jt.Yd("@firebase/auth");function Nt(h,...c){yn.logLevel<=Jt.in.ERROR&&yn.error(`Auth (${Fe.SDK_VERSION}): ${h}`,...c)}function lt(h,...c){throw Fn(h,...c)}function vt(h,...c){return Fn(h,...c)}function or(h,c,l){const p=Object.assign(Object.assign({},yt()),{[c]:l});return new V.LL("auth","Firebase",p).create(c,{appName:h.name})}function tt(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&lt(h,"argument-error"),or(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fn(h,...c){if("string"!=typeof h){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=h.name),h._errorFactory.create(l,...p)}return Ze.create(h,...c)}function K(h,c,...l){if(!h)throw Fn(c,...l)}function Xt(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Nt(c),new Error(c)}function en(h,c){h||Xt(c)}function Kr(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function eo(){return"http:"===xi()||"https:"===xi()}function xi(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class Qr{constructor(c,l){this.shortDelay=c,this.longDelay=l,en(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function _r(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(eo()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function O(h,c){en(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class L{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const G={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},z=new Qr(3e4,6e4);function Y(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function Z(h,c,l,p){return Me.apply(this,arguments)}function Me(){return(Me=(0,E.Z)(function*(h,c,l,p,m={}){return it(h,m,(0,E.Z)(function*(){let v={},T={};p&&("GET"===c?T=p:v={body:JSON.stringify(p)});const P=(0,V.xO)(Object.assign({key:h.config.apiKey},T)).slice(1),j=yield h._getAdditionalHeaders();return j["Content-Type"]="application/json",h.languageCode&&(j["X-Firebase-Locale"]=h.languageCode),L.fetch()(an(h,h.config.apiHost,l,P),Object.assign({method:c,headers:j,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function it(h,c,l){return hn.apply(this,arguments)}function hn(){return(hn=(0,E.Z)(function*(h,c,l){h._canInitEmulator=!1;const p=Object.assign(Object.assign({},G),c);try{const m=new Vn(h),v=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const T=yield v.json();if("needConfirmation"in T)throw vn(h,"account-exists-with-different-credential",T);if(v.ok&&!("errorMessage"in T))return T;{const P=v.ok?T.errorMessage:T.error.message,[j,ae]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===j)throw vn(h,"credential-already-in-use",T);if("EMAIL_EXISTS"===j)throw vn(h,"email-already-in-use",T);if("USER_DISABLED"===j)throw vn(h,"user-disabled",T);const ge=p[j]||j.toLowerCase().replace(/[_\s]+/g,"-");if(ae)throw or(h,ge,ae);lt(h,ge)}}catch(m){if(m instanceof V.ZR)throw m;lt(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function Re(h,c,l,p){return dt.apply(this,arguments)}function dt(){return(dt=(0,E.Z)(function*(h,c,l,p,m={}){const v=yield Z(h,c,l,p,m);return"mfaPendingCredential"in v&&lt(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function an(h,c,l,p){const m=`${c}${l}?${p}`;return h.config.emulator?O(h.config,m):`${h.config.apiScheme}://${m}`}function ke(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(vt(this.auth,"network-request-failed")),z.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vn(h,c,l){const p={appName:h.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const m=vt(h,c,p);return m.customData._tokenResponse=l,m}function An(h){return void 0!==h&&void 0!==h.getResponse}function Ct(h){return void 0!==h&&void 0!==h.enterprise}class Mr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return ke(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function to(){return(to=(0,E.Z)(function*(h){return(yield Z(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xr(h,c){return no.apply(this,arguments)}function no(){return(no=(0,E.Z)(function*(h,c){return Z(h,"GET","/v2/recaptchaConfig",Y(h,c))})).apply(this,arguments)}function Nr(){return(Nr=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Or(){return(Or=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ni(){return(Ni=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function yr(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Co(){return(Co=(0,E.Z)(function*(h,c=!1){const l=(0,V.m9)(h),p=yield l.getIdToken(c),m=oo(p);K(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const v="object"==typeof m.firebase?m.firebase:void 0,T=v?.sign_in_provider;return{claims:m,token:p,authTime:yr(io(m.auth_time)),issuedAtTime:yr(io(m.iat)),expirationTime:yr(io(m.exp)),signInProvider:T||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function io(h){return 1e3*Number(h)}function oo(h){const[c,l,p]=h.split(".");if(void 0===c||void 0===l||void 0===p)return Nt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,V.tV)(l);return m?JSON.parse(m):(Nt("Failed to decode base64 JWT payload"),null)}catch(m){return Nt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function Zn(h,c){return so.apply(this,arguments)}function so(){return(so=(0,E.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof V.ZR&&function cu({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(p)&&h.auth.currentUser===h&&(yield h.auth.signOut()),p}})).apply(this,arguments)}class Ks{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,E.Z)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,E.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Qs{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ci(h){return Kn.apply(this,arguments)}function Kn(){return Kn=(0,E.Z)(function*(h){var c;const l=h.auth,p=yield h.getIdToken(),m=yield Zn(h,function ro(h,c){return Ni.apply(this,arguments)}(l,{idToken:p}));K(m?.users.length,l,"internal-error");const v=m.users[0];h._notifyReloadListener(v);const T=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function Ys(h){return h.map(c=>{var{providerId:l}=c,p=(0,qe._T)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],P=function qt(h,c){return[...h.filter(p=>!c.some(m=>m.providerId===p.providerId)),...c]}(h.providerData,T),ge=!!h.isAnonymous&&!(h.email&&v.passwordHash||P?.length),ye={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:P,metadata:new Qs(v.createdAt,v.lastLoginAt),isAnonymous:ge};Object.assign(h,ye)}),Kn.apply(this,arguments)}function us(){return(us=(0,E.Z)(function*(h){const c=(0,V.m9)(h);yield ci(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function D(){return(D=(0,E.Z)(function*(h,c){const l=yield it(h,{},(0,E.Z)(function*(){const p=(0,V.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:v}=h.config,T=an(h,m,"/v1/token",`key=${v}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(T,{method:"POST",headers:P,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function A(){return(A=(0,E.Z)(function*(h,c){return Z(h,"POST","/v2/accounts:revokeToken",Y(h,c))})).apply(this,arguments)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){K(c.idToken,"internal-error"),K(typeof c.idToken<"u","internal-error"),K(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Yr(h){const c=oo(h);return K(c,"internal-error"),K(typeof c.exp<"u","internal-error"),K(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var p=this;return(0,E.Z)(function*(){return K(!p.accessToken||p.refreshToken,c,"user-token-expired"),l||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,E.Z)(function*(){const{accessToken:m,refreshToken:v,expiresIn:T}=yield function lu(h,c){return D.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(m,v,Number(T))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:m,expirationTime:v}=l,T=new q;return p&&(K("string"==typeof p,"internal-error",{appName:c}),T.refreshToken=p),m&&(K("string"==typeof m,"internal-error",{appName:c}),T.accessToken=m),v&&(K("number"==typeof v,"internal-error",{appName:c}),T.expirationTime=v),T}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return Xt("not implemented")}}function M(h,c){K("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class pe{constructor(c){var{uid:l,auth:p,stsTokenManager:m}=c,v=(0,qe._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ks(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new Qs(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,E.Z)(function*(){const p=yield Zn(l,l.stsTokenManager.getToken(l.auth,c));return K(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function To(h){return Co.apply(this,arguments)}(this,c)}reload(){return function Do(h){return us.apply(this,arguments)}(this)}_assign(c){this!==c&&(K(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new pe(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,E.Z)(function*(){let m=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield ci(p)),yield p.auth._persistUserIfCurrent(p),m&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,E.Z)(function*(){const l=yield c.getIdToken();return yield Zn(c,function Zs(h,c){return Nr.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,m,v,T,P,j,ae,ge;const ye=null!==(p=l.displayName)&&void 0!==p?p:void 0,Wt=null!==(m=l.email)&&void 0!==m?m:void 0,ni=null!==(v=l.phoneNumber)&&void 0!==v?v:void 0,Dl=null!==(T=l.photoURL)&&void 0!==T?T:void 0,If=null!==(P=l.tenantId)&&void 0!==P?P:void 0,Ef=null!==(j=l._redirectEventId)&&void 0!==j?j:void 0,n_=null!==(ae=l.createdAt)&&void 0!==ae?ae:void 0,EE=null!==(ge=l.lastLoginAt)&&void 0!==ge?ge:void 0,{uid:bl,emailVerified:wf,isAnonymous:lr,providerData:zu,stsTokenManager:ho}=l;K(bl&&ho,c,"internal-error");const Al=q.fromJSON(this.name,ho);K("string"==typeof bl,c,"internal-error"),M(ye,c.name),M(Wt,c.name),K("boolean"==typeof wf,c,"internal-error"),K("boolean"==typeof lr,c,"internal-error"),M(ni,c.name),M(Dl,c.name),M(If,c.name),M(Ef,c.name),M(n_,c.name),M(EE,c.name);const Sl=new pe({uid:bl,auth:c,email:Wt,emailVerified:wf,displayName:ye,isAnonymous:lr,photoURL:Dl,phoneNumber:ni,tenantId:If,stsTokenManager:Al,createdAt:n_,lastLoginAt:EE});return zu&&Array.isArray(zu)&&(Sl.providerData=zu.map(qu=>Object.assign({},qu))),Ef&&(Sl._redirectEventId=Ef),Sl}static _fromIdTokenResponse(c,l,p=!1){return(0,E.Z)(function*(){const m=new q;m.updateFromServerResponse(l);const v=new pe({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:p});return yield ci(v),v})()}}const Ie=new Map;function Ae(h){en(h instanceof Function,"Expected a class definition");let c=Ie.get(h);return c?(en(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Ie.set(h,c),c)}const we=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(l,p){var m=this;return(0,E.Z)(function*(){m.storage[l]=p})()}_get(l){var p=this;return(0,E.Z)(function*(){const m=p.storage[l];return void 0===m?null:m})()}_remove(l){var p=this;return(0,E.Z)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return h.type="NONE",h})();function Ue(h,c,l){return`firebase:${h}:${c}:${l}`}class Ke{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:m,name:v}=this.auth;this.fullUserKey=Ue(this.userKey,m.apiKey,v),this.fullPersistenceKey=Ue("persistence",m.apiKey,v),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,E.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?pe._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,E.Z)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,E.Z)(function*(){if(!l.length)return new Ke(Ae(we),c,p);const m=(yield Promise.all(l.map(function(){var ae=(0,E.Z)(function*(ge){if(yield ge._isAvailable())return ge});return function(ge){return ae.apply(this,arguments)}}()))).filter(ae=>ae);let v=m[0]||Ae(we);const T=Ue(p,c.config.apiKey,c.name);let P=null;for(const ae of l)try{const ge=yield ae._get(T);if(ge){const ye=pe._fromJSON(c,ge);ae!==v&&(P=ye),v=ae;break}}catch{}const j=m.filter(ae=>ae._shouldAllowMigration);return v._shouldAllowMigration&&j.length?(v=j[0],P&&(yield v._set(T,P.toJSON())),yield Promise.all(l.map(function(){var ae=(0,E.Z)(function*(ge){if(ge!==v)try{yield ge._remove(T)}catch{}});return function(ge){return ae.apply(this,arguments)}}())),new Ke(v,c,p)):new Ke(v,c,p)})()}}function ct(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(F(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(li(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(X(c))return"Blackberry";if(_e(c))return"Webos";if(cs(c))return"Safari";if((c.includes("chrome/")||kc(c))&&!c.includes("edge/"))return"Chrome";if(b(c))return"Android";{const p=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function li(h=(0,V.z$)()){return/firefox\//i.test(h)}function cs(h=(0,V.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function kc(h=(0,V.z$)()){return/crios\//i.test(h)}function F(h=(0,V.z$)()){return/iemobile/i.test(h)}function b(h=(0,V.z$)()){return/android/i.test(h)}function X(h=(0,V.z$)()){return/blackberry/i.test(h)}function _e(h=(0,V.z$)()){return/webos/i.test(h)}function $e(h=(0,V.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function St(h=(0,V.z$)()){return $e(h)||b(h)||_e(h)||X(h)||/windows phone/i.test(h)||F(h)}function bo(h,c=[]){let l;switch(h){case"Browser":l=ct((0,V.z$)());break;case"Worker":l=`${ct((0,V.z$)())}-${h}`;break;default:l=h}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Fe.SDK_VERSION}/${p}`}class Hg{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=v=>new Promise((T,P)=>{try{T(c(v))}catch(j){P(j)}});p.onAbort=l,this.queue.push(p);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,E.Z)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const m of l.queue)yield m(c),m.onAbort&&p.push(m.onAbort)}catch(m){p.reverse();for(const v of p)try{v()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function ls(){return(ls=(0,E.Z)(function*(h,c={}){return Z(h,"GET","/v2/passwordPolicy",Y(h,c))})).apply(this,arguments)}class Be{constructor(c){var l,p,m,v;const T=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=T.minPasswordLength)&&void 0!==l?l:6,T.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=T.maxPasswordLength),void 0!==T.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=T.containsLowercaseCharacter),void 0!==T.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=T.containsUppercaseCharacter),void 0!==T.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=T.containsNumericCharacter),void 0!==T.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=T.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,m,v,T,P;const j={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,j),this.validatePasswordCharacterOptions(c,j),j.isValid&&(j.isValid=null===(l=j.meetsMinPasswordLength)||void 0===l||l),j.isValid&&(j.isValid=null===(p=j.meetsMaxPasswordLength)||void 0===p||p),j.isValid&&(j.isValid=null===(m=j.containsLowercaseLetter)||void 0===m||m),j.isValid&&(j.isValid=null===(v=j.containsUppercaseLetter)||void 0===v||v),j.isValid&&(j.isValid=null===(T=j.containsNumericCharacter)||void 0===T||T),j.isValid&&(j.isValid=null===(P=j.containsNonAlphanumericCharacter)||void 0===P||P),j}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)p=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,m,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class gt{constructor(c,l,p,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qg(this),this.idTokenSubscription=new qg(this),this.beforeStateQueue=new Hg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=Ae(l)),this._initializationPromise=this.queue((0,E.Z)(function*(){var m,v;if(!p._deleted&&(p.persistenceManager=yield Ke.create(p,c),!p._deleted)){if(null!==(m=p._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,E.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,E.Z)(function*(){var p;const m=yield l.assertedPersistence.getCurrentUser();let v=m,T=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,j=v?._redirectEventId,ae=yield l.tryRedirectSignIn(c);(!P||P===j)&&ae?.user&&(v=ae.user,T=!0)}if(!v)return l.directlySetCurrentUser(null);if(!v._redirectEventId){if(T)try{yield l.beforeStateQueue.runMiddleware(v)}catch(P){v=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return v?l.reloadAndSetCurrentUserOrClear(v):l.directlySetCurrentUser(null)}return K(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===v._redirectEventId?l.directlySetCurrentUser(v):l.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var l=this;return(0,E.Z)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,E.Z)(function*(){try{yield ci(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Ws(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,E.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,E.Z)(function*(){const p=c?(0,V.m9)(c):null;return p&&K(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,E.Z)(function*(){if(!p._deleted)return c&&K(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,E.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,E.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,E.Z)(function*(){yield l.assertedPersistence.setPersistence(Ae(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,E.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,E.Z)(function*(){const l=yield function ao(h){return ls.apply(this,arguments)}(c),p=new Be(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new V.LL("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,E.Z)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function w(h,c){return A.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,E.Z)(function*(){const m=yield p.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,E.Z)(function*(){if(!l.redirectPersistenceManager){const p=c&&Ae(c)||l._popupRedirectResolver;K(p,l,"argument-error"),l.redirectPersistenceManager=yield Ke.create(l,[Ae(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,E.Z)(function*(){var p,m;return l._isInitialized&&(yield l.queue((0,E.Z)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,E.Z)(function*(){if(c===l.currentUser)return l.queue((0,E.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,m){if(this._deleted)return()=>{};const v="function"==typeof l?l:l.next.bind(l);let T=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(P,this,"internal-error"),P.then(()=>{T||v(this.currentUser)}),"function"==typeof l){const j=c.addObserver(l,p,m);return()=>{T=!0,j()}}{const j=c.addObserver(l);return()=>{T=!0,j()}}}directlySetCurrentUser(c){var l=this;return(0,E.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=bo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,E.Z)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(p["X-Firebase-Client"]=m);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,E.Z)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Wn(h,...c){yn.logLevel<=Jt.in.WARN&&yn.warn(`Auth (${Fe.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Ft(h){return(0,V.m9)(h)}class qg{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,V.ne)(l=>this.observer=l)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gg(h){return new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",h),p.onload=c,p.onerror=m=>{const v=vt("internal-error");v.customData=m,l(v)},p.type="text/javascript",p.charset="UTF-8",function yI(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(p)})}function Wg(h){return`__${h}${Math.floor(1e6*Math.random())}`}class Zg{constructor(c){this.type="recaptcha-enterprise",this.auth=Ft(c)}verify(c="verify",l=!1){var p=this;return(0,E.Z)(function*(){function v(){return v=(0,E.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var j=(0,E.Z)(function*(ae,ge){xr(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ye=>{if(void 0!==ye.recaptchaKey){const Wt=new Mr(ye);return null==P.tenantId?P._agentRecaptchaConfig=Wt:P._tenantRecaptchaConfigs[P.tenantId]=Wt,ae(Wt.siteKey)}ge(new Error("recaptcha Enterprise site key undefined"))}).catch(ye=>{ge(ye)})});return function(ae,ge){return j.apply(this,arguments)}}())}),v.apply(this,arguments)}function T(P,j,ae){const ge=window.grecaptcha;Ct(ge)?ge.enterprise.ready(()=>{ge.enterprise.execute(P,{action:c}).then(ye=>{j(ye)}).catch(()=>{j("NO_RECAPTCHA")})}):ae(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,j)=>{(function m(P){return v.apply(this,arguments)})(p.auth).then(ae=>{if(!l&&Ct(window.grecaptcha))T(ae,P,j);else{if(typeof window>"u")return void j(new Error("RecaptchaVerifier is only supported in browser"));Gg("https://www.google.com/recaptcha/enterprise.js?render="+ae).then(()=>{T(ae,P,j)}).catch(ge=>{j(ge)})}}).catch(ae=>{j(ae)})})})()}}function vI(h,c,l){return ki.apply(this,arguments)}function ki(){return(ki=(0,E.Z)(function*(h,c,l,p=!1){const m=new Zg(h);let v;try{v=yield m.verify(l)}catch{v=yield m.verify(l,!0)}const T=Object.assign({},c);return Object.assign(T,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T})).apply(this,arguments)}function Lc(h,c,l,p){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,E.Z)(function*(h,c,l,p){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield vI(h,c,l,"getOobCode"===l);return p(h,v)}return p(h,c).catch(function(){var v=(0,E.Z)(function*(T){if("auth/missing-recaptcha-token"===T.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield vI(h,c,l,"getOobCode"===l);return p(h,P)}return Promise.reject(T)});return function(T){return v.apply(this,arguments)}}())}),Kg.apply(this,arguments)}function EI(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function xe(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class du{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Xt("not implemented")}_getIdTokenResponse(c){return Xt("not implemented")}_linkToIdToken(c,l){return Xt("not implemented")}_getReauthenticationResolver(c){return Xt("not implemented")}}function wI(h,c){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:resetPassword",Y(h,c))})).apply(this,arguments)}function Xg(){return(Xg=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Li(h,c){return Js.apply(this,arguments)}function Js(){return(Js=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Fc(){return(Fc=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:update",Y(h,c))})).apply(this,arguments)}function CI(h,c){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,E.Z)(function*(h,c){return Re(h,"POST","/v1/accounts:signInWithPassword",Y(h,c))})).apply(this,arguments)}function ds(h,c){return hu.apply(this,arguments)}function hu(){return(hu=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:sendOobCode",Y(h,c))})).apply(this,arguments)}function yh(){return(yh=(0,E.Z)(function*(h,c){return ds(h,c)})).apply(this,arguments)}function rt(h,c){return fu.apply(this,arguments)}function fu(){return(fu=(0,E.Z)(function*(h,c){return ds(h,c)})).apply(this,arguments)}function tm(h,c){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,E.Z)(function*(h,c){return ds(h,c)})).apply(this,arguments)}function rm(){return(rm=(0,E.Z)(function*(h,c){return ds(h,c)})).apply(this,arguments)}function im(){return(im=(0,E.Z)(function*(h,c){return Re(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}function de(){return(de=(0,E.Z)(function*(h,c){return Re(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}class hs extends du{constructor(c,l,p,m=null){super("password",p),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new hs(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new hs(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,E.Z)(function*(){switch(l.signInMethod){case"password":return Lc(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",CI);case"emailLink":return function Rt(h,c){return im.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:lt(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,E.Z)(function*(){switch(p.signInMethod){case"password":return Lc(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Li);case"emailLink":return function aA(h,c){return de.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:lt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function hi(h,c){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,E.Z)(function*(h,c){return Re(h,"POST","/v1/accounts:signInWithIdp",Y(h,c))})).apply(this,arguments)}class Fi extends du{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Fi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):lt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m}=l,v=(0,qe._T)(l,["providerId","signInMethod"]);if(!p||!m)return null;const T=new Fi(p,m);return T.idToken=v.idToken||void 0,T.accessToken=v.accessToken||void 0,T.secret=v.secret,T.nonce=v.nonce,T.pendingToken=v.pendingToken||null,T}_getIdTokenResponse(c){return hi(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,hi(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,hi(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,V.xO)(l)}return c}}function om(){return(om=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:sendVerificationCode",Y(h,c))})).apply(this,arguments)}function sm(){return(sm=(0,E.Z)(function*(h,c){return Re(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c))})).apply(this,arguments)}function am(){return(am=(0,E.Z)(function*(h,c){const l=yield Re(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c));if(l.temporaryProof)throw vn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const pu={USER_NOT_FOUND:"user-not-found"};function ea(){return(ea=(0,E.Z)(function*(h,c){return Re(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),pu)})).apply(this,arguments)}class fs extends du{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new fs({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new fs({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function uA(h,c){return sm.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function cA(h,c){return am.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Eh(h,c){return ea.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}=c;return p||l||m||v?new fs({verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}):null}}class ta{constructor(c){var l,p,m,v,T,P;const j=(0,V.zd)((0,V.pd)(c)),ae=null!==(l=j.apiKey)&&void 0!==l?l:null,ge=null!==(p=j.oobCode)&&void 0!==p?p:null,ye=function DI(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=j.mode)&&void 0!==m?m:null);K(ae&&ge&&ye,"argument-error"),this.apiKey=ae,this.operation=ye,this.code=ge,this.continueUrl=null!==(v=j.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(T=j.languageCode)&&void 0!==T?T:null,this.tenantId=null!==(P=j.tenantId)&&void 0!==P?P:null}static parseLink(c){const l=function bI(h){const c=(0,V.zd)((0,V.pd)(h)).link,l=c?(0,V.zd)((0,V.pd)(c)).deep_link_id:null,p=(0,V.zd)((0,V.pd)(h)).deep_link_id;return(p?(0,V.zd)((0,V.pd)(p)).link:null)||p||l||c||h}(c);try{return new ta(l)}catch{return null}}}let wh=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,p){return hs._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const m=ta.parseLink(p);return K(m,"argument-error"),hs._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class Yn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class na extends Yn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class re extends na{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return K("providerId"in l&&"signInMethod"in l,"argument-error"),Fi._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return K(c.idToken||c.accessToken,"argument-error"),Fi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return re.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return re.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:m,pendingToken:v,nonce:T,providerId:P}=c;if(!p&&!m&&!l&&!v||!P)return null;try{return new re(P)._credential({idToken:l,accessToken:p,nonce:T,pendingToken:v})}catch{return null}}}let Th=(()=>{class h extends na{constructor(){super("facebook.com")}static credential(l){return Fi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),se=(()=>{class h extends na{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Fi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:m}=l;if(!p&&!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),mu=(()=>{class h extends na{constructor(){super("github.com")}static credential(l){return Fi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class Vi extends du{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return hi(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,hi(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,hi(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m,pendingToken:v}=l;return p&&m&&v&&p===m?new Vi(p,v):null}static _create(c,l){return new Vi(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Uc extends Yn{constructor(c){K(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Uc.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Uc.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=Vi.fromJSON(c);return K(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return Vi._create(p,l)}catch{return null}}}let um=(()=>{class h extends na{constructor(){super("twitter.com")}static credential(l,p){return Fi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:m}=l;if(!p||!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function Ui(h,c){return ra.apply(this,arguments)}function ra(){return(ra=(0,E.Z)(function*(h,c){return Re(h,"POST","/v1/accounts:signUp",Y(h,c))})).apply(this,arguments)}class tn{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,m=!1){return(0,E.Z)(function*(){const v=yield pe._fromIdTokenResponse(c,p,m),T=fi(p);return new tn({user:v,providerId:T,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,E.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const m=fi(p);return new tn({user:c,providerId:m,_tokenResponse:p,operationType:l})})()}}function fi(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function Bc(){return(Bc=(0,E.Z)(function*(h){var c;const l=Ft(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new tn({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield Ui(l,{returnSecureToken:!0}),m=yield tn._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class ia extends V.ZR{constructor(c,l,p,m){var v;super(l.code,l.message),this.operationType=p,this.user=m,Object.setPrototypeOf(this,ia.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,m){return new ia(c,l,p,m)}}function Dh(h,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?ia._fromErrorAndOperation(h,v,c,p):v})}function bh(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function jc(){return jc=(0,E.Z)(function*(h,c){const l=(0,V.m9)(h);yield yu(!0,l,c);const{providerUserInfo:p}=yield function uu(h,c){return Or.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=bh(p||[]);return l.providerData=l.providerData.filter(v=>m.has(v.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),jc.apply(this,arguments)}function $c(h,c){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,E.Z)(function*(h,c,l=!1){const p=yield Zn(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return tn._forOperation(h,"link",p)})).apply(this,arguments)}function yu(h,c,l){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,E.Z)(function*(h,c,l){yield ci(c);const m=!1===h?"provider-already-linked":"no-such-provider";K(bh(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function cm(h,c){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,E.Z)(function*(h,c,l=!1){const{auth:p}=h,m="reauthenticate";try{const v=yield Zn(h,Dh(p,m,c,h),l);K(v.idToken,p,"internal-error");const T=oo(v.idToken);K(T,p,"internal-error");const{sub:P}=T;return K(h.uid===P,p,"user-mismatch"),tn._forOperation(h,m,v)}catch(v){throw"auth/user-not-found"===v?.code&&lt(p,"user-mismatch"),v}})).apply(this,arguments)}function lm(h,c){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,E.Z)(function*(h,c,l=!1){const p="signIn",m=yield Dh(h,p,c),v=yield tn._fromIdTokenResponse(h,p,m);return l||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function zc(h,c){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,E.Z)(function*(h,c){return lm(Ft(h),c)})).apply(this,arguments)}function dm(h,c){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,E.Z)(function*(h,c){const l=(0,V.m9)(h);return yield yu(!1,l,c.providerId),$c(l,c)})).apply(this,arguments)}function Mh(h,c){return xh.apply(this,arguments)}function xh(){return(xh=(0,E.Z)(function*(h,c){return cm((0,V.m9)(h),c)})).apply(this,arguments)}function Nh(){return(Nh=(0,E.Z)(function*(h,c){return Re(h,"POST","/v1/accounts:signInWithCustomToken",Y(h,c))})).apply(this,arguments)}function Oh(){return Oh=(0,E.Z)(function*(h,c){const l=Ft(h),p=yield function SI(h,c){return Nh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield tn._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(m.user),m}),Oh.apply(this,arguments)}class vu{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?gi._fromServerResponse(c,l):"totpInfo"in l?qc._fromServerResponse(c,l):lt(c,"internal-error")}}class gi extends vu{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new gi(l)}}class qc extends vu{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new qc(l)}}function Sn(h,c,l){var p;K((null===(p=l.url)||void 0===p?void 0:p.length)>0,h,"invalid-continue-uri"),K(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(K(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(K(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function Jn(h){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,E.Z)(function*(h){const c=Ft(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function En(){return(En=(0,E.Z)(function*(h,c,l){const p=Ft(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Sn(p,m,l),yield Lc(p,m,"getOobCode",rt)})).apply(this,arguments)}function Rn(){return Rn=(0,E.Z)(function*(h,c,l){yield wI((0,V.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var p=(0,E.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Jn(h),m});return function(m){return p.apply(this,arguments)}}())}),Rn.apply(this,arguments)}function Gc(){return Gc=(0,E.Z)(function*(h,c){yield function TI(h,c){return Fc.apply(this,arguments)}((0,V.m9)(h),{oobCode:c})}),Gc.apply(this,arguments)}function Iu(h,c){return kh.apply(this,arguments)}function kh(){return(kh=(0,E.Z)(function*(h,c){const l=(0,V.m9)(h),p=yield wI(l,{oobCode:c}),m=p.requestType;switch(K(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(p.mfaInfo,l,"internal-error");default:K(p.email,l,"internal-error")}let v=null;return p.mfaInfo&&(v=vu._fromServerResponse(Ft(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:m}})).apply(this,arguments)}function Vt(){return(Vt=(0,E.Z)(function*(h,c){const{data:l}=yield Iu((0,V.m9)(h),c);return l.email})).apply(this,arguments)}function be(){return(be=(0,E.Z)(function*(h,c,l){const p=Ft(h),T=yield Lc(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ui).catch(j=>{throw"auth/password-does-not-meet-requirements"===j.code&&Jn(h),j}),P=yield tn._fromIdTokenResponse(p,"signIn",T);return yield p._updateCurrentUser(P.user),P})).apply(this,arguments)}function Pn(){return(Pn=(0,E.Z)(function*(h,c,l){const p=Ft(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(T,P){K(P.handleCodeInApp,p,"argument-error"),P&&Sn(p,T,P)})(m,l),yield Lc(p,m,"getOobCode",tm)})).apply(this,arguments)}function Tt(){return(Tt=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h),m=wh.credentialWithLink(c,l||Kr());return K(m._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),zc(p,m)})).apply(this,arguments)}function yi(){return(yi=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:createAuthUri",Y(h,c))})).apply(this,arguments)}function ps(){return ps=(0,E.Z)(function*(h,c){const p={identifier:c,continueUri:eo()?Kr():"http://localhost"},{signinMethods:m}=yield function sr(h,c){return yi.apply(this,arguments)}((0,V.m9)(h),p);return m||[]}),ps.apply(this,arguments)}function So(){return So=(0,E.Z)(function*(h,c){const l=(0,V.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&Sn(l.auth,m,c);const{email:v}=yield function em(h,c){return yh.apply(this,arguments)}(l.auth,m);v!==h.email&&(yield h.reload())}),So.apply(this,arguments)}function gs(){return gs=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&Sn(p.auth,v,l);const{email:T}=yield function nm(h,c){return rm.apply(this,arguments)}(p.auth,v);T!==h.email&&(yield h.reload())}),gs.apply(this,arguments)}function Jr(){return(Jr=(0,E.Z)(function*(h,c){return Z(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Wc(){return Wc=(0,E.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,V.m9)(h),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},T=yield Zn(p,function sa(h,c){return Jr.apply(this,arguments)}(p.auth,v));p.displayName=T.displayName||null,p.photoURL=T.photoUrl||null;const P=p.providerData.find(({providerId:j})=>"password"===j);P&&(P.displayName=p.displayName,P.photoURL=p.photoURL),yield p._updateTokensIfNecessary(T)}),Wc.apply(this,arguments)}function Po(h,c,l){return Ve.apply(this,arguments)}function Ve(){return Ve=(0,E.Z)(function*(h,c,l){const{auth:p}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),l&&(v.password=l);const T=yield Zn(h,function Te(h,c){return Xg.apply(this,arguments)}(p,v));yield h._updateTokensIfNecessary(T,!0)}),Ve.apply(this,arguments)}class Bi{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class vi extends Bi{constructor(c,l,p,m){super(c,l,p),this.username=m}}class Kc extends Bi{constructor(c,l){super(c,"facebook.com",l)}}class aa extends vi{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class un extends Bi{constructor(c,l){super(c,"google.com",l)}}class ua extends vi{constructor(c,l,p){super(c,"twitter.com",l,p)}}function Un(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function Lh(h){var c,l;if(!h)return null;const{providerId:p}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!p&&h?.idToken){const T=null===(l=null===(c=oo(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(T)return new Bi(v,"anonymous"!==T&&"custom"!==T?T:null)}if(!p)return null;switch(p){case"facebook.com":return new Kc(v,m);case"github.com":return new aa(v,m);case"google.com":return new un(v,m);case"twitter.com":return new ua(v,m,h.screenName||null);case"custom":case"anonymous":return new Bi(v,null);default:return new Bi(v,p,m)}}(l)}class da{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new da("enroll",c,l)}static _fromMfaPendingCredential(c){return new da("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return da._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return da._fromIdtoken(c.multiFactorSession.idToken)}return null}}class ym{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Ft(c),m=l.customData._serverResponse,v=(m.mfaInfo||[]).map(P=>vu._fromServerResponse(p,P));K(m.mfaPendingCredential,p,"internal-error");const T=da._fromMfaPendingCredential(m.mfaPendingCredential);return new ym(T,v,function(){var P=(0,E.Z)(function*(j){const ae=yield j._process(p,T);delete m.mfaInfo,delete m.mfaPendingCredential;const ge=Object.assign(Object.assign({},m),{idToken:ae.idToken,refreshToken:ae.refreshToken});switch(l.operationType){case"signIn":const ye=yield tn._fromIdTokenResponse(p,l.operationType,ge);return yield p._updateCurrentUser(ye.user),ye;case"reauthenticate":return K(l.user,p,"internal-error"),tn._forOperation(l.user,l.operationType,ge);default:lt(p,"internal-error")}});return function(j){return P.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,E.Z)(function*(){return l.signInResolver(c)})()}}class vm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>vu._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new vm(c)}getSession(){var c=this;return(0,E.Z)(function*(){return da._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,E.Z)(function*(){const m=c,v=yield p.getSession(),T=yield Zn(p.user,m._process(p.user.auth,v,l));return yield p.user._updateTokensIfNecessary(T),p.user.reload()})()}unenroll(c){var l=this;return(0,E.Z)(function*(){const p="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const v=yield Zn(l.user,function _A(h,c){return Z(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Y(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:T})=>T!==p),yield l.user._updateTokensIfNecessary(v),yield l.user.reload()}catch(v){throw v}})()}}const Im=new WeakMap,wu="__sak";class Vh{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(wu,"1"),this.storage.removeItem(wu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const ji=(()=>{class h extends Vh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vA(){const h=(0,V.z$)();return cs(h)||$e(h)}()&&function di(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=St(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const m=this.storage.getItem(p),v=this.localCache[p];m!==v&&l(p,v,m)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((P,j,ae)=>{this.notifyListeners(P,ae)});const m=l.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!p)return}const v=()=>{const P=this.storage.getItem(m);!p&&this.localCache[m]===P||this.notifyListeners(m,P)},T=this.storage.getItem(m);!function Lt(){return(0,V.w1)()&&10===document.documentMode}()||T===l.newValue||l.newValue===l.oldValue?v():setTimeout(v,10)}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var m=()=>super._set,v=this;return(0,E.Z)(function*(){yield m().call(v,l,p),v.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,m=this;return(0,E.Z)(function*(){const v=yield p().call(m,l);return m.localCache[l]=JSON.stringify(v),v})()}_remove(l){var p=()=>super._remove,m=this;return(0,E.Z)(function*(){yield p().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),Er=(()=>{class h extends Vh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return h.type="SESSION",h})();let MI=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(v=>v.isListeningto(l));if(p)return p;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,E.Z)(function*(){const m=l,{eventId:v,eventType:T,data:P}=m.data,j=p.handlersMap[T];if(!j?.size)return;m.ports[0].postMessage({status:"ack",eventId:v,eventType:T});const ae=Array.from(j).map(function(){var ye=(0,E.Z)(function*(Wt){return Wt(m.origin,P)});return function(Wt){return ye.apply(this,arguments)}}()),ge=yield function Em(h){return Promise.all(h.map(function(){var c=(0,E.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(ae);m.ports[0].postMessage({status:"done",eventId:v,eventType:T,response:ge})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Tu(h="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return h+l}class wm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var m=this;return(0,E.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let T,P;return new Promise((j,ae)=>{const ge=Tu("",20);v.port1.start();const ye=setTimeout(()=>{ae(new Error("unsupported_event"))},p);P={messageChannel:v,onMessage(Wt){const ni=Wt;if(ni.data.eventId===ge)switch(ni.data.status){case"ack":clearTimeout(ye),T=setTimeout(()=>{ae(new Error("timeout"))},3e3);break;case"done":clearTimeout(T),j(ni.data.response);break;default:clearTimeout(ye),clearTimeout(T),ae(new Error("invalid_response"))}}},m.handlers.add(P),v.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:c,eventId:ge,data:l},[v.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function cn(){return window}function Cu(){return typeof cn().WorkerGlobalScope<"u"&&"function"==typeof cn().importScripts}function Xr(){return(Xr=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Uh="firebaseLocalStorageDb",Bh="firebaseLocalStorage",Dt="fbase_key";class ms{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Mo(h,c){return h.transaction([Bh],c?"readwrite":"readonly").objectStore(Bh)}function jh(){const h=indexedDB.open(Uh,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const p=h.result;try{p.createObjectStore(Bh,{keyPath:Dt})}catch(m){l(m)}}),h.addEventListener("success",(0,E.Z)(function*(){const p=h.result;p.objectStoreNames.contains(Bh)?c(p):(p.close(),yield function ar(){const h=indexedDB.deleteDatabase(Uh);return new ms(h).toPromise()}(),c(yield jh()))}))})}function ha(h,c,l){return xo.apply(this,arguments)}function xo(){return(xo=(0,E.Z)(function*(h,c,l){const p=Mo(h,!0).put({[Dt]:c,value:l});return new ms(p).toPromise()})).apply(this,arguments)}function $h(){return($h=(0,E.Z)(function*(h,c){const l=Mo(h,!1).get(c),p=yield new ms(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Qc(h,c){const l=Mo(h,!0).delete(c);return new ms(l).toPromise()}const fa=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,E.Z)(function*(){return l.db||(l.db=yield jh()),l.db})()}_withRetries(l){var p=this;return(0,E.Z)(function*(){let m=0;for(;;)try{const v=yield p._openDb();return yield l(v)}catch(v){if(m++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,E.Z)(function*(){return Cu()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,E.Z)(function*(){l.receiver=MI._getInstance(function Cm(){return Cu()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,E.Z)(function*(m,v){return{keyProcessed:(yield l._poll()).includes(v.key)}});return function(m,v){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,E.Z)(function*(m,v){return["keyChanged"]});return function(m,v){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,E.Z)(function*(){var p,m;if(l.activeServiceWorker=yield function NI(){return Xr.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new wm(l.activeServiceWorker);const v=yield l.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(m=v[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,E.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Tm(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const l=yield jh();return yield ha(l,wu,"1"),yield Qc(l,wu),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,E.Z)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var m=this;return(0,E.Z)(function*(){return m._withPendingWrite((0,E.Z)(function*(){return yield m._withRetries(v=>ha(v,l,p)),m.localCache[l]=p,m.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,E.Z)(function*(){const m=yield p._withRetries(v=>function Fr(h,c){return $h.apply(this,arguments)}(v,l));return p.localCache[l]=m,m})()}_remove(l){var p=this;return(0,E.Z)(function*(){return p._withPendingWrite((0,E.Z)(function*(){return yield p._withRetries(m=>Qc(m,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,E.Z)(function*(){const p=yield l._withRetries(T=>{const P=Mo(T,!1).getAll();return new ms(P).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const m=[],v=new Set;for(const{fbase_key:T,value:P}of p)v.add(T),JSON.stringify(l.localCache[T])!==JSON.stringify(P)&&(l.notifyListeners(T,P),m.push(T));for(const T of Object.keys(l.localCache))l.localCache[T]&&!v.has(T)&&(l.notifyListeners(T,null),m.push(T));return m})()}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),pa=1e12;class Le{constructor(c){this.auth=c,this.counter=pa,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new Am(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||pa;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||pa))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,E.Z)(function*(){var p;return null===(p=l._widgets.get(c||pa))||void 0===p||p.execute(),""})()}}class Am{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;K(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function TA(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<h;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zh=Wg("rcb"),FI=new Qr(3e4,6e4);class Sm{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=cn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return K(function ga(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&An(cn().grecaptcha)?Promise.resolve(cn().grecaptcha):new Promise((p,m)=>{const v=cn().setTimeout(()=>{m(vt(c,"network-request-failed"))},FI.get());cn()[zh]=()=>{cn().clearTimeout(v),delete cn()[zh];const P=cn().grecaptcha;if(!P||!An(P))return void m(vt(c,"internal-error"));const j=P.render;P.render=(ae,ge)=>{const ye=j(ae,ge);return this.counter++,ye},this.hostLanguage=l,p(P)},Gg(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:zh,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(v),m(vt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=cn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class UI{load(c){return(0,E.Z)(function*(){return new Le(c)})()}clearedOneInstance(){}}const Rm="recaptcha",BI={theme:"light",type:"image"};class jI{constructor(c,l,p=Object.assign({},BI)){this.parameters=p,this.type=Rm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ft(c),this.isInvisible="invisible"===this.parameters.size,K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;K(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new UI:new Sm,this.validateStartingState()}verify(){var c=this;return(0,E.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(v=>{const T=P=>{P&&(c.tokenChangeListeners.delete(T),v(P))};c.tokenChangeListeners.add(T),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=cn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,E.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,E.Z)(function*(){K(eo()&&!Cu(),c.auth,"internal-error"),yield function $I(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function au(h){return to.apply(this,arguments)}(c.auth);K(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class B{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=fs._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function bu(){return(bu=(0,E.Z)(function*(h,c,l){const p=Ft(h),m=yield Vr(p,c,(0,V.m9)(l));return new B(m,v=>zc(p,v))})).apply(this,arguments)}function It(){return(It=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);yield yu(!1,p,"phone");const m=yield Vr(p.auth,c,(0,V.m9)(l));return new B(m,v=>dm(p,v))})).apply(this,arguments)}function _s(){return(_s=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h),m=yield Vr(p.auth,c,(0,V.m9)(l));return new B(m,v=>Mh(p,v))})).apply(this,arguments)}function Vr(h,c,l){return Au.apply(this,arguments)}function Au(){return Au=(0,E.Z)(function*(h,c,l){var p;const m=yield l.verify();try{let v;if(K("string"==typeof m,h,"argument-error"),K(l.type===Rm,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const T=v.session;if("phoneNumber"in v)return K("enroll"===T.type,h,"internal-error"),(yield function pA(h,c){return Z(h,"POST","/v2/accounts/mfaEnrollment:start",Y(h,c))}(h,{idToken:T.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{K("signin"===T.type,h,"internal-error");const P=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return K(P,h,"missing-multi-factor-info"),(yield function Dm(h,c){return Z(h,"POST","/v2/accounts/mfaSignIn:start",Y(h,c))}(h,{mfaPendingCredential:T.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:T}=yield function Ih(h,c){return om.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:m});return T}}finally{l._reset()}}),Au.apply(this,arguments)}function Wh(){return(Wh=(0,E.Z)(function*(h,c){yield $c((0,V.m9)(h),c)})).apply(this,arguments)}let Jc=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Ft(l)}verifyPhoneNumber(l,p){return Vr(this.auth,l,(0,V.m9)(p))}static credential(l,p){return fs._fromVerification(l,p)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:m}=l;return p&&m?fs._fromTokenResponse(p,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function No(h,c){return c?Ae(c):(K(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class jn extends du{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return hi(c,this._buildIdpRequest())}_linkToIdToken(c,l){return hi(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return hi(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function uo(h){return lm(h.auth,new jn(h),h.bypassAuthState)}function Mm(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),cm(l,new jn(h),h.bypassAuthState)}function Hi(h){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,E.Z)(function*(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),$c(l,new jn(h),h.bypassAuthState)})).apply(this,arguments)}class xm{constructor(c,l,p,m,v=!1){this.auth=c,this.resolver=p,this.user=m,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,E.Z)(function*(p,m){c.pendingPromise={resolve:p,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,E.Z)(function*(){const{urlResponse:p,sessionId:m,postBody:v,tenantId:T,error:P,type:j}=c;if(P)return void l.reject(P);const ae={auth:l.auth,requestUri:p,sessionId:m,tenantId:T||void 0,postBody:v||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(j)(ae))}catch(ge){l.reject(ge)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return uo;case"linkViaPopup":case"linkViaRedirect":return Hi;case"reauthViaPopup":case"reauthViaRedirect":return Mm;default:lt(this.auth,"internal-error")}}resolve(c){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nm=new Qr(2e3,1e4);function Zh(){return(Zh=(0,E.Z)(function*(h,c,l){const p=Ft(h);tt(h,c,Yn);const m=No(p,l);return new Qh(p,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function Su(){return(Su=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);tt(p.auth,c,Yn);const m=No(p.auth,l);return new Qh(p.auth,"reauthViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}function Ru(){return(Ru=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);tt(p.auth,c,Yn);const m=No(p.auth,l);return new Qh(p.auth,"linkViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}let Qh=(()=>{class h extends xm{constructor(l,p,m,v,T){super(l,p,v,T),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,E.Z)(function*(){const p=yield l.execute();return K(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,E.Z)(function*(){en(1===l.filter.length,"Popup operations only handle one event");const p=Tu();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(vt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,m;this.pollId=null!==(m=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(vt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Nm.get())};l()}}return h.currentPopupAction=null,h})();const km="pendingRedirect",ys=new Map;class Lm extends xm{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,E.Z)(function*(){let p=ys.get(l.auth._key());if(!p){try{const v=(yield function Fm(h,c){return Xc.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(v)}catch(m){p=()=>Promise.reject(m)}ys.set(l.auth._key(),p)}return l.bypassAuthState||ys.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,E.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const m=yield p.auth._redirectUserForId(c.eventId);if(m)return p.user=m,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Xc(){return(Xc=(0,E.Z)(function*(h,c){const l=Pt(c),p=Oo(h);if(!(yield p._isAvailable()))return!1;const m="true"===(yield p._get(l));return yield p._remove(l),m})).apply(this,arguments)}function el(h,c){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,E.Z)(function*(h,c){return Oo(h)._set(Pt(c),"true")})).apply(this,arguments)}function Mn(h,c){ys.set(h._key(),c)}function Oo(h){return Ae(h._redirectPersistence)}function Pt(h){return Ue(km,h.config.apiKey,h.name)}function qI(h,c,l){return function GI(h,c,l){return Yh.apply(this,arguments)}(h,c,l)}function Yh(){return(Yh=(0,E.Z)(function*(h,c,l){const p=Ft(h);tt(h,c,Yn),yield p._initializationPromise;const m=No(p,l);return yield el(m,p),m._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function WI(h,c,l){return function Vm(h,c,l){return tl.apply(this,arguments)}(h,c,l)}function tl(){return(tl=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);tt(p.auth,c,Yn),yield p.auth._initializationPromise;const m=No(p.auth,l);yield el(m,p.auth);const v=yield Xh(p);return m._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function nl(h,c,l){return function ko(h,c,l){return Jh.apply(this,arguments)}(h,c,l)}function Jh(){return(Jh=(0,E.Z)(function*(h,c,l){const p=(0,V.m9)(h);tt(p.auth,c,Yn),yield p.auth._initializationPromise;const m=No(p.auth,l);yield yu(!1,p,c.providerId),yield el(m,p.auth);const v=yield Xh(p);return m._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function ma(){return(ma=(0,E.Z)(function*(h,c){return yield Ft(h)._initializationPromise,vs(h,c,!1)})).apply(this,arguments)}function vs(h,c){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,E.Z)(function*(h,c,l=!1){const p=Ft(h),m=No(p,c),T=yield new Lm(p,m,l).execute();return T&&!l&&(delete T.user._redirectEventId,yield p._persistUserIfCurrent(T.user),yield p._setRedirectUser(null,c)),T})).apply(this,arguments)}function Xh(h){return il.apply(this,arguments)}function il(){return(il=(0,E.Z)(function*(h){const c=Tu(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class Is{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function ef(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Um(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!Um(c)){const m=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(vt(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_a(c))}saveEventToCache(c){this.cachedEventUids.add(_a(c)),this.lastProcessedEventTime=Date.now()}}function _a(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function Um({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function Bm(h){return tf.apply(this,arguments)}function tf(){return(tf=(0,E.Z)(function*(h,c={}){return Z(h,"GET","/v1/projects",c)})).apply(this,arguments)}const KI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CA=/^https?/;function xu(){return(xu=(0,E.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield Bm(h);for(const l of c)try{if(Nu(l))return}catch{}lt(h,"unauthorized-domain")})).apply(this,arguments)}function Nu(h){const c=Kr(),{protocol:l,hostname:p}=new URL(c);if(h.startsWith("chrome-extension://")){const T=new URL(h);return""===T.hostname&&""===p?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&T.hostname===p}if(!CA.test(l))return!1;if(KI.test(h))return p===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(p)}const QI=new Qr(3e4,6e4);function ya(){const h=cn().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let Es=null;const jm=new Qr(5e3,15e3),$m="__/auth/iframe",YI="emulator/auth/iframe",zi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ol(h){const c=h.config;K(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?O(c,YI):`https://${h.config.authDomain}/${$m}`,p={apiKey:c.apiKey,appName:h.name,v:Fe.SDK_VERSION},m=JI.get(h.config.apiHost);m&&(p.eid=m);const v=h._getFrameworks();return v.length&&(p.fw=v.join(",")),`${l}?${(0,V.xO)(p).slice(1)}`}function sl(){return sl=(0,E.Z)(function*(h){const c=yield function bA(h){return Es=Es||function nf(h){return new Promise((c,l)=>{var p,m,v;function T(){ya(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{ya(),l(vt(h,"network-request-failed"))},timeout:QI.get()})}if(null!==(m=null===(p=cn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(v=cn().gapi)||void 0===v||!v.load){const P=Wg("iframefcb");return cn()[P]=()=>{gapi.load?T():l(vt(h,"network-request-failed"))},Gg(`https://apis.google.com/js/api.js?onload=${P}`).catch(j=>l(j))}T()}}).catch(c=>{throw Es=null,c})}(h),Es}(h),l=cn().gapi;return K(l,h,"internal-error"),c.open({where:document.body,url:ol(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zi,dontclear:!0},p=>new Promise(function(){var m=(0,E.Z)(function*(v,T){yield p.restyle({setHideOnLeave:!1});const P=vt(h,"network-request-failed"),j=cn().setTimeout(()=>{T(P)},jm.get());function ae(){cn().clearTimeout(j),v(p)}p.ping(ae).then(ae,()=>{T(P)})});return function(v,T){return m.apply(this,arguments)}}()))}),sl.apply(this,arguments)}const al={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class af{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ul="__/auth/handler",ws="emulator/auth/handler",tE=encodeURIComponent("fac");function cl(h,c,l,p,m,v){return ll.apply(this,arguments)}function ll(){return(ll=(0,E.Z)(function*(h,c,l,p,m,v){K(h.config.authDomain,h,"auth-domain-config-required"),K(h.config.apiKey,h,"invalid-api-key");const T={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:p,v:Fe.SDK_VERSION,eventId:m};if(c instanceof Yn){c.setDefaultLanguage(h.languageCode),T.providerId=c.providerId||"",(0,V.xb)(c.getCustomParameters())||(T.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ge,ye]of Object.entries(v||{}))T[ge]=ye}if(c instanceof na){const ge=c.getScopes().filter(ye=>""!==ye);ge.length>0&&(T.scopes=ge.join(","))}h.tenantId&&(T.tid=h.tenantId);const P=T;for(const ge of Object.keys(P))void 0===P[ge]&&delete P[ge];const j=yield h._getAppCheckToken(),ae=j?`#${tE}=${encodeURIComponent(j)}`:"";return`${function va({config:h}){return h.emulator?O(h,ws):`https://${h.authDomain}/${ul}`}(h)}?${(0,V.xO)(P).slice(1)}${ae}`})).apply(this,arguments)}const Lo="webStorageSupport",Gm=class wn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Er,this._completeRedirectFn=vs,this._overrideRedirectResult=Mn}_openPopup(c,l,p,m){var v=this;return(0,E.Z)(function*(){var T;en(null===(T=v.eventManagers[c._key()])||void 0===T?void 0:T.manager,"_initialize() not called before _openPopup()");const P=yield cl(c,l,p,Kr(),m);return function qm(h,c,l,p=500,m=600){const v=Math.max((window.screen.availHeight-m)/2,0).toString(),T=Math.max((window.screen.availWidth-p)/2,0).toString();let P="";const j=Object.assign(Object.assign({},al),{width:p.toString(),height:m.toString(),top:v,left:T}),ae=(0,V.z$)().toLowerCase();l&&(P=kc(ae)?"_blank":l),li(ae)&&(c=c||"http://localhost",j.scrollbars="yes");const ge=Object.entries(j).reduce((Wt,[ni,Dl])=>`${Wt}${ni}=${Dl},`,"");if(function H(h=(0,V.z$)()){var c;return $e(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ae)&&"_self"!==P)return function eE(h,c){const l=document.createElement("a");l.href=h,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",P),new af(null);const ye=window.open(c||"",P,ge);K(ye,h,"popup-blocked");try{ye.focus()}catch{}return new af(ye)}(c,P,Tu())})()}_openRedirect(c,l,p,m){var v=this;return(0,E.Z)(function*(){return yield v._originValidation(c),function xI(h){cn().location.href=h}(yield cl(c,l,p,Kr(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:v}=this.eventManagers[l];return m?Promise.resolve(m):(en(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,E.Z)(function*(){const p=yield function rf(h){return sl.apply(this,arguments)}(c),m=new Is(c);return p.register("authEvent",v=>(K(v?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=p,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Lo,{type:Lo},m=>{var v;const T=null===(v=m?.[0])||void 0===v?void 0:v[Lo];void 0!==T&&l(!!T),lt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function DA(h){return xu.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return St()||cs()||$e()}};class uf{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Xt("unexpected MultiFactorSessionType")}}}class Ou extends uf{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Ou(c)}_finalizeEnroll(c,l,p){return function gA(h,c){return Z(h,"POST","/v2/accounts/mfaEnrollment:finalize",Y(h,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function bm(h,c){return Z(h,"POST","/v2/accounts/mfaSignIn:finalize",Y(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nE=(()=>{class h{constructor(){}static assertion(l){return Ou._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var Cs="@firebase/auth";class lf{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,E.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wa(){return window}(0,V.Pz)("authIdTokenMaxAge"),function AA(h){(0,Fe._registerComponent)(new dn.wA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:T,authDomain:P}=p.options;K(T&&!T.includes(":"),"invalid-api-key",{appName:p.name});const j={apiKey:T,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bo(h)},ae=new gt(p,m,v,j);return function oA(h,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(Ae);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(p,c?.popupRedirectResolver)}(ae,l),ae},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Fe._registerComponent)(new dn.wA("auth-internal",c=>{const l=Ft(c.getProvider("auth").getImmediate());return new lf(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Fe.registerVersion)(Cs,"1.5.0",function Ea(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Fe.registerVersion)(Cs,"1.5.0","esm2017")}("Browser");function df(){return df=(0,E.Z)(function*(h,c,l){var p;const{BuildInfo:m}=wa();en(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function Ca(h){return dl.apply(this,arguments)}(c.sessionId),T={};return $e()?T.ibi=m.packageName:b()?T.apn=m.packageName:lt(h,"operation-not-supported-in-this-environment"),m.displayName&&(T.appDisplayName=m.displayName),T.sessionId=v,cl(h,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,T)}),df.apply(this,arguments)}function ln(){return(ln=(0,E.Z)(function*(h){const{BuildInfo:c}=wa(),l={};$e()?l.iosBundleId=c.packageName:b()?l.androidPackageName=c.packageName:lt(h,"operation-not-supported-in-this-environment"),yield Bm(h,l)})).apply(this,arguments)}function hf(){return(hf=(0,E.Z)(function*(h,c,l){const{cordova:p}=wa();let m=()=>{};try{yield new Promise((v,T)=>{let P=null;function j(){var ye;v();const Wt=null===(ye=p.plugins.browsertab)||void 0===ye?void 0:ye.close;"function"==typeof Wt&&Wt(),"function"==typeof l?.close&&l.close()}function ae(){P||(P=window.setTimeout(()=>{T(vt(h,"redirect-cancelled-by-user"))},2e3))}function ge(){"visible"===document?.visibilityState&&ae()}c.addPassiveListener(j),document.addEventListener("resume",ae,!1),b()&&document.addEventListener("visibilitychange",ge,!1),m=()=>{c.removePassiveListener(j),document.removeEventListener("resume",ae,!1),document.removeEventListener("visibilitychange",ge,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function dl(){return(dl=(0,E.Z)(function*(h){const c=function hl(h){if(en(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let p=0;p<h.length;p++)l[p]=h.charCodeAt(p);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ff extends Is{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,E.Z)(function*(){yield c.initPromise})()}}function uE(h){return ur.apply(this,arguments)}function ur(){return(ur=(0,E.Z)(function*(h){const c=yield Zm()._get(fl(h));return c&&(yield Zm()._remove(fl(h))),c})).apply(this,arguments)}function Da(){const h=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return h.join("")}function Zm(){return Ae(ji)}function fl(h){return Ue("authEvent",h.config.apiKey,h.name)}function pl(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,V.zd)(l.join("?"))}const fE=class hE{constructor(){this._redirectPersistence=Er,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vs,this._overrideRedirectResult=Mn}_initialize(c){var l=this;return(0,E.Z)(function*(){const p=c._key();let m=l.eventManagers.get(p);return m||(m=new ff(c),l.eventManagers.set(p,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){lt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,m){var v=this;return(0,E.Z)(function*(){!function wr(h){var c,l,p,m,v,T,P,j,ae,ge;const ye=wa();K("function"==typeof(null===(c=ye?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(typeof(null===(l=ye?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(v=null===(m=null===(p=ye?.cordova)||void 0===p?void 0:p.plugins)||void 0===m?void 0:m.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(j=null===(P=null===(T=ye?.cordova)||void 0===T?void 0:T.plugins)||void 0===P?void 0:P.browsertab)||void 0===j?void 0:j.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(ge=null===(ae=ye?.cordova)||void 0===ae?void 0:ae.InAppBrowser)||void 0===ge?void 0:ge.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const T=yield v._initialize(c);yield T.initialized(),T.resetRedirect(),function zI(){ys.clear()}(),yield v._originValidation(c);const P=function MA(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:Da(),postBody:null,tenantId:h.tenantId,error:vt(h,"no-auth-event")}}(c,p,m);yield function Wm(h,c){return Zm()._set(fl(h),c)}(c,P);const j=yield function Ta(h,c,l){return df.apply(this,arguments)}(c,P,l),ae=yield function aE(h){const{cordova:c}=wa();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let m=null;p?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function nt(h=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(j);return function ku(h,c,l){return hf.apply(this,arguments)}(c,T,ae)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function sE(h){return ln.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:m,BuildInfo:v}=wa(),T=setTimeout((0,E.Z)(function*(){yield uE(c),l.onEvent(gl())}),500),P=function(){var ge=(0,E.Z)(function*(ye){clearTimeout(T);const Wt=yield uE(c);let ni=null;Wt&&ye?.url&&(ni=function pf(h,c){var l,p;const m=function lE(h){const c=pl(h),l=c.link?decodeURIComponent(c.link):void 0,p=pl(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return pl(m).link||m||p||l||h}(c);if(m.includes("/__/auth/callback")){const v=pl(m),T=v.firebaseError?function cE(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,P=null===(p=null===(l=T?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],j=P?vt(P):null;return j?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:j,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(Wt,ye.url)),l.onEvent(ni||gl())});return function(Wt){return ge.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,P);const j=m,ae=`${v.packageName.toLowerCase()}://`;wa().handleOpenURL=function(){var ge=(0,E.Z)(function*(ye){if(ye.toLowerCase().startsWith(ae)&&P({url:ye}),"function"==typeof j)try{j(ye)}catch(Wt){console.error(Wt)}});return function(ye){return ge.apply(this,arguments)}}()}};function gl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vt("no-auth-event")}}function Fo(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function gf(h=(0,V.z$)()){return!("file:"!==Fo()&&"ionic:"!==Fo()&&"capacitor:"!==Fo()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qm(){try{const h=self.localStorage,c=Tu();if(h)return h.setItem(c,"1"),h.removeItem(c),!function _E(h=(0,V.z$)()){return function _l(){return(0,V.w1)()&&11===document?.documentMode}()||function Km(h=(0,V.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,V.hl)()}catch{return Vo()&&(0,V.hl)()}return!1}function Vo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ds(){return(function mE(){return"http:"===Fo()||"https:"===Fo()}()||(0,V.ru)()||gf())&&!function mf(){return(0,V.b$)()||(0,V.UG)()}()&&Qm()&&!Vo()}function Ym(){return gf()&&typeof document<"u"}function yl(){return(yl=(0,E.Z)(function*(){return!!Ym()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const ei={LOCAL:"local",NONE:"none",SESSION:"session"},Vu=K,Jm="persistence";function lo(h){return vl.apply(this,arguments)}function vl(){return(vl=(0,E.Z)(function*(h){yield h._initializationPromise;const c=Uu(),l=Ue(Jm,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function Uu(){var h;try{return(null===(h=function yE(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const Xm=K;class Uo{constructor(){this.browserResolver=Ae(Gm),this.cordovaResolver=Ae(fE),this.underlyingResolver=null,this._redirectPersistence=Er,this._completeRedirectFn=vs,this._overrideRedirectResult=Mn}_initialize(c){var l=this;return(0,E.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,m){var v=this;return(0,E.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,l,p,m)})()}_openRedirect(c,l,p,m){var v=this;return(0,E.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,l,p,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Ym()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,E.Z)(function*(){if(c.underlyingResolver)return;const l=yield function xA(){return yl.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function yf(h){return h.unwrap()}function Il(h){return El(h)}function El(h){const{_tokenResponse:c}=h instanceof V.ZR?h.customData:h;if(!c)return null;if(!(h instanceof V.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Jc.credentialFromResult(h);const l=c.providerId;if(!l||l===_t.PASSWORD)return null;let p;switch(l){case _t.GOOGLE:p=se;break;case _t.FACEBOOK:p=Th;break;case _t.GITHUB:p=mu;break;case _t.TWITTER:p=um;break;default:const{oauthIdToken:m,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:P,nonce:j}=c;return v||T||m||P?P?l.startsWith("saml.")?Vi._create(l,P):Fi._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:v}):new re(l).credential({idToken:m,accessToken:v,rawNonce:j}):null}return h instanceof V.ZR?p.credentialFromError(h):p.credentialFromResult(h)}function Tr(h,c){return c.catch(l=>{throw l instanceof V.ZR&&function NA(h,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new t_(h,function fA(h,c){var l;const p=(0,V.m9)(h),m=c;return K(c.customData.operationType,p,"argument-error"),K(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),ym._fromError(p,m)}(h,c));else if(p){const m=El(c),v=c;m&&(v.credential=m,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Il(l),additionalUserInfo:Un(l),user:cr.getOrCreate(m)}})}function Bu(h,c){return wl.apply(this,arguments)}function wl(){return(wl=(0,E.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>Tr(h,l.confirm(p))}})).apply(this,arguments)}class t_{constructor(c,l){this.resolver=l,this.auth=function e_(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Tr(yf(this.auth),this.resolver.resolveSignIn(c))}}class cr{constructor(c){this._delegate=c,this.multiFactor=function yA(h){const c=(0,V.m9)(h);return Im.has(c)||Im.set(c,vm._fromUser(c)),Im.get(c)}(c)}static getOrCreate(c){return cr.USER_MAP.has(c)||cr.USER_MAP.set(c,new cr(c)),cr.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,E.Z)(function*(){return Tr(l.auth,dm(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,E.Z)(function*(){return Bu(p.auth,function qh(h,c,l){return It.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,E.Z)(function*(){return Tr(l.auth,function Om(h,c,l){return Ru.apply(this,arguments)}(l._delegate,c,Uo))})()}linkWithRedirect(c){var l=this;return(0,E.Z)(function*(){return yield lo(Ft(l.auth)),nl(l._delegate,c,Uo)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,E.Z)(function*(){return Tr(l.auth,Mh(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Bu(this.auth,function Pm(h,c,l){return _s.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Tr(this.auth,function Kh(h,c,l){return Su.apply(this,arguments)}(this._delegate,c,Uo))}reauthenticateWithRedirect(c){var l=this;return(0,E.Z)(function*(){return yield lo(Ft(l.auth)),WI(l._delegate,c,Uo)})()}sendEmailVerification(c){return function fm(h,c){return So.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,E.Z)(function*(){return yield function _u(h,c){return jc.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function Ro(h,c){return Po((0,V.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function Zc(h,c){return Po((0,V.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Gh(h,c){return Wh.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Eu(h,c){return Wc.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function Gt(h,c,l){return gs.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cr.USER_MAP=new WeakMap;const ju=K;let Tl=(()=>{class h{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;ju(m,"invalid-api-key",{appName:l.name}),ju(m,"invalid-api-key",{appName:l.name});const v=typeof window<"u"?Uo:void 0;this._delegate=p.initialize({options:{persistence:IE(m,l.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(_n),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function Yg(h,c,l){const p=Ft(h);K(p._canInitEmulator,p,"emulator-config-failed"),K(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const m=!!l?.disableWarnings,v=EI(c),{host:T,port:P}=function Ir(h){const c=EI(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(p);if(m){const v=m[1];return{host:v,port:xe(p.substr(v.length+1))}}{const[v,T]=p.split(":");return{host:v,port:xe(T)}}}(c);p.config.emulator={url:`${v}//${T}${null===P?"":`:${P}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:T,port:P,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function sA(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,p)}applyActionCode(l){return function hm(h,c){return Gc.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Iu(this._delegate,l)}confirmPasswordReset(l,p){return function Ao(h,c,l){return Rn.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var m=this;return(0,E.Z)(function*(){return Tr(m._delegate,function ie(h,c,l){return be.apply(this,arguments)}(m._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function je(h,c){return ps.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function _i(h,c){const l=ta.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,E.Z)(function*(){ju(Ds(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function rl(h,c){return ma.apply(this,arguments)}(l._delegate,Uo);return p?Tr(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function ml(h,c){Ft(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,m){const{next:v,error:T,complete:P}=$u(l,p,m);return this._delegate.onAuthStateChanged(v,T,P)}onIdTokenChanged(l,p,m){const{next:v,error:T,complete:P}=$u(l,p,m);return this._delegate.onIdTokenChanged(v,T,P)}sendSignInLinkToEmail(l,p){return function mi(h,c,l){return Pn.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function In(h,c,l){return En.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,E.Z)(function*(){let m;switch(function vE(h,c){Vu(Object.values(ei).includes(c),h,"invalid-persistence-type"),(0,V.b$)()?Vu(c!==ei.SESSION,h,"unsupported-persistence-type"):(0,V.UG)()?Vu(c===ei.NONE,h,"unsupported-persistence-type"):Vo()?Vu(c===ei.NONE||c===ei.LOCAL&&(0,V.hl)(),h,"unsupported-persistence-type"):Vu(c===ei.NONE||Qm(),h,"unsupported-persistence-type")}(p._delegate,l),l){case ei.SESSION:m=Er;break;case ei.LOCAL:m=(yield Ae(fa)._isAvailable())?fa:ji;break;case ei.NONE:m=we;break;default:return lt("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Tr(this._delegate,function ht(h){return Bc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Tr(this._delegate,zc(this._delegate,l))}signInWithCustomToken(l){return Tr(this._delegate,function pi(h,c){return Oh.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return Tr(this._delegate,function Ut(h,c,l){return zc((0,V.m9)(h),wh.credential(c,l)).catch(function(){var p=(0,E.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Jn(h),m});return function(m){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return Tr(this._delegate,function oa(h,c,l){return Tt.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return Bu(this._delegate,function ot(h,c,l){return bu.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,E.Z)(function*(){return ju(Ds(),p._delegate,"operation-not-supported-in-this-environment"),Tr(p._delegate,function HI(h,c,l){return Zh.apply(this,arguments)}(p._delegate,l,Uo))})()}signInWithRedirect(l){var p=this;return(0,E.Z)(function*(){return ju(Ds(),p._delegate,"operation-not-supported-in-this-environment"),yield lo(p._delegate),qI(p._delegate,l,Uo)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function RI(h,c){return Vt.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=ei,h})();function $u(h,c,l){let p=h;"function"!=typeof h&&({next:p,error:c,complete:l}=h);const m=p;return{next:T=>m(T&&cr.getOrCreate(T)),error:c,complete:l}}function IE(h,c){const l=function _f(h,c){const l=Uu();if(!l)return[];const p=Ue(Jm,h,c);switch(l.getItem(p)){case ei.NONE:return[we];case ei.LOCAL:return[fa,Er];case ei.SESSION:return[Er];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(fa)&&l.push(fa),typeof window<"u")for(const p of[ji,Er])l.includes(p)||l.push(p);return l.includes(we)||l.push(we),l}class Hu{constructor(){this.providerId="phone",this._delegate=new Jc(yf(ve.Z.auth()))}static credential(c,l){return Jc.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Hu.PHONE_SIGN_IN_METHOD=Jc.PHONE_SIGN_IN_METHOD,Hu.PROVIDER_ID=Jc.PROVIDER_ID;const Cl=K;class ti{constructor(c,l,p=ve.Z.app()){var m;Cl(null===(m=p.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new jI(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vf(h){h.INTERNAL.registerComponent(new dn.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new Tl(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wh,FacebookAuthProvider:Th,GithubAuthProvider:mu,GoogleAuthProvider:se,OAuthProvider:re,SAMLAuthProvider:Uc,PhoneAuthProvider:Hu,PhoneMultiFactorGenerator:nE,RecaptchaVerifier:ti,TwitterAuthProvider:um,Auth:Tl,AuthCredential:du,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.0")}(ve.Z)},861:(Xi,Ln,ze)=>{function E(V,Fe,Jt,qe,dn,Gn,_t){try{var Q=V[Gn](_t),te=Q.value}catch(Ee){return void Jt(Ee)}Q.done?Fe(te):Promise.resolve(te).then(qe,dn)}function ve(V){return function(){var Fe=this,Jt=arguments;return new Promise(function(qe,dn){var Gn=V.apply(Fe,Jt);function _t(te){E(Gn,qe,dn,_t,Q,"next",te)}function Q(te){E(Gn,qe,dn,_t,Q,"throw",te)}_t(void 0)})}}ze.d(Ln,{Z:()=>ve})},582:(Xi,Ln,ze)=>{function Fe(O,L){var G={};for(var z in O)Object.prototype.hasOwnProperty.call(O,z)&&L.indexOf(z)<0&&(G[z]=O[z]);if(null!=O&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(z=Object.getOwnPropertySymbols(O);Y<z.length;Y++)L.indexOf(z[Y])<0&&Object.prototype.propertyIsEnumerable.call(O,z[Y])&&(G[z[Y]]=O[z[Y]])}return G}function Ee(O,L,G,z){return new(G||(G=Promise))(function(Z,Me){function it(dt){try{Re(z.next(dt))}catch(an){Me(an)}}function hn(dt){try{Re(z.throw(dt))}catch(an){Me(an)}}function Re(dt){dt.done?Z(dt.value):function Y(Z){return Z instanceof G?Z:new G(function(Me){Me(Z)})}(dt.value).then(it,hn)}Re((z=z.apply(O,L||[])).next())})}function Nt(O){return this instanceof Nt?(this.v=O,this):new Nt(O)}function lt(O,L,G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,z=G.apply(O,L||[]),Z=[];return Y={},Me("next"),Me("throw"),Me("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function Me(ke){z[ke]&&(Y[ke]=function(Vn){return new Promise(function(vn,An){Z.push([ke,Vn,vn,An])>1||it(ke,Vn)})})}function it(ke,Vn){try{!function hn(ke){ke.value instanceof Nt?Promise.resolve(ke.value.v).then(Re,dt):an(Z[0][2],ke)}(z[ke](Vn))}catch(vn){an(Z[0][3],vn)}}function Re(ke){it("next",ke)}function dt(ke){it("throw",ke)}function an(ke,Vn){ke(Vn),Z.shift(),Z.length&&it(Z[0][0],Z[0][1])}}function or(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G,L=O[Symbol.asyncIterator];return L?L.call(O):(O=function yt(O){var L="function"==typeof Symbol&&Symbol.iterator,G=L&&O[L],z=0;if(G)return G.call(O);if(O&&"number"==typeof O.length)return{next:function(){return O&&z>=O.length&&(O=void 0),{value:O&&O[z++],done:!O}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}(O),G={},z("next"),z("throw"),z("return"),G[Symbol.asyncIterator]=function(){return this},G);function z(Z){G[Z]=O[Z]&&function(Me){return new Promise(function(it,hn){!function Y(Z,Me,it,hn){Promise.resolve(hn).then(function(Re){Z({value:Re,done:it})},Me)}(it,hn,(Me=O[Z](Me)).done,Me.value)})}}}ze.d(Ln,{FC:()=>lt,KL:()=>or,_T:()=>Fe,mG:()=>Ee,qq:()=>Nt}),"function"==typeof SuppressedError&&SuppressedError}},Xi=>{Xi(Xi.s=414)}]);