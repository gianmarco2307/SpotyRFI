"use strict";(self.webpackChunkSpotyRFI=self.webpackChunkSpotyRFI||[]).push([[590],{144:(rn,Ke,ee)=>{ee.d(Ke,{A3:()=>ne,AL:()=>Gt,AV:()=>Ct,Cc:()=>Se,IN:()=>Xr,Su:()=>et,UR:()=>oe,Uv:()=>Ii,WW:()=>z,Wg:()=>Ue,Ww:()=>se,Y7:()=>Zr,YD:()=>Xt,Yd:()=>ct,Yj:()=>wl,aw:()=>ho,ik:()=>ua,kF:()=>Jr,kx:()=>pe,my:()=>Dt,o9:()=>rt,qk:()=>lo,sX:()=>Ae,t7:()=>Ar,uH:()=>te,yW:()=>L,yy:()=>Z});const _e=function(F){const k=[];let B=0;for(let G=0;G<F.length;G++){let Q=F.charCodeAt(G);Q<128?k[B++]=Q:Q<2048?(k[B++]=Q>>6|192,k[B++]=63&Q|128):55296==(64512&Q)&&G+1<F.length&&56320==(64512&F.charCodeAt(G+1))?(Q=65536+((1023&Q)<<10)+(1023&F.charCodeAt(++G)),k[B++]=Q>>18|240,k[B++]=Q>>12&63|128,k[B++]=Q>>6&63|128,k[B++]=63&Q|128):(k[B++]=Q>>12|224,k[B++]=Q>>6&63|128,k[B++]=63&Q|128)}return k},qe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(F,k){if(!Array.isArray(F))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,G=[];for(let Q=0;Q<F.length;Q+=3){const Le=F[Q],ht=Q+1<F.length,xt=ht?F[Q+1]:0,Bn=Q+2<F.length,Jt=Bn?F[Q+2]:0;let ni=(15&xt)<<2|Jt>>6,bs=63&Jt;Bn||(bs=64,ht||(ni=64)),G.push(B[Le>>2],B[(3&Le)<<4|xt>>4],B[ni],B[bs])}return G.join("")},encodeString(F,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(F):this.encodeByteArray(_e(F),k)},decodeString(F,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(F):function(F){const k=[];let B=0,G=0;for(;B<F.length;){const Q=F[B++];if(Q<128)k[G++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Le=F[B++];k[G++]=String.fromCharCode((31&Q)<<6|63&Le)}else if(Q>239&&Q<365){const Bn=((7&Q)<<18|(63&F[B++])<<12|(63&F[B++])<<6|63&F[B++])-65536;k[G++]=String.fromCharCode(55296+(Bn>>10)),k[G++]=String.fromCharCode(56320+(1023&Bn))}else{const Le=F[B++],ht=F[B++];k[G++]=String.fromCharCode((15&Q)<<12|(63&Le)<<6|63&ht)}}return k.join("")}(this.decodeStringToByteArray(F,k))},decodeStringToByteArray(F,k){this.init_();const B=k?this.charToByteMapWebSafe_:this.charToByteMap_,G=[];for(let Q=0;Q<F.length;){const Le=B[F.charAt(Q++)],xt=Q<F.length?B[F.charAt(Q)]:0;++Q;const Jt=Q<F.length?B[F.charAt(Q)]:64;++Q;const $e=Q<F.length?B[F.charAt(Q)]:64;if(++Q,null==Le||null==xt||null==Jt||null==$e)throw new ye;G.push(Le<<2|xt>>4),64!==Jt&&(G.push(xt<<4&240|Jt>>2),64!==$e&&G.push(Jt<<6&192|$e))}return G},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let F=0;F<this.ENCODED_VALS.length;F++)this.byteToCharMap_[F]=this.ENCODED_VALS.charAt(F),this.charToByteMap_[this.byteToCharMap_[F]]=F,this.byteToCharMapWebSafe_[F]=this.ENCODED_VALS_WEBSAFE.charAt(F),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[F]]=F,F>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(F)]=F,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(F)]=F)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ue=function(F){return function(F){const k=_e(F);return qe.encodeByteArray(k,!0)}(F).replace(/\./g,"")},z=function(F){try{return qe.decodeString(F,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};function se(F,k){if(!(k instanceof Object))return k;switch(k.constructor){case Date:return new Date(k.getTime());case Object:void 0===F&&(F={});break;case Array:F=[];break;default:return k}for(const B in k)!k.hasOwnProperty(B)||!je(B)||(F[B]=se(F[B],k[B]));return F}function je(F){return"__proto__"!==F}const Ye=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const F=process.env.__FIREBASE_DEFAULTS__;return F?JSON.parse(F):void 0})()||(()=>{if(typeof document>"u")return;let F;try{F=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const k=F&&z(F[1]);return k&&JSON.parse(k)})()}catch(F){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${F}`)}},ct=()=>{var F;return null===(F=Ye())||void 0===F?void 0:F.config},Ae=F=>{var k;return null===(k=Ye())||void 0===k?void 0:k[`_${F}`]};class rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((k,B)=>{this.resolve=k,this.reject=B})}wrapCallback(k){return(B,G)=>{B?this.reject(B):this.resolve(G),"function"==typeof k&&(this.promise.catch(()=>{}),1===k.length?k(B):k(B,G))}}}function Xt(F,k){if(F.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const G=k||"demo-project",Q=F.iat||0,Le=F.sub||F.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${G}`,aud:G,iat:Q,exp:Q+3600,auth_time:Q,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},F);return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify(ht)),""].join(".")}function et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ct(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function L(){var F;const k=null===(F=Ye())||void 0===F?void 0:F.forceEnvironment;if("node"===k)return!0;if("browser"===k)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function te(){return"object"==typeof self&&self.self===self}function Se(){const F="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof F&&void 0!==F.id}function Gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ii(){const F=et();return F.indexOf("MSIE ")>=0||F.indexOf("Trident/")>=0}function lo(){return!L()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z(){try{return"object"==typeof indexedDB}catch{return!1}}function ne(){return new Promise((F,k)=>{try{let B=!0;const G="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(G);Q.onsuccess=()=>{Q.result.close(),B||self.indexedDB.deleteDatabase(G),F(!0)},Q.onupgradeneeded=()=>{B=!1},Q.onerror=()=>{var Le;k((null===(Le=Q.error)||void 0===Le?void 0:Le.message)||"")}}catch(B){k(B)}})}class pe extends Error{constructor(k,B,G){super(B),this.code=k,this.customData=G,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(k,B,G){this.service=k,this.serviceName=B,this.errors=G}create(k,...B){const G=B[0]||{},Q=`${this.service}/${k}`,Le=this.errors[k],ht=Le?function tt(F,k){return F.replace(jt,(B,G)=>{const Q=k[G];return null!=Q?String(Q):`<${G}?>`})}(Le,G):"Error";return new pe(Q,`${this.serviceName}: ${ht} (${Q}).`,G)}}const jt=/\{\$([^}]+)}/g;function Zr(F,k){return Object.prototype.hasOwnProperty.call(F,k)}function Ar(F){for(const k in F)if(Object.prototype.hasOwnProperty.call(F,k))return!1;return!0}function Xr(F,k){if(F===k)return!0;const B=Object.keys(F),G=Object.keys(k);for(const Q of B){if(!G.includes(Q))return!1;const Le=F[Q],ht=k[Q];if(uo(Le)&&uo(ht)){if(!Xr(Le,ht))return!1}else if(Le!==ht)return!1}for(const Q of G)if(!B.includes(Q))return!1;return!0}function uo(F){return null!==F&&"object"==typeof F}function ua(F){const k=[];for(const[B,G]of Object.entries(F))Array.isArray(G)?G.forEach(Q=>{k.push(encodeURIComponent(B)+"="+encodeURIComponent(Q))}):k.push(encodeURIComponent(B)+"="+encodeURIComponent(G));return k.length?"&"+k.join("&"):""}function ho(F){const k={};return F.replace(/^\?/,"").split("&").forEach(G=>{if(G){const[Q,Le]=G.split("=");k[decodeURIComponent(Q)]=decodeURIComponent(Le)}}),k}function Jr(F){const k=F.indexOf("?");if(!k)return"";const B=F.indexOf("#",k);return F.substring(k,B>0?B:void 0)}function Dt(F,k){const B=new or(F,k);return B.subscribe.bind(B)}class or{constructor(k,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{k(this)}).catch(G=>{this.error(G)})}next(k){this.forEachObserver(B=>{B.next(k)})}error(k){this.forEachObserver(B=>{B.error(k)}),this.close(k)}complete(){this.forEachObserver(k=>{k.complete()}),this.close()}subscribe(k,B,G){let Q;if(void 0===k&&void 0===B&&void 0===G)throw new Error("Missing Observer.");Q=function ei(F,k){if("object"!=typeof F||null===F)return!1;for(const B of k)if(B in F&&"function"==typeof F[B])return!0;return!1}(k,["next","error","complete"])?k:{next:k,error:B,complete:G},void 0===Q.next&&(Q.next=po),void 0===Q.error&&(Q.error=po),void 0===Q.complete&&(Q.complete=po);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Le}unsubscribeOne(k){void 0===this.observers||void 0===this.observers[k]||(delete this.observers[k],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(k){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,k)}sendOne(k,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[k])try{B(this.observers[k])}catch(G){typeof console<"u"&&console.error&&console.error(G)}})}close(k){this.finalized||(this.finalized=!0,void 0!==k&&(this.finalError=k),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function po(){}function wl(F){return F&&F._delegate?F._delegate:F}},532:(rn,Ke,ee)=>{var h=ee(496);let be=null;function U(){return be}class xe{}const ye=new h.UbH("");let St=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:()=>(0,h.uUt)(z),providedIn:"platform"})}return n})();const Ue=new h.UbH("");let z=(()=>{class n extends St{constructor(){super(),this._doc=(0,h.uUt)(ye),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function j(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let Te=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:()=>(0,h.uUt)(wt),providedIn:"root"})}return n})();const ft=new h.UbH("");let wt=(()=>{class n extends Te{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.uUt)(ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return j(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,c){const u=this.prepareExternalUrl(s+je(c));this._platformLocation.pushState(t,r,u)}replaceState(t,r,s,c){const u=this.prepareExternalUrl(s+je(c));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(St),h.CoB(ft,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ze=(()=>{class n extends Te{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=j(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,c){let u=this.prepareExternalUrl(s+je(c));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,s,c){let u=this.prepareExternalUrl(s+je(c));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(St),h.CoB(ft,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})(),Ye=(()=>{class n{constructor(t){this._subject=new h._w7,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ae(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(se(ct(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function wn(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ct(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}static#e=this.normalizeQueryParams=je;static#t=this.joinWithSlash=j;static#n=this.stripTrailingSlash=se;static#r=this.\u0275fac=function(r){return new(r||n)(h.CoB(Te))};static#i=this.\u0275prov=h.wxM({token:n,factory:()=>function on(){return new Ye((0,h.CoB)(Te))}(),providedIn:"root"})}return n})();function ct(n){return n.replace(/\/index.html$/,"")}const ld=/\s+/,Cl=[];let Za=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=Cl,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(ld):Cl}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(ld):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],s=t[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(ld).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(h.GMv),h.GI1(h.q87))};static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","ngClass",""]],inputs:{klass:[h.Wk5.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class gn{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Dl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,c,u)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new gn(s.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===c?void 0:c);else if(null!==c){const g=r.get(c);r.move(g,u),Xa(g,s)}});for(let s=0,c=r.length;s<c;s++){const g=r.get(s).context;g.index=s,g.count=c,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Xa(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(h.y8U),h.GI1(h.Yw2),h.GI1(h.Uj7))};static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Xa(n,e){n.context.$implicit=e.item}let Rr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new qy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bf("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bf("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(h.y8U),h.GI1(h.Yw2))};static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class qy{constructor(){this.$implicit=null,this.ngIf=null}}function bf(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.GEN)(e)}'.`)}let _n=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({})}return n})();const tc="browser";function Al(n){return n===tc}function Yi(n){return"server"===n}let Sf=(()=>{class n{static#e=this.\u0275prov=(0,h.wxM)({token:n,providedIn:"root",factory:()=>Al((0,h.uUt)(h.AHE))?new fa((0,h.uUt)(ye),window):new rc})}return n})();class fa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function mo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const c=s.shadowRoot;if(c){const u=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(u)return u}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],s-c[1])}}class rc{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class ci extends xe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class bd extends ci{static makeCurrent(){!function _e(n){be??=n}(new bd)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cb(){return uc=uc||document.querySelector("base"),uc?uc.getAttribute("href"):null}();return null==t?null:function lb(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){uc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function vf(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let uc=null,Hf=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})();const Id=new h.UbH("");let Ed=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(c=>c.supports(t)),!r)throw new h.OBp(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(Id),h.CoB(h.WW2))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})();class ub{constructor(e){this._doc=e}}const dc="ng-app-id";let wd=(()=>{class n{constructor(t,r,s,c={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=c,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yi(c),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${dc}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const c=s.get(t);return c.usage+=r,c.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,c=s?.get(r);if(c?.parentNode===t)return s.delete(r),c.removeAttribute(dc),c;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=r,this.platformIsServer&&u.setAttribute(dc,this.appId),t.appendChild(u),u}}addStyleToHost(t,r){const s=this.getStyleElement(t,r),c=this.styleRef,u=c.get(r)?.elements;u?u.push(s):c.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ye),h.CoB(h.QHP),h.CoB(h.YND,8),h.CoB(h.AHE))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})();const Cd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zf=/%COMP%/g,Br=new h.UbH("",{providedIn:"root",factory:()=>!0});function Dd(n,e){return e.map(t=>t.replace(zf,n))}let Gf=(()=>{class n{constructor(t,r,s,c,u,g,y,w=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=c,this.doc=u,this.platformId=g,this.ngZone=y,this.nonce=w,this.rendererByCompId=new Map,this.platformIsServer=Yi(g),this.defaultRenderer=new Wf(t,u,y,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.K6R.ShadowDom&&(r={...r,encapsulation:h.K6R.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof Ad?s.applyToHost(t):s instanceof Ui&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let c=s.get(r.id);if(!c){const u=this.doc,g=this.ngZone,y=this.eventManager,w=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,A=this.platformIsServer;switch(r.encapsulation){case h.K6R.Emulated:c=new Ad(y,w,r,this.appId,D,u,g,A);break;case h.K6R.ShadowDom:return new Td(y,w,t,r,u,g,this.nonce,A);default:c=new Ui(y,w,r,D,u,g,A)}s.set(r.id,c)}return c}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(Ed),h.CoB(wd),h.CoB(h.QHP),h.CoB(Br),h.CoB(ye),h.CoB(h.AHE),h.CoB(h.WW2),h.CoB(h.YND))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})();class Wf{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Cd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qf(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qf(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.OBp(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const c=Cd[s];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Cd[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.yzm.DashCase|h.yzm.Important)?e.style.setProperty(t,r,s&h.yzm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.yzm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=U().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function qf(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Td extends Wf{constructor(e,t,r,s,c,u,g,y){super(e,c,u,y),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const w=Dd(s.id,s.styles);for(const D of w){const A=document.createElement("style");g&&A.setAttribute("nonce",g),A.textContent=D,this.shadowRoot.appendChild(A)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ui extends Wf{constructor(e,t,r,s,c,u,g,y){super(e,c,u,g),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=y?Dd(y,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ad extends Ui{constructor(e,t,r,s,c,u,g,y){const w=s+"-"+r.id;super(e,t,r,c,u,g,y,w),this.contentAttr=function Ho(n){return"_ngcontent-%COMP%".replace(zf,n)}(w),this.hostAttr=function qt(n){return"_nghost-%COMP%".replace(zf,n)}(w)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let hc=(()=>{class n extends ub{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ye))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})();const zo=["alt","control","meta","shift"],Yf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fb={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let li=(()=>{class n extends ub{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const c=n.parseEventName(r),u=n.eventCallback(c.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,c.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const c=n._normalizeKey(r.pop());let u="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),u="code."),zo.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),u+=w+".")}),u+=c,0!=r.length||0===c.length)return null;const y={};return y.domEventName=s,y.fullKey=u,y}static matchEventFullKeyCode(t,r){let s=Yf[t.key]||t.key,c="";return r.indexOf("code.")>-1&&(s=t.code,c="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),zo.forEach(u=>{u!==s&&(0,fb[u])(t)&&(c+=u+".")}),c+=s,c===r)}static eventCallback(t,r,s){return c=>{n.matchEventFullKeyCode(c,t)&&s.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ye))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})();const Ti=(0,h.grM)(h.m4O,"browser",[{provide:h.AHE,useValue:tc},{provide:h.crf,useValue:function yo(){bd.makeCurrent()},multi:!0},{provide:ye,useFactory:function Lg(){return(0,h.auf)(document),document},deps:[]}]),Mn=new h.UbH(""),ma=[{provide:h.Mn9,useClass:class $f{addToWindow(e){h.IHs.getAngularTestability=(r,s=!0)=>{const c=e.findTestabilityInTree(r,s);if(null==c)throw new h.OBp(5103,!1);return c},h.IHs.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.IHs.getAllAngularRootElements=()=>e.getAllRootElements(),h.IHs.frameworkStabilizers||(h.IHs.frameworkStabilizers=[]),h.IHs.frameworkStabilizers.push(r=>{const s=h.IHs.getAllAngularTestabilities();let c=s.length;const u=function(){c--,0==c&&r()};s.forEach(g=>{g.whenStable(u)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.aS5,useClass:h.G4X,deps:[h.WW2,h.eOv,h.Mn9]},{provide:h.G4X,useClass:h.G4X,deps:[h.WW2,h.eOv,h.Mn9]}],Kf=[{provide:h.i4S,useValue:"root"},{provide:h.eAe,useFactory:function Vw(){return new h.eAe},deps:[]},{provide:Id,useClass:hc,multi:!0,deps:[ye,h.WW2,h.AHE]},{provide:Id,useClass:li,multi:!0,deps:[ye]},Gf,wd,Ed,{provide:h.O8F,useExisting:Gf},{provide:class ic{},useClass:Hf,deps:[]},[]];let Vg=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.QHP,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(Mn,12))};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({providers:[...Kf,...ma],imports:[_n,h.Ev2]})}return n})(),Fl=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ye))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:function(r){let s=null;return s=r?new(r||n):h.CoB(Jf),s},providedIn:"root"})}return n})(),Jf=(()=>{class n extends jg{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.SI6.NONE:return r;case h.SI6.HTML:return(0,h.K2p)(r,"HTML")?(0,h.E2t)(r):(0,h.Om8)(this._doc,String(r)).toString();case h.SI6.STYLE:return(0,h.K2p)(r,"Style")?(0,h.E2t)(r):r;case h.SI6.SCRIPT:if((0,h.K2p)(r,"Script"))return(0,h.E2t)(r);throw new h.OBp(5200,!1);case h.SI6.URL:return(0,h.K2p)(r,"URL")?(0,h.E2t)(r):(0,h.ozE)(String(r));case h.SI6.RESOURCE_URL:if((0,h.K2p)(r,"ResourceURL"))return(0,h.E2t)(r);throw new h.OBp(5201,!1);default:throw new h.OBp(5202,!1)}}bypassSecurityTrustHtml(t){return(0,h.GM_)(t)}bypassSecurityTrustStyle(t){return(0,h.Vfw)(t)}bypassSecurityTrustScript(t){return(0,h.ER9)(t)}bypassSecurityTrustUrl(t){return(0,h.Gc)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.u8n)(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ye))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jn=ee(252),yn=ee(880),pc=ee(316);const tp=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Hg(n){return(0,yn.m)(n?.then)}var Ul=ee(472);function ot(n){return(0,yn.m)(n[Ul.a])}function jl(n){return Symbol.asyncIterator&&(0,yn.m)(n?.[Symbol.asyncIterator])}function xd(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const np=function $l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function mc(n){return(0,yn.m)(n?.[np])}function zg(n){return(0,pc.o7)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:s}=yield(0,pc.U1)(t.read());if(s)return yield(0,pc.U1)(void 0);yield yield(0,pc.U1)(r)}}finally{t.releaseLock()}})}function gc(n){return(0,yn.m)(n?.getReader)}var jw=ee(984);function Ur(n){if(n instanceof jn._)return n;if(null!=n){if(ot(n))return function rp(n){return new jn._(e=>{const t=n[Ul.a]();if((0,yn.m)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(tp(n))return function Gg(n){return new jn._(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Hg(n))return function ip(n){return new jn._(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,jw.U)})}(n);if(jl(n))return Lt(n);if(mc(n))return function at(n){return new jn._(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(gc(n))return function _c(n){return Lt(zg(n))}(n)}throw xd(n)}function Lt(n){return new jn._(e=>{(function op(n,e){var t,r,s,c;return(0,pc.kH)(this,void 0,void 0,function*(){try{for(t=(0,pc.mA)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(u){s={error:u}}finally{try{r&&!r.done&&(c=t.return)&&(yield c.call(t))}finally{if(s)throw s.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Go(n,e,t,r=0,s=!1){const c=e.schedule(function(){t(),s?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(c),!s)return c}var $n=ee(448),Pn=ee(773);function Zi(n,e=0){return(0,$n.i)((t,r)=>{t.subscribe((0,Pn.e)(r,s=>Go(r,n,()=>r.next(s),e),()=>Go(r,n,()=>r.complete(),e),s=>Go(r,n,()=>r.error(s),e)))})}function Wo(n,e=0){return(0,$n.i)((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sp(n,e){if(!n)throw new Error("Iterable cannot be null");return new jn._(t=>{Go(t,e,()=>{const r=n[Symbol.asyncIterator]();Go(t,e,()=>{r.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function en(n,e){return e?function zl(n,e){if(null!=n){if(ot(n))return function Wg(n,e){return Ur(n).pipe(Wo(e),Zi(e))}(n,e);if(tp(n))return function Rd(n,e){return new jn._(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Hg(n))return function ui(n,e){return Ur(n).pipe(Wo(e),Zi(e))}(n,e);if(jl(n))return sp(n,e);if(mc(n))return function $w(n,e){return new jn._(t=>{let r;return Go(t,e,()=>{r=n[np](),Go(t,e,()=>{let s,c;try{({value:s,done:c}=r.next())}catch(u){return void t.error(u)}c?t.complete():t.next(s)},0,!0)}),()=>(0,yn.m)(r?.return)&&r.return()})}(n,e);if(gc(n))return function Hl(n,e){return sp(zg(n),e)}(n,e)}throw xd(n)}(n,e):Ur(n)}function qg(n){return n&&(0,yn.m)(n.schedule)}function _a(n){return n[n.length-1]}function vc(n){return qg(_a(n))?n.pop():void 0}function Qe(...n){return en(n,vc(n))}var Hn=ee(700);const{isArray:Eb}=Array,{getPrototypeOf:lr,prototype:ap,keys:Vt}=Object;var Si=ee(528),yt=ee(704);const{isArray:wb}=Array;function Cb(n){return(0,yt.k)(e=>function lp(n,e){return wb(e)?n(...e):n(e)}(n,e))}function qo(...n){const e=vc(n),t=function Ib(n){return(0,yn.m)(_a(n))?n.pop():void 0}(n),{args:r,keys:s}=function Md(n){if(1===n.length){const e=n[0];if(Eb(e))return{args:e,keys:null};if(function cp(n){return n&&"object"==typeof n&&lr(n)===ap}(e)){const t=Vt(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return en([],e);const c=new jn._(function Db(n,e,t=Si.Z){return r=>{yc(e,()=>{const{length:s}=n,c=new Array(s);let u=s,g=s;for(let y=0;y<s;y++)yc(e,()=>{const w=en(n[y],e);let D=!1;w.subscribe((0,Pn.e)(r,A=>{c[y]=A,D||(D=!0,g--),g||r.next(t(c.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,s?u=>function Hw(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}(s,u):Si.Z));return t?c.pipe(Cb(t)):c}function yc(n,e,t){n?Go(t,n,e):e()}const Xi=(0,ee(912).w)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function zn(n,e,t=1/0){return(0,yn.m)(e)?zn((r,s)=>(0,yt.k)((c,u)=>e(r,c,s,u))(Ur(n(r,s))),t):("number"==typeof e&&(t=e),(0,$n.i)((r,s)=>function Pd(n,e,t,r,s,c,u,g){const y=[];let w=0,D=0,A=!1;const M=()=>{A&&!y.length&&!w&&e.complete()},N=re=>w<r?X(re):y.push(re),X=re=>{c&&e.next(re),w++;let de=!1;Ur(t(re,D++)).subscribe((0,Pn.e)(e,we=>{s?.(we),c?N(we):e.next(we)},()=>{de=!0},void 0,()=>{if(de)try{for(w--;y.length&&w<r;){const we=y.shift();u?Go(e,u,()=>X(we)):X(we)}M()}catch(we){e.error(we)}}))};return n.subscribe((0,Pn.e)(e,N,()=>{A=!0,M()})),()=>{g?.()}}(r,s,n,t)))}function Io(n=1/0){return zn(Si.Z,n)}function Eo(...n){return function Gl(){return Io(1)}()(en(n,vc(n)))}function va(n){return new jn._(e=>{Ur(n()).subscribe(e)})}var up=ee(547);function As(n,e){const t=(0,yn.m)(n)?n:()=>n,r=s=>s.error(t());return new jn._(e?s=>e.schedule(r,0,s):r)}const Ji=new jn._(n=>n.complete());var Ss=ee(928);function Ic(){return(0,$n.i)((n,e)=>{let t=null;n._refCount++;const r=(0,Pn.e)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,c=t;t=null,s&&(!c||s===c)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Kg extends jn._{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,$n.e)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ss.wH;const t=this.getSubject();e.add(this.source.subscribe((0,Pn.e)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ss.wH.EMPTY)}return e}refCount(){return Ic()(this)}}var Yt=ee(657);function Gn(n,e){return(0,$n.i)((t,r)=>{let s=null,c=0,u=!1;const g=()=>u&&!s&&r.complete();t.subscribe((0,Pn.e)(r,y=>{s?.unsubscribe();let w=0;const D=c++;Ur(n(y,D)).subscribe(s=(0,Pn.e)(r,A=>r.next(e?e(y,A,D,w++):A),()=>{s=null,g()}))},()=>{u=!0,g()}))})}function xi(n){return n<=0?()=>Ji:(0,$n.i)((e,t)=>{let r=0;e.subscribe((0,Pn.e)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function wo(...n){const e=vc(n);return(0,$n.i)((t,r)=>{(e?Eo(n,t,e):Eo(n,t)).subscribe(r)})}function er(n,e){return(0,$n.i)((t,r)=>{let s=0;t.subscribe((0,Pn.e)(r,c=>n.call(e,c,s++)&&r.next(c)))})}function Yo(n){return(0,$n.i)((e,t)=>{let r=!1;e.subscribe((0,Pn.e)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function dp(n=hp){return(0,$n.i)((e,t)=>{let r=!1;e.subscribe((0,Pn.e)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function hp(){return new Xi}function Ko(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((s,c)=>n(s,c,r)):Si.Z,xi(1),t?Yo(e):dp(()=>new Xi))}function kd(n,e){return(0,yn.m)(e)?zn(n,e,1):zn(n,1)}function vr(n,e,t){const r=(0,yn.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,$n.i)((s,c)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let g=!0;s.subscribe((0,Pn.e)(c,y=>{var w;null===(w=r.next)||void 0===w||w.call(r,y),c.next(y)},()=>{var y;g=!1,null===(y=r.complete)||void 0===y||y.call(r),c.complete()},y=>{var w;g=!1,null===(w=r.error)||void 0===w||w.call(r,y),c.error(y)},()=>{var y,w;g&&(null===(y=r.unsubscribe)||void 0===y||y.call(r)),null===(w=r.finalize)||void 0===w||w.call(r)}))}):Si.Z}function Co(n){return(0,$n.i)((e,t)=>{let c,r=null,s=!1;r=e.subscribe((0,Pn.e)(t,void 0,void 0,u=>{c=Ur(n(u,Co(n)(e))),r?(r.unsubscribe(),r=null,c.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,c.subscribe(t))})}function ya(n,e){return(0,$n.i)(function fp(n,e,t,r,s){return(c,u)=>{let g=t,y=e,w=0;c.subscribe((0,Pn.e)(u,D=>{const A=w++;y=g?n(y,D,A):(g=!0,D),r&&u.next(y)},s&&(()=>{g&&u.next(y),u.complete()})))}}(n,e,arguments.length>=2,!0))}function ql(n){return n<=0?()=>Ji:(0,$n.i)((e,t)=>{let r=[];e.subscribe((0,Pn.e)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Yl(n){return(0,$n.i)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Kl=ee(308);function Qo(n){return(0,$n.i)((e,t)=>{Ur(n).subscribe((0,Pn.e)(t,()=>t.complete(),Kl.K)),!t.closed&&e.subscribe(t)})}const ut="primary",Do=Symbol("RouteTitle");class Zg{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xs(n){return new Zg(n)}function Rs(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let c=0;c<r.length;c++){const u=r[c],g=n[c];if(u.startsWith(":"))s[u.substring(1)]=g;else if(u!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function To(n,e){const t=n?Ms(n):void 0,r=e?Ms(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let c=0;c<t.length;c++)if(s=t[c],!Jg(n[s],e[s]))return!1;return!0}function Ms(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Jg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,c)=>r[c]===s)}return n===e}function Ec(n){return n.length>0?n[n.length-1]:null}function Zo(n){return function bb(n){return!!n&&(n instanceof jn._||(0,yn.m)(n.lift)&&(0,yn.m)(n.subscribe))}(n)?n:(0,h.w5$)(n)?en(Promise.resolve(n)):Qe(n)}const Xo={exact:function wc(n,e,t){if(!Ao(n.segments,e.segments)||!Zl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!wc(n.children[r],e.children[r],t))return!1;return!0},subset:pp},Ps={exact:function Ql(n,e){return To(n,e)},subset:function ba(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Jg(n[t],e[t]))},ignored:()=>!0};function e_(n,e,t){return Xo[t.paths](n.root,e.root,t.matrixParams)&&Ps[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function pp(n,e,t){return Od(n,e,e.segments,t)}function Od(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Ao(s,t)||e.hasChildren()||!Zl(s,t,r))}if(n.segments.length===t.length){if(!Ao(n.segments,t)||!Zl(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!pp(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Ao(n.segments,s)&&Zl(n.segments,s,r)&&n.children[ut])&&Od(n.children[ut],e,c,r)}}function Zl(n,e,t){return e.every((r,s)=>Ps[t](n[s].parameters,r.parameters))}class Jo{constructor(e=new cn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){return Ea.serialize(this)}}class cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dc(this)}}class Ia{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=xs(this.parameters),this._parameterMap}toString(){return n_(this)}}function Ao(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Cc=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:()=>new es,providedIn:"root"})}return n})();class es{parse(e){const t=new Mb(e);return new Jo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ks(e.root,!0)}`,r=function Fd(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(s=>`${Tc(t)}=${Tc(s)}`).join("&"):`${Tc(t)}=${Tc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ac(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ea=new es;function Dc(n){return n.segments.map(e=>n_(e)).join("/")}function ks(n,e){if(!n.hasChildren())return Dc(n);if(e){const t=n.children[ut]?ks(n.children[ut],!1):"",r=[];return Object.entries(n.children).forEach(([s,c])=>{s!==ut&&r.push(`${s}:${ks(c,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function t_(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===ut&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==ut&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===ut?[ks(n.children[ut],!1)]:[`${s}:${ks(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ut]?`${Dc(n)}/${t[0]}`:`${Dc(n)}/(${t.join("//")})`}}function Nd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tc(n){return Nd(n).replace(/%3B/gi,";")}function ji(n){return Nd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ts(n){return decodeURIComponent(n)}function Sc(n){return ts(n.replace(/\+/g,"%20"))}function n_(n){return`${ji(n.path)}${function Sb(n){return Object.entries(n).map(([e,t])=>`;${ji(e)}=${ji(t)}`).join("")}(n.parameters)}`}const xc=/^[^\/()?;#]+/;function mp(n){const e=n.match(xc);return e?e[0]:""}const xb=/^[^\/()?;=#]+/,gp=/^[^=?&#]+/,Xl=/^[^&#]+/;class Mb{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ut]=new cn(e,t)),r}parseSegment(){const e=mp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.OBp(4009,!1);return this.capture(e),new Ia(ts(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Rb(n){const e=n.match(xb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=mp(this.remaining);s&&(r=s,this.capture(r))}e[ts(t)]=ts(r)}parseQueryParam(e){const t=function r_(n){const e=n.match(gp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Rc(n){const e=n.match(Xl);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const s=Sc(t),c=Sc(r);if(e.hasOwnProperty(s)){let u=e[s];Array.isArray(u)||(u=[u],e[s]=u),u.push(c)}else e[s]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mp(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new h.OBp(4010,!1);let c;r.indexOf(":")>-1?(c=r.slice(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=ut);const u=this.parseChildren();t[c]=1===Object.keys(u).length?u[ut]:new cn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.OBp(4011,!1)}}function Ld(n){return n.segments.length>0?new cn([],{[ut]:n}):n}function kn(n){const e={};for(const[r,s]of Object.entries(n.children)){const c=kn(s);if(r===ut&&0===c.segments.length&&c.hasChildren())for(const[u,g]of Object.entries(c.children))e[u]=g;else(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function i_(n){if(1===n.numberOfChildren&&n.children[ut]){const e=n.children[ut];return new cn(n.segments.concat(e.segments),e.children)}return n}(new cn(n.segments,e))}function Mc(n){return n instanceof Jo}function o_(n){let e;const s=Ld(function t(c){const u={};for(const y of c.children){const w=t(y);u[y.outlet]=w}const g=new cn(c.url,u);return c===n&&(e=g),g}(n.root));return e??s}function s_(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return _p(s,s,s,t,r);const c=function Ud(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Bd(!0,0,n);let e=0,t=!1;const r=n.reduce((s,c,u)=>{if("object"==typeof c&&null!=c){if(c.outlets){const g={};return Object.entries(c.outlets).forEach(([y,w])=>{g[y]="string"==typeof w?w.split("/"):w}),[...s,{outlets:g}]}if(c.segmentPath)return[...s,c.segmentPath]}return"string"!=typeof c?[...s,c]:0===u?(c.split("/").forEach((g,y)=>{0==y&&"."===g||(0==y&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,c]},[]);return new Bd(t,e,r)}(e);if(c.toRoot())return _p(s,s,new cn([],{}),t,r);const u=function c_(n,e,t){if(n.isAbsolute)return new Ns(e,!0,0);if(!t)return new Ns(e,!1,NaN);if(null===t.parent)return new Ns(t,!0,0);const r=Vd(n.commands[0])?0:1;return function jd(n,e,t){let r=n,s=e,c=t;for(;c>s;){if(c-=s,r=r.parent,!r)throw new h.OBp(4005,!1);s=r.segments.length}return new Ns(r,!1,s-c)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(c,s,n),g=u.processChildren?Jl(u.segmentGroup,u.index,c.commands):u_(u.segmentGroup,u.index,c.commands);return _p(s,u.segmentGroup,g,t,r)}function Vd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Pc(n){return"object"==typeof n&&null!=n&&n.outlets}function _p(n,e,t,r,s){let u,c={};r&&Object.entries(r).forEach(([y,w])=>{c[y]=Array.isArray(w)?w.map(D=>`${D}`):`${w}`}),u=n===e?t:a_(n,e,t);const g=Ld(kn(u));return new Jo(g,c,s)}function a_(n,e,t){const r={};return Object.entries(n.children).forEach(([s,c])=>{r[s]=c===e?t:a_(c,e,t)}),new cn(n.segments,r)}class Bd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vd(r[0]))throw new h.OBp(4003,!1);const s=r.find(Pc);if(s&&s!==Ec(r))throw new h.OBp(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ns{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function u_(n,e,t){if(n??=new cn([],{}),0===n.segments.length&&n.hasChildren())return Jl(n,e,t);const r=function d_(n,e,t){let r=0,s=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return c;const u=n.segments[s],g=t[r];if(Pc(g))break;const y=`${g}`,w=r<t.length-1?t[r+1]:null;if(s>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!yp(y,w,u))return c;r+=2}else{if(!yp(y,{},u))return c;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new cn(n.segments.slice(0,r.pathIndex),{});return c.children[ut]=new cn(n.segments.slice(r.pathIndex),n.children),Jl(c,0,s)}return r.match&&0===s.length?new cn(n.segments,{}):r.match&&!n.hasChildren()?eu(n,e,t):r.match?Jl(n,0,s):eu(n,e,t)}function Jl(n,e,t){if(0===t.length)return new cn(n.segments,{});{const r=function l_(n){return Pc(n[0])?n[0].outlets:{[ut]:n}}(t),s={};if(Object.keys(r).some(c=>c!==ut)&&n.children[ut]&&1===n.numberOfChildren&&0===n.children[ut].segments.length){const c=Jl(n.children[ut],e,t);return new cn(n.segments,c.children)}return Object.entries(r).forEach(([c,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=u_(n.children[c],e,u))}),Object.entries(n.children).forEach(([c,u])=>{void 0===r[c]&&(s[c]=u)}),new cn(n.segments,s)}}function eu(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const c=t[s];if(Pc(c)){const y=vp(c.outlets);return new cn(r,y)}if(0===s&&Vd(t[0])){r.push(new Ia(n.segments[e].path,kc(t[0]))),s++;continue}const u=Pc(c)?c.outlets[ut]:`${c}`,g=s<t.length-1?t[s+1]:null;u&&g&&Vd(g)?(r.push(new Ia(u,kc(g))),s+=2):(r.push(new Ia(u,{})),s++)}return new cn(r,{})}function vp(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=eu(new cn([],{}),0,r))}),e}function kc(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yp(n,e,t){return n==t.path&&To(e,t.parameters)}const di="imperative";var kt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(kt||{});class Ri{constructor(e,t){this.id=e,this.url=t}}class tr extends Ri{constructor(e,t,r="imperative",s=null){super(e,t),this.type=kt.NavigationStart,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yr extends Ri{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=kt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var jr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(jr||{}),tu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(tu||{});class ns extends Ri{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=kt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fs extends Ri{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=kt.NavigationSkipped}}class rs extends Ri{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=kt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wa extends Ri{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=kt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pb extends Ri{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=kt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class So extends Ri{constructor(e,t,r,s,c){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=c,this.type=kt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class h_ extends Ri{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=kt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kb extends Ri{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=kt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ob{constructor(e){this.route=e,this.type=kt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zw{constructor(e){this.route=e,this.type=kt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Nb{constructor(e){this.snapshot=e,this.type=kt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pr{constructor(e){this.snapshot=e,this.type=kt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ca{constructor(e){this.snapshot=e,this.type=kt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bp{constructor(e){this.snapshot=e,this.type=kt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=kt.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Mi{}class xo{constructor(e){this.url=e}}class Ip{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Nc,this.attachRef=null}}let Nc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ip,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class $d{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=$i(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=$i(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ep(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Ep(e,this._root).map(t=>t.value)}}function $i(n,e){if(n===e.value)return e;for(const t of e.children){const r=$i(n,t);if(r)return r}return null}function Ep(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ep(n,t);if(r.length)return r.unshift(e),r}return[]}class hi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ls(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class v extends $d{constructor(e,t){super(e),this.snapshot=t,H(this,e)}toString(){return this.snapshot.toString()}}function p(n){const e=function m(n){const c=new x([],{},{},"",{},ut,n,null,{});return new P("",new hi(c,[]))}(n),t=new Hn.g([new Ia("",{})]),r=new Hn.g({}),s=new Hn.g({}),c=new Hn.g({}),u=new Hn.g(""),g=new I(t,r,c,u,s,ut,n,e.root);return g.snapshot=e.root,new v(new hi(g,[]),e)}class I{constructor(e,t,r,s,c,u,g,y){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=c,this.outlet=u,this.component=g,this._futureSnapshot=y,this.title=this.dataSubject?.pipe((0,yt.k)(w=>w[Do]))??Qe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,yt.k)(e=>xs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,yt.k)(e=>xs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function T(n,e,t="emptyOnly"){let r;const{routeConfig:s}=n;return r=null===e||"always"!==t&&""!==s?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...s?.data,...n._resolvedData}},s&&Fe(s)&&(r.resolve[Do]=s.title),r}class x{get title(){return this.data?.[Do]}constructor(e,t,r,s,c,u,g,y,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=c,this.outlet=u,this.component=g,this.routeConfig=y,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class P extends $d{constructor(e,t){super(t),this.url=e,H(this,t)}toString(){return ce(this._root)}}function H(n,e){e.value._routerState=n,e.children.forEach(t=>H(n,t))}function ce(n){const e=n.children.length>0?` { ${n.children.map(ce).join(", ")} } `:"";return`${n.value}${e}`}function Ce(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,To(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),To(e.params,t.params)||n.paramsSubject.next(t.params),function Xg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!To(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),To(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Me(n,e){const t=To(n.params,e.params)&&function Ab(n,e){return Ao(n,e)&&n.every((t,r)=>To(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Me(n.parent,e.parent))}function Fe(n){return"string"==typeof n.title||null===n.title}let fn=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ut,this.activateEvents=new h._w7,this.deactivateEvents=new h._w7,this.attachEvents=new h._w7,this.detachEvents=new h._w7,this.parentContexts=(0,h.uUt)(Nc),this.location=(0,h.uUt)(h.y8U),this.changeDetector=(0,h.uUt)(h.kD9),this.environmentInjector=(0,h.uUt)(h.SIe),this.inputBinder=(0,h.uUt)(zi,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.OBp(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.OBp(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.OBp(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.OBp(4013,!1);this._activatedRoute=t;const s=this.location,u=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,y=new Hi(t,g,s.injector);this.activated=s.createComponent(u,{index:s.length,injector:y,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.SYr]})}return n})();class Hi{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===I?this.route:e===Nc?this.childContexts:this.parent.get(e,t)}}const zi=new h.UbH("");let Vs=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=qo([r.queryParams,r.params,r.data]).pipe(Gn(([c,u,g],y)=>(g={...c,...u,...g},0===y?Qe(g):Promise.resolve(g)))).subscribe(c=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const u=(0,h.o9M)(r.component);if(u)for(const{templateName:g}of u.inputs)t.activatedComponentRef.setInput(g,c[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})();function Fc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function wp(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Fc(n,r,s);return Fc(n,r)})}(n,e,t);return new hi(r,s)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const u=c.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(g=>Fc(n,g)),u}}const r=function nu(n){return new I(new Hn.g(n.url),new Hn.g(n.params),new Hn.g(n.queryParams),new Hn.g(n.fragment),new Hn.g(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(c=>Fc(n,c));return new hi(r,s)}}const Cp="ngNavigationCancelingError";function Hd(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Mc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Lc(!1,jr.Redirect);return s.url=t,s.navigationBehaviorOptions=r,s}function Lc(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[Cp]=!0,t.cancellationCode=e,t}function Dp(n){return!!n&&n[Cp]}let Vc=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.UHJ],decls:1,vars:0,template:function(r,s){1&r&&h.wR5(0,"router-outlet")},dependencies:[fn],encapsulation:2})}return n})();function Fb(n){const e=n.children&&n.children.map(Fb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ut&&(t.component=Vc),t}function Da(n){return n.outlet||ut}function Gd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class JP{constructor(e,t,r,s,c){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=c}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ce(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Ls(t);e.children.forEach(c=>{const u=c.value.outlet;this.deactivateRoutes(c,s[u],r),delete s[u]}),Object.values(s).forEach(c=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const s=e.value,c=t?t.value:null;if(s===c)if(s.component){const u=r.getContext(s.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,c=Ls(e);for(const u of Object.values(c))this.deactivateRouteAndItsChildren(u,s);if(r&&r.outlet){const u=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,c=Ls(e);for(const u of Object.values(c))this.deactivateRouteAndItsChildren(u,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=Ls(t);e.children.forEach(c=>{this.activateRoutes(c,s[c.value.outlet],r),this.forwardEvent(new bp(c.value.snapshot))}),e.children.length&&this.forwardEvent(new Pr(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,c=t?t.value:null;if(Ce(s),s===c)if(s.component){const u=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const u=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),u.children.onOutletReAttached(g.contexts),u.attachRef=g.componentRef,u.route=g.route.value,u.outlet&&u.outlet.attach(g.componentRef,g.route.value),Ce(g.route.value),this.activateChildRoutes(e,null,u.children)}else{const g=Gd(s.snapshot);u.attachRef=null,u.route=s,u.injector=g,u.outlet&&u.outlet.activateWith(s,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class p_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class os{constructor(e,t){this.component=e,this.route=t}}function Qw(n,e,t){const r=n._root;return Wd(r,e?e._root:null,t,[r.value])}function ru(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.K_M)(n)?e.get(n):n:r}function Wd(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const c=Ls(e);return n.children.forEach(u=>{(function g_(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,u=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(u&&c.routeConfig===u.routeConfig){const y=function Lb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ao(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ao(n.url,e.url)||!To(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Me(n,e)||!To(n.queryParams,e.queryParams);default:return!Me(n,e)}}(u,c,c.routeConfig.runGuardsAndResolvers);y?s.canActivateChecks.push(new p_(r)):(c.data=u.data,c._resolvedData=u._resolvedData),Wd(n,e,c.component?g?g.children:null:t,r,s),y&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new os(g.outlet.component,u))}else u&&Bs(e,g,s),s.canActivateChecks.push(new p_(r)),Wd(n,null,c.component?g?g.children:null:t,r,s)})(u,c[u.value.outlet],t,r.concat([u.value]),s),delete c[u.value.outlet]}),Object.entries(c).forEach(([u,g])=>Bs(g,t.getContext(u),s)),s}function Bs(n,e,t){const r=Ls(n),s=n.value;Object.entries(r).forEach(([c,u])=>{Bs(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new os(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Tp(n){return"function"==typeof n}function Bb(n){return n instanceof Xi||"EmptyError"===n?.name}const Us=Symbol("INITIAL_VALUE");function qd(){return Gn(n=>qo(n.map(e=>e.pipe(xi(1),wo(Us)))).pipe((0,yt.k)(e=>{for(const t of e)if(!0!==t){if(t===Us)return Us;if(!1===t||t instanceof Jo)return t}return!0}),er(e=>e!==Us),xi(1)))}function Jw(n){return(0,up.W)(vr(e=>{if(Mc(e))throw Hd(0,e)}),(0,yt.k)(e=>!0===e))}class Ub{constructor(e){this.segmentGroup=e||null}}class v_ extends Error{constructor(e){super(),this.urlTree=e}}function Kd(n){return As(new Ub(n))}class y_{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return Qe(r);if(s.numberOfChildren>1||!s.children[ut])return As(new h.OBp(4e3,!1));s=s.children[ut]}}applyRedirectCommands(e,t,r){const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new v_(s);return s}applyRedirectCreateUrlTree(e,t,r,s){const c=this.createSegmentGroup(e,t.root,r,s);return new Jo(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,c])=>{if("string"==typeof c&&c.startsWith(":")){const g=c.substring(1);r[s]=t[g]}else r[s]=c}),r}createSegmentGroup(e,t,r,s){const c=this.createSegments(e,t.segments,r,s);let u={};return Object.entries(t.children).forEach(([g,y])=>{u[g]=this.createSegmentGroup(e,y,r,s)}),new cn(c,u)}createSegments(e,t,r,s){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,s):this.findOrReturn(c,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new h.OBp(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const ss={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ap(n,e,t,r,s){const c=b_(n,e,t);return c.matched?(r=function zd(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.SIz)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function vx(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?Qe(s.map(u=>{const g=ru(u,n);return Zo(function Xw(n){return n&&Tp(n.canMatch)}(g)?g.canMatch(e,t):(0,h.SMS)(n,()=>g(e,t)))})).pipe(qd(),Jw()):Qe(!0)}(r,e,t).pipe((0,yt.k)(u=>!0===u?c:{...ss}))):Qe(c)}function b_(n,e,t){if("**"===e.path)return function eC(n){return{matched:!0,parameters:n.length>0?Ec(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ss}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Rs)(t,n,e);if(!s)return{...ss};const c={};Object.entries(s.posParams??{}).forEach(([g,y])=>{c[g]=y.path});const u=s.consumed.length>0?{...c,...s.consumed[s.consumed.length-1].parameters}:c;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:u,positionalParamSegments:s.posParams??{}}}function jb(n,e,t,r){return t.length>0&&function ik(n,e,t){return t.some(r=>Qd(n,e,r)&&Da(r)!==ut)}(n,t,r)?{segmentGroup:new cn(e,rk(r,new cn(t,n.children))),slicedSegments:[]}:0===t.length&&function $b(n,e,t){return t.some(r=>Qd(n,e,r))}(n,t,r)?{segmentGroup:new cn(n.segments,nk(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new cn(n.segments,n.children),slicedSegments:t}}function nk(n,e,t,r){const s={};for(const c of t)if(Qd(n,e,c)&&!r[Da(c)]){const u=new cn([],{});s[Da(c)]=u}return{...r,...s}}function rk(n,e){const t={};t[ut]=e;for(const r of n)if(""===r.path&&Da(r)!==ut){const s=new cn([],{});t[Da(r)]=s}return t}function Qd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class tC{}class wx{constructor(e,t,r,s,c,u,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=c,this.paramsInheritanceStrategy=u,this.urlSerializer=g,this.applyRedirects=new y_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new h.OBp(4002,`'${e.segmentGroup}'`)}recognize(){const e=jb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe((0,yt.k)(t=>{const r=new x([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ut,this.rootComponentType,null,{}),s=new hi(r,t),c=new P("",s),u=function Os(n,e,t=null,r=null){return s_(o_(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,c.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(c._root,null),{state:c,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ut).pipe(Co(r=>{if(r instanceof v_)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ub?this.noMatchError(r):r}))}inheritParamsAndData(e,t){const r=e.value,s=T(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),e.children.forEach(c=>this.inheritParamsAndData(c,r))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0).pipe((0,yt.k)(c=>c instanceof hi?[c]:[]))}processChildren(e,t,r){const s=[];for(const c of Object.keys(r.children))"primary"===c?s.unshift(c):s.push(c);return en(s).pipe(kd(c=>{const u=r.children[c],g=function Yw(n,e){const t=n.filter(r=>Da(r)===e);return t.push(...n.filter(r=>Da(r)!==e)),t}(t,c);return this.processSegmentGroup(e,g,u,c)}),ya((c,u)=>(c.push(...u),c)),Yo(null),function Tb(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((s,c)=>n(s,c,r)):Si.Z,ql(1),t?Yo(e):dp(()=>new Xi))}(),zn(c=>{if(null===c)return Kd(r);const u=Sp(c);return function Cx(n){n.sort((e,t)=>e.value.outlet===ut?-1:t.value.outlet===ut?1:e.value.outlet.localeCompare(t.value.outlet))}(u),Qe(u)}))}processSegment(e,t,r,s,c,u){return en(t).pipe(kd(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,s,c,u).pipe(Co(y=>{if(y instanceof Ub)return Qe(null);throw y}))),Ko(g=>!!g),Co(g=>{if(Bb(g))return function sk(n,e,t){return 0===e.length&&!n.children[t]}(r,s,c)?Qe(new tC):Kd(r);throw g}))}processSegmentAgainstRoute(e,t,r,s,c,u,g){return function ok(n,e,t,r){return!!(Da(n)===r||r!==ut&&Qd(e,t,n))&&b_(e,n,t).matched}(r,s,c,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,c,u):this.allowRedirects&&g?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,c,u):Kd(s):Kd(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,c,u){const{matched:g,consumedSegments:y,positionalParamSegments:w,remainingSegments:D}=b_(t,s,c);if(!g)return Kd(t);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const A=this.applyRedirects.applyRedirectCommands(y,s.redirectTo,w);return this.applyRedirects.lineralizeSegments(s,A).pipe(zn(M=>this.processSegment(e,r,t,M.concat(D),u,!1)))}matchSegmentAgainstRoute(e,t,r,s,c){const u=Ap(t,r,s,e);return"**"===r.path&&(t.children={}),u.pipe(Gn(g=>g.matched?this.getChildConfig(e=r._injector??e,r,s).pipe(Gn(({routes:y})=>{const w=r._loadedInjector??e,{consumedSegments:D,remainingSegments:A,parameters:M}=g,N=new x(D,M,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Hb(n){return n.data||{}}(r),Da(r),r.component??r._loadedComponent??null,r,function Tx(n){return n.resolve||{}}(r)),{segmentGroup:X,slicedSegments:re}=jb(t,D,A,y);if(0===re.length&&X.hasChildren())return this.processChildren(w,y,X).pipe((0,yt.k)(we=>null===we?null:new hi(N,we)));if(0===y.length&&0===re.length)return Qe(new hi(N,[]));const de=Da(r)===c;return this.processSegment(w,y,X,re,de?ut:c,!0).pipe((0,yt.k)(we=>new hi(N,we instanceof hi?[we]:[])))})):Kd(t)))}getChildConfig(e,t,r){return t.children?Qe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Qe({routes:t._loadedRoutes,injector:t._loadedInjector}):function _x(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?Qe(!0):Qe(s.map(u=>{const g=ru(u,n);return Zo(function ek(n){return n&&Tp(n.canLoad)}(g)?g.canLoad(e,t):(0,h.SMS)(n,()=>g(e,t)))})).pipe(qd(),Jw())}(e,t,r).pipe(zn(s=>s?this.configLoader.loadChildren(e,t).pipe(vr(c=>{t._loadedRoutes=c.routes,t._loadedInjector=c.injector})):function bx(n){return As(Lc(!1,jr.GuardRejected))}())):Qe({routes:[],injector:e})}}function nC(n){const e=n.value.routeConfig;return e&&""===e.path}function Sp(n){const e=[],t=new Set;for(const r of n){if(!nC(r)){e.push(r);continue}const s=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=Sp(r.children);e.push(new hi(r.value,s))}return e.filter(r=>!t.has(r))}function rC(n){const e=n.children.map(t=>rC(t)).flat();return[n,...e]}function Gb(n){return Gn(e=>{const t=n(e);return t?en(t).pipe((0,yt.k)(()=>e)):Qe(e)})}let oC=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(c=>c.outlet===ut);return r}getResolvedTitleForRoute(t){return t.data[Do]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:()=>(0,h.uUt)(xx),providedIn:"root"})}return n})(),xx=(()=>{class n extends oC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(Fl))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ou=new h.UbH("",{providedIn:"root",factory:()=>({})}),xp=new h.UbH("");let sC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.uUt)(h.ESV)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Zo(t.loadComponent()).pipe((0,yt.k)(aC),vr(c=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=c}),Yl(()=>{this.componentLoaders.delete(t)})),s=new Kg(r,()=>new Yt.E).pipe(Ic());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Qe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const c=function Rp(n,e,t,r){return Zo(n.loadChildren()).pipe((0,yt.k)(aC),zn(s=>s instanceof h.obV||Array.isArray(s)?Qe(s):en(e.compileModuleAsync(s))),(0,yt.k)(s=>{r&&r(n);let c,u,g=!1;return Array.isArray(s)?(u=s,!0):(c=s.create(t).injector,u=c.get(xp,[],{optional:!0,self:!0}).flat()),{routes:u.map(Fb),injector:c}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Yl(()=>{this.childrenLoaders.delete(r)})),u=new Kg(c,()=>new Yt.E).pipe(Ic());return this.childrenLoaders.set(r,u),u}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aC(n){return function Rx(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Wb=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:()=>(0,h.uUt)(cC),providedIn:"root"})}return n})(),cC=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const lC=new h.UbH(""),uC=new h.UbH("");function Mx(n,e,t){const r=n.get(uC),s=n.get(ye);return n.get(h.WW2).runOutsideAngular(()=>{if(!s.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let c;const u=new Promise(w=>{c=w}),g=s.startViewTransition(()=>(c(),function Px(n){return new Promise(e=>{(0,h.I44)(e,{injector:n})})}(n))),{onViewTransitionCreated:y}=r;return y&&(0,h.SMS)(n,()=>y({transition:g,from:e,to:t})),u})}let Zd=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Yt.E,this.transitionAbortSubject=new Yt.E,this.configLoader=(0,h.uUt)(sC),this.environmentInjector=(0,h.uUt)(h.SIe),this.urlSerializer=(0,h.uUt)(Cc),this.rootContexts=(0,h.uUt)(Nc),this.location=(0,h.uUt)(Ye),this.inputBindingEnabled=null!==(0,h.uUt)(zi,{optional:!0}),this.titleStrategy=(0,h.uUt)(oC),this.options=(0,h.uUt)(ou,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,h.uUt)(Wb),this.createViewTransition=(0,h.uUt)(lC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Qe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new zw(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Ob(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,s){return this.transitions=new Hn.g({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:di,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(er(c=>0!==c.id),(0,yt.k)(c=>({...c,extractedUrl:this.urlHandlingStrategy.extract(c.rawUrl)})),Gn(c=>{this.currentTransition=c;let u=!1,g=!1;return Qe(c).pipe(vr(y=>{this.currentNavigation={id:y.id,initialUrl:y.rawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Gn(y=>{const w=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!w&&"reload"!==(y.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new Fs(y.id,this.urlSerializer.serialize(y.rawUrl),A,tu.IgnoredSameUrlNavigation)),y.resolve(null),Ji}if(this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return Qe(y).pipe(Gn(A=>{const M=this.transitions?.getValue();return this.events.next(new tr(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),M!==this.transitions?.getValue()?Ji:Promise.resolve(A)}),function iu(n,e,t,r,s,c){return zn(u=>function Ix(n,e,t,r,s,c,u="emptyOnly"){return new wx(n,e,t,r,s,u,c).recognize()}(n,e,t,r,u.extractedUrl,s,c).pipe((0,yt.k)(({state:g,tree:y})=>({...u,targetSnapshot:g,urlAfterRedirects:y}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),vr(A=>{c.targetSnapshot=A.targetSnapshot,c.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects};const M=new wa(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(M)}));if(w&&this.urlHandlingStrategy.shouldProcessUrl(y.currentRawUrl)){const{id:A,extractedUrl:M,source:N,restoredState:X,extras:re}=y,de=new tr(A,this.urlSerializer.serialize(M),N,X);this.events.next(de);const we=p(this.rootComponentType).snapshot;return this.currentTransition=c={...y,targetSnapshot:we,urlAfterRedirects:M,extras:{...re,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=M,Qe(c)}{const A="";return this.events.next(new Fs(y.id,this.urlSerializer.serialize(y.extractedUrl),A,tu.IgnoredByUrlHandlingStrategy)),y.resolve(null),Ji}}),vr(y=>{const w=new Pb(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(w)}),(0,yt.k)(y=>(this.currentTransition=c={...y,guards:Qw(y.targetSnapshot,y.currentSnapshot,this.rootContexts)},c)),function dx(n,e){return zn(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:c,canDeactivateChecks:u}}=t;return 0===u.length&&0===c.length?Qe({...t,guardsResult:!0}):function hx(n,e,t,r){return en(n).pipe(zn(s=>function gx(n,e,t,r,s){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?Qe(c.map(g=>{const y=Gd(e)??s,w=ru(g,y);return Zo(function Zw(n){return n&&Tp(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):(0,h.SMS)(y,()=>w(n,e,t,r))).pipe(Ko())})).pipe(qd()):Qe(!0)}(s.component,s.route,t,e,r)),Ko(s=>!0!==s,!0))}(u,r,s,n).pipe(zn(g=>g&&function ux(n){return"boolean"==typeof n}(g)?function fx(n,e,t,r){return en(e).pipe(kd(s=>Eo(function Ta(n,e){return null!==n&&e&&e(new Nb(n)),Qe(!0)}(s.route.parent,r),function px(n,e){return null!==n&&e&&e(new Ca(n)),Qe(!0)}(s.route,r),function mx(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(u=>function m_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>va(()=>Qe(u.guards.map(y=>{const w=Gd(u.node)??t,D=ru(y,w);return Zo(function Vb(n){return n&&Tp(n.canActivateChild)}(D)?D.canActivateChild(r,n):(0,h.SMS)(w,()=>D(r,n))).pipe(Ko())})).pipe(qd())));return Qe(c).pipe(qd())}(n,s.path,t),function Yd(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qe(!0);const s=r.map(c=>va(()=>{const u=Gd(e)??t,g=ru(c,u);return Zo(function __(n){return n&&Tp(n.canActivate)}(g)?g.canActivate(e,n):(0,h.SMS)(u,()=>g(e,n))).pipe(Ko())}));return Qe(s).pipe(qd())}(n,s.route,t))),Ko(s=>!0!==s,!0))}(r,c,n,e):Qe(g)),(0,yt.k)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,y=>this.events.next(y)),vr(y=>{if(c.guardsResult=y.guardsResult,Mc(y.guardsResult))throw Hd(0,y.guardsResult);const w=new So(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.events.next(w)}),er(y=>!!y.guardsResult||(this.cancelNavigationTransition(y,"",jr.GuardRejected),!1)),Gb(y=>{if(y.guards.canActivateChecks.length)return Qe(y).pipe(vr(w=>{const D=new h_(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(D)}),Gn(w=>{let D=!1;return Qe(w).pipe(function Ax(n,e){return zn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return Qe(t);const c=new Set(s.map(y=>y.route)),u=new Set;for(const y of c)if(!u.has(y))for(const w of rC(y))u.add(w);let g=0;return en(u).pipe(kd(y=>c.has(y)?function iC(n,e,t,r){const s=n.routeConfig,c=n._resolve;return void 0!==s?.title&&!Fe(s)&&(c[Do]=s.title),function zb(n,e,t,r){const s=Ms(n);if(0===s.length)return Qe({});const c={};return en(s).pipe(zn(u=>function Sx(n,e,t,r){const s=Gd(e)??r,c=ru(n,s);return Zo(c.resolve?c.resolve(e,t):(0,h.SMS)(s,()=>c(e,t)))}(n[u],e,t,r).pipe(Ko(),vr(g=>{c[u]=g}))),ql(1),function Qg(n){return(0,yt.k)(()=>n)}(c),Co(u=>Bb(u)?Ji:As(u)))}(c,n,e,r).pipe((0,yt.k)(u=>(n._resolvedData=u,n.data=T(n,n.parent,t).resolve,null)))}(y,r,n,e):(y.data=T(y,y.parent,n).resolve,Qe(void 0))),vr(()=>g++),ql(1),zn(y=>g===u.size?Qe(t):Ji))})}(this.paramsInheritanceStrategy,this.environmentInjector),vr({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(w,"",jr.NoDataFromResolver)}}))}),vr(w=>{const D=new kb(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(D)}))}),Gb(y=>{const w=D=>{const A=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(D.routeConfig).pipe(vr(M=>{D.component=M}),(0,yt.k)(()=>{})));for(const M of D.children)A.push(...w(M));return A};return qo(w(y.targetSnapshot.root)).pipe(Yo(null),xi(1))}),Gb(()=>this.afterPreactivation()),Gn(()=>{const{currentSnapshot:y,targetSnapshot:w}=c,D=this.createViewTransition?.(this.environmentInjector,y.root,w.root);return D?en(D).pipe((0,yt.k)(()=>c)):Qe(c)}),(0,yt.k)(y=>{const w=function Wn(n,e,t){const r=Fc(n,e._root,t?t._root:void 0);return new v(r,e)}(t.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return this.currentTransition=c={...y,targetRouterState:w},this.currentNavigation.targetRouterState=w,c}),vr(()=>{this.events.next(new Mi)}),((n,e,t,r)=>(0,yt.k)(s=>(new JP(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,y=>this.events.next(y),this.inputBindingEnabled),xi(1),vr({next:y=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yr(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects))),this.titleStrategy?.updateTitle(y.targetRouterState.snapshot),y.resolve(!0)},complete:()=>{u=!0}}),Qo(this.transitionAbortSubject.pipe(vr(y=>{throw y}))),Yl(()=>{!u&&!g&&this.cancelNavigationTransition(c,"",jr.SupersededByNewNavigation),this.currentNavigation?.id===c.id&&(this.currentNavigation=null)}),Co(y=>{if(g=!0,Dp(y))this.events.next(new ns(c.id,this.urlSerializer.serialize(c.extractedUrl),y.message,y.cancellationCode)),function f_(n){return Dp(n)&&Mc(n.url)}(y)?this.events.next(new xo(y.url)):c.resolve(!1);else{this.events.next(new rs(c.id,this.urlSerializer.serialize(c.extractedUrl),y,c.targetSnapshot??void 0));try{c.resolve(t.errorHandler(y))}catch(w){this.options.resolveNavigationPromiseOnError?c.resolve(!1):c.reject(w)}}return Ji}))}))}cancelNavigationTransition(t,r,s){const c=new ns(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(c),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kx(n){return n!==di}let Ox=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:()=>(0,h.uUt)(dC),providedIn:"root"})}return n})();class Nx{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let dC=(()=>{class n extends Nx{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=h.otF(n)))(s||n)}})();static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hC=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:()=>(0,h.uUt)(Fx),providedIn:"root"})}return n})(),Fx=(()=>{class n extends hC{constructor(){super(...arguments),this.location=(0,h.uUt)(Ye),this.urlSerializer=(0,h.uUt)(Cc),this.options=(0,h.uUt)(ou,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,h.uUt)(Wb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Jo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=p(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof tr)this.stateMemento=this.createStateMemento();else if(t instanceof Fs)this.rawUrlTree=r.initialUrl;else if(t instanceof wa){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else t instanceof Mi?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof ns&&(t.code===jr.GuardRejected||t.code===jr.NoDataFromResolver)?this.restoreHistory(r):t instanceof rs?this.restoreHistory(r,!0):t instanceof yr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",u)}else{const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",c)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-this.browserPageId;0!==c?this.location.historyGo(c):this.currentUrlTree===t.finalUrl&&0===c&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=h.otF(n)))(s||n)}})();static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kr=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(kr||{});function I_(n,e){n.events.pipe(er(t=>t instanceof yr||t instanceof ns||t instanceof rs||t instanceof Fs),(0,yt.k)(t=>t instanceof yr||t instanceof Fs?kr.COMPLETE:t instanceof ns&&(t.code===jr.Redirect||t.code===jr.SupersededByNewNavigation)?kr.REDIRECTING:kr.FAILED),er(t=>t!==kr.REDIRECTING),xi(1)).subscribe(()=>{e()})}function fC(n){throw n}const qb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $r=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,h.uUt)(h.oPY),this.stateManager=(0,h.uUt)(hC),this.options=(0,h.uUt)(ou,{optional:!0})||{},this.pendingTasks=(0,h.uUt)(h.g9Y),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,h.uUt)(Zd),this.urlSerializer=(0,h.uUt)(Cc),this.location=(0,h.uUt)(Ye),this.urlHandlingStrategy=(0,h.uUt)(Wb),this._events=new Yt.E,this.errorHandler=this.options.errorHandler||fC,this.navigated=!1,this.routeReuseStrategy=(0,h.uUt)(Ox),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,h.uUt)(xp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,h.uUt)(zi,{optional:!0}),this.eventsSubscription=new Ss.wH,this.isNgZoneEnabled=(0,h.uUt)(h.WW2)instanceof h.WW2&&h.WW2.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const s=this.navigationTransitions.currentTransition,c=this.navigationTransitions.currentNavigation;if(null!==s&&null!==c)if(this.stateManager.handleRouterEvent(r,c),r instanceof ns&&r.code!==jr.Redirect&&r.code!==jr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof yr)this.navigated=!0;else if(r instanceof xo){const u=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),g={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kx(s.source)};this.scheduleNavigation(u,di,null,g,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function mC(n){return!(n instanceof Mi||n instanceof xo)})(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),di,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,s){const c={replaceUrl:!0},u=s?.navigationId?s:null;if(s){const y={...s};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(c.state=y)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,u,c)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Fb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:s,queryParams:c,fragment:u,queryParamsHandling:g,preserveFragment:y}=r,w=y?this.currentUrlTree.fragment:u;let A,D=null;switch(g){case"merge":D={...this.currentUrlTree.queryParams,...c};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=c||null}null!==D&&(D=this.removeEmptyProps(D));try{A=o_(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),A=this.currentUrlTree.root}return s_(A,t,D,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Mc(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(c,di,null,r)}navigate(t,r={skipLocationChange:!1}){return function pC(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.OBp(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let s;if(s=!0===r?{...qb}:!1===r?{...fi}:r,Mc(t))return e_(this.currentUrlTree,t,s);const c=this.parseUrl(t);return e_(this.currentUrlTree,c,s)}removeEmptyProps(t){return Object.entries(t).reduce((r,[s,c])=>(null!=c&&(r[s]=c),r),{})}scheduleNavigation(t,r,s,c,u){if(this.disposed)return Promise.resolve(!1);let g,y,w;u?(g=u.resolve,y=u.reject,w=u.promise):w=new Promise((A,M)=>{g=A,y=M});const D=this.pendingTasks.add();return I_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:c,resolve:g,reject:y,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(A=>Promise.reject(A))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mp=(()=>{class n{constructor(t,r,s,c,u,g){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=c,this.el=u,this.locationStrategy=g,this.href=null,this.commands=null,this.onChanges=new Yt.E,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const y=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===y||"area"===y,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof yr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,c,u){const g=this.urlTree;return!!(null===g||this.isAnchorElement&&(0!==t||r||s||c||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(g,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:(0,h.YFg)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const s=this.renderer,c=this.el.nativeElement;null!==r?s.setAttribute(c,t,r):s.removeAttribute(c,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1($r),h.GI1(I),h.gJ8("tabindex"),h.GI1(h.q87),h.GI1(h.GMv),h.GI1(Te))};static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){1&r&&h.qCj("click",function(u){return s.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&r&&h.e48("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[h.Wk5.HasDecoratorInputTransform,"preserveFragment","preserveFragment",h.cZD],skipLocationChange:[h.Wk5.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",h.cZD],replaceUrl:[h.Wk5.HasDecoratorInputTransform,"replaceUrl","replaceUrl",h.cZD],routerLink:"routerLink"},standalone:!0,features:[h.QJr,h.SYr]})}return n})();class Yb{}let Bx=(()=>{class n{constructor(t,r,s,c,u){this.router=t,this.injector=s,this.preloadingStrategy=c,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(er(t=>t instanceof yr),kd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const c of r){c.providers&&!c._injector&&(c._injector=(0,h.SIz)(c.providers,t,`Route: ${c.path}`));const u=c._injector??t,g=c._loadedInjector??u;(c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent)&&s.push(this.preloadConfig(u,c)),(c.children||c._loadedRoutes)&&s.push(this.processRoutes(g,c.children??c._loadedRoutes))}return en(s).pipe(Io())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Qe(null);const c=s.pipe(zn(u=>null===u?Qe(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));return r.loadComponent&&!r._loadedComponent?en([c,this.loader.loadComponent(r)]).pipe(Io()):c})}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB($r),h.CoB(h.ESV),h.CoB(h.SIe),h.CoB(Yb),h.CoB(sC))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Kb=new h.UbH("");let _C=(()=>{class n{constructor(t,r,s,c,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=c,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration||="disabled",u.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof tr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof yr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Fs&&t.code===tu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Oc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Oc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){h.KEo()};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})();function Aa(n,e){return{\u0275kind:n,\u0275providers:e}}function Ux(){const n=(0,h.uUt)(h.zZn);return e=>{const t=n.get(h.Swk);if(e!==t.components[0])return;const r=n.get($r),s=n.get(jx);1===n.get(yC)&&r.initialNavigation(),n.get(C_,null,h._6O.Optional)?.setUpPreloading(),n.get(Kb,null,h._6O.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const jx=new h.UbH("",{factory:()=>new Yt.E}),yC=new h.UbH("",{providedIn:"root",factory:()=>1}),C_=new h.UbH("");function bC(n){return Aa(0,[{provide:C_,useExisting:Bx},{provide:Yb,useExisting:n}])}function Xd(n){return Aa(9,[{provide:lC,useValue:Mx},{provide:uC,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const Sa=new h.UbH("ROUTER_FORROOT_GUARD"),EC=[Ye,{provide:Cc,useClass:es},$r,Nc,{provide:I,useFactory:function E_(n){return n.routerState.root},deps:[$r]},sC,[]];let zx=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[EC,[],{provide:xp,multi:!0,useValue:t},{provide:Sa,useFactory:wC,deps:[[$r,new h.T7N,new h.Qfh]]},{provide:ou,useValue:r||{}},r?.useHash?{provide:Te,useClass:ze}:{provide:Te,useClass:wt},{provide:Kb,useFactory:()=>{const n=(0,h.uUt)(Sf),e=(0,h.uUt)(h.WW2),t=(0,h.uUt)(ou),r=(0,h.uUt)(Zd),s=(0,h.uUt)(Cc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new _C(s,r,n,e,t)}},r?.preloadingStrategy?bC(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?CC(r):[],r?.bindToComponentInputs?Aa(8,[Vs,{provide:zi,useExisting:Vs}]).\u0275providers:[],r?.enableViewTransitions?Xd().\u0275providers:[],[{provide:Wx,useFactory:Ux},{provide:h.qid,multi:!0,useExisting:Wx}]]}}static forChild(t){return{ngModule:n,providers:[{provide:xp,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(Sa,8))};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({})}return n})();function wC(n){return"guarded"}function CC(n){return["disabled"===n.initialNavigation?Aa(3,[{provide:h.kZF,multi:!0,useFactory:()=>{const e=(0,h.uUt)($r);return()=>{e.setUpLocationChangeListener()}}},{provide:yC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Aa(2,[{provide:yC,useValue:0},{provide:h.kZF,multi:!0,deps:[h.zZn],useFactory:e=>{const t=e.get(Ue,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get($r),c=e.get(jx);I_(s,()=>{r(!0)}),e.get(Zd).afterPreactivation=()=>(r(!0),c.closed?Qe(void 0):c),s.initialNavigation()}))}}]).\u0275providers:[]]}const Wx=new h.UbH("");function Xb(n,e){1&n&&(h.I0R(0,"div")(1,"article")(2,"section",5)(3,"h2"),h.OEk(4,"Benvenuto su SpotiRFI! \u{1f684}\u{1f3b5}"),h.C$Y(),h.I0R(5,"p"),h.OEk(6," SpotiRFI \xe8 un viaggio unico attraverso la musica e le linee ferroviarie della Sicilia. Ogni stazione ferroviaria sulla mappa \xe8 associata a una canzone che porta il suo nome"),h.I0R(7,"span",6),h.OEk(8," * "),h.C$Y(),h.OEk(9,", creando un'esperienza musicale che riflette il viaggio attraverso la nostra bellissima regione. "),h.C$Y(),h.I0R(10,"a",7)(11,"span",8),h.OEk(12," open_in_new "),h.C$Y()()(),h.I0R(13,"section"),h.wR5(14,"img",9),h.C$Y()()())}function T_(n,e){1&n&&(h.I0R(0,"div")(1,"article")(2,"section"),h.wR5(3,"img",10),h.C$Y(),h.I0R(4,"section",5)(5,"h2"),h.OEk(6,"Come funziona? \u{1f9d0}"),h.C$Y(),h.I0R(7,"p"),h.OEk(8," Scegli una linea ferroviaria sulla mappa e inizia il tuo viaggio musicale. Ad ogni fermata, ti verr\xe0 presentata una canzone che porta il nome della stazione. Puoi ascoltare la canzone mentre leggi informazioni sulla stazione e sulla sua storia. "),h.C$Y(),h.I0R(9,"a",11)(10,"span",8),h.OEk(11," open_in_new "),h.C$Y()()()()())}function Yx(n,e){1&n&&(h.I0R(0,"div")(1,"article")(2,"section",5)(3,"h2"),h.OEk(4,"Perch\xe9 SpotiRFI? \u{1f914}"),h.C$Y(),h.I0R(5,"p",12),h.OEk(6," La musica e i viaggi sono due esperienze che possono portarci in luoghi che non abbiamo mai visitato. SpotiRFI combina queste due esperienze in un unico viaggio, permettendoti di esplorare la Sicilia attraverso le sue linee ferroviarie e la sua musica. "),h.C$Y(),h.I0R(7,"a",13)(8,"span",8),h.OEk(9," open_in_new "),h.C$Y()()(),h.I0R(10,"section"),h.wR5(11,"img",14),h.C$Y()()())}let AC=(()=>{class n{constructor(){this.activeTab="benvenuto",this.title="app"}ngAfterViewInit(){$(function(){$('[data-toggle="popover"]').popover()})}openLink(t){window.open(t,"_blank")}setActiveTab(t){this.activeTab=t}isActiveTab(t){return this.activeTab===t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-home"]],decls:12,vars:9,consts:[["id","picture"],[1,"tabs"],[3,"click"],[1,"tab-content"],[4,"ngIf"],[1,"text"],["id","popover","data-bs-container","body","data-toggle","popover","data-bs-placement","bottom","data-bs-content","Non sono attualmente previsti i posti di movimento, solo STAZIONI e FERMATE. Non sono considerate le linee dismesse. Sono considerate le linee non attive IN FASE DI RIPRISTINO",1,"btn"],["href","https://normativaesercizio.rfi.it/NormativaEsercizio/detail.xhtml?doctype=FCL&compartimento=PA","target","_blank",1,"btn","btn-about"],[1,"material-symbols-outlined"],["src","assets/lineesiciliane.png","alt","Mappa linee ferroviarie siciliane di RFI"],["src","https://www.palermomania.it/public/news/image/images/metro.jpg","alt","Cartello passante ferroviario di Palermo"],["href","https://www.palermomania.it/","target","_blank",1,"btn","btn-about"],[1,"mb-4"],["href","https://www.stagniweb.it/foto6.asp?File=orizzf&Inizio=68&Righe=10&InizioI=1&RigheI=150&Col=5&Titolo=0","target","_blank",1,"btn","btn-about"],["src","https://www.stagniweb.it/altro/orizzf/636gioi0.jpg","alt","Locomotiva E636.010 in transito a Gioiosa Marea(ME)"]],template:function(r,s){1&r&&(h.wR5(0,"div",0),h.I0R(1,"ul",1)(2,"li",2),h.qCj("click",function(){return s.setActiveTab("benvenuto")}),h.OEk(3," Benvenuto "),h.C$Y(),h.I0R(4,"li",2),h.qCj("click",function(){return s.setActiveTab("comeFunziona")}),h.OEk(5," Come funziona? "),h.C$Y(),h.I0R(6,"li",2),h.qCj("click",function(){return s.setActiveTab("percheSpotiRFI")}),h.OEk(7," Perch\xe9 SpotiRFI? "),h.C$Y()(),h.I0R(8,"div",3),h.yuY(9,Xb,15,0,"div",4)(10,T_,12,0,"div",4)(11,Yx,12,0,"div",4),h.C$Y()),2&r&&(h.yG2(2),h.eAK("active",s.isActiveTab("benvenuto")),h.yG2(2),h.eAK("active",s.isActiveTab("comeFunziona")),h.yG2(2),h.eAK("active",s.isActiveTab("percheSpotiRFI")),h.yG2(3),h.E7m("ngIf",s.isActiveTab("benvenuto")),h.yG2(),h.E7m("ngIf",s.isActiveTab("comeFunziona")),h.yG2(),h.E7m("ngIf",s.isActiveTab("percheSpotiRFI")))},dependencies:[Rr],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";ul[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:row;list-style-type:none;font-size:16px;font-family:Merienda,cursive;font-weight:600;padding-inline-start:0}li[_ngcontent-%COMP%]{padding:.7em 2em;cursor:pointer}li.active[_ngcontent-%COMP%]{border-bottom:.1em #d62a42 solid;color:#d62a42}li[_ngcontent-%COMP%]:hover{background-color:#d62a420a}#popover[_ngcontent-%COMP%]{background-color:transparent;border:none;color:inherit;padding:0 0 0 5px}article[_ngcontent-%COMP%]{font-family:Merienda,cursive;font-size:16px;font-weight:500;width:90%;margin:2em auto 1em;display:flex;flex-flow:row wrap}h2[_ngcontent-%COMP%]{font-family:Merienda,cursive;font-size:20px;font-weight:600}section[_ngcontent-%COMP%]{width:50%;text-align:justify}.text[_ngcontent-%COMP%]{padding:1em}section[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%}#picture[_ngcontent-%COMP%]{background-image:url(464Torrenova-min.58a22e042c69a55e.JPG);width:100%;height:82%;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}@media screen and (min-width: 768px) and (max-width: 1024px){article[_ngcontent-%COMP%]{width:95%}}@media screen and (min-width: 281px) and (max-width: 767px){article[_ngcontent-%COMP%]{width:95%;flex-flow:column wrap}section[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 280px){article[_ngcontent-%COMP%]{width:97%;flex-flow:column wrap}section[_ngcontent-%COMP%]{width:100%}ul[_ngcontent-%COMP%]{overflow:scroll}}']})}return n})();var su=ee(360);(0,su.registerVersion)("firebase","10.8.0","app");class Zx extends Ss.wH{constructor(e,t){super()}schedule(e,t=0){return this}}const kp={setInterval(n,e,...t){const{delegate:r}=kp;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=kp;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Op=ee(248);class au extends Zx{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,c=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(c,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(c,this.id,t),this}requestAsyncId(e,t,r=0){return kp.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&kp.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(c){r=!0,s=c||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Op.k)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const eI={now:()=>(eI.delegate||Date).now(),delegate:void 0};class Np{constructor(e,t=Np.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Np.now=eI.now;class Jd extends Np{constructor(e,t=Np.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const cu=new class SC extends Jd{}(class Jb extends au{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),eh=new Jd(au),Jx=eh,xC=new h.a8Z("ANGULARFIRE2_VERSION");class nI{constructor(){return((n,e)=>{const t=(0,su.getApps)(),r=[];return t.forEach(s=>{s.container.getProvider(n).instances.forEach(u=>{r.includes(u)||r.push(u)})}),r})(MC)}}const MC="app-check";function Bc(){}class rI{zone;delegate;constructor(e,t=cu){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const s=this.zone;return this.delegate.schedule(function(u){s.runGuarded(()=>{e.apply(this,[u])})},t,r)}}class A_{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bc,{},Bc,Bc)),t.pipe(vr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let th=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new rI(Zone.current)),this.insideAngular=t.run(()=>new rI(Zone.current,eh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(h.CoB(h.WW2))};static \u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pi(n){return function tR(n){return function(t){return(t=t.lift(new A_(n.ngZone))).pipe(Wo(n.outsideAngular),Zi(n.insideAngular))}}(function lu(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Uc=ee(368);Uc.c.registerVersion("firebase","10.8.0","app-compat");const NC=["ngOnDestroy"];class oI{constructor(e){return e}}const xa=new h.UbH("angularfire2.app.options"),Fp=new h.UbH("angularfire2.app.name");function S_(n,e,t){const s="object"==typeof t&&t||{};s.name=s.name||"string"==typeof t&&t||"[DEFAULT]";const u=Uc.c.apps.filter(g=>g&&g.name===s.name)[0]||e.runOutsideAngular(()=>Uc.c.initializeApp(n,s));try{if(JSON.stringify(n)!==JSON.stringify(u.options)){const g=!!module.hot;rR("error",`${u.name} Firebase App already initialized with different options${g?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new oI(u)}const rR=(n,...e)=>{(0,h.sPQ)()&&typeof console<"u"&&console[n](...e)},x_={provide:oI,useFactory:S_,deps:[xa,h.WW2,[new h.T7N,Fp]]};let nh=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:xa,useValue:t},{provide:Fp,useValue:r}]}}constructor(t){Uc.c.registerVersion("angularfire",xC.full,"core"),Uc.c.registerVersion("angularfire",xC.full,"app-compat"),Uc.c.registerVersion("angular",h.j1C.full,t.toString())}static \u0275fac=function(r){return new(r||n)(h.CoB(h.AHE))};static \u0275mod=h.a4G({type:n});static \u0275inj=h.s3X({providers:[x_]})}return n})();function R_(n,e,t,r,s){const[,c,u]=globalThis.\u0275AngularfireInstanceCache.find(g=>g[0]===n)||[];if(c)return function Lp(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(s,u)||(M_("error",`${e} was already initialized on the ${t} Firebase App with different settings.${LC?" You may need to reload as Firebase is not HMR aware.":""}`),M_("warn",{is:s,was:u})),c;{const g=r();return globalThis.\u0275AngularfireInstanceCache.push([n,g,s]),g}}const LC=typeof module<"u"&&!!module.hot,M_=(n,...e)=>{(0,h.sPQ)()&&typeof console<"u"&&console[n](...e)};function Vp(...n){const e=vc(n),t=function Ts(n,e){return"number"==typeof _a(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Ur(r[0]):Io(t)(en(r,e)):Ji}globalThis.\u0275AngularfireInstanceCache||=[],ee(864);class BC extends Yt.E{constructor(e=1/0,t=1/0,r=eI){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:c,_windowTime:u}=this;t||(r.push(e),!s&&r.push(c.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,c=s.slice();for(let u=0;u<c.length&&!e.closed;u+=r?1:2)e.next(c[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,c=(s?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!s){const u=t.now();let g=0;for(let y=1;y<r.length&&r[y]<=u;y+=2)g=y;g&&r.splice(0,g+1)}}}var P_=ee(760);function sI(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new P_.ot({next:()=>{r.unsubscribe(),n()}});return Ur(e(...t)).subscribe(r)}function UC(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,function iR(n={}){const{connector:e=(()=>new Yt.E),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:s=!0}=n;return c=>{let u,g,y,w=0,D=!1,A=!1;const M=()=>{g?.unsubscribe(),g=void 0},N=()=>{M(),u=y=void 0,D=A=!1},X=()=>{const re=u;N(),re?.unsubscribe()};return(0,$n.i)((re,de)=>{w++,!A&&!D&&M();const we=y=y??e();de.add(()=>{w--,0===w&&!A&&!D&&(g=sI(X,s))}),we.subscribe(de),!u&&w>0&&(u=new P_.ot({next:He=>we.next(He),error:He=>{A=!0,M(),g=sI(N,t,He),we.error(He)},complete:()=>{D=!0,M(),g=sI(N,r),we.complete()}}),Ur(re).subscribe(u))})(c)}}({connector:()=>new BC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function aI(n,e){return(0,yn.m)(e)?Gn(()=>n,e):Gn(()=>n)}const jC=new h.UbH("angularfire2.auth.use-emulator"),$C=new h.UbH("angularfire2.auth.settings"),HC=new h.UbH("angularfire2.auth.tenant-id"),cI=new h.UbH("angularfire2.auth.langugage-code"),lI=new h.UbH("angularfire2.auth.use-device-language"),zC=new h.UbH("angularfire.auth.persistence"),GC=(n,e,t,r,s,c,u,g)=>R_(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=s,c&&y.useDeviceLanguage(),u)for(const[w,D]of Object.entries(u))y.settings[w]=D;return g&&y.setPersistence(g),y},[t,r,s,c,u,g]);let Pi=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,s,c,u,g,y,w,D,A,M,N){const X=new Yt.E,re=Qe(void 0).pipe(Zi(u.outsideAngular),Gn(()=>c.runOutsideAngular(()=>Promise.resolve().then(ee.bind(ee,864)))),(0,yt.k)(()=>S_(t,c,r)),(0,yt.k)(de=>GC(de,c,g,w,D,A,y,M)),UC({bufferSize:1,refCount:!1}));if(Yi(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Qe(null);else{re.pipe(Ko()).subscribe();const de=re.pipe(Gn(De=>De.getRedirectResult().then(We=>We,()=>null)),pi,UC({bufferSize:1,refCount:!1})),we=re.pipe(Gn(De=>new jn._(We=>({unsubscribe:c.runOutsideAngular(()=>De.onAuthStateChanged(_t=>We.next(_t),_t=>We.error(_t),()=>We.complete()))})))),He=re.pipe(Gn(De=>new jn._(We=>({unsubscribe:c.runOutsideAngular(()=>De.onIdTokenChanged(_t=>We.next(_t),_t=>We.error(_t),()=>We.complete()))}))));this.authState=de.pipe(aI(we),Wo(u.outsideAngular),Zi(u.insideAngular)),this.user=de.pipe(aI(He),Wo(u.outsideAngular),Zi(u.insideAngular)),this.idToken=this.user.pipe(Gn(De=>De?en(De.getIdToken()):Qe(null))),this.idTokenResult=this.user.pipe(Gn(De=>De?en(De.getIdTokenResult()):Qe(null))),this.credential=Vp(de,X,this.authState.pipe(er(De=>!De))).pipe((0,yt.k)(De=>De?.user?De:null),Wo(u.outsideAngular),Zi(u.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(s,c)=>t.runOutsideAngular(()=>{if(n[c])return r?.spy?.get&&r.spy.get(c,n[c]),n[c];if(NC.indexOf(c)>-1)return()=>{};const u=e.toPromise().then(g=>{const y=g?.[c];return"function"==typeof y?y.bind(g):y?.then?y.then(w=>t.run(()=>w)):t.run(()=>y)});return new Proxy(()=>{},{get:(g,y)=>u[y],apply:(g,y,w)=>u.then(D=>{const A=D?.(...w);return r?.spy?.apply&&r.spy.apply(c,w,A),A})})})}))(this,re,c,{spy:{apply:(de,we,He)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&He.then(De=>X.next(De))}}})}static \u0275fac=function(r){return new(r||n)(h.CoB(xa),h.CoB(Fp,8),h.CoB(h.AHE),h.CoB(h.WW2),h.CoB(th),h.CoB(jC,8),h.CoB($C,8),h.CoB(HC,8),h.CoB(cI,8),h.CoB(lI,8),h.CoB(zC,8),h.CoB(nI,8))};static \u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function uI(){return(0,$n.i)((n,e)=>{let t,r=!1;n.subscribe((0,Pn.e)(e,s=>{const c=t;t=s,r&&e.next([c,s]),r=!0}))})}function sR(n,e=Si.Z){return n=n??dI,(0,$n.i)((t,r)=>{let s,c=!0;t.subscribe((0,Pn.e)(r,u=>{const g=e(u);(c||!n(s,g))&&(c=!1,s=g,r.next(u))}))})}function dI(n,e){return n===e}var Oe,he=ee(908),WC=ee(920),$s=ee(976),tn=ee(144),qC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},as={},Bp=Bp||{},bt=qC||self;function k_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Up(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hI="closure_uid_"+(1e9*Math.random()>>>0),Hs=0;function fI(n,e,t){return n.call.apply(n.bind,arguments)}function cR(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function mi(n,e,t){return(mi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fI:cR).apply(null,arguments)}function jp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function br(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,c){for(var u=Array(arguments.length-2),g=2;g<arguments.length;g++)u[g-2]=arguments[g];return e.prototype[s].apply(r,u)}}function cs(){this.s=this.s,this.o=this.o}cs.prototype.s=!1,cs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function aR(n){Object.prototype.hasOwnProperty.call(n,hI)&&n[hI]||(n[hI]=++Hs)}(this)},cs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lR=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function O_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function mI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(k_(r)){const s=n.length||0,c=r.length||0;n.length=s+c;for(let u=0;u<c;u++)n[s+u]=r[u]}else n.push(r)}}function Hr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hr.prototype.h=function(){this.defaultPrevented=!0};var N_=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};bt.addEventListener("test",t,e),bt.removeEventListener("test",t,e)}catch{}return n}();function uu(n){return/^[\s\xa0]*$/.test(n)}function Mo(){var n=bt.navigator;return n&&(n=n.userAgent)?n:""}function zs(n){return-1!=Mo().indexOf(n)}function gI(n){return gI[" "](n),n}gI[" "]=function(){};var F_,n,uR=zs("Opera"),Gs=zs("Trident")||zs("MSIE"),vI=zs("Edge"),jc=vI||Gs,rh=zs("Gecko")&&!(-1!=Mo().toLowerCase().indexOf("webkit")&&!zs("Edge"))&&!(zs("Trident")||zs("MSIE"))&&!zs("Edge"),yI=-1!=Mo().toLowerCase().indexOf("webkit")&&!zs("Edge");function ih(){var n=bt.document;return n?n.documentMode:void 0}e:{var L_="",bI=(n=Mo(),rh?/rv:([^\);]+)(\)|;)/.exec(n):vI?/Edge\/([\d\.]+)/.exec(n):Gs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yI?/WebKit\/(\S+)/.exec(n):uR?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bI&&(L_=bI?bI[1]:""),Gs){var II=ih();if(null!=II&&II>parseFloat(L_)){F_=String(II);break e}}F_=L_}var dR=bt.document&&Gs&&(ih()||parseInt(F_,10))||void 0;function $p(n,e){if(Hr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rh){e:{try{gI(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:KC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$p.$.h.call(this)}}br($p,Hr);var KC={2:"touch",3:"pen",4:"mouse"};$p.prototype.h=function(){$p.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var oh="closure_listenable_"+(1e6*Math.random()|0),QC=0;function ZC(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++QC,this.fa=this.ia=!1}function du(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function wI(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function XC(n){const e={};for(const t in n)e[t]=n[t];return e}const JC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CI(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let c=0;c<JC.length;c++)t=JC[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function V_(n){this.src=n,this.g={},this.h=0}function DI(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],s=lR(r,e);(c=0<=s)&&Array.prototype.splice.call(r,s,1),c&&(du(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function B_(n,e,t,r){for(var s=0;s<n.length;++s){var c=n[s];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==r)return s}return-1}V_.prototype.add=function(n,e,t,r,s){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var u=B_(n,e,r,s);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new ZC(e,this.src,c,!!r,s)).ia=t,n.push(e)),e};var Hp="closure_lm_"+(1e6*Math.random()|0),U_={};function sh(n,e,t,r,s){if(r&&r.once)return eD(n,e,t,r,s);if(Array.isArray(e)){for(var c=0;c<e.length;c++)sh(n,e[c],t,r,s);return null}return t=rD(t),n&&n[oh]?n.O(e,t,Up(r)?!!r.capture:!!r,s):ah(n,e,t,!1,r,s)}function ah(n,e,t,r,s,c){if(!e)throw Error("Invalid event type");var u=Up(s)?!!s.capture:!!s,g=SI(n);if(g||(n[Hp]=g=new V_(n)),(t=g.add(e,t,r,u,c)).proxy)return t;if(r=function zp(){const e=AI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)N_||(s=u),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Gp(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function eD(n,e,t,r,s){if(Array.isArray(e)){for(var c=0;c<e.length;c++)eD(n,e[c],t,r,s);return null}return t=rD(t),n&&n[oh]?n.P(e,t,Up(r)?!!r.capture:!!r,s):ah(n,e,t,!0,r,s)}function tD(n,e,t,r,s){if(Array.isArray(e))for(var c=0;c<e.length;c++)tD(n,e[c],t,r,s);else r=Up(r)?!!r.capture:!!r,t=rD(t),n&&n[oh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=B_(c=n.g[e],t,r,s))&&(du(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=SI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=B_(e,t,r,s)),(t=-1<n?e[n]:null)&&TI(t))}function TI(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[oh])DI(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Gp(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=SI(e))?(DI(t,n),0==t.h&&(t.src=null,e[Hp]=null)):du(n)}}}function Gp(n){return n in U_?U_[n]:U_[n]="on"+n}function AI(n,e){if(n.fa)n=!0;else{e=new $p(e,this);var t=n.listener,r=n.la||n.src;n.ia&&TI(n),n=t.call(r,e)}return n}function SI(n){return(n=n[Hp])instanceof V_?n:null}var nD="__closure_events_fn_"+(1e9*Math.random()>>>0);function rD(n){return"function"==typeof n?n:(n[nD]||(n[nD]=function(e){return n.handleEvent(e)}),n[nD])}function Or(){cs.call(this),this.i=new V_(this),this.S=this,this.J=null}function zr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Hr(e,n);else if(e instanceof Hr)e.target=e.target||n;else{var s=e;CI(e=new Hr(r,n),s)}if(s=!0,t)for(var c=t.length-1;0<=c;c--){var u=e.g=t[c];s=xI(u,r,!0,e)&&s}if(s=xI(u=e.g=n,r,!0,e)&&s,s=xI(u,r,!1,e)&&s,t)for(c=0;c<t.length;c++)s=xI(u=e.g=t[c],r,!1,e)&&s}function xI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,c=0;c<e.length;++c){var u=e[c];if(u&&!u.fa&&u.capture==t){var g=u.listener,y=u.la||u.src;u.ia&&DI(n.i,u),s=!1!==g.call(y,r)&&s}}return s&&!r.defaultPrevented}br(Or,cs),Or.prototype[oh]=!0,Or.prototype.removeEventListener=function(n,e,t,r){tD(this,n,e,t,r)},Or.prototype.N=function(){if(Or.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)du(t[r]);delete n.g[e],n.h--}}this.J=null},Or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Or.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var RI=bt.JSON.stringify;function hR(){var n=hu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var iD=new class yk{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new MI,n=>n.reset());class MI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Wp(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function PI(n){bt.setTimeout(()=>{throw n},0)}let $c,ch=!1,hu=new class fR{constructor(){this.h=this.g=null}add(e,t){const r=iD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},kI=()=>{const n=bt.Promise.resolve(void 0);$c=()=>{n.then(pR)}};var pR=()=>{for(var n;n=hR();){try{n.h.call(n.g)}catch(t){PI(t)}var e=iD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ch=!1};function Hc(n,e){Or.call(this),this.h=n||1,this.g=e||bt,this.j=mi(this.qb,this),this.l=Date.now()}function j_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function OI(n,e,t){if("function"==typeof n)t&&(n=mi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mi(n.handleEvent,n)}return 2147483647<Number(e)?-1:bt.setTimeout(n,e||0)}function NI(n){n.g=OI(()=>{n.g=null,n.i&&(n.i=!1,NI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}br(Hc,Or),(Oe=Hc.prototype).ga=!1,Oe.T=null,Oe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zr(this,"tick"),this.ga&&(j_(this),this.start()))}},Oe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oe.N=function(){Hc.$.N.call(this),j_(this),delete this.g};class $_ extends cs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:NI(this)}N(){super.N(),this.g&&(bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qp(n){cs.call(this),this.h=n,this.g={}}br(qp,cs);var oD=[];function sD(n,e,t,r){Array.isArray(t)||(t&&(oD[0]=t.toString()),t=oD);for(var s=0;s<t.length;s++){var c=sh(e,t[s],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function aD(n){wI(n.g,function(e,t){this.g.hasOwnProperty(t)&&TI(e)},n),n.g={}}function H_(){this.g=!0}function Ra(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function bk(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var c=s[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var u=1;u<s.length;u++)s[u]=""}}}return RI(t)}catch{return e}}(n,t)+(r?" "+r:"")})}qp.prototype.N=function(){qp.$.N.call(this),aD(this)},qp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},H_.prototype.Ea=function(){this.g=!1},H_.prototype.info=function(){};var fu={},cD=null;function lh(){return cD=cD||new Or}function lD(n){Hr.call(this,fu.Ta,n)}function uh(n){const e=lh();zr(e,new lD(e))}function uD(n,e){Hr.call(this,fu.STAT_EVENT,n),this.stat=e}function ki(n){const e=lh();zr(e,new uD(e,n))}function LI(n,e){Hr.call(this,fu.Ua,n),this.size=e}function Kp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return bt.setTimeout(function(){n()},e)}fu.Ta="serverreachability",br(lD,Hr),fu.STAT_EVENT="statevent",br(uD,Hr),fu.Ua="timingevent",br(LI,Hr);var G_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},pu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qp(){}function VI(){}Qp.prototype.h=null;var BI,Zp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function W_(){Hr.call(this,"d")}function hD(){Hr.call(this,"c")}function zc(){}function dh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new qp(this),this.P=mR,this.V=new Hc(n=jc?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fD}function fD(){this.i=null,this.g="",this.h=!1}br(W_,Hr),br(hD,Hr),br(zc,Qp),zc.prototype.g=function(){return new XMLHttpRequest},zc.prototype.i=function(){return{}},BI=new zc;var mR=45e3,pD={},Xp={};function q_(n,e,t){n.L=1,n.A=Q_(Ma(e)),n.u=t,n.S=!0,gR(n,null)}function gR(n,e){n.G=Date.now(),Jp(n),n.B=Ma(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),DR(t.i,"t",r),n.o=0,t=n.l.J,n.h=new fD,n.g=kD(n.l,t?e:null,!n.u),0<n.O&&(n.M=new $_(mi(n.Pa,n,n.g),n.O)),sD(n.U,n.g,"readystatechange",n.nb),e=n.I?XC(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),uh(),function FI(n,e,t,r,s,c){n.info(function(){if(n.g)if(c)for(var u="",g=c.split("&"),y=0;y<g.length;y++){var w=g[y].split("=");if(1<w.length){var D=w[0];w=w[1];var A=D.split("_");u=2<=A.length&&"type"==A[1]?u+(D+"=")+w+"&":u+(D+"=redacted&")}}else u=null;else u=c;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.v,n.B,n.m,n.W,n.u)}function _R(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function vR(n,e,t){let s,r=!0;for(;!n.J&&n.o<t.length;){if(s=yR(n,t),s==Xp){4==e&&(n.s=4,ki(14),r=!1),Ra(n.j,n.m,null,"[Incomplete Response]");break}if(s==pD){n.s=4,ki(15),Ra(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ra(n.j,n.m,s,null),jI(n,s)}_R(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),bu(e),e.M=!0,ki(11))):(Ra(n.j,n.m,t,"[Invalid Chunked Response]"),Ws(n),K_(n))}function yR(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?Xp:(t=Number(e.substring(t,r)),isNaN(t)?pD:(r+=1)+t>e.length?Xp:(e=e.slice(r,r+t),n.o=r+t,e))}function Jp(n){n.Y=Date.now()+n.P,UI(n,n.P)}function UI(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=Kp(mi(n.lb,n),e)}function Y_(n){n.C&&(bt.clearTimeout(n.C),n.C=null)}function K_(n){0==n.l.H||n.J||xD(n.l,n)}function Ws(n){Y_(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,j_(n.V),aD(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function jI(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||qI(t.i,n)))if(!n.K&&qI(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;tv(t),sm(t)}t0(t),ki(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Kp(mi(t.ib,t),6e3));if(1>=yD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Iu(t,11)}else if((n.K||t.g==n)&&tv(t),!uu(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let w=s[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.K=w[1],t.pa=w[2];const D=w[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const A=w[4];null!=A&&(t.Ga=A,t.l.info("SVER="+t.Ga));const M=w[5];null!=M&&"number"==typeof M&&0<M&&(t.L=r=1.5*M,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const X=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(X){var c=r.i;c.g||-1==X.indexOf("spdy")&&-1==X.indexOf("quic")&&-1==X.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(YI(c,c.h),c.h=null))}if(r.F){const re=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;re&&(r.Da=re,Tn(r.I,r.F,re))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=PD(r,r.J?r.pa:null,r.Y),u.K){KI(r.i,u);var g=u,y=r.L;y&&g.setTimeout(y),g.C&&(Y_(g),Jp(g)),r.g=u}else AD(r);0<t.j.length&&qc(t)}else"stop"!=w[0]&&"close"!=w[0]||Iu(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Iu(t,7):om(t):"noop"!=w[0]&&t.h&&t.h.Aa(w),t.A=0)}uh()}catch{}}function HI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(k_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function $I(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(k_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function bR(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(k_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,c=0;c<s;c++)e.call(void 0,r[c],t&&t[c],n)}(Oe=dh.prototype).setTimeout=function(n){this.P=n},Oe.nb=function(n){n=n.target;const e=this.M;e&&3==Po(n)?e.l():this.Pa(n)},Oe.Pa=function(n){try{if(n==this.g)e:{const D=Po(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||jc||this.g&&(this.h.h||this.g.ja()||ka(this.g)))){this.J||4!=D||7==e||uh(),Y_(this);var t=this.g.da();this.ca=t;t:if(_R(this)){var r=ka(this.g);n="";var s=r.length,c=4==Po(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ws(this),K_(this);var u="";break t}this.h.i=new bt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==s-1});r.length=0,this.h.g+=n,this.o=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function Yp(n,e,t,r,s,c,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+c+" "+u})}(this.j,this.v,this.B,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,y=this.g;if((g=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!uu(g)){var w=g;break t}}w=null}if(!(t=w)){this.i=!1,this.s=3,ki(12),Ws(this),K_(this);break e}Ra(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jI(this,t)}this.S?(vR(this,D,u),jc&&this.i&&3==D&&(sD(this.U,this.V,"tick",this.mb),this.V.start())):(Ra(this.j,this.m,u,null),jI(this,u)),4==D&&Ws(this),this.i&&!this.J&&(4==D?xD(this.l,this):(this.i=!1,Jp(this)))}else(function ev(n){const e={};n=(n.g&&2<=Po(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(uu(n[r]))continue;var t=Wp(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[s]||[];e[s]=c,c.push(t)}!function vk(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.s=3,ki(12)):(this.s=0,ki(13)),Ws(this),K_(this)}}}catch{}},Oe.mb=function(){if(this.g){var n=Po(this.g),e=this.g.ja();this.o<e.length&&(Y_(this),vR(this,n,e),this.i&&4!=n&&Jp(this))}},Oe.cancel=function(){this.J=!0,Ws(this)},Oe.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function z_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(uh(),ki(17)),Ws(this),this.s=2,K_(this)):UI(this,this.Y-n)};var mD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof mu){this.h=n.h,em(this,n.j),this.s=n.s,this.g=n.g,tm(this,n.m),this.l=n.l;var e=n.i,t=new nm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),zI(this,t),this.o=n.o}else n&&(e=String(n).match(mD))?(this.h=!1,em(this,e[1]||"",!0),this.s=hh(e[2]||""),this.g=hh(e[3]||"",!0),tm(this,e[4]),this.l=hh(e[5]||"",!0),zI(this,e[6]||"",!0),this.o=hh(e[7]||"")):(this.h=!1,this.i=new nm(null,this.h))}function Ma(n){return new mu(n)}function em(n,e,t){n.j=t?hh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function tm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function zI(n,e,t){e instanceof nm?(n.i=e,function TR(n,e){e&&!n.j&&(Gc(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(_D(this,r),DR(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=gu(e,gD)),n.i=new nm(e,n.h))}function Tn(n,e,t){n.i.set(e,t)}function Q_(n){return Tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function hh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ik),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ik(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gu(e,GI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gu(e,GI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(gu(t,"/"==t.charAt(0)?ER:WI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gu(t,wR)),n.join("")};var GI=/[#\/\?@]/g,WI=/[#\?:]/g,ER=/[#\?]/g,gD=/[#\?@]/g,wR=/#/g;function nm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Gc(n){n.g||(n.g=new Map,n.h=0,n.i&&function IR(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var c=n[t].substring(0,r);s=n[t].substring(r+1)}else c=n[t];e(c,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function _D(n,e){Gc(n),e=Pa(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function CR(n,e){return Gc(n),e=Pa(n,e),n.g.has(e)}function DR(n,e,t){_D(n,e),0<t.length&&(n.i=null,n.g.set(Pa(n,e),O_(t)),n.h+=t.length)}function Pa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}(Oe=nm.prototype).add=function(n,e){Gc(this),this.i=null,n=Pa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Oe.forEach=function(n,e){Gc(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},Oe.ta=function(){Gc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let c=0;c<s.length;c++)t.push(e[r])}return t},Oe.Z=function(n){Gc(this);let e=[];if("string"==typeof n)CR(this,n)&&(e=e.concat(this.g.get(Pa(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Oe.set=function(n,e){return Gc(this),this.i=null,CR(this,n=Pa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Oe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const c=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var s=c;""!==u[r]&&(s+="="+encodeURIComponent(String(u[r]))),n.push(s)}}return this.i=n.join("&")};var AR=class{constructor(n,e){this.g=n,this.map=e}};function SR(n){this.l=n||xR,n=bt.PerformanceNavigationTiming?0<(n=bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(bt.g&&bt.g.Ka&&bt.g.Ka()&&bt.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xR=10;function vD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function yD(n){return n.h?1:n.g?n.g.size:0}function qI(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function YI(n,e){n.g?n.g.add(e):n.h=e}function KI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Wc(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return O_(n.i)}SR.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var bD=class{stringify(n){return bt.JSON.stringify(n,void 0)}parse(n){return bt.JSON.parse(n,void 0)}};function RR(){this.g=new bD}function Ek(n,e,t){const r=t||"";try{HI(n,function(s,c){let u=s;Up(s)&&(u=RI(s)),e.push(r+c+"="+encodeURIComponent(u))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Z_(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function _u(n){this.l=n.ec||null,this.j=n.ob||!1}function X_(n,e){Or.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=QI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}br(_u,Qp),_u.prototype.g=function(){return new X_(this.l,this.j)},_u.prototype.i=function(n){return function(){return n}}({}),br(X_,Or);var QI=0;function J_(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function fh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ph(n)}function ph(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Oe=X_.prototype).open=function(n,e){if(this.readyState!=QI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ph(this)},Oe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||bt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fh(this)),this.readyState=QI},Oe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ph(this)),this.g&&(this.readyState=3,ph(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;J_(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Oe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?fh(this):ph(this),3==this.readyState&&J_(this)}},Oe.Za=function(n){this.g&&(this.response=this.responseText=n,fh(this))},Oe.Ya=function(n){this.g&&(this.response=n,fh(this))},Oe.ka=function(){this.g&&fh(this)},Oe.setRequestHeader=function(n,e){this.v.append(n,e)},Oe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Oe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(X_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ID=bt.JSON.parse;function Kn(n){Or.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ED,this.L=this.M=!1}br(Kn,Or);var ED="",vu=/^https?$/i,wD=["POST","PUT"];function DD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ZI(n),rm(n)}function ZI(n){n.F||(n.F=!0,zr(n,"complete"),zr(n,"error"))}function XI(n){if(n.h&&typeof Bp<"u"&&(!n.C[1]||4!=Po(n)||2!=n.da()))if(n.v&&4==Po(n))OI(n.La,0,n);else if(zr(n,"readystatechange"),4==Po(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var s=String(n.I).match(mD)[1]||null;!s&&bt.self&&bt.self.location&&(s=bt.self.location.protocol.slice(0,-1)),r=!vu.test(s?s.toLowerCase():"")}t=r}if(t)zr(n,"complete"),zr(n,"success");else{n.m=6;try{var c=2<Po(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.da()+"]",ZI(n)}}finally{rm(n)}}}function rm(n,e){if(n.g){mh(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||zr(n,"ready");try{t.onreadystatechange=r}catch{}}}function mh(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(bt.clearTimeout(n.A),n.A=null)}function Po(n){return n.g?n.g.readyState:0}function ka(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case ED:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function JI(n){let e="";return wI(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function yu(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=JI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tn(n,e,t))}function im(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function TD(n){this.Ga=0,this.j=[],this.l=new H_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=im("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=im("baseRetryDelayMs",5e3,n),this.hb=im("retryDelaySeedMs",1e4,n),this.eb=im("forwardChannelMaxRetries",2,n),this.xa=im("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new SR(n&&n.concurrentRequestLimit),this.Ja=new RR,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function om(n){if(Oa(n),3==n.H){var e=n.W++,t=Ma(n.I);if(Tn(t,"SID",n.K),Tn(t,"RID",e),Tn(t,"TYPE","terminate"),gh(n,t),(e=new dh(n,n.l,e)).L=2,e.A=Q_(Ma(t)),t=!1,bt.navigator&&bt.navigator.sendBeacon)try{t=bt.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&bt.Image&&((new Image).src=e.A,t=!0),t||(e.g=kD(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Jp(e)}MD(n)}function sm(n){n.g&&(bu(n),n.g.cancel(),n.g=null)}function Oa(n){sm(n),n.u&&(bt.clearTimeout(n.u),n.u=null),tv(n),n.i.cancel(),n.m&&("number"==typeof n.m&&bt.clearTimeout(n.m),n.m=null)}function qc(n){if(!vD(n.i)&&!n.m){n.m=!0;var e=n.Na;$c||kI(),ch||($c(),ch=!0),hu.add(e,n),n.C=0}}function am(n,e){var t;t=e?e.m:n.W++;const r=Ma(n.I);Tn(r,"SID",n.K),Tn(r,"RID",t),Tn(r,"AID",n.V),gh(n,r),n.o&&n.s&&yu(r,n.o,n.s),t=new dh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=e0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),YI(n.i,t),q_(t,r,e)}function gh(n,e){n.na&&wI(n.na,function(t,r){Tn(e,r,t)}),n.h&&HI({},function(t,r){Tn(e,r,t)})}function e0(n,e,t){t=Math.min(n.j.length,t);var r=n.h?mi(n.h.Va,n.h,n):null;e:{var s=n.j;let c=-1;for(;;){const u=["count="+t];-1==c?0<t?(c=s[0].g,u.push("ofs="+c)):c=0:u.push("ofs="+c);let g=!0;for(let y=0;y<t;y++){let w=s[y].g;const D=s[y].map;if(w-=c,0>w)c=Math.max(0,s[y].g-100),g=!1;else try{Ek(D,u,"req"+w+"_")}catch{r&&r(D)}}if(g){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function AD(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;$c||kI(),ch||($c(),ch=!0),hu.add(e,n),n.A=0}}function t0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Kp(mi(n.Ma,n),RD(n,n.A)),n.A++,0))}function bu(n){null!=n.B&&(bt.clearTimeout(n.B),n.B=null)}function SD(n){n.g=new dh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ma(n.wa);Tn(e,"RID","rpc"),Tn(e,"SID",n.K),Tn(e,"AID",n.V),Tn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Tn(e,"TO",n.qa),Tn(e,"TYPE","xmlhttp"),gh(n,e),n.o&&n.s&&yu(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Q_(Ma(e)),t.u=null,t.S=!0,gR(t,n)}function tv(n){null!=n.v&&(bt.clearTimeout(n.v),n.v=null)}function xD(n,e){var t=null;if(n.g==e){tv(n),bu(n),n.g=null;var r=2}else{if(!qI(n.i,e))return;t=e.F,KI(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var s=n.C;zr(r=lh(),new LI(r,t)),qc(n)}else AD(n);else if(3==(s=e.s)||0==s&&0<e.ca||!(1==r&&function wk(n,e){return!(yD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Kp(mi(n.Na,n,e),RD(n,n.C)),n.C++,0)))}(n,e)||2==r&&t0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Iu(n,5);break;case 4:Iu(n,10);break;case 3:Iu(n,6);break;default:Iu(n,2)}}function RD(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Iu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=mi(n.pb,n);t||(t=new mu("//www.google.com/images/cleardot.gif"),bt.location&&"http"==bt.location.protocol||em(t,"https"),Q_(t)),function nr(n,e){const t=new H_;if(bt.Image){const r=new Image;r.onload=jp(Z_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=jp(Z_,t,r,"TestLoadImage: error",!1,e),r.onabort=jp(Z_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=jp(Z_,t,r,"TestLoadImage: timeout",!1,e),bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ki(2);n.H=0,n.h&&n.h.za(e),MD(n),Oa(n)}function MD(n){if(n.H=0,n.ma=[],n.h){const e=Wc(n.i);(0!=e.length||0!=n.j.length)&&(mI(n.ma,e),mI(n.ma,n.j),n.i.i.length=0,O_(n.j),n.j.length=0),n.h.ya()}}function PD(n,e,t){var r=t instanceof mu?Ma(t):new mu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),tm(r,r.m);else{var s=bt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var c=new mu(null);r&&em(c,r),e&&(c.g=e),s&&tm(c,s),t&&(c.l=t),r=c}return e=n.Da,(t=n.F)&&e&&Tn(r,t,e),Tn(r,"VER",n.ra),gh(n,r),r}function kD(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(n.Ha&&!n.va?new _u({ob:t}):n.va)).Oa(n.J),e}function cm(){}function nv(){if(Gs&&!(10<=Number(dR)))throw Error("Environmental error: no available transport.")}function eo(n,e){Or.call(this),this.g=new TD(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!uu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!uu(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Yc(this)}function n0(n){W_.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function r0(){hD.call(this),this.status=1}function Yc(n){this.g=n}function ls(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function rv(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=n.g[3],u=(e=n.g[0])+(c^(t=n.g[1])&((s=n.g[2])^c))+r[0]+3614090360&4294967295;u=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=t+(u<<7&4294967295|u>>>25))+((u=c+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=s+(t^c&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^s&(c^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(c^t&(s^c))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=c+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=s+(t^c&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^s&(c^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(c^t&(s^c))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=c+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=s+(t^c&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^s&(c^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(c^t&(s^c))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=c+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=s+(t^c&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^s&(c^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^c&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=s+(e^t&(c^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(s^c))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(s^c&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=s+(e^t&(c^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(s^c))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(s^c&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=s+(e^t&(c^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(s^c))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(s^c&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=s+(e^t&(c^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(s^c))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^s^c)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=s+(c^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(s^c^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^s^c)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=s+(c^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(s^c^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^s^c)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=s+(c^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(s^c^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^s^c)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=s+(c^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(s^c^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(s^(t|~c))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=s+(e^(c|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(c^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(s^(t|~c))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=s+(e^(c|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(c^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(s^(t|~c))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=s+(e^(c|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(c^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((c=(e=t+((u=e+(s^(t|~c))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((s=c+((u=s+(e^(c|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+c&4294967295}function nn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var c=0|n[s];r&&c==e||(t[s]=c,r=!1)}this.g=t}(Oe=Kn.prototype).Oa=function(n){this.M=n},Oe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():BI.g(),this.C=function dD(n){return n.h||(n.h=n.i())}(this.u?this.u:BI),this.g.onreadystatechange=mi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(c){return void DD(this,c)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())t.set(c,r.get(c))}r=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),s=bt.FormData&&n instanceof bt.FormData,!(0<=lR(wD,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,u]of t)this.g.setRequestHeader(c,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{mh(this),0<this.B&&((this.L=function CD(n){return Gs&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mi(this.ua,this)):this.A=OI(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){DD(this,c)}},Oe.ua=function(){typeof Bp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zr(this,"timeout"),this.abort(8))},Oe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,zr(this,"complete"),zr(this,"abort"),rm(this))},Oe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rm(this,!0)),Kn.$.N.call(this)},Oe.La=function(){this.s||(this.G||this.v||this.l?XI(this):this.kb())},Oe.kb=function(){XI(this)},Oe.isActive=function(){return!!this.g},Oe.da=function(){try{return 2<Po(this)?this.g.status:-1}catch{return-1}},Oe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Oe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ID(e)}},Oe.Ia=function(){return this.m},Oe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oe=TD.prototype).ra=8,Oe.H=1,Oe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new dh(this,this.l,n);let c=this.s;if(this.U&&(c?(c=XC(c),CI(c,this.U)):c=this.U),null!==this.o||this.O||(s.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=e0(this,s,e),Tn(t=Ma(this.I),"RID",n),Tn(t,"CVER",22),this.F&&Tn(t,"X-HTTP-Session-Id",this.F),gh(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(JI(c)))+"&"+e:this.o&&yu(t,this.o,c)),YI(this.i,s),this.bb&&Tn(t,"TYPE","init"),this.P?(Tn(t,"$req",e),Tn(t,"SID","null"),s.aa=!0,q_(s,t,null)):q_(s,t,e),this.H=2}}else 3==this.H&&(n?am(this,n):0==this.j.length||vD(this.i)||am(this))},Oe.Ma=function(){if(this.u=null,SD(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Kp(mi(this.jb,this),n)}},Oe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ki(10),sm(this),SD(this))},Oe.ib=function(){null!=this.v&&(this.v=null,sm(this),t0(this),ki(19))},Oe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ki(2)):(this.l.info("Failed to ping google.com"),ki(1))},Oe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Oe=cm.prototype).Ba=function(){},Oe.Aa=function(){},Oe.za=function(){},Oe.ya=function(){},Oe.isActive=function(){return!0},Oe.Va=function(){},nv.prototype.g=function(n,e){return new eo(n,e)},br(eo,Or),eo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ki(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=PD(n,null,n.Y),qc(n)},eo.prototype.close=function(){om(this.g)},eo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=RI(n),n=t);e.j.push(new AR(e.fb++,n)),3==e.H&&qc(e)},eo.prototype.N=function(){this.g.h=null,delete this.j,om(this.g),delete this.g,eo.$.N.call(this)},br(n0,W_),br(r0,hD),br(Yc,cm),Yc.prototype.Ba=function(){zr(this.g,"a")},Yc.prototype.Aa=function(n){zr(this.g,new n0(n))},Yc.prototype.za=function(n){zr(this.g,new r0)},Yc.prototype.ya=function(){zr(this.g,"b")},br(ls,function OD(){this.blockSize=-1}),ls.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ls.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,c=0;c<e;){if(0==s)for(;c<=t;)rv(this,n,c),c+=this.blockSize;if("string"==typeof n){for(;c<e;)if(r[s++]=n.charCodeAt(c++),s==this.blockSize){rv(this,r),s=0;break}}else for(;c<e;)if(r[s++]=n[c++],s==this.blockSize){rv(this,r),s=0;break}}this.h=s,this.i+=e},ls.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var ND={};function iv(n){return-128<=n&&128>n?function _I(n,e){var t=ND;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new nn([0|e],0>e?-1:0)}):new nn([0|n],0>n?-1:0)}function qs(n){if(isNaN(n)||!isFinite(n))return Kc;if(0>n)return Gr(qs(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=o0;return new nn(e,0)}var o0=4294967296,Kc=iv(0),lm=iv(1),s0=iv(16777216);function us(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Gi(n){return-1==n.h}function Gr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new nn(t,~n.h).add(lm)}function ov(n,e){return n.add(Gr(e))}function sv(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function um(n,e){this.g=n,this.h=e}function dm(n,e){if(us(e))throw Error("division by zero");if(us(n))return new um(Kc,Kc);if(Gi(n))return e=dm(Gr(n),e),new um(Gr(e.g),Gr(e.h));if(Gi(e))return e=dm(n,Gr(e)),new um(Gr(e.g),e.h);if(30<n.g.length){if(Gi(n)||Gi(e))throw Error("slowDivide_ only works with positive integers.");for(var t=lm,r=e;0>=r.X(n);)t=av(t),r=av(r);var s=Qc(t,1),c=Qc(r,1);for(r=Qc(r,2),t=Qc(t,2);!us(r);){var u=c.add(r);0>=u.X(n)&&(s=s.add(t),c=u),r=Qc(r,1),t=Qc(t,1)}return e=ov(n,s.R(e)),new um(s,e)}for(s=Kc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(c=qs(t)).R(e);Gi(u)||0<u.X(n);)u=(c=qs(t-=r)).R(e);us(c)&&(c=lm),s=s.add(c),n=ov(n,u)}return new um(s,n)}function av(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new nn(t,n.h)}function Qc(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],c=0;c<r;c++)s[c]=0<e?n.D(c+t)>>>e|n.D(c+t+1)<<32-e:n.D(c+t);return new nn(s,n.h)}(Oe=nn.prototype).ea=function(){if(Gi(this))return-Gr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:o0+r)*e,e*=o0}return n},Oe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(us(this))return"0";if(Gi(this))return"-"+Gr(this).toString(n);for(var e=qs(Math.pow(n,6)),t=this,r="";;){var s=dm(t,e).g,c=((0<(t=ov(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(us(t=s))return c+r;for(;6>c.length;)c="0"+c;r=c+r}},Oe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Oe.X=function(n){return Gi(n=ov(this,n))?-1:us(n)?0:1},Oe.abs=function(){return Gi(this)?Gr(this):this},Oe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var c=r+(65535&this.D(s))+(65535&n.D(s)),u=(c>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=u>>>16,t[s]=(u&=65535)<<16|(c&=65535)}return new nn(t,-2147483648&t[t.length-1]?-1:0)},Oe.R=function(n){if(us(this)||us(n))return Kc;if(Gi(this))return Gi(n)?Gr(this).R(Gr(n)):Gr(Gr(this).R(n));if(Gi(n))return Gr(this.R(Gr(n)));if(0>this.X(s0)&&0>n.X(s0))return qs(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var c=this.D(r)>>>16,u=65535&this.D(r),g=n.D(s)>>>16,y=65535&n.D(s);t[2*r+2*s]+=u*y,sv(t,2*r+2*s),t[2*r+2*s+1]+=c*y,sv(t,2*r+2*s+1),t[2*r+2*s+1]+=u*g,sv(t,2*r+2*s+1),t[2*r+2*s+2]+=c*g,sv(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new nn(t,0)},Oe.gb=function(n){return dm(this,n).h},Oe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new nn(t,this.h&n.h)},Oe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new nn(t,this.h|n.h)},Oe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new nn(t,this.h^n.h)},nv.prototype.createWebChannel=nv.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,G_.NO_ERROR=0,G_.TIMEOUT=8,G_.HTTP_ERROR=6,pu.COMPLETE="complete",VI.EventType=Zp,Zp.OPEN="a",Zp.CLOSE="b",Zp.ERROR="c",Zp.MESSAGE="d",Or.prototype.listen=Or.prototype.O,Kn.prototype.listenOnce=Kn.prototype.P,Kn.prototype.getLastError=Kn.prototype.Sa,Kn.prototype.getLastErrorCode=Kn.prototype.Ia,Kn.prototype.getStatus=Kn.prototype.da,Kn.prototype.getResponseJson=Kn.prototype.Wa,Kn.prototype.getResponseText=Kn.prototype.ja,Kn.prototype.send=Kn.prototype.ha,Kn.prototype.setWithCredentials=Kn.prototype.Oa,ls.prototype.digest=ls.prototype.l,ls.prototype.reset=ls.prototype.reset,ls.prototype.update=ls.prototype.j,nn.prototype.add=nn.prototype.add,nn.prototype.multiply=nn.prototype.R,nn.prototype.modulo=nn.prototype.gb,nn.prototype.compare=nn.prototype.X,nn.prototype.toNumber=nn.prototype.ea,nn.prototype.toString=nn.prototype.toString,nn.prototype.getBits=nn.prototype.D,nn.fromNumber=qs,nn.fromString=function FD(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Gr(FD(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=qs(Math.pow(e,8)),r=Kc,s=0;s<n.length;s+=8){var c=Math.min(8,n.length-s),u=parseInt(n.substring(s,s+c),e);8>c?(c=qs(Math.pow(e,c)),r=r.R(c).add(qs(u))):r=(r=r.R(t)).add(qs(u))}return r};var LD=as.createWebChannelTransport=function(){return new nv},VD=as.getStatEventTarget=function(){return lh()},cv=as.ErrorCode=G_,MR=as.EventType=pu,BD=as.Event=fu,UD=as.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},hm=(as.FetchXmlHttpFactory=_u,as.WebChannel=VI),a0=as.XhrIo=Kn,$D=as.Md5=ls,Eu=as.Integer=nn;const c0="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let _h="10.8.0";const wu=new $s.YJ("@firebase/firestore");function fm(){return wu.logLevel}function ve(n,...e){if(wu.logLevel<=$s.Ge.DEBUG){const t=e.map(HD);wu.debug(`Firestore (${_h}): ${n}`,...t)}}function ur(n,...e){if(wu.logLevel<=$s.Ge.ERROR){const t=e.map(HD);wu.error(`Firestore (${_h}): ${n}`,...t)}}function to(n,...e){if(wu.logLevel<=$s.Ge.WARN){const t=e.map(HD);wu.warn(`Firestore (${_h}): ${n}`,...t)}}function HD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Be(n="Unexpected state"){const e=`FIRESTORE (${_h}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function Ge(n,e){n||Be()}function Re(n,e){return n}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends tn.kx{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class PR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ir.UNAUTHENTICATED))}shutdown(){}}class Tk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ak{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const c=w=>this.i!==s?(s=this.i,t(w)):Promise.resolve();let u=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Nr,e.enqueueRetryable(()=>c(this.currentUser))};const g=()=>{const w=u;e.enqueueRetryable((0,he.c)(function*(){yield w.promise,yield c(r.currentUser)}))},y=w=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Nr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge("string"==typeof r.accessToken),new PR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ge(null===e||"string"==typeof e),new Ir(e)}}class Sk{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class kR{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Sk(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pm{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=c=>{null!=c.error&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.R;return this.R=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const s=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>s(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?s(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge("string"==typeof t.token),this.R=t.token,new Cu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Rk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class l0{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=Rk(40);for(let c=0;c<s.length;++c)r.length<20&&s[c]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[c]%62))}return r}}function gt(n,e){return n<e?-1:n>e?1:0}function mm(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function GD(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ge(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gt(this.nanoseconds,e.nanoseconds):gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new On(0,0))}static max(){return new Ze(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zc{constructor(e,t,r){void 0===t?t=0:t>e.length&&Be(),void 0===r?r=e.length-t:r>e.length-t&&Be(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Zc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const c=e.get(s),u=t.get(s);if(c<u)return-1;if(c>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ut extends Zc{construct(e,t,r){return new Ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Ut(t)}static emptyPath(){return new Ut([])}}const OR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Zc{construct(e,t,r){return new En(e,t,r)}static isValidIdentifier(e){return OR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new En(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const c=()=>{if(0===r.length)throw new ge(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new ge(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[s+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new ge(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,s+=2}else"`"===g?(u=!u,s++):"."!==g||u?(r+=g,s++):(c(),s++)}if(c(),u)throw new ge(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(t)}static emptyPath(){return new En([])}}class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(Ut.fromString(e))}static fromName(e){return new Pe(Ut.fromString(e).popFirst(5))}static empty(){return new Pe(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ut.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new Ut(e.slice()))}}class Du{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function WD(n){return n.fields.find(e=>2===e.kind)}function Tu(n){return n.fields.filter(e=>2!==e.kind)}Du.UNKNOWN_ID=-1;class Na{constructor(e,t){this.fieldPath=e,this.kind=t}}class vh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vh(0,no.min())}}function gm(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ze.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new no(s,Pe.empty(),e)}function YD(n){return new no(n.readTime,n.key,-1)}class no{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new no(Ze.min(),Pe.empty(),-1)}static max(){return new no(Ze.max(),Pe.empty(),-1)}}function u0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Pe.comparator(n.documentKey,e.documentKey),0!==t?t:gt(n.largestBatchId,e.largestBatchId))}const KD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xc(n){return d0.apply(this,arguments)}function d0(){return d0=(0,he.c)(function*(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==KD)throw n;ve("LocalStore","Unexpectedly lost primary lease")}),d0.apply(this,arguments)}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,s)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let s=0,c=0,u=!1;e.forEach(g=>{++s,g.next(()=>{++c,u&&c===s&&t()},y=>r(y))}),u=!0,c===s&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(s=>s?q.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,c)=>{r.push(t.call(this,s,c))}),this.waitFor(r)}static mapArray(e,t){return new q((r,s)=>{const c=e.length,u=new Array(c);let g=0;for(let y=0;y<c;y++){const w=y;t(e[w]).next(D=>{u[w]=D,++g,g===c&&r(u)},D=>s(D))}})}static doWhile(e,t){return new q((r,s)=>{const c=()=>{!0===e()?t().next(()=>{c()},s):r()};c()})}}class _m{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Nr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new yh(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=h0(r.target.error);this.V.reject(new yh(e,s))}}static open(e,t,r,s){try{return new _m(t,e.transaction(s,r))}catch(c){throw new yh(t,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lv(t)}}class ko{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ko.S((0,tn.Su)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ve("SimpleDb","Removing database:",e),bh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,tn.yy)())return!1;if(ko.C())return!0;const e=(0,tn.Su)(),t=ko.S(e),r=0<t&&t<10,s=ko.v(e),c=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,he.c)(function*(){return t.db||(ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=u=>{r(u.target.result)},c.onblocked=()=>{s(new yh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=u=>{const g=u.target.error;s("VersionError"===g.name?new ge(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new ge(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new yh(e,g))},c.onupgradeneeded=u=>{ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.p.N(u.target.result,c.transaction,u.oldVersion,t.version).next(()=>{ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var c=this;return(0,he.c)(function*(){const u="readonly"===t;let g=0;for(;;){++g;try{c.db=yield c.O(e);const y=_m.open(c.db,e,u?"readonly":"readwrite",r),w=s(y).next(D=>(y.g(),D)).catch(D=>(y.abort(D),q.reject(D))).toPromise();return w.catch(()=>{}),yield y.m,w}catch(y){const w=y,D="FirebaseError"!==w.name&&g<3;if(ve("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),c.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Mk{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return bh(this.k.delete())}}class yh extends ge{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fa(n){return"IndexedDbTransactionError"===n.name}class lv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bh(r)}add(e){return ve("SimpleDb","ADD",this.store.name,e,e),bh(this.store.add(e))}get(e){return bh(this.store.get(e)).next(t=>(void 0===t&&(t=null),ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ve("SimpleDb","DELETE",this.store.name,e),bh(this.store.delete(e))}count(){return ve("SimpleDb","COUNT",this.store.name),bh(this.store.count())}W(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if("function"==typeof s.getAll){const c=s.getAll(r.range);return new q((u,g)=>{c.onerror=y=>{g(y.target.error)},c.onsuccess=y=>{u(y.target.result)}})}{const c=this.cursor(r),u=[];return this.G(c,(g,y)=>{u.push(y)}).next(()=>u)}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new q((s,c)=>{r.onerror=u=>{c(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}H(e,t){ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const s=this.cursor(r);return this.G(s,(c,u,g)=>g.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Z(e){const t=this.cursor({});return new q((r,s)=>{t.onerror=c=>{const u=h0(c.target.error);s(u)},t.onsuccess=c=>{const u=c.target.result;u?e(u.primaryKey,u.value).next(g=>{g?u.continue():r()}):r()}})}G(e,t){const r=[];return new q((s,c)=>{e.onerror=u=>{c(u.target.error)},e.onsuccess=u=>{const g=u.target.result;if(!g)return void s();const y=new Mk(g),w=t(g.primaryKey,g.value,y);if(w instanceof q){const D=w.catch(A=>(y.done(),q.reject(A)));r.push(D)}y.isDone?s():null===y.$?g.continue():g.continue(y.$)}}).next(()=>q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bh(n){return new q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=h0(r.target.error);t(s)}})}let FR=!1;function h0(n){const e=ko.S((0,tn.Su)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FR||(FR=!0,setTimeout(()=>{throw r},0)),r}}return n}class Au{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;ve("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.c)(function*(){t.task=null;try{ve("IndexBackfiller",`Documents written: ${yield t.X.te()}`)}catch(r){Fa(r)?ve("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Xc(r)}yield t.ee(6e4)}))}}class ZD{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,he.c)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let s=t,c=!0;return q.doWhile(()=>!0===c&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return ve("IndexBackfiller",`Processing collection: ${u}`),this.re(e,u,s).next(g=>{s-=g,r.add(u)});c=!1})).next(()=>t-s)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(c=>{const u=c.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ie(s,c)).next(g=>(ve("IndexBackfiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>u.size)}))}ie(e,t){let r=e;return t.changes.forEach((s,c)=>{const u=YD(c);u0(u,r)>0&&(r=u)}),new no(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ro=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.se(s),this.oe=s=>r.writeSequenceNumber(s))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function uv(n){return null==n}function Su(n){return 0===n&&1/n==-1/0}function dv(n){return"number"==typeof n&&Number.isInteger(n)&&!Su(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=f0(e)),e=XD(n.get(t),e);return f0(e)}function XD(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const c=n.charAt(s);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function f0(n){return n+"\x01\x01"}function La(n){const e=n.length;if(Ge(e>=2),2===e)return Ge("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ut.emptyPath();const t=e-2,r=[];let s="";for(let c=0;c<e;){const u=n.indexOf("\x01",c);switch((u<0||u>t)&&Be(),n.charAt(u+1)){case"\x01":const g=n.substring(c,u);let y;0===s.length?y=g:(s+=g,y=s,s=""),r.push(y);break;case"\x10":s+=n.substring(c,u),s+="\0";break;case"\x11":s+=n.substring(c,u+1);break;default:Be()}c=u+2}return new Ut(r)}const Ih=["userId","batchId"];function io(n,e){return[n,gi(e)]}function Eh(n,e,t){return[n,gi(e),t]}const rr={},xu=["prefixPath","collectionGroup","readTime","documentId"],hv=["prefixPath","collectionGroup","documentId"],Oo=["collectionGroup","readTime","prefixPath","documentId"],LR=["canonicalId","targetId"],wh=["targetId","path"],JD=["path","targetId"],eT=["collectionId","parent"],VR=["indexId","uid"],BR=["uid","sequenceNumber"],ir=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tT=["indexId","uid","orderedDocumentKey"],UR=["userId","collectionPath","documentId"],dr=["userId","collectionPath","largestBatchId"],vm=["userId","collectionGroup","largestBatchId"],Ru=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fv=[...Ru,"documentOverlays"],Ch=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ym=Ch,nT=[...ym,"indexConfiguration","indexState","indexEntries"];class pv extends QD{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Er(n,e){const t=Re(n);return ko.M(t.ae,e)}function bm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function p0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ln{constructor(e,t){this.comparator=e,this.root=t||Wr.EMPTY}insert(e,t){return new ln(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ks(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ks(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ks(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ks(this.root,e,this.comparator,!0)}}class Ks{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&s&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wr{constructor(e,t,r,s,c){this.key=e,this.value=t,this.color=r??Wr.RED,this.left=s??Wr.EMPTY,this.right=c??Wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,c){return new Wr(e??this.key,t??this.value,r??this.color,s??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===c?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Wr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Be();const e=this.left.check();if(e!==this.right.check())throw Be();return e+(this.isRed()?0:1)}}Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1,Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw Be()}get value(){throw Be()}get color(){throw Be()}get left(){throw Be()}get right(){throw Be()}copy(e,t,r,s,c){return this}insert(e,t,r){return new Wr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ot{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rT(this.data.getIterator())}getIteratorFrom(e){return new rT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(s,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class rT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dh(n){return n.hasNext()?n.getNext():void 0}class _i{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new _i([])}unionWith(e){let t=new Ot(En.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new _i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class m0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new m0("Invalid base64 string: "+c):c}}(e);return new wr(t)}static fromUint8Array(e){const t=function(s){let c="";for(let u=0;u<s.length;++u)c+=String.fromCharCode(s[u]);return c}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const Pk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jc(n){if(Ge(!!n),"string"==typeof n){let e=0;const t=Pk.exec(n);if(Ge(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(n.seconds),nanos:An(n.nanos)}}function An(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ds(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function Th(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Va(n){const e=n.mapValue.fields.__previous_value__;return Th(e)?Va(e):e}function Ah(n){const e=Jc(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class oT{constructor(e,t,r,s,c,u,g,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=w}}class oo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new oo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}const Qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sh={nullValue:"NULL_VALUE"};function Ba(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Th(n)?4:_v(n)?9007199254740991:10:Be()}function hs(n,e){if(n===e)return!0;const t=Ba(n);if(t!==Ba(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ah(n).isEqual(Ah(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const u=Jc(s.timestampValue),g=Jc(c.timestampValue);return u.seconds===g.seconds&&u.nanos===g.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return c=e,ds(n.bytesValue).isEqual(ds(c.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,c){return An(s.geoPointValue.latitude)===An(c.geoPointValue.latitude)&&An(s.geoPointValue.longitude)===An(c.geoPointValue.longitude)}(n,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return An(s.integerValue)===An(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const u=An(s.doubleValue),g=An(c.doubleValue);return u===g?Su(u)===Su(g):isNaN(u)&&isNaN(g)}return!1}(n,e);case 9:return mm(n.arrayValue.values||[],e.arrayValue.values||[],hs);case 10:return function(s,c){const u=s.mapValue.fields||{},g=c.mapValue.fields||{};if(bm(u)!==bm(g))return!1;for(const y in u)if(u.hasOwnProperty(y)&&(void 0===g[y]||!hs(u[y],g[y])))return!1;return!0}(n,e);default:return Be()}var c}function xh(n,e){return void 0!==(n.values||[]).find(t=>hs(t,e))}function el(n,e){if(n===e)return 0;const t=Ba(n),r=Ba(e);if(t!==r)return gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return gt(n.booleanValue,e.booleanValue);case 2:return function(c,u){const g=An(c.integerValue||c.doubleValue),y=An(u.integerValue||u.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(n,e);case 3:return sT(n.timestampValue,e.timestampValue);case 4:return sT(Ah(n),Ah(e));case 5:return gt(n.stringValue,e.stringValue);case 6:return function(c,u){const g=ds(c),y=ds(u);return g.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(c,u){const g=c.split("/"),y=u.split("/");for(let w=0;w<g.length&&w<y.length;w++){const D=gt(g[w],y[w]);if(0!==D)return D}return gt(g.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(c,u){const g=gt(An(c.latitude),An(u.latitude));return 0!==g?g:gt(An(c.longitude),An(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(c,u){const g=c.values||[],y=u.values||[];for(let w=0;w<g.length&&w<y.length;++w){const D=el(g[w],y[w]);if(D)return D}return gt(g.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(c,u){if(c===Qs.mapValue&&u===Qs.mapValue)return 0;if(c===Qs.mapValue)return 1;if(u===Qs.mapValue)return-1;const g=c.fields||{},y=Object.keys(g),w=u.fields||{},D=Object.keys(w);y.sort(),D.sort();for(let A=0;A<y.length&&A<D.length;++A){const M=gt(y[A],D[A]);if(0!==M)return M;const N=el(g[y[A]],w[D[A]]);if(0!==N)return N}return gt(y.length,D.length)}(n.mapValue,e.mapValue);default:throw Be()}}function sT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return gt(n,e);const t=Jc(n),r=Jc(e),s=gt(t.seconds,r.seconds);return 0!==s?s:gt(t.nanos,r.nanos)}function fs(n){return mv(n)}function mv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Jc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ds(n.bytesValue).toBase64():"referenceValue"in n?Pe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const c of t.values||[])s?s=!1:r+=",",r+=mv(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",c=!0;for(const u of r)c?c=!1:s+=",",s+=`${u}:${mv(t.fields[u])}`;return s+"}"}(n.mapValue):Be()}function Mu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function g0(n){return!!n&&"integerValue"in n}function Rh(n){return!!n&&"arrayValue"in n}function _0(n){return!!n&&"nullValue"in n}function aT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function v0(n){return!!n&&"mapValue"in n}function Im(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ys(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Im(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Im(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _v(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function y0(n){return"nullValue"in n?Sh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Mu(oo.empty(),Pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Be()}function jR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Mu(oo.empty(),Pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Qs:Be()}function cT(n,e){const t=el(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function lT(n,e){const t=el(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!v0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Im(t)}setAll(e){let t=En.emptyPath(),r={},s=[];e.forEach((u,g)=>{if(!t.isImmediateParentOf(g)){const y=this.getFieldsMap(t);this.applyChanges(y,r,s),r={},s=[],t=g.popLast()}u?r[g.lastSegment()]=Im(u):s.push(g.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,s)}delete(e){const t=this.field(e.popLast());v0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];v0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ys(t,(s,c)=>e[s]=c);for(const s of r)delete e[s]}clone(){return new qr(Im(this.value))}}function uT(n){const e=[];return Ys(n.fields,(t,r)=>{const s=new En([t]);if(v0(r)){const c=uT(r.mapValue).fields;if(0===c.length)e.push(s);else for(const u of c)e.push(s.child(u))}else e.push(s)}),new _i(e)}class Sn{constructor(e,t,r,s,c,u,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=c,this.data=u,this.documentState=g}static newInvalidDocument(e){return new Sn(e,0,Ze.min(),Ze.min(),Ze.min(),qr.empty(),0)}static newFoundDocument(e,t,r,s){return new Sn(e,1,t,Ze.min(),r,s,0)}static newNoDocument(e,t){return new Sn(e,2,t,Ze.min(),Ze.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new Sn(e,3,t,Ze.min(),Ze.min(),qr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tl{constructor(e,t){this.position=e,this.inclusive=t}}function dT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const c=e[s],u=n.position[s];if(r=c.field.isKeyField()?Pe.comparator(Pe.fromName(u.referenceValue),t.key):el(u,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function hT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hs(n.position[t],e.position[t]))return!1;return!0}class Em{constructor(e,t="asc"){this.field=e,this.dir=t}}function $R(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fT{}class Ht extends fT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new mT(e,t,r):"array-contains"===t?new gT(e,r):"in"===t?new ku(e,r):"not-in"===t?new D0(e,r):"array-contains-any"===t?new Ph(e,r):new Ht(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new wm(e,r):new C0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(el(t,this.value)):null!==t&&Ba(this.value)===Ba(t)&&this.matchesComparison(el(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends fT{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new un(e,t)}matches(e){return Mh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Mh(n){return"and"===n.op}function b0(n){return"or"===n.op}function vv(n){return I0(n)&&Mh(n)}function I0(n){for(const e of n.filters)if(e instanceof un)return!1;return!0}function Zs(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+fs(n.value);if(vv(n))return n.filters.map(e=>Zs(e)).join(",");{const e=n.filters.map(t=>Zs(t)).join(",");return`${n.op}(${e})`}}function E0(n,e){return n instanceof Ht?(r=n,(s=e)instanceof Ht&&r.op===s.op&&r.field.isEqual(s.field)&&hs(r.value,s.value)):n instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length&&r.filters.reduce((c,u,g)=>c&&E0(u,s.filters[g]),!0)}(n,e):void Be();var r,s}function pT(n,e){const t=n.filters.concat(e);return un.create(t,n.op)}function w0(n){return n instanceof Ht?`${(t=n).field.canonicalString()} ${t.op} ${fs(t.value)}`:n instanceof un?function(t){return t.op.toString()+" {"+t.getFilters().map(w0).join(" ,")+"}"}(n):"Filter";var t}class mT extends Ht{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class wm extends Ht{constructor(e,t){super(e,"in",t),this.keys=Pu(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class C0 extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=Pu(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Pu(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class gT extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rh(t)&&xh(t.arrayValue,this.value)}}class ku extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xh(this.value.arrayValue,t)}}class D0 extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(xh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xh(this.value.arrayValue,t)}}class Ph extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xh(this.value.arrayValue,r))}}class kh{constructor(e,t=null,r=[],s=[],c=null,u=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=c,this.startAt=u,this.endAt=g,this.ce=null}}function nl(n,e=null,t=[],r=[],s=null,c=null,u=null){return new kh(n,e,t,r,s,c,u)}function No(n){const e=Re(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zs(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(c=r).field.canonicalString()+c.dir;var c}).join(","),uv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fs(r)).join(",")),e.ce=t}return e.ce}function Xs(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$R(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!E0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hT(n.startAt,e.startAt)&&hT(n.endAt,e.endAt)}function Ua(n){return Pe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ja(n,e){return n.filters.filter(t=>t instanceof Ht&&t.field.isEqual(e))}function Ou(n,e,t){let r=Sh,s=!0;for(const c of ja(n,e)){let u=Sh,g=!0;switch(c.op){case"<":case"<=":u=y0(c.value);break;case"==":case"in":case">=":u=c.value;break;case">":u=c.value,g=!1;break;case"!=":case"not-in":u=Sh}cT({value:r,inclusive:s},{value:u,inclusive:g})<0&&(r=u,s=g)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];cT({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}return{value:r,inclusive:s}}function Nu(n,e,t){let r=Qs,s=!0;for(const c of ja(n,e)){let u=Qs,g=!0;switch(c.op){case">=":case">":u=jR(c.value),g=!1;break;case"==":case"in":case"<=":u=c.value;break;case"<":u=c.value,g=!1;break;case"!=":case"not-in":u=Qs}lT({value:r,inclusive:s},{value:u,inclusive:g})>0&&(r=u,s=g)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];lT({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}return{value:r,inclusive:s}}class Js{constructor(e,t=null,r=[],s=[],c=null,u="F",g=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=c,this.limitType=u,this.startAt=g,this.endAt=y,this.le=null,this.he=null,this.Pe=null}}function T0(n,e,t,r,s,c,u,g){return new Js(n,e,t,r,s,c,u,g)}function Fu(n){return new Js(n)}function A0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function yv(n){return null!==n.collectionGroup}function Lu(n){const e=Re(n);if(null===e.le){e.le=[];const t=new Set;for(const c of e.explicitOrderBy)e.le.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let g=new Ot(En.comparator);return u.filters.forEach(y=>{y.getFlattenedFilters().forEach(w=>{w.isInequality()&&(g=g.add(w.field))})}),g})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.le.push(new Em(c,r))}),t.has(En.keyField().canonicalString())||e.le.push(new Em(En.keyField(),r))}return e.le}function vi(n){const e=Re(n);return e.he||(e.he=function S0(n,e){if("F"===n.limitType)return nl(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>new Em(s.field,"desc"===s.dir?"asc":"desc"));const t=n.endAt?new tl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new tl(n.startAt.position,n.startAt.inclusive):null;return nl(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Lu(n))),e.he}function bv(n,e){const t=n.filters.concat([e]);return new Js(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vu(n,e,t){return new Js(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fo(n,e){return Xs(vi(n),vi(e))&&n.limitType===e.limitType}function _T(n){return`${No(vi(n))}|lt:${n.limitType}`}function Oh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>w0(s)).join(", ")}]`),uv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>fs(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>fs(s)).join(",")),`Target(${r})`}(vi(n))}; limitType=${n.limitType})`}function Bu(n,e){return e.isFoundDocument()&&function(r,s){const c=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Pe.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(n,e)&&function(r,s){for(const c of Lu(r))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(n,e)&&function(r,s){for(const c of r.filters)if(!c.matches(s))return!1;return!0}(n,e)&&(s=e,!((r=n).startAt&&!function(u,g,y){const w=dT(u,g,y);return u.inclusive?w<=0:w<0}(r.startAt,Lu(r),s)||r.endAt&&!function(u,g,y){const w=dT(u,g,y);return u.inclusive?w>=0:w>0}(r.endAt,Lu(r),s)));var r,s}function rl(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Iv(n){return(e,t)=>{let r=!1;for(const s of Lu(n)){const c=HR(s,e,t);if(0!==c)return c;r=r||s.field.isKeyField()}return 0}}function HR(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(c,u,g){const y=u.data.field(c),w=g.data.field(c);return null!==y&&null!==w?el(y,w):Be()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Be()}}class ps{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,c]of r)if(this.equalsFn(s,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return void(s[c]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,(t,r)=>{for(const[s,c]of r)e(s,c)})}isEmpty(){return p0(this.inner)}size(){return this.innerSize}}const kk=new ln(Pe.comparator);function so(){return kk}const vT=new ln(Pe.comparator);function Cm(...n){let e=vT;for(const t of n)e=e.insert(t.key,t);return e}function x0(n){let e=vT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ea(){return Nh()}function hr(){return Nh()}function Nh(){return new ps(n=>n.toString(),(n,e)=>n.isEqual(e))}const zR=new ln(Pe.comparator),GR=new Ot(Pe.comparator);function Tt(...n){let e=GR;for(const t of n)e=e.add(t);return e}const WR=new Ot(gt);function Ev(){return WR}function R0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Su(e)?"-0":e}}function Uu(n){return{integerValue:""+n}}function yT(n,e){return dv(e)?Uu(e):R0(n,e)}class wv{constructor(){this._=void 0}}function bT(n,e,t){return n instanceof Dm?function(s,c){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&Th(c)&&(c=Va(c)),c&&(u.fields.__previous_value__=c),{mapValue:u}}(t,e):n instanceof $a?Cv(n,e):n instanceof Ha?Dv(n,e):function(s,c){const u=M0(s,c),g=IT(u)+IT(s.Ie);return g0(u)&&g0(s.Ie)?Uu(g):R0(s.serializer,g)}(n,e)}function qR(n,e,t){return n instanceof $a?Cv(n,e):n instanceof Ha?Dv(n,e):t}function M0(n,e){return n instanceof Oi?g0(r=e)||(c=r)&&"doubleValue"in c?e:{integerValue:0}:null;var r,c}class Dm extends wv{}class $a extends wv{constructor(e){super(),this.elements=e}}function Cv(n,e){const t=P0(e);for(const r of n.elements)t.some(s=>hs(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ha extends wv{constructor(e){super(),this.elements=e}}function Dv(n,e){let t=P0(e);for(const r of n.elements)t=t.filter(s=>!hs(s,r));return{arrayValue:{values:t}}}class Oi extends wv{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function IT(n){return An(n.integerValue||n.doubleValue)}function P0(n){return Rh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wi{constructor(e,t){this.field=e,this.transform=t}}class gs{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Tv{}function ET(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ju(n.key,xn.none()):new Lh(n.key,n.data,xn.none());{const t=n.data,r=qr.empty();let s=new Ot(En.comparator);for(let c of e.fields)if(!s.has(c)){let u=t.field(c);null===u&&c.length>1&&(c=c.popLast(),u=t.field(c)),null===u?r.delete(c):r.set(c,u),s=s.add(c)}return new ta(n.key,r,new _i(s.toArray()),xn.none())}}function YR(n,e,t){n instanceof Lh?function(s,c,u){const g=s.value.clone(),y=CT(s.fieldTransforms,c,u.transformResults);g.setAll(y),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):n instanceof ta?function(s,c,u){if(!Tm(s.precondition,c))return void c.convertToUnknownDocument(u.version);const g=CT(s.fieldTransforms,c,u.transformResults),y=c.data;y.setAll(wT(s)),y.setAll(g),c.convertToFoundDocument(u.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Am(n,e,t,r){return n instanceof Lh?function(c,u,g,y){if(!Tm(c.precondition,u))return g;const w=c.value.clone(),D=O0(c.fieldTransforms,y,u);return w.setAll(D),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof ta?function(c,u,g,y){if(!Tm(c.precondition,u))return g;const w=O0(c.fieldTransforms,y,u),D=u.data;return D.setAll(wT(c)),D.setAll(w),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===g?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(n,e,t,r):(g=t,Tm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):g);var u,g}function k0(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),c=M0(r.transform,s||null);null!=c&&(null===t&&(t=qr.empty()),t.set(r.field,c))}return t||null}function Fh(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===s||r&&s&&mm(r,s,(c,u)=>function ms(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(r=n.transform)instanceof $a&&s instanceof $a||r instanceof Ha&&s instanceof Ha?mm(r.elements,s.elements,hs):r instanceof Oi&&s instanceof Oi?hs(r.Ie,s.Ie):r instanceof Dm&&s instanceof Dm);var r,s}(c,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,s}class Lh extends Tv{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ta extends Tv{constructor(e,t,r,s,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function wT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function CT(n,e,t){const r=new Map;Ge(n.length===t.length);for(let s=0;s<t.length;s++){const c=n[s],u=c.transform,g=e.data.field(c.field);r.set(c.field,qR(u,g,t[s]))}return r}function O0(n,e,t){const r=new Map;for(const s of n){const c=s.transform,u=t.data.field(s.field);r.set(s.field,bT(c,u,e))}return r}class ju extends Tv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vh extends Tv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class N0{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const c=this.mutations[s];c.key.isEqual(e.key)&&YR(c,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Am(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Am(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=hr();return this.mutations.forEach(s=>{const c=e.get(s.key),u=c.overlayedDocument;let g=this.applyToLocalView(u,c.mutatedFields);g=t.has(s.key)?null:g;const y=ET(u,g);null!==y&&r.set(s.key,y),u.isValidDocument()||u.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Tt())}isEqual(e){return this.batchId===e.batchId&&mm(this.mutations,e.mutations,(t,r)=>Fh(t,r))&&mm(this.baseMutations,e.baseMutations,(t,r)=>Fh(t,r))}}class Av{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ge(e.mutations.length===r.length);let s=function(){return zR}();const c=e.mutations;for(let u=0;u<c.length;u++)s=s.insert(c[u].key,r[u].version);return new Av(e,t,r,s)}}class F0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class QR{constructor(e,t){this.count=e,this.unchangedNames=t}}var fr,Kt;function DT(n){switch(n){default:return Be();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function TT(n){if(void 0===n)return ur("GRPC error has no .code"),J.UNKNOWN;switch(n){case fr.OK:return J.OK;case fr.CANCELLED:return J.CANCELLED;case fr.UNKNOWN:return J.UNKNOWN;case fr.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case fr.INTERNAL:return J.INTERNAL;case fr.UNAVAILABLE:return J.UNAVAILABLE;case fr.UNAUTHENTICATED:return J.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case fr.NOT_FOUND:return J.NOT_FOUND;case fr.ALREADY_EXISTS:return J.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return J.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case fr.ABORTED:return J.ABORTED;case fr.OUT_OF_RANGE:return J.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return J.UNIMPLEMENTED;case fr.DATA_LOSS:return J.DATA_LOSS;default:return Be()}}(Kt=fr||(fr={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";function AT(){return new TextEncoder}const ZR=new Eu([4294967295,4294967295],0);function ST(n){const e=AT().encode(n),t=new $D;return t.update(e),new Uint8Array(t.digest())}function xv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Eu([t,r],0),new Eu([s,c],0)]}class L0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $u(`Invalid padding: ${t}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new $u(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new $u(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Eu.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(Eu.fromNumber(r)));return 1===s.compare(ZR)&&(s=new Eu([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ST(e),[r,s]=xv(t);for(let c=0;c<this.hashCount;c++){const u=this.de(r,s,c);if(!this.Ae(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new L0(c,s,t);return r.forEach(g=>u.insert(g)),u}insert(e){if(0===this.Te)return;const t=ST(e),[r,s]=xv(t);for(let c=0;c<this.hashCount;c++){const u=this.de(r,s,c);this.Re(u)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bh{constructor(e,t,r,s,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Uh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Bh(Ze.min(),s,new ln(gt),so(),Tt())}}class Uh{constructor(e,t,r,s,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Uh(r,t,Tt(),Tt(),Tt())}}class Sm{constructor(e,t,r,s){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=s}}class xT{constructor(e,t){this.targetId=e,this.fe=t}}class RT{constructor(e,t,r=wr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class MT{constructor(){this.ge=0,this.pe=kT(),this.ye=wr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Tt(),t=Tt(),r=Tt();return this.pe.forEach((s,c)=>{switch(c){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Be()}}),new Uh(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=kT()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ge(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class XR{constructor(e){this.Le=e,this.ke=new Map,this.qe=so(),this.Qe=PT(),this.Ke=new ln(gt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:Be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.fe.count,s=this.Ye(t);if(s){const c=s.target;if(Ua(c))if(0===r){const u=new Pe(c.path);this.We(t,u,Sn.newNoDocument(u,Ze.min()))}else Ge(1===r);else{const u=this.Ze(t);if(u!==r){const g=this.Xe(e),y=g?this.et(g,e,u):1;0!==y&&(this.He(t),this.Ke=this.Ke.insert(t,2===y?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:c=0}=t;let u,g;try{u=ds(r).toUint8Array()}catch(y){if(y instanceof m0)return to("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new L0(u,s,c)}catch(y){return to(y instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return 0===g.Te?null:g}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(c=>{const u=this.Le.nt(),g=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.We(t,c,null),s++)}),s}it(e){const t=new Map;this.ke.forEach((c,u)=>{const g=this.Ye(u);if(g){if(c.current&&Ua(g.target)){const y=new Pe(g.target.path);null!==this.qe.get(y)||this.st(u,y)||this.We(u,y,Sn.newNoDocument(y,e))}c.De&&(t.set(u,c.ve()),c.Fe())}});let r=Tt();this.Qe.forEach((c,u)=>{let g=!0;u.forEachWhile(y=>{const w=this.Ye(y);return!w||"TargetPurposeLimboResolution"===w.purpose||(g=!1,!1)}),g&&(r=r.add(c))}),this.qe.forEach((c,u)=>u.setReadTime(e));const s=new Bh(e,t,this.Ke,this.qe,r);return this.qe=so(),this.Qe=PT(),this.Ke=new ln(gt),s}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,t)?s.Me(t,1):s.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new MT,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ot(gt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new MT),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function PT(){return new ln(Pe.comparator)}function kT(){return new ln(Pe.comparator)}const JR={asc:"ASCENDING",desc:"DESCENDING"},eM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V0={and:"AND",or:"OR"};class tM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function B0(n,e){return n.useProto3Json||uv(e)?e:{value:e}}function il(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Rv(n,e){return il(n,e.toTimestamp())}function Nn(n){return Ge(!!n),Ze.fromTimestamp(function(t){const r=Jc(t);return new On(r.seconds,r.nanos)}(n))}function xm(n,e){return Mv(n,e).canonicalString()}function Mv(n,e){const t=(s=n,new Ut(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===e?t:t.child(e)}function NT(n){const e=Ut.fromString(n);return Ge(Hu(e)),e}function Rm(n,e){return xm(n.databaseId,e.path)}function na(n,e){const t=NT(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(U0(t))}function Mm(n,e){return xm(n.databaseId,e)}function Pm(n){const e=NT(n);return 4===e.length?Ut.emptyPath():U0(e)}function Pv(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function U0(n){return Ge(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function FT(n,e,t){return{name:Rm(n,e),fields:t.value.mapValue.fields}}function LT(n,e,t){const r=na(n,e.name),s=Nn(e.updateTime),c=e.createTime?Nn(e.createTime):Ze.min(),u=new qr({mapValue:{fields:e.fields}}),g=Sn.newFoundDocument(r,s,c,u);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function jh(n,e){let t;if(e instanceof Lh)t={update:FT(n,e.key,e.value)};else if(e instanceof ju)t={delete:Rm(n,e.key)};else if(e instanceof ta)t={update:FT(n,e.key,e.data),updateMask:oM(e.fieldMask)};else{if(!(e instanceof Vh))return Be();t={verify:Rm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(c,u){const g=u.transform;if(g instanceof Dm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof $a)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ha)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Oi)return{fieldPath:u.field.canonicalString(),increment:g.Ie};throw Be()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Rv(n,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Be()),t;var c}function za(n,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?xn.updateTime(Nn(c.updateTime)):void 0!==c.exists?xn.exists(c.exists):xn.none():xn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,g){let y=null;"setToServerValue"in g?(Ge("REQUEST_TIME"===g.setToServerValue),y=new Dm):"appendMissingElements"in g?y=new $a(g.appendMissingElements.values||[]):"removeAllFromArray"in g?y=new Ha(g.removeAllFromArray.values||[]):"increment"in g?y=new Oi(u,g.increment):Be();const w=En.fromServerFormat(g.fieldPath);return new Wi(w,y)}(n,s)):[];var c;if(e.update){const s=na(n,e.update.name),c=new qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new _i((e.updateMask.fieldPaths||[]).map(D=>En.fromServerFormat(D)));return new ta(s,c,u,t,r)}return new Lh(s,c,t,r)}if(e.delete){const s=na(n,e.delete);return new ju(s,t)}if(e.verify){const s=na(n,e.verify);return new Vh(s,t)}return Be()}function BT(n,e){return{documents:[Mm(n,e.path)]}}function ol(n,e){const t={structuredQuery:{}},r=e.path;let s;null!==e.collectionGroup?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Mm(n,s);const c=function(w){if(0!==w.length)return $T(un.create(w,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:ao((M=D).field),direction:UT(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const g=B0(n,e.limit);return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(w=e.startAt).inclusive,values:w.position}),e.endAt&&(t.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),{ut:t,parent:s};var w}function rM(n){let e=Pm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ge(1===r);const D=t.from[0];D.allDescendants?s=D.collectionId:e=e.child(D.collectionId)}let c=[];t.where&&(c=function(A){const M=iM(A);return M instanceof un&&vv(M)?M.getFilters():[M]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(M=>{return new Em($h((X=M).field),function(de){switch(de){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(X.direction));var X}));let g=null;t.limit&&(g=function(A){let M;return M="object"==typeof A?A.value:A,uv(M)?null:M}(t.limit));let y=null;var A;t.startAt&&(y=new tl((A=t.startAt).values||[],!!A.before));let w=null;return t.endAt&&(w=function(A){return new tl(A.values||[],!A.before)}(t.endAt)),T0(e,s,u,c,g,"F",y,w)}function iM(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=$h(t.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$h(t.unaryFilter.field);return Ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$h(t.unaryFilter.field);return Ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=$h(t.unaryFilter.field);return Ht.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Be()}}(n):void 0!==n.fieldFilter?Ht.create($h((t=n).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Be()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return un.create(t.compositeFilter.filters.map(r=>iM(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Be()}}(t.compositeFilter.op))}(n):Be();var t}function UT(n){return JR[n]}function jT(n){return eM[n]}function Ok(n){return V0[n]}function ao(n){return{fieldPath:n.canonicalString()}}function $h(n){return En.fromServerFormat(n.fieldPath)}function $T(n){return n instanceof Ht?function(t){if("=="===t.op){if(aT(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NAN"}};if(_0(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(aT(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NAN"}};if(_0(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(t.field),op:jT(t.op),value:t.value}}}(n):n instanceof un?function(t){const r=t.getFilters().map(s=>$T(s));return 1===r.length?r[0]:{compositeFilter:{op:Ok(t.op),filters:r}}}(n):Be()}function oM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Hu(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ga{constructor(e,t,r,s,c=Ze.min(),u=Ze.min(),g=wr.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new Ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class km{constructor(e){this.ct=e}}function Ni(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Om(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Rm(c=n.ct,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:il(c,u.version.toTimestamp()),createTime:il(c,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:sl(e.version)};else{if(!e.isUnknownDocument())return Be();r.unknownDocument={path:t.path.toArray(),version:sl(e.version)}}var c,u;return r}function Om(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function sl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zu(n){const e=new On(n.seconds,n.nanoseconds);return Ze.fromTimestamp(e)}function al(n,e){const t=(e.baseMutations||[]).map(c=>za(n.ct,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const r=e.mutations.map(c=>za(n.ct,c)),s=On.fromMillis(e.localWriteTimeMs);return new N0(e.batchId,s,t,r)}function Hh(n){const e=zu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?zu(n.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=void 0!==n.query.documents?(Ge(1===(c=n.query).documents.length),vi(Fu(Pm(c.documents[0])))):function(c){return vi(rM(c))}(n.query),new Ga(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken));var c}function H0(n,e){const t=sl(e.snapshotVersion),r=sl(e.lastLimboFreeSnapshotVersion);let s;s=Ua(e.target)?BT(n.ct,e.target):ol(n.ct,e.target).ut;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:No(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Ov(n){const e=rM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Vu(e,e.limit,"L"):e}function z0(n,e){return new F0(e.largestBatchId,za(n.ct,e.overlayMutation))}function HT(n,e){const t=e.path.lastSegment();return[n,gi(e.path.popLast()),t]}function zT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:sl(r.readTime),documentKey:gi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Nm{getBundleMetadata(e,t){return GT(e).get(t).next(r=>{if(r)return{id:(c=r).bundleId,createTime:zu(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return GT(e).put({bundleId:(s=t).id,createTime:sl(Nn(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return WT(e).get(t).next(r=>{if(r)return{name:(c=r).name,query:Ov(c.bundledQuery),readTime:zu(c.readTime)};var c})}saveNamedQuery(e,t){return WT(e).put({name:(s=t).name,readTime:sl(Nn(s.readTime)),bundledQuery:s.bundledQuery});var s}}function GT(n){return Er(n,"bundles")}function WT(n){return Er(n,"namedQueries")}class Nv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new Nv(e,t.uid||"")}getOverlay(e,t){return cl(e).get(HT(this.userId,t)).next(r=>r?z0(this.serializer,r):null)}getOverlays(e,t){const r=ea();return q.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((c,u)=>{const g=new F0(t,u);s.push(this.ht(e,g))}),q.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(u=>s.add(gi(u.getCollectionPath())));const c=[];return s.forEach(u=>{const g=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);c.push(cl(e).H("collectionPathOverlayIndex",g))}),q.waitFor(c)}getOverlaysForCollection(e,t,r){const s=ea(),c=gi(t),u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return cl(e).W("collectionPathOverlayIndex",u).next(g=>{for(const y of g){const w=z0(this.serializer,y);s.set(w.getKey(),w)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const c=ea();let u;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cl(e).Y({index:"collectionGroupOverlayIndex",range:g},(y,w,D)=>{const A=z0(this.serializer,w);c.size()<s||A.largestBatchId===u?(c.set(A.getKey(),A),u=A.largestBatchId):D.done()}).next(()=>c)}ht(e,t){return cl(e).put(function(s,c,u){const[g,y,w]=HT(c,u.mutation.key);return{userId:c,collectionPath:y,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:jh(s.ct,u.mutation)}}(this.serializer,this.userId,t))}}function cl(n){return Er(n,"documentOverlays")}class ll{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(An(e.integerValue));else if("doubleValue"in e){const r=An(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Su(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ds(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?_v(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Be()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const s of Object.keys(r))this.Rt(s,t),this.It(r[s],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const s of r)this.It(s,t)}gt(e,t){this.Et(t,37),Pe.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function qT(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function G0(n){const e=64-function(r){let s=0;for(let c=0;c<8;++c){const u=qT(255&r[c]);if(s+=u,8!==u)break}return s}(n);return Math.ceil(e/8)}ll.bt=new ll;class sM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const s=t.codePointAt(0);this.Ct(240|s>>>18),this.Ct(128|63&s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const s=t.codePointAt(0);this.Mt(240|s>>>18),this.Mt(128|63&s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s)}}this.xt()}Bt(e){const t=this.Lt(e),r=G0(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}qt(e){const t=this.Lt(e),r=G0(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(c){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,c,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Fm{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Lm{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Vm{constructor(){this.Gt=new sM,this.zt=new Fm(this.Gt),this.jt=new Lm(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Gu{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gu(this.indexId,this.documentKey,this.arrayValue,r)}}function ul(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=W0(n.arrayValue,e.arrayValue),0!==t?t:(t=W0(n.directionalValue,e.directionalValue),0!==t?t:Pe.comparator(n.documentKey,e.documentKey)))}function W0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class q0{constructor(e){this.Yt=new Ot((t,r)=>En.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Ge(e.collectionGroup===this.collectionId),this.en)return!1;const t=WD(e);if(void 0!==t&&!this.nn(t))return!1;const r=Tu(e);let s=new Set,c=0,u=0;for(;c<r.length&&this.nn(r[c]);++c)s=s.add(r[c].fieldPath.canonicalString());if(c===r.length)return!0;if(this.Yt.size>0){const g=this.Yt.getIterator().getNext();if(!s.has(g.field.canonicalString())){const y=r[c];if(!this.rn(g,y)||!this.sn(this.Zt[u++],y))return!1}++c}for(;c<r.length;++c)if(u>=this.Zt.length||!this.sn(this.Zt[u++],r[c]))return!1;return!0}on(){if(this.en)return null;let e=new Ot(En.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Na(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Na(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Na(r.field,"asc"===r.dir?0:1)));return new Du(Du.UNKNOWN_ID,this.collectionId,t,vh.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Y0(n){var e,t;if(Ge(n instanceof Ht||n instanceof un),n instanceof Ht){if(n instanceof ku){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>Ht.create(n.field,"==",c)))||[];return un.create(s,"or")}return n}const r=n.filters.map(s=>Y0(s));return un.create(r,n.op)}function aM(n){if(0===n.getFilters().length)return[];const e=KT(Y0(n));return Ge(YT(e)),Fv(e)||K0(e)?[e]:e.getFilters()}function Fv(n){return n instanceof Ht}function K0(n){return n instanceof un&&vv(n)}function YT(n){return Fv(n)||K0(n)||function(t){if(t instanceof un&&b0(t)){for(const r of t.getFilters())if(!Fv(r)&&!K0(r))return!1;return!0}return!1}(n)}function KT(n){if(Ge(n instanceof Ht||n instanceof un),n instanceof Ht)return n;if(1===n.filters.length)return KT(n.filters[0]);const e=n.filters.map(r=>KT(r));let t=un.create(e,n.op);return t=Q0(t),YT(t)?t:(Ge(t instanceof un),Ge(Mh(t)),Ge(t.filters.length>1),t.filters.reduce((r,s)=>QT(r,s)))}function QT(n,e){let t;return Ge(n instanceof Ht||n instanceof un),Ge(e instanceof Ht||e instanceof un),t=n instanceof Ht?e instanceof Ht?un.create([n,e],"and"):cM(n,e):e instanceof Ht?cM(e,n):function(s,c){if(Ge(s.filters.length>0&&c.filters.length>0),Mh(s)&&Mh(c))return pT(s,c.getFilters());const u=b0(s)?s:c,g=b0(s)?c:s,y=u.filters.map(w=>QT(w,g));return un.create(y,"or")}(n,e),Q0(t)}function cM(n,e){if(Mh(e))return pT(e,n.getFilters());{const t=e.filters.map(r=>QT(n,r));return un.create(t,"or")}}function Q0(n){if(Ge(n instanceof Ht||n instanceof un),n instanceof Ht)return n;const e=n.getFilters();if(1===e.length)return Q0(e[0]);if(I0(n))return n;const t=e.map(s=>Q0(s)),r=[];return t.forEach(s=>{s instanceof Ht?r.push(s):s instanceof un&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:un.create(r,n.op)}class ZT{constructor(){this._n=new zh}addToCollectionParentIndex(e,t){return this._n.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(no.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(no.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class zh{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ot(Ut.comparator),c=!s.has(r);return this.index[t]=s.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ot(Ut.comparator)).toArray()}}const Lv=new Uint8Array(0);class lM{constructor(e,t){this.databaseId=t,this.an=new zh,this.un=new ps(r=>No(r),(r,s)=>Xs(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const c={collectionId:r,parent:gi(s)};return Z0(e).put(c)}return q.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[GD(t),""],!1,!0);return Z0(e).W(s).next(c=>{for(const u of c){if(u.collectionId!==t)break;r.push(La(u.parent))}return r})}addFieldIndex(e,t){const r=Bm(e),s={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var g;delete s.indexId;const c=r.add(s);if(t.indexState){const u=Gh(e);return c.next(g=>{u.put(zT(g,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=Bm(e),s=Gh(e),c=ra(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Bm(e),r=ra(e),s=Gh(e);return t.H().next(()=>r.H()).next(()=>s.H())}createTargetIndexes(e,t){return q.forEach(this.cn(t),r=>this.getIndexType(e,r).next(s=>{if(0===s||1===s){const c=new q0(r).on();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,t){const r=ra(e);let s=!0;const c=new Map;return q.forEach(this.cn(t),u=>this.ln(e,u).next(g=>{s&&(s=!!g),c.set(u,g)})).next(()=>{if(s){let u=Tt();const g=[];return q.forEach(c,(y,w)=>{var De;ve("IndexedDbIndexManager",`Using index ${De=y,`id=${De.indexId}|cg=${De.collectionGroup}|f=${De.fields.map(We=>`${We.fieldPath}:${We.kind}`).join(",")}`} to execute ${No(t)}`);const D=function(De,We){const _t=WD(We);if(void 0===_t)return null;for(const Qt of ja(De,_t.fieldPath))switch(Qt.op){case"array-contains-any":return Qt.value.arrayValue.values||[];case"array-contains":return[Qt.value]}return null}(w,y),A=function(De,We){const _t=new Map;for(const Qt of Tu(We))for(const Dr of ja(De,Qt.fieldPath))switch(Dr.op){case"==":case"in":_t.set(Qt.fieldPath.canonicalString(),Dr.value);break;case"not-in":case"!=":return _t.set(Qt.fieldPath.canonicalString(),Dr.value),Array.from(_t.values())}return null}(w,y),M=function(De,We){const _t=[];let Qt=!0;for(const Dr of Tu(We)){const ca=0===Dr.kind?Ou(De,Dr.fieldPath,De.startAt):Nu(De,Dr.fieldPath,De.startAt);_t.push(ca.value),Qt&&(Qt=ca.inclusive)}return new tl(_t,Qt)}(w,y),N=function(De,We){const _t=[];let Qt=!0;for(const Dr of Tu(We)){const ca=0===Dr.kind?Nu(De,Dr.fieldPath,De.endAt):Ou(De,Dr.fieldPath,De.endAt);_t.push(ca.value),Qt&&(Qt=ca.inclusive)}return new tl(_t,Qt)}(w,y),X=this.hn(y,w,M),re=this.hn(y,w,N),de=this.Pn(y,w,A),we=this.In(y.indexId,D,X,M.inclusive,re,N.inclusive,de);return q.forEach(we,He=>r.j(He,t.limit).next(De=>{De.forEach(We=>{const _t=Pe.fromSegments(We.documentKey);u.has(_t)||(u=u.add(_t),g.push(_t))})}))}).next(()=>g)}return q.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:aM(un.create(e.filters,"and")).map(r=>nl(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,s,c,u,g){const y=(null!=t?t.length:1)*Math.max(r.length,c.length),w=y/(null!=t?t.length:1),D=[];for(let A=0;A<y;++A){const M=t?this.Tn(t[A/w]):Lv,N=this.En(e,M,r[A%w],s),X=this.dn(e,M,c[A%w],u),re=g.map(de=>this.En(e,M,de,!0));D.push(...this.createRange(N,X,re))}return D}En(e,t,r,s){const c=new Gu(e,Pe.empty(),t,r);return s?c:c.Jt()}dn(e,t,r,s){const c=new Gu(e,Pe.empty(),t,r);return s?c.Jt():c}ln(e,t){const r=new q0(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(c=>{let u=null;for(const g of c)r.tn(g)&&(!u||g.fields.length>u.fields.length)&&(u=g);return u})}getIndexType(e,t){let r=2;const s=this.cn(t);return q.forEach(s,c=>this.ln(e,c).next(u=>{u?0!==r&&u.fields.length<function(y){let w=new Ot(En.comparator),D=!1;for(const A of y.filters)for(const M of A.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?D=!0:w=w.add(M.field));for(const A of y.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(D?1:0)}(c)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}An(e,t){const r=new Vm;for(const s of Tu(e)){const c=t.data.field(s.fieldPath);if(null==c)return null;const u=r.Ht(s.kind);ll.bt.Pt(c,u)}return r.Wt()}Tn(e){const t=new Vm;return ll.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Vm;return ll.bt.Pt(Mu(this.databaseId,t),r.Ht(function(c){const u=Tu(c);return 0===u.length?0:u[u.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let s=[];s.push(new Vm);let c=0;for(const u of Tu(e)){const g=r[c++];for(const y of s)if(this.Vn(t,u.fieldPath)&&Rh(g))s=this.mn(s,u,g);else{const w=y.Ht(u.kind);ll.bt.Pt(g,w)}}return this.fn(s)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const s=[...e],c=[];for(const u of r.arrayValue.values||[])for(const g of s){const y=new Vm;y.seed(g.Wt()),ll.bt.Pt(u,y.Ht(t.kind)),c.push(y)}return c}Vn(e,t){return!!e.filters.find(r=>r instanceof Ht&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Bm(e),s=Gh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(c=>{const u=[];return q.forEach(c,g=>s.get([g.indexId,this.uid]).next(y=>{u.push(function(D,A){const M=A?new vh(A.sequenceNumber,new no(zu(A.readTime),new Pe(La(A.documentKey)),A.largestBatchId)):vh.empty(),N=D.fields.map(([X,re])=>new Na(En.fromServerFormat(X),re));return new Du(D.indexId,D.collectionGroup,N,M)}(g,y))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const c=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==c?c:gt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Bm(e),c=Gh(e);return this.gn(e).next(u=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>q.forEach(g,y=>c.put(zT(y.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(s,c)=>{const u=r.get(s.collectionGroup);return(u?q.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),q.forEach(g,y=>this.pn(e,s,y).next(w=>{const D=this.yn(c,y);return w.isEqual(D)?q.resolve():this.wn(e,c,y,w,D)}))))})}Sn(e,t,r,s){return ra(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,s){return ra(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const s=ra(e);let c=new Ot(ul);return s.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(u,g)=>{c=c.add(new Gu(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>c)}yn(e,t){let r=new Ot(ul);const s=this.An(t,e);if(null==s)return r;const c=WD(t);if(null!=c){const u=e.data.field(c.fieldPath);if(Rh(u))for(const g of u.arrayValue.values||[])r=r.add(new Gu(t.indexId,e.key,this.Tn(g),s))}else r=r.add(new Gu(t.indexId,e.key,Lv,s));return r}wn(e,t,r,s,c){ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(y,w,D,A,M){const N=y.getIterator(),X=w.getIterator();let re=Dh(N),de=Dh(X);for(;re||de;){let we=!1,He=!1;if(re&&de){const De=D(re,de);De<0?He=!0:De>0&&(we=!0)}else null!=re?He=!0:we=!0;we?(A(de),de=Dh(X)):He?(M(re),re=Dh(N)):(re=Dh(N),de=Dh(X))}}(s,c,ul,g=>{u.push(this.Sn(e,t,r,g))},g=>{u.push(this.bn(e,t,r,g))}),q.waitFor(u)}gn(e){let t=1;return Gh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,c)=>{c.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,g)=>ul(u,g)).filter((u,g,y)=>!g||0!==ul(u,y[g-1]));const s=[];s.push(e);for(const u of r){const g=ul(u,e),y=ul(u,t);if(0===g)s[0]=e.Jt();else if(g>0&&y<0)s.push(u),s.push(u.Jt());else if(y>0)break}s.push(t);const c=[];for(let u=0;u<s.length;u+=2){if(this.Dn(s[u],s[u+1]))return[];c.push(IDBKeyRange.bound([s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,Lv,[]],[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,Lv,[]]))}return c}Dn(e,t){return ul(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(XT)}getMinOffset(e,t){return q.mapArray(this.cn(t),r=>this.ln(e,r).next(s=>s||Be())).next(XT)}}function Z0(n){return Er(n,"collectionParents")}function ra(n){return Er(n,"indexEntries")}function Bm(n){return Er(n,"indexConfiguration")}function Gh(n){return Er(n,"indexState")}function XT(n){Ge(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;u0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new no(e.readTime,e.documentKey,t)}const JT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fi(e,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eA(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),c=[],u=IDBKeyRange.only(t.batchId);let g=0;const y=r.Y({range:u},(D,A,M)=>(g++,M.delete()));c.push(y.next(()=>{Ge(1===g)}));const w=[];for(const D of t.mutations){const A=Eh(e,D.key.path,t.batchId);c.push(s.delete(A)),w.push(D.key)}return q.waitFor(c).next(()=>w)}function Um(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Be();e=n.noDocument}return JSON.stringify(e).length}Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(41943040,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);class Vv{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Cn={}}static lt(e,t,r,s){Ge(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Vv(c,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lo(e).Y({index:"userMutationsIndex",range:r},(s,c,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const c=Wh(e),u=Lo(e);return u.add({}).next(g=>{Ge("number"==typeof g);const y=new N0(g,t,r,s),w=function(N,X,re){const de=re.baseMutations.map(He=>jh(N.ct,He)),we=re.mutations.map(He=>jh(N.ct,He));return{userId:X,batchId:re.batchId,localWriteTimeMs:re.localWriteTime.toMillis(),baseMutations:de,mutations:we}}(this.serializer,this.userId,y),D=[];let A=new Ot((M,N)=>gt(M.canonicalString(),N.canonicalString()));for(const M of s){const N=Eh(this.userId,M.key.path,g);A=A.add(M.key.path.popLast()),D.push(u.put(w)),D.push(c.put(N,rr))}return A.forEach(M=>{D.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.Cn[g]=y.keys()}),q.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return Lo(e).get(t).next(r=>r?(Ge(r.userId===this.userId),al(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?q.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Cn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Lo(e).Y({index:"userMutationsIndex",range:s},(u,g,y)=>{g.userId===this.userId&&(Ge(g.batchId>=r),c=al(this.serializer,g)),y.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Lo(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(s,c,u)=>{r=c.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lo(e).W("userMutationsIndex",t).next(r=>r.map(s=>al(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=io(this.userId,t.path),s=IDBKeyRange.lowerBound(r),c=[];return Wh(e).Y({range:s},(u,g,y)=>{const[w,D,A]=u,M=La(D);if(w===this.userId&&t.path.isEqual(M))return Lo(e).get(A).next(N=>{if(!N)throw Be();Ge(N.userId===this.userId),c.push(al(this.serializer,N))});y.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot(gt);const s=[];return t.forEach(c=>{const u=io(this.userId,c.path),g=IDBKeyRange.lowerBound(u),y=Wh(e).Y({range:g},(w,D,A)=>{const[M,N,X]=w,re=La(N);M===this.userId&&c.path.isEqual(re)?r=r.add(X):A.done()});s.push(y)}),q.waitFor(s).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,c=io(this.userId,r),u=IDBKeyRange.lowerBound(c);let g=new Ot(gt);return Wh(e).Y({range:u},(y,w,D)=>{const[A,M,N]=y,X=La(M);A===this.userId&&r.isPrefixOf(X)?X.length===s&&(g=g.add(N)):D.done()}).next(()=>this.Fn(e,g))}Fn(e,t){const r=[],s=[];return t.forEach(c=>{s.push(Lo(e).get(c).next(u=>{if(null===u)throw Be();Ge(u.userId===this.userId),r.push(al(this.serializer,u))}))}),q.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return eA(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),q.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),s=[];return Wh(e).Y({range:r},(c,u,g)=>{if(c[0]===this.userId){const y=La(c[1]);s.push(y)}else g.done()}).next(()=>{Ge(0===s.length)})})}containsKey(e,t){return tA(e,this.userId,t)}xn(e){return X0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tA(n,e,t){const r=io(e,t.path),s=r[1],c=IDBKeyRange.lowerBound(r);let u=!1;return Wh(n).Y({range:c,J:!0},(g,y,w)=>{const[D,A,M]=g;D===e&&A===s&&(u=!0),w.done()}).next(()=>u)}function Lo(n){return Er(n,"mutations")}function Wh(n){return Er(n,"documentMutations")}function X0(n){return Er(n,"mutationQueues")}class Wu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Wu(0)}static Bn(){return new Wu(-1)}}class nA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next(t=>{const r=new Wu(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(t=>Ze.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ln(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.kn(e,s)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qh(e).delete(t.targetId)).next(()=>this.Ln(e)).next(r=>(Ge(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let s=0;const c=[];return qh(e).Y((u,g)=>{const y=Hh(g);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(s++,c.push(this.removeTargetData(e,y)))}).next(()=>q.waitFor(c)).next(()=>s)}forEachTarget(e,t){return qh(e).Y((r,s)=>{const c=Hh(s);t(c)})}Ln(e){return J0(e).get("targetGlobalKey").next(t=>(Ge(null!==t),t))}kn(e,t){return J0(e).put("targetGlobalKey",t)}qn(e,t){return qh(e).put(H0(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(t=>t.targetCount)}getTargetData(e,t){const r=No(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return qh(e).Y({range:s,index:"queryTargetsIndex"},(u,g,y)=>{const w=Hh(g);Xs(t,w.target)&&(c=w,y.done())}).next(()=>c)}addMatchingKeys(e,t,r){const s=[],c=dl(e);return t.forEach(u=>{const g=gi(u.path);s.push(c.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,u))}),q.waitFor(s)}removeMatchingKeys(e,t,r){const s=dl(e);return q.forEach(t,c=>{const u=gi(c.path);return q.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=dl(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=dl(e);let c=Tt();return s.Y({range:r,J:!0},(u,g,y)=>{const w=La(u[1]),D=new Pe(w);c=c.add(D)}).next(()=>c)}containsKey(e,t){const r=gi(t.path),s=IDBKeyRange.bound([r],[GD(r)],!1,!0);let c=0;return dl(e).Y({index:"documentTargetsIndex",J:!0,range:s},([u,g],y,w)=>{0!==u&&(c++,w.done())}).next(()=>c>0)}_t(e,t){return qh(e).get(t).next(r=>r?Hh(r):null)}}function qh(n){return Er(n,"targets")}function J0(n){return Er(n,"targetGlobal")}function dl(n){return Er(n,"targetDocuments")}function Bv([n,e],[t,r]){const s=gt(n,t);return 0===s?gt(e,r):s}class uM{constructor(e){this.Kn=e,this.buffer=new Ot(Bv),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Bv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.c)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Fa(r)?ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Xc(r)}yield t.zn(3e5)}))}}class rA{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return q.resolve(ro._e);const r=new uM(t);return this.jn.forEachTarget(e,s=>r.Wn(s.sequenceNumber)).next(()=>this.jn.Jn(e,s=>r.Wn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(JT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JT):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,s,c,u,g,y,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),s=this.params.maximumSequenceNumbersToCollect):s=A,u=Date.now(),this.nthSequenceNumber(e,s))).next(A=>(r=A,g=Date.now(),this.removeTargets(e,r,t))).next(A=>(c=A,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),fm()<=$s.Ge.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-D}ms\n\tDetermined least recently used ${s} in `+(g-u)+`ms\n\tRemoved ${c} targets in `+(y-g)+`ms\n\tRemoved ${A} documents in `+(w-y)+`ms\nTotal Duration: ${w-D}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:c,documentsRemoved:A})))}}class dM{constructor(e,t){this.db=e,this.garbageCollector=function iA(n,e){return new rA(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,s)=>t(s))}addReference(e,t,r){return Uv(e,r)}removeReference(e,t,r){return Uv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Uv(e,t)}er(e,t){return function(s,c){let u=!1;return X0(s).Z(g=>tA(s,g,c).next(y=>(y&&(u=!0),q.resolve(!y)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let c=0;return this.Xn(e,(u,g)=>{if(g<=t){const y=this.er(e,u).next(w=>{if(!w)return c++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ze.min()),dl(e).delete([0,gi(u.path)])))});s.push(y)}}).next(()=>q.waitFor(s)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Uv(e,t)}Xn(e,t){const r=dl(e);let s,c=ro._e;return r.Y({index:"documentTargetsIndex"},([u,g],{path:y,sequenceNumber:w})=>{0===u?(c!==ro._e&&t(new Pe(La(s)),c),c=w,s=y):c=ro._e}).next(()=>{c!==ro._e&&t(new Pe(La(s)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uv(n,e){return dl(n).put((s=n.currentSequenceNumber,{targetId:0,path:gi(e.path),sequenceNumber:s}));var s}class jv{constructor(){this.changes=new ps(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qu(e).put(r)}removeEntry(e,t,r){return qu(e).delete(function(c,u){const g=c.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],Om(u),g[g.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Sn.newInvalidDocument(t);return qu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jm(t))},(s,c)=>{r=this.nr(t,c)}).next(()=>r)}rr(e,t){let r={size:0,document:Sn.newInvalidDocument(t)};return qu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jm(t))},(s,c)=>{r={document:this.nr(t,c),size:Um(c)}}).next(()=>r)}getEntries(e,t){let r=so();return this.ir(e,t,(s,c)=>{const u=this.nr(s,c);r=r.insert(s,u)}).next(()=>r)}sr(e,t){let r=so(),s=new ln(Pe.comparator);return this.ir(e,t,(c,u)=>{const g=this.nr(c,u);r=r.insert(c,g),s=s.insert(c,Um(u))}).next(()=>({documents:r,_r:s}))}ir(e,t,r){if(t.isEmpty())return q.resolve();let s=new Ot(aA);t.forEach(y=>s=s.add(y));const c=IDBKeyRange.bound(jm(s.first()),jm(s.last())),u=s.getIterator();let g=u.getNext();return qu(e).Y({index:"documentKeyIndex",range:c},(y,w,D)=>{const A=Pe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;g&&aA(g,A)<0;)r(g,null),g=u.getNext();g&&g.isEqual(A)&&(r(g,w),g=u.hasNext()?u.getNext():null),g?D.U(jm(g)):D.done()}).next(()=>{for(;g;)r(g,null),g=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,c){const u=t.path,g=[u.popLast().toArray(),u.lastSegment(),Om(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],y=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qu(e).W(IDBKeyRange.bound(g,y,!0)).next(w=>{c?.incrementDocumentReadCount(w.length);let D=so();for(const A of w){const M=this.nr(Pe.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);M.isFoundDocument()&&(Bu(t,M)||s.has(M.key))&&(D=D.insert(M.key,M))}return D})}getAllFromCollectionGroup(e,t,r,s){let c=so();const u=sA(t,r),g=sA(t,no.max());return qu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,g,!0)},(y,w,D)=>{const A=this.nr(Pe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);c=c.insert(A.key,A),c.size===s&&D.done()}).next(()=>c)}newChangeBuffer(e){return new fM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oA(e).get("remoteDocumentGlobalKey").next(t=>(Ge(!!t),t))}tr(e,t){return oA(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function kv(n,e){let t;if(e.document)t=LT(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Pe.fromSegments(e.noDocument.path),s=zu(e.noDocument.readTime);t=Sn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Be();{const r=Pe.fromSegments(e.unknownDocument.path),s=zu(e.unknownDocument.version);t=Sn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const c=new On(s[0],s[1]);return Ze.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ze.min()))return r}return Sn.newInvalidDocument(e)}}function tE(n){return new hM(n)}class fM extends jv{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ps(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Ot((c,u)=>gt(c.canonicalString(),u.canonicalString()));return this.changes.forEach((c,u)=>{const g=this.ur.get(c);if(t.push(this.ar.removeEntry(e,c,g.readTime)),u.isValidDocument()){const y=Ni(this.ar.serializer,u);s=s.add(c.path.popLast());const w=Um(y);r+=w-g.size,t.push(this.ar.addEntry(e,c,y))}else if(r-=g.size,this.trackRemovals){const y=Ni(this.ar.serializer,u.convertToNoDocument(Ze.min()));t.push(this.ar.addEntry(e,c,y))}}),s.forEach(c=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.ar.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:s})=>(s.forEach((c,u)=>{this.ur.set(c,{size:u,readTime:r.get(c).readTime})}),r))}}function oA(n){return Er(n,"remoteDocumentGlobal")}function qu(n){return Er(n,"remoteDocumentsV14")}function jm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sA(n,e){const t=e.documentKey.path.toArray();return[n,Om(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aA(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(s=gt(t[c],r[c]),s)return s;return s=gt(t.length,r.length),s||(s=gt(t[t.length-2],r[r.length-2]),s||gt(t[t.length-1],r[r.length-1]))}class pM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cA{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Am(r.mutation,s,_i.empty(),On.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Tt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Tt()){const s=ea();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(c=>{let u=Cm();return c.forEach((g,y)=>{u=u.insert(g,y.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=ea();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Tt()))}populateOverlays(e,t,r){const s=[];return r.forEach(c=>{t.has(c)||s.push(c)}),this.documentOverlayCache.getOverlays(e,s).next(c=>{c.forEach((u,g)=>{t.set(u,g)})})}computeViews(e,t,r,s){let c=so();const u=Nh(),g=Nh();return t.forEach((y,w)=>{const D=r.get(w.key);s.has(w.key)&&(void 0===D||D.mutation instanceof ta)?c=c.insert(w.key,w):void 0!==D?(u.set(w.key,D.mutation.getFieldMask()),Am(D.mutation,w,D.mutation.getFieldMask(),On.now())):u.set(w.key,_i.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((w,D)=>u.set(w,D)),t.forEach((w,D)=>{var A;return g.set(w,new pM(D,null!==(A=u.get(w))&&void 0!==A?A:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Nh();let s=new ln((u,g)=>u-g),c=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const g of u)g.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let D=r.get(y)||_i.empty();D=g.applyToLocalView(w,D),r.set(y,D);const A=(s.get(g.batchId)||Tt()).add(y);s=s.insert(g.batchId,A)})}).next(()=>{const u=[],g=s.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),w=y.key,D=y.value,A=hr();D.forEach(M=>{if(!c.has(M)){const N=ET(t.get(M),r.get(M));null!==N&&A.set(M,N),c=c.add(M)}}),u.push(this.documentOverlayCache.saveOverlays(e,w,A))}return q.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return Pe.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):yv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s);var u}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(c=>{const u=s-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-c.size):q.resolve(ea());let g=-1,y=c;return u.next(w=>q.forEach(w,(D,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),c.get(D)?q.resolve():this.remoteDocumentCache.getEntry(e,D).next(M=>{y=y.insert(D,M)}))).next(()=>this.populateOverlays(e,w,c)).next(()=>this.computeViews(e,y,w,Tt())).next(D=>({batchId:g,changes:x0(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(r=>{let s=Cm();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const c=t.collectionGroup;let u=Cm();return this.indexManager.getCollectionParents(e,c).next(g=>q.forEach(g,y=>{const w=(A=t,M=y.child(c),new Js(M,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt));var A,M;return this.getDocumentsMatchingCollectionQuery(e,w,r,s).next(D=>{D.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,s))).next(u=>{c.forEach((y,w)=>{const D=w.getKey();null===u.get(D)&&(u=u.insert(D,Sn.newInvalidDocument(D)))});let g=Cm();return u.forEach((y,w)=>{const D=c.get(y);void 0!==D&&Am(D.mutation,w,_i.empty(),On.now()),Bu(t,w)&&(g=g.insert(y,w))}),g})}}class lA{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return q.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(s=t).id,version:s.version,createTime:Nn(s.createTime)}),q.resolve();var s}getNamedQuery(e,t){return q.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(s=t).name,query:Ov(s.bundledQuery),readTime:Nn(s.readTime)}),q.resolve();var s}}class uA{constructor(){this.overlays=new ln(Pe.comparator),this.hr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ea();return q.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,c)=>{this.ht(e,t,c)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.hr.get(r);return void 0!==s&&(s.forEach(c=>this.overlays=this.overlays.remove(c)),this.hr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const s=ea(),c=t.length+1,u=new Pe(t.child("")),g=this.overlays.getIteratorFrom(u);for(;g.hasNext();){const y=g.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===c&&y.largestBatchId>r&&s.set(y.getKey(),y)}return q.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let c=new ln((w,D)=>w-D);const u=this.overlays.getIterator();for(;u.hasNext();){const w=u.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=c.get(w.largestBatchId);null===D&&(D=ea(),c=c.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const g=ea(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,D)=>g.set(w,D)),!(g.size()>=s)););return q.resolve(g)}ht(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const u=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new F0(t,r));let c=this.hr.get(t);void 0===c&&(c=Tt(),this.hr.set(t,c)),this.hr.set(t,c.add(r.key))}}class nE{constructor(){this.Pr=new Ot(Fr.Ir),this.Tr=new Ot(Fr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Fr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Fr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Pe(new Ut([])),r=new Fr(t,e),s=new Fr(t,e+1),c=[];return this.Tr.forEachInRange([r,s],u=>{this.Ar(u),c.push(u.key)}),c}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Pe(new Ut([])),r=new Fr(t,e),s=new Fr(t,e+1);let c=Tt();return this.Tr.forEachInRange([r,s],u=>{c=c.add(u.key)}),c}containsKey(e){const t=new Fr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Pe.comparator(e.key,t.key)||gt(e.pr,t.pr)}static Er(e,t){return gt(e.pr,t.pr)||Pe.comparator(e.key,t.key)}}class dA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ot(Fr.Ir)}checkEmpty(e){return q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const c=this.yr;this.yr++;const u=new N0(c,t,r,s);this.mutationQueue.push(u);for(const g of s)this.wr=this.wr.add(new Fr(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return q.resolve(u)}lookupMutationBatch(e,t){return q.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.br(t+1),c=s<0?0:s;return q.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fr(t,0),s=new Fr(t,Number.POSITIVE_INFINITY),c=[];return this.wr.forEachInRange([r,s],u=>{const g=this.Sr(u.pr);c.push(g)}),q.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot(gt);return t.forEach(s=>{const c=new Fr(s,0),u=new Fr(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([c,u],g=>{r=r.add(g.pr)})}),q.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let c=r;Pe.isDocumentKey(c)||(c=c.child(""));const u=new Fr(new Pe(c),0);let g=new Ot(gt);return this.wr.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===s&&(g=g.add(y.pr)),!0)},u),q.resolve(this.Dr(g))}Dr(e){const t=[];return e.forEach(r=>{const s=this.Sr(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Ge(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return q.forEach(t.mutations,s=>{const c=new Fr(s.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Fr(t,0),s=this.wr.firstAfterOrEqual(r);return q.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return q.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mM{constructor(e){this.vr=e,this.docs=new ln(Pe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),c=s?s.size:0,u=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=so();return t.forEach(s=>{const c=this.docs.get(s);r=r.insert(s,c?c.document.mutableCopy():Sn.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let c=so();const u=t.path,g=new Pe(u.child("")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:w,value:{document:D}}=y.getNext();if(!u.isPrefixOf(w.path))break;w.path.length>u.length+1||u0(YD(D),r)<=0||(s.has(D.key)||Bu(t,D))&&(c=c.insert(D.key,D.mutableCopy()))}return q.resolve(c)}getAllFromCollectionGroup(e,t,r,s){Be()}Fr(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gM(this)}getSize(e){return q.resolve(this.size)}}class gM extends jv{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class rE{constructor(e){this.persistence=e,this.Mr=new ps(t=>No(t),Xs),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.Or=0,this.Nr=new nE,this.targetCount=0,this.Br=Wu.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,s)=>t(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),q.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Wu(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.qn(t),q.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let s=0;const c=[];return this.Mr.forEach((u,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Mr.delete(u),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),q.waitFor(c).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const s=this.persistence.referenceDelegate,c=[];return s&&t.forEach(u=>{c.push(s.markPotentiallyOrphaned(e,u))}),q.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Nr.containsKey(t))}}class $v{constructor(e,t){this.Lr={},this.overlays={},this.kr=new ro(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new rE(this),this.indexManager=new ZT,this.remoteDocumentCache=new mM(r=>this.referenceDelegate.Kr(r)),this.serializer=new km(t),this.$r=new lA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new dA(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const s=new _M(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(c=>this.referenceDelegate.Wr(s).next(()=>c)).toPromise().then(c=>(s.raiseOnCommittedEvent(),c))}Gr(e,t){return q.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class _M extends QD{constructor(e){super(),this.currentSequenceNumber=e}}class Yh{constructor(e){this.persistence=e,this.zr=new nE,this.jr=null}static Hr(e){return new Yh(e)}get Jr(){if(this.jr)return this.jr;throw Be()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),q.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(c=>this.Jr.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Jr,r=>{const s=Pe.fromPath(r);return this.Yr(e,s).next(c=>{c||t.removeEntry(s,Ze.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return q.or([()=>q.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class hA{constructor(e){this.serializer=e}N(e,t,r,s){const c=new _m("createOrUpgrade",t);var y;r<1&&s>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ih,{unique:!0}),y.createObjectStore("documentMutations"),vM(e),function(y){y.createObjectStore("remoteDocuments")}(e));let u=q.resolve();return r<3&&s>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),vM(e)),u=u.next(()=>function(y){const w=y.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(c))),r<4&&s>=4&&(0!==r&&(u=u.next(()=>function(y,w){return w.store("mutations").W().next(D=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ih,{unique:!0});const A=w.store("mutations"),M=D.map(N=>A.put(N));return q.waitFor(M)})}(e,c))),u=u.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(u=u.next(()=>this.Xr(c))),r<6&&s>=6&&(u=u.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.ei(c)))),r<7&&s>=7&&(u=u.next(()=>this.ti(c))),r<8&&s>=8&&(u=u.next(()=>this.ni(e,c))),r<9&&s>=9&&(u=u.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(u=u.next(()=>this.ri(c))),r<11&&s>=11&&(u=u.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(u=u.next(()=>{!function(y){const w=y.createObjectStore("documentOverlays",{keyPath:UR});w.createIndex("collectionPathOverlayIndex",dr,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",vm,{unique:!1})}(e)})),r<13&&s>=13&&(u=u.next(()=>function(y){const w=y.createObjectStore("remoteDocumentsV14",{keyPath:xu});w.createIndex("documentKeyIndex",hv),w.createIndex("collectionGroupIndex",Oo)}(e)).next(()=>this.ii(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(u=u.next(()=>this.si(e,c))),r<15&&s>=15&&(u=u.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:VR}).createIndex("sequenceNumberIndex",BR,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:ir}).createIndex("documentKeyIndex",tT,{unique:!1})}(e))),u}ei(e){let t=0;return e.store("remoteDocuments").Y((r,s)=>{t+=Um(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>q.forEach(s,c=>{const u=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(g=>q.forEach(g,y=>{Ge(y.userId===c.userId);const w=al(this.serializer,y);return eA(e,c.userId,w).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const c=[];return r.Y((u,g)=>{const y=new Ut(u),w=[0,gi(y)];c.push(t.get(w).next(D=>D?q.resolve():t.put({targetId:0,path:gi(y),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>q.waitFor(c))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:eT});const r=t.store("collectionParents"),s=new zh,c=u=>{if(s.add(u)){const g=u.lastSegment(),y=u.popLast();return r.put({collectionId:g,parent:gi(y)})}};return t.store("remoteDocuments").Y({J:!0},(u,g)=>{const y=new Ut(u);return c(y.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([u,g,y],w)=>{const D=La(g);return c(D.popLast())}))}ri(e){const t=e.store("targets");return t.Y((r,s)=>{const c=Hh(s),u=H0(this.serializer,c);return t.put(u)})}ii(e,t){const r=t.store("remoteDocuments"),s=[];return r.Y((c,u)=>{const g=t.store("remoteDocumentsV14"),y=(A=u,A.document?new Pe(Ut.fromString(A.document.name).popFirst(5)):A.noDocument?Pe.fromSegments(A.noDocument.path):A.unknownDocument?Pe.fromSegments(A.unknownDocument.path):Be()).path.toArray(),w={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};var A;s.push(g.put(w))}).next(()=>q.waitFor(s))}si(e,t){const r=t.store("mutations"),s=tE(this.serializer),c=new $v(Yh.Hr,this.serializer.ct);return r.W().next(u=>{const g=new Map;return u.forEach(y=>{var w;let D=null!==(w=g.get(y.userId))&&void 0!==w?w:Tt();al(this.serializer,y).keys().forEach(A=>D=D.add(A)),g.set(y.userId,D)}),q.forEach(g,(y,w)=>{const D=new Ir(w),A=Nv.lt(this.serializer,D),M=c.getIndexManager(D),N=Vv.lt(D,this.serializer,M,c.referenceDelegate);return new cA(s,N,A,M).recalculateAndSaveOverlaysForDocumentKeys(new pv(t,ro._e),y).next()})})}}function vM(n){n.createObjectStore("targetDocuments",{keyPath:wh}).createIndex("documentTargetsIndex",JD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",LR,{unique:!0}),n.createObjectStore("targetGlobal")}const Hv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iE{constructor(e,t,r,s,c,u,g,y,w,D,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=c,this.window=u,this.document=g,this._i=w,this.ai=D,this.ui=A,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=M=>Promise.resolve(),!iE.D())throw new ge(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dM(this,s),this.Ti=t+"main",this.serializer=new km(y),this.Ei=new ko(this.Ti,this.ui,new hA(this.serializer)),this.Qr=new nA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tE(this.serializer),this.$r=new Nm,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===D&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(J.FAILED_PRECONDITION,Hv);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ro(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,he.c)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,he.c)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,he.c)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Fa(e))return ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Kh(e).get("owner").next(t=>q.resolve(this.Si(t)))}bi(e){return Hm(e).delete(this.clientId)}Di(){var e=this;return(0,he.c)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Er(r,"clientMetadata");return s.W().next(c=>{const u=e.vi(c,18e5),g=c.filter(y=>-1===u.indexOf(y));return q.forEach(g,y=>s.delete(y.clientId)).next(()=>g)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?q.resolve(!0):Kh(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new ge(J.FAILED_PRECONDITION,Hv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hm(e).W().next(r=>void 0===this.vi(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.c)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new pv(t,ro._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Bi()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Hm(e).W().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return Vv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Nv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",c=15===(y=this.ui)?nT:14===y?ym:13===y?Ch:12===y?fv:11===y?Ru:void Be();var y;let u;return this.Ei.runTransaction(e,s,c,g=>(u=new pv(g,this.kr?this.kr.next():ro._e),"readwrite-primary"===t?this.gi(u).next(y=>!!y||this.pi(u)).next(y=>{if(!y)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new ge(J.FAILED_PRECONDITION,KD);return r(u)}).next(y=>this.wi(u).next(()=>y)):this.ki(u).next(()=>r(u)))).then(g=>(u.raiseOnCommittedEvent(),g))}ki(e){return Kh(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(J.FAILED_PRECONDITION,Hv)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kh(e).put("owner",t)}static D(){return ko.D()}yi(e){const t=Kh(e);return t.get("owner").next(r=>this.Si(r)?(ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,tn.qk)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kh(n){return Er(n,"owner")}function Hm(n){return Er(n,"clientMetadata")}function zv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=s}static Ki(e,t){let r=Tt(),s=Tt();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:s=s.add(c.doc.key)}return new zm(e,t.fromCache,r,s)}}class fA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oE{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,tn.qk)()?8:ko.v((0,tn.Su)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,s){const c={result:null};return this.ji(e,t).next(u=>{c.result=u}).next(()=>{if(!c.result)return this.Hi(e,t,s,r).next(u=>{c.result=u})}).next(()=>{if(c.result)return;const u=new fA;return this.Ji(e,t,u).next(g=>{if(c.result=g,this.Ui)return this.Yi(e,t,u,g.size)})}).next(()=>c.result)}Yi(e,t,r,s){return r.documentReadCount<this.Wi?(fm()<=$s.Ge.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Oh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),q.resolve()):(fm()<=$s.Ge.DEBUG&&ve("QueryEngine","Query:",Oh(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(fm()<=$s.Ge.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Oh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(t))):q.resolve())}ji(e,t){if(A0(t))return q.resolve(null);let r=vi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Vu(t,null,"F"),r=vi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const u=Tt(...c);return this.zi.getDocuments(e,u).next(g=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.Zi(t,g);return this.Xi(t,w,u,y.readTime)?this.ji(e,Vu(t,null,"F")):this.es(e,w,t,y)}))})))}Hi(e,t,r,s){return A0(t)||s.isEqual(Ze.min())?q.resolve(null):this.zi.getDocuments(e,r).next(c=>{const u=this.Zi(t,c);return this.Xi(t,u,r,s)?q.resolve(null):(fm()<=$s.Ge.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Oh(t)),this.es(e,u,t,gm(s,-1)).next(g=>g))})}Zi(e,t){let r=new Ot(Iv(e));return t.forEach((s,c)=>{Bu(e,c)&&(r=r.add(c))}),r}Xi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(s)>0)}Ji(e,t,r){return fm()<=$s.Ge.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Oh(t)),this.zi.getDocumentsMatchingQuery(e,t,no.min(),r)}es(e,t,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(c=>(t.forEach(u=>{c=c.insert(u.key,u)}),c))}}class pA{constructor(e,t,r,s){this.persistence=e,this.ts=t,this.serializer=s,this.ns=new ln(gt),this.rs=new ps(c=>No(c),Xs),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cA(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function sE(n,e,t,r){return new pA(n,e,t,r)}function aE(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,he.c)(function*(n,e){const t=Re(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(c=>(s=c,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const u=[],g=[];let y=Tt();for(const w of s){u.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}for(const w of c){g.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}return t.localDocuments.getDocuments(r,y).next(w=>({us:w,removedBatchIds:u,addedBatchIds:g}))})})}),Gv.apply(this,arguments)}function cE(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function lE(n,e,t){let r=Tt(),s=Tt();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let u=so();return t.forEach((g,y)=>{const w=c.get(g);y.isFoundDocument()!==w.isFoundDocument()&&(s=s.add(g)),y.isNoDocument()&&y.version.isEqual(Ze.min())?(e.removeEntry(g,y.readTime),u=u.insert(g,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),u=u.insert(g,y)):ve("LocalStore","Ignoring outdated watch update for ",g,". Current version:",w.version," Watch version:",y.version)}),{cs:u,ls:s}})}function _A(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Yu(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Qr.getTargetData(r,e).next(c=>c?(s=c,q.resolve(s)):t.Qr.allocateTargetId(r).next(u=>(s=new Ga(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ns.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Qh(n,e,t){return uE.apply(this,arguments)}function uE(){return uE=(0,he.c)(function*(n,e,t){const r=Re(n),s=r.ns.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Fa(u))throw u;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}),uE.apply(this,arguments)}function Wv(n,e,t){const r=Re(n);let s=Ze.min(),c=Tt();return r.persistence.runTransaction("Execute query","readwrite",u=>function(y,w,D){const A=Re(y),M=A.rs.get(D);return void 0!==M?q.resolve(A.ns.get(M)):A.Qr.getTargetData(w,D)}(r,u,vi(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(u,g.targetId).next(y=>{c=y})}).next(()=>r.ts.getDocumentsMatchingQuery(u,e,t?s:Ze.min(),t?c:Tt())).next(g=>(bA(r,rl(e),g),{documents:g,hs:c})))}function vA(n,e){const t=Re(n),r=Re(t.Qr),s=t.ns.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",c=>r._t(c,e).next(u=>u?u.target:null))}function yA(n,e){const t=Re(n),r=t.ss.get(e)||Ze.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.os.getAllFromCollectionGroup(s,e,gm(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(bA(t,e,s),s))}function bA(n,e,t){let r=n.ss.get(e)||Ze.min();t.forEach((s,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.ss.set(e,r)}function dE(){return dE=(0,he.c)(function*(n,e,t,r){const s=Re(n);let c=Tt(),u=so();for(const w of t){const D=e.Ps(w.metadata.name);w.document&&(c=c.add(D));const A=e.Is(w);A.setReadTime(e.Ts(w.metadata.readTime)),u=u.insert(D,A)}const g=s.os.newChangeBuffer({trackRemovals:!0}),y=yield Yu(s,(D=r,vi(Fu(Ut.fromString(`__bundle__/docs/${D}`)))));var D;return s.persistence.runTransaction("Apply bundle documents","readwrite",w=>lE(w,g,u).next(D=>(g.apply(w),D)).next(D=>s.Qr.removeMatchingKeysForTargetId(w,y.targetId).next(()=>s.Qr.addMatchingKeys(w,c,y.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(w,D.cs,D.ls)).next(()=>D.cs)))}),dE.apply(this,arguments)}function bM(n,e){return hE.apply(this,arguments)}function hE(){return hE=(0,he.c)(function*(n,e,t=Tt()){const r=yield Yu(n,vi(Ov(e.bundledQuery))),s=Re(n);return s.persistence.runTransaction("Save named query","readwrite",c=>{const u=Nn(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return s.$r.saveNamedQuery(c,e);const g=r.withResumeToken(wr.EMPTY_BYTE_STRING,u);return s.ns=s.ns.insert(g.targetId,g),s.Qr.updateTargetData(c,g).next(()=>s.Qr.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>s.Qr.addMatchingKeys(c,t,r.targetId)).next(()=>s.$r.saveNamedQuery(c,e))})}),hE.apply(this,arguments)}function IA(n,e){return`firestore_clients_${n}_${e}`}function EA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function fE(n,e){return`firestore_targets_${n}_${e}`}class qv{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Es(e,t,r){const s=JSON.parse(r);let c,u="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return u&&s.error&&(u="string"==typeof s.error.message&&"string"==typeof s.error.code,u&&(c=new ge(s.error.code,s.error.message))),u?new qv(e,t,s.state,c):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let s,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new ge(r.error.code,r.error.message))),c?new Zh(e,r.state,s):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,c=Ev();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=dv(r.activeTargetIds[u]),c=c.add(r.activeTargetIds[u]);return s?new Gm(e,c):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Yv{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Yv(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kv{constructor(){this.activeTargetIds=Ev()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qv{constructor(e,t,r,s,c){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ln(gt),this.started=!1,this.ys=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ws=IA(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Kv),this.bs=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.c)(function*(){const t=yield e.syncEngine.Li();for(const s of t){if(s===e.Vs)continue;const c=e.getItem(IA(e.persistenceKey,s));if(c){const u=Gm.Es(s,c);u&&(e.ps=e.ps.insert(u.clientId,u))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const s=e.xs(r);s&&e.Os(s)}for(const s of e.ys)e.gs(s);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,r){this.Bs(e,t,r),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(fE(this.persistenceKey,e));if(r){const s=Zh.Es(e,r);s&&(t=s.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fE(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Ls(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ve("SharedClientState","READ",e,t),t}setItem(e,t){ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,he.c)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const s=t.$s(r.key);return t.Us(s,null)}{const s=t.Ws(r.key,r.newValue);if(s)return t.Us(s.clientId,s)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const s=t.Gs(r.key,r.newValue);if(s)return t.zs(s)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const s=t.js(r.key,r.newValue);if(s)return t.Hs(s)}}else if(r.key===t.vs){if(null!==r.newValue){const s=t.xs(r.newValue);if(s)return t.Os(s)}}else if(r.key===t.Ss){const s=function(u){let g=ro._e;if(null!=u)try{const y=JSON.parse(u);Ge("number"==typeof y),g=y}catch(y){ur("SharedClientState","Failed to read sequence number from WebStorage",y)}return g}(r.newValue);s!==ro._e&&t.sequenceNumberHandler(s)}else if(r.key===t.Fs){const s=t.Js(r.newValue);yield Promise.all(s.map(c=>t.syncEngine.Ys(c)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,r){const s=new qv(this.currentUser,e,t,r),c=EA(this.persistenceKey,this.currentUser,e);this.setItem(c,s.ds())}Ls(e){const t=EA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const s=fE(this.persistenceKey,e),c=new Zh(e,t,r);this.setItem(s,c.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return Gm.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),s=Number(r[1]);return qv.Es(new Ir(void 0!==r[2]?r[2]:null),s,t)}js(e,t){const r=this.Cs.exec(e),s=Number(r[1]);return Zh.Es(s,t)}xs(e){return Yv.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,he.c)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),s=this.Ns(this.ps),c=this.Ns(r),u=[],g=[];return c.forEach(y=>{s.has(y)||u.push(y)}),s.forEach(y=>{c.has(y)||g.push(y)}),this.syncEngine.eo(u,g).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Ev();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class pE{constructor(){this.no=new Kv,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Kv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wA{io(e){}shutdown(){}}class mE{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Wm=null;function Zv(){return null===Wm?Wm=268435456+Math.round(2147483648*Math.random()):Wm++,"0x"+Wm.toString(16)}const CA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IM{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const yi="WebChannelConnection";class gE extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${s}/databases/${c}`,this.yo="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${c}`}get wo(){return!1}So(t,r,s,c,u){const g=Zv(),y=this.bo(t,r.toUriEncodedString());ve("RestConnection",`Sending RPC '${t}' ${g}:`,y,s);const w={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(w,c,u),this.Co(t,y,w,s).then(D=>(ve("RestConnection",`Received RPC '${t}' ${g}: `,D),D),D=>{throw to("RestConnection",`RPC '${t}' ${g} failed with error: `,D,"url: ",y,"request:",s),D})}vo(t,r,s,c,u,g){return this.So(t,r,s,c,u)}Do(t,r,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+_h,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((c,u)=>t[u]=c),s&&s.headers.forEach((c,u)=>t[u]=c)}bo(t,r){return`${this.fo}/v1/${r}:${CA[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,s){const c=Zv();return new Promise((u,g)=>{const y=new a0;y.setWithCredentials(!0),y.listenOnce(MR.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case cv.NO_ERROR:const D=y.getResponseJson();ve(yi,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(D)),u(D);break;case cv.TIMEOUT:ve(yi,`RPC '${e}' ${c} timed out`),g(new ge(J.DEADLINE_EXCEEDED,"Request time out"));break;case cv.HTTP_ERROR:const A=y.getStatus();if(ve(yi,`RPC '${e}' ${c} failed with status:`,A,"response text:",y.getResponseText()),A>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const N=M?.error;if(N&&N.status&&N.message){const X=function(de){const we=de.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(we)>=0?we:J.UNKNOWN}(N.status);g(new ge(X,N.message))}else g(new ge(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ge(J.UNAVAILABLE,"Connection failed."));break;default:Be()}}finally{ve(yi,`RPC '${e}' ${c} completed.`)}});const w=JSON.stringify(s);ve(yi,`RPC '${e}' ${c} sending request:`,s),y.send(t,"POST",w,r,15)})}Fo(e,t,r){const s=Zv(),c=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=LD(),g=VD(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(y.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Do(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const D=c.join("");ve(yi,`Creating RPC '${e}' stream ${s}: ${D}`,y);const A=u.createWebChannel(D,y);let M=!1,N=!1;const X=new IM({lo:de=>{N?ve(yi,`Not sending because RPC '${e}' stream ${s} is closed:`,de):(M||(ve(yi,`Opening RPC '${e}' stream ${s} transport.`),A.open(),M=!0),ve(yi,`RPC '${e}' stream ${s} sending:`,de),A.send(de))},ho:()=>A.close()}),re=(de,we,He)=>{de.listen(we,De=>{try{He(De)}catch(We){setTimeout(()=>{throw We},0)}})};return re(A,hm.EventType.OPEN,()=>{N||ve(yi,`RPC '${e}' stream ${s} transport opened.`)}),re(A,hm.EventType.CLOSE,()=>{N||(N=!0,ve(yi,`RPC '${e}' stream ${s} transport closed`),X.Vo())}),re(A,hm.EventType.ERROR,de=>{N||(N=!0,to(yi,`RPC '${e}' stream ${s} transport errored:`,de),X.Vo(new ge(J.UNAVAILABLE,"The operation could not be completed")))}),re(A,hm.EventType.MESSAGE,de=>{var we;if(!N){const He=de.data[0];Ge(!!He);const We=He.error||(null===(we=He[0])||void 0===we?void 0:we.error);if(We){ve(yi,`RPC '${e}' stream ${s} received error:`,We);const _t=We.status;let Qt=function(oV){const H1=fr[oV];if(void 0!==H1)return TT(H1)}(_t),Dr=We.message;void 0===Qt&&(Qt=J.INTERNAL,Dr="Unknown error status: "+_t+" with message "+We.message),N=!0,X.Vo(new ge(Qt,Dr)),A.close()}else ve(yi,`RPC '${e}' stream ${s} received:`,He),X.mo(He)}}),re(g,BD.STAT_EVENT,de=>{de.stat===UD.PROXY?ve(yi,`RPC '${e}' stream ${s} detected buffering proxy`):de.stat===UD.NOPROXY&&ve(yi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{X.Ro()},0),X}}function qm(){return typeof window<"u"?window:null}function Xh(){return typeof document<"u"?document:null}function Ku(n){return new tM(n,!0)}class Xv{constructor(e,t,r=1e3,s=1.5,c=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=s,this.Oo=c,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,t-r);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class _E{constructor(e,t,r,s,c,u,g,y){this.oi=e,this.$o=r,this.Uo=s,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Xv(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,he.c)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,he.c)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var r=this;return(0,he.c)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):t&&t.code===J.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===t&&this.o_(r,s)},r=>{e(()=>{const s=new ge(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){var e=this;this.state=5,this.jo.qo((0,he.c)(function*(){e.state=0,e.start()}))}__(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DA extends _E{constructor(e,t,r,s,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=c}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function j0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Be(),s=e.targetChange.targetIds||[],c=function(w,D){return w.useProto3Json?(Ge(void 0===D||"string"==typeof D),wr.fromBase64String(D||"")):(Ge(void 0===D||D instanceof Uint8Array),wr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,g=u&&function(w){const D=void 0===w.code?J.UNKNOWN:TT(w.code);return new ge(D,w.message||"")}(u);t=new RT(r,s,c,g||null)}else if("documentChange"in e){const r=e.documentChange,s=na(n,r.document.name),c=Nn(r.document.updateTime),u=r.document.createTime?Nn(r.document.createTime):Ze.min(),g=new qr({mapValue:{fields:r.document.fields}}),y=Sn.newFoundDocument(s,c,u,g);t=new Sm(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,s=na(n,r.document),c=r.readTime?Nn(r.readTime):Ze.min(),u=Sn.newNoDocument(s,c);t=new Sm([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,s=na(n,r.document);t=new Sm([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Be();{const r=e.filter,{count:s=0,unchangedNames:c}=r,u=new QR(s,c);t=new xT(r.targetId,u)}}var w;return t}(this.serializer,e),r=function(c){if(!("targetChange"in c))return Ze.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Ze.min():u.readTime?Nn(u.readTime):Ze.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=Pv(this.serializer),t.addTarget=function(c,u){let g;const y=u.target;if(g=Ua(y)?{documents:BT(c,y)}:{query:ol(c,y).ut},g.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){g.resumeToken=OT(c,u.resumeToken);const w=B0(c,u.expectedCount);null!==w&&(g.expectedCount=w)}else if(u.snapshotVersion.compareTo(Ze.min())>0){g.readTime=il(c,u.snapshotVersion.toTimestamp());const w=B0(c,u.expectedCount);null!==w&&(g.expectedCount=w)}return g}(this.serializer,e);const r=function $0(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=Pv(this.serializer),t.removeTarget=e,this.t_(t)}}class TA extends _E{constructor(e,t,r,s,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=c,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function nM(n,e){return n&&n.length>0?(Ge(void 0!==e),n.map(t=>function(s,c){let u=Nn(s.updateTime?s.updateTime:c);return u.isEqual(Ze.min())&&(u=Nn(c)),new gs(u,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.T_(r,t)}return Ge(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Pv(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jh(this.serializer,r))};this.t_(t)}}class AA extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new ge(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.So(e,Mv(t,r),s,c,u)).catch(c=>{throw"FirebaseError"===c.name?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(J.UNKNOWN,c.toString())})}vo(e,t,r,s,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,g])=>this.connection.vo(e,Mv(t,r),s,u,g,c)).catch(u=>{throw"FirebaseError"===u.name?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(J.UNKNOWN,u.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class EM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ur(t),this.g_=!1):ve("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class xA{constructor(e,t,r,s,c){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=c,this.M_.io(g=>{r.enqueueAndForget((0,he.c)(function*(){var y;fl(u)&&(ve("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,he.c)(function*(D){const A=Re(D);A.v_.add(4),yield hl(A),A.x_.set("Unknown"),A.v_.delete(4),yield Ym(A)}),function w(D){return y.apply(this,arguments)})(u))}))}),this.x_=new EM(r,s)}}function Ym(n){return Km.apply(this,arguments)}function Km(){return Km=(0,he.c)(function*(n){if(fl(n))for(const e of n.F_)yield e(!0)}),Km.apply(this,arguments)}function hl(n){return ey.apply(this,arguments)}function ey(){return ey=(0,he.c)(function*(n){for(const e of n.F_)yield e(!1)}),ey.apply(this,arguments)}function Jh(n,e){const t=Re(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),bE(t)?yE(t):tf(t).Jo()&&vE(t,e))}function Qm(n,e){const t=Re(n),r=tf(t);t.C_.delete(e),r.Jo()&&ty(t,e),0===t.C_.size&&(r.Jo()?r.Xo():fl(t)&&t.x_.set("Unknown"))}function vE(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}tf(n).c_(e)}function ty(n,e){n.O_.Oe(e),tf(n).l_(e)}function yE(n){n.O_=new XR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),tf(n).start(),n.x_.p_()}function bE(n){return fl(n)&&!tf(n).Ho()&&n.C_.size>0}function fl(n){return 0===Re(n).v_.size}function IE(n){n.O_=void 0}function wM(n){return EE.apply(this,arguments)}function EE(){return EE=(0,he.c)(function*(n){n.C_.forEach((e,t)=>{vE(n,e)})}),EE.apply(this,arguments)}function ny(n,e){return ry.apply(this,arguments)}function ry(){return ry=(0,he.c)(function*(n,e){IE(n),bE(n)?(n.x_.S_(e),yE(n)):n.x_.set("Unknown")}),ry.apply(this,arguments)}function wE(n,e,t){return iy.apply(this,arguments)}function iy(){return iy=(0,he.c)(function*(n,e,t){if(n.x_.set("Online"),e instanceof RT&&2===e.state&&e.cause)try{yield(r=(0,he.c)(function*(c,u){const g=u.cause;for(const y of u.targetIds)c.C_.has(y)&&(yield c.remoteSyncer.rejectListen(y,g),c.C_.delete(y),c.O_.removeTarget(y))}),function s(c,u){return r.apply(this,arguments)})(n,e)}catch(r){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zm(n,r)}else if(e instanceof Sm?n.O_.$e(e):e instanceof xT?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(Ze.min()))try{const r=yield cE(n.localStore);t.compareTo(r)>=0&&(yield function(c,u){const g=c.O_.it(u);return g.targetChanges.forEach((y,w)=>{if(y.resumeToken.approximateByteSize()>0){const D=c.C_.get(w);D&&c.C_.set(w,D.withResumeToken(y.resumeToken,u))}}),g.targetMismatches.forEach((y,w)=>{const D=c.C_.get(y);if(!D)return;c.C_.set(y,D.withResumeToken(wr.EMPTY_BYTE_STRING,D.snapshotVersion)),ty(c,y);const A=new Ga(D.target,y,w,D.sequenceNumber);vE(c,A)}),c.remoteSyncer.applyRemoteEvent(g)}(n,t))}catch(r){ve("RemoteStore","Failed to raise snapshot:",r),yield Zm(n,r)}var r}),iy.apply(this,arguments)}function Zm(n,e,t){return oy.apply(this,arguments)}function oy(){return oy=(0,he.c)(function*(n,e,t){if(!Fa(e))throw e;n.v_.add(1),yield hl(n),n.x_.set("Offline"),t||(t=()=>cE(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.c)(function*(){ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield Ym(n)}))}),oy.apply(this,arguments)}function CE(n,e){return e().catch(t=>Zm(n,t,e))}function ef(n){return DE.apply(this,arguments)}function DE(){return DE=(0,he.c)(function*(n){const e=Re(n),t=pl(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;CM(e);)try{const s=yield _A(e.localStore,r);if(null===s){0===e.D_.length&&t.Xo();break}r=s.batchId,DM(e,s)}catch(s){yield Zm(e,s)}TE(e)&&TM(e)}),DE.apply(this,arguments)}function CM(n){return fl(n)&&n.D_.length<10}function DM(n,e){n.D_.push(e);const t=pl(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function TE(n){return fl(n)&&!pl(n).Ho()&&n.D_.length>0}function TM(n){pl(n).start()}function RA(n){return AE.apply(this,arguments)}function AE(){return AE=(0,he.c)(function*(n){pl(n).d_()}),AE.apply(this,arguments)}function AM(n){return MA.apply(this,arguments)}function MA(){return MA=(0,he.c)(function*(n){const e=pl(n);for(const t of n.D_)e.I_(t.mutations)}),MA.apply(this,arguments)}function SM(n,e,t){return sy.apply(this,arguments)}function sy(){return sy=(0,he.c)(function*(n,e,t){const r=n.D_.shift(),s=Av.from(r,e,t);yield CE(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield ef(n)}),sy.apply(this,arguments)}function xM(n,e){return SE.apply(this,arguments)}function SE(){return SE=(0,he.c)(function*(n,e){var t;e&&pl(n).P_&&(yield(t=(0,he.c)(function*(s,c){if(DT(g=c.code)&&g!==J.ABORTED){const u=s.D_.shift();pl(s).Zo(),yield CE(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,c)),yield ef(s)}var g}),function r(s,c){return t.apply(this,arguments)})(n,e)),TE(n)&&TM(n)}),SE.apply(this,arguments)}function PA(n,e){return ay.apply(this,arguments)}function ay(){return ay=(0,he.c)(function*(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const r=fl(t);t.v_.add(3),yield hl(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield Ym(t)}),ay.apply(this,arguments)}function cy(n,e){return xE.apply(this,arguments)}function xE(){return xE=(0,he.c)(function*(n,e){const t=Re(n);e?(t.v_.delete(2),yield Ym(t)):e||(t.v_.add(2),yield hl(t),t.x_.set("Unknown"))}),xE.apply(this,arguments)}function tf(n){return n.N_||(n.N_=function(t,r,s){const c=Re(t);return c.R_(),new DA(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(n.datastore,n.asyncQueue,{Po:wM.bind(null,n),To:ny.bind(null,n),u_:wE.bind(null,n)}),n.F_.push(function(){var e=(0,he.c)(function*(t){t?(n.N_.Zo(),bE(n)?yE(n):n.x_.set("Unknown")):(yield n.N_.stop(),IE(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function pl(n){return n.B_||(n.B_=function(t,r,s){const c=Re(t);return c.R_(),new TA(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(n.datastore,n.asyncQueue,{Po:RA.bind(null,n),To:xM.bind(null,n),E_:AM.bind(null,n),T_:SM.bind(null,n)}),n.F_.push(function(){var e=(0,he.c)(function*(t){t?(n.B_.Zo(),yield ef(n)):(yield n.B_.stop(),n.D_.length>0&&(ve("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.B_}class RE{constructor(e,t,r,s,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=c,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,c){const u=Date.now()+r,g=new RE(e,t,u,s,c);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ge(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nf(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Fa(n))return new ge(J.UNAVAILABLE,`${e}: ${n}`);throw n}class ia{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=Cm(),this.sortedSet=new ln(this.comparator)}static emptySet(e){return new ia(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ia)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(!s.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ME{constructor(){this.L_=new ln(Pe.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(t):1===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Be():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qu{constructor(e,t,r,s,c,u,g,y,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,s,c){const u=[];return t.forEach(g=>{u.push({type:0,doc:g})}),new Qu(e,t,ia.emptySet(t),u,r,s,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class kA{constructor(){this.q_=void 0,this.Q_=[]}}class OA{constructor(){this.queries=new ps(e=>_T(e),Fo),this.onlineState="Unknown",this.K_=new Set}}function ly(n,e){return PE.apply(this,arguments)}function PE(){return PE=(0,he.c)(function*(n,e){const t=Re(n),r=e.query;let s=!1,c=t.queries.get(r);if(c||(s=!0,c=new kA),s)try{c.q_=yield t.onListen(r)}catch(u){const g=nf(u,`Initialization of query '${Oh(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,c),c.Q_.push(e),e.U_(t.onlineState),c.q_&&e.W_(c.q_)&&OE(t)}),PE.apply(this,arguments)}function kE(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,he.c)(function*(n,e){const t=Re(n),r=e.query;let s=!1;const c=t.queries.get(r);if(c){const u=c.Q_.indexOf(e);u>=0&&(c.Q_.splice(u,1),s=0===c.Q_.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),NA.apply(this,arguments)}function Nk(n,e){const t=Re(n);let r=!1;for(const s of e){const u=t.queries.get(s.query);if(u){for(const g of u.Q_)g.W_(s)&&(r=!0);u.q_=s}}r&&OE(t)}function RM(n,e,t){const r=Re(n),s=r.queries.get(e);if(s)for(const c of s.Q_)c.onError(t);r.queries.delete(e)}function OE(n){n.K_.forEach(e=>{e.next()})}class NE{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Qu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Qu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class MM{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class FA{constructor(e){this.serializer=e}Ps(e){return na(this.serializer,e)}Is(e){return e.metadata.exists?LT(this.serializer,e.document,!1):Sn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Nn(e)}}class Xm{constructor(e,t,r){this.ta=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LA(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const r=Ut.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,r=new FA(this.serializer);for(const s of e)if(s.metadata.queries){const c=r.Ps(s.metadata.name);for(const u of s.metadata.queries){const g=(t.get(u)||Tt()).add(c);t.set(u,g)}}return t}complete(){var e=this;return(0,he.c)(function*(){const t=yield function yM(n,e,t,r){return dE.apply(this,arguments)}(e.localStore,new FA(e.serializer),e.documents,e.ta.id),r=e.ra(e.documents);for(const s of e.queries)yield bM(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:t}})()}}function LA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class VA{constructor(e){this.key=e}}class BA{constructor(e){this.key=e}}class bi{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Tt(),this.mutatedKeys=Tt(),this.ua=Iv(e),this.ca=new ia(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new ME,s=t?t.ca:this.ca;let c=t?t.mutatedKeys:this.mutatedKeys,u=s,g=!1;const y="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,w="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((D,A)=>{const M=s.get(D),N=Bu(this.query,A)?A:null,X=!!M&&this.mutatedKeys.has(M.key),re=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let de=!1;M&&N?M.data.isEqual(N.data)?X!==re&&(r.track({type:3,doc:N}),de=!0):this.Ia(M,N)||(r.track({type:2,doc:N}),de=!0,(y&&this.ua(N,y)>0||w&&this.ua(N,w)<0)&&(g=!0)):!M&&N?(r.track({type:0,doc:N}),de=!0):M&&!N&&(r.track({type:1,doc:M}),de=!0,(y||w)&&(g=!0)),de&&(N?(u=u.add(N),c=re?c.add(D):c.delete(D)):(u=u.delete(D),c=c.delete(D)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const D="F"===this.query.limitType?u.last():u.first();u=u.delete(D.key),c=c.delete(D.key),r.track({type:1,doc:D})}return{ca:u,Pa:r,Xi:g,mutatedKeys:c}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const c=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const u=e.Pa.k_();u.sort((D,A)=>function(N,X){const re=de=>{switch(de){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be()}};return re(N)-re(X)}(D.type,A.type)||this.ua(D.doc,A.doc)),this.Ta(r),s=null!=s&&s;const g=t&&!s?this.Ea():[],y=0===this.aa.size&&this.current&&!s?1:0,w=y!==this._a;return this._a=y,0!==u.length||w?{snapshot:new Qu(this.query,e.ca,c,u,e.mutatedKeys,0===y,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:g}:{da:g}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ME,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Tt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new BA(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new VA(r))}),t}Ra(e){this.oa=e.hs,this.aa=Tt();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Qu.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class rf{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PM{constructor(e){this.key=e,this.ma=!1}}class kM{constructor(e,t,r,s,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.fa={},this.ga=new ps(g=>_T(g),Fo),this.pa=new Map,this.ya=new Set,this.wa=new ln(Pe.comparator),this.Sa=new Map,this.ba=new nE,this.Da={},this.Ca=new Map,this.va=Wu.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function Fk(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,he.c)(function*(n,e){const t=JA(n);let r,s;const c=t.ga.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),s=c.view.Va();else{const u=yield Yu(t.localStore,vi(e)),g=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,s=yield Zu(t,e,r,"current"===g,u.resumeToken),t.isPrimaryClient&&Jh(t.remoteStore,u)}return s}),UA.apply(this,arguments)}function Zu(n,e,t,r,s){return FE.apply(this,arguments)}function FE(){return FE=(0,he.c)(function*(n,e,t,r,s){n.Ma=(A,M,N)=>{return(X=(0,he.c)(function*(de,we,He,De){let We=we.view.ha(He);We.Xi&&(We=yield Wv(de.localStore,we.query,!1).then(({documents:ca})=>we.view.ha(ca,We)));const _t=De&&De.targetChanges.get(we.targetId),Qt=De&&null!=De.targetMismatches.get(we.targetId),Dr=we.view.applyChanges(We,de.isPrimaryClient,_t,Qt);return zA(de,we.targetId,Dr.da),Dr.snapshot}),function re(de,we,He,De){return X.apply(this,arguments)})(n,A,M,N);var X};const c=yield Wv(n.localStore,e,!0),u=new bi(e,c.hs),g=u.ha(c.documents),y=Uh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),w=u.applyChanges(g,n.isPrimaryClient,y);zA(n,t,w.da);const D=new rf(e,t,u);return n.ga.set(e,D),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),w.snapshot}),FE.apply(this,arguments)}function LE(n,e){return VE.apply(this,arguments)}function VE(){return VE=(0,he.c)(function*(n,e){const t=Re(n),r=t.ga.get(e),s=t.pa.get(r.targetId);if(s.length>1)return t.pa.set(r.targetId,s.filter(c=>!Fo(c,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Qm(t.remoteStore,r.targetId),Xu(t,r.targetId)}).catch(Xc))):(Xu(t,r.targetId),yield Qh(t.localStore,r.targetId,!0))}),VE.apply(this,arguments)}function BE(){return BE=(0,he.c)(function*(n,e,t){const r=eS(n);try{const s=yield function(u,g){const y=Re(u),w=On.now(),D=g.reduce((N,X)=>N.add(X.key),Tt());let A,M;return y.persistence.runTransaction("Locally write mutations","readwrite",N=>{let X=so(),re=Tt();return y.os.getEntries(N,D).next(de=>{X=de,X.forEach((we,He)=>{He.isValidDocument()||(re=re.add(we))})}).next(()=>y.localDocuments.getOverlayedDocuments(N,X)).next(de=>{A=de;const we=[];for(const He of g){const De=k0(He,A.get(He.key).overlayedDocument);null!=De&&we.push(new ta(He.key,De,uT(De.value.mapValue),xn.exists(!0)))}return y.mutationQueue.addMutationBatch(N,w,we,g)}).next(de=>{M=de;const we=de.applyToLocalDocumentSet(A,re);return y.documentOverlayCache.saveOverlays(N,de.batchId,we)})}).then(()=>({batchId:M.batchId,changes:x0(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,g,y){let w=u.Da[u.currentUser.toKey()];w||(w=new ln(gt)),w=w.insert(g,y),u.Da[u.currentUser.toKey()]=w}(r,s.batchId,t),yield Wa(r,s.changes),yield ef(r.remoteStore)}catch(s){const c=nf(s,"Failed to persist write");t.reject(c)}}),BE.apply(this,arguments)}function $A(n,e){return UE.apply(this,arguments)}function UE(){return UE=(0,he.c)(function*(n,e){const t=Re(n);try{const r=yield function gA(n,e){const t=Re(n),r=e.snapshotVersion;let s=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const u=t.os.newChangeBuffer({trackRemovals:!0});s=t.ns;const g=[];e.targetChanges.forEach((D,A)=>{const M=s.get(A);if(!M)return;g.push(t.Qr.removeMatchingKeys(c,D.removedDocuments,A).next(()=>t.Qr.addMatchingKeys(c,D.addedDocuments,A)));let N=M.withSequenceNumber(c.currentSequenceNumber);var re,de,we;null!==e.targetMismatches.get(A)?N=N.withResumeToken(wr.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):D.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(D.resumeToken,r)),s=s.insert(A,N),de=N,we=D,(0===(re=M).resumeToken.approximateByteSize()||de.snapshotVersion.toMicroseconds()-re.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&g.push(t.Qr.updateTargetData(c,N))});let y=so(),w=Tt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,D))}),g.push(lE(c,u,e.documentUpdates).next(D=>{y=D.cs,w=D.ls})),!r.isEqual(Ze.min())){const D=t.Qr.getLastRemoteSnapshotVersion(c).next(A=>t.Qr.setTargetsMetadata(c,c.currentSequenceNumber,r));g.push(D)}return q.waitFor(g).next(()=>u.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,y,w)).next(()=>y)}).then(c=>(t.ns=s,c))}(t.localStore,e);e.targetChanges.forEach((s,c)=>{const u=t.Sa.get(c);u&&(Ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.ma=!0:s.modifiedDocuments.size>0?Ge(u.ma):s.removedDocuments.size>0&&(Ge(u.ma),u.ma=!1))}),yield Wa(t,r,e)}catch(r){yield Xc(r)}}),UE.apply(this,arguments)}function uy(n,e,t){const r=Re(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ga.forEach((c,u)=>{const g=u.view.U_(e);g.snapshot&&s.push(g.snapshot)}),function(u,g){const y=Re(u);y.onlineState=g;let w=!1;y.queries.forEach((D,A)=>{for(const M of A.Q_)M.U_(g)&&(w=!0)}),w&&OE(y)}(r.eventManager,e),s.length&&r.fa.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function HA(n,e,t){return jE.apply(this,arguments)}function jE(){return jE=(0,he.c)(function*(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Sa.get(e),c=s&&s.key;if(c){let u=new ln(Pe.comparator);u=u.insert(c,Sn.newNoDocument(c,Ze.min()));const g=Tt().add(c),y=new Bh(Ze.min(),new Map,new ln(gt),u,g);yield $A(r,y),r.wa=r.wa.remove(c),r.Sa.delete(e),HE(r)}else yield Qh(r.localStore,e,!1).then(()=>Xu(r,e,t)).catch(Xc)}),jE.apply(this,arguments)}function dy(n,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,he.c)(function*(n,e){const t=Re(n),r=e.batch.batchId;try{const s=yield function mA(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),c=t.os.newChangeBuffer({trackRemovals:!0});return function(g,y,w,D){const A=w.batch,M=A.keys();let N=q.resolve();return M.forEach(X=>{N=N.next(()=>D.getEntry(y,X)).next(re=>{const de=w.docVersions.get(X);Ge(null!==de),re.version.compareTo(de)<0&&(A.applyToRemoteDocument(re,w),re.isValidDocument()&&(re.setReadTime(w.commitVersion),D.addEntry(re)))})}),N.next(()=>g.mutationQueue.removeMutationBatch(y,A))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let y=Tt();for(let w=0;w<g.mutationResults.length;++w)g.mutationResults[w].transformResults.length>0&&(y=y.add(g.batch.mutations[w].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);$E(t,r,null),ml(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wa(t,s)}catch(s){yield Xc(s)}}),Jm.apply(this,arguments)}function Lk(n,e,t){return hy.apply(this,arguments)}function hy(){return hy=(0,he.c)(function*(n,e,t){const r=Re(n);try{const s=yield function(u,g){const y=Re(u);return y.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return y.mutationQueue.lookupMutationBatch(w,g).next(A=>(Ge(null!==A),D=A.keys(),y.mutationQueue.removeMutationBatch(w,A))).next(()=>y.mutationQueue.performConsistencyCheck(w)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(w,D,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>y.localDocuments.getDocuments(w,D))})}(r.localStore,e);$E(r,e,t),ml(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wa(r,s)}catch(s){yield Xc(s)}}),hy.apply(this,arguments)}function fy(){return fy=(0,he.c)(function*(n,e){const t=Re(n);fl(t.remoteStore)||ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const g=Re(u);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>g.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ca.get(r)||[];s.push(e),t.Ca.set(r,s)}catch(r){const s=nf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),fy.apply(this,arguments)}function ml(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function $E(n,e,t){const r=Re(n);let s=r.Da[r.currentUser.toKey()];if(s){const c=s.get(e);c&&(t?c.reject(t):c.resolve(),s=s.remove(e)),r.Da[r.currentUser.toKey()]=s}}function Xu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||py(n,r)})}function py(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(Qm(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),HE(n))}function zA(n,e,t){for(const r of t)r instanceof VA?(n.ba.addReference(r.key,e),NM(n,r)):r instanceof BA?(ve("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||py(n,r.key)):Be()}function NM(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(ve("SyncEngine","New document in limbo: "+t),n.ya.add(r),HE(n))}function HE(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new Pe(Ut.fromString(e)),r=n.va.next();n.Sa.set(r,new PM(t)),n.wa=n.wa.insert(t,r),Jh(n.remoteStore,new Ga(vi(Fu(t.path)),r,"TargetPurposeLimboResolution",ro._e))}}function Wa(n,e,t){return my.apply(this,arguments)}function my(){return my=(0,he.c)(function*(n,e,t){const r=Re(n),s=[],c=[],u=[];var g;r.ga.isEmpty()||(r.ga.forEach((g,y)=>{u.push(r.Ma(y,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w?.fromCache?"not-current":"current"),w){s.push(w);const D=zm.Ki(y.targetId,w);c.push(D)}}))}),yield Promise.all(u),r.fa.u_(s),yield(g=(0,he.c)(function*(w,D){const A=Re(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>q.forEach(D,N=>q.forEach(N.qi,X=>A.persistence.referenceDelegate.addReference(M,N.targetId,X)).next(()=>q.forEach(N.Qi,X=>A.persistence.referenceDelegate.removeReference(M,N.targetId,X)))))}catch(M){if(!Fa(M))throw M;ve("LocalStore","Failed to update sequence numbers: "+M)}for(const M of D){const N=M.targetId;if(!M.fromCache){const X=A.ns.get(N),de=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);A.ns=A.ns.insert(N,de)}}}),function y(w,D){return g.apply(this,arguments)})(r.localStore,c))}),my.apply(this,arguments)}function GA(n,e){return zE.apply(this,arguments)}function zE(){return zE=(0,he.c)(function*(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const r=yield aE(t.localStore,e);t.currentUser=e,(c=t).Ca.forEach(g=>{g.forEach(y=>{y.reject(new ge(J.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wa(t,r.us)}var c}),zE.apply(this,arguments)}function WA(n,e){const t=Re(n),r=t.Sa.get(e);if(r&&r.ma)return Tt().add(r.key);{let s=Tt();const c=t.pa.get(e);if(!c)return s;for(const u of c){const g=t.ga.get(u);s=s.unionWith(g.view.la)}return s}}function qA(n,e){return GE.apply(this,arguments)}function GE(){return GE=(0,he.c)(function*(n,e){const t=Re(n),r=yield Wv(t.localStore,e.query,!0),s=e.view.Ra(r);return t.isPrimaryClient&&zA(t,e.targetId,s.da),s}),GE.apply(this,arguments)}function FM(n,e){return gy.apply(this,arguments)}function gy(){return gy=(0,he.c)(function*(n,e){const t=Re(n);return yA(t.localStore,e).then(r=>Wa(t,r))}),gy.apply(this,arguments)}function LM(n,e,t,r){return _y.apply(this,arguments)}function _y(){return _y=(0,he.c)(function*(n,e,t,r){const s=Re(n),c=yield function(g,y){const w=Re(g),D=Re(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>D.vn(A,y).next(M=>M?w.localDocuments.getDocuments(A,M):q.resolve(null)))}(s.localStore,e);var y;null!==c?("pending"===t?yield ef(s.remoteStore):"acknowledged"===t||"rejected"===t?($E(s,e,r||null),ml(s,e),y=e,Re(Re(s.localStore).mutationQueue).Mn(y)):Be(),yield Wa(s,c)):ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),_y.apply(this,arguments)}function vy(){return vy=(0,he.c)(function*(n,e){const t=Re(n);if(JA(t),eS(t),!0===e&&!0!==t.Fa){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield WE(t,r.toArray());t.Fa=!0,yield cy(t.remoteStore,!0);for(const c of s)Jh(t.remoteStore,c)}else if(!1===e&&!1!==t.Fa){const r=[];let s=Promise.resolve();t.pa.forEach((c,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then(()=>(Xu(t,u),Qh(t.localStore,u,!0))),Qm(t.remoteStore,u)}),yield s,yield WE(t,r),function(u){const g=Re(u);g.Sa.forEach((y,w)=>{Qm(g.remoteStore,w)}),g.ba.mr(),g.Sa=new Map,g.wa=new ln(Pe.comparator)}(t),t.Fa=!1,yield cy(t.remoteStore,!1)}}),vy.apply(this,arguments)}function WE(n,e,t){return qE.apply(this,arguments)}function qE(){return qE=(0,he.c)(function*(n,e,t){const r=Re(n),s=[],c=[];for(const u of e){let g;const y=r.pa.get(u);if(y&&0!==y.length){g=yield Yu(r.localStore,vi(y[0]));for(const w of y){const D=r.ga.get(w),A=yield qA(r,D);A.snapshot&&c.push(A.snapshot)}}else{const w=yield vA(r.localStore,u);g=yield Yu(r.localStore,w),yield Zu(r,KA(w),u,!1,g.resumeToken)}s.push(g)}return r.fa.u_(c),s}),qE.apply(this,arguments)}function KA(n){return T0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Vk(n){return t=Re(n).localStore,Re(Re(t).persistence).Li();var t}function QA(n,e,t,r){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,he.c)(function*(n,e,t,r){const s=Re(n);if(s.Fa)return void ve("SyncEngine","Ignoring unexpected query state notification.");const c=s.pa.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const u=yield yA(s.localStore,rl(c[0])),g=Bh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,wr.EMPTY_BYTE_STRING);yield Wa(s,u,g);break}case"rejected":yield Qh(s.localStore,e,!0),Xu(s,e,r);break;default:Be()}}),ZA.apply(this,arguments)}function Bk(n,e,t){return XA.apply(this,arguments)}function XA(){return XA=(0,he.c)(function*(n,e,t){const r=JA(n);if(r.Fa){for(const s of e){if(r.pa.has(s)){ve("SyncEngine","Adding an already active target "+s);continue}const c=yield vA(r.localStore,s),u=yield Yu(r.localStore,c);yield Zu(r,KA(c),u.targetId,!1,u.resumeToken),Jh(r.remoteStore,u)}for(const s of t)r.pa.has(s)&&(yield Qh(r.localStore,s,!1).then(()=>{Qm(r.remoteStore,s),Xu(r,s)}).catch(Xc))}}),XA.apply(this,arguments)}function JA(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HA.bind(null,e),e.fa.u_=Nk.bind(null,e.eventManager),e.fa.xa=RM.bind(null,e.eventManager),e}function eS(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lk.bind(null,e),e}class eg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.c)(function*(){t.serializer=Ku(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return sE(this.persistence,new oE,e.initialUser,this.serializer)}createPersistence(e){return new $v(Yh.Hr,this.serializer)}createSharedClientState(e){return new pE}terminate(){var e=this;return(0,he.c)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yy extends eg{constructor(e,t,r){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.c)(function*(){yield t().call(r,e),yield r.Na.initialize(r,e),yield eS(r.Na.syncEngine),yield ef(r.Na.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return sE(this.persistence,new oE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new eE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new ZD(t,this.persistence);return new Au(e.asyncQueue,r)}createPersistence(e){const t=zv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new iE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,qm(),Xh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new pE}}class tS extends yy{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.c)(function*(){yield t().call(r,e);const s=r.Na.syncEngine;r.sharedClientState instanceof Qv&&(r.sharedClientState.syncEngine={Zs:LM.bind(null,s),Xs:QA.bind(null,s),eo:Bk.bind(null,s),Li:Vk.bind(null,s),Ys:FM.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var c=(0,he.c)(function*(u){yield function YA(n,e){return vy.apply(this,arguments)}(r.Na.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=qm();if(!Qv.D(t))throw new ge(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ju{initialize(e,t){var r=this;return(0,he.c)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>uy(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=GA.bind(null,r.syncEngine),yield cy(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OA}createDatastore(e){const t=Ku(e.databaseInfo.databaseId),r=new gE(e.databaseInfo);return new AA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,s=this.datastore,c=e.asyncQueue,u=t=>uy(this.syncEngine,t,0),g=mE.D()?new mE:new wA,new xA(r,s,c,u,g);var r,s,c,u,g}createSyncEngine(e,t){return function(s,c,u,g,y,w,D){const A=new kM(s,c,u,g,y,w);return D&&(A.Fa=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,he.c)(function*(){var t,r;yield(r=(0,he.c)(function*(c){const u=Re(c);ve("RemoteStore","RemoteStore shutting down."),u.v_.add(5),yield hl(u),u.M_.shutdown(),u.x_.set("Unknown")}),function s(c){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function nS(n,e=10240){let t=0;return{read:()=>(0,he.c)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.c)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class gl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class by{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,he.c)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,he.c)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,he.c)(function*(){const t=yield e.Ka();if(null===t)return null;const r=e.qa.decode(t),s=Number(r);isNaN(s)&&e.$a(`length string (${r}) is not valid number`);const c=yield e.Ua(s);return new MM(JSON.parse(c),t.length+s)})()}Wa(){return this.buffer.findIndex(e=>123===e)}Ka(){var e=this;return(0,he.c)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const t=e.Wa();t<0&&e.$a("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ua(e){var t=this;return(0,he.c)(function*(){for(;t.buffer.length<e;)(yield t.Ga())&&t.$a("Reached the end of bundle when more is expected.");const r=t.qa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,he.c)(function*(){const t=yield e.ka.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class VM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.c)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ge(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(s=(0,he.c)(function*(u,g){const y=Re(u),w={documents:g.map(N=>Rm(y.serializer,N))},D=yield y.vo("BatchGetDocuments",y.serializer.databaseId,Ut.emptyPath(),w,g.length),A=new Map;D.forEach(N=>{const X=function VT(n,e){return"found"in e?function(r,s){Ge(!!s.found);const c=na(r,s.found.name),u=Nn(s.found.updateTime),g=s.found.createTime?Nn(s.found.createTime):Ze.min(),y=new qr({mapValue:{fields:s.found.fields}});return Sn.newFoundDocument(c,u,g,y)}(n,e):"missing"in e?function(r,s){Ge(!!s.missing),Ge(!!s.readTime);const c=na(r,s.missing),u=Nn(s.readTime);return Sn.newNoDocument(c,u)}(n,e):Be()}(y.serializer,N);A.set(X.key.toString(),X)});const M=[];return g.forEach(N=>{const X=A.get(N.toString());Ge(!!X),M.push(X)}),M}),function c(u,g){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ju(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.c)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const c=Pe.fromPath(s);e.mutations.push(new Vh(c,e.precondition(c)))}),yield(r=(0,he.c)(function*(c,u){const g=Re(c),y={writes:u.map(w=>jh(g.serializer,w))};yield g.So("Commit",g.serializer.databaseId,Ut.emptyPath(),y)}),function s(c,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Be();t=Ze.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ge(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ze.min())?xn.exists(!1):xn.updateTime(t):xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ze.min()))throw new ge(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(t)}return xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BM{constructor(e,t,r,s,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=c,this.za=r.maxAttempts,this.jo=new Xv(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,he.c)(function*(){const t=new VM(e.datastore),r=e.Ja(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(c=>{e.Ya(c)}))}).catch(s=>{e.Ya(s)})}))}Ja(e){try{const t=this.updateFunction(e);return!uv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!DT(t)}return!1}}class UM{constructor(e,t,r,s){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Ir.UNAUTHENTICATED,this.clientId=l0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,he.c)(function*(g){ve("FirestoreClient","Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(ve("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(J.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.c)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=nf(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Iy(n,e){return YE.apply(this,arguments)}function YE(){return YE=(0,he.c)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,he.c)(function*(c){r.isEqual(c)||(yield aE(e.localStore,c),r=c)});return function(c){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),YE.apply(this,arguments)}function KE(n,e){return QE.apply(this,arguments)}function QE(){return QE=(0,he.c)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield XE(n);ve("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>PA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>PA(e.remoteStore,s)),n._onlineComponents=e}),QE.apply(this,arguments)}function ZE(n){return"FirebaseError"===n.name?n.code===J.FAILED_PRECONDITION||n.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function XE(n){return JE.apply(this,arguments)}function JE(){return JE=(0,he.c)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Iy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!ZE(t))throw t;to("Error using user provided cache. Falling back to memory cache: "+t),yield Iy(n,new eg)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),yield Iy(n,new eg);return n._offlineComponents}),JE.apply(this,arguments)}function Ey(n){return ew.apply(this,arguments)}function ew(){return ew=(0,he.c)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield KE(n,n._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),yield KE(n,new Ju))),n._onlineComponents}),ew.apply(this,arguments)}function rS(n){return XE(n).then(e=>e.persistence)}function sf(n){return XE(n).then(e=>e.localStore)}function iS(n){return Ey(n).then(e=>e.remoteStore)}function tw(n){return Ey(n).then(e=>e.syncEngine)}function af(n){return nw.apply(this,arguments)}function nw(){return nw=(0,he.c)(function*(n){const e=yield Ey(n),t=e.eventManager;return t.onListen=Fk.bind(null,e.syncEngine),t.onUnlisten=LE.bind(null,e.syncEngine),t}),nw.apply(this,arguments)}function wy(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,he.c)(function*(){return function(c,u,g,y,w){const D=new gl({next:M=>{u.enqueueAndForget(()=>kE(c,A));const N=M.docs.has(g);!N&&M.fromCache?w.reject(new ge(J.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&M.fromCache&&y&&"server"===y.source?w.reject(new ge(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(M)},error:M=>w.reject(M)}),A=new NE(Fu(g.path),D,{includeMetadataChanges:!0,Z_:!0});return ly(c,A)}(yield af(n),n.asyncQueue,e,t,r)})),r.promise}function aS(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,he.c)(function*(){return function(c,u,g,y,w){const D=new gl({next:M=>{u.enqueueAndForget(()=>kE(c,A)),M.fromCache&&"server"===y.source?w.reject(new ge(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(M)},error:M=>w.reject(M)}),A=new NE(g,D,{includeMetadataChanges:!0,Z_:!0});return ly(c,A)}(yield af(n),n.asyncQueue,e,t,r)})),r.promise}function rw(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const dS=new Map;function Cy(n,e,t){if(!t)throw new ge(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hS(n,e,t,r){if(!0===e&&!0===r)throw new ge(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dy(n){if(!Pe.isDocumentKey(n))throw new ge(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ty(n){if(Pe.isDocumentKey(n))throw new ge(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Be()}function Bt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tg(n);throw new ge(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ay(n,e){if(e<=0)throw new ge(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Sy{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ge(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ge(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=rw(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new ge(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ge(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ge(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xy{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ge(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ge(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sy(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Dk;switch(r.type){case"firstParty":return new kR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=dS.get(t);r&&(ve("ComponentProvider","Removing Datastore"),dS.delete(t),r.terminate())}(this),Promise.resolve()}}class Yr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yr(this.firestore,e,this._query)}}class Fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class _s extends Yr{constructor(e,t,r){super(e,t,Fu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new Pe(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function ow(n,e,...t){if(n=(0,tn.Yj)(n),Cy("collection","path",e),n instanceof xy){const r=Ut.fromString(e,...t);return Ty(r),new _s(n,null,r)}{if(!(n instanceof Fn||n instanceof _s))throw new ge(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return Ty(r),new _s(n.firestore,null,r)}}function td(n,e,...t){if(n=(0,tn.Yj)(n),1===arguments.length&&(e=l0.newId()),Cy("doc","path",e),n instanceof xy){const r=Ut.fromString(e,...t);return Dy(r),new Fn(n,null,new Pe(r))}{if(!(n instanceof Fn||n instanceof _s))throw new ge(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return Dy(r),new Fn(n.firestore,n instanceof _s?n.converter:null,new Pe(r))}}function ng(n,e){return n=(0,tn.Yj)(n),e=(0,tn.Yj)(e),(n instanceof Fn||n instanceof _s)&&(e instanceof Fn||e instanceof _s)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sw(n,e){return n=(0,tn.Yj)(n),e=(0,tn.Yj)(e),n instanceof Yr&&e instanceof Yr&&n.firestore===e.firestore&&Fo(n._query,e._query)&&n.converter===e.converter}class fS{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Xv(this,"async_queue_retry"),this._u=()=>{const t=Xh();t&&ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=Xh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Xh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new Nr;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,he.c)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!Fa(t))throw t;ve("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,ur("INTERNAL UNHANDLED ERROR: ",function(u){let g=u.message||"";return u.stack&&(g=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),g}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const s=RE.createAndSchedule(this,e,t,r,c=>this.lu(c));return this.nu.push(s),s}au(){this.ru&&Be()}verifyOperationInProgress(){}hu(){var e=this;return(0,he.c)(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function aw(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const s=t;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(n)}class WM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rn extends xy{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new fS,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||KM(this),this._firestoreClient.terminate()}}function Qn(n){return n._firestoreClient||KM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KM(n){var e,t,r;const s=n._freezeSettings(),c=(y=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new oT(n._databaseId,y,n._persistenceKey,(D=s).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,rw(D.experimentalLongPollingOptions),D.useFetchStreams));var y,D;n._firestoreClient=new UM(n._authCredentials,n._appCheckCredentials,n._queue,c),null!==(t=s.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function mS(n,e,t){const r=new Nr;return n.asyncQueue.enqueue((0,he.c)(function*(){try{yield Iy(n,t),yield KE(n,e),r.resolve()}catch(s){const c=s;if(!ZE(c))throw c;to("Error enabling indexeddb cache. Falling back to memory cache: "+c),r.reject(c)}})).then(()=>r.promise)}function _S(n){if(n._initialized||n._terminated)throw new ge(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kr(wr.fromBase64String(e))}catch(t){throw new ge(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kr(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ge(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _l{constructor(e){this._methodName=e}}class rg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gt(this._lat,e._lat)||gt(this._long,e._long)}}const JM=/^__.*__$/;class cw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lh(e,this.data,t,this.fieldTransforms)}}class eP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ta(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be()}}class ig{constructor(e,t,r,s,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===c&&this.Eu(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new ig(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.mu(e),s}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return ky(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(yS(this.du)&&JM.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class tP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ku(e)}Su(e,t,r,s=!1){return new ig({du:e,methodName:t,wu:r,path:En.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cf(n){const e=n._freezeSettings(),t=Ku(n._databaseId);return new tP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lw(n,e,t,r,s,c={}){const u=n.Su(c.merge||c.mergeFields?2:0,e,t,s);qa("Data must be an object, but it was:",u,r);const g=DS(r,u);let y,w;if(c.merge)y=new _i(u.fieldMask),w=u.fieldTransforms;else if(c.mergeFields){const D=[];for(const A of c.mergeFields){const M=lf(e,A,t);if(!u.contains(M))throw new ge(J.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);Oy(D,M)||D.push(M)}y=new _i(D),w=u.fieldTransforms.filter(A=>y.covers(A.field))}else y=null,w=u.fieldTransforms;return new cw(new qr(g),y,w)}class My extends _l{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof My}}function uw(n,e,t){return new ig({du:3,wu:e.settings.wu,methodName:n._methodName,Vu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class bS extends _l{_toFieldTransform(e){return new Wi(e.path,new Dm)}isEqual(e){return e instanceof bS}}class IS extends _l{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=uw(this,e,!0),r=this.bu.map(c=>rd(c,t)),s=new $a(r);return new Wi(e.path,s)}isEqual(e){return e instanceof IS&&(0,tn.IN)(this.bu,e.bu)}}class ES extends _l{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=uw(this,e,!0),r=this.bu.map(c=>rd(c,t)),s=new Ha(r);return new Wi(e.path,s)}isEqual(e){return e instanceof ES&&(0,tn.IN)(this.bu,e.bu)}}class wS extends _l{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Oi(e.serializer,yT(e.serializer,this.Du));return new Wi(e.path,t)}isEqual(e){return e instanceof wS&&this.Du===e.Du}}function CS(n,e,t,r){const s=n.Su(1,e,t);qa("Data must be an object, but it was:",s,r);const c=[],u=qr.empty();Ys(r,(y,w)=>{const D=uf(e,y,t);w=(0,tn.Yj)(w);const A=s.fu(D);if(w instanceof My)c.push(D);else{const M=rd(w,A);null!=M&&(c.push(D),u.set(D,M))}});const g=new _i(c);return new eP(u,g,s.fieldTransforms)}function Py(n,e,t,r,s,c){const u=n.Su(1,e,t),g=[lf(e,r,t)],y=[s];if(c.length%2!=0)throw new ge(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<c.length;M+=2)g.push(lf(e,c[M])),y.push(c[M+1]);const w=[],D=qr.empty();for(let M=g.length-1;M>=0;--M)if(!Oy(w,g[M])){const N=g[M];let X=y[M];X=(0,tn.Yj)(X);const re=u.fu(N);if(X instanceof My)w.push(N);else{const de=rd(X,re);null!=de&&(w.push(N),D.set(N,de))}}const A=new _i(w);return new eP(D,A,u.fieldTransforms)}function og(n,e,t,r=!1){return rd(t,n.Su(r?4:3,e))}function rd(n,e){if(dw(n=(0,tn.Yj)(n)))return qa("Unsupported field value:",e,n),DS(n,e);if(n instanceof _l)return function(r,s){if(!yS(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,s){const c=[];let u=0;for(const g of r){let y=rd(g,s.gu(u));null==y&&(y={nullValue:"NULL_VALUE"}),c.push(y),u++}return{arrayValue:{values:c}}}(n,e)}return function(r,s){if(null===(r=(0,tn.Yj)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return yT(s.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const c=On.fromDate(r);return{timestampValue:il(s.serializer,c)}}if(r instanceof On){const c=new On(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:il(s.serializer,c)}}if(r instanceof rg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kr)return{bytesValue:OT(s.serializer,r._byteString)};if(r instanceof Fn){const c=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw s.pu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:xm(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${tg(r)}`)}(n,e)}function DS(n,e){const t={};return p0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(n,(r,s)=>{const c=rd(s,e.Ru(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function dw(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof rg||n instanceof Kr||n instanceof Fn||n instanceof _l)}function qa(n,e,t){if(!dw(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const r=tg(t);throw e.pu("an object"===r?n+" a custom object":n+" "+r)}var s}function lf(n,e,t){if((e=(0,tn.Yj)(e))instanceof oa)return e._internalPath;if("string"==typeof e)return uf(n,e);throw ky("Field path arguments must be of type string or ",n,!1,void 0,t)}const hw=new RegExp("[~\\*/\\[\\]]");function uf(n,e,t){if(e.search(hw)>=0)throw ky(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oa(...e.split("."))._internalPath}catch{throw ky(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ky(n,e,t,r,s){const c=r&&!r.isEmpty(),u=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(c||u)&&(y+=" (found",c&&(y+=` in field ${r}`),u&&(y+=` in document ${s}`),y+=")"),new ge(J.INVALID_ARGUMENT,g+n+y)}function Oy(n,e){return n.some(t=>t.isEqual(e))}class id{constructor(e,t,r,s,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ny(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ny extends id{data(){return super.data()}}function fw(n,e){return"string"==typeof e?uf(n,e):e instanceof oa?e._internalPath:e._delegate._internalPath}function nP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ge(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TS{}class sg extends TS{}function vl(n,e,...t){let r=[];e instanceof TS&&r.push(e),r=r.concat(t),function(c){const u=c.filter(y=>y instanceof sa).length,g=c.filter(y=>y instanceof Fy).length;if(u>1||u>0&&g>0)throw new ge(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Fy extends sg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Fy(e,t,r)}_apply(e){const t=this._parse(e);return PS(e._query,t),new Yr(e.firestore,e.converter,bv(e._query,t))}_parse(e){const t=cf(e.firestore);return function(c,u,g,y,w,D,A){let M;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new ge(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){gw(A,D);const N=[];for(const X of A)N.push(MS(y,c,X));M={arrayValue:{values:N}}}else M=MS(y,c,A)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||gw(A,D),M=og(g,"where",A,"in"===D||"not-in"===D);return Ht.create(w,D,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class sa extends TS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sa(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let u=s;const g=c.getFlattenedFilters();for(const y of g)PS(u,y),u=bv(u,y)}(e._query,t),new Yr(e.firestore,e.converter,bv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ly extends sg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ly(e,t)}_apply(e){const t=function(s,c,u){if(null!==s.startAt)throw new ge(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new ge(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Em(c,u)}(e._query,this._field,this._direction);return new Yr(e.firestore,e.converter,function(s,c){const u=s.explicitOrderBy.concat([c]);return new Js(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Vy extends sg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Vy(e,t,r)}_apply(e){return new Yr(e.firestore,e.converter,Vu(e._query,this._limit,this._limitType))}}class df extends sg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new df(e,t,r)}_apply(e){const t=RS(e,this.type,this._docOrFields,this._inclusive);return new Yr(e.firestore,e.converter,(c=t,new Js((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class ag extends sg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ag(e,t,r)}_apply(e){const t=RS(e,this.type,this._docOrFields,this._inclusive);return new Yr(e.firestore,e.converter,(c=t,new Js((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function RS(n,e,t,r){if(t[0]=(0,tn.Yj)(t[0]),t[0]instanceof id)return function(c,u,g,y,w){if(!y)throw new ge(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const D=[];for(const A of Lu(c))if(A.field.isKeyField())D.push(Mu(u,y.key));else{const M=y.data.field(A.field);if(Th(M))throw new ge(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const N=A.field.canonicalString();throw new ge(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}D.push(M)}return new tl(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=cf(n.firestore);return function(u,g,y,w,D,A){const M=u.explicitOrderBy;if(D.length>M.length)throw new ge(J.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let X=0;X<D.length;X++){const re=D[X];if(M[X].field.isKeyField()){if("string"!=typeof re)throw new ge(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof re}`);if(!yv(u)&&-1!==re.indexOf("/"))throw new ge(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${re}' contains a slash.`);const de=u.path.child(Ut.fromString(re));if(!Pe.isDocumentKey(de))throw new ge(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${de}' is not because it contains an odd number of segments.`);const we=new Pe(de);N.push(Mu(g,we))}else{const de=og(y,w,re);N.push(de)}}return new tl(N,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function MS(n,e,t){if("string"==typeof(t=(0,tn.Yj)(t))){if(""===t)throw new ge(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yv(e)&&-1!==t.indexOf("/"))throw new ge(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ut.fromString(t));if(!Pe.isDocumentKey(r))throw new ge(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mu(n,new Pe(r))}if(t instanceof Fn)return Mu(n,t._key);throw new ge(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tg(t)}.`)}function gw(n,e){if(!Array.isArray(n)||0===n.length)throw new ge(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PS(n,e){const t=function(s,c){for(const u of s)for(const g of u.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ge(J.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hf{convertValue(e,t="none"){switch(Ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ys(e,(s,c)=>{r[s]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new rg(An(e.latitude),An(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Va(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ah(e));default:return null}}convertTimestamp(e){const t=Jc(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ut.fromString(e);Ge(Hu(r));const s=new oo(r.get(1),r.get(3)),c=new Pe(r.popFirst(5));return s.isEqual(t)||ur(`Document ${c} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function yl(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ff extends hf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}class od{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bl extends id{constructor(e,t,r,s,c,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pf extends bl{data(e={}){return super.data(e)}}class Ya{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new od(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pf(this._firestore,this._userDataWriter,r.key,r,new od(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(g=>({type:"added",doc:new pf(s._firestore,s._userDataWriter,g.doc.key,g.doc,new od(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:u++}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(g=>c||3!==g.type).map(g=>{const y=new pf(s._firestore,s._userDataWriter,g.doc.key,g.doc,new od(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter);let w=-1,D=-1;return 0!==g.type&&(w=u.indexOf(g.doc.key),u=u.delete(g.doc.key)),1!==g.type&&(u=u.add(g.doc),D=u.indexOf(g.doc.key)),{type:Jk(g.type),doc:y,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Jk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be()}}function By(n,e){return n instanceof bl&&e instanceof bl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ya&&e instanceof Ya&&n._firestore===e._firestore&&sw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class sd extends hf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}function cP(n,e,t){n=Bt(n,Fn);const r=Bt(n.firestore,Rn),s=yl(n.converter,e,t);return cg(r,[lw(cf(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,xn.none())])}function vw(n,e,t,...r){n=Bt(n,Fn);const s=Bt(n.firestore,Rn),c=cf(s);let u;return u="string"==typeof(e=(0,tn.Yj)(e))||e instanceof oa?Py(c,"updateDoc",n._key,e,t,r):CS(c,"updateDoc",n._key,e),cg(s,[u.toMutation(n._key,xn.exists(!0))])}function kS(n,...e){var t,r,s;n=(0,tn.Yj)(n);let c={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||aw(e[u])||(c=e[u],u++);const g={includeMetadataChanges:c.includeMetadataChanges};if(aw(e[u])){const A=e[u];e[u]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[u+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[u+2]=null===(s=A.complete)||void 0===s?void 0:s.bind(A)}let y,w,D;if(n instanceof Fn)w=Bt(n.firestore,Rn),D=Fu(n._key.path),y={next:A=>{e[u]&&e[u](yw(w,n,A))},error:e[u+1],complete:e[u+2]};else{const A=Bt(n,Yr);w=Bt(A.firestore,Rn),D=A._query;const M=new sd(w);y={next:N=>{e[u]&&e[u](new Ya(w,M,A,N))},error:e[u+1],complete:e[u+2]},nP(n._query)}return function(M,N,X,re){const de=new gl(re),we=new NE(N,de,X);return M.asyncQueue.enqueueAndForget((0,he.c)(function*(){return ly(yield af(M),we)})),()=>{de.La(),M.asyncQueue.enqueueAndForget((0,he.c)(function*(){return kE(yield af(M),we)}))}}(Qn(w),D,g,y)}function cg(n,e){return function(r,s){const c=new Nr;return r.asyncQueue.enqueueAndForget((0,he.c)(function*(){return function jA(n,e,t){return BE.apply(this,arguments)}(yield tw(r),s,c)})),c.promise}(Qn(n),e)}function yw(n,e,t){const r=t.docs.get(e._key),s=new sd(n);return new bl(n,s,e._key,r,new od(t.hasPendingWrites,t.fromCache),e.converter)}const Uy={maxAttempts:5};class bw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cf(e)}set(e,t,r){this._verifyNotCommitted();const s=Ka(e,this._firestore),c=yl(s.converter,t,r),u=lw(this._dataReader,"WriteBatch.set",s._key,c,null!==s.converter,r);return this._mutations.push(u.toMutation(s._key,xn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const c=Ka(e,this._firestore);let u;return u="string"==typeof(t=(0,tn.Yj)(t))||t instanceof oa?Py(this._dataReader,"WriteBatch.update",c._key,t,r,s):CS(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(u.toMutation(c._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ka(e,this._firestore);return this._mutations=this._mutations.concat(new ju(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ka(n,e){if((n=(0,tn.Yj)(n)).firestore!==e)throw new ge(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pP extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=cf(t)}get(t){const r=Ka(t,this._firestore),s=new ff(this._firestore);return this._transaction.lookup([r._key]).then(c=>{if(!c||1!==c.length)return Be();const u=c[0];if(u.isFoundDocument())return new id(this._firestore,s,u.key,u,r.converter);if(u.isNoDocument())return new id(this._firestore,s,r._key,null,r.converter);throw Be()})}set(t,r,s){const c=Ka(t,this._firestore),u=yl(c.converter,r,s),g=lw(this._dataReader,"Transaction.set",c._key,u,null!==c.converter,s);return this._transaction.set(c._key,g),this}update(t,r,s,...c){const u=Ka(t,this._firestore);let g;return g="string"==typeof(r=(0,tn.Yj)(r))||r instanceof oa?Py(this._dataReader,"Transaction.update",u._key,r,s,c):CS(this._dataReader,"Transaction.update",u._key,r),this._transaction.update(u._key,g),this}delete(t){const r=Ka(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ka(e,this._firestore),r=new sd(this._firestore);return super.get(e).then(s=>new bl(this._firestore,r,t._key,s._document,new od(!1,!1),t.converter))}}function jS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bP(){if(typeof Uint8Array>"u")throw new ge("unimplemented","Uint8Arrays are not available in this environment.")}function IP(){if(!function iT(){return typeof atob<"u"}())throw new ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){_h=su.SDK_VERSION,(0,su._registerComponent)(new WC.Yl("firestore",(r,{instanceIdentifier:s,options:c})=>{const u=r.getProvider("app").getImmediate(),g=new Rn(new Ak(r.getProvider("auth-internal")),new pm(r.getProvider("app-check-internal")),function(w,D){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ge(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(w.options.projectId,D)}(u,s),u);return c=Object.assign({useFetchStreams:t},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),(0,su.registerVersion)(c0,"4.4.2",e),(0,su.registerVersion)(c0,"4.4.2","esm2017")}();class lg{constructor(e){this._delegate=e}static fromBase64String(e){return IP(),new lg(Kr.fromBase64String(e))}static fromUint8Array(e){return bP(),new lg(Kr.fromUint8Array(e))}toBase64(){return IP(),this._delegate.toBase64()}toUint8Array(){return bP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $S(n){return function i(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class o{enableIndexedDbPersistence(e,t){return function pS(n,e){_S(n=Bt(n,Rn));const t=Qn(n);if(t._uninitializedComponentsProvider)throw new ge(J.FAILED_PRECONDITION,"SDK cache is already specified.");to("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new Ju;return mS(t,s,new yy(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function QM(n){_S(n=Bt(n,Rn));const e=Qn(n);if(e._uninitializedComponentsProvider)throw new ge(J.FAILED_PRECONDITION,"SDK cache is already specified.");to("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Ju;return mS(e,r,new tS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gS(n){if(n._initialized&&!n._terminated)throw new ge(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.c)(function*(){try{yield(t=(0,he.c)(function*(s){if(!ko.D())return Promise.resolve();const c=s+"main";yield ko.delete(c)}),function r(s){return t.apply(this,arguments)})(zv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class a{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof oo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&to("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function iw(n,e,t,r={}){var s;const c=(n=Bt(n,xy))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==u&&to("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},c),{host:u,ssl:!1})),r.mockUserToken){let g,y;if("string"==typeof r.mockUserToken)g=r.mockUserToken,y=Ir.MOCK_USER;else{g=(0,tn.YD)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ge(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ir(w)}n._authCredentials=new Tk(new PR(g,y))}}(this._delegate,e,t,r)}enableNetwork(){return function XM(n){return function jM(n){return n.asyncQueue.enqueue((0,he.c)(function*(){const e=yield rS(n),t=yield iS(n);return e.setNetworkEnabled(!0),function(s){const c=Re(s);return c.v_.delete(0),Ym(c)}(t)}))}(Qn(n=Bt(n,Rn)))}(this._delegate)}disableNetwork(){return function Ry(n){return function $M(n){return n.asyncQueue.enqueue((0,he.c)(function*(){const e=yield rS(n),t=yield iS(n);return e.setNetworkEnabled(!1),(r=(0,he.c)(function*(c){const u=Re(c);u.v_.add(0),yield hl(u),u.x_.set("Offline")}),function s(c){return r.apply(this,arguments)})(t);var r}))}(Qn(n=Bt(n,Rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ZM(n){return function(t){const r=new Nr;return t.asyncQueue.enqueueAndForget((0,he.c)(function*(){return function OM(n,e){return fy.apply(this,arguments)}(yield tw(t),r)})),r.promise}(Qn(n=Bt(n,Rn)))}(this._delegate)}onSnapshotsInSync(e){return function OS(n,e){return function cS(n,e){const t=new gl(e);return n.asyncQueue.enqueueAndForget((0,he.c)(function*(){return s=yield af(n),c=t,Re(s).K_.add(c),void c.next();var s,c})),()=>{t.La(),n.asyncQueue.enqueueAndForget((0,he.c)(function*(){return s=yield af(n),c=t,void Re(s).K_.delete(c);var s,c}))}}(Qn(n=Bt(n,Rn)),aw(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ne(this,ow(this._delegate,e))}catch(t){throw C(t,"collection()","Firestore.collection()")}}doc(e){try{return new E(this,td(this._delegate,e))}catch(t){throw C(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new W(this,function ed(n,e){if(n=Bt(n,xy),Cy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ge(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yr(n,null,(r=e,new Js(Ut.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw C(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function mP(n,e,t){n=Bt(n,Rn);const r=Object.assign(Object.assign({},Uy),t);return function(c){if(c.maxAttempts<1)throw new ge(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(c,u,g){const y=new Nr;return c.asyncQueue.enqueueAndForget((0,he.c)(function*(){const w=yield function oS(n){return Ey(n).then(e=>e.datastore)}(c);new BM(c.asyncQueue,w,g,u,y).ja()})),y.promise}(Qn(n),s=>e(new pP(n,s)),r)}(this._delegate,t=>e(new f(this,t)))}batch(){return Qn(this._delegate),new _(new bw(this._delegate,e=>cg(this._delegate,e)))}loadBundle(e){return function Gk(n,e){const t=Qn(n=Bt(n,Rn)),r=new WM;return function zM(n,e,t,r){const s=function(u,g){let y;return y="string"==typeof u?AT().encode(u):u,D=function(D,A){if(D instanceof Uint8Array)return nS(D,A);if(D instanceof ArrayBuffer)return nS(new Uint8Array(D),A);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new by(D,g);var D}(t,Ku(e));n.asyncQueue.enqueueAndForget((0,he.c)(function*(){!function Uk(n,e,t){const r=Re(n);var s;(s=(0,he.c)(function*(u,g,y){try{const w=yield g.getMetadata();if(yield function(X,re){const de=Re(X),we=Nn(re.createTime);return de.persistence.runTransaction("hasNewerBundle","readonly",He=>de.$r.getBundleMetadata(He,re.id)).then(He=>!!He&&He.createTime.compareTo(we)>=0)}(u.localStore,w))return yield g.close(),y._completeWith({taskState:"Success",documentsLoaded:(X=w).totalDocuments,bytesLoaded:X.totalBytes,totalDocuments:X.totalDocuments,totalBytes:X.totalBytes}),Promise.resolve(new Set);y._updateProgress(LA(w));const D=new Xm(w,u.localStore,g.serializer);let A=yield g.Oa();for(;A;){const N=yield D.na(A);N&&y._updateProgress(N),A=yield g.Oa()}const M=yield D.complete();return yield Wa(u,M.sa,void 0),yield function(X,re){const de=Re(X);return de.persistence.runTransaction("Save bundle","readwrite",we=>de.$r.saveBundleMetadata(we,re))}(u.localStore,w),y._completeWith(M.progress),Promise.resolve(M.ia)}catch(w){return to("SyncEngine",`Loading bundle failed with ${w}`),y._failWith(w),Promise.resolve(new Set)}var X}),function c(u,g,y){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield tw(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Wk(n,e){return function lS(n,e){return n.asyncQueue.enqueue((0,he.c)(function*(){return function(r,s){const c=Re(r);return c.persistence.runTransaction("Get named query","readonly",u=>c.$r.getNamedQuery(u,s))}(yield sf(n),e)}))}(Qn(n=Bt(n,Rn)),e).then(t=>t?new Yr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new W(this,t):null)}}class l extends hf{constructor(e){super(),this.firestore=e}convertBytes(e){return new lg(new Kr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return E.forKey(t,this.firestore,null)}}class f{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new l(e)}get(e){const t=ue(e);return this._delegate.get(t).then(r=>new O(this._firestore,new bl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=ue(e);return r?(jS("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=ue(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=ue(e);return this._delegate.delete(t),this}}class _{constructor(e){this._delegate=e}set(e,t,r){const s=ue(e);return r?(jS("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=ue(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=ue(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class b{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new V(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=b.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let c=s.get(t);return c||(c=new b(e,new l(e),t),s.set(t,c)),c}}b.INSTANCES=new WeakMap;class E{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new l(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new E(t,new Fn(t._delegate,r,new Pe(e)))}static forKey(e,t,r){return new E(t,new Fn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ne(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ne(this.firestore,ow(this._delegate,e))}catch(t){throw C(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tn.Yj)(e))instanceof Fn&&ng(this._delegate,e)}set(e,t){t=jS("DocumentReference.set",t);try{return t?cP(this._delegate,e,t):cP(this._delegate,e)}catch(r){throw C(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vw(this._delegate,e):vw(this._delegate,e,t,...r)}catch(s){throw C(s,"updateDoc()","DocumentReference.update()")}}delete(){return function lP(n){return cg(Bt(n.firestore,Rn),[new ju(n._key,xn.none())])}(this._delegate)}onSnapshot(...e){const t=S(e),r=R(e,s=>new O(this.firestore,new bl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return kS(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function tO(n){n=Bt(n,Fn);const e=Bt(n.firestore,Rn),t=Qn(e),r=new sd(e);return function sS(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,he.c)(function*(){return(r=(0,he.c)(function*(c,u,g){try{const y=yield function(D,A){const M=Re(D);return M.persistence.runTransaction("read document","readonly",N=>M.localDocuments.getDocument(N,A))}(c,u);y.isFoundDocument()?g.resolve(y):y.isNoDocument()?g.resolve(null):g.reject(new ge(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const w=nf(y,`Failed to get document '${u} from cache`);g.reject(w)}}),function s(c,u,g){return r.apply(this,arguments)})(yield sf(n),e,t);var r})),t.promise}(t,n._key).then(s=>new bl(e,r,n._key,s,new od(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function oP(n){n=Bt(n,Fn);const e=Bt(n.firestore,Rn);return wy(Qn(e),n._key,{source:"server"}).then(t=>yw(e,n,t))}(this._delegate):function eO(n){n=Bt(n,Fn);const e=Bt(n.firestore,Rn);return wy(Qn(e),n._key).then(t=>yw(e,n,t))}(this._delegate),t.then(r=>new O(this.firestore,new bl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new E(this.firestore,this._delegate.withConverter(e?b.getInstance(this.firestore,e):null))}}function C(n,e,t){return n.message=n.message.replace(e,t),n}function S(n){for(const e of n)if("object"==typeof e&&!$S(e))return e;return{}}function R(n,e){var t,r;let s;return s=$S(n[0])?n[0]:$S(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{s.next&&s.next(e(c))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class O{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new E(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return By(this._delegate,e._delegate)}}class V extends O{data(e){const t=this._delegate.data(e);return this._delegate._converter||function zD(n,e){n||Be()}(void 0!==t),t}}class W{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new l(e)}where(e,t,r){try{return new W(this.firestore,vl(this._delegate,function Cr(n,e,t){const r=e,s=fw("where",n);return Fy._create(s,r,t)}(e,t,r)))}catch(s){throw C(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new W(this.firestore,vl(this._delegate,function Yk(n,e="asc"){const t=e,r=fw("orderBy",n);return Ly._create(r,t)}(e,t)))}catch(r){throw C(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new W(this.firestore,vl(this._delegate,function Kk(n){return Ay("limit",n),Vy._create("limit",n,"F")}(e)))}catch(t){throw C(t,"limit()","Query.limit()")}}limitToLast(e){try{return new W(this.firestore,vl(this._delegate,function Qk(n){return Ay("limitToLast",n),Vy._create("limitToLast",n,"L")}(e)))}catch(t){throw C(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new W(this.firestore,vl(this._delegate,function rP(...n){return df._create("startAt",n,!0)}(...e)))}catch(t){throw C(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new W(this.firestore,vl(this._delegate,function AS(...n){return df._create("startAfter",n,!1)}(...e)))}catch(t){throw C(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new W(this.firestore,vl(this._delegate,function SS(...n){return ag._create("endBefore",n,!1)}(...e)))}catch(t){throw C(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new W(this.firestore,vl(this._delegate,function xS(...n){return ag._create("endAt",n,!0)}(...e)))}catch(t){throw C(t,"endAt()","Query.endAt()")}}isEqual(e){return sw(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function sP(n){n=Bt(n,Yr);const e=Bt(n.firestore,Rn),t=Qn(e),r=new sd(e);return function HM(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,he.c)(function*(){return(r=(0,he.c)(function*(c,u,g){try{const y=yield Wv(c,u,!0),w=new bi(u,y.hs),D=w.ha(y.documents),A=w.applyChanges(D,!1);g.resolve(A.snapshot)}catch(y){const w=nf(y,`Failed to execute query '${u} against cache`);g.reject(w)}}),function s(c,u,g){return r.apply(this,arguments)})(yield sf(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Ya(e,r,n,s))}(this._delegate):"server"===e?.source?function aP(n){n=Bt(n,Yr);const e=Bt(n.firestore,Rn),t=Qn(e),r=new sd(e);return aS(t,n._query,{source:"server"}).then(s=>new Ya(e,r,n,s))}(this._delegate):function nO(n){n=Bt(n,Yr);const e=Bt(n.firestore,Rn),t=Qn(e),r=new sd(e);return nP(n._query),aS(t,n._query).then(s=>new Ya(e,r,n,s))}(this._delegate),t.then(r=>new Ie(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=S(e),r=R(e,s=>new Ie(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return kS(this._delegate,t,r)}withConverter(e){return new W(this.firestore,this._delegate.withConverter(e?b.getInstance(this.firestore,e):null))}}class fe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new V(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ie{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new W(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new V(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new fe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new V(this._firestore,r))})}isEqual(e){return By(this._delegate,e._delegate)}}class Ne extends W{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new E(this.firestore,e):null}doc(e){try{return new E(this.firestore,void 0===e?td(this._delegate):td(this._delegate,e))}catch(t){throw C(t,"doc()","CollectionReference.doc()")}}add(e){return function rO(n,e){const t=Bt(n.firestore,Rn),r=td(n),s=yl(n.converter,e);return cg(t,[lw(cf(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new E(this.firestore,t))}isEqual(e){return ng(this._delegate,e._delegate)}withConverter(e){return new Ne(this.firestore,this._delegate.withConverter(e?b.getInstance(this.firestore,e):null))}}function ue(n){return Bt(n,Fn)}class dt{constructor(...e){this._delegate=new oa(...e)}static documentId(){return new dt(En.keyField().canonicalString())}isEqual(e){return(e=(0,tn.Yj)(e))instanceof oa&&this._delegate._internalPath.isEqual(e._internalPath)}}class At{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gP(){return new bS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new At(e)}static delete(){const e=function jy(){return new My("deleteField")}();return e._methodName="FieldValue.delete",new At(e)}static arrayUnion(...e){const t=function _P(...n){return new IS("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new At(t)}static arrayRemove(...e){const t=function VS(...n){return new ES("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new At(t)}static increment(e){const t=function dO(n){return new wS("increment",n)}(e);return t._methodName="FieldValue.increment",new At(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zt={Firestore:a,GeoPoint:rg,Timestamp:On,Blob:lg,Transaction:f,WriteBatch:_,DocumentReference:E,DocumentSnapshot:O,Query:W,QueryDocumentSnapshot:V,QuerySnapshot:Ie,CollectionReference:Ne,FieldPath:dt,FieldValue:At,setLogLevel:function d(n){!function Ck(n){wu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function HS(n,e){return function EP(n,e=eh){return new jn._(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function wP(n,e){return HS(n,e).pipe((0,yt.k)(t=>({payload:t,type:"query"})))}!function mf(n){(function Qr(n,e){n.INTERNAL.registerComponent(new WC.Yl("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},zt)))})(n,(e,t)=>new a(e,t,new o)),n.registerVersion("@firebase/firestore-compat","0.3.25")}(Uc.c);class yO{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:c}=DO(r,t);return new EO(s,c,this.afs)}snapshotChanges(){return function Z1(n,e){return HS(n,e).pipe(wo(void 0),uI(),(0,yt.k)(t=>{const[r,s]=t;return s.exists?r?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pi)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.k)(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return en(this.ref.get(e)).pipe(pi)}}function zS(n,e){return wP(n,e).pipe(wo(void 0),uI(),(0,yt.k)(t=>{const[r,s]=t,c=s.payload.docChanges(),u=c.map(g=>({type:g.type,payload:g}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((g,y)=>{const w=c.find(A=>A.doc.ref.isEqual(g.ref)),D=r?.payload.docs.find(A=>A.ref.isEqual(g.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(g.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(g.metadata)||u.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:g}})}),u}))}function bO(n,e,t){return zS(n,t).pipe(ya((r,s)=>function X1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function J1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return CP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return CP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return CP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(c=>c.payload),e),[]),sR(),(0,yt.k)(r=>r.map(s=>({type:s.type,payload:s}))))}function CP(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function IO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class EO{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.k)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(wo(void 0),uI(),er(([r,s])=>s.length>0||!r),(0,yt.k)(([,r])=>r),pi)}auditTrail(e){return this.stateChanges(e).pipe(ya((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=IO(e);return bO(this.query,t,this.afs.schedulers.outsideAngular).pipe(pi)}valueChanges(e={}){return wP(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.k)(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),pi)}get(e){return en(this.query.get(e)).pipe(pi)}add(e){return this.ref.add(e)}doc(e){return new yO(this.ref.doc(e),this.afs)}}class eN{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zS(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.k)(t=>t.filter(r=>e.indexOf(r.type)>-1)),er(t=>t.length>0),pi):zS(this.query,this.afs.schedulers.outsideAngular).pipe(pi)}auditTrail(e){return this.stateChanges(e).pipe(ya((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=IO(e);return bO(this.query,t,this.afs.schedulers.outsideAngular).pipe(pi)}valueChanges(e={}){return wP(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.k)(r=>r.payload.docs.map(s=>e.idField?{[e.idField]:s.id,...s.data()}:s.data())),pi)}get(e){return en(this.query.get(e)).pipe(pi)}}const wO=new h.UbH("angularfire2.enableFirestorePersistence"),CO=new h.UbH("angularfire2.firestore.persistenceSettings"),tN=new h.UbH("angularfire2.firestore.settings"),nN=new h.UbH("angularfire2.firestore.use-emulator");function DO(n,e=(t=>t)){return{query:e(n),ref:n}}let DP=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,s,c,u,g,y,w,D,A,M,N,X,re,de,we,He){this.schedulers=y;const De=S_(t,g,r),We=D;A&&GC(De,g,M,X,re,de,N,we),[this.firestore,this.persistenceEnabled$]=R_(`${De.name}.firestore`,"AngularFirestore",De.name,()=>{const _t=g.runOutsideAngular(()=>De.firestore());if(c&&_t.settings(c),We&&_t.useEmulator(...We),s&&!Yi(u)){const Qt=()=>{try{return en(_t.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Dr){return typeof console<"u"&&console.warn(Dr),Qe(!1)}};return[_t,g.runOutsideAngular(Qt)]}return[_t,Qe(!1)]},[c,We,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:u}=DO(s,r),g=this.schedulers.ngZone.run(()=>c);return new EO(g,u,this)}collectionGroup(t,r){const s=r||(u=>u),c=this.firestore.collectionGroup(t);return new eN(s(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new yO(s,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(h.CoB(xa),h.CoB(Fp,8),h.CoB(wO,8),h.CoB(tN,8),h.CoB(h.AHE),h.CoB(h.WW2),h.CoB(th),h.CoB(CO,8),h.CoB(nN,8),h.CoB(Pi,8),h.CoB(jC,8),h.CoB($C,8),h.CoB(HC,8),h.CoB(cI,8),h.CoB(lI,8),h.CoB(zC,8),h.CoB(nI,8))};static \u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),rN=(()=>{class n{constructor(){Uc.c.registerVersion("angularfire",xC.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:wO,useValue:!0},{provide:CO,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=h.a4G({type:n});static \u0275inj=h.s3X({providers:[DP]})}return n})(),TO=(()=>{class n{constructor(t){this.firestore=t}getTratte(){return this.firestore.collection("tratte").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(DP))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iN(n,e){if(1&n&&(h.I0R(0,"div",20),h.OEk(1),h.C$Y()),2&n){const t=h.GaO().$implicit;h.yG2(),h.oRS(" ",t.note," ")}}const gf=(n,e,t)=>({FCE:n,AMAT:e,atm:t}),GS=(n,e,t,r)=>({FCE:n,AMAT:e,atm:t,RFI:r});function oN(n,e){if(1&n){const t=h.KQA();h.I0R(0,"article")(1,"div",16)(2,"div",17)(3,"h3",18)(4,"a",10),h.qCj("click",function(){const c=h.usT(t).$implicit,u=h.GaO(2);return h.CGJ(u.sendInfo(c.id))}),h.OEk(5),h.C$Y(),h.yuY(6,iN,2,1,"div",19),h.C$Y(),h.I0R(7,"div",20),h.OEk(8),h.C$Y()(),h.I0R(9,"div",21),h.OEk(10),h.I0R(11,"a",22),h.qCj("click",function(){const c=h.usT(t).$implicit,u=h.GaO(2);return h.CGJ(u.sendInfo(c.id))}),h.OEk(12,"Playlist"),h.wR5(13,"span",23),h.C$Y()(),h.wR5(14,"div",24),h.I0R(15,"div",25)(16,"span",26),h.OEk(17," circle "),h.C$Y()()()()}if(2&n){const t=e.$implicit;h.yG2(),h.m4B("background","url("+t.srcimg+") center no-repeat"),h.yG2(2),h.E7m("ngClass",h.uAc(12,gf,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore)),h.yG2(2),h.CAO("",t.partenza," - ",t.destinazione,""),h.yG2(),h.E7m("ngIf",""!==t.note),h.yG2(2),h.cNF(t.gestore),h.yG2(2),h.MjK(" Vivi il viaggio da ",t.partenza," a ",t.destinazione," ",t.note," con questa playlist "),h.yG2(),h.E7m("ngClass",h.uAc(16,gf,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore)),h.yG2(5),h.E7m("ngClass",h.WuN(20,GS,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore,"RFI"==t.gestore))}}function sN(n,e){if(1&n&&(h.I0R(0,"div"),h.wR5(1,"br"),h.I0R(2,"section"),h.yuY(3,oN,18,25,"article",15),h.C$Y()()),2&n){const t=h.GaO();h.yG2(3),h.E7m("ngForOf",t.listaTratte)}}function aN(n,e){if(1&n&&(h.I0R(0,"div",20),h.OEk(1),h.C$Y()),2&n){const t=h.GaO(2).$implicit;h.yG2(),h.oRS(" ",t.note," ")}}function cN(n,e){if(1&n){const t=h.KQA();h.I0R(0,"article")(1,"div",16)(2,"div",17)(3,"h3",18)(4,"a",10),h.qCj("click",function(){h.usT(t);const s=h.GaO().$implicit,c=h.GaO(2);return h.CGJ(c.sendInfo(s.id))}),h.OEk(5),h.C$Y(),h.yuY(6,aN,2,1,"div",19),h.C$Y(),h.I0R(7,"div",20),h.OEk(8),h.C$Y()(),h.I0R(9,"div",21),h.OEk(10),h.I0R(11,"a",22),h.qCj("click",function(){h.usT(t);const s=h.GaO().$implicit,c=h.GaO(2);return h.CGJ(c.sendInfo(s.id))}),h.OEk(12,"Playlist"),h.wR5(13,"span",23),h.C$Y()(),h.wR5(14,"div",24),h.I0R(15,"div",25)(16,"span",26),h.OEk(17," circle "),h.C$Y()()()()}if(2&n){const t=h.GaO().$implicit;h.yG2(),h.m4B("background","url("+t.srcimg+") center no-repeat"),h.yG2(2),h.E7m("ngClass",h.uAc(12,gf,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore)),h.yG2(2),h.CAO("",t.partenza," - ",t.destinazione,""),h.yG2(),h.E7m("ngIf",""!==t.note),h.yG2(2),h.oRS(" ",t.gestore," "),h.yG2(2),h.MjK(" Vivi il viaggio da ",t.partenza," a ",t.destinazione," ",t.note," con questa playlist "),h.yG2(),h.E7m("ngClass",h.uAc(16,gf,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore)),h.yG2(5),h.E7m("ngClass",h.WuN(20,GS,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore,"RFI"==t.gestore))}}function lN(n,e){if(1&n&&(h.SAx(0),h.yuY(1,cN,18,25,"article",12),h.k70()),2&n){const t=e.$implicit;h.yG2(),h.E7m("ngIf","treno"==t.mezzo)}}function uN(n,e){if(1&n&&(h.I0R(0,"div"),h.wR5(1,"br"),h.I0R(2,"section"),h.yuY(3,lN,2,1,"ng-container",15),h.C$Y()()),2&n){const t=h.GaO();h.yG2(3),h.E7m("ngForOf",t.listaTratte)}}function dN(n,e){if(1&n&&(h.I0R(0,"div",20),h.OEk(1),h.C$Y()),2&n){const t=h.GaO(2).$implicit;h.yG2(),h.oRS(" ",t.note," ")}}function hN(n,e){if(1&n){const t=h.KQA();h.I0R(0,"article")(1,"div",16)(2,"div",17)(3,"h3",18)(4,"a",10),h.qCj("click",function(){h.usT(t);const s=h.GaO().$implicit,c=h.GaO(2);return h.CGJ(c.sendInfo(s.id))}),h.OEk(5),h.C$Y(),h.yuY(6,dN,2,1,"div",19),h.C$Y(),h.I0R(7,"div",20),h.OEk(8),h.C$Y()(),h.I0R(9,"div",21),h.OEk(10),h.I0R(11,"a",22),h.qCj("click",function(){h.usT(t);const s=h.GaO().$implicit,c=h.GaO(2);return h.CGJ(c.sendInfo(s.id))}),h.OEk(12,"Playlist"),h.wR5(13,"span",23),h.C$Y()(),h.wR5(14,"div",24),h.I0R(15,"div",25)(16,"span",26),h.OEk(17," circle "),h.C$Y()()()()}if(2&n){const t=h.GaO().$implicit;h.yG2(),h.m4B("background","url("+t.srcimg+") center no-repeat"),h.yG2(2),h.E7m("ngClass",h.uAc(12,gf,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore)),h.yG2(2),h.CAO("",t.partenza," - ",t.destinazione,""),h.yG2(),h.E7m("ngIf",""!==t.note),h.yG2(2),h.oRS(" ",t.gestore," "),h.yG2(2),h.MjK(" Vivi il viaggio da ",t.partenza," a ",t.destinazione," ",t.note," con questa playlist "),h.yG2(),h.E7m("ngClass",h.uAc(16,gf,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore)),h.yG2(5),h.E7m("ngClass",h.WuN(20,GS,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore,"RFI"==t.gestore))}}function fN(n,e){if(1&n&&(h.SAx(0),h.yuY(1,hN,18,25,"article",12),h.k70()),2&n){const t=e.$implicit;h.yG2(),h.E7m("ngIf","tram"==t.mezzo)}}function pN(n,e){if(1&n&&(h.I0R(0,"div"),h.wR5(1,"br"),h.I0R(2,"section"),h.yuY(3,fN,2,1,"ng-container",15),h.C$Y()()),2&n){const t=h.GaO();h.yG2(3),h.E7m("ngForOf",t.listaTratte)}}function mN(n,e){if(1&n&&(h.I0R(0,"div",20),h.OEk(1),h.C$Y()),2&n){const t=h.GaO(2).$implicit;h.yG2(),h.oRS(" ",t.note," ")}}function gN(n,e){if(1&n){const t=h.KQA();h.I0R(0,"article")(1,"div",16)(2,"div",17)(3,"h3",18)(4,"a",10),h.qCj("click",function(){h.usT(t);const s=h.GaO().$implicit,c=h.GaO(2);return h.CGJ(c.sendInfo(s.id))}),h.OEk(5),h.C$Y(),h.yuY(6,mN,2,1,"div",19),h.C$Y(),h.I0R(7,"div",20),h.OEk(8),h.C$Y()(),h.I0R(9,"div",21),h.OEk(10),h.I0R(11,"a",22),h.qCj("click",function(){h.usT(t);const s=h.GaO().$implicit,c=h.GaO(2);return h.CGJ(c.sendInfo(s.id))}),h.OEk(12,"Playlist"),h.wR5(13,"span",23),h.C$Y()(),h.wR5(14,"div",24),h.I0R(15,"div",25)(16,"span",26),h.OEk(17," circle "),h.C$Y()()()()}if(2&n){const t=h.GaO().$implicit;h.yG2(),h.m4B("background","url("+t.srcimg+") center no-repeat"),h.yG2(2),h.E7m("ngClass",h.uAc(12,gf,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore)),h.yG2(2),h.CAO("",t.partenza," - ",t.destinazione,""),h.yG2(),h.E7m("ngIf",""!==t.note),h.yG2(2),h.oRS(" ",t.gestore," "),h.yG2(2),h.MjK(" Vivi il viaggio da ",t.partenza," a ",t.destinazione," ",t.note," con questa playlist "),h.yG2(),h.E7m("ngClass",h.uAc(16,gf,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore)),h.yG2(5),h.E7m("ngClass",h.WuN(20,GS,"FCE"==t.gestore,"AMAT"==t.gestore,"atm"==t.gestore,"RFI"==t.gestore))}}function _N(n,e){if(1&n&&(h.SAx(0),h.yuY(1,gN,18,25,"article",12),h.k70()),2&n){const t=e.$implicit;h.yG2(),h.E7m("ngIf","metro"==t.mezzo)}}function vN(n,e){if(1&n&&(h.I0R(0,"div"),h.wR5(1,"br"),h.I0R(2,"section"),h.yuY(3,_N,2,1,"ng-container",15),h.C$Y()()),2&n){const t=h.GaO();h.yG2(3),h.E7m("ngForOf",t.listaTratte)}}let TP,yN=(()=>{class n{constructor(t,r){this.firebase=t,this.router=r,this.listaTratte=[],this.sendID=new Yt.E,this.sendID$=this.sendID.asObservable(),this.activeTab="tab1"}ngOnInit(){this.firebase.getTratte().subscribe(t=>{this.listaTratte=t})}sendInfo(t){this.sendID.next(t),this.router.navigateByUrl(`/tratta/${t}`)}setActiveTab(t){this.activeTab=t}isActiveTab(t){return this.activeTab===t}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(TO),h.GI1($r))};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-tratte"]],decls:55,vars:12,consts:[["id","picture"],[1,"material-symbols-outlined","RFI"],["href","https://www.rfi.it/it.html","target","_blank"],[1,"material-symbols-outlined","FCE"],["href","https://www.circumetnea.it/","target","_blank"],[1,"material-symbols-outlined","AMAT"],["href","https://www.amat.pa.it/","target","_blank"],[1,"material-symbols-outlined","atm"],["href","https://www.atmmessinaspa.it/","target","_blank"],[1,"tabs"],[3,"click"],[1,"tab-content"],[4,"ngIf"],[2,"width","auto"],["role","alert","id","disclaimer",1,"alert","alert-warning"],[4,"ngFor","ngForOf"],[1,"blog-card","spring-fever"],[1,"title-content"],[3,"ngClass"],["class","intro",4,"ngIf"],[1,"intro"],[1,"card-info"],[3,"ngClass","click"],[1,"licon","icon-arr","icon-black"],[1,"gradient-overlay"],[1,"color-overlay"],[1,"material-symbols-outlined",3,"ngClass"]],template:function(r,s){1&r&&(h.wR5(0,"div",0),h.I0R(1,"fieldset")(2,"legend"),h.OEk(3,"Legenda"),h.C$Y(),h.I0R(4,"table")(5,"tr")(6,"td")(7,"span",1),h.OEk(8," circle "),h.C$Y()(),h.I0R(9,"td")(10,"a",2),h.OEk(11,"Rete Ferroviaria Italiana"),h.C$Y()()(),h.I0R(12,"tr")(13,"td")(14,"span",3),h.OEk(15," circle "),h.C$Y()(),h.I0R(16,"td")(17,"a",4),h.OEk(18,"Ferrovia Circumetnea"),h.C$Y()()(),h.I0R(19,"tr")(20,"td")(21,"span",5),h.OEk(22," circle "),h.C$Y()(),h.I0R(23,"td")(24,"a",6),h.OEk(25,"Azienda Municipalizzata Auto Trasporti "),h.I0R(26,"i"),h.OEk(27,"(Palermo)"),h.C$Y()()()(),h.I0R(28,"tr")(29,"td")(30,"span",7),h.OEk(31," circle "),h.C$Y()(),h.I0R(32,"td")(33,"a",8),h.OEk(34,"Azienda Trasporti Messina"),h.C$Y()()()()(),h.I0R(35,"ul",9)(36,"li",10),h.qCj("click",function(){return s.setActiveTab("tab1")}),h.OEk(37," Tutti "),h.C$Y(),h.I0R(38,"li",10),h.qCj("click",function(){return s.setActiveTab("tab2")}),h.OEk(39," Treno "),h.C$Y(),h.I0R(40,"li",10),h.qCj("click",function(){return s.setActiveTab("tab3")}),h.OEk(41," Tram "),h.C$Y(),h.I0R(42,"li",10),h.qCj("click",function(){return s.setActiveTab("tab4")}),h.OEk(43," Metro "),h.C$Y()(),h.I0R(44,"div",11),h.yuY(45,sN,4,1,"div",12)(46,uN,4,1,"div",12)(47,pN,4,1,"div",12)(48,vN,4,1,"div",12),h.C$Y(),h.I0R(49,"article",13)(50,"div",14)(51,"p")(52,"strong"),h.OEk(53,"Disclaimer :"),h.C$Y(),h.OEk(54," Le canzoni presentate su SpotiRFI sono state scelte esclusivamente sulla base dell'adeguatezza del titolo con il nome delle stazioni ferroviarie. La scelta di una canzone non implica un'approvazione o un'adesione al testo, al significato o a qualsiasi altro aspetto della canzone stessa. Le canzoni sono fornite solo a scopo di intrattenimento e non intendono rappresentare o riflettere le opinioni di SpotiRFI. "),h.C$Y()()()),2&r&&(h.yG2(36),h.eAK("active",s.isActiveTab("tab1")),h.yG2(2),h.eAK("active",s.isActiveTab("tab2")),h.yG2(2),h.eAK("active",s.isActiveTab("tab3")),h.yG2(2),h.eAK("active",s.isActiveTab("tab4")),h.yG2(3),h.E7m("ngIf",s.isActiveTab("tab1")),h.yG2(),h.E7m("ngIf",s.isActiveTab("tab2")),h.yG2(),h.E7m("ngIf",s.isActiveTab("tab3")),h.yG2(),h.E7m("ngIf",s.isActiveTab("tab4")))},dependencies:[Za,Dl,Rr],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";@import"//fonts.googleapis.com/css?family=Abril+Fatface|Droid+Serif:400,700,400italic,700italic";#picture[_ngcontent-%COMP%]{background-image:url(104Agnone-min.b7887179a1f4c43d.JPG);width:100%;height:82%;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}fieldset[_ngcontent-%COMP%]{width:35%;font-family:Merienda,cursive;border:.15em black solid;border-radius:1em;margin:3em auto 3em 3em}@media screen and (min-width: 768px) and (max-width: 1024px){fieldset[_ngcontent-%COMP%]{width:40%}}@media screen and (min-width: 281px) and (max-width: 767px){fieldset[_ngcontent-%COMP%]{width:70%;margin:3em auto}ul[_ngcontent-%COMP%]{overflow:scroll}}@media screen and (max-width: 280px){fieldset[_ngcontent-%COMP%]{width:80%;margin:3em auto}ul[_ngcontent-%COMP%]{overflow:scroll}}fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{margin:.5em;font-weight:500}td[_ngcontent-%COMP%]{font-weight:600}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:currentColor;text-decoration:none}ul[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:row;list-style-type:none;font-size:16px;font-family:Merienda,cursive;font-weight:600;padding-inline-start:0}li[_ngcontent-%COMP%]{padding:.7em 2em;cursor:pointer}li.active[_ngcontent-%COMP%]{border-bottom:.1em #D62A42 solid;color:#d62a42}li[_ngcontent-%COMP%]:hover{background-color:#d62a420a}article[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;margin:auto auto 4rem;font-family:Merienda,cursive;width:500px}section[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}#disclaimer[_ngcontent-%COMP%]{margin:4em 1em 3.5em;text-align:justify}p[_ngcontent-%COMP%]{font-size:19px;line-height:1.6}.blog-card[_ngcontent-%COMP%]{max-width:475px;width:100%;height:450px;position:relative;font-family:"Droid Serif",serif;color:#fff;top:20%;right:0;left:0;margin:0 auto;overflow:hidden;border-radius:0;box-shadow:0 10px 20px -9px #00000080;text-align:center;transition:all .4s;background-size:100%}.blog-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:all .2s;cursor:pointer}.blog-card[_ngcontent-%COMP%]   .color-overlay[_ngcontent-%COMP%]{background:#40545e80;width:475px;height:450px;position:absolute;z-index:10;top:0;left:0;transition:background .3s cubic-bezier(.33,.66,.66,1)}.blog-card[_ngcontent-%COMP%]   .gradient-overlay[_ngcontent-%COMP%]{background-image:linear-gradient(transparent 0%,#0009 21%);width:475px;height:450px;position:absolute;top:350px;left:0;z-index:15}.blog-card[_ngcontent-%COMP%]:hover{box-shadow:0 18px 20px -9px #000a1ebf}.blog-card[_ngcontent-%COMP%]:hover   .card-info[_ngcontent-%COMP%]{opacity:1;bottom:90px}.blog-card[_ngcontent-%COMP%]:hover   .color-overlay[_ngcontent-%COMP%]{background:#404046cc}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%]{margin-top:90px}.title-content[_ngcontent-%COMP%]{text-align:center;margin:170px 0 0;position:absolute;z-index:20;width:100%;top:0;left:0;transition:all .6s}.blog-card[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_changeLetter .3s 1 linear;width:80%}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-size:1.9em;font-weight:400;letter-spacing:1px;font-family:Abril Fatface,serif;margin-bottom:0;display:inline-block}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-shadow:0px 0px 10px rgba(0,0,0,.5);transition:all .2s}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-shadow:0px 8px 20px rgba(0,0,0,.95)}h3[_ngcontent-%COMP%]:after{content:" ";display:block;width:10%;height:2px;margin:20px auto;border:0;background:#006564;transition:all .2s}h3.FCE[_ngcontent-%COMP%]:after{background:#065da8}h3.AMAT[_ngcontent-%COMP%]:after{background:#00a0c7}h3.atm[_ngcontent-%COMP%]:after{background:#d60b25}@keyframes _ngcontent-%COMP%_changeLetter{0%{width:10%}to{width:80%}}.intro[_ngcontent-%COMP%]{width:170px;margin:0 auto;color:#ddd;font-style:italic;line-height:18px}h3[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]{width:170px;margin:.3em auto;color:#ddd;font-family:"Droid Serif",serif;font-style:italic;font-size:14px;line-height:18px}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ddd}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.card-info[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;position:absolute;bottom:-40px;left:0;margin:0 auto;padding:0 50px;font-size:16px;line-height:24px;z-index:20;opacity:0;transition:bottom .64s,opacity .63s cubic-bezier(.33,.66,.66,1)}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;width:100px;margin:15px auto;background:#fff;color:#444;padding:3px 10px;border-radius:2px;font-size:.8em}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#006564;color:#fff}.card-info[_ngcontent-%COMP%]   a.FCE[_ngcontent-%COMP%]:hover{background:#065da8}.card-info[_ngcontent-%COMP%]   a.AMAT[_ngcontent-%COMP%]:hover{background:#00a0c7}.card-info[_ngcontent-%COMP%]   a.atm[_ngcontent-%COMP%]:hover{background:#d60b25}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{filter:brightness(10);opacity:1}.licon[_ngcontent-%COMP%]{position:relative;width:23px;height:15px;display:inline-block;vertical-align:middle}.licon[_ngcontent-%COMP%]:before{content:"";background:url(https://rawcdn.githack.com/Nodws/NodPen/ffad95aa5244b4b09a3c7c1508a018959bbedb7e/postItem/licons.svg?) -2px -6px no-repeat;background-size:250px;width:26px;height:20px;display:inline-block;vertical-align:middle;position:absolute;top:-3px;left:0}.icon-black[_ngcontent-%COMP%]{filter:brightness(0);opacity:.6}@media (max-width:750px){.utility-info[_ngcontent-%COMP%]{text-align:center}.utility-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;margin:0;box-sizing:border-box}.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:49%;display:inline-block;box-sizing:border-box;margin:0}}@media (max-width:500px){.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type{width:100%}.card-info[_ngcontent-%COMP%]{display:none}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%], .title-content[_ngcontent-%COMP%]{margin-top:40px}.blog-card[_ngcontent-%COMP%]{height:300px}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3em}.intro[_ngcontent-%COMP%]{font-size:.8em}}.material-symbols-outlined.RFI[_ngcontent-%COMP%]{font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 24;color:#006564;margin:.5em;float:left}.material-symbols-outlined.FCE[_ngcontent-%COMP%]{font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 24;color:#065da8;margin:.5em;float:left}.material-symbols-outlined.AMAT[_ngcontent-%COMP%]{font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 24;color:#00a0c7;margin:.5em;float:left}.material-symbols-outlined.atm[_ngcontent-%COMP%]{font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 24;color:#d60b25;margin:.5em;float:left}']})}return n})();try{TP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{TP=!1}let Iw,ug,AP,co=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Al(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!TP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(h.AHE))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WS(n){return function bN(){if(null==Iw&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Iw=!0}))}finally{Iw=Iw||!1}return Iw}()?n:!!n.capture}function IN(){if(null==ug){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ug=!1,ug;if("scrollBehavior"in document.documentElement.style)ug=!0;else{const n=Element.prototype.scrollTo;ug=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ug}function SP(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function _f(n){return n.composedPath?n.composedPath()[0]:n.target}function xP(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function RP(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function RO(n){return er((e,t)=>n<=t)}let $N=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HN=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({providers:[$N]})}return n})();function MO(n,e=0){return function zN(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function YS(n){return Array.isArray(n)?n:[n]}function Lr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function zy(n){return n instanceof h.GMv?n.nativeElement:n}const PO=new Set;let dg,GN=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):qN}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function WN(n,e){if(!PO.has(n))try{dg||(dg=document.createElement("style"),e&&(dg.nonce=e),dg.setAttribute("type","text/css"),document.head.appendChild(dg)),dg.sheet&&(dg.sheet.insertRule(`@media ${n} {body{ }}`,0),PO.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(co),h.CoB(h.YND,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qN(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let YN=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Yt.E}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return kO(YS(t)).some(s=>this._registerQuery(s).mql.matches)}observe(t){let c=qo(kO(YS(t)).map(u=>this._registerQuery(u).observable));return c=Eo(c.pipe(xi(1)),c.pipe(RO(1),function xO(n,e=eh){return(0,$n.i)((t,r)=>{let s=null,c=null,u=null;const g=()=>{if(s){s.unsubscribe(),s=null;const w=c;c=null,r.next(w)}};function y(){const w=u+n,D=e.now();if(D<w)return s=this.schedule(void 0,w-D),void r.add(s);g()}t.subscribe((0,Pn.e)(r,w=>{c=w,u=e.now(),s||(s=e.schedule(y,n),r.add(s))},()=>{g(),r.complete()},void 0,()=>{c=s=null}))})}(0))),c.pipe((0,yt.k)(u=>{const g={matches:!1,breakpoints:{}};return u.forEach(({matches:y,query:w})=>{g.matches=g.matches||y,g.breakpoints[w]=y}),g}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),c={observable:new jn._(u=>{const g=y=>this._zone.run(()=>u.next(y));return r.addListener(g),()=>{r.removeListener(g)}}).pipe(wo(r),(0,yt.k)(({matches:u})=>({query:t,matches:u})),Qo(this._destroySubject)),mql:r};return this._queries.set(t,c),c}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(GN),h.CoB(h.WW2))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kO(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let MP=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function JN(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function XN(n){try{return n.frameElement}catch{return null}}(function aF(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===LO(r)||!this.isVisible(r)))return!1;let s=t.nodeName.toLowerCase(),c=LO(t);return t.hasAttribute("contenteditable")?-1!==c:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function oF(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===s?!!t.hasAttribute("controls")&&-1!==c:"video"===s?-1!==c&&(null!==c||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function sF(n){return!function tF(n){return function rF(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function eF(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function nF(n){return function iF(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||FO(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(co))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FO(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function LO(n){if(!FO(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class VO{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,r,s,c=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,c||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const s=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(s)return s}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const s=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(s)return s}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(xi(1)).subscribe(e)}}let BO=(()=>{class n{constructor(t,r,s){this._checker=t,this._ngZone=r,this._document=s}create(t,r=!1){return new VO(t,this._checker,this._ngZone,this._document,r)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(MP),h.CoB(h.WW2),h.CoB(ye))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UO(n){return 0===n.buttons||0===n.detail}function jO(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const cF=new h.UbH("cdk-input-modality-detector-options"),lF={ignoreKeys:[18,17,224,91,16]},Gy=WS({passive:!0,capture:!0});let uF=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,s,c){this._platform=t,this._mostRecentTarget=null,this._modality=new Hn.g(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(g=>g===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=_f(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(UO(u)?"keyboard":"mouse"),this._mostRecentTarget=_f(u))},this._onTouchstart=u=>{jO(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=_f(u))},this._options={...lF,...c},this.modalityDetected=this._modality.pipe(RO(1)),this.modalityChanged=this.modalityDetected.pipe(sR()),t.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Gy),s.addEventListener("mousedown",this._onMousedown,Gy),s.addEventListener("touchstart",this._onTouchstart,Gy)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Gy),document.removeEventListener("mousedown",this._onMousedown,Gy),document.removeEventListener("touchstart",this._onTouchstart,Gy))}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(co),h.CoB(h.WW2),h.CoB(ye),h.CoB(cF,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var KS=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(KS||{});const hF=new h.UbH("cdk-focus-monitor-default-options"),QS=WS({passive:!0,capture:!0});let PP=(()=>{class n{constructor(t,r,s,c,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Yt.E,this._rootNodeFocusAndBlurListener=g=>{for(let w=_f(g);w;w=w.parentElement)"focus"===g.type?this._onFocus(g,w):this._onBlur(g,w)},this._document=c,this._detectionMode=u?.detectionMode||KS.IMMEDIATE}monitor(t,r=!1){const s=zy(t);if(!this._platform.isBrowser||1!==s.nodeType)return Qe();const c=function wN(n){if(function EN(){if(null==AP){const n=typeof document<"u"?document.head:null;AP=!(!n||!n.createShadowRoot&&!n.attachShadow)}return AP}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(s)||this._getDocument(),u=this._elementInfo.get(s);if(u)return r&&(u.checkChildren=!0),u.subject;const g={checkChildren:r,subject:new Yt.E,rootNode:c};return this._elementInfo.set(s,g),this._registerGlobalListeners(g),g.subject}stopMonitoring(t){const r=zy(t),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(t,r,s){const c=zy(t);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(([g,y])=>this._originChanged(g,r,y)):(this._setOrigin(r),"function"==typeof c.focus&&c.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===KS.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===KS.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const s=this._elementInfo.get(r),c=_f(t);!s||!s.checkChildren&&r!==c||this._originChanged(r,this._getFocusOrigin(c),s)}_onBlur(t,r){const s=this._elementInfo.get(r);!s||s.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,QS),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,QS)}),this._rootNodeFocusListenerCount.set(r,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Qo(this._stopInputModalityDetector)).subscribe(c=>{this._setOrigin(c,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,QS),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,QS),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,s){this._setClasses(t,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((s,c)=>{(c===t||s.checkChildren&&c.contains(t))&&r.push([c,s])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const c=t.labels;if(c)for(let u=0;u<c.length;u++)if(c[u].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(h.WW2),h.CoB(co),h.CoB(uF),h.CoB(ye,8),h.CoB(hF,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hg=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(hg||{});const HO="cdk-high-contrast-black-on-white",zO="cdk-high-contrast-white-on-black",kP="cdk-high-contrast-active";let GO=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,h.uUt)(YN).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return hg.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(t):null,c=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),c){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return hg.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return hg.BLACK_ON_WHITE}return hg.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(kP,HO,zO),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===hg.BLACK_ON_WHITE?t.add(kP,HO):r===hg.WHITE_ON_BLACK&&t.add(kP,zO)}}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(co),h.CoB(ye))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fF=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(GO))};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({imports:[HN]})}return n})();const pF=new h.UbH("cdk-dir-doc",{providedIn:"root",factory:function mF(){return(0,h.uUt)(ye)}}),gF=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let OP=(()=>{class n{constructor(t){this.value="ltr",this.change=new h._w7,t&&(this.value=function _F(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?gF.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(pF,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ww=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({})}return n})();const yF=new h.UbH("mat-sanity-checks",{providedIn:"root",factory:function vF(){return!0}});let Wy=(()=>{class n{constructor(t,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!xP()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(GO),h.CoB(yF,8),h.CoB(ye))};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({imports:[ww,ww]})}return n})();var aa=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(aa||{});class TF{constructor(e,t,r,s=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=s,this.state=aa.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const YO=WS({passive:!0,capture:!0});class AF{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=_f(e);t&&this._events.get(e.type)?.forEach((r,s)=>{(s===t||s.contains(t))&&r.forEach(c=>c.handleEvent(e))})}}addHandler(e,t,r,s){const c=this._events.get(t);if(c){const u=c.get(r);u?u.add(s):c.set(r,new Set([s]))}else this._events.set(t,new Map([[r,new Set([s])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,YO)})}removeHandler(e,t,r){const s=this._events.get(e);if(!s)return;const c=s.get(t);c&&(c.delete(r),0===c.size&&s.delete(t),0===s.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,YO)))}}const KO={enterDuration:225,exitDuration:150},QO=WS({passive:!0,capture:!0}),ZO=["mousedown","touchstart"],XO=["mouseup","mouseleave","touchend","touchcancel"];class ZS{static#e=this._eventManager=new AF;constructor(e,t,r,s){this._target=e,this._ngZone=t,this._platform=s,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=zy(r))}fadeInRipple(e,t,r={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c={...KO,...r.animation};r.centered&&(e=s.left+s.width/2,t=s.top+s.height/2);const u=r.radius||function xF(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),s=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+s*s)}(e,t,s),g=e-s.left,y=t-s.top,w=c.enterDuration,D=document.createElement("div");D.classList.add("mat-ripple-element"),D.style.left=g-u+"px",D.style.top=y-u+"px",D.style.height=2*u+"px",D.style.width=2*u+"px",null!=r.color&&(D.style.backgroundColor=r.color),D.style.transitionDuration=`${w}ms`,this._containerElement.appendChild(D);const A=window.getComputedStyle(D),N=A.transitionDuration,X="none"===A.transitionProperty||"0s"===N||"0s, 0s"===N||0===s.width&&0===s.height,re=new TF(this,D,r,X);D.style.transform="scale3d(1, 1, 1)",re.state=aa.FADING_IN,r.persistent||(this._mostRecentTransientRipple=re);let de=null;return!X&&(w||c.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const we=()=>this._finishRippleTransition(re),He=()=>this._destroyRipple(re);D.addEventListener("transitionend",we),D.addEventListener("transitioncancel",He),de={onTransitionEnd:we,onTransitionCancel:He}}),this._activeRipples.set(re,de),(X||!w)&&this._finishRippleTransition(re),re}fadeOutRipple(e){if(e.state===aa.FADING_OUT||e.state===aa.HIDDEN)return;const t=e.element,r={...KO,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=aa.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=zy(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,ZO.forEach(r=>{ZS._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{XO.forEach(t=>{this._triggerElement.addEventListener(t,this,QO)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===aa.FADING_IN?this._startFadeOutTransition(e):e.state===aa.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=aa.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=aa.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=UO(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!jO(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===aa.VISIBLE||e.config.terminateOnPointerUp&&e.state===aa.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(ZO.forEach(t=>ZS._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&XO.forEach(t=>e.removeEventListener(t,this,QO)))}}const JO=new h.UbH("mat-ripple-global-options");let RF=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,s,c,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new ZS(this,r,t,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,s){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...s}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(h.GMv),h.GI1(h.WW2),h.GI1(co),h.GI1(JO,8),h.GI1(h.qwP,8))};static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){2&r&&h.eAK("mat-ripple-unbounded",s.unbounded)},inputs:{color:[h.Wk5.None,"matRippleColor","color"],unbounded:[h.Wk5.None,"matRippleUnbounded","unbounded"],centered:[h.Wk5.None,"matRippleCentered","centered"],radius:[h.Wk5.None,"matRippleRadius","radius"],animation:[h.Wk5.None,"matRippleAnimation","animation"],disabled:[h.Wk5.None,"matRippleDisabled","disabled"],trigger:[h.Wk5.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),MF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({imports:[Wy,Wy]})}return n})();const e1={capture:!0},t1=["focus","click","mouseenter","touchstart"],NP="mat-ripple-loader-uninitialized",FP="mat-ripple-loader-class-name",n1="mat-ripple-loader-centered",XS="mat-ripple-loader-disabled";let PF=(()=>{class n{constructor(){this._document=(0,h.uUt)(ye,{optional:!0}),this._animationMode=(0,h.uUt)(h.qwP,{optional:!0}),this._globalRippleOptions=(0,h.uUt)(JO,{optional:!0}),this._platform=(0,h.uUt)(co),this._ngZone=(0,h.uUt)(h.WW2),this._hosts=new Map,this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const s=t.target.closest(`[${NP}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(const t of t1)this._document?.addEventListener(t,this._onInteraction,e1)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of t1)this._document?.removeEventListener(r,this._onInteraction,e1)}configureRipple(t,r){t.setAttribute(NP,""),(r.className||!t.hasAttribute(FP))&&t.setAttribute(FP,r.className||""),r.centered&&t.setAttribute(n1,""),r.disabled&&t.setAttribute(XS,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,r){const s=this._hosts.get(t);s?s.disabled=r:r?t.setAttribute(XS,""):t.removeAttribute(XS)}_createRipple(t){if(!this._document)return;const r=this._hosts.get(t);if(r)return r;t.querySelector(".mat-ripple")?.remove();const s=this._document.createElement("span");s.classList.add("mat-ripple",t.getAttribute(FP)),t.append(s);const c=new RF(new h.GMv(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return c._isInitialized=!0,c.trigger=t,c.centered=t.hasAttribute(n1),c.disabled=t.hasAttribute(XS),this.attachRipple(t,c),c}attachRipple(t,r){t.removeAttribute(NP),this._hosts.set(t,r)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.ngOnDestroy(),this._hosts.delete(t))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const r1=["mat-button",""],o1=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],s1=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],NF=new h.UbH("MAT_BUTTON_CONFIG"),FF=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let a1=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,r,s,c){this._elementRef=t,this._platform=r,this._ngZone=s,this._animationMode=c,this._focusMonitor=(0,h.uUt)(PP),this._rippleLoader=(0,h.uUt)(PF),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;const u=(0,h.uUt)(NF,{optional:!0}),g=t.nativeElement,y=g.classList;this.disabledInteractive=u?.disabledInteractive??!1,this._rippleLoader?.configureRipple(g,{className:"mat-mdc-button-ripple"});for(const{attribute:w,mdcClasses:D}of FF)g.hasAttribute(w)&&y.add(...D)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(r){h.KEo()};static#t=this.\u0275dir=h.Sc5({type:n,inputs:{color:"color",disableRipple:[h.Wk5.HasDecoratorInputTransform,"disableRipple","disableRipple",h.cZD],disabled:[h.Wk5.HasDecoratorInputTransform,"disabled","disabled",h.cZD],ariaDisabled:[h.Wk5.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",h.cZD],disabledInteractive:[h.Wk5.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",h.cZD]},features:[h.QJr]})}return n})(),LF=(()=>{class n extends a1{constructor(t,r,s,c){super(t,r,s,c),this._haltDisabledEvents=u=>{this.disabled&&(u.preventDefault(),u.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}_getAriaDisabled(){return null==this.ariaDisabled?this.disabled:this.ariaDisabled}static#e=this.\u0275fac=function(r){h.KEo()};static#t=this.\u0275dir=h.Sc5({type:n,inputs:{tabIndex:[h.Wk5.HasDecoratorInputTransform,"tabIndex","tabIndex",t=>null==t?void 0:(0,h.cJ3)(t)]},features:[h.QJr,h.eg9]})}return n})(),c1=(()=>{class n extends a1{constructor(t,r,s,c){super(t,r,s,c)}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(h.GMv),h.GI1(co),h.GI1(h.WW2),h.GI1(h.qwP,8))};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,s){2&r&&(h.e48("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),h.m8U(s.color?"mat-"+s.color:""),h.eAK("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[h.eg9,h.UHJ],attrs:r1,ngContentSelectors:s1,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){1&r&&(h.kPM(o1),h.wR5(0,"span",0),h._Xx(1),h.I0R(2,"span",1),h._Xx(3,1),h.C$Y(),h._Xx(4,2),h.wR5(5,"span",2)(6,"span",3)),2&r&&h.eAK("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),VF=(()=>{class n extends LF{constructor(t,r,s,c){super(t,r,s,c)}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(h.GMv),h.GI1(co),h.GI1(h.WW2),h.GI1(h.qwP,8))};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:15,hostBindings:function(r,s){2&r&&(h.e48("disabled",s._getDisabledAttribute())("tabindex",s.disabled&&!s.disabledInteractive?-1:s.tabIndex)("aria-disabled",s._getDisabledAttribute()),h.m8U(s.color?"mat-"+s.color:""),h.eAK("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton","matAnchor"],standalone:!0,features:[h.eg9,h.UHJ],attrs:r1,ngContentSelectors:s1,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){1&r&&(h.kPM(o1),h.wR5(0,"span",0),h._Xx(1),h.I0R(2,"span",1),h._Xx(3,1),h.C$Y(),h._Xx(4,2),h.wR5(5,"span",2)(6,"span",3)),2&r&&h.eAK("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),UF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({imports:[Wy,MF,Wy]})}return n})(),jF=(()=>{class n{openEasterEgg(){window.open("https://github.com/chiaraferrara","_blank")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-chisiamo"]],decls:17,vars:0,consts:[["id","picture"],["id","content"],[1,"mb-4"],["href","https://www.instagram.com/explore/tags/ferrosessuale/top/","target","_blank","id","ferrosex"],[3,"click"],["href","https://github.com/gianmarco2307","mat-button","","target","_blank","id","GitHub"],["src","assets/github-mark.png","id","githubLogo"]],template:function(r,s){1&r&&(h.wR5(0,"div",0),h.I0R(1,"div",1)(2,"h2"),h.OEk(3,"Chi Sono"),h.C$Y(),h.I0R(4,"p",2),h.OEk(5," Sono un appassionato di viaggi e di musica, con un "),h.I0R(6,"a",3),h.OEk(7,"amore particolare per le ferrovie"),h.C$Y(),h.OEk(8," . La passione per l'esplorazione e la scoperta mi ha portato a creare SpotiRFI, un progetto unico che unisce la bellezza del viaggio in treno con il potere evocativo della musica. Ogni stazione ferroviaria sulla mappa diventa una tappa di un viaggio musicale attraverso la Sicilia, offrendo un'esperienza unica che spero possa arricchire i vostri viaggi tanto quanto ha arricchito i miei. "),h.C$Y(),h.wR5(9,"br"),h.I0R(10,"p"),h.OEk(11," Se vuoi passa dal "),h.I0R(12,"span",4),h.qCj("click",function(){return s.openEasterEgg()}),h.OEk(13,"mio "),h.C$Y(),h.I0R(14,"a",5),h.wR5(15,"img",6),h.OEk(16,"GitHub"),h.C$Y()()())},dependencies:[VF],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";#picture[_ngcontent-%COMP%]{background-image:url(PMAgnone-min.60f5992de05385e1.JPG);width:100%;height:82%;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}h2[_ngcontent-%COMP%]{margin-top:2em;font-family:Merienda,cursive;font-weight:bolder}#content[_ngcontent-%COMP%]{max-width:58em;text-align:justify;margin:0 auto;padding:2em;font-size:18px;font-family:Merienda,cursive;line-height:1.7}#ferrosex[_ngcontent-%COMP%]{text-decoration:none;color:#000}#ferrosex[_ngcontent-%COMP%]:hover{color:#393939}#GitHub[_ngcontent-%COMP%]{font-family:Merienda,cursive;font-weight:700}#githubLogo[_ngcontent-%COMP%]{height:24px;margin-right:10px}']})}return n})(),$F=(()=>{class n{constructor(t){this.path="";let r=t.path().split("/");this.path=r[1].toUpperCase()}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(Ye))};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-tabellone"]],decls:50,vars:1,consts:[["href","https://fonts.cdnfonts.com/css/caros","rel","stylesheet"],[1,"background"],[1,"riga"],[1,"binario"],[1,"destinazione"],[1,"pdest"],[1,"treno"],[1,"ptreno"],[1,"partenza"],[1,"ppart"],[1,"info"],[1,"pinfo"]],template:function(r,s){1&r&&(h.wR5(0,"link",0),h.I0R(1,"div",1),h.wR5(2,"br"),h.I0R(3,"div",2)(4,"div",3)(5,"h2")(6,"b"),h.OEk(7,"1"),h.C$Y()()(),h.I0R(8,"div",4)(9,"p")(10,"b"),h.OEk(11,"destinazione "),h.C$Y(),h.I0R(12,"i"),h.OEk(13,"destination"),h.C$Y()(),h.I0R(14,"div",5)(15,"h4"),h.OEk(16),h.C$Y()()()(),h.wR5(17,"br"),h.I0R(18,"div",2)(19,"div",6)(20,"p")(21,"b"),h.OEk(22,"treno "),h.C$Y(),h.I0R(23,"i"),h.OEk(24,"train"),h.C$Y()(),h.I0R(25,"div",7)(26,"h4"),h.OEk(27,"SPOTIRFI"),h.C$Y(),h.I0R(28,"h5"),h.OEk(29,"REG 21886"),h.C$Y()()(),h.I0R(30,"div",8)(31,"p")(32,"b"),h.OEk(33,"partenza "),h.C$Y(),h.I0R(34,"i"),h.OEk(35,"departure"),h.C$Y()(),h.I0R(36,"div",9)(37,"h4"),h.OEk(38,"CANCELLATO"),h.C$Y()()()(),h.wR5(39,"br"),h.I0R(40,"div",2)(41,"div",10)(42,"p")(43,"b"),h.OEk(44,"informazioni "),h.C$Y(),h.I0R(45,"i"),h.OEk(46,"informations"),h.C$Y()(),h.I0R(47,"div",11)(48,"h4"),h.OEk(49,"E' SEVERAMENTE VIETATO ATTRAVERSARE LA LINEA GIALLA"),h.C$Y()()()()()),2&r&&(h.yG2(16),h.cNF(s.path))},styles:['@import"https://fonts.cdnfonts.com/css/caros";.background[_ngcontent-%COMP%]{width:40em;height:20.35em;background-color:#000;margin:auto}.riga[_ngcontent-%COMP%]{border-top:.1em white solid;width:38em;margin:0 1em}.binario[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}h2[_ngcontent-%COMP%]{font-size:5em}.destinazione[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.destinazione[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pdest[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 20s linear infinite}.pdest[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em;overflow:hidden}.treno[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}.treno[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ptreno[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:10.99em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ptreno[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em;margin-left:.2em;margin-bottom:.1em}.ptreno[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1em;margin-left:.2em}.partenza[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.partenza[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ppart[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ppart[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em}.info[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pinfo[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:38em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite;overflow:hidden}.pinfo[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8em;white-space:nowrap;position:relative;animation:_ngcontent-%COMP%_scroll-left 20s linear infinite}@keyframes _ngcontent-%COMP%_lighting{0%{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}to{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}}@keyframes _ngcontent-%COMP%_scroll-left{0%{transform:translate(100%)}to{transform:translate(-100%)}}']})}return n})(),HF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-notfound"]],decls:6,vars:0,consts:[["controls","","autoplay",""],["src","assets/404.mp3","type","audio/mpeg"]],template:function(r,s){1&r&&(h.I0R(0,"article"),h.wR5(1,"app-tabellone"),h.C$Y(),h.I0R(2,"article")(3,"audio",0),h.wR5(4,"source",1),h.OEk(5," Il tuo browser non supporta l'elemento audio. "),h.C$Y()())},dependencies:[$F],styles:["article[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;margin:6em;font-family:Merienda,cursive}"]})}return n})();function zF(n,e){if(1&n){const t=h.KQA();h.I0R(0,"li",16),h.qCj("click",function(){const c=h.usT(t).$implicit,u=h.GaO(2).$implicit,g=h.GaO();return h.CGJ(g.stationToModal(c,u.note))}),h.OEk(1),h.C$Y()}if(2&n){const t=e.$implicit;h.yG2(),h.cNF(t)}}function GF(n,e){if(1&n&&(h.I0R(0,"div",13),h.wR5(1,"iframe",14)(2,"br")(3,"br")(4,"br"),h.I0R(5,"ul"),h.yuY(6,zF,2,1,"li",15),h.C$Y()()),2&n){const t=h.GaO().index,r=h.GaO();h.yG2(),h.E7m("src",r.srcs[t],h.CaN),h.yG2(5),h.E7m("ngForOf",r.stations[t])}}function WF(n,e){if(1&n&&(h.I0R(0,"div",11),h.yuY(1,GF,7,2,"div",12),h.C$Y()),2&n){const t=e.$implicit,r=h.GaO();h.yG2(),h.E7m("ngIf",t.id==r.id)}}const qF=[{path:"",component:AC},{path:"home",component:AC},{path:"tratte",component:yN},{path:"chisono",component:jF},{path:"tratta/:id",component:(()=>{class n{constructor(t,r,s){this.fireServ=t,this.route=r,this.sanitizer=s,this.id=null,this.tratte=[],this.stations=[],this.srcs=[],this.actualStation="",this.actualLine=""}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.fireServ.getTratte().subscribe(t=>{let r=0;for(let s of t){let c;this.trattaSrc=this.sanitizer.bypassSecurityTrustResourceUrl(s.src),this.srcs.push(this.trattaSrc),this.stations[r]=this.stations[r]||[],c=s.stations.split("_"),this.stations[r]=c,r++}this.tratte=t})}stationToModal(t,r){this.actualStation=t,this.actualLine=r}openMaps(){let t,r;r="AMAT"==this.actualLine?"fermata tram "+this.actualLine+" di "+this.actualStation+" Palermo":"atm"==this.actualLine?"fermata tram "+this.actualLine+" di "+this.actualStation+" Messina":"stazione di "+this.actualStation,t="https://www.google.com/maps/search/?api=1&query="+encodeURIComponent(r),window.open(t,"_blank"),console.log(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(TO),h.GI1(I),h.GI1(jg))};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-playlist-page"]],decls:15,vars:2,consts:[["class","container",4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],[1,"container"],["class","incontainer",4,"ngIf"],[1,"incontainer"],["width","100%","height","500","frameBorder","0","allowfullscreen","","allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture","loading","lazy",2,"border-radius","12px",3,"src"],["data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click"]],template:function(r,s){1&r&&(h.yuY(0,WF,2,1,"div",0),h.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),h.OEk(6),h.C$Y(),h.wR5(7,"button",6),h.C$Y(),h.I0R(8,"div",7),h.OEk(9," ... "),h.C$Y(),h.I0R(10,"div",8)(11,"button",9),h.OEk(12,"Close"),h.C$Y(),h.I0R(13,"button",10),h.qCj("click",function(){return s.openMaps()}),h.OEk(14,"Apri su Maps"),h.C$Y()()()()()),2&r&&(h.E7m("ngForOf",s.tratte),h.yG2(6),h.oRS("Stazione di ",s.actualStation,""))},dependencies:[Dl,Rr],styles:['@import"https://fonts.cdnfonts.com/css/futura-std-4";.container[_ngcontent-%COMP%]{align-items:center;width:55%;margin-bottom:4em;margin-top:6em}.incontainer[_ngcontent-%COMP%]{align-items:center;font-family:Futura Std,sans-serif;font-weight:700;font-size:x-large}.map[_ngcontent-%COMP%]{display:block;margin:auto;width:75%;height:auto}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:auto;width:max-content}li[_ngcontent-%COMP%]:before{content:"";border-radius:50%;width:.625em;height:.625em;background:red;display:inline-block;margin-right:.625em}li[_ngcontent-%COMP%]{margin:.625em 0;position:relative;cursor:pointer}li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:.125em;height:calc(100% + .625em);background:red;left:.25em;top:.625em}li[_ngcontent-%COMP%]:first-child:after{top:.625em}li[_ngcontent-%COMP%]:last-child:after{height:0}@media screen and (min-width: 1025px) and (max-width: 1300px){.container[_ngcontent-%COMP%]{align-items:center;width:72%}}@media screen and (min-width: 768px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{align-items:center;width:77%}}@media screen and (min-width: 281px) and (max-width: 767px){.container[_ngcontent-%COMP%]{align-items:center;width:90%}}@media screen and (max-width: 280px){.container[_ngcontent-%COMP%]{align-items:center;width:97%}}']})}return n})()},{path:"**",component:HF}];let YF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({imports:[zx.forRoot(qF),zx]})}return n})(),KF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-navbar"]],decls:20,vars:0,consts:[["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body","fixed-top"],[1,"container-fluid"],["routerLink","home",1,"navbar-brand"],["src","assets/logocompatto.png","alt","Logo","height","30",1,"d-inline-block","align-text-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","tratte",1,"nav-link"],["routerLink","chisono",1,"nav-link"],["href","https://www.rfi.it/it.html","target","_blank",1,"nav-link"],["href","https://open.spotify.com/intl-it","target","_blank",1,"nav-link"]],template:function(r,s){1&r&&(h.I0R(0,"nav",0)(1,"div",1)(2,"a",2),h.wR5(3,"img",3),h.C$Y(),h.I0R(4,"button",4),h.wR5(5,"span",5),h.C$Y(),h.I0R(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),h.OEk(10,"Le tratte"),h.C$Y()(),h.I0R(11,"li",8)(12,"a",10),h.OEk(13,"Chi sono"),h.C$Y()(),h.I0R(14,"li",8)(15,"a",11),h.OEk(16," RFI "),h.C$Y()(),h.I0R(17,"li",8)(18,"a",12),h.OEk(19," Spotify "),h.C$Y()()()()()())},dependencies:[Mp],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";#shareButton[_ngcontent-%COMP%]{color:transparent;background-color:transparent;border:transparent;float:right}nav[_ngcontent-%COMP%]{font-family:Merienda,cursive;font-size:16px}']})}return n})();const QF=["addListener","removeListener"],ZF=["addEventListener","removeEventListener"],XF=["on","off"];function LP(n,e,t,r){if((0,yn.m)(t)&&(r=t,t=void 0),r)return LP(n,e,t).pipe(Cb(r));const[s,c]=function tL(n){return(0,yn.m)(n.addEventListener)&&(0,yn.m)(n.removeEventListener)}(n)?ZF.map(u=>g=>n[u](e,g,t)):function JF(n){return(0,yn.m)(n.addListener)&&(0,yn.m)(n.removeListener)}(n)?QF.map(l1(n,e)):function eL(n){return(0,yn.m)(n.on)&&(0,yn.m)(n.off)}(n)?XF.map(l1(n,e)):[];if(!s&&tp(n))return zn(u=>LP(u,e,t))(Ur(n));if(!s)throw new TypeError("Invalid event target");return new jn._(u=>{const g=(...y)=>u.next(1<y.length?y:y[0]);return s(g),()=>c(g)})}function l1(n,e){return t=>r=>n[t](e,r)}const Dw={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Dw;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const s=e(c=>{t=void 0,n(c)});return new Ss.wH(()=>t?.(s))},requestAnimationFrame(...n){const{delegate:e}=Dw;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Dw;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class rL extends Jd{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class nL extends au{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Dw.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:c}=e;null!=t&&(null===(s=c[c.length-1])||void 0===s?void 0:s.id)!==t&&(Dw.cancelAnimationFrame(t),e._scheduled=void 0)}});let VP,oL=1;const JS={};function u1(n){return n in JS&&(delete JS[n],!0)}const sL={setImmediate(n){const e=oL++;return JS[e]=!0,VP||(VP=Promise.resolve()),VP.then(()=>u1(e)&&n()),e},clearImmediate(n){u1(n)}},{setImmediate:aL,clearImmediate:cL}=sL,ex={setImmediate(...n){const{delegate:e}=ex;return(e?.setImmediate||aL)(...n)},clearImmediate(n){const{delegate:e}=ex;return(e?.clearImmediate||cL)(n)},delegate:void 0};new class uL extends Jd{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class lL extends au{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=ex.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:c}=e;null!=t&&(null===(s=c[c.length-1])||void 0===s?void 0:s.id)!==t&&(ex.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function d1(n,e=eh){return function hL(n){return(0,$n.i)((e,t)=>{let r=!1,s=null,c=null,u=!1;const g=()=>{if(c?.unsubscribe(),c=null,r){r=!1;const w=s;s=null,t.next(w)}u&&t.complete()},y=()=>{c=null,u&&t.complete()};e.subscribe((0,Pn.e)(t,w=>{r=!0,s=w,c||Ur(n(w)).subscribe(c=(0,Pn.e)(t,g,y))},()=>{u=!0,(!r||!c||c.closed)&&t.complete()}))})}(()=>function pL(n=0,e,t=Jx){let r=-1;return null!=e&&(qg(e)?t=e:r=e),new jn._(s=>{let c=function fL(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;c<0&&(c=0);let u=0;return t.schedule(function(){s.closed||(s.next(u++),0<=r?this.schedule(void 0,r):s.complete())},c)})}(n,e))}let gL=(()=>{class n{constructor(t,r,s){this._ngZone=t,this._platform=r,this._scrolled=new Yt.E,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new jn._(r=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(d1(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Qe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const s=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(er(c=>!c||s.indexOf(c)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((s,c)=>{this._scrollableContainsElement(c,t)&&r.push(c)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let s=zy(r),c=t.getElementRef().nativeElement;do{if(s==c)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>LP(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(h.WW2),h.CoB(co),h.CoB(ye,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),h1=(()=>{class n{constructor(t,r,s){this._platform=t,this._change=new Yt.E,this._changeListener=c=>{this._change.next(c)},this._document=s,r.runOutsideAngular(()=>{if(t.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),s=t.documentElement,c=s.getBoundingClientRect();return{top:-c.top||t.body.scrollTop||r.scrollY||s.scrollTop||0,left:-c.left||t.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(d1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(co),h.CoB(h.WW2),h.CoB(ye,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),f1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({})}return n})(),p1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({imports:[ww,f1,ww,f1]})}return n})();class BP{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class UP extends BP{constructor(e,t,r,s,c){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=s,this.projectableNodes=c}}class m1 extends BP{constructor(e,t,r,s){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=s}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class vL extends BP{constructor(e){super(),this.element=e instanceof h.GMv?e.nativeElement:e}}class jP{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof UP?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof m1?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof vL?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class yL extends jP{constructor(e,t,r,s,c){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=s,this.attachDomPortal=u=>{const g=u.element,y=this._document.createComment("dom-portal");g.parentNode.insertBefore(y,g),this.outletElement.appendChild(g),this._attachedPortal=u,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(g,y)})},this._document=c}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let s;return e.viewContainerRef?(s=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>s.destroy())):(s=r.create(e.injector||this._defaultInjector||h.zZn.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=e,s}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(s=>this.outletElement.appendChild(s)),r.detectChanges(),this.setDisposeFn(()=>{let s=t.indexOf(r);-1!==s&&t.remove(s)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let $P=(()=>{class n extends jP{constructor(t,r,s){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new h._w7,this.attachDomPortal=c=>{const u=c.element,g=this._document.createComment("dom-portal");c.setAttachedHost(this),u.parentNode.insertBefore(g,u),this._getRootNode().appendChild(u),this._attachedPortal=c,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(u,g)})},this._document=s}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,c=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=r.createComponent(c,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(h.ce5),h.GI1(h.y8U),h.GI1(ye))};static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[h.Wk5.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[h.eg9]})}return n})(),tx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({})}return n})();const g1=IN();class bL{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Lr(-this._previousScrollPosition.left),e.style.top=Lr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,s=this._document.body.style,c=r.scrollBehavior||"",u=s.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),g1&&(r.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),g1&&(r.scrollBehavior=c,s.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class IL{constructor(e,t,r,s){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(er(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class _1{enable(){}disable(){}attach(){}}function HP(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function v1(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class EL{constructor(e,t,r,s){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=s,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:s}=this._viewportRuler.getViewportSize();HP(t,[{width:r,height:s,bottom:s,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let wL=(()=>{class n{constructor(t,r,s,c){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new _1,this.close=u=>new IL(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new bL(this._viewportRuler,this._document),this.reposition=u=>new EL(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=c}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(gL),h.CoB(h1),h.CoB(h.WW2),h.CoB(ye))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class y1{constructor(e){if(this.scrollStrategy=new _1,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class CL{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let b1=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ye))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DL=(()=>{class n extends b1{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=s=>{const c=this._attachedOverlays;for(let u=c.length-1;u>-1;u--)if(c[u]._keydownEvents.observers.length>0){const g=c[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>g.next(s)):g.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ye),h.CoB(h.WW2,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TL=(()=>{class n extends b1{constructor(t,r,s){super(t),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=c=>{this._pointerDownEventTarget=_f(c)},this._clickListener=c=>{const u=_f(c),g="click"===c.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const y=this._attachedOverlays.slice();for(let w=y.length-1;w>-1;w--){const D=y[w];if(D._outsidePointerEvents.observers.length<1||!D.hasAttached())continue;if(D.overlayElement.contains(u)||D.overlayElement.contains(g))break;const A=D._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>A.next(c)):A.next(c)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ye),h.CoB(co),h.CoB(h.WW2,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nx=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||xP()){const s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let c=0;c<s.length;c++)s[c].remove()}const r=this._document.createElement("div");r.classList.add(t),xP()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ye),h.CoB(co))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class rx{constructor(e,t,r,s,c,u,g,y,w,D=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=s,this._ngZone=c,this._keyboardDispatcher=u,this._document=g,this._location=y,this._outsideClickDispatcher=w,this._animationsDisabled=D,this._backdropElement=null,this._backdropClick=new Yt.E,this._attachments=new Yt.E,this._detachments=new Yt.E,this._locationChanges=Ss.wH.EMPTY,this._backdropClickHandler=A=>this._backdropClick.next(A),this._backdropTransitionendHandler=A=>{this._disposeBackdrop(A.target)},this._keydownEvents=new Yt.E,this._outsidePointerEvents=new Yt.E,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(xi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Lr(this._config.width),e.height=Lr(this._config.height),e.minWidth=Lr(this._config.minWidth),e.minHeight=Lr(this._config.minHeight),e.maxWidth=Lr(this._config.maxWidth),e.maxHeight=Lr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const s=YS(t||[]).filter(c=>!!c);s.length&&(r?e.classList.add(...s):e.classList.remove(...s))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Qo(Vp(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const I1="cdk-overlay-connected-position-bounding-box",AL=/([A-Za-z%]+)$/;class SL{get positions(){return this._preferredPositions}constructor(e,t,r,s,c){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Yt.E,this._resizeSubscription=Ss.wH.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(I1),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,s=this._containerRect,c=[];let u;for(let g of this._preferredPositions){let y=this._getOriginPoint(e,s,g),w=this._getOverlayPoint(y,t,g),D=this._getOverlayFit(w,t,r,g);if(D.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(g,y);this._canFitWithFlexibleDimensions(D,w,r)?c.push({position:g,origin:y,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(y,g)}):(!u||u.overlayFit.visibleArea<D.visibleArea)&&(u={overlayFit:D,overlayPoint:w,originPoint:y,position:g,overlayRect:t})}if(c.length){let g=null,y=-1;for(const w of c){const D=w.boundingBoxRect.width*w.boundingBoxRect.height*(w.position.weight||1);D>y&&(y=D,g=w)}return this._isPushed=!1,void this._applyPosition(g.position,g.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&fg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(I1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let s,c;if("center"==r.originX)s=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,g=this._isRtl()?e.left:e.right;s="start"==r.originX?u:g}return t.left<0&&(s-=t.left),c="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(c-=t.top),{x:s,y:c}}_getOverlayPoint(e,t,r){let s,c;return s="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,c="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+s,y:e.y+c}}_getOverlayFit(e,t,r,s){const c=w1(t);let{x:u,y:g}=e,y=this._getOffset(s,"x"),w=this._getOffset(s,"y");y&&(u+=y),w&&(g+=w);let M=0-g,N=g+c.height-r.height,X=this._subtractOverflows(c.width,0-u,u+c.width-r.width),re=this._subtractOverflows(c.height,M,N),de=X*re;return{visibleArea:de,isCompletelyWithinViewport:c.width*c.height===de,fitsInViewportVertically:re===c.height,fitsInViewportHorizontally:X==c.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const s=r.bottom-t.y,c=r.right-t.x,u=E1(this._overlayRef.getConfig().minHeight),g=E1(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=u&&u<=s)&&(e.fitsInViewportHorizontally||null!=g&&g<=c)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const s=w1(t),c=this._viewportRect,u=Math.max(e.x+s.width-c.width,0),g=Math.max(e.y+s.height-c.height,0),y=Math.max(c.top-r.top-e.y,0),w=Math.max(c.left-r.left-e.x,0);let D=0,A=0;return D=s.width<=c.width?w||-u:e.x<this._viewportMargin?c.left-r.left-e.x:0,A=s.height<=c.height?y||-g:e.y<this._viewportMargin?c.top-r.top-e.y:0,this._previousPushAmount={x:D,y:A},{x:e.x+D,y:e.y+A}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),s=new CL(e,r);this._positionChanges.next(s)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,s=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let c=0;c<t.length;c++)t[c].style.transformOrigin=`${r} ${s}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,s=this._isRtl();let c,u,g,D,A,M;if("top"===t.overlayY)u=e.y,c=r.height-u+this._viewportMargin;else if("bottom"===t.overlayY)g=r.height-e.y+2*this._viewportMargin,c=r.height-g+this._viewportMargin;else{const N=Math.min(r.bottom-e.y+r.top,e.y),X=this._lastBoundingBoxSize.height;c=2*N,u=e.y-N,c>X&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-X/2)}if("end"===t.overlayX&&!s||"start"===t.overlayX&&s)M=r.width-e.x+this._viewportMargin,D=e.x-this._viewportMargin;else if("start"===t.overlayX&&!s||"end"===t.overlayX&&s)A=e.x,D=r.right-e.x;else{const N=Math.min(r.right-e.x+r.left,e.x),X=this._lastBoundingBoxSize.width;D=2*N,A=e.x-N,D>X&&!this._isInitialRender&&!this._growAfterOpen&&(A=e.x-X/2)}return{top:u,left:A,bottom:g,right:M,width:D,height:c}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;s.height=Lr(r.height),s.top=Lr(r.top),s.bottom=Lr(r.bottom),s.width=Lr(r.width),s.left=Lr(r.left),s.right=Lr(r.right),s.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",s.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",c&&(s.maxHeight=Lr(c)),u&&(s.maxWidth=Lr(u))}this._lastBoundingBoxSize=r,fg(this._boundingBox.style,s)}_resetBoundingBoxStyles(){fg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){fg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},s=this._hasExactPosition(),c=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(s){const D=this._viewportRuler.getViewportScrollPosition();fg(r,this._getExactOverlayY(t,e,D)),fg(r,this._getExactOverlayX(t,e,D))}else r.position="static";let g="",y=this._getOffset(t,"x"),w=this._getOffset(t,"y");y&&(g+=`translateX(${y}px) `),w&&(g+=`translateY(${w}px)`),r.transform=g.trim(),u.maxHeight&&(s?r.maxHeight=Lr(u.maxHeight):c&&(r.maxHeight="")),u.maxWidth&&(s?r.maxWidth=Lr(u.maxWidth):c&&(r.maxWidth="")),fg(this._pane.style,r)}_getExactOverlayY(e,t,r){let s={top:"",bottom:""},c=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,r)),"bottom"===e.overlayY?s.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":s.top=Lr(c.y),s}_getExactOverlayX(e,t,r){let u,s={left:"",right:""},c=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,r)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?s.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":s.left=Lr(c.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:v1(e,r),isOriginOutsideView:HP(e,r),isOverlayClipped:v1(t,r),isOverlayOutsideView:HP(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,s)=>r-Math.max(s,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&YS(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof h.GMv)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function fg(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function E1(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(AL);return t&&"px"!==t?null:parseFloat(e)}return n||null}function w1(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const C1="cdk-global-overlay-wrapper";class xL{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(C1),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:s,height:c,maxWidth:u,maxHeight:g}=r,y=!("100%"!==s&&"100vw"!==s||u&&"100%"!==u&&"100vw"!==u),w=!("100%"!==c&&"100vh"!==c||g&&"100%"!==g&&"100vh"!==g),D=this._xPosition,A=this._xOffset,M="rtl"===this._overlayRef.getConfig().direction;let N="",X="",re="";y?re="flex-start":"center"===D?(re="center",M?X=A:N=A):M?"left"===D||"end"===D?(re="flex-end",N=A):("right"===D||"start"===D)&&(re="flex-start",X=A):"left"===D||"start"===D?(re="flex-start",N=A):("right"===D||"end"===D)&&(re="flex-end",X=A),e.position=this._cssPosition,e.marginLeft=y?"0":N,e.marginTop=w?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=y?"0":X,t.justifyContent=re,t.alignItems=w?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(C1),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let RL=(()=>{class n{constructor(t,r,s,c){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=c}global(){return new xL}flexibleConnectedTo(t){return new SL(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(h1),h.CoB(ye),h.CoB(co),h.CoB(nx))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ML=0,ad=(()=>{class n{constructor(t,r,s,c,u,g,y,w,D,A,M,N){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=c,this._keyboardDispatcher=u,this._injector=g,this._ngZone=y,this._document=w,this._directionality=D,this._location=A,this._outsideClickDispatcher=M,this._animationsModuleType=N}create(t){const r=this._createHostElement(),s=this._createPaneElement(r),c=this._createPortalOutlet(s),u=new y1(t);return u.direction=u.direction||this._directionality.value,new rx(c,r,s,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+ML++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(h.Swk)),new yL(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(wL),h.CoB(nx),h.CoB(h.ce5),h.CoB(RL),h.CoB(DL),h.CoB(h.zZn),h.CoB(h.WW2),h.CoB(ye),h.CoB(OP),h.CoB(Ye),h.CoB(TL),h.CoB(h.qwP,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const PL=new h.UbH("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=(0,h.uUt)(ad);return()=>n.scrollStrategies.reposition()}}),OL={provide:PL,deps:[ad],useFactory:function kL(n){return()=>n.scrollStrategies.reposition()}};let D1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({providers:[ad,OL],imports:[ww,tx,p1,p1]})}return n})();function NL(n,e){}class ix{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let T1=(()=>{class n extends jP{constructor(t,r,s,c,u,g,y,w){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=c,this._interactivityChecker=u,this._ngZone=g,this._overlayRef=y,this._focusMonitor=w,this._platform=(0,h.uUt)(co),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=(0,h.uUt)(h.kD9),this.attachDomPortal=D=>{this._portalOutlet.hasAttached();const A=this._portalOutlet.attachDomPortal(D);return this._contentAttached(),A},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){const r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{t.removeEventListener("blur",s),t.removeEventListener("mousedown",s),t.removeAttribute("tabindex")};t.addEventListener("blur",s),t.addEventListener("mousedown",s)})),t.focus(r)}_focusByCssSelector(t,r){let s=this._elementRef.nativeElement.querySelector(t);s&&this._forceFocus(s,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const s=SP(),c=this._elementRef.nativeElement;(!s||s===this._document.body||s===c||c.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=SP();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=SP()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(h.GMv),h.GI1(BO),h.GI1(ye,8),h.GI1(ix),h.GI1(MP),h.GI1(h.WW2),h.GI1(rx),h.GI1(PP))};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(1&r&&h.CC$($P,7),2&r){let c;h.wto(c=h.Gqi())&&(s._portalOutlet=c.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){2&r&&h.e48("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[h.eg9,h.UHJ],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){1&r&&h.yuY(0,NL,0,0,"ng-template",0)},dependencies:[$P],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class zP{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Yt.E,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!RP(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const A1=new h.UbH("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=(0,h.uUt)(ad);return()=>n.scrollStrategies.block()}}),FL=new h.UbH("DialogData"),LL=new h.UbH("DefaultDialogConfig");let BL=0,S1=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,r,s,c,u,g){this._overlay=t,this._injector=r,this._defaultOptions=s,this._parentDialog=c,this._overlayContainer=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Yt.E,this._afterOpenedAtThisLevel=new Yt.E,this._ariaHiddenElements=new Map,this.afterAllClosed=va(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(wo(void 0))),this._scrollStrategy=g}open(t,r){(r={...this._defaultOptions||new ix,...r}).id=r.id||"cdk-dialog-"+BL++,r.id&&this.getDialogById(r.id);const c=this._getOverlayConfig(r),u=this._overlay.create(c),g=new zP(u,r),y=this._attachContainer(u,g,r);return g.containerInstance=y,this._attachDialogContent(t,g,y,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(g),g.closed.subscribe(()=>this._removeOpenDialog(g,!0)),this.afterOpened.next(g),g}closeAll(){GP(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){GP(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),GP(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new y1({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,s){const c=s.injector||s.viewContainerRef?.injector,u=[{provide:ix,useValue:s},{provide:zP,useValue:r},{provide:rx,useValue:t}];let g;s.container?"function"==typeof s.container?g=s.container:(g=s.container.type,u.push(...s.container.providers(s))):g=T1;const y=new UP(g,s.viewContainerRef,h.zZn.create({parent:c||this._injector,providers:u}),s.componentFactoryResolver);return t.attach(y).instance}_attachDialogContent(t,r,s,c){if(t instanceof h.Yw2){const u=this._createInjector(c,r,s,void 0);let g={$implicit:c.data,dialogRef:r};c.templateContext&&(g={...g,..."function"==typeof c.templateContext?c.templateContext():c.templateContext}),s.attachTemplatePortal(new m1(t,null,g,u))}else{const u=this._createInjector(c,r,s,this._injector),g=s.attachComponentPortal(new UP(t,c.viewContainerRef,u,c.componentFactoryResolver));r.componentRef=g,r.componentInstance=g.instance}}_createInjector(t,r,s,c){const u=t.injector||t.viewContainerRef?.injector,g=[{provide:FL,useValue:t.data},{provide:zP,useValue:r}];return t.providers&&("function"==typeof t.providers?g.push(...t.providers(r,t,s)):g.push(...t.providers)),t.direction&&(!u||!u.get(OP,null,{optional:!0}))&&g.push({provide:OP,useValue:{value:t.direction,change:Qe()}}),h.zZn.create({parent:u||c,providers:g})}_removeOpenDialog(t,r){const s=this.openDialogs.indexOf(t);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((c,u)=>{c?u.setAttribute("aria-hidden",c):u.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let s=r.length-1;s>-1;s--){const c=r[s];c!==t&&"SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName&&!c.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(c,c.getAttribute("aria-hidden")),c.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ad),h.CoB(h.zZn),h.CoB(LL,8),h.CoB(n,12),h.CoB(nx),h.CoB(A1))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GP(n,e){let t=n.length;for(;t--;)e(n[t])}let UL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({providers:[S1],imports:[D1,tx,fF,tx]})}return n})();function jL(n,e){}ee(684);class WP{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const qP="mdc-dialog--open",x1="mdc-dialog--opening",R1="mdc-dialog--closing";let M1=(()=>{class n extends T1{constructor(t,r,s,c,u,g,y,w,D){super(t,r,s,c,u,g,y,D),this._animationMode=w,this._animationStateChanged=new h._w7,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?k1(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?k1(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(P1,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(x1,qP)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(qP),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(qP),this._animationsEnabled?(this._hostElement.style.setProperty(P1,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(R1)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(x1,R1)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const r=super.attachComponentPortal(t);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(h.GMv),h.GI1(BO),h.GI1(ye,8),h.GI1(WP),h.GI1(MP),h.GI1(h.WW2),h.GI1(rx),h.GI1(h.qwP,8),h.GI1(PP))};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,s){2&r&&(h.SoX("id",s._config.id),h.e48("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),h.eAK("_mat-animation-noopable",!s._animationsEnabled)("mat-mdc-dialog-container-with-actions",s._actionSectionCount>0))},standalone:!0,features:[h.eg9,h.UHJ],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,s){1&r&&(h.I0R(0,"div",0)(1,"div",1),h.yuY(2,jL,0,0,"ng-template",2),h.C$Y()())},dependencies:[$P],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();const P1="--mat-dialog-transition-duration";function k1(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?MO(n.substring(0,n.length-2)):n.endsWith("s")?1e3*MO(n.substring(0,n.length-1)):"0"===n?0:null}var ox=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(ox||{});class YP{constructor(e,t,r){this._ref=e,this._containerInstance=r,this._afterOpened=new Yt.E,this._beforeClosed=new Yt.E,this._state=ox.OPEN,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(er(s=>"opened"===s.state),xi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(er(s=>"closed"===s.state),xi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Vp(this.backdropClick(),this.keydownEvents().pipe(er(s=>27===s.keyCode&&!this.disableClose&&!RP(s)))).subscribe(s=>{this.disableClose||(s.preventDefault(),O1(this,"keydown"===s.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(er(t=>"closing"===t.state),xi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=ox.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=ox.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function O1(n,e,t){return n._closeInteractionType=e,n.close(t)}const zL=new h.UbH("MatMdcDialogData"),GL=new h.UbH("mat-mdc-dialog-default-options"),N1=new h.UbH("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=(0,h.uUt)(ad);return()=>n.scrollStrategies.block()}});let qL=0,sx=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,r,s,c,u,g,y,w){this._overlay=t,this._defaultOptions=c,this._scrollStrategy=u,this._parentDialog=g,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Yt.E,this._afterOpenedAtThisLevel=new Yt.E,this.dialogConfigClass=WP,this.afterAllClosed=va(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(wo(void 0))),this._dialog=r.get(S1),this._dialogRefConstructor=YP,this._dialogContainerType=M1,this._dialogDataToken=zL}open(t,r){let s;(r={...this._defaultOptions||new WP,...r}).id=r.id||"mat-mdc-dialog-"+qL++,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const c=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:ix,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(u,g,y)=>(s=new this._dialogRefConstructor(u,r,y),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:y},{provide:this._dialogDataToken,useValue:g.data},{provide:this._dialogRefConstructor,useValue:s}])});return s.componentRef=c.componentRef,s.componentInstance=c.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{const u=this.openDialogs.indexOf(s);u>-1&&(this.openDialogs.splice(u,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static#e=this.\u0275fac=function(r){return new(r||n)(h.CoB(ad),h.CoB(h.zZn),h.CoB(Ye,8),h.CoB(GL,8),h.CoB(N1),h.CoB(n,12),h.CoB(nx),h.CoB(h.qwP,8))};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YL=0,F1=(()=>{class n{constructor(t,r,s){this.dialogRef=t,this._elementRef=r,this._dialog=s,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=j1(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){O1(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(YP,8),h.GI1(h.GMv),h.GI1(sx))};static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(r,s){1&r&&h.qCj("click",function(u){return s._onButtonClick(u)}),2&r&&h.e48("aria-label",s.ariaLabel||null)("type",s.type)},inputs:{ariaLabel:[h.Wk5.None,"aria-label","ariaLabel"],type:"type",dialogResult:[h.Wk5.None,"mat-dialog-close","dialogResult"],_matDialogClose:[h.Wk5.None,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],standalone:!0,features:[h.SYr]})}return n})(),L1=(()=>{class n{constructor(t,r,s){this._dialogRef=t,this._elementRef=r,this._dialog=s}ngOnInit(){this._dialogRef||(this._dialogRef=j1(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(YP,8),h.GI1(h.GMv),h.GI1(sx))};static#t=this.\u0275dir=h.Sc5({type:n,standalone:!0})}return n})(),V1=(()=>{class n extends L1{constructor(){super(...arguments),this.id="mat-mdc-dialog-title-"+YL++}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=h.otF(n)))(s||n)}})();static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(r,s){2&r&&h.SoX("id",s.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[h.eg9]})}return n})(),B1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0})}return n})(),U1=(()=>{class n extends L1{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=h.otF(n)))(s||n)}})();static#t=this.\u0275dir=h.Sc5({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(r,s){2&r&&h.eAK("mat-mdc-dialog-actions-align-start","start"===s.align)("mat-mdc-dialog-actions-align-center","center"===s.align)("mat-mdc-dialog-actions-align-end","end"===s.align)},inputs:{align:"align"},standalone:!0,features:[h.eg9]})}return n})();function j1(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}let KL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n});static#n=this.\u0275inj=h.s3X({providers:[sx],imports:[UL,D1,tx,Wy,Wy]})}return n})(),QL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-disclaimer-dialog"]],decls:7,vars:0,consts:[["mat-dialog-title",""],["mat-button","","mat-dialog-close",""]],template:function(r,s){1&r&&(h.I0R(0,"h2",0),h.OEk(1,"Disclaimer"),h.C$Y(),h.I0R(2,"mat-dialog-content"),h.OEk(3,"SpotiRFI \xe8 un sito indipendente e non \xe8 affiliato, sponsorizzato o approvato da Spotify o RFI. Non abbiamo l\u2019intenzione di ledere in alcun modo la loro immagine o reputazione. Il nostro obiettivo \xe8 fornire un servizio utile e di qualit\xe0 per i nostri utenti, nel rispetto dei diritti di propriet\xe0 intellettuale e delle normative vigenti."),h.C$Y(),h.I0R(4,"mat-dialog-actions")(5,"button",1),h.OEk(6,"Chiudi"),h.C$Y()())},dependencies:[F1,V1,U1,B1,c1]})}return n})(),ZL=(()=>{class n{constructor(t){this.dialog=t}openDialog(){this.dialog.open(QL)}disclaimer(){window.alert("SpotiRFI \xe8 un sito indipendente e non \xe8 affiliato, sponsorizzato o approvato da Spotify o RFI. Non abbiamo l\u2019intenzione di ledere in alcun modo la loro immagine o reputazione. Il nostro obiettivo \xe8 fornire un servizio utile e di qualit\xe0 per i nostri utenti, nel rispetto dei diritti di propriet\xe0 intellettuale e delle normative vigenti.")}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1(sx))};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-footer"]],decls:66,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body"],[1,"layout"],[1,"footer-wrapper","clearfix"],[1,"grid-3","footer-logo"],["href","#"],["alt","html layout logo","src","assets/logo.png"],[1,"footer-text"],["mat-button","",3,"click"],[1,"material-symbols-outlined"],[1,"grid-3"],[1,"footer-heading"],[1,"footermenu"],["routerLink","tratte"],["routerLink","chisono"],["href","https://www.rfi.it/it.html","target","_blank"],["href","https://open.spotify.com/intl-it","target","_blank"],[1,"footer-contact"],["href","./tratta/PalermoMessina"],["href","./tratta/AnelloPalermo"],["href","./tratta/AgrigentoPalermo"],["href","./tratta/SiracusaCaltanissetta"],["href","./tratta/CataniaGela"],[1,"footerblog"],["href","https://www.fsitaliane.it/content/dam/fsitaliane/Documents/impegno/per-lambiente/progetti/Atlante%20delle%20linee%20ferroviarie%20dismesse.pdf","target","_blank"],["href","https://epodweb.rfi.it/Download.ashx?q=lTmHEqG6%2FeC61zq42ZZheV8ouJSzS%2B5udsN2POFdeD4hdoONi5u5MvreFVXiIbvj","target","_blank"],["href","https://www.rfi.it/it/chi-siamo/Il-rapporto-con-lo-Stato-e-con-gli-stakeholder/il-piano-commerciale.html","target","_blank"]],template:function(r,s){1&r&&(h.wR5(0,"link",0),h.I0R(1,"footer",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),h.wR5(6,"img",6),h.C$Y(),h.I0R(7,"p",7),h.OEk(8," SpotiRFI: Un viaggio musicale unico attraverso le linee ferroviarie della Sicilia. Ogni stazione, una nuova canzone. "),h.C$Y(),h.I0R(9,"button",8),h.qCj("click",function(){return s.openDialog()}),h.I0R(10,"span",9),h.OEk(11," info "),h.C$Y()()(),h.I0R(12,"div",10)(13,"p",11),h.OEk(14,"pagine"),h.C$Y(),h.I0R(15,"ul",12)(16,"li")(17,"a",13),h.OEk(18,"Le tratte"),h.C$Y()(),h.I0R(19,"li")(20,"a",14),h.OEk(21,"Chi sono"),h.C$Y()(),h.I0R(22,"li")(23,"a",15),h.OEk(24,"RFI"),h.C$Y()(),h.I0R(25,"li")(26,"a",16),h.OEk(27,"Spotify"),h.C$Y()()()(),h.I0R(28,"div",10)(29,"p",11),h.OEk(30,"link"),h.C$Y(),h.I0R(31,"ul",17)(32,"li")(33,"a",18),h.OEk(34,"Palermo - Messina"),h.C$Y()(),h.I0R(35,"li")(36,"a",19),h.OEk(37,"Anello Ferroviario Palermo"),h.C$Y()(),h.I0R(38,"li")(39,"a",20),h.OEk(40,"Agrigento - Palermo"),h.C$Y()(),h.I0R(41,"li")(42,"a",21),h.OEk(43,"Siracusa - Caltanissetta"),h.C$Y()(),h.I0R(44,"li")(45,"a",22),h.OEk(46,"Catania - Gela"),h.C$Y()()()(),h.I0R(47,"div",10)(48,"p",11),h.OEk(49,"link utili"),h.C$Y(),h.I0R(50,"ul",23)(51,"li")(52,"a",24),h.OEk(53,"Linee dismesse"),h.C$Y(),h.I0R(54,"p"),h.OEk(55,"FS Italiane"),h.C$Y()(),h.I0R(56,"li")(57,"a",25),h.OEk(58,"Regolamento Circolazione Treni"),h.C$Y(),h.I0R(59,"p"),h.OEk(60,"RFI"),h.C$Y()(),h.I0R(61,"li")(62,"a",26),h.OEk(63,"Piano Commerciale"),h.C$Y(),h.I0R(64,"p"),h.OEk(65,"RFI"),h.C$Y()()()()()()())},dependencies:[Mp,c1],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-%COMP%]{list-style:none;text-decoration:none;margin:0}img[_ngcontent-%COMP%]{height:3.7em}html[_ngcontent-%COMP%]{overflow-y:scroll}body[_ngcontent-%COMP%]{background:#b7b7b7 none repeat scroll 0 0;font-family:Open Sans,sans-serif}ul[_ngcontent-%COMP%]{padding:0}.clearfix[_ngcontent-%COMP%]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.clearfix[_ngcontent-%COMP%]{display:inline-block}*[_ngcontent-%COMP%]   html[_ngcontent-%COMP%]   .clearfix[_ngcontent-%COMP%]{height:1%}.clearfix[_ngcontent-%COMP%]{display:block}.layout[_ngcontent-%COMP%]{margin:0 auto;max-width:1170px;width:100%;padding:0 15px}.grid-3[_ngcontent-%COMP%]{width:25%;float:left;min-height:1px;padding-left:15px;padding-right:15px;position:relative}.footer-wrapper[_ngcontent-%COMP%]{padding:100px 0}.footer-text[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;margin:40px 0 0;text-align:justify}footer[_ngcontent-%COMP%]   .footer-heading[_ngcontent-%COMP%]{color:#e1e1e1;font:18px/19px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]{margin-top:32px}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{line-height:25px}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"-";margin:0 5px 0 0}.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;line-height:34px;text-transform:capitalize}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;margin:0 8px 0 0;color:#fff}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:14px}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#c7c7c7;font:13px/28px Open Sans,sans-serif;letter-spacing:1.2px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#b4b4b4;font:13px/18px Open Sans,sans-serif;letter-spacing:1.2px;padding-bottom:10px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c7c7c7;font:italic 12px/18px Open Sans,sans-serif}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#22c489}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 200,"GRAD" 200,"opsz" 24;color:#fff}button[_ngcontent-%COMP%]{background-color:transparent;border:none;margin:1em}@media (max-width:980px){.layout[_ngcontent-%COMP%]{width:767px}.grid-3[_ngcontent-%COMP%]{width:50%}.footer-heading[_ngcontent-%COMP%]{margin-top:18px}}@media (max-width:640px){.layout[_ngcontent-%COMP%]{width:300px}.grid-3[_ngcontent-%COMP%]{width:100%}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;float:none;line-height:25px}}']})}return n})(),XL=(()=>{class n{constructor(t){this.router=t,this.title="SpotiRFI",this.router.events.subscribe(r=>{r instanceof yr&&window.scrollTo(0,0)})}static#e=this.\u0275fac=function(r){return new(r||n)(h.GI1($r))};static#t=this.\u0275cmp=h.In1({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(r,s){1&r&&h.wR5(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[fn,KF,ZL]})}return n})();const JL_firebaseConfig={apiKey:"AIzaSyBhT4vrImMOpXLps9RtD_GROoPflfGtM4U",authDomain:"spotirfi-cd7a9.firebaseapp.com",databaseURL:"https://spotirfi-cd7a9-default-rtdb.firebaseio.com",projectId:"spotirfi-cd7a9",storageBucket:"spotirfi-cd7a9.appspot.com",messagingSenderId:"207743558815",appId:"1:207743558815:web:1d28c36da0a303fca7eeaa",measurementId:"G-8Z6DVSWE34"};let tV=(()=>{class n{constructor(t,r,s,c,u){this.doc=t,this.delegate=r,this.zone=s,this.animationType=c,this.moduleImpl=u,this._rendererFactoryPromise=null,this.scheduler=(0,h.uUt)(h.yai,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??ee.e(996).then(ee.bind(ee,996))).catch(r=>{throw new h.OBp(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);const c=new s(this.delegate,this._engine,this.zone);return this.delegate=c,c})}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(0===s.\u0275type)return s;"boolean"==typeof s.throwOnSyntheticProps&&(s.throwOnSyntheticProps=!1);const c=new nV(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(u=>{const g=u.createRenderer(t,r);c.use(g)}).catch(u=>{c.use(s)}),c}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static#e=this.\u0275fac=function(r){h.KEo()};static#t=this.\u0275prov=h.wxM({token:n,factory:n.\u0275fac})}return n})();class nV{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,null!==this.replay){for(const t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,s){this.delegate.insertBefore(e,t,r,s)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(s=>s.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(s=>s.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return null!==this.replay&&e.startsWith("@")}}function rV(n="animations"){return(0,h.AFj)([{provide:h.O8F,useFactory:(e,t,r)=>new tV(e,t,r,n),deps:[ye,Gf,h.WW2]},{provide:h.qwP,useValue:"noop"===n?"NoopAnimations":"BrowserAnimations"}])}let iV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.a4G({type:n,bootstrap:[XL]});static#n=this.\u0275inj=h.s3X({providers:[DP,rV()],imports:[Vg,YF,nh.initializeApp(JL_firebaseConfig),rN,KL,UF]})}return n})();Ti().bootstrapModule(iV).catch(n=>console.error(n))},700:(rn,Ke,ee)=>{ee.d(Ke,{g:()=>be});var h=ee(657);class be extends h.E{constructor(_e){super(),this._value=_e}get value(){return this.getValue()}_subscribe(_e){const xe=super._subscribe(_e);return!xe.closed&&_e.next(this._value),xe}getValue(){const{hasError:_e,thrownError:xe,_value:qe}=this;if(_e)throw xe;return this._throwIfClosed(),qe}next(_e){super.next(this._value=_e)}}},252:(rn,Ke,ee)=>{ee.d(Ke,{_:()=>St});var h=ee(760),be=ee(928),U=ee(472),_e=ee(547),xe=ee(491),qe=ee(880),ye=ee(75);let St=(()=>{class se{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const ft=new se;return ft.source=this,ft.operator=Te,ft}subscribe(Te,ft,wt){const ze=function j(se){return se&&se instanceof h.yR||function z(se){return se&&(0,qe.m)(se.next)&&(0,qe.m)(se.error)&&(0,qe.m)(se.complete)}(se)&&(0,be.GI)(se)}(Te)?Te:new h.ot(Te,ft,wt);return(0,ye.c)(()=>{const{operator:Ye,source:on}=this;ze.add(Ye?Ye.call(ze,on):on?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Te){try{return this._subscribe(Te)}catch(ft){Te.error(ft)}}forEach(Te,ft){return new(ft=Ue(ft))((wt,ze)=>{const Ye=new h.ot({next:on=>{try{Te(on)}catch(wn){ze(wn),Ye.unsubscribe()}},error:ze,complete:wt});this.subscribe(Ye)})}_subscribe(Te){var ft;return null===(ft=this.source)||void 0===ft?void 0:ft.subscribe(Te)}[U.a](){return this}pipe(...Te){return(0,_e.Y)(Te)(this)}toPromise(Te){return new(Te=Ue(Te))((ft,wt)=>{let ze;this.subscribe(Ye=>ze=Ye,Ye=>wt(Ye),()=>ft(ze))})}}return se.create=je=>new se(je),se})();function Ue(se){var je;return null!==(je=se??xe.config.Promise)&&void 0!==je?je:Promise}},657:(rn,Ke,ee)=>{ee.d(Ke,{E:()=>ye});var h=ee(252),be=ee(928);const _e=(0,ee(912).w)(Ue=>function(){Ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=ee(248),qe=ee(75);let ye=(()=>{class Ue extends h._{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const se=new St(this,this);return se.operator=j,se}_throwIfClosed(){if(this.closed)throw new _e}next(j){(0,qe.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(j)}})}error(j){(0,qe.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:se}=this;for(;se.length;)se.shift().error(j)}})}complete(){(0,qe.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:se,isStopped:je,observers:Te}=this;return se||je?be.au:(this.currentObservers=null,Te.push(j),new be.wH(()=>{this.currentObservers=null,(0,xe.k)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:se,thrownError:je,isStopped:Te}=this;se?j.error(je):Te&&j.complete()}asObservable(){const j=new h._;return j.source=this,j}}return Ue.create=(z,j)=>new St(z,j),Ue})();class St extends ye{constructor(z,j){super(),this.destination=z,this.source=j}next(z){var j,se;null===(se=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===se||se.call(j,z)}error(z){var j,se;null===(se=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===se||se.call(j,z)}complete(){var z,j;null===(j=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===j||j.call(z)}_subscribe(z){var j,se;return null!==(se=null===(j=this.source)||void 0===j?void 0:j.subscribe(z))&&void 0!==se?se:be.au}}},760:(rn,Ke,ee)=>{ee.d(Ke,{ot:()=>wt,yR:()=>se});var h=ee(880),be=ee(928),U=ee(491),_e=ee(984),xe=ee(308);const qe=Ue("C",void 0,void 0);function Ue(ct,Ae,rt){return{kind:ct,value:Ae,error:rt}}var z=ee(376),j=ee(75);class se extends be.wH{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,be.GI)(Ae)&&Ae.add(this)):this.destination=wn}static create(Ae,rt,Xt){return new wt(Ae,rt,Xt)}next(Ae){this.isStopped?on(function St(ct){return Ue("N",ct,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?on(function ye(ct){return Ue("E",void 0,ct)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?on(qe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Te(ct,Ae){return je.call(ct,Ae)}class ft{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:rt}=this;if(rt.next)try{rt.next(Ae)}catch(Xt){ze(Xt)}}error(Ae){const{partialObserver:rt}=this;if(rt.error)try{rt.error(Ae)}catch(Xt){ze(Xt)}else ze(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(rt){ze(rt)}}}class wt extends se{constructor(Ae,rt,Xt){let et;if(super(),(0,h.m)(Ae)||!Ae)et={next:Ae??void 0,error:rt??void 0,complete:Xt??void 0};else{let Ct;this&&U.config.useDeprecatedNextContext?(Ct=Object.create(Ae),Ct.unsubscribe=()=>this.unsubscribe(),et={next:Ae.next&&Te(Ae.next,Ct),error:Ae.error&&Te(Ae.error,Ct),complete:Ae.complete&&Te(Ae.complete,Ct)}):et=Ae}this.destination=new ft(et)}}function ze(ct){U.config.useDeprecatedSynchronousErrorHandling?(0,j.q)(ct):(0,_e.U)(ct)}function on(ct,Ae){const{onStoppedNotification:rt}=U.config;rt&&z.u.setTimeout(()=>rt(ct,Ae))}const wn={closed:!0,next:xe.K,error:function Ye(ct){throw ct},complete:xe.K}},928:(rn,Ke,ee)=>{ee.d(Ke,{au:()=>qe,wH:()=>xe,GI:()=>ye});var h=ee(880);const U=(0,ee(912).w)(Ue=>function(j){Ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((se,je)=>`${je+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var _e=ee(248);class xe{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:se}=this;if((0,h.m)(se))try{se()}catch(Te){z=Te instanceof U?Te.errors:[Te]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Te of je)try{St(Te)}catch(ft){z=z??[],ft instanceof U?z=[...z,...ft.errors]:z.push(ft)}}if(z)throw new U(z)}}add(z){var j;if(z&&z!==this)if(this.closed)St(z);else{if(z instanceof xe){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(z)}}_hasParent(z){const{_parentage:j}=this;return j===z||Array.isArray(j)&&j.includes(z)}_addParent(z){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(z),j):j?[j,z]:z}_removeParent(z){const{_parentage:j}=this;j===z?this._parentage=null:Array.isArray(j)&&(0,_e.k)(j,z)}remove(z){const{_finalizers:j}=this;j&&(0,_e.k)(j,z),z instanceof xe&&z._removeParent(this)}}xe.EMPTY=(()=>{const Ue=new xe;return Ue.closed=!0,Ue})();const qe=xe.EMPTY;function ye(Ue){return Ue instanceof xe||Ue&&"closed"in Ue&&(0,h.m)(Ue.remove)&&(0,h.m)(Ue.add)&&(0,h.m)(Ue.unsubscribe)}function St(Ue){(0,h.m)(Ue)?Ue():Ue.unsubscribe()}},491:(rn,Ke,ee)=>{ee.d(Ke,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},773:(rn,Ke,ee)=>{ee.d(Ke,{e:()=>be});var h=ee(760);function be(_e,xe,qe,ye,St){return new U(_e,xe,qe,ye,St)}class U extends h.yR{constructor(xe,qe,ye,St,Ue,z){super(xe),this.onFinalize=Ue,this.shouldUnsubscribe=z,this._next=qe?function(j){try{qe(j)}catch(se){xe.error(se)}}:super._next,this._error=St?function(j){try{St(j)}catch(se){xe.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(j){xe.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var xe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:qe}=this;super.unsubscribe(),!qe&&(null===(xe=this.onFinalize)||void 0===xe||xe.call(this))}}}},704:(rn,Ke,ee)=>{ee.d(Ke,{k:()=>U});var h=ee(448),be=ee(773);function U(_e,xe){return(0,h.i)((qe,ye)=>{let St=0;qe.subscribe((0,be.e)(ye,Ue=>{ye.next(_e.call(xe,Ue,St++))}))})}},376:(rn,Ke,ee)=>{ee.d(Ke,{u:()=>h});const h={setTimeout(be,U,..._e){const{delegate:xe}=h;return xe?.setTimeout?xe.setTimeout(be,U,..._e):setTimeout(be,U,..._e)},clearTimeout(be){const{delegate:U}=h;return(U?.clearTimeout||clearTimeout)(be)},delegate:void 0}},472:(rn,Ke,ee)=>{ee.d(Ke,{a:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},248:(rn,Ke,ee)=>{function h(be,U){if(be){const _e=be.indexOf(U);0<=_e&&be.splice(_e,1)}}ee.d(Ke,{k:()=>h})},912:(rn,Ke,ee)=>{function h(be){const _e=be(xe=>{Error.call(xe),xe.stack=(new Error).stack});return _e.prototype=Object.create(Error.prototype),_e.prototype.constructor=_e,_e}ee.d(Ke,{w:()=>h})},75:(rn,Ke,ee)=>{ee.d(Ke,{c:()=>U,q:()=>_e});var h=ee(491);let be=null;function U(xe){if(h.config.useDeprecatedSynchronousErrorHandling){const qe=!be;if(qe&&(be={errorThrown:!1,error:null}),xe(),qe){const{errorThrown:ye,error:St}=be;if(be=null,ye)throw St}}else xe()}function _e(xe){h.config.useDeprecatedSynchronousErrorHandling&&be&&(be.errorThrown=!0,be.error=xe)}},528:(rn,Ke,ee)=>{function h(be){return be}ee.d(Ke,{Z:()=>h})},880:(rn,Ke,ee)=>{function h(be){return"function"==typeof be}ee.d(Ke,{m:()=>h})},448:(rn,Ke,ee)=>{ee.d(Ke,{e:()=>be,i:()=>U});var h=ee(880);function be(_e){return(0,h.m)(_e?.lift)}function U(_e){return xe=>{if(be(xe))return xe.lift(function(qe){try{return _e(qe,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},308:(rn,Ke,ee)=>{function h(){}ee.d(Ke,{K:()=>h})},547:(rn,Ke,ee)=>{ee.d(Ke,{W:()=>be,Y:()=>U});var h=ee(528);function be(..._e){return U(_e)}function U(_e){return 0===_e.length?h.Z:1===_e.length?_e[0]:function(qe){return _e.reduce((ye,St)=>St(ye),qe)}}},984:(rn,Ke,ee)=>{ee.d(Ke,{U:()=>U});var h=ee(491),be=ee(376);function U(_e){be.u.setTimeout(()=>{const{onUnhandledError:xe}=h.config;if(!xe)throw _e;xe(_e)})}},684:(rn,Ke,ee)=>{ee.d(Ke,{AN:()=>be,Cs:()=>_e,K2:()=>St,Ql:()=>se,Wq:()=>et,aK:()=>z,aM:()=>Ct,gV:()=>U,iC:()=>qe,kP:()=>Xt,kt:()=>Te,m0:()=>h,wb:()=>ye,yA:()=>xe});var h=function(L){return L[L.State=0]="State",L[L.Transition=1]="Transition",L[L.Sequence=2]="Sequence",L[L.Group=3]="Group",L[L.Animate=4]="Animate",L[L.Keyframes=5]="Keyframes",L[L.Style=6]="Style",L[L.Trigger=7]="Trigger",L[L.Reference=8]="Reference",L[L.AnimateChild=9]="AnimateChild",L[L.AnimateRef=10]="AnimateRef",L[L.Query=11]="Query",L[L.Stagger=12]="Stagger",L}(h||{});const be="*";function U(L,te){return{type:h.Trigger,name:L,definitions:te,options:{}}}function _e(L,te=null){return{type:h.Animate,styles:te,timings:L}}function xe(L,te=null){return{type:h.Group,steps:L,options:te}}function qe(L,te=null){return{type:h.Sequence,steps:L,options:te}}function ye(L){return{type:h.Style,styles:L,offset:null}}function St(L,te,Se){return{type:h.State,name:L,styles:te,options:Se}}function z(L,te,Se=null){return{type:h.Transition,expr:L,animation:te,options:Se}}function se(L=null){return{type:h.AnimateChild,options:L}}function Te(L,te,Se=null){return{type:h.Query,selector:L,animation:te,options:Se}}class Xt{constructor(te=0,Se=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=te+Se}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(te=>te()),this._onDoneFns=[])}onStart(te){this._originalOnStartFns.push(te),this._onStartFns.push(te)}onDone(te){this._originalOnDoneFns.push(te),this._onDoneFns.push(te)}onDestroy(te){this._onDestroyFns.push(te)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(te=>te()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(te=>te()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(te){this._position=this.totalTime?te*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(te){const Se="start"==te?this._onStartFns:this._onDoneFns;Se.forEach(Gt=>Gt()),Se.length=0}}class et{constructor(te){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=te;let Se=0,Gt=0,Ln=0;const Ii=this.players.length;0==Ii?queueMicrotask(()=>this._onFinish()):this.players.forEach(Zn=>{Zn.onDone(()=>{++Se==Ii&&this._onFinish()}),Zn.onDestroy(()=>{++Gt==Ii&&this._onDestroy()}),Zn.onStart(()=>{++Ln==Ii&&this._onStart()})}),this.totalTime=this.players.reduce((Zn,Vo)=>Math.max(Zn,Vo.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(te=>te()),this._onDoneFns=[])}init(){this.players.forEach(te=>te.init())}onStart(te){this._onStartFns.push(te)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(te=>te()),this._onStartFns=[])}onDone(te){this._onDoneFns.push(te)}onDestroy(te){this._onDestroyFns.push(te)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(te=>te.play())}pause(){this.players.forEach(te=>te.pause())}restart(){this.players.forEach(te=>te.restart())}finish(){this._onFinish(),this.players.forEach(te=>te.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(te=>te.destroy()),this._onDestroyFns.forEach(te=>te()),this._onDestroyFns=[])}reset(){this.players.forEach(te=>te.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(te){const Se=te*this.totalTime;this.players.forEach(Gt=>{const Ln=Gt.totalTime?Math.min(1,Se/Gt.totalTime):1;Gt.setPosition(Ln)})}getPosition(){const te=this.players.reduce((Se,Gt)=>null===Se||Gt.totalTime>Se.totalTime?Gt:Se,null);return null!=te?te.getPosition():0}beforeDestroy(){this.players.forEach(te=>{te.beforeDestroy&&te.beforeDestroy()})}triggerCallback(te){const Se="start"==te?this._onStartFns:this._onDoneFns;Se.forEach(Gt=>Gt()),Se.length=0}}const Ct="!"},496:(rn,Ke,ee)=>{ee.d(Ke,{qwP:()=>yn,qid:()=>Sy,QHP:()=>vb,kZF:()=>Bt,Ev2:()=>vl,Swk:()=>ed,YND:()=>bb,kD9:()=>gD,ESV:()=>WM,ce5:()=>zc,ayF:()=>zk,syz:()=>Ps,GMv:()=>zo,SIe:()=>ji,eAe:()=>os,_w7:()=>or,_6O:()=>pt,UbH:()=>$t,zZn:()=>is,Uj7:()=>gu,YNh:()=>WI,KYU:()=>Ry,obV:()=>ZD,oF$:()=>Au,WW2:()=>nr,T7N:()=>Ms,AHE:()=>$g,crf:()=>yb,VhX:()=>Qf,q87:()=>fD,O8F:()=>dh,yzm:()=>D_,SI6:()=>iu,Qfh:()=>Ec,Yw2:()=>zp,G4X:()=>dS,eOv:()=>Cy,j1C:()=>tS,a8Z:()=>yy,y8U:()=>cm,K6R:()=>Jt,I44:()=>ZI,cZD:()=>mO,SIz:()=>f0,Gk1:()=>ro,grM:()=>_l,uUt:()=>Vt,sPQ:()=>tP,_Ap:()=>Ei,AFj:()=>ba,cJ3:()=>gO,m4O:()=>sg,o9M:()=>lg,SMS:()=>r_,sRj:()=>Y_,yai:()=>Qp,oPY:()=>Ju,i4S:()=>Dc,GUM:()=>ao,g9Y:()=>Ih,OBp:()=>ke,aS5:()=>uS,Mn9:()=>rw,Y8L:()=>Ar,Om8:()=>Dx,ozE:()=>y_,K2p:()=>Yd,GM_:()=>gx,u8n:()=>Ub,ER9:()=>Jw,Vfw:()=>_x,Gc:()=>vx,iMv:()=>$0,G58:()=>Xr,y02:()=>UT,IHs:()=>$e,K_M:()=>mb,Guz:()=>ka,w5$:()=>Ty,gX2:()=>tg,auf:()=>Bw,GEN:()=>mt,E2t:()=>Ta,eg9:()=>Na,Wk5:()=>xr,QJr:()=>Fa,SYr:()=>jd,UHJ:()=>IE,yG2:()=>FC,e48:()=>D0,m8U:()=>P0,eAK:()=>Dv,szK:()=>gA,In1:()=>wf,Sc5:()=>Cf,wxM:()=>vn,s3X:()=>Xf,a4G:()=>_g,UTH:()=>Df,GI1:()=>xa,wR5:()=>xm,k70:()=>Pm,SAx:()=>Mm,C$Y:()=>Nn,I0R:()=>Rv,KQA:()=>VT,otF:()=>wp,SoX:()=>j0,CoB:()=>lr,gJ8:()=>Lc,KEo:()=>Fp,qCj:()=>rE,Gqi:()=>Yu,GaO:()=>Hv,_Xx:()=>Hm,kPM:()=>Kh,E7m:()=>$a,uAc:()=>ay,WuN:()=>cy,wto:()=>_A,CGJ:()=>_d,usT:()=>Pg,CaN:()=>zb,YFg:()=>ou,m4B:()=>Ha,yuY:()=>wh,OEk:()=>Zv,cNF:()=>gE,oRS:()=>qm,CAO:()=>Xh,MjK:()=>Ku,CC$:()=>lE}),ee(908);let U=null,xe=1;const qe=Symbol("SIGNAL");function ye(i){const o=U;return U=i,o}function Te(i){if((!Xt(i)||i.dirty)&&(i.dirty||i.lastCleanEpoch!==xe)){if(!i.producerMustRecompute(i)&&!wn(i))return i.dirty=!1,void(i.lastCleanEpoch=xe);i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=xe}}function wn(i){et(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],l=i.producerLastReadVersion[o];if(l!==a.version||(Te(a),l!==a.version))return!0}return!1}function rt(i,o){if(function Ct(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),et(i),1===i.liveConsumerNode.length)for(let l=0;l<i.producerNode.length;l++)rt(i.producerNode[l],i.producerIndexOfThis[l]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const l=i.liveConsumerIndexOfThis[o],d=i.liveConsumerNode[o];et(d),d.producerIndexOfThis[l]=o}}function Xt(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function et(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let Zn=null;var pn=ee(657),Tr=ee(928),pr=ee(700),Zr=ee(704);const Ar="https://g.co/ng/security#xss";class ke extends Error{constructor(o,a){super(Xr(o,a)),this.code=o}}function Xr(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}function Dt(i){return o=>{setTimeout(i,void 0,o)}}const or=class vt extends pn.E{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,f=a||(()=>null),_=l;if(o&&"object"==typeof o){const E=o;d=E.next?.bind(E),f=E.error?.bind(E),_=E.complete?.bind(E)}this.__isAsync&&(f=Dt(f),d&&(d=Dt(d)),_&&(_=Dt(_)));const b=super.subscribe({next:d,error:f,complete:_});return o instanceof Tr.wH&&o.add(b),b}};var pt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(pt||{});function mt(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(mt).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ti(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}var Bn=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Bn||{}),Jt=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Jt||{});function dn(i){return{toString:i}.toString()}const $e=globalThis,Jn={},Ft=[];function Y(i){for(let o in i)if(i[o]===Y)return o;throw Error("Could not find renamed property on target object.")}function K(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}const me=Y({\u0275cmp:Y}),Ve=Y({\u0275dir:Y}),st=Y({\u0275pipe:Y}),Pt=Y({\u0275mod:Y}),It=Y({\u0275fac:Y}),mn=Y({__NG_ELEMENT_ID__:Y}),bn=Y({__NG_ENV_ID__:Y});var xr=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(xr||{});function Qa(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}function vf(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],_=a[l++],b=a[l++];i.setAttribute(o,_,b,f)}else{const f=d,_=a[++l];Cl(f)?i.setProperty(o,f,_):i.setAttribute(o,f,_),l++}}return l}function ld(i){return 3===i||4===i||6===i}function Cl(i){return 64===i.charCodeAt(0)}function Za(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||pg(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function pg(i,o,a,l,d){let f=0,_=i.length;if(-1===o)_=-1;else for(;f<i.length;){const b=i[f++];if("number"==typeof b){if(b===o){_=-1;break}if(b>o){_=f-1;break}}}for(;f<i.length;){const b=i[f];if("number"==typeof b)break;if(b===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,o),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}const yf="ng-template";function gn(i,o,a){let l=0,d=!0;for(;l<i.length;){let f=i[l++];if("string"==typeof f&&d){const _=i[l++];if(a&&"class"===f&&-1!==Qa(_.toLowerCase(),o,0))return!0}else{if(1===f){for(;l<i.length&&"string"==typeof(f=i[l++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function Dl(i){return 4===i.type&&i.value!==yf}function Xa(i,o,a){return o===(4!==i.type||a?i.value:yf)}function Tw(i,o,a){let l=4;const d=i.attrs||[],f=function ud(i){for(let o=0;o<i.length;o++)if(ld(i[o]))return o;return i.length}(d);let _=!1;for(let b=0;b<o.length;b++){const E=o[b];if("number"!=typeof E){if(!_)if(4&l){if(l=2|1&l,""!==E&&!Xa(i,E,a)||""===E&&1===o.length){if(Rr(l))return!1;_=!0}}else{const C=8&l?E:o[++b];if(8&l&&null!==i.attrs){if(!gn(i.attrs,C,a)){if(Rr(l))return!1;_=!0}continue}const R=qy(8&l?"class":E,d,Dl(i),a);if(-1===R){if(Rr(l))return!1;_=!0;continue}if(""!==C){let O;O=R>f?"":d[R+1].toLowerCase();const V=8&l?O:null;if(V&&-1!==Qa(V,C,0)||2&l&&C!==O){if(Rr(l))return!1;_=!0}}}}else{if(!_&&!Rr(l)&&!Rr(E))return!1;if(_&&Rr(E))continue;_=!1,l=E|1&l}}return Rr(l)||_}function Rr(i){return 0==(1&i)}function qy(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let b=o[++d];for(;"string"==typeof b;)b=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function If(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function bf(i,o,a=!1){for(let l=0;l<o.length;l++)if(Tw(i,o[l],a))return!0;return!1}function Ky(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let d=0;d<i.length;d++)if(i[d]!==l[d])continue e;return!0}}return!1}function Ef(i,o){return i?":not("+o.trim()+")":o}function Qy(i){let o=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const b=i[++a];d+="["+_+(b.length>0?'="'+b+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Rr(_)&&(o+=Ef(f,d),d=""),l=_,f=f||!Rr(l);a++}return""!==d&&(o+=Ef(f,d)),o}function wf(i){return dn(()=>{const o=dd(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Bn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||Jt.Emulated,styles:i.styles||Ft,_:null,schemas:i.schemas||null,tView:null,id:""};vg(a);const l=i.dependencies;return a.directiveDefs=ec(l,!1),a.pipeDefs=ec(l,!0),a.id=function Tf(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function Aw(i){return Rt(i)||qn(i)}function gg(i){return null!==i}function _g(i){return dn(()=>({type:i.type,bootstrap:i.bootstrap||Ft,declarations:i.declarations||Ft,imports:i.imports||Ft,exports:i.exports||Ft,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Vi(i,o){if(null==i)return Jn;const a={};for(const l in i)if(i.hasOwnProperty(l)){const d=i[l];let f,_,b=xr.None;Array.isArray(d)?(b=d[0],f=d[1],_=d[2]??f):(f=d,_=d),o?(a[f]=b!==xr.None?[l,b]:l,o[f]=_):a[f]=l}return a}function Cf(i){return dn(()=>{const o=dd(i);return vg(o),o})}function Df(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Rt(i){return i[me]||null}function qn(i){return i[Ve]||null}function mr(i){return i[st]||null}function Ei(i){const o=Rt(i)||qn(i)||mr(i);return null!==o&&o.standalone}function gr(i,o){const a=i[Pt]||null;if(!a&&!0===o)throw new Error(`Type ${mt(i)} does not have '\u0275mod' property.`);return a}function dd(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||Jn,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Ft,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vi(i.inputs,o),outputs:Vi(i.outputs),debugInfo:null}}function vg(i){i.features?.forEach(o=>o(i))}function ec(i,o){if(!i)return null;const a=o?mr:Aw;return()=>("function"==typeof i?i():i).map(l=>a(l)).filter(gg)}const In=0,Ee=1,Xe=2,Dn=3,ri=4,ar=5,qi=6,jo=7,hn=8,cr=9,$o=10,it=11,ha=12,Af=13,Tl=14,_n=15,tc=16,Is=17,wi=18,Ci=19,Al=20,Yi=21,Bi=22,nc=23,lt=25,Sf=1,mo=7,ic=9,Yn=10;var Es=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(Es||{});function Un(i){return Array.isArray(i)&&"object"==typeof i[Sf]}function _r(i){return Array.isArray(i)&&!0===i[Sf]}function xf(i){return 0!=(4&i.flags)}function Ki(i){return i.componentOffset>-1}function pa(i){return 1==(1&i.flags)}function ii(i){return!!i.template}function go(i){return 0!=(512&i[Xe])}let kf=!1;function Zt(i){for(;Array.isArray(i);)i=i[In];return i}function xl(i,o){return Zt(o[i])}function Mr(i,o){return Zt(o[i.index])}function ac(i,o){return i.data[o]}function oi(i,o){const a=o[i];return Un(a)?a:a[In]}function Ml(i){return 128==(128&i[Xe])}function si(i,o){return null==o?null:i[o]}function ws(i){i[Is]=0}function Of(i){1024&i[Xe]||(i[Xe]|=1024,Ml(i)&&lc(i))}function cc(i){return!!(9216&i[Xe]||i[nc]?.dirty)}function md(i){cc(i)?lc(i):64&i[Xe]&&(function tb(){return kf}()?(i[Xe]|=1024,lc(i)):i[$o].changeDetectionScheduler?.notify())}function lc(i){i[$o].changeDetectionScheduler?.notify();let o=Cs(i);for(;null!==o&&!(8192&o[Xe])&&(o[Xe]|=8192,Ml(o));)o=Cs(o)}function Ff(i,o){if(256==(256&i[Xe]))throw new ke(911,!1);null===i[Yi]&&(i[Yi]=[]),i[Yi].push(o)}function Cs(i){const o=i[Dn];return _r(o)?o[Dn]:o}const nt={lFrame:zf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Vf(){return nt.bindingsEnabled}function kl(){return null!==nt.skipHydrationRootTNode}function ie(){return nt.lFrame.lView}function Mt(){return nt.lFrame.tView}function Pg(i){return nt.lFrame.contextLView=i,i[hn]}function _d(i){return nt.lFrame.contextLView=null,i}function an(){let i=Uf();for(;null!==i&&64===i.type;)i=i.parent;return i}function Uf(){return nt.lFrame.currentTNode}function Qi(i,o){const a=nt.lFrame;a.currentTNode=i,a.isParent=o}function kg(){return nt.lFrame.isParent}function yd(){nt.lFrame.isParent=!1}function ai(){const i=nt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Di(){return nt.lFrame.bindingIndex}function vo(){return nt.lFrame.bindingIndex++}function ci(i){const o=nt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function cb(i,o){const a=nt.lFrame;a.bindingIndex=a.bindingRootIndex=i,$f(o)}function $f(i){nt.lFrame.currentDirectiveIndex=i}function Id(){return nt.lFrame.currentQueryIndex}function Ed(i){nt.lFrame.currentQueryIndex=i}function ub(i){const o=i[Ee];return 2===o.type?o.declTNode:1===o.type?i[ar]:null}function dc(i,o,a){if(a&pt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&pt.Host||(d=ub(f),null===d||(f=f[Tl],10&d.type))););if(null===d)return!1;o=d,i=f}const l=nt.lFrame=Cd();return l.currentTNode=o,l.lView=i,!0}function wd(i){const o=Cd(),a=i[Ee];nt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Cd(){const i=nt.lFrame,o=null===i?null:i.child;return null===o?zf(i):o}function zf(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Og(){const i=nt.lFrame;return nt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const db=Og;function Ng(){const i=Og();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Br(){return nt.lFrame.selectedIndex}function Ho(i){nt.lFrame.selectedIndex=i}function qt(){const i=nt.lFrame;return ac(i.tView,i.selectedIndex)}let qf=!0;function Td(){return qf}function Ui(i){qf=i}function Ad(){return hc(an(),ie())}function hc(i,o){return new zo(Mr(i,o))}let Vl,zo=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=Ad}return i})();function Yf(i){return i instanceof zo?i.nativeElement:i}function Ol(i,o){i.forEach(a=>Array.isArray(a)?Ol(a,o):o(a))}function Lw(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Ds(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Ti(i,o,a){let l=ma(i,o);return l>=0?i[1|l]=a:(l=~l,function Lg(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Mn(i,o){const a=ma(i,o);if(a>=0)return i[1|a]}function ma(i,o){return function Vg(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),_=i[f<<a];if(o===_)return f<<a;_>o?d=f:l=f+1}return~(d<<a)}(i,o,1)}function Bg(){return this._results[Symbol.iterator]()}class Qf{static#e=Symbol.iterator;get changes(){return this._changes??=new or}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const a=Qf.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Bg)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){this.dirty=!1;const l=function li(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function fb(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(this._results,l,a))&&(this._results=l,this.length=l.length,this.last=l[this.length-1],this.first=l[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(o){this._onDirty=o}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function fc(i){return 128==(128&i.flags)}function Bw(i){Vl=i}function vn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Xf(i){return{providers:i.providers||[],imports:i.imports||[]}}function Bl(i){return gb(i,Ai)||gb(i,_b)}function mb(i){return null!==Bl(i)}function gb(i,o){return i.hasOwnProperty(o)?i[o]:null}function Jf(i){return i&&(i.hasOwnProperty(Sd)||i.hasOwnProperty(Uw))?i[Sd]:null}const Ai=Y({\u0275prov:Y}),Sd=Y({\u0275inj:Y}),_b=Y({ngInjectableDef:Y}),Uw=Y({ngInjectorDef:Y});class $t{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=vn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const vb=new $t("",{providedIn:"root",factory:()=>ep}),ep="ng",yb=new $t(""),$g=new $t("",{providedIn:"platform",factory:()=>"unknown"}),yn=new $t(""),bb=new $t("",{providedIn:"root",factory:()=>function bo(){if(void 0!==Vl)return Vl;if(typeof document<"u")return document;throw new ke(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),Hg=Y({__forward_ref__:Y});function Ul(i){return i.__forward_ref__=Ul,i.toString=function(){return mt(this())},i}function ot(i){return jl(i)?i():i}function jl(i){return"function"==typeof i&&i.hasOwnProperty(Hg)&&i.__forward_ref__===Ul}function ip(i){return i&&!!i.\u0275providers}function at(i){return"string"==typeof i?i:null==i?"":String(i)}function Zi(i,o){throw new ke(-201,!1)}let Wo;function Wg(){return Wo}function ui(i){const o=Wo;return Wo=i,o}function Rd(i,o,a){const l=Bl(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&pt.Optional?null:void 0!==o?o:void Zi()}const Hl={},zl="__NG_DI_FLAG__",en="ngTempTokenPath",_a=/\n/gm,vc="__source";let Ts;function Hn(i){const o=Ts;return Ts=i,o}function Eb(i,o=pt.Default){if(void 0===Ts)throw new ke(-203,!1);return null===Ts?Rd(i,void 0,o):Ts.get(i,o&pt.Optional?null:void 0,o)}function lr(i,o=pt.Default){return(Wg()||Eb)(ot(i),o)}function Vt(i,o=pt.Default){return lr(i,Md(o))}function Md(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function cp(i){const o=[];for(let a=0;a<i.length;a++){const l=ot(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,!1);let d,f=pt.Default;for(let _=0;_<l.length;_++){const b=l[_],E=yt(b);"number"==typeof E?-1===E?d=b.token:f|=E:d=b}o.push(lr(d,f))}else o.push(lr(l))}return o}function Si(i,o){return i[zl]=o,i.prototype[zl]=o,i}function yt(i){return i[zl]}let Ic=()=>null;function Gn(i,o,a=!1){return Ic(i,o,a)}const ut="__parameters__";function Rs(i,o,a){return dn(()=>{const l=function xs(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return b.annotation=_,b;function b(E,C,S){const R=E.hasOwnProperty(ut)?E[ut]:Object.defineProperty(E,ut,{value:[]})[ut];for(;R.length<=S;)R.push(null);return(R[S]=R[S]||[]).push(_),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}const Ms=Si(Rs("Optional"),8),Ec=Si(Rs("SkipSelf"),4);function Xo(i,o){return i.hasOwnProperty(It)?i[It]:null}const Ps=new $t(""),e_=new $t("",-1),Ql=new $t("");class wc{get(o,a=Hl){if(a===Hl){const l=new Error(`NullInjectorError: No provider for ${mt(o)}!`);throw l.name="NullInjectorError",l}return a}}function ba(i){return{\u0275providers:i}}function pp(...i){return{\u0275providers:Od(0,i),\u0275fromNgModule:!0}}function Od(i,...o){const a=[],l=new Set;let d;const f=_=>{a.push(_)};return Ol(o,_=>{const b=_;Jo(b,f,[],l)&&(d||=[],d.push(b))}),void 0!==d&&Zl(d,f),a}function Zl(i,o){for(let a=0;a<i.length;a++){const{ngModule:l,providers:d}=i[a];Ia(d,f=>{o(f,l)})}}function Jo(i,o,a,l){if(!(i=ot(i)))return!1;let d=null,f=Jf(i);const _=!f&&Rt(i);if(f||_){if(_&&!_.standalone)return!1;d=i}else{const E=i.ngModule;if(f=Jf(E),!f)return!1;d=E}const b=l.has(d);if(_){if(b)return!1;if(l.add(d),_.dependencies){const E="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const C of E)Jo(C,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!b){let C;l.add(d);try{Ol(f.imports,S=>{Jo(S,o,a,l)&&(C||=[],C.push(S))})}finally{}void 0!==C&&Zl(C,o)}if(!b){const C=Xo(d)||(()=>new d);o({provide:d,useFactory:C,deps:Ft},d),o({provide:Ql,useValue:d,multi:!0},d),o({provide:Ps,useValue:()=>lr(d),multi:!0},d)}const E=f.providers;if(null!=E&&!b){const C=i;Ia(E,S=>{o(S,C)})}}}return d!==i&&void 0!==i.providers}function Ia(i,o){for(let a of i)ip(a)&&(a=a.\u0275providers),Array.isArray(a)?Ia(a,o):o(a)}const Ab=Y({provide:String,useValue:Y});function Ao(i){return null!==i&&"object"==typeof i&&Ab in i}function es(i){return"function"==typeof i}const Dc=new $t(""),ks={},Nd={};let Tc;function Ac(){return void 0===Tc&&(Tc=new wc),Tc}class ji{}class ts extends ji{get destroyed(){return this._destroyed}constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gp(o,_=>this.processProvider(_)),this.records.set(e_,xc(void 0,this)),d.has("environment")&&this.records.set(ji,xc(void 0,this));const f=this.records.get(Dc);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Ql,Ft,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=Hn(this),l=ui(void 0);try{return o()}finally{Hn(a),ui(l)}}get(o,a=Hl,l=pt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(bn))return o[bn](this);l=Md(l);const f=Hn(this),_=ui(void 0);try{if(!(l&pt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function Rb(i){return"function"==typeof i||"object"==typeof i&&i instanceof $t}(o)&&Bl(o);E=C&&this.injectableDefInScope(C)?xc(Sc(o),ks):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&pt.Self?Ac():this.parent).get(o,a=l&pt.Optional&&a===Hl?null:a)}catch(b){if("NullInjectorError"===b.name){if((b[en]=b[en]||[]).unshift(mt(o)),f)throw b;return function wb(i,o,a,l){const d=i[en];throw o[vc]&&d.unshift(o[vc]),i.message=function lp(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=mt(o);if(Array.isArray(o))d=o.map(mt).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let b=o[_];f.push(_+":"+("string"==typeof b?JSON.stringify(b):mt(b)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(_a,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[en]=null,i}(b,o,"R3InjectorError",this.source)}throw b}finally{ui(_),Hn(f)}}resolveInjectorInitializers(){const o=Hn(this),a=ui(void 0);try{const d=this.get(Ps,Ft,pt.Self);for(const f of d)f()}finally{Hn(o),ui(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(mt(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(o){let a=es(o=ot(o))?o:ot(o&&o.provide);const l=function Sb(i){return Ao(i)?xc(void 0,i.useValue):xc(function Fd(i,o,a){let l;if(es(i)){const d=ot(i);return Xo(d)||Sc(d)}if(Ao(i))l=()=>ot(i.useValue);else if(function Cc(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...cp(i.deps||[]));else if(function t_(i){return!(!i||!i.useExisting)}(i))l=()=>lr(ot(i.useExisting));else{const d=ot(i&&(i.useClass||i.provide));if(!function mp(i){return!!i.deps}(i))return Xo(d)||Sc(d);l=()=>new d(...cp(i.deps))}return l}(i),ks)}(o);if(!es(o)&&!0===o.multi){let d=this.records.get(a);d||(d=xc(void 0,ks,!0),d.factory=()=>cp(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===ks&&(a.value=Nd,a.value=a.factory()),"object"==typeof a.value&&a.value&&function xb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=ot(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Sc(i){const o=Bl(i),a=null!==o?o.factory:Xo(i);if(null!==a)return a;if(i instanceof $t)throw new ke(204,!1);if(i instanceof Function)return function n_(i){if(i.length>0)throw new ke(204,!1);const a=function jg(i){return i&&(i[Ai]||i[_b])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ke(204,!1)}function xc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function gp(i,o){for(const a of i)Array.isArray(a)?gp(a,o):a&&ip(a)?gp(a.\u0275providers,o):o(a)}function r_(i,o){i instanceof ts&&i.assertNotDestroyed();const l=Hn(i),d=ui(void 0);try{return o()}finally{Hn(l),ui(d)}}class Ns{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function c_(i,o,a,l){null!==o?o.applyValueToInputSignal(o,l):i[a]=l}function jd(){return l_}function l_(i){return i.type.prototype.ngOnChanges&&(i.setInput=Jl),u_}function u_(){const i=eu(this),o=i?.current;if(o){const a=i.previous;if(a===Jn)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Jl(i,o,a,l,d){const f=this.declaredInputs[l],_=eu(i)||function vp(i,o){return i[d_]=o}(i,{previous:Jn,current:null}),b=_.current||(_.current={}),E=_.previous,C=E[f];b[f]=new Ns(C&&C.currentValue,a,E===Jn),c_(i,o,d,a)}jd.ngInherit=!0;const d_="__ngSimpleChanges__";function eu(i){return i[d_]||null}const di=function(i,o,a){};function Ri(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:b,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:S}=f;_&&(i.contentHooks??=[]).push(-a,_),b&&((i.contentHooks??=[]).push(a,b),(i.contentCheckHooks??=[]).push(a,b)),E&&(i.viewHooks??=[]).push(-a,E),C&&((i.viewHooks??=[]).push(a,C),(i.viewCheckHooks??=[]).push(a,C)),null!=S&&(i.destroyHooks??=[]).push(a,S)}}function tr(i,o,a){tu(i,o,3,a)}function yr(i,o,a,l){(3&i[Xe])===a&&tu(i,o,a,l)}function jr(i,o){let a=i[Xe];(3&a)===o&&(a&=16383,a+=1,i[Xe]=a)}function tu(i,o,a,l){const f=l??-1,_=o.length-1;let b=0;for(let E=void 0!==l?65535&i[Is]:0;E<_;E++)if("number"==typeof o[E+1]){if(b=o[E],null!=l&&b>=l)break}else o[E]<0&&(i[Is]+=65536),(b<f||-1==f)&&(Fs(i,a,o,E),i[Is]=(4294901760&i[Is])+E+2),E++}function ns(i,o){di(4,i,o);const a=ye(null);try{o.call(i)}finally{ye(a),di(5,i,o)}}function Fs(i,o,a,l){const d=a[l]<0,f=a[l+1],b=i[d?-a[l]:a[l]];d?i[Xe]>>14<i[Is]>>16&&(3&i[Xe])===o&&(i[Xe]+=16384,ns(b,f)):ns(b,f)}const rs=-1;class wa{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Pr(i){return i!==rs}function Ca(i){return 32767&i}function Oc(i,o){let a=function bp(i){return i>>16}(i),l=o;for(;a>0;)l=l[Tl],a--;return l}let Mi=!0;function xo(i){const o=Mi;return Mi=i,o}const Ip=255,Nc=5;let $d=0;const $i={};function hi(i,o){const a=v(i,o);if(-1!==a)return a;const l=o[Ee];l.firstCreatePass&&(i.injectorIndex=o.length,Ls(l.data,i),Ls(o,null),Ls(l.blueprint,null));const d=p(i,o),f=i.injectorIndex;if(Pr(d)){const _=Ca(d),b=Oc(d,o),E=b[Ee].data;for(let C=0;C<8;C++)o[f+C]=b[_+C]|E[_+C]}return o[f+8]=d,f}function Ls(i,o){i.push(0,0,0,0,0,0,0,0,o)}function v(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function p(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Hd(d),null===l)return rs;if(a++,d=d[Tl],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return rs}function m(i,o,a){!function Ep(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(mn)&&(l=a[mn]),null==l&&(l=a[mn]=$d++);const d=l&Ip;o.data[i+(d>>Nc)]|=1<<d}(i,o,a)}function T(i,o,a){if(a&pt.Optional||void 0!==i)return i;Zi()}function x(i,o,a,l){if(a&pt.Optional&&void 0===l&&(l=null),!(a&(pt.Self|pt.Host))){const d=i[cr],f=ui(void 0);try{return d?d.get(o,l,a&pt.Optional):Rd(o,l,a&pt.Optional)}finally{ui(f)}}return T(l,0,a)}function P(i,o,a,l=pt.Default,d){if(null!==i){if(2048&o[Xe]&&!(l&pt.Self)){const _=function Cp(i,o,a,l,d){let f=i,_=o;for(;null!==f&&null!==_&&2048&_[Xe]&&!(512&_[Xe]);){const b=H(f,_,a,l|pt.Self,$i);if(b!==$i)return b;let E=f.parent;if(!E){const C=_[Al];if(C){const S=C.get(a,$i,l);if(S!==$i)return S}E=Hd(_),_=_[Tl]}f=E}return d}(i,o,a,l,$i);if(_!==$i)return _}const f=H(i,o,a,l,$i);if(f!==$i)return f}return x(o,a,l,d)}function H(i,o,a,l,d){const f=function Fe(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(mn)?i[mn]:void 0;return"number"==typeof o?o>=0?o&Ip:Fc:o}(a);if("function"==typeof f){if(!dc(o,i,l))return l&pt.Host?T(d,0,l):x(o,a,l,d);try{let _;if(_=f(l),null!=_||l&pt.Optional)return _;Zi()}finally{db()}}else if("number"==typeof f){let _=null,b=v(i,o),E=rs,C=l&pt.Host?o[_n][ar]:null;for((-1===b||l&pt.SkipSelf)&&(E=-1===b?p(i,o):o[b+8],E!==rs&&Hi(l,!1)?(_=o[Ee],b=Ca(E),o=Oc(E,o)):b=-1);-1!==b;){const S=o[Ee];if(fn(f,b,S.data)){const R=ce(b,o,a,_,l,C);if(R!==$i)return R}E=o[b+8],E!==rs&&Hi(l,o[Ee].data[b+8]===C)&&fn(f,b,o)?(_=S,b=Ca(E),o=Oc(E,o)):b=-1}}return d}function ce(i,o,a,l,d,f){const _=o[Ee],b=_.data[i+8],S=Ce(b,_,a,null==l?Ki(b)&&Mi:l!=_&&0!=(3&b.type),d&pt.Host&&f===b);return null!==S?Me(o,_,S,b):$i}function Ce(i,o,a,l,d){const f=i.providerIndexes,_=o.data,b=1048575&f,E=i.directiveStart,S=f>>20,O=d?b+S:i.directiveEnd;for(let V=l?b:b+S;V<O;V++){const W=_[V];if(V<E&&a===W||V>=E&&W.type===a)return V}if(d){const V=_[E];if(V&&ii(V)&&V.type===a)return E}return null}function Me(i,o,a,l){let d=i[a];const f=o.data;if(function Pb(i){return i instanceof wa}(d)){const _=d;_.resolving&&function Go(i,o){throw o&&o.join(" > "),new ke(-200,i)}(function Lt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():at(i)}(f[a]));const b=xo(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?ui(_.injectImpl):null;dc(i,l,pt.Default);try{d=i[a]=_.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function kt(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const _=l_(o);(a.preOrderHooks??=[]).push(i,_),(a.preOrderCheckHooks??=[]).push(i,_)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==C&&ui(C),xo(b),_.resolving=!1,db()}}return d}function fn(i,o,a){return!!(a[o+(i>>Nc)]&1<<i)}function Hi(i,o){return!(i&pt.Self||i&pt.Host&&o)}class Wn{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return P(this._tNode,this._lView,o,Md(l),a)}}function Fc(){return new Wn(an(),ie())}function wp(i){return dn(()=>{const o=i.prototype.constructor,a=o[It]||nu(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[It]||nu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function nu(i){return jl(i)?()=>{const o=nu(ot(i));return o&&o()}:Xo(i)}function Hd(i){const o=i[Ee],a=o.type;return 2===a?o.declTNode:1===a?i[ar]:null}function Lc(i){return function I(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(ld(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(an(),i)}function Yw(i,o=null,a=null,l){const d=Gd(i,o,a,l);return d.resolveInjectorInitializers(),d}function Gd(i,o=null,a=null,l,d=new Set){const f=[a||Ft,pp(i)];return l=l||("object"==typeof i?void 0:mt(i)),new ts(f,o||Ac(),l||null,d)}let is=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=Hl;static#t=this.NULL=new wc;static create(a,l){if(Array.isArray(a))return Yw({name:""},l,a,"");{const d=a.name??"";return Yw({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=vn({token:i,providedIn:"any",factory:()=>lr(e_)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function p_(i){return i.ngOriginalError}class os{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&p_(o);for(;a&&p_(a);)a=p_(a);return a||null}}const Qw=new $t("",{providedIn:"root",factory:()=>Vt(os).handleError.bind(void 0)}),Wd=new $t("",{providedIn:"root",factory:()=>!1});let g_,__;function Bs(i){return function Lb(){if(void 0===g_&&(g_=null,$e.trustedTypes))try{g_=$e.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return g_}()?.createHTML(i)||i}function Bb(i){return function Vb(){if(void 0===__&&(__=null,$e.trustedTypes))try{__=$e.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return __}()?.createScriptURL(i)||i}class Us{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ar})`}}class qd extends Us{getTypeName(){return"HTML"}}class dx extends Us{getTypeName(){return"Style"}}class hx extends Us{getTypeName(){return"Script"}}class fx extends Us{getTypeName(){return"URL"}}class px extends Us{getTypeName(){return"ResourceURL"}}function Ta(i){return i instanceof Us?i.changingThisBreaksApplicationSecurity:i}function Yd(i,o){const a=function mx(i){return i instanceof Us&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${Ar})`)}return a===o}function gx(i){return new qd(i)}function _x(i){return new dx(i)}function Jw(i){return new hx(i)}function vx(i){return new fx(i)}function Ub(i){return new px(i)}class Kd{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Bs(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class tk{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const a=this.inertDocument.createElement("template");return a.innerHTML=Bs(o),a}}const bx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function y_(i){return(i=String(i)).match(bx)?i:"unsafe:"+i}function ss(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function Ap(...i){const o={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const b_=ss("area,br,col,hr,img,wbr"),eC=ss("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jb=ss("rp,rt"),$b=Ap(b_,Ap(eC,ss("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ap(jb,ss("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ap(jb,eC)),Qd=ss("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tC=Ap(Qd,ss("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ss("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ix=ss("script,style,template");class Ex{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!$b.hasOwnProperty(a))return this.sanitizedSomething=!0,!Ix.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const f=l.item(d),_=f.name,b=_.toLowerCase();if(!tC.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let E=f.value;Qd[b]&&(E=y_(E)),this.buf.push(" ",_,'="',nC(E),'"')}return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();$b.hasOwnProperty(a)&&!b_.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(nC(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const wx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cx=/([^\#-~ |!])/g;function nC(i){return i.replace(/&/g,"&amp;").replace(wx,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Cx,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Sp;function Dx(i,o){let a=null;try{Sp=Sp||function v_(i){const o=new tk(i);return function yx(){try{return!!(new window.DOMParser).parseFromString(Bs(""),"text/html")}catch{return!1}}()?new Kd(o):o}(i);let l=o?String(o):"";a=Sp.getInertBodyElement(l);let d=5,f=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=f,f=a.innerHTML,a=Sp.getInertBodyElement(l)}while(l!==f);return Bs((new Ex).sanitizeChildren(Hb(a)||a))}finally{if(a){const l=Hb(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Hb(i){return"content"in i&&function Tx(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var iu=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(iu||{});function iC(i){const o=Rp();return o?o.sanitize(iu.URL,i)||"":Yd(i,"URL")?Ta(i):y_(at(i))}function zb(i){const o=Rp();if(o)return Bb(o.sanitize(iu.RESOURCE_URL,i)||"");if(Yd(i,"ResourceURL"))return Bb(Ta(i));throw new ke(904,!1)}function ou(i,o,a){return function xx(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?zb:iC}(o,a)(i)}function Rp(){const i=ie();return i&&i[$o].sanitizer}const Rx=/^>|^->|<!--|-->|--!>|<!-$/g,aC=/(<|>)/g,Wb="\u200b$1\u200b";const Zd=new Map;let kx=0;const qb="__ngContext__";function fi(i,o){Un(o)?(i[qb]=o[Ci],function Nx(i){Zd.set(i[Ci],i)}(o)):i[qb]=o}function Ro(i){return i instanceof Function?i():i}var D_=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(D_||{});let DC;function TC(i,o){return DC(i,o)}function Pp(i,o,a,l,d){if(null!=l){let f,_=!1;_r(l)?f=l:Un(l)&&(_=!0,l=l[In]);const b=Zt(l);0===i&&null!==a?null==d?Xx(o,a,b):cu(o,a,b,d||null,!0):1===i&&null!==a?cu(o,a,b,d||null,!0):2===i?function js(i,o,a){const l=tI(i,o);l&&function Jx(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,b,_):3===i&&o.destroyNode(b),null!=f&&function gk(i,o,a,l,d){const f=a[mo];f!==Zt(a)&&Pp(o,i,l,f,d);for(let b=Yn;b<a.length;b++){const E=a[b];pi(E[Ee],E,i,o,l,f)}}(o,i,f,a,d)}}function Xb(i,o){return i.createComment(function cC(i){return i.replace(Rx,o=>o.replace(aC,Wb))}(o))}function T_(i,o,a){return i.createElement(o,a)}function su(i,o){pi(i,o,o[it],2,null,null)}function kp(i,o){const a=i[ic],l=a.indexOf(o);a.splice(l,1)}function Op(i,o){if(i.length<=Yn)return;const a=Yn+o,l=i[a];if(l){const d=l[tc];null!==d&&d!==i&&kp(d,l),o>0&&(i[a-1][ri]=l[ri]);const f=Ds(i,Yn+o);!function Yx(i,o){su(i,o),o[In]=null,o[ar]=null}(l[Ee],l);const _=f[wi];null!==_&&_.detachView(f[Ee]),l[Dn]=null,l[ri]=null,l[Xe]&=-129}return l}function au(i,o){if(!(256&o[Xe])){const a=o[it];a.destroyNode&&pi(i,o,a,3,null,null),function Kx(i){let o=i[ha];if(!o)return Jb(i[Ee],i);for(;o;){let a=null;if(Un(o))a=o[ha];else{const l=o[Yn];l&&(a=l)}if(!a){for(;o&&!o[ri]&&o!==i;)Un(o)&&Jb(o[Ee],o),o=o[Dn];null===o&&(o=i),Un(o)&&Jb(o[Ee],o),a=o&&o[ri]}o=a}}(o)}}function Jb(i,o){if(!(256&o[Xe])){o[Xe]&=-129,o[Xe]|=256,o[nc]&&function ct(i){if(et(i),Xt(i))for(let o=0;o<i.producerNode.length;o++)rt(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}(o[nc]),function Np(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof wa)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const b=d[f[_]],E=f[_+1];di(4,b,E);try{E.call(b)}finally{di(5,b,E)}}else{di(4,d,f);try{f.call(d)}finally{di(5,d,f)}}}}}(i,o),function eI(i,o){const a=i.cleanup,l=o[jo];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+3];_>=0?l[_]():l[-_].unsubscribe(),f+=2}else a[f].call(l[a[f+1]]);null!==l&&(o[jo]=null);const d=o[Yi];if(null!==d){o[Yi]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,o),1===o[Ee].type&&o[it].destroy();const a=o[tc];if(null!==a&&_r(o[Dn])){a!==o[Dn]&&kp(a,o);const l=o[wi];null!==l&&l.detachView(i)}!function hC(i){Zd.delete(i[Ci])}(o)}}function Jd(i,o,a){return function SC(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[In];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:f}=i.data[l.directiveStart+d];if(f===Jt.None||f===Jt.Emulated)return null}return Mr(l,a)}}(i,o.parent,a)}function cu(i,o,a,l,d){i.insertBefore(o,a,l,d)}function Xx(i,o,a){i.appendChild(o,a)}function eh(i,o,a,l,d){null!==l?cu(i,o,a,l,d):Xx(i,o,a)}function tI(i,o){return i.parentNode(o)}function RC(i,o,a){return MC(i,o,a)}let Bc,MC=function nI(i,o,a){return 40&i.type?Mr(i,a):null};function A_(i,o,a,l){const d=Jd(i,l,o),f=o[it],b=RC(l.parent||o[ar],l,o);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)eh(f,d,a[E],b,!1);else eh(f,d,a,b,!1);void 0!==Bc&&Bc(f,l,o,a,d)}function th(i,o){if(null!==o){const a=o.type;if(3&a)return Mr(o,i);if(4&a)return iI(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return th(i,l);{const d=i[o.index];return _r(d)?iI(-1,d):Zt(d)}}if(32&a)return TC(o,i)()||Zt(i[o.index]);{const l=lu(i,o);return null!==l?Array.isArray(l)?l[0]:th(Cs(i[_n]),l):th(i,o.next)}}return null}function lu(i,o){return null!==o?i[_n][ar].projection[o.projection]:null}function iI(i,o){const a=Yn+i+1;if(a<o.length){const l=o[a],d=l[Ee].firstChild;if(null!==d)return th(l,d)}return o[mo]}function PC(i,o,a,l,d,f,_){for(;null!=a;){const b=l[a.index],E=a.type;if(_&&0===o&&(b&&fi(Zt(b),l),a.flags|=2),32!=(32&a.flags))if(8&E)PC(i,o,a.child,l,d,f,!1),Pp(o,i,d,b,f);else if(32&E){const C=TC(a,l);let S;for(;S=C();)Pp(o,i,d,S,f);Pp(o,i,d,b,f)}else 16&E?kC(i,o,l,a,d,f):Pp(o,i,d,b,f);a=_?a.projectionNext:a.next}}function pi(i,o,a,l,d,f){PC(a,l,i.firstChild,o,d,f,!1)}function kC(i,o,a,l,d,f){const _=a[_n],E=_[ar].projection[l.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)Pp(o,i,d,E[C],f);else{let C=E;const S=_[Dn];fc(l)&&(C.flags|=128),PC(i,o,C,S,d,f,!0)}}function OC(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function NC(i,o,a){const{mergedAttrs:l,classes:d,styles:f}=a;null!==l&&vf(i,o,l),null!==d&&OC(i,o,d),null!==f&&function nR(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}const Et={};function FC(i=1){oI(Mt(),ie(),Br()+i,!1)}function oI(i,o,a,l){if(!l)if(3==(3&o[Xe])){const f=i.preOrderCheckHooks;null!==f&&tr(o,f,a)}else{const f=i.preOrderHooks;null!==f&&yr(o,f,0,a)}Ho(a)}function xa(i,o=pt.Default){const a=ie();return null===a?lr(i,o):P(an(),a,ot(i),o)}function Fp(){throw new Error("invalid")}function S_(i,o,a,l,d,f){const _=ye(null);try{let b=null;d&xr.SignalBased&&(b=o[l][qe]),null!==b&&void 0!==b.transformFn&&(f=b.transformFn(f)),d&xr.HasDecoratorInputTransform&&(f=i.inputTransforms[l].call(o,f)),null!==i.setInput?i.setInput(o,b,f,a,l):c_(o,b,l,f)}finally{ye(_)}}function x_(i,o,a,l,d,f,_,b,E,C,S){const R=o.blueprint.slice();return R[In]=d,R[Xe]=204|l,(null!==C||i&&2048&i[Xe])&&(R[Xe]|=2048),ws(R),R[Dn]=R[Tl]=i,R[hn]=a,R[$o]=_||i&&i[$o],R[it]=b||i&&i[it],R[cr]=E||i&&i[cr]||null,R[ar]=f,R[Ci]=function Ox(){return kx++}(),R[qi]=S,R[Al]=C,R[_n]=2==o.type?i[_n]:R,R}function nh(i,o,a,l,d){let f=i.data[o];if(null===f)f=function R_(i,o,a,l,d){const f=Uf(),_=kg(),E=i.data[o]=function HC(i,o,a,l,d,f){let _=o?o.injectorIndex:-1,b=0;return kl()&&(b|=128),{type:a,index:l,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:b,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=E),null!==f&&(_?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E,E.prev=f)),E}(i,o,a,l,d),function bd(){return nt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const _=function vd(){const i=nt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Qi(f,!0),f}function Lp(i,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function LC(i,o,a,l,d){const f=Br(),_=2&l;try{Ho(-1),_&&o.length>lt&&oI(i,o,lt,!1),di(_?2:0,d),a(l,d)}finally{Ho(f),di(_?3:1,d)}}function M_(i,o,a){if(xf(o)){const l=ye(null);try{const f=o.directiveEnd;for(let _=o.directiveStart;_<f;_++){const b=i.data[_];b.contentQueries&&b.contentQueries(1,a[_],_)}}finally{ye(l)}}}function VC(i,o,a){Vf()&&(function tn(i,o,a,l){const d=a.directiveStart,f=a.directiveEnd;Ki(a)&&function hI(i,o,a){const l=Mr(o,i),d=BC(a);let _=16;a.signals?_=4096:a.onPush&&(_=64);const b=cs(i,x_(i,d,null,_,l,o,null,i[$o].rendererFactory.createRenderer(l,a),null,null,null));i[o.index]=b}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||hi(a,o),fi(l,o);const _=a.initialInputs;for(let b=d;b<f;b++){const E=i.data[b],C=Me(o,i,b,a);fi(C,o),null!==_&&cR(0,b-d,C,E,0,_),ii(E)&&(oi(a.index,o)[hn]=Me(o,i,b,a))}}(i,o,a,Mr(a,o)),64==(64&a.flags)&&qC(i,o,a))}function Vp(i,o,a=Mr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],b=-1===_?a(o,i):i[_];i[d++]=b}}}function BC(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=P_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function P_(i,o,a,l,d,f,_,b,E,C,S){const R=lt+l,O=R+d,V=function iR(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Et);return a}(R,O),W="function"==typeof C?C():C;return V[Ee]={type:i,blueprint:V,template:a,queries:null,viewQuery:b,declTNode:o,data:V.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:W,incompleteFirstPass:!1,ssrId:S}}let aI=()=>null;function cI(i,o,a,l,d){for(let f in o){if(!o.hasOwnProperty(f))continue;const _=o[f];if(void 0===_)continue;l??={};let b,E=xr.None;Array.isArray(_)?(b=_[0],E=_[1]):b=_;let C=f;if(null!==d){if(!d.hasOwnProperty(f))continue;C=d[f]}0===i?lI(l,a,C,b,E):lI(l,a,C,b)}return l}function lI(i,o,a,l,d){let f;i.hasOwnProperty(a)?(f=i[a]).push(o,l):f=i[a]=[o,l],void 0!==d&&f.push(d)}function Pi(i,o,a,l,d,f,_,b){const E=Mr(o,a);let S,C=o.inputs;!b&&null!=C&&(S=C[l])?(uu(i,a,S,l,d),Ki(o)&&function _k(i,o){const a=oi(o,i);16&a[Xe]||(a[Xe]|=64)}(a,o.index)):3&o.type&&(l=function GC(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,o.value||"",l):d,f.setProperty(E,l,d))}function dI(i,o,a,l){if(Vf()){const d=null===l?null:{"":-1},f=function Oe(i,o){const a=i.directiveRegistry;let l=null,d=null;if(a)for(let f=0;f<a.length;f++){const _=a[f];if(bf(o,_.selectors,!1))if(l||(l=[]),ii(_))if(null!==_.findHostDirectiveDefs){const b=[];d=d||new Map,_.findHostDirectiveDefs(_,b,d),l.unshift(...b,_),Bp(i,o,b.length)}else l.unshift(_),Bp(i,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,l,d),l.push(_)}return null===l?null:[l,d]}(i,a);let _,b;null===f?_=b=null:[_,b]=f,null!==_&&he(i,o,a,_,d,b),d&&function bt(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new ke(-301,!1);l.push(o[d],f)}}}(a,l,d)}a.mergedAttrs=Za(a.mergedAttrs,a.attrs)}function he(i,o,a,l,d,f){for(let C=0;C<l.length;C++)m(hi(a,o),i,l[C].type);!function Up(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,l.length);for(let C=0;C<l.length;C++){const S=l[C];S.providersResolver&&S.providersResolver(S)}let _=!1,b=!1,E=Lp(i,o,l.length,null);for(let C=0;C<l.length;C++){const S=l[C];a.mergedAttrs=Za(a.mergedAttrs,S.hostAttrs),aR(i,a,o,E,S),k_(E,S,d),null!==S.contentQueries&&(a.flags|=4),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(a.flags|=64);const R=S.type.prototype;!_&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),_=!0),!b&&(R.ngOnChanges||R.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),b=!0),E++}!function zC(i,o,a){const d=o.directiveEnd,f=i.data,_=o.attrs,b=[];let E=null,C=null;for(let S=o.directiveStart;S<d;S++){const R=f[S],O=a?a.get(R):null,W=O?O.outputs:null;E=cI(0,R.inputs,S,E,O?O.inputs:null),C=cI(1,R.outputs,S,C,W);const fe=null===E||null===_||Dl(o)?null:mi(E,S,_);b.push(fe)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=8),E.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=b,o.inputs=E,o.outputs=C}(i,a,f)}function qC(i,o,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,_=function lb(){return nt.lFrame.currentDirectiveIndex}();try{Ho(f);for(let b=l;b<d;b++){const E=i.data[b],C=o[b];$f(b),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&as(E,C)}}finally{Ho(-1),$f(_)}}function as(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Bp(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function k_(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;ii(o)&&(a[""]=i)}}function aR(i,o,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Xo(d.type)),_=new wa(f,ii(d),xa);i.blueprint[l]=_,a[l]=_,function WC(i,o,a,l,d){const f=d.hostBindings;if(f){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const b=~o.index;(function $s(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(_)!=b&&_.push(b),_.push(a,l,f)}}(i,o,l,Lp(i,a,d.hostVars,Et),d)}function Hs(i,o,a,l,d,f){const _=Mr(i,o);!function fI(i,o,a,l,d,f,_){if(null==f)i.removeAttribute(o,d,a);else{const b=null==_?at(f):_(f,l||"",d);i.setAttribute(o,d,b,a)}}(o[it],_,f,i.value,a,l,d)}function cR(i,o,a,l,d,f){const _=f[o];if(null!==_)for(let b=0;b<_.length;)S_(l,a,_[b++],_[b++],_[b++],_[b++])}function mi(i,o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===l&&(l=[]);const _=i[f];for(let b=0;b<_.length;b+=3)if(_[b]===o){l.push(f,_[b+1],_[b+2],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function jp(i,o,a,l){return[i,!0,0,o,null,l,null,a,null,null]}function br(i,o){const a=i.contentQueries;if(null!==a){const l=ye(null);try{for(let d=0;d<a.length;d+=2){const _=a[d+1];if(-1!==_){const b=i.data[_];Ed(a[d]),b.contentQueries(2,o[_],_)}}}finally{ye(l)}}}function cs(i,o){return i[ha]?i[Af][ri]=o:i[ha]=o,i[Af]=o,o}function pI(i,o,a){Ed(0);const l=ye(null);try{o(i,a)}finally{ye(l)}}function O_(i){return i[jo]||(i[jo]=[])}function mI(i){return i.cleanup||(i.cleanup=[])}function N_(i,o){const a=i[cr],l=a?a.get(os,null):null;l&&l.handleError(o)}function uu(i,o,a,l,d){for(let f=0;f<a.length;){const _=a[f++],b=a[f++],E=a[f++];S_(i.data[_],o[_],l,b,E,d)}}function Mo(i,o,a){const l=xl(o,i);!function qx(i,o,a){i.setValue(o,a)}(i[it],l,a)}function zs(i,o){const a=oi(o,i),l=a[Ee];!function gI(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(l,a);const d=a[In];null!==d&&null===a[qi]&&(a[qi]=Gn(d,a[cr])),_I(l,a,a[hn])}function _I(i,o,a){wd(o);try{const l=i.viewQuery;null!==l&&pI(1,l,a);const d=i.template;null!==d&&LC(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),o[wi]?.finishViewCreation(i),i.staticContentQueries&&br(i,o),i.staticViewQueries&&pI(2,i.viewQuery,a);const f=i.components;null!==f&&function uR(i,o){for(let a=0;a<o.length;a++)zs(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[Xe]&=-5,Ng()}}function jc(i,o){return!o||null===o.firstChild||fc(i)}function rh(i,o,a,l=!0){const d=o[Ee];if(function Qx(i,o,a,l){const d=Yn+l,f=a.length;l>0&&(a[d-1][ri]=o),l<f-Yn?(o[ri]=a[d],Lw(a,Yn+l,o)):(a.push(o),o[ri]=null),o[Dn]=a;const _=o[tc];null!==_&&a!==_&&function Zx(i,o){const a=i[ic];o[_n]!==o[Dn][Dn][_n]&&(i[Xe]|=Es.HasTransplantedViews),null===a?i[ic]=[o]:a.push(o)}(_,o);const b=o[wi];null!==b&&b.insertView(i),md(o),o[Xe]|=128}(d,o,i,a),l){const _=iI(a,i),b=o[it],E=tI(b,i[mo]);null!==E&&function AC(i,o,a,l,d,f){l[In]=d,l[ar]=o,pi(i,l,a,1,d,f)}(d,i[ar],b,o,E,_)}const f=o[qi];null!==f&&null!==f.firstChild&&(f.firstChild=null)}function ih(i,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];null!==f&&l.push(Zt(f)),_r(f)&&F_(f,l);const _=a.type;if(8&_)ih(i,o,a.child,l);else if(32&_){const b=TC(a,o);let E;for(;E=b();)l.push(E)}else if(16&_){const b=lu(o,a);if(Array.isArray(b))l.push(...b);else{const E=Cs(o[_n]);ih(E[Ee],E,b,l,!0)}}a=d?a.projectionNext:a.next}return l}function F_(i,o){for(let a=Yn;a<i.length;a++){const l=i[a],d=l[Ee].firstChild;null!==d&&ih(l[Ee],l,d,o)}i[mo]!==i[In]&&o.push(i[mo])}let L_=[];const YC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{lc(i.lView)},consumerOnSignalRead(){this.lView[nc]=this}};function KC(i){return QC(i[ha])}function oh(i){return QC(i[ri])}function QC(i){for(;null!==i&&!_r(i);)i=i[ri];return i}function du(i,o=!0,a=0){const l=i[$o],d=l.rendererFactory;d.begin?.();try{!function wI(i,o){Hp(i,o);let a=0;for(;cc(i);){if(100===a)throw new ke(103,!1);a++,Hp(i,1)}}(i,a)}catch(_){throw o&&N_(i,_),_}finally{d.end?.(),l.inlineEffectRunner?.flush()}}function XC(i,o,a,l){const d=o[Xe];if(256==(256&d))return;o[$o].inlineEffectRunner?.flush(),wd(o);let _=null,b=null;(function JC(i){return 2!==i.type})(i)&&(b=function bI(i){return i[nc]??function II(i){const o=L_.pop()??Object.create(YC);return o.lView=i,o}(i)}(o),_=function Ye(i){return i&&(i.nextProducerIndex=0),ye(i)}(b));try{ws(o),function jf(i){return nt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&LC(i,o,a,2,l);const E=3==(3&d);if(E){const R=i.preOrderCheckHooks;null!==R&&tr(o,R,null)}else{const R=i.preOrderHooks;null!==R&&yr(o,R,0,null),jr(o,0)}if(function V_(i){for(let o=KC(i);null!==o;o=oh(o)){if(!(o[Xe]&Es.HasTransplantedViews))continue;const a=o[ic];for(let l=0;l<a.length;l++){Of(a[l])}}}(o),CI(o,0),null!==i.contentQueries&&br(i,o),E){const R=i.contentCheckHooks;null!==R&&tr(o,R)}else{const R=i.contentHooks;null!==R&&yr(o,R,1),jr(o,1)}!function rR(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Ho(~d);else{const f=d,_=a[++l],b=a[++l];cb(_,f),b(2,o[f])}}}finally{Ho(-1)}}(i,o);const C=i.components;null!==C&&U_(o,C,0);const S=i.viewQuery;if(null!==S&&pI(2,S,l),E){const R=i.viewCheckHooks;null!==R&&tr(o,R)}else{const R=i.viewHooks;null!==R&&yr(o,R,2),jr(o,2)}if(!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Bi]){for(const R of o[Bi])R();o[Bi]=null}o[Xe]&=-73}catch(E){throw lc(o),E}finally{null!==b&&(function on(i,o){if(ye(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Xt(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)rt(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}(b,_),function EI(i){i.lView[nc]!==i&&(i.lView=null,L_.push(i))}(b)),Ng()}}function CI(i,o){for(let a=KC(i);null!==a;a=oh(a))for(let l=Yn;l<a.length;l++)B_(a[l],o)}function DI(i,o,a){B_(oi(o,i),a)}function B_(i,o){Ml(i)&&Hp(i,o)}function Hp(i,o){const l=i[Ee],d=i[Xe],f=i[nc];let _=!!(0===o&&16&d);if(_||=!!(64&d&&0===o),_||=!!(1024&d),_||=!(!f?.dirty||!wn(f)),f&&(f.dirty=!1),i[Xe]&=-9217,_)XC(l,i,l.template,i[hn]);else if(8192&d){CI(i,1);const b=l.components;null!==b&&U_(i,b,1)}}function U_(i,o,a){for(let l=0;l<o.length;l++)DI(i,o[l],a)}function sh(i){for(i[$o].changeDetectionScheduler?.notify();i;){i[Xe]|=64;const o=Cs(i);if(go(i)&&!o)return i;i=o}return null}class ah{get rootNodes(){const o=this._lView,a=o[Ee];return ih(a,o,a.firstChild,[])}constructor(o,a,l=!0){this._lView=o,this._cdRefInjectingView=a,this.notifyErrorHandler=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hn]}set context(o){this._lView[hn]=o}get destroyed(){return 256==(256&this._lView[Xe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Dn];if(_r(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Op(o,l),Ds(a,l))}this._attachedToViewContainer=!1}au(this._lView[Ee],this._lView)}onDestroy(o){Ff(this._lView,o)}markForCheck(){sh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Xe]&=-129}reattach(){md(this._lView),this._lView[Xe]|=128}detectChanges(){this._lView[Xe]|=1024,du(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,su(this._lView[Ee],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=o,md(this._lView)}}let zp=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=TI}return i})();const eD=zp,tD=class extends eD{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,l){const d=function Gs(i,o,a,l){const d=o.tView,b=x_(i,d,a,4096&i[Xe]?4096:16,null,o,null,null,null,l?.injector??null,l?.dehydratedView??null);b[tc]=i[o.index];const C=i[wi];return null!==C&&(b[wi]=C.createEmbeddedView(d)),_I(d,b,a),b}(this._declarationLView,this._declarationTContainer,o,{injector:a,dehydratedView:l});return new ah(d)}};function TI(){return Gp(an(),ie())}function Gp(i,o){return 4&i.type?new tD(o,i,hc(i,o)):null}class Qp{}class dD{}class VI{}class BI{resolveComponentFactory(o){throw function Zp(i){const o=Error(`No component factory found for ${mt(i)}.`);return o.ngComponent=i,o}(o)}}let zc=(()=>{class i{static#e=this.NULL=new BI}return i})();class dh{}let fD=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function mR(){const i=ie(),a=oi(an().index,i);return(Un(a)?a:i)[it]}()}return i})(),pD=(()=>{class i{static#e=this.\u0275prov=vn({token:i,providedIn:"root",factory:()=>null})}return i})();const Xp={};function Y_(i){const o=ye(null);try{return i()}finally{ye(o)}}function Ws(i){return!!$I(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function $I(i){return null!==i&&("function"==typeof i||"object"==typeof i)}class HI{constructor(){}supports(o){return Ws(o)}create(o){return new IR(o)}}const mD=(i,o)=>o;class IR{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||mD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<tm(l,d,f)?a:l,b=tm(_,d,f),E=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const C=b-d,S=E-d;if(C!=S){for(let O=0;O<C;O++){const V=O<f.length?f[O]:f[O]=0,W=V+O;S<=W&&W<C&&(f[O]=V+1)}f[_.previousIndex]=S-C}}b!==E&&o(_,b,E)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ws(o))throw new ke(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)f=o[b],_=this._trackByFn(b,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,b)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,b),l=!0),a=a._next}else d=0,function bR(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,b=>{_=this._trackByFn(d,b),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,b,_,d)),Object.is(a.item,b)||this._addIdentityChange(a,b)):(a=this._mismatch(a,b,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new mu(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new em),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new em),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class mu{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ma{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class em{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new Ma,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tm(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class zI{constructor(){}supports(o){return o instanceof Map||$I(o)}create(){return new Tn}}class Tn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||$I(o)))throw new ke(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new Q_(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Q_{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hh(){return new gu([new HI])}let gu=(()=>{class i{static#e=this.\u0275prov=vn({token:i,providedIn:"root",factory:hh});constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||hh()),deps:[[i,new Ec,new Ms]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new ke(901,!1)}}return i})();function GI(){return new WI([new zI])}let WI=(()=>{class i{static#e=this.\u0275prov=vn({token:i,providedIn:"root",factory:GI});constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||GI()),deps:[[i,new Ec,new Ms]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new ke(901,!1)}}return i})(),gD=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=wR}return i})();function wR(i){return function nm(i,o,a){if(Ki(i)&&!a){const l=oi(i.index,o);return new ah(l,l)}return 47&i.type?new ah(o[_n],o):null}(an(),ie(),16==(16&i))}let Pa=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=AR;static#t=this.__NG_ENV_ID__=a=>a}return i})();class TR extends Pa{constructor(o){super(),this._lView=o}onDestroy(o){return Ff(this._lView,o),()=>function gd(i,o){if(null===i[Yi])return;const a=i[Yi].indexOf(o);-1!==a&&i[Yi].splice(a,1)}(this._lView,o)}}function AR(){return new TR(ie())}const KI=new Set;function Wc(i){KI.has(i)||(KI.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}function bD(...i){}class nr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new or(!1),this.onMicrotaskEmpty=new or(!1),this.onStable=new or(!1),this.onError=new or(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function RR(){const i="function"==typeof $e.requestAnimationFrame;let o=$e[i?"requestAnimationFrame":"setTimeout"],a=$e[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function QI(i){const o=()=>{!function X_(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call($e,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,J_(i),i.isCheckStableRunning=!0,_u(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),J_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,_,b)=>{if(function Kn(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(b))return a.invokeTask(d,f,_,b);try{return fh(i),a.invokeTask(d,f,_,b)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),ph(i)}},onInvoke:(a,l,d,f,_,b,E)=>{try{return fh(i),a.invoke(d,f,_,b,E)}finally{i.shouldCoalesceRunChangeDetection&&o(),ph(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,J_(i),_u(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nr.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(nr.isInAngularZone())throw new ke(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,Z_,bD,bD);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Z_={};function _u(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function J_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function fh(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ph(i){i._nesting--,_u(i)}class ID{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new or,this.onMicrotaskEmpty=new or,this.onStable=new or,this.onError=new or}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}var vu=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(vu||{});const wD={destroy(){}};function ZI(i,o){!o&&function Xl(i){if(!Wg()&&!function Qe(){return Ts}())throw new ke(-203,!1)}();const a=o?.injector??Vt(is);if(!function Sa(i){return"browser"===(i??Vt(is)).get($g)}(a))return wD;Wc("NgAfterNextRender");const l=a.get(mh),d=l.handler??=new rm,f=o?.phase??vu.MixedReadWrite,_=()=>{d.unregister(E),b()},b=a.get(Pa).onDestroy(_),E=new XI(a,f,()=>{_(),i()});return d.register(E),{destroy:_}}class XI{constructor(o,a,l){this.phase=a,this.callbackFn=l,this.zone=o.get(nr),this.errorHandler=o.get(os,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(o){this.errorHandler?.handleError(o)}}}class rm{constructor(){this.executingCallbacks=!1,this.buckets={[vu.EarlyRead]:new Set,[vu.Write]:new Set,[vu.MixedReadWrite]:new Set,[vu.Read]:new Set},this.deferredCallbacks=new Set}register(o){(this.executingCallbacks?this.deferredCallbacks:this.buckets[o.phase]).add(o)}unregister(o){this.buckets[o.phase].delete(o),this.deferredCallbacks.delete(o)}execute(){this.executingCallbacks=!0;for(const o of Object.values(this.buckets))for(const a of o)a.invoke();this.executingCallbacks=!1;for(const o of this.deferredCallbacks)this.buckets[o.phase].add(o);this.deferredCallbacks.clear()}destroy(){for(const o of Object.values(this.buckets))o.clear();this.deferredCallbacks.clear()}}let mh=(()=>{class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const a=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const l of a)l();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=vn({token:i,providedIn:"root",factory:()=>new i})}return i})();function ka(i){return!!gr(i)}function am(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const b=o[_];"number"==typeof b?f=b:1==f?d=ti(d,b):2==f&&(l=ti(l,b+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}class gh extends zc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Rt(o);return new bu(a,this.ngModule)}}function e0(i){const o=[];for(const a in i){if(!i.hasOwnProperty(a))continue;const l=i[a];void 0!==l&&o.push({propName:Array.isArray(l)?l[0]:l,templateName:a})}return o}class t0{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=Md(l);const d=this.injector.get(o,Xp,l);return d!==Xp||a===Xp?d:this.parentInjector.get(o,a,l)}}class bu extends VI{get inputs(){const o=this.componentDef,a=o.inputTransforms,l=e0(o.inputs);if(null!==a)for(const d of l)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return l}get outputs(){return e0(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function mg(i){return i.map(Qy).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,d){let f=(d=d||this.ngModule)instanceof ji?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new t0(o,f):o,b=_.get(dh,null);if(null===b)throw new ke(407,!1);const R={rendererFactory:b,sanitizer:_.get(pD,null),inlineEffectRunner:null,afterRenderEventManager:_.get(mh,null),changeDetectionScheduler:_.get(Qp,null)},O=b.createRenderer(null,this.componentDef),V=this.componentDef.selectors[0][0]||"div",W=l?function sI(i,o,a,l){const f=l.get(Wd,!1)||a===Jt.ShadowDom,_=i.selectRootElement(o,f);return function UC(i){aI(i)}(_),_}(O,l,this.componentDef.encapsulation,_):T_(O,V,function AD(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(V));let fe=512;this.componentDef.signals?fe|=4096:this.componentDef.onPush||(fe|=16);let Ie=null;null!==W&&(Ie=Gn(W,_,!0));const Ne=P_(0,null,null,1,0,null,null,null,null,null,null),ue=x_(null,Ne,null,fe,null,null,R,O,_,null,Ie);let dt,At;wd(ue);try{const zt=this.componentDef;let Qr,mf=null;zt.findHostDirectiveDefs?(Qr=[],mf=new Map,zt.findHostDirectiveDefs(zt,Qr,mf),Qr.push(zt)):Qr=[zt];const EP=function tv(i,o){const a=i[Ee],l=lt;return i[l]=o,nh(a,l,2,"#host",null)}(ue,W),HS=function xD(i,o,a,l,d,f,_){const b=d[Ee];!function RD(i,o,a,l){for(const d of i)o.mergedAttrs=Za(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(am(o,o.mergedAttrs,!0),null!==a&&NC(l,a,o))}(l,i,o,_);let E=null;null!==o&&(E=Gn(o,d[cr]));const C=f.rendererFactory.createRenderer(o,a);let S=16;a.signals?S=4096:a.onPush&&(S=64);const R=x_(d,BC(a),null,S,d[i.index],i,f,C,null,null,E);return b.firstCreatePass&&Bp(b,i,l.length-1),cs(d,R),d[i.index]=R}(EP,W,zt,Qr,ue,R,O);At=ac(Ne,lt),W&&function MD(i,o,a,l){if(l)vf(i,a,["ng-version","17.2.1"]);else{const{attrs:d,classes:f}=function Ja(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&a.push(f);else{if(!Rr(d))break;d=f}l++}return{attrs:o,classes:a}}(o.selectors[0]);d&&vf(i,a,d),f&&f.length>0&&OC(i,a,f.join(" "))}}(O,zt,W,l),void 0!==a&&function PD(i,o,a){const l=i.projection=[];for(let d=0;d<o.length;d++){const f=a[d];l.push(null!=f?Array.from(f):null)}}(At,this.ngContentSelectors,a),dt=function Iu(i,o,a,l,d,f){const _=an(),b=d[Ee],E=Mr(_,d);he(b,d,_,a,null,l);for(let S=0;S<a.length;S++)fi(Me(d,b,_.directiveStart+S,_),d);qC(b,d,_),E&&fi(E,d);const C=Me(d,b,_.directiveStart+_.componentOffset,_);if(i[hn]=d[hn]=C,null!==f)for(const S of f)S(C,o);return M_(b,_,i),C}(HS,zt,Qr,mf,ue,[kD]),_I(Ne,ue,null)}finally{Ng()}return new SD(this.componentType,dt,hc(At,ue),ue,At)}}class SD extends dD{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new ah(d,void 0,!1),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;uu(f[Ee],f,d,o,a),this.previousInputValues.set(o,a),sh(oi(this._tNode.index,f))}}get injector(){return new Wn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function kD(){const i=an();Ri(ie()[Ee],i)}let cm=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=nv}return i})();function nv(){return OD(an(),ie())}const eo=cm,n0=class extends eo{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return hc(this._hostTNode,this._hostLView)}get injector(){return new Wn(this._hostTNode,this._hostLView)}get parentInjector(){const o=p(this._hostTNode,this._hostLView);if(Pr(o)){const a=Oc(o,this._hostLView),l=Ca(o);return new Wn(a[Ee].data[l+8],a)}return new Wn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=r0(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Yn}createEmbeddedView(o,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const b=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(b,d,jc(this._hostTNode,null)),b}createComponent(o,a,l,d,f){const _=o&&!function Os(i){return"function"==typeof i}(o);let b;if(_)b=a;else{const W=a||{};b=W.index,l=W.injector,d=W.projectableNodes,f=W.environmentInjector||W.ngModuleRef}const E=_?o:new bu(Rt(o)),C=l||this.parentInjector;if(!f&&null==E.ngModule){const fe=(_?C:this.parentInjector).get(ji,null);fe&&(f=fe)}Rt(E.componentType??{});const V=E.create(C,d,null,f);return this.insertImpl(V.hostView,b,jc(this._hostTNode,null)),V}insert(o,a){return this.insertImpl(o,a,!0)}insertImpl(o,a,l){const d=o._lView;if(function Pl(i){return _r(i[Dn])}(d)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const E=d[Dn],C=new n0(E,E[ar],E[Dn]);C.detach(C.indexOf(o))}}const f=this._adjustIndex(a),_=this._lContainer;return rh(_,d,f,l),o.attachToViewContainerRef(),Lw(Yc(_),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=r0(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Op(this._lContainer,a);l&&(Ds(Yc(this._lContainer),a),au(l[Ee],l))}detach(o){const a=this._adjustIndex(o,-1),l=Op(this._lContainer,a);return l&&null!=Ds(Yc(this._lContainer),a)?new ah(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function r0(i){return i[8]}function Yc(i){return i[8]||(i[8]=[])}function OD(i,o){let a;const l=o[i.index];return _r(l)?a=l:(a=jp(l,o,null,i),o[i.index]=a,cs(o,a)),rv(a,o,i,l),new n0(a,i,o)}let rv=function iv(i,o,a,l){if(i[mo])return;let d;d=8&a.type?Zt(l):function ls(i,o){const a=i[it],l=a.createComment(""),d=Mr(o,i);return cu(a,tI(a,d),l,function mk(i,o){return i.nextSibling(o)}(a,d),!1),l}(o,a),i[mo]=d},nn=()=>!1;class Kc{constructor(o){this.queryList=o,this.matches=null}clone(){return new Kc(this.queryList)}setDirty(){this.queryList.setDirty()}}class lm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new lm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}finishViewCreation(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==jD(o,a).matches&&this.queries[a].setDirty()}}class s0{constructor(o,a,l=null){this.flags=a,this.read=l,this.predicate="string"==typeof o?function MR(i){return i.split(",").map(o=>o.trim())}(o):o}}class us{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new us(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Gi{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Gi(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,Gr(a,f)),this.matchTNodeWithReadOption(o,a,Ce(a,o,f,!1,!1))}else l===zp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ce(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===zo||d===cm||d===zp&&4&a.type)this.addMatch(a.index,-2);else{const f=Ce(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Gr(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function sv(i,o,a,l){return-1===a?function ov(i,o){return 11&i.type?hc(i,o):4&i.type?Gp(i,o):null}(o,i):-2===a?function um(i,o,a){return a===zo?hc(o,i):a===zp?Gp(o,i):a===cm?OD(o,i):void 0}(i,o,l):Me(i,i[Ee],a,o)}function dm(i,o,a,l){const d=o[wi].queries[l];if(null===d.matches){const f=i.data,_=a.matches,b=[];for(let E=0;null!==_&&E<_.length;E+=2){const C=_[E];b.push(C<0?null:sv(o,f[C],_[E+1],a.metadata.read))}d.matches=b}return d.matches}function av(i,o,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=dm(i,o,d,a);for(let b=0;b<f.length;b+=2){const E=f[b];if(E>0)l.push(_[b/2]);else{const C=f[b+1],S=o[-E];for(let R=Yn;R<S.length;R++){const O=S[R];O[tc]===O[Dn]&&av(O[Ee],O,C,l)}if(null!==S[ic]){const R=S[ic];for(let O=0;O<R.length;O++){const V=R[O];av(V[Ee],V,C,l)}}}}}return l}function LD(i,o,a){const l=new Qf(4==(4&a));return function $C(i,o,a,l){const d=O_(o);d.push(a),i.firstCreatePass&&mI(i).push(l,d.length-1)}(i,o,l,l.destroy),(o[wi]??=new lm).queries.push(new Kc(l))-1}function BD(i,o,a){null===i.queries&&(i.queries=new us),i.queries.track(new Gi(o,a))}function jD(i,o){return i.queries.getByIndex(o)}function hm(i,o){const a=i[Ee],l=jD(a,o);return l.crossesNgTemplate?av(a,i,o,[]):dm(a,i,l,o)}function Na(i){let o=function qD(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(ii(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ke(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=gm(i.inputs),_.inputTransforms=gm(i.inputTransforms),_.declaredInputs=gm(i.declaredInputs),_.outputs=gm(i.outputs);const b=d.hostBindings;b&&u0(i,b);const E=d.viewQuery,C=d.contentQueries;if(E&&YD(i,E),C&&no(i,C),NR(i,d),K(i.outputs,d.outputs),ii(d)&&d.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const b=f[_];b&&b.ngInherit&&b(i),b===Na&&(a=!1)}}o=Object.getPrototypeOf(o)}!function vh(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Za(d.hostAttrs,a=Za(a,d.hostAttrs))}}(l)}function NR(i,o){for(const a in o.inputs){if(!o.inputs.hasOwnProperty(a)||i.inputs.hasOwnProperty(a))continue;const l=o.inputs[a];if(void 0!==l&&(i.inputs[a]=l,i.declaredInputs[a]=o.declaredInputs[a],null!==o.inputTransforms)){const d=Array.isArray(l)?l[0]:l;if(!o.inputTransforms.hasOwnProperty(d))continue;i.inputTransforms??={},i.inputTransforms[d]=o.inputTransforms[d]}}}function gm(i){return i===Jn?{}:i===Ft?[]:i}function YD(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function no(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function u0(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}function Fa(i){const o=i.inputConfig,a={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[3]&&(a[l]=d[3])}i.inputTransforms=a}class Au{}class ZD{}function ro(i,o){return new Su(i,o??null,[])}class Su extends Au{constructor(o,a,l){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gh(this);const d=gr(o);this._bootstrapComponents=Ro(d.bootstrap),this._r3Injector=Gd(o,a,[{provide:Au,useValue:this},{provide:zc,useValue:this.componentFactoryResolver},...l],mt(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class dv extends ZD{constructor(o){super(),this.moduleType=o}create(o){return new Su(this.moduleType,o,[])}}class XD extends Au{constructor(o){super(),this.componentFactoryResolver=new gh(this),this.instance=null;const a=new ts([...o.providers,{provide:Au,useValue:this},{provide:zc,useValue:this.componentFactoryResolver}],o.parent||Ac(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function f0(i,o,a=null){return new XD({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let Ih=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pr.g(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function io(i,o,a){return i[o]=a}function rr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function xu(i,o,a,l){const d=rr(i,o,a);return rr(i,o+1,l)||d}function hv(i,o,a,l,d){const f=xu(i,o,a,l);return rr(i,o+2,d)||f}function wh(i,o,a,l,d,f,_,b){const E=ie(),C=Mt(),S=i+lt,R=C.firstCreatePass?function LR(i,o,a,l,d,f,_,b,E){const C=o.consts,S=nh(o,i,4,_||null,si(C,b));dI(o,a,S,si(C,E)),Ri(o,S);const R=S.tView=P_(2,S,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,C,null);return null!==o.queries&&(o.queries.template(o,S),R.queries=o.queries.embeddedTView(S)),S}(S,C,E,o,a,l,d,f,_):C.data[S];Qi(R,!1);const O=JD(C,E,R,i);Td()&&A_(C,E,O,R),fi(O,E);const V=jp(O,E,O,R);return E[S]=V,cs(E,V),function ND(i,o,a){return nn(i,o,a)}(V,R,E),pa(R)&&VC(C,E,R),null!=_&&Vp(E,R,b),wh}let JD=function eT(i,o,a,l){return Ui(!0),o[it].createComment("")};function D0(i,o,a,l){const d=ie();return rr(d,vo(),o)&&(Mt(),Hs(qt(),d,i,o,a,l)),D0}function Vu(i,o){return i<<17|o<<2}function Fo(i){return i>>17&32767}function Bu(i){return 2|i}function rl(i){return(131068&i)>>2}function Iv(i,o){return-131069&i|o<<2}function ps(i){return 1|i}function x0(i,o,a,l){const d=i[a+1],f=null===o;let _=l?Fo(d):rl(d),b=!1;for(;0!==_&&(!1===b||f);){const C=i[_+1];ea(i[_],o)&&(b=!0,i[_+1]=l?ps(C):Bu(C)),_=l?Fo(C):rl(C)}b&&(i[a+1]=l?Bu(d):ps(d))}function ea(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&ma(i,o)>=0}const hr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Nh(i){return i.substring(hr.key,hr.keyEnd)}function Tt(i,o){const a=hr.textEnd;return a===o?-1:(o=hr.keyEnd=function yT(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,hr.key=o,a),Uu(i,o,a))}function Uu(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function $a(i,o,a){const l=ie();return rr(l,vo(),o)&&Pi(Mt(),qt(),l,i,o,l[it],a,!1),$a}function Cv(i,o,a,l,d){const _=d?"class":"style";uu(i,a,o.inputs[_],_,l)}function Ha(i,o,a){return ms(i,o,a,!1),Ha}function Dv(i,o){return ms(i,o,null,!0),Dv}function P0(i){!function gs(i,o,a,l){const d=Mt(),f=ci(2);d.firstUpdatePass&&Tm(d,null,f,l);const _=ie();if(a!==Et&&rr(_,f,a)){const b=d.data[Br()];if(Av(b,l)&&!xn(d,f)){let E=l?b.classesWithoutHost:b.stylesWithoutHost;null!==E&&(a=ti(E,a||"")),Cv(d,b,_,a,l)}else!function CT(i,o,a,l,d,f,_,b){d===Et&&(d=Ft);let E=0,C=0,S=0<d.length?d[0]:null,R=0<f.length?f[0]:null;for(;null!==S||null!==R;){const O=E<d.length?d[E+1]:void 0,V=C<f.length?f[C+1]:void 0;let fe,W=null;S===R?(E+=2,C+=2,O!==V&&(W=R,fe=V)):null===R||null!==S&&S<R?(E+=2,W=S):(C+=2,W=R,fe=V),null!==W&&O0(i,o,a,l,W,fe,_,b),S=E<d.length?d[E]:null,R=C<f.length?f[C]:null}}(d,b,_,_[it],_[f+1],_[f+1]=function Lh(i,o,a){if(null==a||""===a)return Ft;const l=[],d=Ta(a);if(Array.isArray(d))for(let f=0;f<d.length;f++)i(l,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&i(l,f,d[f]);else"string"==typeof d&&o(l,d);return l}(i,o,a),l,f)}}(wT,Wi,i,!0)}function Wi(i,o){for(let a=function GR(i){return function R0(i){hr.key=0,hr.keyEnd=0,hr.value=0,hr.valueEnd=0,hr.textEnd=i.length}(i),Tt(i,Uu(i,0,hr.textEnd))}(o);a>=0;a=Tt(o,a))Ti(i,Nh(o),!0)}function ms(i,o,a,l){const d=ie(),f=Mt(),_=ci(2);f.firstUpdatePass&&Tm(f,i,_,l),o!==Et&&rr(d,_,o)&&O0(f,f.data[Br()],d,d[it],i,d[_+1]=function N0(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=mt(Ta(i)))),i}(o,a),l,_)}function xn(i,o){return o>=i.expandoStartIndex}function Tm(i,o,a,l){const d=i.data;if(null===d[a+1]){const f=d[Br()],_=xn(i,a);Av(f,l)&&null===o&&!_&&(o=!1),o=function Tv(i,o,a,l){const d=function Hf(i){const o=nt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Fh(a=k0(null,i,o,a,l),o.attrs,l),f=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=k0(d,i,o,a,l),null===f){let E=function ET(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==rl(l))return i[Fo(l)]}(i,o,l);void 0!==E&&Array.isArray(E)&&(E=k0(null,i,o,E[1],l),E=Fh(E,o.attrs,l),function YR(i,o,a,l){i[Fo(a?o.classBindings:o.styleBindings)]=l}(i,o,l,E))}else f=function Am(i,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=Fh(l,i[f].hostAttrs,a);return Fh(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function vT(i,o,a,l,d,f){let _=f?o.classBindings:o.styleBindings,b=Fo(_),E=rl(_);i[l]=a;let S,C=!1;if(Array.isArray(a)?(S=a[1],(null===S||ma(a,S)>0)&&(C=!0)):S=a,d)if(0!==E){const O=Fo(i[b+1]);i[l+1]=Vu(O,b),0!==O&&(i[O+1]=Iv(i[O+1],l)),i[b+1]=function Oh(i,o){return 131071&i|o<<17}(i[b+1],l)}else i[l+1]=Vu(b,0),0!==b&&(i[b+1]=Iv(i[b+1],l)),b=l;else i[l+1]=Vu(E,0),0===b?b=l:i[E+1]=Iv(i[E+1],l),E=l;C&&(i[l+1]=Bu(i[l+1])),x0(i,S,l,!0),x0(i,S,l,!1),function Cm(i,o,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&ma(f,o)>=0&&(a[l+1]=ps(a[l+1]))}(o,S,i,l,f),_=Vu(b,E),f?o.classBindings=_:o.styleBindings=_}(d,f,o,a,_,l)}}function k0(i,o,a,l,d){let f=null;const _=a.directiveEnd;let b=a.directiveStylingLast;for(-1===b?b=a.directiveStart:b++;b<_&&(f=o[b],l=Fh(l,f.hostAttrs,d),f!==i);)b++;return null!==i&&(a.directiveStylingLast=b),l}function Fh(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const _=o[f];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Ti(i,_,!!a||o[++f]))}return void 0===i?null:i}function wT(i,o,a){const l=String(o);""!==l&&!l.includes(" ")&&Ti(i,l,a)}function O0(i,o,a,l,d,f,_,b){if(!(3&o.type))return;const E=i.data,C=E[b+1],S=function HR(i){return 1==(1&i)}(C)?ju(E,o,a,d,rl(C),_):void 0;Vh(S)||(Vh(f)||function _T(i){return 2==(2&i)}(C)&&(f=ju(E,null,a,d,b,_)),function Uc(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:D_.DashCase;null==d?i.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=D_.Important),i.setStyle(a,l,d,f))}}(l,_,xl(Br(),a),d,f))}function ju(i,o,a,l,d,f){const _=null===o;let b;for(;d>0;){const E=i[d],C=Array.isArray(E),S=C?E[1]:E,R=null===S;let O=a[d+1];O===Et&&(O=R?Ft:void 0);let V=R?Mn(O,l):S===l?O:void 0;if(C&&!Vh(V)&&(V=Mn(E,l)),Vh(V)&&(b=V,_))return b;const W=i[d+1];d=_?Fo(W):rl(W)}if(null!==o){let E=f?o.residualClasses:o.residualStyles;null!=E&&(b=Mn(E,l))}return b}function Vh(i){return void 0!==i}function Av(i,o){return 0!=(i.flags&(o?8:16))}function Rv(i,o,a,l){const d=ie(),f=Mt(),_=lt+i,b=d[it],E=f.firstCreatePass?function OT(i,o,a,l,d,f){const _=o.consts,E=nh(o,i,2,l,si(_,d));return dI(o,a,E,si(_,f)),null!==E.attrs&&am(E,E.attrs,!1),null!==E.mergedAttrs&&am(E,E.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,E),E}(_,f,d,o,a,l):f.data[_],C=Mv(f,d,E,b,o,i);d[_]=C;const S=pa(E);return Qi(E,!0),NC(b,C,E),32!=(32&E.flags)&&Td()&&A_(f,d,C,E),0===function Mw(){return nt.lFrame.elementDepthCount}()&&fi(C,d),function Rg(){nt.lFrame.elementDepthCount++}(),S&&(VC(f,d,E),M_(f,E,d)),null!==l&&Vp(d,E),Rv}function Nn(){let i=an();kg()?yd():(i=i.parent,Qi(i,!1));const o=i;(function kw(i){return nt.skipHydrationRootTNode===i})(o)&&function Mg(){nt.skipHydrationRootTNode=null}(),function Pw(){nt.lFrame.elementDepthCount--}();const a=Mt();return a.firstCreatePass&&(Ri(a,i),xf(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function kb(i){return 0!=(8&i.flags)}(o)&&Cv(a,o,ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ob(i){return 0!=(16&i.flags)}(o)&&Cv(a,o,ie(),o.stylesWithoutHost,!1),Nn}function xm(i,o,a,l){return Rv(i,o,a,l),Nn(),xm}let Mv=(i,o,a,l,d,f)=>(Ui(!0),T_(l,d,function Fw(){return nt.lFrame.currentNamespace}()));function Mm(i,o,a){const l=ie(),d=Mt(),f=i+lt,_=d.firstCreatePass?function na(i,o,a,l,d){const f=o.consts,_=si(f,l),b=nh(o,i,8,"ng-container",_);return null!==_&&am(b,_,!0),dI(o,a,b,si(f,d)),null!==o.queries&&o.queries.elementStart(o,b),b}(f,d,l,o,a):d.data[f];Qi(_,!0);const b=U0(d,l,_,i);return l[f]=b,Td()&&A_(d,l,b,_),fi(b,l),pa(_)&&(VC(d,l,_),M_(d,_,l)),null!=a&&Vp(l,_),Mm}function Pm(){let i=an();const o=Mt();return kg()?yd():(i=i.parent,Qi(i,!1)),o.firstCreatePass&&(Ri(o,i),xf(i)&&o.queries.elementEnd(i)),Pm}let U0=(i,o,a,l)=>(Ui(!0),Xb(o[it],""));function VT(){return ie()}function j0(i,o,a){const l=ie();return rr(l,vo(),o)&&Pi(Mt(),qt(),l,i,o,l[it],a,!0),j0}const za=void 0;var BT=["en",[["a","p"],["AM","PM"],za],[["AM","PM"],za,za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",za,"{1} 'at' {0}",za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function nM(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let ol={};function $0(i){const o=function $h(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=jT(o);if(a)return a;const l=o.split("-")[0];if(a=jT(l),a)return a;if("en"===l)return BT;throw new ke(701,!1)}function UT(i){return $0(i)[ao.PluralCase]}function jT(i){return i in ol||(ol[i]=$e.ng&&$e.ng.common&&$e.ng.common.locales&&$e.ng.common.locales[i]),ol[i]}var ao=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(ao||{});const Hu="en-US";let Om=Hu;function rE(i,o,a,l){const d=ie(),f=Mt(),_=an();return function Yh(i,o,a,l,d,f,_){const b=pa(l),C=i.firstCreatePass&&mI(i),S=o[hn],R=O_(o);let O=!0;if(3&l.type||_){const fe=Mr(l,o),Ie=_?_(fe):fe,Ne=R.length,ue=_?At=>_(Zt(At[l.index])):l.index;let dt=null;if(!_&&b&&(dt=function _M(i,o,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===l){const b=o[jo],E=d[f+2];return b.length>E?b[E]:null}"string"==typeof _&&(f+=2)}return null}(i,o,d,l.index)),null!==dt)(dt.__ngLastListenerFn__||dt).__ngNextListenerFn__=f,dt.__ngLastListenerFn__=f,O=!1;else{f=hA(l,o,S,f,!1);const At=a.listen(Ie,d,f);R.push(f,At),C&&C.push(d,ue,Ne,Ne+1)}}else f=hA(l,o,S,f,!1);const V=l.outputs;let W;if(O&&null!==V&&(W=V[d])){const fe=W.length;if(fe)for(let Ie=0;Ie<fe;Ie+=2){const zt=o[W[Ie]][W[Ie+1]].subscribe(f),Qr=R.length;R.push(f,zt),C&&C.push(d,l.index,Qr,"function"==typeof zt?Qr+1:-(Qr+1))}}}(f,d,d[it],_,i,o,l),rE}function $m(i,o,a,l){try{return di(6,o,a),!1!==a(l)}catch(d){return N_(i,d),!1}finally{di(7,o,a)}}function hA(i,o,a,l,d){return function f(_){if(_===Function)return l;sh(i.componentOffset>-1?oi(i.index,o):o);let E=$m(o,a,l,_),C=f.__ngNextListenerFn__;for(;C;)E=$m(o,a,C,_)&&E,C=C.__ngNextListenerFn__;return d&&!1===E&&_.preventDefault(),E}}function Hv(i=1){return function Nw(i){return(nt.lFrame.contextLView=function Nf(i,o){for(;i>0;)o=o[Tl],i--;return o}(i,nt.lFrame.contextLView))[hn]}(i)}function iE(i,o){let a=null;const l=function Yy(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(!(1&a))return o[a+1]}return null}(i);for(let d=0;d<o.length;d++){const f=o[d];if("*"!==f){if(null===l?bf(i,f,!0):Ky(l,f))return d}else a=d}return a}function Kh(i){const o=ie()[_n][ar];if(!o.projection){const l=o.projection=function Fg(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(i?i.length:1,null),d=l.slice();let f=o.child;for(;null!==f;){const _=i?iE(f,i):0;null!==_&&(d[_]?d[_].projectionNext=f:l[_]=f,d[_]=f),f=f.next}}}function Hm(i,o=0,a){const l=ie(),d=Mt(),f=nh(d,lt+i,16,null,a||null);null===f.projection&&(f.projection=o),yd(),(!l[qi]||kl())&&32!=(32&f.flags)&&function tR(i,o,a){kC(o[it],0,o,a,Jd(i,a,o),RC(a.parent||o[ar],a,o))}(d,l,f)}function gA(i,o,a,l){!function cv(i,o,a,l){const d=Mt();if(d.firstCreatePass){const f=an();BD(d,new s0(o,a,l),f.index),function UD(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}return LD(d,ie(),a)}(i,o,a,l)}function lE(i,o,a){!function VD(i,o,a){const l=Mt();return l.firstCreatePass&&(BD(l,new s0(i,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),LD(l,ie(),o)}(i,o,a)}function _A(i){const o=ie(),a=Mt(),l=Id();Ed(l+1);const d=jD(a,l);if(i.dirty&&function xg(i){return 4==(4&i[Xe])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=hm(o,l);i.reset(f,Yf),i.notifyOnChanges()}return!0}return!1}function Yu(){return function Qc(i,o){return i[wi].queries[o].queryList}(ie(),Id())}function Zv(i,o=""){const a=ie(),l=Mt(),d=i+lt,f=l.firstCreatePass?nh(l,d,1,o,null):l.data[d],_=CA(l,a,f,o,i);a[d]=_,Td()&&A_(l,a,_,f),Qi(f,!1)}let CA=(i,o,a,l,d)=>(Ui(!0),function Zb(i,o){return i.createText(o)}(o[it],l));function gE(i){return qm("",i,""),gE}function qm(i,o,a){const l=ie(),d=function kh(i,o,a,l){return rr(i,vo(),a)?o+at(a)+l:Et}(l,i,o,a);return d!==Et&&Mo(l,Br(),d),qm}function Xh(i,o,a,l,d){const f=ie(),_=function nl(i,o,a,l,d,f){const b=xu(i,Di(),a,d);return ci(2),b?o+at(a)+l+at(d)+f:Et}(f,i,o,a,l,d);return _!==Et&&Mo(f,Br(),_),Xh}function Ku(i,o,a,l,d,f,_){const b=ie(),E=function No(i,o,a,l,d,f,_,b){const C=hv(i,Di(),a,d,_);return ci(3),C?o+at(a)+l+at(d)+f+at(_)+b:Et}(b,i,o,a,l,d,f,_);return E!==Et&&Mo(b,Br(),E),Ku}let fl=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const l=Od(0,a.type),d=l.length>0?f0([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=vn({token:i,providedIn:"environment",factory:()=>new i(lr(ji))})}return i})();function IE(i){Wc("NgStandalone"),i.getStandaloneInjector=o=>o.get(fl).getOrCreateStandaloneInjector(i)}function ay(i,o,a,l,d,f){return function kA(i,o,a,l,d,f,_,b){const E=o+a;return hv(i,E,d,f,_)?io(i,E+3,b?l.call(b,d,f,_):l(d,f,_)):ia(i,E+3)}(ie(),ai(),i,o,a,l,d,f)}function cy(i,o,a,l,d,f,_){return function OA(i,o,a,l,d,f,_,b,E){const C=o+a;return function Oo(i,o,a,l,d,f){const _=xu(i,o,a,l);return xu(i,o+2,d,f)||_}(i,C,d,f,_,b)?io(i,C+4,E?l.call(E,d,f,_,b):l(d,f,_,b)):ia(i,C+4)}(ie(),ai(),i,o,a,l,d,f,_)}function ia(i,o){const a=i[o];return a===Et?void 0:a}class yy{constructor(o){this.full=o;const a=o.split(".");this.major=a[0],this.minor=a[1],this.patch=a.slice(2).join(".")}}const tS=new yy("17.2.1");let Ju=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const uS=new $t(""),rw=new $t("");let Dy,dS=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Dy||(function hS(i){Dy=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb()}});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a()},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}static#e=this.\u0275fac=function(l){return new(l||i)(lr(nr),lr(Cy),lr(rw))};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac})}return i})(),Cy=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Dy?.findTestabilityInTree(this,a,l)??null}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function Ty(i){return!!i&&"function"==typeof i.then}function tg(i){return!!i&&"function"==typeof i.subscribe}const Bt=new $t("");let Ay=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l}),this.appInits=Vt(Bt,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(Ty(f))a.push(f);else if(tg(f)){const _=new Promise((b,E)=>{f.subscribe({complete:b,error:E})});a.push(_)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Sy=new $t("");function ow(i,o){return Array.isArray(o)?o.reduce(ow,i):{...i,...o}}let ed=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Vt(Qw),this.afterRenderEffectManager=Vt(mh),this.componentTypes=[],this.components=[],this.isStable=Vt(Ih).hasPendingTasks.pipe((0,Zr.k)(a=>!a)),this._injector=Vt(ji)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof VI;if(!this._injector.get(Ay).done)throw!d&&Ei(a),new ke(405,!1);let _;_=d?a:this._injector.get(zc).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const b=function Yr(i){return i.isBoundToModule}(_)?void 0:this._injector.get(Au),C=_.create(is.NULL,[],l||_.selector,b),S=C.location.nativeElement,R=C.injector.get(uS,null);return R?.registerApplication(S),C.onDestroy(()=>{this.detachView(C.hostView),td(this.components,C),R?.unregisterApplication(S)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let a=0;do{if(100===a)throw new ke(103,!1);const l=0===a;for(let{_lView:d,notifyErrorHandler:f}of this._views)!l&&!fS(d)||this.detectChangesInView(d,f,l);this.afterRenderEffectManager.execute(),a++}while(this._views.some(({_lView:l})=>fS(l)))}detectChangesInView(a,l,d){let f;d?(f=0,a[Xe]|=1024):f=64&a[Xe]?0:1,du(a,l,f)}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;td(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(Sy,[]);[...this._bootstrapListeners,...l].forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>td(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ke(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function td(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function fS(i){return cc(i)}class aw{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let WM=(()=>{class i{compileModuleSync(a){return new dv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Ro(gr(a).declarations).reduce((_,b)=>{const E=Rt(b);return E&&_.push(new bu(E)),_},[]);return new aw(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Qn=(()=>{class i{constructor(){this.zone=Vt(nr),this.applicationRef=Vt(ed)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function QM(){const i=Vt(nr),o=Vt(os);return a=>i.runOutsideAngular(()=>o.handleError(a))}let ZM=(()=>{class i{constructor(){this.subscription=new Tr.wH,this.initialized=!1,this.zone=Vt(nr),this.pendingTasks=Vt(Ih)}initialize(){if(this.initialized)return;this.initialized=!0;let a=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(a=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nr.assertNotInAngularZone(),queueMicrotask(()=>{null!==a&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(a),a=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{nr.assertInAngularZone(),a??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Ry=new $t("",{providedIn:"root",factory:()=>Vt(Ry,pt.Optional|pt.SkipSelf)||function XM(){return typeof $localize<"u"&&$localize.locale||Hu}()}),zk=new $t("",{providedIn:"root",factory:()=>"USD"}),nd=new $t("");let vS=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function ED(i="zone.js",o){return"noop"===i?new ID:"zone.js"===i?new nr(o):i}(l?.ngZone,function gS(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const f=function gi(i,o,a){return new Su(i,o,a)}(a.moduleType,this.injector,function pS(i){return[{provide:nr,useFactory:i},{provide:Ps,multi:!0,useFactory:()=>{const o=Vt(Qn,{optional:!0});return()=>o.initialize()}},{provide:Ps,multi:!0,useFactory:()=>{const o=Vt(ZM);return()=>{o.initialize()}}},{provide:Qw,useFactory:QM}]}(()=>d)),_=f.injector.get(os,null);return d.runOutsideAngular(()=>{const b=d.onError.subscribe({next:E=>{_.handleError(E)}});f.onDestroy(()=>{td(this._modules,f),b.unsubscribe()})}),function _s(i,o,a){try{const l=a();return Ty(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(_,d,()=>{const b=f.injector.get(Ay);return b.runInitializers(),b.donePromise.then(()=>(function sl(i){"string"==typeof i&&(Om=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Ry,Hu)||Hu),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,l=[]){const d=ow({},l);return function Hk(i,o,a){const l=new dv(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(ed);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ke(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(nd,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||i)(lr(is))};static#t=this.\u0275prov=vn({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Kr=null;const oa=new $t("");function _l(i,o,a=[]){const l=`Platform: ${o}`,d=new $t(l);return(f=[])=>{let _=cw();if(!_||_.injector.get(oa,!1)){const b=[...a,...f,{provide:d,useValue:!0}];i?i(b):function qk(i){if(Kr&&!Kr.get(oa,!1))throw new ke(400,!1);(function iw(){!function lo(i){Zn=i}(()=>{throw new ke(600,!1)})})(),Kr=i;const o=i.get(vS);(function ig(i){i.get(yb,null)?.forEach(a=>a())})(i)}(function rg(i=[],o){return is.create({name:o,providers:[{provide:Dc,useValue:"platform"},{provide:nd,useValue:new Set([()=>Kr=null])},...i]})}(b,l))}return function JM(i){const o=cw();if(!o)throw new ke(401,!1);return o}()}}function cw(){return Kr?.get(vS)??null}function tP(){return!1}const sg=_l(null,"core",[]);let vl=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(l){return new(l||i)(lr(ed))};static#t=this.\u0275mod=_g({type:i});static#n=this.\u0275inj=Xf({})}return i})();function mO(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function gO(i,o=NaN){return isNaN(parseFloat(i))||isNaN(Number(i))?o:Number(i)}function lg(i){const o=Rt(i);if(!o)return null;const a=new bu(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},368:(rn,Ke,ee)=>{ee.d(Ke,{c:()=>ft});var h=ee(144),be=ee(920),U=ee(360),_e=ee(976);class xe{constructor(ze,Ye){this._delegate=ze,this.firebase=Ye,(0,U._addComponent)(ze,new be.Yl("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(ze,Ye=U._DEFAULT_ENTRY_NAME){var on;this._delegate.checkDestroyed();const wn=this._delegate.container.getProvider(ze);return!wn.isInitialized()&&"EXPLICIT"===(null===(on=wn.getComponent())||void 0===on?void 0:on.instantiationMode)&&wn.initialize(),wn.getImmediate({identifier:Ye})}_removeServiceInstance(ze,Ye=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Ye)}_addComponent(ze){(0,U._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,U._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new h.UR("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function Ue(){const wt=function St(wt){const ze={},Ye={__esModule:!0,initializeApp:function ct(et,Ct={}){const L=U.initializeApp(et,Ct);if((0,h.Y7)(ze,L.name))return ze[L.name];const te=new wt(L,Ye);return ze[L.name]=te,te},app:wn,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function rt(et){const Ct=et.name,L=Ct.replace("-compat","");if(U._registerComponent(et)&&"PUBLIC"===et.type){const te=(Se=wn())=>{if("function"!=typeof Se[L])throw ye.create("invalid-app-argument",{appName:Ct});return Se[L]()};void 0!==et.serviceProps&&(0,h.Ww)(te,et.serviceProps),Ye[L]=te,wt.prototype[L]=function(...Se){return this._getService.bind(this,Ct).apply(this,et.multipleInstances?Se:[])}}return"PUBLIC"===et.type?Ye[L]:null},removeApp:function on(et){delete ze[et]},useAsService:function Xt(et,Ct){return"serverAuth"===Ct?null:Ct},modularAPIs:U}};function wn(et){if(!(0,h.Y7)(ze,et=et||U._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:et});return ze[et]}return Ye.default=Ye,Object.defineProperty(Ye,"apps",{get:function Ae(){return Object.keys(ze).map(et=>ze[et])}}),wn.App=wt,Ye}(xe);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:Ue,extendNamespace:function ze(Ye){(0,h.Ww)(wt,Ye)},createSubscribe:h.my,ErrorFactory:h.UR,deepExtend:h.Ww}),wt}(),j=new _e.YJ("@firebase/app-compat");if((0,h.uH)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ft=z;!function Te(wt){(0,U.registerVersion)("@firebase/app-compat","0.2.27",wt)}()},360:(rn,Ke,ee)=>{ee.r(Ke),ee.d(Ke,{FirebaseError:()=>_e.kx,SDK_VERSION:()=>sr,_DEFAULT_ENTRY_NAME:()=>ho,_addComponent:()=>or,_addOrOverwriteComponent:()=>fo,_apps:()=>vt,_clearComponents:()=>pt,_components:()=>Dt,_getProvider:()=>po,_registerComponent:()=>ei,_removeServiceInstance:()=>Vr,deleteApp:()=>Sr,getApp:()=>cd,getApps:()=>vs,initializeApp:()=>da,onLog:()=>ys,registerVersion:()=>Uo,setLogLevel:()=>Il});var h=ee(908),be=ee(920),U=ee(976),_e=ee(144);const xe=(Y,K)=>K.some(me=>Y instanceof me);let qe,ye;const z=new WeakMap,j=new WeakMap,se=new WeakMap,je=new WeakMap,Te=new WeakMap;let ze={get(Y,K,me){if(Y instanceof IDBTransaction){if("done"===K)return j.get(Y);if("objectStoreNames"===K)return Y.objectStoreNames||se.get(Y);if("store"===K)return me.objectStoreNames[1]?void 0:me.objectStore(me.objectStoreNames[0])}return ct(Y[K])},set:(Y,K,me)=>(Y[K]=me,!0),has:(Y,K)=>Y instanceof IDBTransaction&&("done"===K||"store"===K)||K in Y};function wn(Y){return"function"==typeof Y?function on(Y){return Y!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ue(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Y)?function(...K){return Y.apply(Ae(this),K),ct(z.get(this))}:function(...K){return ct(Y.apply(Ae(this),K))}:function(K,...me){const Ve=Y.call(Ae(this),K,...me);return se.set(Ve,K.sort?K.sort():[K]),ct(Ve)}}(Y):(Y instanceof IDBTransaction&&function wt(Y){if(j.has(Y))return;const K=new Promise((me,Ve)=>{const st=()=>{Y.removeEventListener("complete",Pt),Y.removeEventListener("error",It),Y.removeEventListener("abort",It)},Pt=()=>{me(),st()},It=()=>{Ve(Y.error||new DOMException("AbortError","AbortError")),st()};Y.addEventListener("complete",Pt),Y.addEventListener("error",It),Y.addEventListener("abort",It)});j.set(Y,K)}(Y),xe(Y,function St(){return qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Y,ze):Y)}function ct(Y){if(Y instanceof IDBRequest)return function ft(Y){const K=new Promise((me,Ve)=>{const st=()=>{Y.removeEventListener("success",Pt),Y.removeEventListener("error",It)},Pt=()=>{me(ct(Y.result)),st()},It=()=>{Ve(Y.error),st()};Y.addEventListener("success",Pt),Y.addEventListener("error",It)});return K.then(me=>{me instanceof IDBCursor&&z.set(me,Y)}).catch(()=>{}),Te.set(K,Y),K}(Y);if(je.has(Y))return je.get(Y);const K=wn(Y);return K!==Y&&(je.set(Y,K),Te.set(K,Y)),K}const Ae=Y=>Te.get(Y),et=["get","getKey","getAll","getAllKeys","count"],Ct=["put","add","delete","clear"],L=new Map;function te(Y,K){if(!(Y instanceof IDBDatabase)||K in Y||"string"!=typeof K)return;if(L.get(K))return L.get(K);const me=K.replace(/FromIndex$/,""),Ve=K!==me,st=Ct.includes(me);if(!(me in(Ve?IDBIndex:IDBObjectStore).prototype)||!st&&!et.includes(me))return;const Pt=function(){var It=(0,h.c)(function*(mn,...bn){const xr=this.transaction(mn,st?"readwrite":"readonly");let Qa=xr.store;return Ve&&(Qa=Qa.index(bn.shift())),(yield Promise.all([Qa[me](...bn),st&&xr.done]))[0]});return function(bn){return It.apply(this,arguments)}}();return L.set(K,Pt),Pt}!function Ye(Y){ze=Y(ze)}(Y=>({...Y,get:(K,me,Ve)=>te(K,me)||Y.get(K,me,Ve),has:(K,me)=>!!te(K,me)||Y.has(K,me)}));class Se{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(me=>{if(function Gt(Y){const K=Y.getComponent();return"VERSION"===K?.type}(me)){const Ve=me.getImmediate();return`${Ve.library}/${Ve.version}`}return null}).filter(me=>me).join(" ")}}const Ln="@firebase/app",Zn=new U.YJ("@firebase/app"),ho="[DEFAULT]",Jr={[Ln]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,Dt=new Map;function or(Y,K){try{Y.container.addComponent(K)}catch(me){Zn.debug(`Component ${K.name} failed to register with FirebaseApp ${Y.name}`,me)}}function fo(Y,K){Y.container.addOrOverwriteComponent(K)}function ei(Y){const K=Y.name;if(Dt.has(K))return Zn.debug(`There were multiple attempts to register component ${K}.`),!1;Dt.set(K,Y);for(const me of vt.values())or(me,Y);return!0}function po(Y,K){const me=Y.container.getProvider("heartbeat").getImmediate({optional:!0});return me&&me.triggerHeartbeat(),Y.container.getProvider(K)}function Vr(Y,K,me=ho){po(Y,K).clearInstance(me)}function pt(){Dt.clear()}const ti=new _e.UR("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nt{constructor(K,me,Ve){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},me),this._name=me.name,this._automaticDataCollectionEnabled=me.automaticDataCollectionEnabled,this._container=Ve,this.container.addComponent(new be.Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}const sr="10.8.0";function da(Y,K={}){let me=Y;"object"!=typeof K&&(K={name:K});const Ve=Object.assign({name:ho,automaticDataCollectionEnabled:!1},K),st=Ve.name;if("string"!=typeof st||!st)throw ti.create("bad-app-name",{appName:String(st)});if(me||(me=(0,_e.Yd)()),!me)throw ti.create("no-options");const Pt=vt.get(st);if(Pt){if((0,_e.IN)(me,Pt.options)&&(0,_e.IN)(Ve,Pt.config))return Pt;throw ti.create("duplicate-app",{appName:st})}const It=new be.op(st);for(const bn of Dt.values())It.addComponent(bn);const mn=new Nt(me,Ve,It);return vt.set(st,mn),mn}function cd(Y=ho){const K=vt.get(Y);if(!K&&Y===ho&&(0,_e.Yd)())return da();if(!K)throw ti.create("no-app",{appName:Y});return K}function vs(){return Array.from(vt.values())}function Sr(Y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,h.c)(function*(Y){const K=Y.name;vt.has(K)&&(vt.delete(K),yield Promise.all(Y.container.getProviders().map(me=>me.delete())),Y.isDeleted=!0)})).apply(this,arguments)}function Uo(Y,K,me){var Ve;let st=null!==(Ve=Jr[Y])&&void 0!==Ve?Ve:Y;me&&(st+=`-${me}`);const Pt=st.match(/\s|\//),It=K.match(/\s|\//);if(Pt||It){const mn=[`Unable to register library "${st}" with version "${K}":`];return Pt&&mn.push(`library name "${st}" contains illegal characters (whitespace or "/")`),Pt&&It&&mn.push("and"),It&&mn.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void Zn.warn(mn.join(" "))}ei(new be.Yl(`${st}-version`,()=>({library:st,version:K}),"VERSION"))}function ys(Y,K){if(null!==Y&&"function"!=typeof Y)throw ti.create("invalid-log-argument");(0,U.S2)(Y,K)}function Il(Y){(0,U.QN)(Y)}const El="firebase-heartbeat-database",wl=1,F="firebase-heartbeat-store";let k=null;function B(){return k||(k=function rt(Y,K,{blocked:me,upgrade:Ve,blocking:st,terminated:Pt}={}){const It=indexedDB.open(Y,K),mn=ct(It);return Ve&&It.addEventListener("upgradeneeded",bn=>{Ve(ct(It.result),bn.oldVersion,bn.newVersion,ct(It.transaction),bn)}),me&&It.addEventListener("blocked",bn=>me(bn.oldVersion,bn.newVersion,bn)),mn.then(bn=>{Pt&&bn.addEventListener("close",()=>Pt()),st&&bn.addEventListener("versionchange",xr=>st(xr.oldVersion,xr.newVersion,xr))}).catch(()=>{}),mn}(El,wl,{upgrade:(Y,K)=>{if(0===K)try{Y.createObjectStore(F)}catch(me){console.warn(me)}}}).catch(Y=>{throw ti.create("idb-open",{originalErrorMessage:Y.message})})),k}function Q(){return(Q=(0,h.c)(function*(Y){try{const me=(yield B()).transaction(F),Ve=yield me.objectStore(F).get(xt(Y));return yield me.done,Ve}catch(K){if(K instanceof _e.kx)Zn.warn(K.message);else{const me=ti.create("idb-get",{originalErrorMessage:K?.message});Zn.warn(me.message)}}})).apply(this,arguments)}function Le(Y,K){return ht.apply(this,arguments)}function ht(){return(ht=(0,h.c)(function*(Y,K){try{const Ve=(yield B()).transaction(F,"readwrite");yield Ve.objectStore(F).put(K,xt(Y)),yield Ve.done}catch(me){if(me instanceof _e.kx)Zn.warn(me.message);else{const Ve=ti.create("idb-set",{originalErrorMessage:me?.message});Zn.warn(Ve.message)}}})).apply(this,arguments)}function xt(Y){return`${Y.name}!${Y.options.appId}`}class dn{constructor(K){this.container=K,this._heartbeatsCache=null;const me=this.container.getProvider("app").getImmediate();this._storage=new bs(me),this._heartbeatsCachePromise=this._storage.read().then(Ve=>(this._heartbeatsCache=Ve,Ve))}triggerHeartbeat(){var K=this;return(0,h.c)(function*(){var me,Ve;const Pt=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=$e();if((null!=(null===(me=K._heartbeatsCache)||void 0===me?void 0:me.heartbeats)||(K._heartbeatsCache=yield K._heartbeatsCachePromise,null!=(null===(Ve=K._heartbeatsCache)||void 0===Ve?void 0:Ve.heartbeats)))&&K._heartbeatsCache.lastSentHeartbeatDate!==It&&!K._heartbeatsCache.heartbeats.some(mn=>mn.date===It))return K._heartbeatsCache.heartbeats.push({date:It,agent:Pt}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(mn=>{const bn=new Date(mn.date).valueOf();return Date.now()-bn<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,h.c)(function*(){var me;if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null==(null===(me=K._heartbeatsCache)||void 0===me?void 0:me.heartbeats)||0===K._heartbeatsCache.heartbeats.length)return"";const Ve=$e(),{heartbeatsToSend:st,unsentEntries:Pt}=function ni(Y,K=1024){const me=[];let Ve=Y.slice();for(const st of Y){const Pt=me.find(It=>It.agent===st.agent);if(Pt){if(Pt.dates.push(st.date),Jn(me)>K){Pt.dates.pop();break}}else if(me.push({agent:st.agent,dates:[st.date]}),Jn(me)>K){me.pop();break}Ve=Ve.slice(1)}return{heartbeatsToSend:me,unsentEntries:Ve}}(K._heartbeatsCache.heartbeats),It=(0,_e.Wg)(JSON.stringify({version:2,heartbeats:st}));return K._heartbeatsCache.lastSentHeartbeatDate=Ve,Pt.length>0?(K._heartbeatsCache.heartbeats=Pt,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),It})()}}function $e(){return(new Date).toISOString().substring(0,10)}class bs{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.c)(function*(){return!!(0,_e.yy)()&&(0,_e.A3)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,h.c)(function*(){if(yield K._canUseIndexedDBPromise){const Ve=yield function G(Y){return Q.apply(this,arguments)}(K.app);return Ve?.heartbeats?Ve:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(K){var me=this;return(0,h.c)(function*(){var Ve;if(yield me._canUseIndexedDBPromise){const Pt=yield me.read();return Le(me.app,{lastSentHeartbeatDate:null!==(Ve=K.lastSentHeartbeatDate)&&void 0!==Ve?Ve:Pt.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var me=this;return(0,h.c)(function*(){var Ve;if(yield me._canUseIndexedDBPromise){const Pt=yield me.read();return Le(me.app,{lastSentHeartbeatDate:null!==(Ve=K.lastSentHeartbeatDate)&&void 0!==Ve?Ve:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...K.heartbeats]})}})()}}function Jn(Y){return(0,_e.Wg)(JSON.stringify({version:2,heartbeats:Y})).length}!function Ft(Y){ei(new be.Yl("platform-logger",K=>new Se(K),"PRIVATE")),ei(new be.Yl("heartbeat",K=>new dn(K),"PRIVATE")),Uo(Ln,"0.9.27",Y),Uo(Ln,"0.9.27","esm2017"),Uo("fire-js","")}("")},920:(rn,Ke,ee)=>{ee.d(Ke,{Yl:()=>U,op:()=>St});var h=ee(908),be=ee(144);class U{constructor(z,j,se){this.name=z,this.instanceFactory=j,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const _e="[DEFAULT]";class xe{constructor(z,j){this.name=z,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const j=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(j)){const se=new be.o9;if(this.instancesDeferred.set(j,se),this.isInitialized(j)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:j});je&&se.resolve(je)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(z){var j;const se=this.normalizeInstanceIdentifier(z?.identifier),je=null!==(j=z?.optional)&&void 0!==j&&j;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(Te){if(je)return null;throw Te}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ye(Ue){return"EAGER"===Ue.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:_e})}catch{}for(const[j,se]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:je});se.resolve(Te)}catch{}}}}clearInstance(z=_e){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,h.c)(function*(){const j=Array.from(z.instances.values());yield Promise.all([...j.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...j.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=_e){return this.instances.has(z)}getOptions(z=_e){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:j={}}=z,se=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:se,options:j});for(const[Te,ft]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(Te)&&ft.resolve(je);return je}onInit(z,j){var se;const je=this.normalizeInstanceIdentifier(j),Te=null!==(se=this.onInitCallbacks.get(je))&&void 0!==se?se:new Set;Te.add(z),this.onInitCallbacks.set(je,Te);const ft=this.instances.get(je);return ft&&z(ft,je),()=>{Te.delete(z)}}invokeOnInitCallbacks(z,j){const se=this.onInitCallbacks.get(j);if(se)for(const je of se)try{je(z,j)}catch{}}getOrInitializeService({instanceIdentifier:z,options:j={}}){let se=this.instances.get(z);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(Ue=z,Ue===_e?void 0:Ue),options:j}),this.instances.set(z,se),this.instancesOptions.set(z,j),this.invokeOnInitCallbacks(se,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,se)}catch{}var Ue;return se||null}normalizeInstanceIdentifier(z=_e){return this.component?this.component.multipleInstances?z:_e:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class St{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const j=this.getProvider(z.name);if(j.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);j.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const j=new xe(z,this);return this.providers.set(z,j),j}getProviders(){return Array.from(this.providers.values())}}},976:(rn,Ke,ee)=>{ee.d(Ke,{Ge:()=>be,QN:()=>St,S2:()=>Ue,YJ:()=>ye});const h=[];var be=function(z){return z[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",z}(be||{});const U={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},_e=be.INFO,xe={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},qe=(z,j,...se)=>{if(j<z.logLevel)return;const je=(new Date).toISOString(),Te=xe[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${je}]  ${z.name}:`,...se)};class ye{constructor(j){this.name=j,this._logLevel=_e,this._logHandler=qe,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in be))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?U[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...j),this._logHandler(this,be.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...j),this._logHandler(this,be.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,be.INFO,...j),this._logHandler(this,be.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,be.WARN,...j),this._logHandler(this,be.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...j),this._logHandler(this,be.ERROR,...j)}}function St(z){h.forEach(j=>{j.setLogLevel(z)})}function Ue(z,j){for(const se of h){let je=null;j&&j.level&&(je=U[j.level]),se.userLogHandler=null===z?null:(Te,ft,...wt)=>{const ze=wt.map(Ye=>{if(null==Ye)return null;if("string"==typeof Ye)return Ye;if("number"==typeof Ye||"boolean"==typeof Ye)return Ye.toString();if(Ye instanceof Error)return Ye.message;try{return JSON.stringify(Ye)}catch{return null}}).filter(Ye=>Ye).join(" ");ft>=(je??Te.logLevel)&&z({level:be[ft].toLowerCase(),message:ze,args:wt,type:Te.name})}}}},864:(rn,Ke,ee)=>{ee.r(Ke);var h=ee(908),be=ee(368),U=ee(144),_e=ee(360),xe=ee(976),qe=ee(316),ye=ee(920);const Ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const ft=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},wt=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new U.UR("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),on=new xe.YJ("@firebase/auth");function ct(v,...p){on.logLevel<=xe.Ge.ERROR&&on.error(`Auth (${_e.SDK_VERSION}): ${v}`,...p)}function Ae(v,...p){throw Ct(v,...p)}function rt(v,...p){return Ct(v,...p)}function Xt(v,p,m){const I=Object.assign(Object.assign({},wt()),{[p]:m});return new U.UR("auth","Firebase",I).create(p,{appName:v.name})}function et(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ae(v,"argument-error"),Xt(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ct(v,...p){if("string"!=typeof v){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return ze.create(v,...p)}function L(v,p,...m){if(!v)throw Ct(p,...m)}function te(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ct(p),new Error(p)}function Se(v,p){v||te(p)}function Gt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ln(){return"http:"===Ii()||"https:"===Ii()}function Ii(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class lo{constructor(p,m){this.shortDelay=p,this.longDelay=m,Se(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.AV)()||(0,U.AL)()}get(){return function Zn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ln()||(0,U.Cc)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Z(v,p){Se(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ne{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const le={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ae=new lo(3e4,6e4);function pe(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function oe(v,p,m,I){return tt.apply(this,arguments)}function tt(){return(tt=(0,h.c)(function*(v,p,m,I,T={}){return jt(v,T,(0,h.c)(function*(){let x={},P={};I&&("GET"===p?P=I:x={body:JSON.stringify(I)});const H=(0,U.ik)(Object.assign({key:v.config.apiKey},P)).slice(1),ce=yield v._getAdditionalHeaders();return ce["Content-Type"]="application/json",v.languageCode&&(ce["X-Firebase-Locale"]=v.languageCode),ne.fetch()(Vn(v,v.config.apiHost,m,H),Object.assign({method:p,headers:ce,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function jt(v,p,m){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,h.c)(function*(v,p,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},le),p);try{const T=new Tr(v),x=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const P=yield x.json();if("needConfirmation"in P)throw pr(v,"account-exists-with-different-credential",P);if(x.ok&&!("errorMessage"in P))return P;{const H=x.ok?P.errorMessage:P.error.message,[ce,Ce]=H.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ce)throw pr(v,"credential-already-in-use",P);if("EMAIL_EXISTS"===ce)throw pr(v,"email-already-in-use",P);if("USER_DISABLED"===ce)throw pr(v,"user-disabled",P);const Me=I[ce]||ce.toLowerCase().replace(/[_\s]+/g,"-");if(Ce)throw Xt(v,Me,Ce);Ae(v,Me)}}catch(T){if(T instanceof U.kx)throw T;Ae(v,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function Je(v,p,m,I){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,h.c)(function*(v,p,m,I,T={}){const x=yield oe(v,p,m,I,T);return"mfaPendingCredential"in x&&Ae(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Vn(v,p,m,I){const T=`${p}${m}?${I}`;return v.config.emulator?Z(v.config,T):`${v.config.apiScheme}://${T}`}function pn(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Tr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(rt(this.auth,"network-request-failed")),ae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pr(v,p,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const T=rt(v,p,I);return T.customData._tokenResponse=m,T}function Zr(v){return void 0!==v&&void 0!==v.getResponse}function Cn(v){return void 0!==v&&void 0!==v.enterprise}class Ar{constructor(p){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=p.recaptchaEnforcementState}getProviderEnforcementState(p){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const m of this.recaptchaEnforcementState)if(m.provider&&m.provider===p)return pn(m.enforcementState);return null}isProviderEnabled(p){return"ENFORCE"===this.getProviderEnforcementState(p)||"AUDIT"===this.getProviderEnforcementState(p)}}function Xr(){return(Xr=(0,h.c)(function*(v){return(yield oe(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function uo(v,p){return la.apply(this,arguments)}function la(){return(la=(0,h.c)(function*(v,p){return oe(v,"GET","/v2/recaptchaConfig",pe(v,p))})).apply(this,arguments)}function ho(){return(ho=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function vt(){return(vt=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function or(){return(or=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function fo(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Vr(){return(Vr=(0,h.c)(function*(v,p=!1){const m=(0,U.Yj)(v),I=yield m.getIdToken(p),T=mt(I);L(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,P=x?.sign_in_provider;return{claims:T,token:I,authTime:fo(pt(T.auth_time)),issuedAtTime:fo(pt(T.iat)),expirationTime:fo(pt(T.exp)),signInProvider:P||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function pt(v){return 1e3*Number(v)}function mt(v){const[p,m,I]=v.split(".");if(void 0===p||void 0===m||void 0===I)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,U.WW)(m);return T?JSON.parse(T):(ct("Failed to decode base64 JWT payload"),null)}catch(T){return ct("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Nt(v,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.c)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof U.kx&&function da({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class cd{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,h.c)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,h.c)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class vs{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=fo(this.lastLoginAt),this.creationTime=fo(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sr(v){return Bo.apply(this,arguments)}function Bo(){return Bo=(0,h.c)(function*(v){var p;const m=v.auth,I=yield v.getIdToken(),T=yield Nt(v,function Dt(v,p){return or.apply(this,arguments)}(m,{idToken:I}));L(T?.users.length,m,"internal-error");const x=T.users[0];v._notifyReloadListener(x);const P=null!==(p=x.providerUserInfo)&&void 0!==p&&p.length?function El(v){return v.map(p=>{var{providerId:m}=p,I=(0,qe.sX)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(x.providerUserInfo):[],H=function Il(v,p){return[...v.filter(I=>!p.some(T=>T.providerId===I.providerId)),...p]}(v.providerData,P),Me=!!v.isAnonymous&&!(v.email&&x.passwordHash||H?.length),Fe={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:H,metadata:new vs(x.createdAt,x.lastLoginAt),isAnonymous:Me};Object.assign(v,Fe)}),Bo.apply(this,arguments)}function ys(){return(ys=(0,h.c)(function*(v){const p=(0,U.Yj)(v);yield Sr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function F(){return(F=(0,h.c)(function*(v,p){const m=yield jt(v,{},(0,h.c)(function*(){const I=(0,U.ik)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:x}=v.config,P=Vn(v,T,"/v1/token",`key=${x}`),H=yield v._getAdditionalHeaders();return H["Content-Type"]="application/x-www-form-urlencoded",ne.fetch()(P,{method:"POST",headers:H,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}function B(){return(B=(0,h.c)(function*(v,p){return oe(v,"POST","/v2/accounts:revokeToken",pe(v,p))})).apply(this,arguments)}class G{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){L(p.idToken,"internal-error"),L(typeof p.idToken<"u","internal-error"),L(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function ti(v){const p=mt(v);return L(p,"internal-error"),L(typeof p.exp<"u","internal-error"),L(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,h.c)(function*(){return L(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,h.c)(function*(){const{accessToken:T,refreshToken:x,expiresIn:P}=yield function wl(v,p){return F.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(T,x,Number(P))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:T,expirationTime:x}=m,P=new G;return I&&(L("string"==typeof I,"internal-error",{appName:p}),P.refreshToken=I),T&&(L("string"==typeof T,"internal-error",{appName:p}),P.accessToken=T),x&&(L("number"==typeof x,"internal-error",{appName:p}),P.expirationTime=x),P}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new G,this.toJSON())}_performRefresh(){return te("not implemented")}}function Q(v,p){L("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Le{constructor(p){var{uid:m,auth:I,stsTokenManager:T}=p,x=(0,qe.sX)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new vs(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.c)(function*(){const I=yield Nt(m,m.stsTokenManager.getToken(m.auth,p));return L(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function po(v){return Vr.apply(this,arguments)}(this,p)}reload(){return function Uo(v){return ys.apply(this,arguments)}(this)}_assign(p){this!==p&&(L(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Le(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,h.c)(function*(){let T=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),T=!0),m&&(yield Sr(I)),yield I.auth._persistUserIfCurrent(I),T&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,h.c)(function*(){const m=yield p.getIdToken();return yield Nt(p,function ua(v,p){return ho.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,T,x,P,H,ce,Ce,Me;const Fe=null!==(I=m.displayName)&&void 0!==I?I:void 0,fn=null!==(T=m.email)&&void 0!==T?T:void 0,Hi=null!==(x=m.phoneNumber)&&void 0!==x?x:void 0,zi=null!==(P=m.photoURL)&&void 0!==P?P:void 0,Vs=null!==(H=m.tenantId)&&void 0!==H?H:void 0,Wn=null!==(ce=m._redirectEventId)&&void 0!==ce?ce:void 0,Fc=null!==(Ce=m.createdAt)&&void 0!==Ce?Ce:void 0,wp=null!==(Me=m.lastLoginAt)&&void 0!==Me?Me:void 0,{uid:nu,emailVerified:Cp,isAnonymous:Hd,providerData:Lc,stsTokenManager:f_}=m;L(nu&&f_,p,"internal-error");const Dp=G.fromJSON(this.name,f_);L("string"==typeof nu,p,"internal-error"),Q(Fe,p.name),Q(fn,p.name),L("boolean"==typeof Cp,p,"internal-error"),L("boolean"==typeof Hd,p,"internal-error"),Q(Hi,p.name),Q(zi,p.name),Q(Vs,p.name),Q(Wn,p.name),Q(Fc,p.name),Q(wp,p.name);const Vc=new Le({uid:nu,auth:p,email:fn,emailVerified:Cp,displayName:Fe,isAnonymous:Hd,photoURL:zi,phoneNumber:Hi,tenantId:Vs,stsTokenManager:Dp,createdAt:Fc,lastLoginAt:wp});return Lc&&Array.isArray(Lc)&&(Vc.providerData=Lc.map(zd=>Object.assign({},zd))),Wn&&(Vc._redirectEventId=Wn),Vc}static _fromIdTokenResponse(p,m,I=!1){return(0,h.c)(function*(){const T=new G;T.updateFromServerResponse(m);const x=new Le({uid:m.localId,auth:p,stsTokenManager:T,isAnonymous:I});return yield Sr(x),x})()}}const ht=new Map;function xt(v){Se(v instanceof Function,"Expected a class definition");let p=ht.get(v);return p?(Se(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,ht.set(v,p),p)}const Jt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.c)(function*(){return!0})()}_set(m,I){var T=this;return(0,h.c)(function*(){T.storage[m]=I})()}_get(m){var I=this;return(0,h.c)(function*(){const T=I.storage[m];return void 0===T?null:T})()}_remove(m){var I=this;return(0,h.c)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function dn(v,p,m){return`firebase:${v}:${p}:${m}`}class $e{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:T,name:x}=this.auth;this.fullUserKey=dn(this.userKey,T.apiKey,x),this.fullPersistenceKey=dn("persistence",T.apiKey,x),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.c)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Le._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.c)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,h.c)(function*(){if(!m.length)return new $e(xt(Jt),p,I);const T=(yield Promise.all(m.map(function(){var Ce=(0,h.c)(function*(Me){if(yield Me._isAvailable())return Me});return function(Me){return Ce.apply(this,arguments)}}()))).filter(Ce=>Ce);let x=T[0]||xt(Jt);const P=dn(I,p.config.apiKey,p.name);let H=null;for(const Ce of m)try{const Me=yield Ce._get(P);if(Me){const Fe=Le._fromJSON(p,Me);Ce!==x&&(H=Fe),x=Ce;break}}catch{}const ce=T.filter(Ce=>Ce._shouldAllowMigration);return x._shouldAllowMigration&&ce.length?(x=ce[0],H&&(yield x._set(P,H.toJSON())),yield Promise.all(m.map(function(){var Ce=(0,h.c)(function*(Me){if(Me!==x)try{yield Me._remove(P)}catch{}});return function(Me){return Ce.apply(this,arguments)}}())),new $e(x,p,I)):new $e(x,p,I)})()}}function ni(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Y(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(bs(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(me(p))return"Blackberry";if(Ve(p))return"Webos";if(Jn(p))return"Safari";if((p.includes("chrome/")||Ft(p))&&!p.includes("edge/"))return"Chrome";if(K(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function bs(v=(0,U.Su)()){return/firefox\//i.test(v)}function Jn(v=(0,U.Su)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ft(v=(0,U.Su)()){return/crios\//i.test(v)}function Y(v=(0,U.Su)()){return/iemobile/i.test(v)}function K(v=(0,U.Su)()){return/android/i.test(v)}function me(v=(0,U.Su)()){return/blackberry/i.test(v)}function Ve(v=(0,U.Su)()){return/webos/i.test(v)}function st(v=(0,U.Su)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function bn(v=(0,U.Su)()){return st(v)||K(v)||Ve(v)||me(v)||/windows phone/i.test(v)||Y(v)}function Qa(v,p=[]){let m;switch(v){case"Browser":m=ni((0,U.Su)());break;case"Worker":m=`${ni((0,U.Su)())}-${v}`;break;default:m=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${_e.SDK_VERSION}/${I}`}class vf{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=x=>new Promise((P,H)=>{try{P(p(x))}catch(ce){H(ce)}});I.onAbort=m,this.queue.push(I);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.c)(function*(){if(m.auth.currentUser===p)return;const I=[];try{for(const T of m.queue)yield T(p),T.onAbort&&I.push(T.onAbort)}catch(T){I.reverse();for(const x of I)try{x()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}function Cl(){return(Cl=(0,h.c)(function*(v,p={}){return oe(v,"GET","/v2/passwordPolicy",pe(v,p))})).apply(this,arguments)}class pg{constructor(p){var m,I,T,x;const P=p.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(m=P.minPasswordLength)&&void 0!==m?m:6,P.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=P.maxPasswordLength),void 0!==P.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=P.containsLowercaseCharacter),void 0!==P.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=P.containsUppercaseCharacter),void 0!==P.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=P.containsNumericCharacter),void 0!==P.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=P.containsNonAlphanumericCharacter),this.enforcementState=p.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(T=null===(I=p.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==T?T:"",this.forceUpgradeOnSignin=null!==(x=p.forceUpgradeOnSignin)&&void 0!==x&&x,this.schemaVersion=p.schemaVersion}validatePassword(p){var m,I,T,x,P,H;const ce={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(p,ce),this.validatePasswordCharacterOptions(p,ce),ce.isValid&&(ce.isValid=null===(m=ce.meetsMinPasswordLength)||void 0===m||m),ce.isValid&&(ce.isValid=null===(I=ce.meetsMaxPasswordLength)||void 0===I||I),ce.isValid&&(ce.isValid=null===(T=ce.containsLowercaseLetter)||void 0===T||T),ce.isValid&&(ce.isValid=null===(x=ce.containsUppercaseLetter)||void 0===x||x),ce.isValid&&(ce.isValid=null===(P=ce.containsNumericCharacter)||void 0===P||P),ce.isValid&&(ce.isValid=null===(H=ce.containsNonAlphanumericCharacter)||void 0===H||H),ce}validatePasswordLengthOptions(p,m){const I=this.customStrengthOptions.minPasswordLength,T=this.customStrengthOptions.maxPasswordLength;I&&(m.meetsMinPasswordLength=p.length>=I),T&&(m.meetsMaxPasswordLength=p.length<=T)}validatePasswordCharacterOptions(p,m){let I;this.updatePasswordCharacterOptionsStatuses(m,!1,!1,!1,!1);for(let T=0;T<p.length;T++)I=p.charAt(T),this.updatePasswordCharacterOptionsStatuses(m,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(p,m,I,T,x){this.customStrengthOptions.containsLowercaseLetter&&(p.containsLowercaseLetter||(p.containsLowercaseLetter=m)),this.customStrengthOptions.containsUppercaseLetter&&(p.containsUppercaseLetter||(p.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(p.containsNumericCharacter||(p.containsNumericCharacter=T)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(p.containsNonAlphanumericCharacter||(p.containsNonAlphanumericCharacter=x))}}class yf{constructor(p,m,I,T){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=I,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dl(this),this.idTokenSubscription=new Dl(this),this.beforeStateQueue=new vf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=xt(m)),this._initializationPromise=this.queue((0,h.c)(function*(){var T,x;if(!I._deleted&&(I.persistenceManager=yield $e.create(I,p),!I._deleted)){if(null!==(T=I._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(x=I.currentUser)||void 0===x?void 0:x.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.c)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.c)(function*(){var I;const T=yield m.assertedPersistence.getCurrentUser();let x=T,P=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const H=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,ce=x?._redirectEventId,Ce=yield m.tryRedirectSignIn(p);(!H||H===ce)&&Ce?.user&&(x=Ce.user,P=!0)}if(!x)return m.directlySetCurrentUser(null);if(!x._redirectEventId){if(P)try{yield m.beforeStateQueue.runMiddleware(x)}catch(H){x=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(H))}return x?m.reloadAndSetCurrentUserOrClear(x):m.directlySetCurrentUser(null)}return L(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===x._redirectEventId?m.directlySetCurrentUser(x):m.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(p){var m=this;return(0,h.c)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.c)(function*(){try{yield Sr(p)}catch(I){if("auth/network-request-failed"!==I?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Vo(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.c)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.c)(function*(){const I=p?(0,U.Yj)(p):null;return I&&L(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,h.c)(function*(){if(!I._deleted)return p&&L(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,h.c)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.c)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.c)(function*(){yield m.assertedPersistence.setPersistence(xt(p))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(p){var m=this;return(0,h.c)(function*(){m._getPasswordPolicyInternal()||(yield m._updatePasswordPolicy());const I=m._getPasswordPolicyInternal();return I.schemaVersion!==m.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(m._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(p)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var p=this;return(0,h.c)(function*(){const m=yield function ld(v){return Cl.apply(this,arguments)}(p),I=new pg(m);null===p.tenantId?p._projectPasswordPolicy=I:p._tenantPasswordPolicies[p.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.UR("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}authStateReady(){return new Promise((p,m)=>{if(this.currentUser)p();else{const I=this.onAuthStateChanged(()=>{I(),p()},m)}})}revokeAccessToken(p){var m=this;return(0,h.c)(function*(){if(m.currentUser){const I=yield m.currentUser.getIdToken(),T={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:p,idToken:I};null!=m.tenantId&&(T.tenantId=m.tenantId),yield function k(v,p){return B.apply(this,arguments)}(m,T)}})()}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,h.c)(function*(){const T=yield I.getOrInitRedirectPersistenceManager(m);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.c)(function*(){if(!m.redirectPersistenceManager){const I=p&&xt(p)||m._popupRedirectResolver;L(I,m,"argument-error"),m.redirectPersistenceManager=yield $e.create(m,[xt(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.c)(function*(){var I,T;return m._isInitialized&&(yield m.queue((0,h.c)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.c)(function*(){if(p===m.currentUser)return m.queue((0,h.c)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,T){if(this._deleted)return()=>{};const x="function"==typeof m?m:m.next.bind(m);let P=!1;const H=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(H,this,"internal-error"),H.then(()=>{P||x(this.currentUser)}),"function"==typeof m){const ce=p.addObserver(m,I,T);return()=>{P=!0,ce()}}{const ce=p.addObserver(m);return()=>{P=!0,ce()}}}directlySetCurrentUser(p){var m=this;return(0,h.c)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Qa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.c)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();T&&(I["X-Firebase-Client"]=T);const x=yield p._getAppCheckToken();return x&&(I["X-Firebase-AppCheck"]=x),I})()}_getAppCheckToken(){var p=this;return(0,h.c)(function*(){var m;const I=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return I?.error&&function wn(v,...p){on.logLevel<=xe.Ge.WARN&&on.warn(`Auth (${_e.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function gn(v){return(0,U.Yj)(v)}class Dl{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.my)(m=>this.observer=m)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xa={loadJS:()=>(0,h.c)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rr(v){return Xa.loadJS(v)}function ud(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Ef{constructor(p){this.type="recaptcha-enterprise",this.auth=gn(p)}verify(p="verify",m=!1){var I=this;return(0,h.c)(function*(){function x(){return x=(0,h.c)(function*(H){if(!m){if(null==H.tenantId&&null!=H._agentRecaptchaConfig)return H._agentRecaptchaConfig.siteKey;if(null!=H.tenantId&&void 0!==H._tenantRecaptchaConfigs[H.tenantId])return H._tenantRecaptchaConfigs[H.tenantId].siteKey}return new Promise(function(){var ce=(0,h.c)(function*(Ce,Me){uo(H,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Fe=>{if(void 0!==Fe.recaptchaKey){const fn=new Ar(Fe);return null==H.tenantId?H._agentRecaptchaConfig=fn:H._tenantRecaptchaConfigs[H.tenantId]=fn,Ce(fn.siteKey)}Me(new Error("recaptcha Enterprise site key undefined"))}).catch(Fe=>{Me(Fe)})});return function(Ce,Me){return ce.apply(this,arguments)}}())}),x.apply(this,arguments)}function P(H,ce,Ce){const Me=window.grecaptcha;Cn(Me)?Me.enterprise.ready(()=>{Me.enterprise.execute(H,{action:p}).then(Fe=>{ce(Fe)}).catch(()=>{ce("NO_RECAPTCHA")})}):Ce(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((H,ce)=>{(function T(H){return x.apply(this,arguments)})(I.auth).then(Ce=>{if(!m&&Cn(window.grecaptcha))P(Ce,H,ce);else{if(typeof window>"u")return void ce(new Error("RecaptchaVerifier is only supported in browser"));let Me=function bf(){return Xa.recaptchaEnterpriseScript}();0!==Me.length&&(Me+=Ce),Rr(Me).then(()=>{P(Ce,H,ce)}).catch(Fe=>{ce(Fe)})}}).catch(Ce=>{ce(Ce)})})})()}}function Qy(v,p,m){return mg.apply(this,arguments)}function mg(){return(mg=(0,h.c)(function*(v,p,m,I=!1){const T=new Ef(v);let x;try{x=yield T.verify(m)}catch{x=yield T.verify(m,!0)}const P=Object.assign({},p);return Object.assign(P,I?{captchaResp:x}:{captchaResponse:x}),Object.assign(P,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(P,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),P})).apply(this,arguments)}function Ja(v,p,m,I){return wf.apply(this,arguments)}function wf(){return wf=(0,h.c)(function*(v,p,m,I){var T;if(null!==(T=v._getRecaptchaConfig())&&void 0!==T&&T.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const x=yield Qy(v,p,m,"getOobCode"===m);return I(v,x)}return I(v,p).catch(function(){var x=(0,h.c)(function*(P){if("auth/missing-recaptcha-token"===P.code){console.log(`${m} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const H=yield Qy(v,p,m,"getOobCode"===m);return I(v,H)}return Promise.reject(P)});return function(P){return x.apply(this,arguments)}}())}),wf.apply(this,arguments)}function Df(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function qn(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Ei{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return te("not implemented")}_getIdTokenResponse(p){return te("not implemented")}_linkToIdToken(p,m){return te("not implemented")}_getReauthenticationResolver(p){return te("not implemented")}}function gr(v,p){return dd.apply(this,arguments)}function dd(){return(dd=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:resetPassword",pe(v,p))})).apply(this,arguments)}function ec(){return(ec=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Zy(v,p){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:signUp",p)})).apply(this,arguments)}function Ee(){return(Ee=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:update",pe(v,p))})).apply(this,arguments)}function Xe(v,p){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,h.c)(function*(v,p){return Je(v,"POST","/v1/accounts:signInWithPassword",pe(v,p))})).apply(this,arguments)}function ri(v,p){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:sendOobCode",pe(v,p))})).apply(this,arguments)}function jo(){return(jo=(0,h.c)(function*(v,p){return ri(v,p)})).apply(this,arguments)}function hn(v,p){return cr.apply(this,arguments)}function cr(){return(cr=(0,h.c)(function*(v,p){return ri(v,p)})).apply(this,arguments)}function $o(v,p){return it.apply(this,arguments)}function it(){return(it=(0,h.c)(function*(v,p){return ri(v,p)})).apply(this,arguments)}function Af(){return(Af=(0,h.c)(function*(v,p){return ri(v,p)})).apply(this,arguments)}function _n(){return(_n=(0,h.c)(function*(v,p){return Je(v,"POST","/v1/accounts:signInWithEmailLink",pe(v,p))})).apply(this,arguments)}function Is(){return(Is=(0,h.c)(function*(v,p){return Je(v,"POST","/v1/accounts:signInWithEmailLink",pe(v,p))})).apply(this,arguments)}class wi extends Ei{constructor(p,m,I,T=null){super("password",I),this._email=p,this._password=m,this._tenantId=T}static _fromEmailAndPassword(p,m){return new wi(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new wi(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.c)(function*(){switch(m.signInMethod){case"password":return Ja(p,{returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Xe);case"emailLink":return function Tl(v,p){return _n.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ae(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,h.c)(function*(){switch(I.signInMethod){case"password":return Ja(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zy);case"emailLink":return function tc(v,p){return Is.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:Ae(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ci(v,p){return Al.apply(this,arguments)}function Al(){return(Al=(0,h.c)(function*(v,p){return Je(v,"POST","/v1/accounts:signInWithIdp",pe(v,p))})).apply(this,arguments)}class Bi extends Ei{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Bi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ae("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:T}=m,x=(0,qe.sX)(m,["providerId","signInMethod"]);if(!I||!T)return null;const P=new Bi(I,T);return P.idToken=x.idToken||void 0,P.accessToken=x.accessToken||void 0,P.secret=x.secret,P.nonce=x.nonce,P.pendingToken=x.pendingToken||null,P}_getIdTokenResponse(p){return Ci(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Ci(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ci(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,U.ik)(m)}return p}}function lt(){return(lt=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:sendVerificationCode",pe(v,p))})).apply(this,arguments)}function fa(){return(fa=(0,h.c)(function*(v,p){return Je(v,"POST","/v1/accounts:signInWithPhoneNumber",pe(v,p))})).apply(this,arguments)}function rc(){return(rc=(0,h.c)(function*(v,p){const m=yield Je(v,"POST","/v1/accounts:signInWithPhoneNumber",pe(v,p));if(m.temporaryProof)throw pr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ic={USER_NOT_FOUND:"user-not-found"};function Es(){return(Es=(0,h.c)(function*(v,p){return Je(v,"POST","/v1/accounts:signInWithPhoneNumber",pe(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ic)})).apply(this,arguments)}class Un extends Ei{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Un({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Un({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Sf(v,p){return fa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function mo(v,p){return rc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Yn(v,p){return Es.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:T}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:T,temporaryProof:x}=p;return I||m||T||x?new Un({verificationId:m,verificationCode:I,phoneNumber:T,temporaryProof:x}):null}}class Ki{constructor(p){var m,I,T,x,P,H;const ce=(0,U.aw)((0,U.kF)(p)),Ce=null!==(m=ce.apiKey)&&void 0!==m?m:null,Me=null!==(I=ce.oobCode)&&void 0!==I?I:null,Fe=function _r(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ce.mode)&&void 0!==T?T:null);L(Ce&&Me&&Fe,"argument-error"),this.apiKey=Ce,this.operation=Fe,this.code=Me,this.continueUrl=null!==(x=ce.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(P=ce.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(H=ce.tenantId)&&void 0!==H?H:null}static parseLink(p){const m=function xf(v){const p=(0,U.aw)((0,U.kF)(v)).link,m=p?(0,U.aw)((0,U.kF)(p)).deep_link_id:null,I=(0,U.aw)((0,U.kF)(v)).deep_link_id;return(I?(0,U.aw)((0,U.kF)(I)).link:null)||I||m||p||v}(p);try{return new Ki(m)}catch{return null}}}let ii=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return wi._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const T=Ki.parseLink(I);return L(T,"argument-error"),wi._fromEmailAndCode(m,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class go{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class oc extends go{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class sc extends oc{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return L("providerId"in m&&"signInMethod"in m,"argument-error"),Bi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return L(p.idToken||p.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return sc.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return sc.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:T,pendingToken:x,nonce:P,providerId:H}=p;if(!I&&!T&&!m&&!x||!H)return null;try{return new sc(H)._credential({idToken:m,accessToken:I,nonce:P,pendingToken:x})}catch{return null}}}let Rf=(()=>{class v extends oc{constructor(){super("facebook.com")}static credential(m){return Bi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),yg=(()=>{class v extends oc{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return Bi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:T}=m;if(!I&&!T)return null;try{return v.credential(I,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),bg=(()=>{class v extends oc{constructor(){super("github.com")}static credential(m){return Bi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Sl extends Ei{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Ci(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Ci(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ci(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:T,pendingToken:x}=m;return I&&T&&x&&I===T?new Sl(I,x):null}static _create(p,m){return new Sl(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ig extends go{constructor(p){L(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ig.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ig.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Sl.fromJSON(p);return L(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return Sl._create(I,m)}catch{return null}}}let Xy=(()=>{class v extends oc{constructor(){super("twitter.com")}static credential(m,I){return Bi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:T}=m;if(!I||!T)return null;try{return v.credential(I,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Jy(v,p){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,h.c)(function*(v,p){return Je(v,"POST","/v1/accounts:signUp",pe(v,p))})).apply(this,arguments)}class _o{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,T=!1){return(0,h.c)(function*(){const x=yield Le._fromIdTokenResponse(p,I,T),P=Sw(I);return new _o({user:x,providerId:P,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,h.c)(function*(){yield p._updateTokensIfNecessary(I,!0);const T=Sw(I);return new _o({user:p,providerId:T,_tokenResponse:I,operationType:m})})()}}function Sw(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function wg(){return(wg=(0,h.c)(function*(v){var p;const m=gn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new _o({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield Jy(m,{returnSecureToken:!0}),T=yield _o._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Pf extends U.kx{constructor(p,m,I,T){var x;super(m.code,m.message),this.operationType=I,this.user=T,Object.setPrototypeOf(this,Pf.prototype),this.customData={appName:p.name,tenantId:null!==(x=p.tenantId)&&void 0!==x?x:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,T){return new Pf(p,m,I,T)}}function Rw(v,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Pf._fromErrorAndOperation(v,x,p,I):x})}function Cg(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Tg(){return Tg=(0,h.c)(function*(v,p){const m=(0,U.Yj)(v);yield hd(!0,m,p);const{providerUserInfo:I}=yield function Jr(v,p){return vt.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),T=Cg(I||[]);return m.providerData=m.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Tg.apply(this,arguments)}function Ag(v,p){return eb.apply(this,arguments)}function eb(){return(eb=(0,h.c)(function*(v,p,m=!1){const I=yield Nt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return _o._forOperation(v,"link",I)})).apply(this,arguments)}function hd(v,p,m){return fd.apply(this,arguments)}function fd(){return(fd=(0,h.c)(function*(v,p,m){yield Sr(p);const T=!1===v?"provider-already-linked":"no-such-provider";L(Cg(p.providerData).has(m)===v,p.auth,T)})).apply(this,arguments)}function sn(v,p){return kf.apply(this,arguments)}function kf(){return(kf=(0,h.c)(function*(v,p,m=!1){const{auth:I}=v,T="reauthenticate";try{const x=yield Nt(v,Rw(I,T,p,v),m);L(x.idToken,I,"internal-error");const P=mt(x.idToken);L(P,I,"internal-error");const{sub:H}=P;return L(v.uid===H,I,"user-mismatch"),_o._forOperation(v,T,x)}catch(x){throw"auth/user-not-found"===x?.code&&Ae(I,"user-mismatch"),x}})).apply(this,arguments)}function tb(v,p){return nb.apply(this,arguments)}function nb(){return(nb=(0,h.c)(function*(v,p,m=!1){const I="signIn",T=yield Rw(v,I,p),x=yield _o._fromIdTokenResponse(v,I,T);return m||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Zt(v,p){return pd.apply(this,arguments)}function pd(){return(pd=(0,h.c)(function*(v,p){return tb(gn(v),p)})).apply(this,arguments)}function xl(v,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,h.c)(function*(v,p){const m=(0,U.Yj)(v);return yield hd(!1,m,p.providerId),Ag(m,p)})).apply(this,arguments)}function Sg(v,p){return ac.apply(this,arguments)}function ac(){return(ac=(0,h.c)(function*(v,p){return sn((0,U.Yj)(v),p)})).apply(this,arguments)}function oi(){return(oi=(0,h.c)(function*(v,p){return Je(v,"POST","/v1/accounts:signInWithCustomToken",pe(v,p))})).apply(this,arguments)}function Ml(){return Ml=(0,h.c)(function*(v,p){const m=gn(v),I=yield function Rl(v,p){return oi.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),T=yield _o._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(T.user),T}),Ml.apply(this,arguments)}class Pl{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?si._fromServerResponse(p,m):"totpInfo"in m?ws._fromServerResponse(p,m):Ae(p,"internal-error")}}class si extends Pl{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new si(m)}}class ws extends Pl{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new ws(m)}}function Of(v,p,m){var I;L((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),L(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(L(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(L(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Nf(v){return cc.apply(this,arguments)}function cc(){return(cc=(0,h.c)(function*(v){const p=gn(v);p._getPasswordPolicyInternal()&&(yield p._updatePasswordPolicy())})).apply(this,arguments)}function lc(){return(lc=(0,h.c)(function*(v,p,m){const I=gn(v),T={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};m&&Of(I,T,m),yield Ja(I,T,"getOobCode",hn)})).apply(this,arguments)}function gd(){return gd=(0,h.c)(function*(v,p,m){yield gr((0,U.Yj)(v),{oobCode:p,newPassword:m}).catch(function(){var I=(0,h.c)(function*(T){throw"auth/password-does-not-meet-requirements"===T.code&&Nf(v),T});return function(T){return I.apply(this,arguments)}}())}),gd.apply(this,arguments)}function nt(){return nt=(0,h.c)(function*(v,p){yield function In(v,p){return Ee.apply(this,arguments)}((0,U.Yj)(v),{oobCode:p})}),nt.apply(this,arguments)}function Lf(v,p){return rb.apply(this,arguments)}function rb(){return(rb=(0,h.c)(function*(v,p){const m=(0,U.Yj)(v),I=yield gr(m,{oobCode:p}),T=I.requestType;switch(L(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":L(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":L(I.mfaInfo,m,"internal-error");default:L(I.email,m,"internal-error")}let x=null;return I.mfaInfo&&(x=Pl._fromServerResponse(gn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Rg(){return(Rg=(0,h.c)(function*(v,p){const{data:m}=yield Lf((0,U.Yj)(v),p);return m.email})).apply(this,arguments)}function Vf(){return(Vf=(0,h.c)(function*(v,p,m){const I=gn(v),P=yield Ja(I,{returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jy).catch(ce=>{throw"auth/password-does-not-meet-requirements"===ce.code&&Nf(v),ce}),H=yield _o._fromIdTokenResponse(I,"signIn",P);return yield I._updateCurrentUser(H.user),H})).apply(this,arguments)}function Bf(){return(Bf=(0,h.c)(function*(v,p,m){const I=gn(v),T={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};(function x(P,H){L(H.handleCodeInApp,I,"argument-error"),H&&Of(I,P,H)})(T,m),yield Ja(I,T,"getOobCode",$o)})).apply(this,arguments)}function Mg(){return(Mg=(0,h.c)(function*(v,p,m){const I=(0,U.Yj)(v),T=ii.credentialWithLink(p,m||Gt());return L(T._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Zt(I,T)})).apply(this,arguments)}function Mt(){return(Mt=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:createAuthUri",pe(v,p))})).apply(this,arguments)}function _d(){return _d=(0,h.c)(function*(v,p){const I={identifier:p,continueUri:Ln()?Gt():"http://localhost"},{signinMethods:T}=yield function ie(v,p){return Mt.apply(this,arguments)}((0,U.Yj)(v),I);return T||[]}),_d.apply(this,arguments)}function Uf(){return Uf=(0,h.c)(function*(v,p){const m=(0,U.Yj)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Of(m.auth,T,p);const{email:x}=yield function qi(v,p){return jo.apply(this,arguments)}(m.auth,T);x!==v.email&&(yield v.reload())}),Uf.apply(this,arguments)}function Qi(){return Qi=(0,h.c)(function*(v,p,m){const I=(0,U.Yj)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Of(I.auth,x,m);const{email:P}=yield function ha(v,p){return Af.apply(this,arguments)}(I.auth,x);P!==v.email&&(yield v.reload())}),Qi.apply(this,arguments)}function yd(){return(yd=(0,h.c)(function*(v,p){return oe(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function sb(){return sb=(0,h.c)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,U.Yj)(v),x={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},P=yield Nt(I,function kg(v,p){return yd.apply(this,arguments)}(I.auth,x));I.displayName=P.displayName||null,I.photoURL=P.photoUrl||null;const H=I.providerData.find(({providerId:ce})=>"password"===ce);H&&(H.displayName=I.displayName,H.photoURL=I.photoURL),yield I._updateTokensIfNecessary(P)}),sb.apply(this,arguments)}function Di(v,p,m){return jf.apply(this,arguments)}function jf(){return jf=(0,h.c)(function*(v,p,m){const{auth:I}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(x.email=p),m&&(x.password=m);const P=yield Nt(v,function vg(v,p){return ec.apply(this,arguments)}(I,x));yield v._updateTokensIfNecessary(P,!0)}),jf.apply(this,arguments)}class ci{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class bd extends ci{constructor(p,m,I,T){super(p,m,I),this.username=T}}class uc extends ci{constructor(p,m){super(p,"facebook.com",m)}}class cb extends bd{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class lb extends ci{constructor(p,m){super(p,"google.com",m)}}class $f extends bd{constructor(p,m,I){super(p,"twitter.com",m,I)}}function Hf(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function vo(v){var p,m;if(!v)return null;const{providerId:I}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const P=null===(m=null===(p=mt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(P)return new ci(x,"anonymous"!==P&&"custom"!==P?P:null)}if(!I)return null;switch(I){case"facebook.com":return new uc(x,T);case"github.com":return new cb(x,T);case"google.com":return new lb(x,T);case"twitter.com":return new $f(x,T,v.screenName||null);case"custom":case"anonymous":return new ci(x,null);default:return new ci(x,I,T)}}(m)}class qt{constructor(p,m,I){this.type=p,this.credential=m,this.user=I}static _fromIdtoken(p,m){return new qt("enroll",p,m)}static _fromMfaPendingCredential(p){return new qt("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return qt._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return qt._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Dd{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=gn(p),T=m.customData._serverResponse,x=(T.mfaInfo||[]).map(H=>Pl._fromServerResponse(I,H));L(T.mfaPendingCredential,I,"internal-error");const P=qt._fromMfaPendingCredential(T.mfaPendingCredential);return new Dd(P,x,function(){var H=(0,h.c)(function*(ce){const Ce=yield ce._process(I,P);delete T.mfaInfo,delete T.mfaPendingCredential;const Me=Object.assign(Object.assign({},T),{idToken:Ce.idToken,refreshToken:Ce.refreshToken});switch(m.operationType){case"signIn":const Fe=yield _o._fromIdTokenResponse(I,m.operationType,Me);return yield I._updateCurrentUser(Fe.user),Fe;case"reauthenticate":return L(m.user,I,"internal-error"),_o._forOperation(m.user,m.operationType,Me);default:Ae(I,"internal-error")}});return function(ce){return H.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.c)(function*(){return m.signInResolver(p)})()}}class Ui{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>Pl._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new Ui(p)}getSession(){var p=this;return(0,h.c)(function*(){return qt._fromIdtoken(yield p.user.getIdToken(),p.user)})()}enroll(p,m){var I=this;return(0,h.c)(function*(){const T=p,x=yield I.getSession(),P=yield Nt(I.user,T._process(I.user.auth,x,m));return yield I.user._updateTokensIfNecessary(P),I.user.reload()})()}unenroll(p){var m=this;return(0,h.c)(function*(){const I="string"==typeof p?p:p.uid,T=yield m.user.getIdToken();try{const x=yield Nt(m.user,function Td(v,p){return oe(v,"POST","/v2/accounts/mfaEnrollment:withdraw",pe(v,p))}(m.user.auth,{idToken:T,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:P})=>P!==I),yield m.user._updateTokensIfNecessary(x),yield m.user.reload()}catch(x){throw x}})()}}const Ad=new WeakMap,zo="__sak";class Yf{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(zo,"1"),this.storage.removeItem(zo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ds=(()=>{class v extends Yf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fb(){const v=(0,U.Su)();return Jn(v)||st(v)}()&&function xr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=bn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const T=this.storage.getItem(I),x=this.localCache[I];T!==x&&m(I,x,T)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((H,ce,Ce)=>{this.notifyListeners(H,Ce)});const T=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const H=this.storage.getItem(T);if(m.newValue!==H)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!I)return}const x=()=>{const H=this.storage.getItem(T);!I&&this.localCache[T]===H||this.notifyListeners(T,H)},P=this.storage.getItem(T);!function mn(){return(0,U.Uv)()&&10===document.documentMode}()||P===m.newValue||m.newValue===m.oldValue?x():setTimeout(x,10)}notifyListeners(m,I){this.localCache[m]=I;const T=this.listeners[m];if(T)for(const x of Array.from(T))x(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var T=()=>super._set,x=this;return(0,h.c)(function*(){yield T().call(x,m,I),x.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,T=this;return(0,h.c)(function*(){const x=yield I().call(T,m);return T.localCache[m]=JSON.stringify(x),x})()}_remove(m){var I=()=>super._remove,T=this;return(0,h.c)(function*(){yield I().call(T,m),delete T.localCache[m]})()}}return v.type="LOCAL",v})(),yo=(()=>{class v extends Yf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let Lg=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(x=>x.isListeningto(m));if(I)return I;const T=new v(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,h.c)(function*(){const T=m,{eventId:x,eventType:P,data:H}=T.data,ce=I.handlersMap[P];if(!ce?.size)return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:P});const Ce=Array.from(ce).map(function(){var Fe=(0,h.c)(function*(fn){return fn(T.origin,H)});return function(fn){return Fe.apply(this,arguments)}}()),Me=yield function Vw(v){return Promise.all(v.map(function(){var p=(0,h.c)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(Ce);T.ports[0].postMessage({status:"done",eventId:x,eventType:P,response:Me})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Nl(v="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return v+m}class Ti{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var T=this;return(0,h.c)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let P,H;return new Promise((ce,Ce)=>{const Me=Nl("",20);x.port1.start();const Fe=setTimeout(()=>{Ce(new Error("unsupported_event"))},I);H={messageChannel:x,onMessage(fn){const Hi=fn;if(Hi.data.eventId===Me)switch(Hi.data.status){case"ack":clearTimeout(Fe),P=setTimeout(()=>{Ce(new Error("timeout"))},3e3);break;case"done":clearTimeout(P),ce(Hi.data.response);break;default:clearTimeout(Fe),clearTimeout(P),Ce(new Error("invalid_response"))}}},T.handlers.add(H),x.port1.addEventListener("message",H.onMessage),T.target.postMessage({eventType:p,eventId:Me,data:m},[x.port2])}).finally(()=>{H&&T.removeMessageHandler(H)})})()}}function Mn(){return window}function Kf(){return typeof Mn().WorkerGlobalScope<"u"&&"function"==typeof Mn().importScripts}function Bg(){return(Bg=(0,h.c)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zf="firebaseLocalStorageDb",Ll="firebaseLocalStorage",fc="fbase_key";class ga{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Vl(v,p){return v.transaction([Ll],p?"readwrite":"readonly").objectStore(Ll)}function bo(){const v=indexedDB.open(Zf,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(Ll,{keyPath:fc})}catch(T){m(T)}}),v.addEventListener("success",(0,h.c)(function*(){const I=v.result;I.objectStoreNames.contains(Ll)?p(I):(I.close(),yield function Bw(){const v=indexedDB.deleteDatabase(Zf);return new ga(v).toPromise()}(),p(yield bo()))}))})}function vn(v,p,m){return pb.apply(this,arguments)}function pb(){return(pb=(0,h.c)(function*(v,p,m){const I=Vl(v,!0).put({[fc]:p,value:m});return new ga(I).toPromise()})).apply(this,arguments)}function Bl(){return(Bl=(0,h.c)(function*(v,p){const m=Vl(v,!1).get(p),I=yield new ga(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function mb(v,p){const m=Vl(v,!0).delete(p);return new ga(m).toPromise()}const Ai=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.c)(function*(){return m.db||(m.db=yield bo()),m.db})()}_withRetries(m){var I=this;return(0,h.c)(function*(){let T=0;for(;;)try{const x=yield I._openDb();return yield m(x)}catch(x){if(T++>3)throw x;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.c)(function*(){return Kf()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.c)(function*(){m.receiver=Lg._getInstance(function Fl(){return Kf()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,h.c)(function*(T,x){return{keyProcessed:(yield m._poll()).includes(x.key)}});return function(T,x){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,h.c)(function*(T,x){return["keyChanged"]});return function(T,x){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.c)(function*(){var I,T;if(m.activeServiceWorker=yield function Vg(){return Bg.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ti(m.activeServiceWorker);const x=yield m.sender._send("ping",{},800);x&&null!==(I=x[0])&&void 0!==I&&I.fulfilled&&null!==(T=x[0])&&void 0!==T&&T.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,h.c)(function*(){if(I.sender&&I.activeServiceWorker&&function Qf(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.c)(function*(){try{if(!indexedDB)return!1;const m=yield bo();return yield vn(m,zo,"1"),yield mb(m,zo),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,h.c)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var T=this;return(0,h.c)(function*(){return T._withPendingWrite((0,h.c)(function*(){return yield T._withRetries(x=>vn(x,m,I)),T.localCache[m]=I,T.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,h.c)(function*(){const T=yield I._withRetries(x=>function Xf(v,p){return Bl.apply(this,arguments)}(x,m));return I.localCache[m]=T,T})()}_remove(m){var I=this;return(0,h.c)(function*(){return I._withPendingWrite((0,h.c)(function*(){return yield I._withRetries(T=>mb(T,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.c)(function*(){const I=yield m._withRetries(P=>{const H=Vl(P,!1).getAll();return new ga(H).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const T=[],x=new Set;if(0!==I.length)for(const{fbase_key:P,value:H}of I)x.add(P),JSON.stringify(m.localCache[P])!==JSON.stringify(H)&&(m.notifyListeners(P,H),T.push(P));for(const P of Object.keys(m.localCache))m.localCache[P]&&!x.has(P)&&(m.notifyListeners(P,null),T.push(P));return T})()}notifyListeners(m,I){this.localCache[m]=I;const T=this.listeners[m];if(T)for(const x of Array.from(T))x(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.c)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),ep=1e12;class yb{constructor(p){this.auth=p,this.counter=ep,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new $g(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||ep;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||ep))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.c)(function*(){var I;return null===(I=m._widgets.get(p||ep))||void 0===I||I.execute(),""})()}}class $g{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;L(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function jn(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yn=ud("rcb"),bb=new lo(3e4,6e4);class pc{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Mn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return L(function tp(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&Zr(Mn().grecaptcha)?Promise.resolve(Mn().grecaptcha):new Promise((I,T)=>{const x=Mn().setTimeout(()=>{T(rt(p,"network-request-failed"))},bb.get());Mn()[yn]=()=>{Mn().clearTimeout(x),delete Mn()[yn];const H=Mn().grecaptcha;if(!H||!Zr(H))return void T(rt(p,"internal-error"));const ce=H.render;H.render=(Ce,Me)=>{const Fe=ce(Ce,Me);return this.counter++,Fe},this.hostLanguage=m,I(H)},Rr(`${function qy(){return Xa.recaptchaV2Script}()}?${(0,U.ik)({onload:yn,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(x),T(rt(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Mn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hg{load(p){return(0,h.c)(function*(){return new yb(p)})()}clearedOneInstance(){}}const Ul="recaptcha",ot={theme:"light",type:"image"};class jl{constructor(p,m,I=Object.assign({},ot)){this.parameters=I,this.type=Ul,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gn(p),this.isInvisible="invisible"===this.parameters.size,L(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof m?document.getElementById(m):m;L(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hg:new pc,this.validateStartingState()}verify(){var p=this;return(0,h.c)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(x=>{const P=H=>{H&&(p.tokenChangeListeners.delete(P),x(H))};p.tokenChangeListeners.add(P),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){L(!this.parameters.sitekey,this.auth,"argument-error"),L(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),L(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=Mn()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){L(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.c)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.c)(function*(){L(Ln()&&!Kf(),p.auth,"internal-error"),yield function xd(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ke(v){return Xr.apply(this,arguments)}(p.auth);L(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return L(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $l{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Un._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function mc(){return(mc=(0,h.c)(function*(v,p,m){const I=gn(v),T=yield rp(I,p,(0,U.Yj)(m));return new $l(T,x=>Zt(I,x))})).apply(this,arguments)}function gc(){return(gc=(0,h.c)(function*(v,p,m){const I=(0,U.Yj)(v);yield hd(!1,I,"phone");const T=yield rp(I.auth,p,(0,U.Yj)(m));return new $l(T,x=>xl(I,x))})).apply(this,arguments)}function Ur(){return(Ur=(0,h.c)(function*(v,p,m){const I=(0,U.Yj)(v),T=yield rp(I.auth,p,(0,U.Yj)(m));return new $l(T,x=>Sg(I,x))})).apply(this,arguments)}function rp(v,p,m){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,h.c)(function*(v,p,m){var I;const T=yield m.verify();try{let x;if(L("string"==typeof T,v,"argument-error"),L(m.type===Ul,v,"argument-error"),x="string"==typeof p?{phoneNumber:p}:p,"session"in x){const P=x.session;if("phoneNumber"in x)return L("enroll"===P.type,v,"internal-error"),(yield function Wf(v,p){return oe(v,"POST","/v2/accounts/mfaEnrollment:start",pe(v,p))}(v,{idToken:P.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{L("signin"===P.type,v,"internal-error");const H=(null===(I=x.multiFactorHint)||void 0===I?void 0:I.uid)||x.multiFactorUid;return L(H,v,"missing-multi-factor-info"),(yield function Sd(v,p){return oe(v,"POST","/v2/accounts/mfaSignIn:start",pe(v,p))}(v,{mfaPendingCredential:P.credential,mfaEnrollmentId:H,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:P}=yield function nc(v,p){return lt.apply(this,arguments)}(v,{phoneNumber:x.phoneNumber,recaptchaToken:T});return P}}finally{m._reset()}}),Gg.apply(this,arguments)}function at(){return(at=(0,h.c)(function*(v,p){yield Ag((0,U.Yj)(v),p)})).apply(this,arguments)}let Lt=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=gn(m)}verifyPhoneNumber(m,I){return rp(this.auth,m,(0,U.Yj)(I))}static credential(m,I){return Un._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:T}=m;return I&&T?Un._fromTokenResponse(I,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function _c(v,p){return p?xt(p):(L(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class op extends Ei{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ci(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Ci(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Ci(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Go(v){return tb(v.auth,new op(v),v.bypassAuthState)}function $n(v){const{auth:p,user:m}=v;return L(m,p,"internal-error"),sn(m,new op(v),v.bypassAuthState)}function Pn(v){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,h.c)(function*(v){const{auth:p,user:m}=v;return L(m,p,"internal-error"),Ag(m,new op(v),v.bypassAuthState)})).apply(this,arguments)}class Wo{constructor(p,m,I,T,x=!1){this.auth=p,this.resolver=I,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.c)(function*(I,T){p.pendingPromise={resolve:I,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(x){p.reject(x)}});return function(I,T){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.c)(function*(){const{urlResponse:I,sessionId:T,postBody:x,tenantId:P,error:H,type:ce}=p;if(H)return void m.reject(H);const Ce={auth:m.auth,requestUri:I,sessionId:T,tenantId:P||void 0,postBody:x||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ce)(Ce))}catch(Me){m.reject(Me)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Go;case"linkViaPopup":case"linkViaRedirect":return Pn;case"reauthViaPopup":case"reauthViaRedirect":return $n;default:Ae(this.auth,"internal-error")}}resolve(p){Se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wg=new lo(2e3,1e4);function Rd(){return(Rd=(0,h.c)(function*(v,p,m){const I=gn(v);et(v,p,go);const T=_c(I,m);return new en(I,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function sp(){return(sp=(0,h.c)(function*(v,p,m){const I=(0,U.Yj)(v);et(I.auth,p,go);const T=_c(I.auth,m);return new en(I.auth,"reauthViaPopup",p,T,I).executeNotNull()})).apply(this,arguments)}function zl(){return(zl=(0,h.c)(function*(v,p,m){const I=(0,U.Yj)(v);et(I.auth,p,go);const T=_c(I.auth,m);return new en(I.auth,"linkViaPopup",p,T,I).executeNotNull()})).apply(this,arguments)}let en=(()=>{class v extends Wo{constructor(m,I,T,x,P){super(m,I,x,P),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.c)(function*(){const I=yield m.execute();return L(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,h.c)(function*(){Se(1===m.filter.length,"Popup operations only handle one event");const I=Nl();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(rt(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,T;this.pollId=null!==(T=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(rt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Wg.get())};m()}}return v.currentPopupAction=null,v})();const qg="pendingRedirect",_a=new Map;class Ib extends Wo{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.c)(function*(){let I=_a.get(m.auth._key());if(!I){try{const x=(yield function vc(v,p){return Ts.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(x)}catch(T){I=()=>Promise.reject(T)}_a.set(m.auth._key(),I)}return m.bypassAuthState||_a.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,h.c)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const T=yield I.auth._redirectUserForId(p.eventId);if(T)return I.user=T,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,h.c)(function*(){})()}cleanUp(){}}function Ts(){return(Ts=(0,h.c)(function*(v,p){const m=Vt(p),I=ap(v);if(!(yield I._isAvailable()))return!1;const T="true"===(yield I._get(m));return yield I._remove(m),T})).apply(this,arguments)}function Qe(v,p){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,h.c)(function*(v,p){return ap(v)._set(Vt(p),"true")})).apply(this,arguments)}function lr(v,p){_a.set(v._key(),p)}function ap(v){return xt(v._redirectPersistence)}function Vt(v){return dn(qg,v.config.apiKey,v.name)}function Md(v,p,m){return function cp(v,p,m){return Si.apply(this,arguments)}(v,p,m)}function Si(){return(Si=(0,h.c)(function*(v,p,m){const I=gn(v);et(v,p,go),yield I._initializationPromise;const T=_c(I,m);return yield Qe(T,I),T._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function yt(v,p,m){return function wb(v,p,m){return lp.apply(this,arguments)}(v,p,m)}function lp(){return(lp=(0,h.c)(function*(v,p,m){const I=(0,U.Yj)(v);et(I.auth,p,go),yield I.auth._initializationPromise;const T=_c(I.auth,m);yield Qe(T,I.auth);const x=yield Pd(I);return T._openRedirect(I.auth,p,"reauthViaRedirect",x)})).apply(this,arguments)}function Cb(v,p,m){return function Hw(v,p,m){return qo.apply(this,arguments)}(v,p,m)}function qo(){return(qo=(0,h.c)(function*(v,p,m){const I=(0,U.Yj)(v);et(I.auth,p,go),yield I.auth._initializationPromise;const T=_c(I.auth,m);yield hd(!1,I,p.providerId),yield Qe(T,I.auth);const x=yield Pd(I);return T._openRedirect(I.auth,p,"linkViaRedirect",x)})).apply(this,arguments)}function yc(){return(yc=(0,h.c)(function*(v,p){return yield gn(v)._initializationPromise,bc(v,p,!1)})).apply(this,arguments)}function bc(v,p){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,h.c)(function*(v,p,m=!1){const I=gn(v),T=_c(I,p),P=yield new Ib(I,T,m).execute();return P&&!m&&(delete P.user._redirectEventId,yield I._persistUserIfCurrent(P.user),yield I._setRedirectUser(null,p)),P})).apply(this,arguments)}function Pd(v){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.c)(function*(v){const p=Nl(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Gl{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function up(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return va(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!va(p)){const T=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(rt(this.auth,T))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eo(p))}saveEventToCache(p){this.cachedEventUids.add(Eo(p)),this.lastProcessedEventTime=Date.now()}}function Eo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function va({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function As(v){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,h.c)(function*(v,p={}){return oe(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Yg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wl=/^https?/;function Ic(){return(Ic=(0,h.c)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield As(v);for(const m of p)try{if(Kg(m))return}catch{}Ae(v,"unauthorized-domain")})).apply(this,arguments)}function Kg(v){const p=Gt(),{protocol:m,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const P=new URL(v);return""===P.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&P.hostname===I}if(!Wl.test(m))return!1;if(Yg.test(v))return I===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(I)}const Yt=new lo(3e4,6e4);function Gn(){const v=Mn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let wo=null;const Yo=new lo(5e3,15e3),dp="__/auth/iframe",hp="emulator/auth/iframe",Ko={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vr(v){const p=v.config;L(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?Z(p,hp):`https://${v.config.authDomain}/${dp}`,I={apiKey:p.apiKey,appName:v.name,v:_e.SDK_VERSION},T=kd.get(v.config.apiHost);T&&(I.eid=T);const x=v._getFrameworks();return x.length&&(I.fw=x.join(",")),`${m}?${(0,U.ik)(I).slice(1)}`}function fp(){return fp=(0,h.c)(function*(v){const p=yield function er(v){return wo=wo||function xi(v){return new Promise((p,m)=>{var I,T,x;function P(){Gn(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Gn(),m(rt(v,"network-request-failed"))},timeout:Yt.get()})}if(null!==(T=null===(I=Mn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(x=Mn().gapi)||void 0===x||!x.load){const H=ud("iframefcb");return Mn()[H]=()=>{gapi.load?P():m(rt(v,"network-request-failed"))},Rr(`${function Yy(){return Xa.gapiScript}()}?onload=${H}`).catch(ce=>m(ce))}P()}}).catch(p=>{throw wo=null,p})}(v),wo}(v),m=Mn().gapi;return L(m,v,"internal-error"),p.open({where:document.body,url:vr(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ko,dontclear:!0},I=>new Promise(function(){var T=(0,h.c)(function*(x,P){yield I.restyle({setHideOnLeave:!1});const H=rt(v,"network-request-failed"),ce=Mn().setTimeout(()=>{P(H)},Yo.get());function Ce(){Mn().clearTimeout(ce),x(I)}I.ping(Ce).then(Ce,()=>{P(H)})});return function(x,P){return T.apply(this,arguments)}}()))}),fp.apply(this,arguments)}const ya={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Do="__/auth/handler",Zg="emulator/auth/handler",xs=encodeURIComponent("fac");function Rs(v,p,m,I,T,x){return Xg.apply(this,arguments)}function Xg(){return(Xg=(0,h.c)(function*(v,p,m,I,T,x){L(v.config.authDomain,v,"auth-domain-config-required"),L(v.config.apiKey,v,"invalid-api-key");const P={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:_e.SDK_VERSION,eventId:T};if(p instanceof go){p.setDefaultLanguage(v.languageCode),P.providerId=p.providerId||"",(0,U.t7)(p.getCustomParameters())||(P.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Me,Fe]of Object.entries(x||{}))P[Me]=Fe}if(p instanceof oc){const Me=p.getScopes().filter(Fe=>""!==Fe);Me.length>0&&(P.scopes=Me.join(","))}v.tenantId&&(P.tid=v.tenantId);const H=P;for(const Me of Object.keys(H))void 0===H[Me]&&delete H[Me];const ce=yield v._getAppCheckToken(),Ce=ce?`#${xs}=${encodeURIComponent(ce)}`:"";return`${function To({config:v}){return v.emulator?Z(v,Zg):`https://${v.authDomain}/${Do}`}(v)}?${(0,U.ik)(H).slice(1)}${Ce}`})).apply(this,arguments)}const Ms="webStorageSupport",Ec=class Jg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yo,this._completeRedirectFn=bc,this._overrideRedirectResult=lr}_openPopup(p,m,I,T){var x=this;return(0,h.c)(function*(){var P;Se(null===(P=x.eventManagers[p._key()])||void 0===P?void 0:P.manager,"_initialize() not called before _openPopup()");const H=yield Rs(p,m,I,Gt(),T);return function Qo(v,p,m,I=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),P=Math.max((window.screen.availWidth-I)/2,0).toString();let H="";const ce=Object.assign(Object.assign({},ya),{width:I.toString(),height:T.toString(),top:x,left:P}),Ce=(0,U.Su)().toLowerCase();m&&(H=Ft(Ce)?"_blank":m),bs(Ce)&&(p=p||"http://localhost",ce.scrollbars="yes");const Me=Object.entries(ce).reduce((fn,[Hi,zi])=>`${fn}${Hi}=${zi},`,"");if(function It(v=(0,U.Su)()){var p;return st(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Ce)&&"_self"!==H)return function ut(v,p){const m=document.createElement("a");m.href=v,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",H),new Kl(null);const Fe=window.open(p||"",H,Me);L(Fe,v,"popup-blocked");try{Fe.focus()}catch{}return new Kl(Fe)}(p,H,Nl())})()}_openRedirect(p,m,I,T){var x=this;return(0,h.c)(function*(){return yield x._originValidation(p),function ma(v){Mn().location.href=v}(yield Rs(p,m,I,Gt(),T)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:T,promise:x}=this.eventManagers[m];return T?Promise.resolve(T):(Se(x,"If manager is not set, promise should be"),x)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,h.c)(function*(){const I=yield function Co(v){return fp.apply(this,arguments)}(p),T=new Gl(p);return I.register("authEvent",x=>(L(x?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:T},m.iframes[p._key()]=I,T})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Ms,{type:Ms},T=>{var x;const P=null===(x=T?.[0])||void 0===x?void 0:x[Ms];void 0!==P&&m(!!P),Ae(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ss(v){return Ic.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return bn()||Jn()||st()}};class Zo{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return te("unexpected MultiFactorSessionType")}}}class Xo extends Zo{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Xo(p)}_finalizeEnroll(p,m,I){return function hb(v,p){return oe(v,"POST","/v2/accounts/mfaEnrollment:finalize",pe(v,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function _b(v,p){return oe(v,"POST","/v2/accounts/mfaSignIn:finalize",pe(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ps=(()=>{class v{constructor(){}static assertion(m){return Xo._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var pp="@firebase/auth";class Zl{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.c)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{p(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ea(){return window}(0,U.sX)("authIdTokenMaxAge"),function Tw(v){Xa=v}({loadJS:v=>new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=T=>{const x=rt("internal-error");x.customData=T,m(x)},I.type="text/javascript",I.charset="UTF-8",function es(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function cn(v){(0,_e._registerComponent)(new ye.Yl("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),x=p.getProvider("app-check-internal"),{apiKey:P,authDomain:H}=I.options;L(P&&!P.includes(":"),"invalid-api-key",{appName:I.name});const ce={apiKey:P,authDomain:H,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qa(v)},Ce=new yf(I,T,x,ce);return function Vi(v,p){const m=p?.persistence||[],I=(Array.isArray(m)?m:[m]).map(xt);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,p?.popupRedirectResolver)}(Ce,m),Ce},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,_e._registerComponent)(new ye.Yl("auth-internal",p=>{const m=gn(p.getProvider("auth").getImmediate());return new Zl(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,_e.registerVersion)(pp,"1.6.0",function Jo(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(v)),(0,_e.registerVersion)(pp,"1.6.0","esm2017")}("Browser");function Nd(){return Nd=(0,h.c)(function*(v,p,m){var I;const{BuildInfo:T}=Ea();Se(p.sessionId,"AuthEvent did not contain a session ID");const x=yield function Sb(v){return Fd.apply(this,arguments)}(p.sessionId),P={};return st()?P.ibi=T.packageName:K()?P.apn=T.packageName:Ae(v,"operation-not-supported-in-this-environment"),T.displayName&&(P.appDisplayName=T.displayName),P.sessionId=x,Rs(v,m,p.type,void 0,null!==(I=p.eventId)&&void 0!==I?I:void 0,P)}),Nd.apply(this,arguments)}function Ac(){return(Ac=(0,h.c)(function*(v){const{BuildInfo:p}=Ea(),m={};st()?m.iosBundleId=p.packageName:K()?m.androidPackageName=p.packageName:Ae(v,"operation-not-supported-in-this-environment"),yield As(v,m)})).apply(this,arguments)}function Sc(){return(Sc=(0,h.c)(function*(v,p,m){const{cordova:I}=Ea();let T=()=>{};try{yield new Promise((x,P)=>{let H=null;function ce(){var Fe;x();const fn=null===(Fe=I.plugins.browsertab)||void 0===Fe?void 0:Fe.close;"function"==typeof fn&&fn(),"function"==typeof m?.close&&m.close()}function Ce(){H||(H=window.setTimeout(()=>{P(rt(v,"redirect-cancelled-by-user"))},2e3))}function Me(){"visible"===document?.visibilityState&&Ce()}p.addPassiveListener(ce),document.addEventListener("resume",Ce,!1),K()&&document.addEventListener("visibilitychange",Me,!1),T=()=>{p.removePassiveListener(ce),document.removeEventListener("resume",Ce,!1),document.removeEventListener("visibilitychange",Me,!1),H&&window.clearTimeout(H)}})}finally{T()}})).apply(this,arguments)}function Fd(){return(Fd=(0,h.c)(function*(v){const p=function xc(v){if(Se(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let I=0;I<v.length;I++)m[I]=v.charCodeAt(I);return m}(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class xb extends Gl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.c)(function*(){yield p.initPromise})()}}function r_(v){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,h.c)(function*(v){const p=yield Ld()._get(kn(v));return p&&(yield Ld()._remove(kn(v))),p})).apply(this,arguments)}function Mb(){const v=[];for(let m=0;m<20;m++){const I=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return v.join("")}function Ld(){return xt(Ds)}function kn(v){return dn("authEvent",v.config.apiKey,v.name)}function Os(v){if(!v?.includes("?"))return{};const[p,...m]=v.split("?");return(0,U.aw)(m.join("?"))}const Vd=class s_{constructor(){this._redirectPersistence=yo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bc,this._overrideRedirectResult=lr}_initialize(p){var m=this;return(0,h.c)(function*(){const I=p._key();let T=m.eventManagers.get(I);return T||(T=new xb(p),m.eventManagers.set(I,T),m.attachCallbackListeners(p,T)),T})()}_openPopup(p){Ae(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,I,T){var x=this;return(0,h.c)(function*(){!function n_(v){var p,m,I,T,x,P,H,ce,Ce,Me;const Fe=Ea();L("function"==typeof(null===(p=Fe?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),L(typeof(null===(m=Fe?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),L("function"==typeof(null===(x=null===(T=null===(I=Fe?.cordova)||void 0===I?void 0:I.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L("function"==typeof(null===(ce=null===(H=null===(P=Fe?.cordova)||void 0===P?void 0:P.plugins)||void 0===H?void 0:H.browsertab)||void 0===ce?void 0:ce.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L("function"==typeof(null===(Me=null===(Ce=Fe?.cordova)||void 0===Ce?void 0:Ce.InAppBrowser)||void 0===Me?void 0:Me.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const P=yield x._initialize(p);yield P.initialized(),P.resetRedirect(),function Eb(){_a.clear()}(),yield x._originValidation(p);const H=function Rb(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Mb(),postBody:null,tenantId:v.tenantId,error:rt(v,"no-auth-event")}}(p,I,T);yield function gp(v,p){return Ld()._set(kn(v),p)}(p,H);const ce=yield function ks(v,p,m){return Nd.apply(this,arguments)}(p,H,m),Ce=yield function ji(v){const{cordova:p}=Ea();return new Promise(m=>{p.plugins.browsertab.isAvailable(I=>{let T=null;I?p.plugins.browsertab.openUrl(v):T=p.InAppBrowser.open(v,function Pt(v=(0,U.Su)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(T)})})}(ce);return function ts(v,p,m){return Sc.apply(this,arguments)}(p,P,Ce)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Tc(v){return Ac.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:I,handleOpenURL:T,BuildInfo:x}=Ea(),P=setTimeout((0,h.c)(function*(){yield r_(p),m.onEvent(Pc())}),500),H=function(){var Me=(0,h.c)(function*(Fe){clearTimeout(P);const fn=yield r_(p);let Hi=null;fn&&Fe?.url&&(Hi=function Rc(v,p){var m,I;const T=function Mc(v){const p=Os(v),m=p.link?decodeURIComponent(p.link):void 0,I=Os(m).link,T=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Os(T).link||T||I||m||v}(p);if(T.includes("/__/auth/callback")){const x=Os(T),P=x.firebaseError?function i_(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,H=null===(I=null===(m=P?.code)||void 0===m?void 0:m.split("auth/"))||void 0===I?void 0:I[1],ce=H?rt(H):null;return ce?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:ce,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:T,postBody:null}}return null}(fn,Fe.url)),m.onEvent(Hi||Pc())});return function(fn){return Me.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,H);const ce=T,Ce=`${x.packageName.toLowerCase()}://`;Ea().handleOpenURL=function(){var Me=(0,h.c)(function*(Fe){if(Fe.toLowerCase().startsWith(Ce)&&H({url:Fe}),"function"==typeof ce)try{ce(Fe)}catch(fn){console.error(fn)}});return function(Fe){return Me.apply(this,arguments)}}()}};function Pc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:rt("no-auth-event")}}function Ns(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function jd(v=(0,U.Su)()){return!("file:"!==Ns()&&"ionic:"!==Ns()&&"capacitor:"!==Ns()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function eu(){try{const v=self.localStorage,p=Nl();if(v)return v.setItem(p,"1"),v.removeItem(p),!function d_(v=(0,U.Su)()){return function u_(){return(0,U.Uv)()&&11===document?.documentMode}()||function Jl(v=(0,U.Su)()){return/Edge\/\d+/.test(v)}(v)}()||(0,U.yy)()}catch{return vp()&&(0,U.yy)()}return!1}function vp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function kc(){return(function c_(){return"http:"===Ns()||"https:"===Ns()}()||(0,U.Cc)()||jd())&&!function l_(){return(0,U.AL)()||(0,U.yW)()}()&&eu()&&!vp()}function yp(){return jd()&&typeof document<"u"}function kt(){return(kt=(0,h.c)(function*(){return!!yp()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const tr={LOCAL:"local",NONE:"none",SESSION:"session"},yr=L,jr="persistence";function ns(v){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,h.c)(function*(v){yield v._initializationPromise;const p=wa(),m=dn(jr,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function wa(){var v;try{return(null===(v=function Ri(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Pb=L;class So{constructor(){this.browserResolver=xt(Ec),this.cordovaResolver=xt(Vd),this.underlyingResolver=null,this._redirectPersistence=yo,this._completeRedirectFn=bc,this._overrideRedirectResult=lr}_initialize(p){var m=this;return(0,h.c)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,I,T){var x=this;return(0,h.c)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(p,m,I,T)})()}_openRedirect(p,m,I,T){var x=this;return(0,h.c)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(p,m,I,T)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return yp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Pb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.c)(function*(){if(p.underlyingResolver)return;const m=yield function di(){return kt.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function h_(v){return v.unwrap()}function Ob(v){return Nb(v)}function Nb(v){const{_tokenResponse:p}=v instanceof U.kx?v.customData:v;if(!p)return null;if(!(v instanceof U.kx)&&"temporaryProof"in p&&"phoneNumber"in p)return Lt.credentialFromResult(v);const m=p.providerId;if(!m||m===Ue.PASSWORD)return null;let I;switch(m){case Ue.GOOGLE:I=yg;break;case Ue.FACEBOOK:I=Rf;break;case Ue.GITHUB:I=bg;break;case Ue.TWITTER:I=Xy;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:P,pendingToken:H,nonce:ce}=p;return x||P||T||H?H?m.startsWith("saml.")?Sl._create(m,H):Bi._fromParams({providerId:m,signInMethod:m,pendingToken:H,idToken:T,accessToken:x}):new sc(m).credential({idToken:T,accessToken:x,rawNonce:ce}):null}return v instanceof U.kx?I.credentialFromError(v):I.credentialFromResult(v)}function Pr(v,p){return p.catch(m=>{throw m instanceof U.kx&&function zw(v,p){var m;const I=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Oc(v,function Gf(v,p){var m;const I=(0,U.Yj)(v),T=p;return L(p.customData.operationType,I,"argument-error"),L(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),Dd._fromError(I,T)}(v,p));else if(I){const T=Nb(p),x=p;T&&(x.credential=T,x.tenantId=I.tenantId||void 0,x.email=I.email||void 0,x.phoneNumber=I.phoneNumber||void 0)}}(v,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:Ob(m),additionalUserInfo:Hf(m),user:Mi.getOrCreate(T)}})}function Ca(v,p){return bp.apply(this,arguments)}function bp(){return(bp=(0,h.c)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:I=>Pr(v,m.confirm(I))}})).apply(this,arguments)}class Oc{constructor(p,m){this.resolver=m,this.auth=function kb(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Pr(h_(this.auth),this.resolver.resolveSignIn(p))}}class Mi{constructor(p){this._delegate=p,this.multiFactor=function hc(v){const p=(0,U.Yj)(v);return Ad.has(p)||Ad.set(p,Ui._fromUser(p)),Ad.get(p)}(p)}static getOrCreate(p){return Mi.USER_MAP.has(p)||Mi.USER_MAP.set(p,new Mi(p)),Mi.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,h.c)(function*(){return Pr(m.auth,xl(m._delegate,p))})()}linkWithPhoneNumber(p,m){var I=this;return(0,h.c)(function*(){return Ca(I.auth,function zg(v,p,m){return gc.apply(this,arguments)}(I._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,h.c)(function*(){return Pr(m.auth,function Hl(v,p,m){return zl.apply(this,arguments)}(m._delegate,p,So))})()}linkWithRedirect(p){var m=this;return(0,h.c)(function*(){return yield ns(gn(m.auth)),Cb(m._delegate,p,So)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,h.c)(function*(){return Pr(m.auth,Sg(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Ca(this.auth,function jw(v,p,m){return Ur.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return Pr(this.auth,function $w(v,p,m){return sp.apply(this,arguments)}(this._delegate,p,So))}reauthenticateWithRedirect(p){var m=this;return(0,h.c)(function*(){return yield ns(gn(m.auth)),yt(m._delegate,p,So)})()}sendEmailVerification(p){return function an(v,p){return Uf.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,h.c)(function*(){return yield function Dg(v,p){return Tg.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function ab(v,p){return Di((0,U.Yj)(v),p,null)}(this._delegate,p)}updatePassword(p){return function ai(v,p){return Di((0,U.Yj)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function ip(v,p){return at.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Ow(v,p){return sb.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function vd(v,p,m){return Qi.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mi.USER_MAP=new WeakMap;const xo=L;let Gw=(()=>{class v{constructor(m,I){if(this.app=m,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;xo(T,"invalid-api-key",{appName:m.name}),xo(T,"invalid-api-key",{appName:m.name});const x=typeof window<"u"?So:void 0;this._delegate=I.initialize({options:{persistence:Nc(T,m.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(ft),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,I){!function Cf(v,p,m){const I=gn(v);L(I._canInitEmulator,I,"emulator-config-failed"),L(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const T=!!m?.disableWarnings,x=Df(p),{host:P,port:H}=function Rt(v){const p=Df(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(I);if(T){const x=T[1];return{host:x,port:qn(I.substr(x.length+1))}}{const[x,P]=I.split(":");return{host:x,port:qn(P)}}}(p);I.config.emulator={url:`${x}//${P}${null===H?"":`:${H}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:P,port:H,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function mr(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,I)}applyActionCode(m){return function Cs(v,p){return nt.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Lf(this._delegate,m)}confirmPasswordReset(m,I){return function Ff(v,p,m){return gd.apply(this,arguments)}(this._delegate,m,I)}createUserWithEmailAndPassword(m,I){var T=this;return(0,h.c)(function*(){return Pr(T._delegate,function Pw(v,p,m){return Vf.apply(this,arguments)}(T._delegate,m,I))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Pg(v,p){return _d.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function ib(v,p){const m=Ki.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}(0,m)}getRedirectResult(){var m=this;return(0,h.c)(function*(){xo(kc(),m._delegate,"operation-not-supported-in-this-environment");const I=yield function Db(v,p){return yc.apply(this,arguments)}(m._delegate,So);return I?Pr(m._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function _p(v,p){gn(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,I,T){const{next:x,error:P,complete:H}=Ip(m,I,T);return this._delegate.onAuthStateChanged(x,P,H)}onIdTokenChanged(m,I,T){const{next:x,error:P,complete:H}=Ip(m,I,T);return this._delegate.onIdTokenChanged(x,P,H)}sendSignInLinkToEmail(m,I){return function kw(v,p,m){return Bf.apply(this,arguments)}(this._delegate,m,I)}sendPasswordResetEmail(m,I){return function md(v,p,m){return lc.apply(this,arguments)}(this._delegate,m,I||void 0)}setPersistence(m){var I=this;return(0,h.c)(function*(){let T;switch(function tu(v,p){yr(Object.values(tr).includes(p),v,"invalid-persistence-type"),(0,U.AL)()?yr(p!==tr.SESSION,v,"unsupported-persistence-type"):(0,U.yW)()?yr(p===tr.NONE,v,"unsupported-persistence-type"):vp()?yr(p===tr.NONE||p===tr.LOCAL&&(0,U.yy)(),v,"unsupported-persistence-type"):yr(p===tr.NONE||eu(),v,"unsupported-persistence-type")}(I._delegate,m),m){case tr.SESSION:T=yo;break;case tr.LOCAL:T=(yield xt(Ai)._isAvailable())?Ai:Ds;break;case tr.NONE:T=Jt;break;default:return Ae("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Pr(this._delegate,function xw(v){return wg.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Pr(this._delegate,Zt(this._delegate,m))}signInWithCustomToken(m){return Pr(this._delegate,function xg(v,p){return Ml.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,I){return Pr(this._delegate,function kl(v,p,m){return Zt((0,U.Yj)(v),ii.credential(p,m)).catch(function(){var I=(0,h.c)(function*(T){throw"auth/password-does-not-meet-requirements"===T.code&&Nf(v),T});return function(T){return I.apply(this,arguments)}}())}(this._delegate,m,I))}signInWithEmailLink(m,I){return Pr(this._delegate,function ob(v,p,m){return Mg.apply(this,arguments)}(this._delegate,m,I))}signInWithPhoneNumber(m,I){return Ca(this._delegate,function np(v,p,m){return mc.apply(this,arguments)}(this._delegate,m,I))}signInWithPopup(m){var I=this;return(0,h.c)(function*(){return xo(kc(),I._delegate,"operation-not-supported-in-this-environment"),Pr(I._delegate,function ui(v,p,m){return Rd.apply(this,arguments)}(I._delegate,m,So))})()}signInWithRedirect(m){var I=this;return(0,h.c)(function*(){return xo(kc(),I._delegate,"operation-not-supported-in-this-environment"),yield ns(I._delegate),Md(I._delegate,m,So)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Mw(v,p){return Rg.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=tr,v})();function Ip(v,p,m){let I=v;"function"!=typeof v&&({next:I,error:p,complete:m}=v);const T=I;return{next:P=>T(P&&Mi.getOrCreate(P)),error:p,complete:m}}function Nc(v,p){const m=function rs(v,p){const m=wa();if(!m)return[];const I=dn(jr,v,p);switch(m.getItem(I)){case tr.NONE:return[Jt];case tr.LOCAL:return[Ai,yo];case tr.SESSION:return[yo];default:return[]}}(v,p);if(typeof self<"u"&&!m.includes(Ai)&&m.push(Ai),typeof window<"u")for(const I of[Ds,yo])m.includes(I)||m.push(I);return m.includes(Jt)||m.push(Jt),m}class $d{constructor(){this.providerId="phone",this._delegate=new Lt(h_(be.c.auth()))}static credential(p,m){return Lt.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}$d.PHONE_SIGN_IN_METHOD=Lt.PHONE_SIGN_IN_METHOD,$d.PROVIDER_ID=Lt.PROVIDER_ID;const $i=L;class Ep{constructor(p,m,I=be.c.app()){var T;$i(null===(T=I.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new jl(I.auth(),p,m),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ls(v){v.INTERNAL.registerComponent(new ye.Yl("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),I=p.getProvider("auth");return new Gw(m,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ii,FacebookAuthProvider:Rf,GithubAuthProvider:bg,GoogleAuthProvider:yg,OAuthProvider:sc,SAMLAuthProvider:Ig,PhoneAuthProvider:$d,PhoneMultiFactorGenerator:Ps,RecaptchaVerifier:Ep,TwitterAuthProvider:Xy,Auth:Gw,AuthCredential:Ei,Error:U.kx}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.5.2")}(be.c)},908:(rn,Ke,ee)=>{function h(U,_e,xe,qe,ye,St,Ue){try{var z=U[St](Ue),j=z.value}catch(se){return void xe(se)}z.done?_e(j):Promise.resolve(j).then(qe,ye)}function be(U){return function(){var _e=this,xe=arguments;return new Promise(function(qe,ye){var St=U.apply(_e,xe);function Ue(j){h(St,qe,ye,Ue,z,"next",j)}function z(j){h(St,qe,ye,Ue,z,"throw",j)}Ue(void 0)})}}ee.d(Ke,{c:()=>be})},316:(rn,Ke,ee)=>{function _e(Z,ne){var le={};for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&ne.indexOf(ae)<0&&(le[ae]=Z[ae]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(ae=Object.getOwnPropertySymbols(Z);pe<ae.length;pe++)ne.indexOf(ae[pe])<0&&Object.prototype.propertyIsEnumerable.call(Z,ae[pe])&&(le[ae[pe]]=Z[ae[pe]])}return le}function se(Z,ne,le,ae){return new(le||(le=Promise))(function(oe,tt){function jt(Wt){try{Je(ae.next(Wt))}catch(Vn){tt(Vn)}}function Xn(Wt){try{Je(ae.throw(Wt))}catch(Vn){tt(Vn)}}function Je(Wt){Wt.done?oe(Wt.value):function pe(oe){return oe instanceof le?oe:new le(function(tt){tt(oe)})}(Wt.value).then(jt,Xn)}Je((ae=ae.apply(Z,ne||[])).next())})}function ct(Z){return this instanceof ct?(this.v=Z,this):new ct(Z)}function Ae(Z,ne,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ae=le.apply(Z,ne||[]),oe=[];return pe={},tt("next"),tt("throw"),tt("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function tt(pn){ae[pn]&&(pe[pn]=function(Tr){return new Promise(function(pr,Zr){oe.push([pn,Tr,pr,Zr])>1||jt(pn,Tr)})})}function jt(pn,Tr){try{!function Xn(pn){pn.value instanceof ct?Promise.resolve(pn.value.v).then(Je,Wt):Vn(oe[0][2],pn)}(ae[pn](Tr))}catch(pr){Vn(oe[0][3],pr)}}function Je(pn){jt("next",pn)}function Wt(pn){jt("throw",pn)}function Vn(pn,Tr){pn(Tr),oe.shift(),oe.length&&jt(oe[0][0],oe[0][1])}}function Xt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ne=Z[Symbol.asyncIterator];return ne?ne.call(Z):(Z=function wt(Z){var ne="function"==typeof Symbol&&Symbol.iterator,le=ne&&Z[ne],ae=0;if(le)return le.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ae>=Z.length&&(Z=void 0),{value:Z&&Z[ae++],done:!Z}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),le={},ae("next"),ae("throw"),ae("return"),le[Symbol.asyncIterator]=function(){return this},le);function ae(oe){le[oe]=Z[oe]&&function(tt){return new Promise(function(jt,Xn){!function pe(oe,tt,jt,Xn){Promise.resolve(Xn).then(function(Je){oe({value:Je,done:jt})},tt)}(jt,Xn,(tt=Z[oe](tt)).done,tt.value)})}}}ee.d(Ke,{U1:()=>ct,kH:()=>se,mA:()=>Xt,o7:()=>Ae,sX:()=>_e}),"function"==typeof SuppressedError&&SuppressedError}},rn=>{rn(rn.s=532)}]);