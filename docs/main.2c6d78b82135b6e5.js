"use strict";(self.webpackChunkSpotyRFI=self.webpackChunkSpotyRFI||[]).push([[179],{58:(nn,Ke,Q)=>{Q.d(Ke,{BH:()=>Xe,G6:()=>Li,L:()=>Be,LL:()=>he,Pz:()=>Ce,Sg:()=>Gt,UG:()=>O,ZB:()=>te,ZR:()=>ae,aH:()=>ht,b$:()=>Sn,eu:()=>J,hl:()=>Y,jU:()=>Se,m9:()=>zu,ne:()=>Ko,pd:()=>Pt,r3:()=>pn,ru:()=>yt,tV:()=>G,uI:()=>be,vZ:()=>eo,w1:()=>Dr,xO:()=>Zo,xb:()=>Hr,z$:()=>qe,zd:()=>Fe});const ve=function(F){const k=[];let U=0;for(let ce=0;ce<F.length;ce++){let W=F.charCodeAt(ce);W<128?k[U++]=W:W<2048?(k[U++]=W>>6|192,k[U++]=63&W|128):55296==(64512&W)&&ce+1<F.length&&56320==(64512&F.charCodeAt(ce+1))?(W=65536+((1023&W)<<10)+(1023&F.charCodeAt(++ce)),k[U++]=W>>18|240,k[U++]=W>>12&63|128,k[U++]=W>>6&63|128,k[U++]=63&W|128):(k[U++]=W>>12|224,k[U++]=W>>6&63|128,k[U++]=63&W|128)}return k},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(F,k){if(!Array.isArray(F))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let W=0;W<F.length;W+=3){const Oe=F[W],ut=W+1<F.length,wt=ut?F[W+1]:0,ci=W+2<F.length,On=ci?F[W+2]:0;let Ge=(15&wt)<<2|On>>6,oo=63&On;ci||(oo=64,ut||(Ge=64)),ce.push(U[Oe>>2],U[(3&Oe)<<4|wt>>4],U[Ge],U[oo])}return ce.join("")},encodeString(F,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(F):this.encodeByteArray(ve(F),k)},decodeString(F,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(F):function(F){const k=[];let U=0,ce=0;for(;U<F.length;){const W=F[U++];if(W<128)k[ce++]=String.fromCharCode(W);else if(W>191&&W<224){const Oe=F[U++];k[ce++]=String.fromCharCode((31&W)<<6|63&Oe)}else if(W>239&&W<365){const ci=((7&W)<<18|(63&F[U++])<<12|(63&F[U++])<<6|63&F[U++])-65536;k[ce++]=String.fromCharCode(55296+(ci>>10)),k[ce++]=String.fromCharCode(56320+(1023&ci))}else{const Oe=F[U++],ut=F[U++];k[ce++]=String.fromCharCode((15&W)<<12|(63&Oe)<<6|63&ut)}}return k.join("")}(this.decodeStringToByteArray(F,k))},decodeStringToByteArray(F,k){this.init_();const U=k?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let W=0;W<F.length;){const Oe=U[F.charAt(W++)],wt=W<F.length?U[F.charAt(W)]:0;++W;const On=W<F.length?U[F.charAt(W)]:64;++W;const tt=W<F.length?U[F.charAt(W)]:64;if(++W,null==Oe||null==wt||null==On||null==tt)throw new lt;ce.push(Oe<<2|wt>>4),64!==On&&(ce.push(wt<<4&240|On>>2),64!==tt&&ce.push(On<<6&192|tt))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let F=0;F<this.ENCODED_VALS.length;F++)this.byteToCharMap_[F]=this.ENCODED_VALS.charAt(F),this.charToByteMap_[this.byteToCharMap_[F]]=F,this.byteToCharMapWebSafe_[F]=this.ENCODED_VALS_WEBSAFE.charAt(F),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[F]]=F,F>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(F)]=F,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(F)]=F)}}};class lt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Be=function(F){return function(F){const k=ve(F);return ye.encodeByteArray(k,!0)}(F).replace(/\./g,"")},G=function(F){try{return ye.decodeString(F,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};function te(F,k){if(!(k instanceof Object))return k;switch(k.constructor){case Date:return new Date(k.getTime());case Object:void 0===F&&(F={});break;case Array:F=[];break;default:return k}for(const U in k)!k.hasOwnProperty(U)||!ze(U)||(F[U]=te(F[U],k[U]));return F}function ze(F){return"__proto__"!==F}const nt=()=>{try{return function Pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const F=process.env.__FIREBASE_DEFAULTS__;return F?JSON.parse(F):void 0})()||(()=>{if(typeof document>"u")return;let F;try{F=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const k=F&&G(F[1]);return k&&JSON.parse(k)})()}catch(F){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${F}`)}},ht=()=>{var F;return null===(F=nt())||void 0===F?void 0:F.config},Ce=F=>{var k;return null===(k=nt())||void 0===k?void 0:k[`_${F}`]};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((k,U)=>{this.resolve=k,this.reject=U})}wrapCallback(k){return(U,ce)=>{U?this.reject(U):this.resolve(ce),"function"==typeof k&&(this.promise.catch(()=>{}),1===k.length?k(U):k(U,ce))}}}function Gt(F,k){if(F.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=k||"demo-project",W=F.iat||0,Oe=F.sub||F.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:W,exp:W+3600,auth_time:W,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},F);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(ut)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function be(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function O(){var F;const k=null===(F=nt())||void 0===F?void 0:F.forceEnvironment;if("node"===k)return!0;if("browser"===k)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Se(){return"object"==typeof self&&self.self===self}function yt(){const F="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof F&&void 0!==F.id}function Sn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Dr(){const F=qe();return F.indexOf("MSIE ")>=0||F.indexOf("Trident/")>=0}function Li(){return!O()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y(){try{return"object"==typeof indexedDB}catch{return!1}}function J(){return new Promise((F,k)=>{try{let U=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(ce);W.onsuccess=()=>{W.result.close(),U||self.indexedDB.deleteDatabase(ce),F(!0)},W.onupgradeneeded=()=>{U=!1},W.onerror=()=>{var Oe;k((null===(Oe=W.error)||void 0===Oe?void 0:Oe.message)||"")}}catch(U){k(U)}})}class ae extends Error{constructor(k,U,ce){super(U),this.code=k,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(k,U,ce){this.service=k,this.serviceName=U,this.errors=ce}create(k,...U){const ce=U[0]||{},W=`${this.service}/${k}`,Oe=this.errors[k],ut=Oe?function rt(F,k){return F.replace(Ut,(U,ce)=>{const W=k[ce];return null!=W?String(W):`<${ce}?>`})}(Oe,ce):"Error";return new ae(W,`${this.serviceName}: ${ut} (${W}).`,ce)}}const Ut=/\{\$([^}]+)}/g;function pn(F,k){return Object.prototype.hasOwnProperty.call(F,k)}function Hr(F){for(const k in F)if(Object.prototype.hasOwnProperty.call(F,k))return!1;return!0}function eo(F,k){if(F===k)return!0;const U=Object.keys(F),ce=Object.keys(k);for(const W of U){if(!ce.includes(W))return!1;const Oe=F[W],ut=k[W];if(qa(Oe)&&qa(ut)){if(!eo(Oe,ut))return!1}else if(Oe!==ut)return!1}for(const W of ce)if(!U.includes(W))return!1;return!0}function qa(F){return null!==F&&"object"==typeof F}function Zo(F){const k=[];for(const[U,ce]of Object.entries(F))Array.isArray(ce)?ce.forEach(W=>{k.push(encodeURIComponent(U)+"="+encodeURIComponent(W))}):k.push(encodeURIComponent(U)+"="+encodeURIComponent(ce));return k.length?"&"+k.join("&"):""}function Fe(F){const k={};return F.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[W,Oe]=ce.split("=");k[decodeURIComponent(W)]=decodeURIComponent(Oe)}}),k}function Pt(F){const k=F.indexOf("?");if(!k)return"";const U=F.indexOf("#",k);return F.substring(k,U>0?U:void 0)}function Ko(F,k){const U=new ai(F,k);return U.subscribe.bind(U)}class ai{constructor(k,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{k(this)}).catch(ce=>{this.error(ce)})}next(k){this.forEachObserver(U=>{U.next(k)})}error(k){this.forEachObserver(U=>{U.error(k)}),this.close(k)}complete(){this.forEachObserver(k=>{k.complete()}),this.close()}subscribe(k,U,ce){let W;if(void 0===k&&void 0===U&&void 0===ce)throw new Error("Missing Observer.");W=function xr(F,k){if("object"!=typeof F||null===F)return!1;for(const U of k)if(U in F&&"function"==typeof F[U])return!0;return!1}(k,["next","error","complete"])?k:{next:k,error:U,complete:ce},void 0===W.next&&(W.next=Nn),void 0===W.error&&(W.error=Nn),void 0===W.complete&&(W.complete=Nn);const Oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),Oe}unsubscribeOne(k){void 0===this.observers||void 0===this.observers[k]||(delete this.observers[k],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(k){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,k)}sendOne(k,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[k])try{U(this.observers[k])}catch(ce){typeof console<"u"&&console.error&&console.error(ce)}})}close(k){this.finalized||(this.finalized=!0,void 0!==k&&(this.finalError=k),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nn(){}function zu(F){return F&&F._delegate?F._delegate:F}},172:(nn,Ke,Q)=>{var h=Q(212);let de=null;function H(){return de}class Re{}const ye=new h.OlP("DocumentToken");let lt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:()=>(0,h.f3M)(Be),providedIn:"platform"})}return n})();const Mt=new h.OlP("Location Initialized");let Be=(()=>{class n extends lt{constructor(){super(),this._doc=(0,h.f3M)(ye),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return H().getBaseHref(this._doc)}onPopState(t){const r=H().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=H().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function G(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function B(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function te(n){return n&&"?"!==n[0]?"?"+n:n}let ze=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:()=>(0,h.f3M)(dt),providedIn:"root"})}return n})();const Pe=new h.OlP("appBaseHref");let dt=(()=>{class n extends ze{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return G(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+te(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,c){const u=this.prepareExternalUrl(s+te(c));this._platformLocation.pushState(t,r,u)}replaceState(t,r,s,c){const u=this.prepareExternalUrl(s+te(c));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(lt),h.LFG(Pe,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),St=(()=>{class n extends ze{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=G(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,c){let u=this.prepareExternalUrl(s+te(c));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,s,c){let u=this.prepareExternalUrl(s+te(c));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(lt),h.LFG(Pe,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})(),$e=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ht(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(B(An(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+te(r))}normalize(t){return n.stripTrailingSlash(function Qt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,An(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}static#e=this.normalizeQueryParams=te;static#t=this.joinWithSlash=G;static#n=this.stripTrailingSlash=B;static#r=this.\u0275fac=function(r){return new(r||n)(h.LFG(ze))};static#i=this.\u0275prov=h.Yz7({token:n,factory:()=>function nt(){return new $e((0,h.LFG)(ze))}(),providedIn:"root"})}return n})();function An(n){return n.replace(/\/index.html$/,"")}const Gu=/\s+/,gm=[];let Rt=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=gm,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Gu):gm}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Gu):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],s=t[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Gu).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.SBq),h.Y36(h.Qsj))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Jr{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,c,u)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Jr(s.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===c?void 0:c);else if(null!==c){const m=r.get(c);r.move(m,u),mm(m,s)}});for(let s=0,c=r.length;s<c;s++){const m=r.get(s).context;m.index=s,m.count=c,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{mm(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function mm(n,e){n.context.$implicit=e.item}let qu=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ly,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Lt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Lt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.s_b),h.Y36(h.Rgc))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Ly{constructor(){this.$implicit=null,this.ngIf=null}}function Lt(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let Ks=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({})}return n})();const Ys="browser";function Bi(n){return n===Ys}function Yu(n){return"server"===n}let qy=(()=>{class n{static#e=this.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>Bi((0,h.f3M)(h.Lbi))?new uf((0,h.f3M)(ye),window):new Zy})}return n})();class uf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function Wy(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const c=s.shadowRoot;if(c){const u=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(u)return u}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],s-c[1])}}class Zy{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class Cm extends Re{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Dm extends Cm{static makeCurrent(){!function ve(n){de||(de=n)}(new Dm)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Am(){return as=as||document.querySelector("base"),as?as.getAttribute("href"):null}();return null==t?null:function Sm(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){as=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Xo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let as=null,Rm=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const xm=new h.OlP("EventManagerPlugins");let cs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(c=>c.supports(t)),!r)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(xm),h.LFG(h.R0b))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();class yf{constructor(e){this._doc=e}}const ta="ng-app-id";let bf=(()=>{class n{constructor(t,r,s,c={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=c,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yu(c),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${ta}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const c=s.get(t);return c.usage+=r,c.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,c=s?.get(r);if(c?.parentNode===t)return s.delete(r),c.removeAttribute(ta),c;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=r,this.platformIsServer&&u.setAttribute(ta,this.appId),t.appendChild(u),u}}addStyleToHost(t,r){const s=this.getStyleElement(t,r),c=this.styleRef,u=c.get(r)?.elements;u?u.push(s):c.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ye),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const ls={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nd=/%COMP%/g,Xy=new h.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function Pm(n,e){return e.map(t=>t.replace(nd,n))}let nc=(()=>{class n{constructor(t,r,s,c,u,m,y,w=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=c,this.doc=u,this.platformId=m,this.ngZone=y,this.nonce=w,this.rendererByCompId=new Map,this.platformIsServer=Yu(m),this.defaultRenderer=new wf(t,u,y,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.ifc.ShadowDom&&(r={...r,encapsulation:h.ifc.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof tb?s.applyToHost(t):s instanceof Or&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let c=s.get(r.id);if(!c){const u=this.doc,m=this.ngZone,y=this.eventManager,w=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,S=this.platformIsServer;switch(r.encapsulation){case h.ifc.Emulated:c=new tb(y,w,r,this.appId,D,u,m,S);break;case h.ifc.ShadowDom:return new rd(y,w,t,r,u,m,this.nonce,S);default:c=new Or(y,w,r,D,u,m,S)}s.set(r.id,c)}return c}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(cs),h.LFG(bf),h.LFG(h.AFp),h.LFG(Xy),h.LFG(ye),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();class wf{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ls[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Tf(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Tf(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const c=ls[s];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=ls[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,s&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=H().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Tf(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class rd extends wf{constructor(e,t,r,s,c,u,m,y){super(e,c,u,y),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const w=Pm(s.id,s.styles);for(const D of w){const S=document.createElement("style");m&&S.setAttribute("nonce",m),S.textContent=D,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Or extends wf{constructor(e,t,r,s,c,u,m,y){super(e,c,u,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=y?Pm(y,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class tb extends Or{constructor(e,t,r,s,c,u,m,y){const w=s+"-"+r.id;super(e,t,r,c,u,m,y,w),this.contentAttr=function xo(n){return"_ngcontent-%COMP%".replace(nd,n)}(w),this.hostAttr=function eb(n){return"_nghost-%COMP%".replace(nd,n)}(w)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let id=(()=>{class n extends yf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ye))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const Mo=["alt","control","meta","shift"],ir={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cf={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Df=(()=>{class n extends yf{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const c=n.parseEventName(r),u=n.eventCallback(c.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>H().onAndCancel(t,c.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const c=n._normalizeKey(r.pop());let u="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),u="code."),Mo.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),u+=w+".")}),u+=c,0!=r.length||0===c.length)return null;const y={};return y.domEventName=s,y.fullKey=u,y}static matchEventFullKeyCode(t,r){let s=ir[t.key]||t.key,c="";return r.indexOf("code.")>-1&&(s=t.code,c="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Mo.forEach(u=>{u!==s&&(0,Cf[u])(t)&&(c+=u+".")}),c+=s,c===r)}static eventCallback(t,r,s){return c=>{n.matchEventFullKeyCode(c,t)&&s.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ye))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const na=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Ys},{provide:h.g9A,useValue:function Nm(){Dm.makeCurrent()},multi:!0},{provide:ye,useFactory:function ml(){return(0,h.RDi)(document),document},deps:[]}]),sd=new h.OlP(""),us=[{provide:h.rWj,useClass:class D0{addToWindow(e){h.dqk.getAngularTestability=(r,s=!0)=>{const c=e.findTestabilityInTree(r,s);if(null==c)throw new h.vHH(5103,!1);return c},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const s=h.dqk.getAllAngularTestabilities();let c=s.length,u=!1;const m=function(y){u=u||y,c--,0==c&&r(u)};s.forEach(y=>{y.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?H().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],at=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function od(){return new h.qLn},deps:[]},{provide:xm,useClass:id,multi:!0,deps:[ye,h.R0b,h.Lbi]},{provide:xm,useClass:Df,multi:!0,deps:[ye]},nc,bf,cs,{provide:h.FYo,useExisting:nc},{provide:class Qu{},useClass:Rm,deps:[]},[]];let Om=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(sd,12))};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({providers:[...at,...us],imports:[Ks,h.hGG]})}return n})(),Af=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ye))};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(r){let s=null;return s=r?new r:function ds(){return new Af((0,h.LFG)(ye))}(),s},providedIn:"root"})}return n})();typeof window<"u"&&window;let Lm=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(r){let s=null;return s=r?new(r||n):h.LFG(ld),s},providedIn:"root"})}return n})(),ld=(()=>{class n extends Lm{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new h.vHH(5200,!1);case h.q3G.URL:return(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new h.vHH(5201,!1);default:throw new h.vHH(5202,!1)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ye))};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(r){let s=null;return s=r?new r:function Vm(n){return new ld(n.get(ye))}(h.LFG(h.zs3)),s},providedIn:"root"})}return n})();var mn=Q(592),_n=Q(674),oa=Q(582);const yl=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function bl(n){return(0,_n.m)(n?.then)}var Mf=Q(850);function ud(n){return(0,_n.m)(n[Mf.L])}function Pf(n){return Symbol.asyncIterator&&(0,_n.m)(n?.[Symbol.asyncIterator])}function Il(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const kf=function Um(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function dd(n){return(0,_n.m)(n?.[kf])}function Bm(n){return(0,oa.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:s}=yield(0,oa.qq)(t.read());if(s)return yield(0,oa.qq)(void 0);yield yield(0,oa.qq)(r)}}finally{t.releaseLock()}})}function br(n){return(0,_n.m)(n?.getReader)}var ps=Q(894);function Nt(n){if(n instanceof mn.y)return n;if(null!=n){if(ud(n))return function ob(n){return new mn.y(e=>{const t=n[Mf.L]();if((0,_n.m)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(yl(n))return function sb(n){return new mn.y(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(bl(n))return function Nf(n){return new mn.y(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ps.h)})}(n);if(Pf(n))return El(n);if(dd(n))return function ab(n){return new mn.y(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(br(n))return function jm(n){return El(Bm(n))}(n)}throw Il(n)}function El(n){return new mn.y(e=>{(function oc(n,e){var t,r,s,c;return(0,oa.mG)(this,void 0,void 0,function*(){try{for(t=(0,oa.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(u){s={error:u}}finally{try{r&&!r.done&&(c=t.return)&&(yield c.call(t))}finally{if(s)throw s.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Fr(n,e,t,r=0,s=!1){const c=e.schedule(function(){t(),s?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(c),!s)return c}var Dn=Q(360),sn=Q(251);function xi(n,e=0){return(0,Dn.e)((t,r)=>{t.subscribe((0,sn.x)(r,s=>Fr(r,n,()=>r.next(s),e),()=>Fr(r,n,()=>r.complete(),e),s=>Fr(r,n,()=>r.error(s),e)))})}function ko(n,e=0){return(0,Dn.e)((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sa(n,e){if(!n)throw new Error("Iterable cannot be null");return new mn.y(t=>{Fr(t,e,()=>{const r=n[Symbol.asyncIterator]();Fr(t,e,()=>{r.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function an(n,e){return e?function cb(n,e){if(null!=n){if(ud(n))return function wl(n,e){return Nt(n).pipe(ko(e),xi(e))}(n,e);if(yl(n))return function gs(n,e){return new mn.y(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(bl(n))return function sc(n,e){return Nt(n).pipe(ko(e),xi(e))}(n,e);if(Pf(n))return sa(n,e);if(dd(n))return function Of(n,e){return new mn.y(t=>{let r;return Fr(t,e,()=>{r=n[kf](),Fr(t,e,()=>{let s,c;try{({value:s,done:c}=r.next())}catch(u){return void t.error(u)}c?t.complete():t.next(s)},0,!0)}),()=>(0,_n.m)(r?.return)&&r.return()})}(n,e);if(br(n))return function Tl(n,e){return sa(Bm(n),e)}(n,e)}throw Il(n)}(n,e):Nt(n)}function Ff(n){return n&&(0,_n.m)(n.schedule)}function Lf(n){return n[n.length-1]}function ac(n){return Ff(Lf(n))?n.pop():void 0}function We(...n){return an(n,ac(n))}var Lr=Q(619);const{isArray:Vf}=Array,{getPrototypeOf:aa,prototype:Uf,keys:ms}=Object;var po=Q(737),mt=Q(398);const{isArray:Mi}=Array;function ca(n){return(0,mt.U)(e=>function ub(n,e){return Mi(e)?n(...e):n(e)}(n,e))}function cc(...n){const e=ac(n),t=function lb(n){return(0,_n.m)(Lf(n))?n.pop():void 0}(n),{args:r,keys:s}=function k0(n){if(1===n.length){const e=n[0];if(Vf(e))return{args:e,keys:null};if(function Hm(n){return n&&"object"==typeof n&&aa(n)===Uf}(e)){const t=ms(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return an([],e);const c=new mn.y(function fd(n,e,t=po.y){return r=>{pd(e,()=>{const{length:s}=n,c=new Array(s);let u=s,m=s;for(let y=0;y<s;y++)pd(e,()=>{const w=an(n[y],e);let D=!1;w.subscribe((0,sn.x)(r,S=>{c[y]=S,D||(D=!0,m--),m||r.next(t(c.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,s?u=>function hd(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}(s,u):po.y));return t?c.pipe(ca(t)):c}function pd(n,e,t){n?Fr(t,n,e):e()}const Cl=(0,Q(306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Wn(n,e,t=1/0){return(0,_n.m)(e)?Wn((r,s)=>(0,mt.U)((c,u)=>e(r,c,s,u))(Nt(n(r,s))),t):("number"==typeof e&&(t=e),(0,Dn.e)((r,s)=>function $m(n,e,t,r,s,c,u,m){const y=[];let w=0,D=0,S=!1;const M=()=>{S&&!y.length&&!w&&e.complete()},V=ne=>w<r?ee(ne):y.push(ne),ee=ne=>{c&&e.next(ne),w++;let ue=!1;Nt(t(ne,D++)).subscribe((0,sn.x)(e,Ee=>{s?.(Ee),c?V(Ee):e.next(Ee)},()=>{ue=!0},void 0,()=>{if(ue)try{for(w--;y.length&&w<r;){const Ee=y.shift();u?Fr(e,u,()=>ee(Ee)):ee(Ee)}M()}catch(Ee){e.error(Ee)}}))};return n.subscribe((0,sn.x)(e,V,()=>{S=!0,M()})),()=>{m?.()}}(r,s,n,t)))}function la(n=1/0){return Wn(po.y,n)}function No(...n){return function db(){return la(1)}()(an(n,ac(n)))}function _s(n){return new mn.y(e=>{Nt(n()).subscribe(e)})}var jf=Q(407);function vs(n,e){const t=(0,_n.m)(n)?n:()=>n,r=s=>s.error(t());return new mn.y(e?s=>e.schedule(r,0,s):r)}const ti=new mn.y(n=>n.complete());var en=Q(394);function gd(){return(0,Dn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,sn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,c=t;t=null,s&&(!c||s===c)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class md extends mn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Dn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new en.w0;const t=this.getSubject();e.add(this.source.subscribe((0,sn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=en.w0.EMPTY)}return e}refCount(){return gd()(this)}}var cn=Q(645);function or(n,e){return(0,Dn.e)((t,r)=>{let s=null,c=0,u=!1;const m=()=>u&&!s&&r.complete();t.subscribe((0,sn.x)(r,y=>{s?.unsubscribe();let w=0;const D=c++;Nt(n(y,D)).subscribe(s=(0,sn.x)(r,S=>r.next(e?e(y,S,D,w++):S),()=>{s=null,m()}))},()=>{u=!0,m()}))})}function go(n){return n<=0?()=>ti:(0,Dn.e)((e,t)=>{let r=0;e.subscribe((0,sn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Pi(...n){const e=ac(n);return(0,Dn.e)((t,r)=>{(e?No(n,t,e):No(n,t)).subscribe(r)})}function Zn(n,e){return(0,Dn.e)((t,r)=>{let s=0;t.subscribe((0,sn.x)(r,c=>n.call(e,c,s++)&&r.next(c)))})}function Oo(n){return(0,Dn.e)((e,t)=>{let r=!1;e.subscribe((0,sn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function ua(n=_d){return(0,Dn.e)((e,t)=>{let r=!1;e.subscribe((0,sn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function _d(){return new Cl}function mo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zn((s,c)=>n(s,c,r)):po.y,go(1),t?Oo(e):ua(()=>new Cl))}function _o(n,e){return(0,_n.m)(e)?Wn(n,e,1):Wn(n,1)}function dr(n,e,t){const r=(0,_n.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Dn.e)((s,c)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let m=!0;s.subscribe((0,sn.x)(c,y=>{var w;null===(w=r.next)||void 0===w||w.call(r,y),c.next(y)},()=>{var y;m=!1,null===(y=r.complete)||void 0===y||y.call(r),c.complete()},y=>{var w;m=!1,null===(w=r.error)||void 0===w||w.call(r,y),c.error(y)},()=>{var y,w;m&&(null===(y=r.unsubscribe)||void 0===y||y.call(r)),null===(w=r.finalize)||void 0===w||w.call(r)}))}):po.y}function uc(n){return(0,Dn.e)((e,t)=>{let c,r=null,s=!1;r=e.subscribe((0,sn.x)(t,void 0,void 0,u=>{c=Nt(n(u,uc(n)(e))),r?(r.unsubscribe(),r=null,c.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,c.subscribe(t))})}function $f(n,e){return(0,Dn.e)(function Hf(n,e,t,r,s){return(c,u)=>{let m=t,y=e,w=0;c.subscribe((0,sn.x)(u,D=>{const S=w++;y=m?n(y,D,S):(m=!0,D),r&&u.next(y)},s&&(()=>{m&&u.next(y),u.complete()})))}}(n,e,arguments.length>=2,!0))}function zm(n){return n<=0?()=>ti:(0,Dn.e)((e,t)=>{let r=[];e.subscribe((0,sn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Gm(n){return(0,Dn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var dc=Q(420);function Fo(n){return(0,Dn.e)((e,t)=>{Nt(n).subscribe((0,sn.x)(t,()=>t.complete(),dc.Z)),!t.closed&&e.subscribe(t)})}const Dt="primary",vn=Symbol("RouteTitle");class hb{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function vo(n){return new hb(n)}function fb(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let c=0;c<r.length;c++){const u=r[c],m=n[c];if(u.startsWith(":"))s[u.substring(1)]=m;else if(u!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function zr(n,e){const t=n?Dl(n):void 0,r=e?Dl(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let c=0;c<t.length;c++)if(s=t[c],!Al(n[s],e[s]))return!1;return!0}function Dl(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Al(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,c)=>r[c]===s)}return n===e}function Hi(n){return function xf(n){return!!n&&(n instanceof mn.y||(0,_n.m)(n.lift)&&(0,_n.m)(n.subscribe))}(n)?n:(0,h.QGY)(n)?an(Promise.resolve(n)):We(n)}const zf={exact:function Vr(n,e,t){if(!Vo(n.segments,e.segments)||!hc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Vr(n.children[r],e.children[r],t))return!1;return!0},subset:Lo},pb={exact:function qm(n,e){return zr(n,e)},subset:function qf(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Al(n[t],e[t]))},ignored:()=>!0};function Gf(n,e,t){return zf[t.paths](n.root,e.root,t.matrixParams)&&pb[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Lo(n,e,t){return gb(n,e,e.segments,t)}function gb(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Vo(s,t)||e.hasChildren()||!hc(s,t,r))}if(n.segments.length===t.length){if(!Vo(n.segments,t)||!hc(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Lo(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Vo(n.segments,s)&&hc(n.segments,s,r)&&n.children[Dt])&&gb(n.children[Dt],e,c,r)}}function hc(n,e,t){return e.every((r,s)=>pb[t](n[s].parameters,r.parameters))}class fc{constructor(e=new Xt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vo(this.queryParams)),this._queryParamMap}toString(){return Zm.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ha(this)}}class Sl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=vo(this.parameters)),this._parameterMap}toString(){return bs(this)}}function Vo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let $i=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:()=>new da,providedIn:"root"})}return n})();class da{parse(e){const t=new Zf(e);return new fc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Rl(e.root,!0)}`,r=function gc(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(s=>`${vd(t)}=${vd(s)}`).join("&"):`${vd(t)}=${vd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Km(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Zm=new da;function ha(n){return n.segments.map(e=>bs(e)).join("/")}function Rl(n,e){if(!n.hasChildren())return ha(n);if(e){const t=n.children[Dt]?Rl(n.children[Dt],!1):"",r=[];return Object.entries(n.children).forEach(([s,c])=>{s!==Dt&&r.push(`${s}:${Rl(c,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Wm(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===Dt&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==Dt&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===Dt?[Rl(n.children[Dt],!1)]:[`${s}:${Rl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dt]?`${ha(n)}/${t[0]}`:`${ha(n)}/(${t.join("//")})`}}function xl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vd(n){return xl(n).replace(/%3B/gi,";")}function pc(n){return xl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fa(n){return decodeURIComponent(n)}function Ym(n){return fa(n.replace(/\+/g,"%20"))}function bs(n){return`${pc(n.path)}${function mb(n){return Object.entries(n).map(([e,t])=>`;${pc(e)}=${pc(t)}`).join("")}(n.parameters)}`}const pa=/^[^\/()?;#]+/;function Wf(n){const e=n.match(pa);return e?e[0]:""}const Qm=/^[^\/()?;=#]+/,_b=/^[^=?&#]+/,vb=/^[^&#]+/;class Zf{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Dt]=new Xt(e,t)),r}parseSegment(){const e=Wf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Sl(fa(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Jm(n){const e=n.match(Qm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Wf(this.remaining);s&&(r=s,this.capture(r))}e[fa(t)]=fa(r)}parseQueryParam(e){const t=function Xm(n){const e=n.match(_b);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function yb(n){const e=n.match(vb);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const s=Ym(t),c=Ym(r);if(e.hasOwnProperty(s)){let u=e[s];Array.isArray(u)||(u=[u],e[s]=u),u.push(c)}else e[s]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Wf(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new h.vHH(4010,!1);let c;r.indexOf(":")>-1?(c=r.slice(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Dt);const u=this.parseChildren();t[c]=1===Object.keys(u).length?u[Dt]:new Xt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function Is(n){return n.segments.length>0?new Xt([],{[Dt]:n}):n}function Kf(n){const e={};for(const[r,s]of Object.entries(n.children)){const c=Kf(s);if(r===Dt&&0===c.segments.length&&c.hasChildren())for(const[u,m]of Object.entries(c.children))e[u]=m;else(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function Yf(n){if(1===n.numberOfChildren&&n.children[Dt]){const e=n.children[Dt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function yo(n){return n instanceof fc}function Qf(n){let e;const s=Is(function t(c){const u={};for(const y of c.children){const w=t(y);u[y.outlet]=w}const m=new Xt(c.url,u);return c===n&&(e=m),m}(n.root));return e??s}function Ml(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return bd(s,s,s,t,r);const c=function Jf(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new e_(!0,0,n);let e=0,t=!1;const r=n.reduce((s,c,u)=>{if("object"==typeof c&&null!=c){if(c.outlets){const m={};return Object.entries(c.outlets).forEach(([y,w])=>{m[y]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(c.segmentPath)return[...s,c.segmentPath]}return"string"!=typeof c?[...s,c]:0===u?(c.split("/").forEach((m,y)=>{0==y&&"."===m||(0==y&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,c]},[]);return new e_(t,e,r)}(e);if(c.toRoot())return bd(s,s,new Xt([],{}),t,r);const u=function t_(n,e,t){if(n.isAbsolute)return new ws(e,!0,0);if(!t)return new ws(e,!1,NaN);if(null===t.parent)return new ws(t,!0,0);const r=Pl(n.commands[0])?0:1;return function ga(n,e,t){let r=n,s=e,c=t;for(;c>s;){if(c-=s,r=r.parent,!r)throw new h.vHH(4005,!1);s=r.segments.length}return new ws(r,!1,s-c)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(c,s,n),m=u.processChildren?Ts(u.segmentGroup,u.index,c.commands):kl(u.segmentGroup,u.index,c.commands);return bd(s,u.segmentGroup,m,t,r)}function Pl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Es(n){return"object"==typeof n&&null!=n&&n.outlets}function bd(n,e,t,r,s){let u,c={};r&&Object.entries(r).forEach(([y,w])=>{c[y]=Array.isArray(w)?w.map(D=>`${D}`):`${w}`}),u=n===e?t:mc(n,e,t);const m=Is(Kf(u));return new fc(m,c,s)}function mc(n,e,t){const r={};return Object.entries(n.children).forEach(([s,c])=>{r[s]=c===e?t:mc(c,e,t)}),new Xt(n.segments,r)}class e_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pl(r[0]))throw new h.vHH(4003,!1);const s=r.find(Es);if(s&&s!==r.at(-1))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ws{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function kl(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return Ts(n,e,t);const r=function Ib(n,e,t){let r=0,s=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return c;const u=n.segments[s],m=t[r];if(Es(m))break;const y=`${m}`,w=r<t.length-1?t[r+1]:null;if(s>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!ma(y,w,u))return c;r+=2}else{if(!ma(y,{},u))return c;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new Xt(n.segments.slice(0,r.pathIndex),{});return c.children[Dt]=new Xt(n.segments.slice(r.pathIndex),n.children),Ts(c,0,s)}return r.match&&0===s.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?Nl(n,e,t):r.match?Ts(n,0,s):Nl(n,e,t)}function Ts(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function bb(n){return Es(n[0])?n[0].outlets:{[Dt]:n}}(t),s={};if(Object.keys(r).some(c=>c!==Dt)&&n.children[Dt]&&1===n.numberOfChildren&&0===n.children[Dt].segments.length){const c=Ts(n.children[Dt],e,t);return new Xt(n.segments,c.children)}return Object.entries(r).forEach(([c,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=kl(n.children[c],e,u))}),Object.entries(n.children).forEach(([c,u])=>{void 0===r[c]&&(s[c]=u)}),new Xt(n.segments,s)}}function Nl(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const c=t[s];if(Es(c)){const y=Id(c.outlets);return new Xt(r,y)}if(0===s&&Pl(t[0])){r.push(new Sl(n.segments[e].path,Gr(t[0]))),s++;continue}const u=Es(c)?c.outlets[Dt]:`${c}`,m=s<t.length-1?t[s+1]:null;u&&m&&Pl(m)?(r.push(new Sl(u,Gr(m))),s+=2):(r.push(new Sl(u,{})),s++)}return new Xt(r,{})}function Id(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Nl(new Xt([],{}),0,r))}),e}function Gr(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ma(n,e,t){return n==t.path&&zr(e,t.parameters)}const Cs="imperative";class bo{constructor(e,t){this.id=e,this.url=t}}class Ed extends bo{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zi extends bo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gi extends bo{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _a extends bo{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class _c extends bo{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wd extends bo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Td extends bo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eb extends bo{constructor(e,t,r,s,c){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=c,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ol extends bo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n_ extends bo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class di{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fl{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xf{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wb{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ep{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class tp{}class Dd{constructor(e){this.url=e}}class hi{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new va,this.attachRef=null}}let va=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hi,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Uo{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=vc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ll(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Ll(e,this._root).map(t=>t.value)}}function vc(n,e){if(n===e.value)return e;for(const t of e.children){const r=vc(n,t);if(r)return r}return null}function Ll(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ll(n,t);if(r.length)return r.unshift(e),r}return[]}class ln{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function As(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ad extends Uo{constructor(e,t){super(e),this.snapshot=t,ya(this,e)}toString(){return this.snapshot.toString()}}function Sd(n){const e=function Bo(n){const c=new Rd([],{},{},"",{},Dt,n,null,{});return new np("",new ln(c,[]))}(n),t=new Lr.X([new Sl("",{})]),r=new Lr.X({}),s=new Lr.X({}),c=new Lr.X({}),u=new Lr.X(""),m=new hr(t,r,c,u,s,Dt,n,e.root);return m.snapshot=e.root,new Ad(new ln(m,[]),e)}class hr{constructor(e,t,r,s,c,u,m,y){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=c,this.outlet=u,this.component=m,this._futureSnapshot=y,this.title=this.dataSubject?.pipe((0,mt.U)(w=>w[vn]))??We(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>vo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>vo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vl(n,e,t="emptyOnly"){let r;const{routeConfig:s}=n;return r=null===e||"always"!==t&&""!==s?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...s?.data,...n._resolvedData}},s&&i_(s)&&(r.resolve[vn]=s.title),r}class Rd{get title(){return this.data?.[vn]}constructor(e,t,r,s,c,u,m,y,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=c,this.outlet=u,this.component=m,this.routeConfig=y,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class np extends Uo{constructor(e,t){super(t),this.url=e,ya(this,t)}toString(){return Tb(this._root)}}function ya(n,e){e.value._routerState=n,e.children.forEach(t=>ya(n,t))}function Tb(n){const e=n.children.length>0?` { ${n.children.map(Tb).join(", ")} } `:"";return`${n.value}${e}`}function rp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),zr(e.params,t.params)||n.paramsSubject.next(t.params),function ni(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),zr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ip(n,e){const t=zr(n.params,e.params)&&function F0(n,e){return Vo(n,e)&&n.every((t,r)=>zr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ip(n.parent,e.parent))}function i_(n){return"string"==typeof n.title||null===n.title}let v=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(va),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(g,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=t;const s=this.location,u=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,y=new f(t,m,s.injector);this.activated=s.createComponent(u,{index:s.length,injector:y,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]})}return n})();class f{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===hr?this.route:e===va?this.childContexts:this.parent.get(e,t)}}const g=new h.OlP("");let I=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=cc([r.queryParams,r.params,r.data]).pipe(or(([c,u,m],y)=>(m={...c,...u,...m},0===y?We(m):Promise.resolve(m)))).subscribe(c=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const u=(0,h.qFp)(r.component);if(u)for(const{templateName:m}of u.inputs)t.activatedComponentRef.setInput(m,c[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();function R(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function P(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return R(n,r,s);return R(n,r)})}(n,e,t);return new ln(r,s)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const u=c.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(m=>R(n,m)),u}}const r=function z(n){return new hr(new Lr.X(n.url),new Lr.X(n.params),new Lr.X(n.queryParams),new Lr.X(n.fragment),new Lr.X(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(c=>R(n,c));return new ln(r,s)}}const ie="ngNavigationCancelingError";function we(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=yo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Ne(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Ne(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ie]=!0,r.cancellationCode=e,t&&(r.url=t),r}function un(n){return n&&n[ie]}let fi=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(r,s){1&r&&h._UZ(0,"router-outlet")},dependencies:[v],encapsulation:2})}return n})();function sp(n){const e=n.children&&n.children.map(sp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Dt&&(t.component=fi),t}function ki(n){return n.outlet||Dt}function Pd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class dP{constructor(e,t,r,s,c){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=c}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=As(t);e.children.forEach(c=>{const u=c.value.outlet;this.deactivateRoutes(c,s[u],r),delete s[u]}),Object.values(s).forEach(c=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const s=e.value,c=t?t.value:null;if(s===c)if(s.component){const u=r.getContext(s.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,c=As(e);for(const u of Object.values(c))this.deactivateRouteAndItsChildren(u,s);if(r&&r.outlet){const u=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,c=As(e);for(const u of Object.values(c))this.deactivateRouteAndItsChildren(u,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=As(t);e.children.forEach(c=>{this.activateRoutes(c,s[c.value.outlet],r),this.forwardEvent(new ep(c.value.snapshot))}),e.children.length&&this.forwardEvent(new wb(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,c=t?t.value:null;if(rp(s),s===c)if(s.component){const u=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const u=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),u.children.onOutletReAttached(m.contexts),u.attachRef=m.componentRef,u.route=m.route.value,u.outlet&&u.outlet.attach(m.componentRef,m.route.value),rp(m.route.value),this.activateChildRoutes(e,null,u.children)}else{const m=Pd(s.snapshot);u.attachRef=null,u.route=s,u.injector=m,u.outlet&&u.outlet.activateWith(s,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class V0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ul{constructor(e,t){this.component=e,this.route=t}}function l_(n,e,t){const r=n._root;return kd(r,e?e._root:null,t,[r.value])}function Bl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function kd(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const c=As(e);return n.children.forEach(u=>{(function ap(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,u=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(u&&c.routeConfig===u.routeConfig){const y=function OS(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Vo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Vo(n.url,e.url)||!zr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ip(n,e)||!zr(n.queryParams,e.queryParams);default:return!ip(n,e)}}(u,c,c.routeConfig.runGuardsAndResolvers);y?s.canActivateChecks.push(new V0(r)):(c.data=u.data,c._resolvedData=u._resolvedData),kd(n,e,c.component?m?m.children:null:t,r,s),y&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new Ul(m.outlet.component,u))}else u&&Nd(e,m,s),s.canActivateChecks.push(new V0(r)),kd(n,null,c.component?m?m.children:null:t,r,s)})(u,c[u.value.outlet],t,r.concat([u.value]),s),delete c[u.value.outlet]}),Object.entries(c).forEach(([u,m])=>Nd(m,t.getContext(u),s)),s}function Nd(n,e,t){const r=As(n),s=n.value;Object.entries(r).forEach(([c,u])=>{Nd(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ul(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Od(n){return"function"==typeof n}function U0(n){return n instanceof Cl||"EmptyError"===n?.name}const f_=Symbol("INITIAL_VALUE");function Fd(){return or(n=>cc(n.map(e=>e.pipe(go(1),Pi(f_)))).pipe((0,mt.U)(e=>{for(const t of e)if(!0!==t){if(t===f_)return f_;if(!1===t||t instanceof fc)return t}return!0}),Zn(e=>e!==f_),go(1)))}function Mb(n){return(0,jf.z)(dr(e=>{if(yo(e))throw we(0,e)}),(0,mt.U)(e=>!0===e))}class Pb{constructor(e){this.segmentGroup=e||null}}class p_ extends Error{constructor(e){super(),this.urlTree=e}}function Ld(n){return vs(new Pb(n))}class zS{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return We(r);if(s.numberOfChildren>1||!s.children[Dt])return vs(new h.vHH(4e3,!1));s=s.children[Dt]}}applyRedirectCommands(e,t,r){const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new p_(s);return s}applyRedirectCreateUrlTree(e,t,r,s){const c=this.createSegmentGroup(e,t.root,r,s);return new fc(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,c])=>{if("string"==typeof c&&c.startsWith(":")){const m=c.substring(1);r[s]=t[m]}else r[s]=c}),r}createSegmentGroup(e,t,r,s){const c=this.createSegments(e,t.segments,r,s);let u={};return Object.entries(t.children).forEach(([m,y])=>{u[m]=this.createSegmentGroup(e,y,r,s)}),new Xt(c,u)}createSegments(e,t,r,s){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,s):this.findOrReturn(c,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new h.vHH(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const kb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Nb(n,e,t,r,s){const c=lp(n,e,t);return c.matched?(r=function xd(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function H0(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?We(s.map(u=>{const m=Bl(u,n);return Hi(function VS(n){return n&&Od(n.canMatch)}(m)?m.canMatch(e,t):(0,h.r_H)(n,()=>m(e,t)))})).pipe(Fd(),Mb()):We(!0)}(r,e,t).pipe((0,mt.U)(u=>!0===u?c:{...kb}))):We(c)}function lp(n,e,t){if("**"===e.path)return function GS(n){return{matched:!0,parameters:n.at(-1)?.parameters??{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...kb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||fb)(t,n,e);if(!s)return{...kb};const c={};Object.entries(s.posParams??{}).forEach(([m,y])=>{c[m]=y.path});const u=s.consumed.length>0?{...c,...s.consumed[s.consumed.length-1].parameters}:c;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:u,positionalParamSegments:s.posParams??{}}}function jl(n,e,t,r){return t.length>0&&function Ob(n,e,t){return t.some(r=>__(n,e,r)&&ki(r)!==Dt)}(n,t,r)?{segmentGroup:new Xt(e,z0(r,new Xt(t,n.children))),slicedSegments:[]}:0===t.length&&function m_(n,e,t){return t.some(r=>__(n,e,r))}(n,t,r)?{segmentGroup:new Xt(n.segments,g_(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xt(n.segments,n.children),slicedSegments:t}}function g_(n,e,t,r){const s={};for(const c of t)if(__(n,e,c)&&!r[ki(c)]){const u=new Xt([],{});s[ki(c)]=u}return{...r,...s}}function z0(n,e){const t={};t[Dt]=e;for(const r of n)if(""===r.path&&ki(r)!==Dt){const s=new Xt([],{});t[ki(r)]=s}return t}function __(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class WS{}class q0{constructor(e,t,r,s,c,u,m){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=c,this.paramsInheritanceStrategy=u,this.urlSerializer=m,this.applyRedirects=new zS(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new h.vHH(4002,`'${e.segmentGroup}'`)}recognize(){const e=jl(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe((0,mt.U)(t=>{const r=new Rd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,{}),s=new ln(r,t),c=new np("",s),u=function yd(n,e,t=null,r=null){return Ml(Qf(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,c.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(c._root,null),{state:c,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Dt).pipe(uc(r=>{if(r instanceof p_)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Pb?this.noMatchError(r):r}))}inheritParamsAndData(e,t){const r=e.value,s=Vl(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),e.children.forEach(c=>this.inheritParamsAndData(c,r))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0).pipe((0,mt.U)(c=>c instanceof ln?[c]:[]))}processChildren(e,t,r){const s=[];for(const c of Object.keys(r.children))"primary"===c?s.unshift(c):s.push(c);return an(s).pipe(_o(c=>{const u=r.children[c],m=function c_(n,e){const t=n.filter(r=>ki(r)===e);return t.push(...n.filter(r=>ki(r)!==e)),t}(t,c);return this.processSegmentGroup(e,m,u,c)}),$f((c,u)=>(c.push(...u),c)),Oo(null),function N0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zn((s,c)=>n(s,c,r)):po.y,zm(1),t?Oo(e):ua(()=>new Cl))}(),Wn(c=>{if(null===c)return Ld(r);const u=y_(c);return function up(n){n.sort((e,t)=>e.value.outlet===Dt?-1:t.value.outlet===Dt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),We(u)}))}processSegment(e,t,r,s,c,u){return an(t).pipe(_o(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,r,s,c,u).pipe(uc(y=>{if(y instanceof Pb)return We(null);throw y}))),mo(m=>!!m),uc(m=>{if(U0(m))return function G0(n,e,t){return 0===e.length&&!n.children[t]}(r,s,c)?We(new WS):Ld(r);throw m}))}processSegmentAgainstRoute(e,t,r,s,c,u,m){return function qS(n,e,t,r){return!!(ki(n)===r||r!==Dt&&__(e,t,n))&&lp(e,n,t).matched}(r,s,c,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,c,u):this.allowRedirects&&m?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,c,u):Ld(s):Ld(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,c,u){const{matched:m,consumedSegments:y,positionalParamSegments:w,remainingSegments:D}=lp(t,s,c);if(!m)return Ld(t);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const S=this.applyRedirects.applyRedirectCommands(y,s.redirectTo,w);return this.applyRedirects.lineralizeSegments(s,S).pipe(Wn(M=>this.processSegment(e,r,t,M.concat(D),u,!1)))}matchSegmentAgainstRoute(e,t,r,s,c){const u=Nb(t,r,s,e);return"**"===r.path&&(t.children={}),u.pipe(or(m=>m.matched?this.getChildConfig(e=r._injector??e,r,s).pipe(or(({routes:y})=>{const w=r._loadedInjector??e,{consumedSegments:D,remainingSegments:S,parameters:M}=m,V=new Rd(D,M,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function YS(n){return n.data||{}}(r),ki(r),r.component??r._loadedComponent??null,r,function Fb(n){return n.resolve||{}}(r)),{segmentGroup:ee,slicedSegments:ne}=jl(t,D,S,y);if(0===ne.length&&ee.hasChildren())return this.processChildren(w,y,ee).pipe((0,mt.U)(Ee=>null===Ee?null:new ln(V,Ee)));if(0===y.length&&0===ne.length)return We(new ln(V,[]));const ue=ki(r)===c;return this.processSegment(w,y,ee,ne,ue?Dt:c,!0).pipe((0,mt.U)(Ee=>new ln(V,Ee instanceof ln?[Ee]:[])))})):Ld(t)))}getChildConfig(e,t,r){return t.children?We({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?We({routes:t._loadedRoutes,injector:t._loadedInjector}):function cp(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?We(!0):We(s.map(u=>{const m=Bl(u,n);return Hi(function d_(n){return n&&Od(n.canLoad)}(m)?m.canLoad(e,t):(0,h.r_H)(n,()=>m(e,t)))})).pipe(Fd(),Mb())}(e,t,r).pipe(Wn(s=>s?this.configLoader.loadChildren(e,t).pipe(dr(c=>{t._loadedRoutes=c.routes,t._loadedInjector=c.injector})):function $0(n){return vs(Ne(!1,3))}())):We({routes:[],injector:e})}}function v_(n){const e=n.value.routeConfig;return e&&""===e.path}function y_(n){const e=[],t=new Set;for(const r of n){if(!v_(r)){e.push(r);continue}const s=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=y_(r.children);e.push(new ln(r.value,s))}return e.filter(r=>!t.has(r))}function Lb(n){const e=n.children.map(t=>Lb(t)).flat();return[n,...e]}function Vd(n){return or(e=>{const t=n(e);return t?an(t).pipe((0,mt.U)(()=>e)):We(e)})}let K0=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(c=>c.outlet===Dt);return r}getResolvedTitleForRoute(t){return t.data[vn]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:()=>(0,h.f3M)(Y0),providedIn:"root"})}return n})(),Y0=(()=>{class n extends K0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(Af))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $l=new h.OlP("",{providedIn:"root",factory:()=>({})}),zl=new h.OlP("ROUTES");let dp=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return We(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Hi(t.loadComponent()).pipe((0,mt.U)(Ud),dr(c=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=c}),Gm(()=>{this.componentLoaders.delete(t)})),s=new md(r,()=>new cn.x).pipe(gd());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return We({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const c=function Q0(n,e,t,r){return Hi(n.loadChildren()).pipe((0,mt.U)(Ud),Wn(s=>s instanceof h.YKP||Array.isArray(s)?We(s):an(e.compileModuleAsync(s))),(0,mt.U)(s=>{r&&r(n);let c,u,m=!1;return Array.isArray(s)?(u=s,!0):(c=s.create(t).injector,u=c.get(zl,[],{optional:!0,self:!0}).flat()),{routes:u.map(sp),injector:c}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Gm(()=>{this.childrenLoaders.delete(r)})),u=new md(c,()=>new cn.x).pipe(gd());return this.childrenLoaders.set(r,u),u}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ud(n){return function b_(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let I_=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:()=>(0,h.f3M)(Vb),providedIn:"root"})}return n})(),Vb=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hp=new h.OlP(""),Ub=new h.OlP("");function Bb(n,e,t){const r=n.get(Ub),s=n.get(ye);return n.get(h.R0b).runOutsideAngular(()=>{if(!s.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let c;const u=new Promise(w=>{c=w}),m=s.startViewTransition(()=>(c(),function E_(n){return new Promise(e=>{(0,h.T8G)(e,{injector:n})})}(n))),{onViewTransitionCreated:y}=r;return y&&(0,h.r_H)(n,()=>y({transition:m,from:e,to:t})),u})}let w_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new cn.x,this.transitionAbortSubject=new cn.x,this.configLoader=(0,h.f3M)(dp),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)($i),this.rootContexts=(0,h.f3M)(va),this.location=(0,h.f3M)($e),this.inputBindingEnabled=null!==(0,h.f3M)(g,{optional:!0}),this.titleStrategy=(0,h.f3M)(K0),this.options=(0,h.f3M)($l,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,h.f3M)(I_),this.createViewTransition=(0,h.f3M)(hp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>We(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new Fl(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new di(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,s){return this.transitions=new Lr.X({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Cs,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zn(c=>0!==c.id),(0,mt.U)(c=>({...c,extractedUrl:this.urlHandlingStrategy.extract(c.rawUrl)})),or(c=>{this.currentTransition=c;let u=!1,m=!1;return We(c).pipe(dr(y=>{this.currentNavigation={id:y.id,initialUrl:y.rawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),or(y=>{const w=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!w&&"reload"!==(y.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new _a(y.id,this.urlSerializer.serialize(y.rawUrl),S,0)),y.resolve(null),ti}if(this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return We(y).pipe(or(S=>{const M=this.transitions?.getValue();return this.events.next(new Ed(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),M!==this.transitions?.getValue()?ti:Promise.resolve(S)}),function W0(n,e,t,r,s,c){return Wn(u=>function ZS(n,e,t,r,s,c,u="emptyOnly"){return new q0(n,e,t,r,s,u,c).recognize()}(n,e,t,r,u.extractedUrl,s,c).pipe((0,mt.U)(({state:m,tree:y})=>({...u,targetSnapshot:m,urlAfterRedirects:y}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),dr(S=>{c.targetSnapshot=S.targetSnapshot,c.urlAfterRedirects=S.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects};const M=new wd(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(M)}));if(w&&this.urlHandlingStrategy.shouldProcessUrl(y.currentRawUrl)){const{id:S,extractedUrl:M,source:V,restoredState:ee,extras:ne}=y,ue=new Ed(S,this.urlSerializer.serialize(M),V,ee);this.events.next(ue);const Ee=Sd(this.rootComponentType).snapshot;return this.currentTransition=c={...y,targetSnapshot:Ee,urlAfterRedirects:M,extras:{...ne,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=M,We(c)}{const S="";return this.events.next(new _a(y.id,this.urlSerializer.serialize(y.extractedUrl),S,1)),y.resolve(null),ti}}),dr(y=>{const w=new Td(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(w)}),(0,mt.U)(y=>(this.currentTransition=c={...y,guards:l_(y.targetSnapshot,y.currentSnapshot,this.rootContexts)},c)),function B0(n,e){return Wn(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:c,canDeactivateChecks:u}}=t;return 0===u.length&&0===c.length?We({...t,guardsResult:!0}):function BS(n,e,t,r){return an(n).pipe(Wn(s=>function ri(n,e,t,r,s){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?We(c.map(m=>{const y=Pd(e)??s,w=Bl(m,y);return Hi(function LS(n){return n&&Od(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):(0,h.r_H)(y,()=>w(n,e,t,r))).pipe(mo())})).pipe(Fd()):We(!0)}(s.component,s.route,t,e,r)),mo(s=>!0!==s,!0))}(u,r,s,n).pipe(Wn(m=>m&&function u_(n){return"boolean"==typeof n}(m)?function jS(n,e,t,r){return an(e).pipe(_o(s=>No(function Rb(n,e){return null!==n&&e&&e(new Xf(n)),We(!0)}(s.route.parent,r),function Ni(n,e){return null!==n&&e&&e(new Cd(n)),We(!0)}(s.route,r),function xb(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(u=>function Ab(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>_s(()=>We(u.guards.map(y=>{const w=Pd(u.node)??t,D=Bl(y,w);return Hi(function FS(n){return n&&Od(n.canActivateChild)}(D)?D.canActivateChild(r,n):(0,h.r_H)(w,()=>D(r,n))).pipe(mo())})).pipe(Fd())));return We(c).pipe(Fd())}(n,s.path,t),function j0(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return We(!0);const s=r.map(c=>_s(()=>{const u=Pd(e)??t,m=Bl(c,u);return Hi(function h_(n){return n&&Od(n.canActivate)}(m)?m.canActivate(e,n):(0,h.r_H)(u,()=>m(e,n))).pipe(mo())}));return We(s).pipe(Fd())}(n,s.route,t))),mo(s=>!0!==s,!0))}(r,c,n,e):We(m)),(0,mt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,y=>this.events.next(y)),dr(y=>{if(c.guardsResult=y.guardsResult,yo(y.guardsResult))throw we(0,y.guardsResult);const w=new Eb(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.events.next(w)}),Zn(y=>!!y.guardsResult||(this.cancelNavigationTransition(y,"",3),!1)),Vd(y=>{if(y.guards.canActivateChecks.length)return We(y).pipe(dr(w=>{const D=new Ol(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(D)}),or(w=>{let D=!1;return We(w).pipe(function Hl(n,e){return Wn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return We(t);const c=new Set(s.map(y=>y.route)),u=new Set;for(const y of c)if(!u.has(y))for(const w of Lb(y))u.add(w);let m=0;return an(u).pipe(_o(y=>c.has(y)?function Z0(n,e,t,r){const s=n.routeConfig,c=n._resolve;return void 0!==s?.title&&!i_(s)&&(c[vn]=s.title),function QS(n,e,t,r){const s=Dl(n);if(0===s.length)return We({});const c={};return an(s).pipe(Wn(u=>function fP(n,e,t,r){const s=Pd(e)??r,c=Bl(n,s);return Hi(c.resolve?c.resolve(e,t):(0,h.r_H)(s,()=>c(e,t)))}(n[u],e,t,r).pipe(mo(),dr(m=>{c[u]=m}))),zm(1),function O0(n){return(0,mt.U)(()=>n)}(c),uc(u=>U0(u)?ti:vs(u)))}(c,n,e,r).pipe((0,mt.U)(u=>(n._resolvedData=u,n.data=Vl(n,n.parent,t).resolve,null)))}(y,r,n,e):(y.data=Vl(y,y.parent,n).resolve,We(void 0))),dr(()=>m++),zm(1),Wn(y=>m===u.size?We(t):ti))})}(this.paramsInheritanceStrategy,this.environmentInjector),dr({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(w,"",2)}}))}),dr(w=>{const D=new n_(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(D)}))}),Vd(y=>{const w=D=>{const S=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(D.routeConfig).pipe(dr(M=>{D.component=M}),(0,mt.U)(()=>{})));for(const M of D.children)S.push(...w(M));return S};return cc(w(y.targetSnapshot.root)).pipe(Oo(null),go(1))}),Vd(()=>this.afterPreactivation()),or(()=>{const{currentSnapshot:y,targetSnapshot:w}=c,D=this.createViewTransition?.(this.environmentInjector,y.root,w.root);return D?an(D).pipe((0,mt.U)(()=>c)):We(c)}),(0,mt.U)(y=>{const w=function C(n,e,t){const r=R(n,e._root,t?t._root:void 0);return new Ad(r,e)}(t.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return this.currentTransition=c={...y,targetRouterState:w},this.currentNavigation.targetRouterState=w,c}),dr(()=>{this.events.next(new tp)}),((n,e,t,r)=>(0,mt.U)(s=>(new dP(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,y=>this.events.next(y),this.inputBindingEnabled),go(1),dr({next:y=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zi(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects))),this.titleStrategy?.updateTitle(y.targetRouterState.snapshot),y.resolve(!0)},complete:()=>{u=!0}}),Fo(this.transitionAbortSubject.pipe(dr(y=>{throw y}))),Gm(()=>{u||m||this.cancelNavigationTransition(c,"",1),this.currentNavigation?.id===c.id&&(this.currentNavigation=null)}),uc(y=>{if(m=!0,un(y))this.events.next(new Gi(c.id,this.urlSerializer.serialize(c.extractedUrl),y.message,y.cancellationCode)),function je(n){return un(n)&&yo(n.url)}(y)?this.events.next(new Dd(y.url)):c.resolve(!1);else{this.events.next(new _c(c.id,this.urlSerializer.serialize(c.extractedUrl),y,c.targetSnapshot??void 0));try{c.resolve(t.errorHandler(y))}catch(w){c.reject(w)}}return ti}))}))}cancelNavigationTransition(t,r,s){const c=new Gi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(c),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J0(n){return n!==Cs}let JS=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:()=>(0,h.f3M)(eR),providedIn:"root"})}return n})();class XS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let eR=(()=>{class n extends XS{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jb=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:()=>(0,h.f3M)(X0),providedIn:"root"})}return n})(),X0=(()=>{class n extends jb{constructor(){super(...arguments),this.location=(0,h.f3M)($e),this.urlSerializer=(0,h.f3M)($i),this.options=(0,h.f3M)($l,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,h.f3M)(I_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Sd(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ed)this.stateMemento=this.createStateMemento();else if(t instanceof _a)this.rawUrlTree=r.initialUrl;else if(t instanceof wd){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else t instanceof tp?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Gi&&(3===t.code||2===t.code)?this.restoreHistory(r):t instanceof _c?this.restoreHistory(r,!0):t instanceof zi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",u)}else{const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",c)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-this.browserPageId;0!==c?this.location.historyGo(c):this.currentUrlTree===t.finalUrl&&0===c&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(yc||{});function T_(n,e){n.events.pipe(Zn(t=>t instanceof zi||t instanceof Gi||t instanceof _c||t instanceof _a),(0,mt.U)(t=>t instanceof zi||t instanceof _a?yc.COMPLETE:t instanceof Gi&&(0===t.code||1===t.code)?yc.REDIRECTING:yc.FAILED),Zn(t=>t!==yc.REDIRECTING),go(1)).subscribe(()=>{e()})}function Bd(n){throw n}const tR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Io=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,h.f3M)(h.c2e),this.stateManager=(0,h.f3M)(jb),this.options=(0,h.f3M)($l,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.I6F),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,h.f3M)(w_),this.urlSerializer=(0,h.f3M)($i),this.location=(0,h.f3M)($e),this.urlHandlingStrategy=(0,h.f3M)(I_),this._events=new cn.x,this.errorHandler=this.options.errorHandler||Bd,this.navigated=!1,this.routeReuseStrategy=(0,h.f3M)(JS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,h.f3M)(zl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,h.f3M)(g,{optional:!0}),this.eventsSubscription=new en.w0,this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const s=this.navigationTransitions.currentTransition,c=this.navigationTransitions.currentNavigation;if(null!==s&&null!==c)if(this.stateManager.handleRouterEvent(r,c),r instanceof Gi&&0!==r.code&&1!==r.code)this.navigated=!0;else if(r instanceof zi)this.navigated=!0;else if(r instanceof Dd){const u=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),m={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||J0(s.source)};this.scheduleNavigation(u,Cs,null,m,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function C_(n){return!(n instanceof tp||n instanceof Dd)})(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)}))}navigateToSyncWithBrowser(t,r,s){const c={replaceUrl:!0},u=s?.navigationId?s:null;if(s){const y={...s};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(c.state=y)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,u,c)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:s,queryParams:c,fragment:u,queryParamsHandling:m,preserveFragment:y}=r,w=y?this.currentUrlTree.fragment:u;let S,D=null;switch(m){case"merge":D={...this.currentUrlTree.queryParams,...c};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=c||null}null!==D&&(D=this.removeEmptyProps(D));try{S=Qf(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return Ml(S,t,D,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=yo(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(c,Cs,null,r)}navigate(t,r={skipLocationChange:!1}){return function rR(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let s;if(s=!0===r?{...tR}:!1===r?{...nR}:r,yo(t))return Gf(this.currentUrlTree,t,s);const c=this.parseUrl(t);return Gf(this.currentUrlTree,c,s)}removeEmptyProps(t){return Object.entries(t).reduce((r,[s,c])=>(null!=c&&(r[s]=c),r),{})}scheduleNavigation(t,r,s,c,u){if(this.disposed)return Promise.resolve(!1);let m,y,w;u?(m=u.resolve,y=u.reject,w=u.promise):w=new Promise((S,M)=>{m=S,y=M});const D=this.pendingTasks.add();return T_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:c,resolve:m,reject:y,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(S=>Promise.reject(S))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gl=(()=>{class n{constructor(t,r,s,c,u,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=c,this.el=u,this.locationStrategy=m,this.href=null,this.commands=null,this.onChanges=new cn.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const y=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===y||"area"===y,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof zi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,c,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||c||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,c=this.el.nativeElement;null!==r?s.setAttribute(c,t,r):s.removeAttribute(c,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(Io),h.Y36(hr),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ze))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){1&r&&h.NdJ("click",function(u){return s.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&r&&h.uIk("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",h.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",h.VuI],replaceUrl:["replaceUrl","replaceUrl",h.VuI],routerLink:"routerLink"},standalone:!0,features:[h.Xq5,h.TTD]})}return n})();class Hb{}let iR=(()=>{class n{constructor(t,r,s,c,u){this.router=t,this.injector=s,this.preloadingStrategy=c,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Zn(t=>t instanceof zi),_o(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const c of r){c.providers&&!c._injector&&(c._injector=(0,h.MMx)(c.providers,t,`Route: ${c.path}`));const u=c._injector??t,m=c._loadedInjector??u;(c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent)&&s.push(this.preloadConfig(u,c)),(c.children||c._loadedRoutes)&&s.push(this.processRoutes(m,c.children??c._loadedRoutes))}return an(s).pipe(la())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):We(null);const c=s.pipe(Wn(u=>null===u?We(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));return r.loadComponent&&!r._loadedComponent?an([c,this.loader.loadComponent(r)]).pipe(la()):c})}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(Io),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Hb),h.LFG(dp))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $b=new h.OlP("");let nT=(()=>{class n{constructor(t,r,s,c,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=c,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ed?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zi?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof _a&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof r_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new r_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){h.$Z()};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();function pi(n,e){return{\u0275kind:n,\u0275providers:e}}function rT(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Io),s=n.get(iT);1===n.get(D_)&&r.initialNavigation(),n.get(oT,null,h.XFs.Optional)?.setUpPreloading(),n.get($b,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const iT=new h.OlP("",{factory:()=>new cn.x}),D_=new h.OlP("",{providedIn:"root",factory:()=>1}),oT=new h.OlP("");function A_(n){return pi(0,[{provide:oT,useExisting:iR},{provide:Hb,useExisting:n}])}function aT(n){return pi(9,[{provide:hp,useValue:Bb},{provide:Ub,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const lR=new h.OlP("ROUTER_FORROOT_GUARD"),bP=[$e,{provide:$i,useClass:da},Io,va,{provide:hr,useFactory:function Ss(n){return n.routerState.root},deps:[Io]},dp,[]];let R_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[bP,[],{provide:zl,multi:!0,useValue:t},{provide:lR,useFactory:cT,deps:[[Io,new h.FiY,new h.tp0]]},{provide:$l,useValue:r||{}},r?.useHash?{provide:ze,useClass:St}:{provide:ze,useClass:dt},{provide:$b,useFactory:()=>{const n=(0,h.f3M)(qy),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)($l),r=(0,h.f3M)(w_),s=(0,h.f3M)($i);return t.scrollOffset&&n.setOffset(t.scrollOffset),new nT(s,r,n,e,t)}},r?.preloadingStrategy?A_(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?uR(r):[],r?.bindToComponentInputs?pi(8,[I,{provide:g,useExisting:I}]).\u0275providers:[],r?.enableViewTransitions?aT().\u0275providers:[],[{provide:lT,useFactory:rT},{provide:h.tb,multi:!0,useExisting:lT}]]}}static forChild(t){return{ngModule:n,providers:[{provide:zl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(lR,8))};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({})}return n})();function cT(n){return"guarded"}function uR(n){return["disabled"===n.initialNavigation?pi(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Io);return()=>{e.setUpLocationChangeListener()}}},{provide:D_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?pi(2,[{provide:D_,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Mt,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Io),c=e.get(iT);T_(s,()=>{r(!0)}),e.get(w_).afterPreactivation=()=>(r(!0),c.closed?We(void 0):c),s.initialNavigation()}))}}]).\u0275providers:[]]}const lT=new h.OlP("");let Ic=(()=>{class n{constructor(){this.title="app"}ngAfterViewInit(){$(function(){$('[data-toggle="popover"]').popover()})}openLink(t){window.open(t,"_blank")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:49,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["id","picture"],[1,"about-section","mt-5"],[1,"container"],[1,"row","img-wrap","mb-5","mb-lg-0"],[1,"col-12"],[1,"row"],[1,"mb-4","margin-lg-0","col-lg-6","order-lg-2"],[1,"effect"],["src","assets/lineesiciliane.png","alt","Mappa linee ferroviarie siciliane di RFI",1,"img-fluid"],[1,"col-lg-5","mr-auto","text-lg-right","align-self-center","order-lg-1"],[1,"mb-4"],["id","popover","data-bs-container","body","data-toggle","popover","data-bs-placement","bottom","data-bs-content","Non sono attualmente previsti i posti di movimento, solo STAZIONI e FERMATE. Non sono considerate le linee dismesse. Sono considerate le linee non attive IN FASE DI RIPRISTINO",1,"btn"],["href","https://normativaesercizio.rfi.it/NormativaEsercizio/detail.xhtml?doctype=FCL&compartimento=PA","target","_blank",1,"btn","btn-about"],[1,"material-symbols-outlined"],[1,"mb-4","margin-lg-0","col-lg-6"],["src","https://www.palermomania.it/public/news/image/images/metro.jpg","alt","Cartello passante ferroviario di Palermo",1,"img-fluid"],[1,"col-lg-5","ml-auto","align-self-center","order-lg-1"],["href","https://www.palermomania.it/","target","_blank",1,"btn","btn-about"],["src","https://www.stagniweb.it/altro/orizzf/636gioi0.jpg","alt","Locomotiva E636.010 in transito a Gioiosa Marea(ME)",1,"img-fluid"],["href","https://www.stagniweb.it/foto6.asp?File=orizzf&Inizio=68&Righe=10&InizioI=1&RigheI=150&Col=5&Titolo=0","target","_blank",1,"btn","btn-about"]],template:function(r,s){1&r&&(h._UZ(0,"link",0)(1,"div",1),h.TgZ(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"a",8),h._UZ(9,"img",9),h.qZA()(),h.TgZ(10,"div",10)(11,"h2"),h._uU(12,"Benvenuto su SpotiRFI! \u{1f684}\u{1f3b5}"),h.qZA(),h.TgZ(13,"p",11),h._uU(14," SpotiRFI \xe8 un viaggio unico attraverso la musica e le linee ferroviarie della Sicilia. Ogni stazione ferroviaria sulla mappa \xe8 associata a una canzone che porta il suo nome"),h.TgZ(15,"span",12),h._uU(16," * "),h.qZA(),h._uU(17,", creando un'esperienza musicale che riflette il viaggio attraverso la nostra bellissima regione. "),h.qZA(),h.TgZ(18,"a",13)(19,"span",14),h._uU(20," open_in_new "),h.qZA()()()()()(),h.TgZ(21,"div",4)(22,"div",5)(23,"div",6)(24,"div",15)(25,"a",8),h._UZ(26,"img",16),h.qZA()(),h.TgZ(27,"div",17)(28,"h2"),h._uU(29,"Come funziona? \u{1f9d0}"),h.qZA(),h.TgZ(30,"p",11),h._uU(31," Scegli una linea ferroviaria sulla mappa e inizia il tuo viaggio musicale. Ad ogni fermata, ti verr\xe0 presentata una canzone che porta il nome della stazione. Puoi ascoltare la canzone mentre leggi informazioni sulla stazione e sulla sua storia. "),h.qZA(),h.TgZ(32,"a",18)(33,"span",14),h._uU(34," open_in_new "),h.qZA()()()()()(),h.TgZ(35,"div",4)(36,"div",5)(37,"div",6)(38,"div",7)(39,"a",8),h._UZ(40,"img",19),h.qZA()(),h.TgZ(41,"div",10)(42,"h2"),h._uU(43,"Perch\xe9 SpotiRFI? \u{1f914}"),h.qZA(),h.TgZ(44,"p",11),h._uU(45," La musica e i viaggi sono due esperienze che possono portarci in luoghi che non abbiamo mai visitato. SpotiRFI combina queste due esperienze in un unico viaggio, permettendoti di esplorare la Sicilia attraverso le sue linee ferroviarie e la sua musica. "),h.qZA(),h.TgZ(46,"a",20)(47,"span",14),h._uU(48," open_in_new "),h.qZA()()()()()()()())},styles:['#popover[_ngcontent-%COMP%]{background-color:transparent;border:none;color:inherit;padding:0 0 0 5px}.about-section[_ngcontent-%COMP%]{margin:auto}#picture[_ngcontent-%COMP%]{background-image:url(https://external-preview.redd.it/in-sicilia-su-strade-colabrodo-e-treni-lumaca-aspettando-il-v0-YGYToK560tbwieHeMTYEEwdI9G0MiCoAnOe-kdmPdrU.jpg?auto=webp&s=0d0a9a6e7891b6fe511766e49a45ffb84cf2124f);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}.img-wrap[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{position:relative;margin-bottom:0;display:block}.img-wrap[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]:after{z-index:-1;content:"";position:absolute;inset:10px;background:#2b3035;transition:.3s all ease-in-out}.img-wrap[_ngcontent-%COMP%]:hover   .effect[_ngcontent-%COMP%]:after{right:-10px;bottom:-10px;position:absolute}.btn-about[_ngcontent-%COMP%]{color:#000!important;margin-right:5px;margin-left:5px;animation:skew 3s infinite;animation-direction:normal;animation-direction:alternate;padding:5px 17px}.row[_ngcontent-%COMP%]{color:#000;margin-bottom:4em}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}']})}return n})();var Hd=Q(534);(0,Hd.registerVersion)("firebase","10.7.1","app");class qb extends en.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const x_={setInterval(n,e,...t){const{delegate:r}=x_;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=x_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var gR=Q(39);class M_ extends qb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,c=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(c,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(c,this.id,t),this}requestAsyncId(e,t,r=0){return x_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&x_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(c){r=!0,s=c||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,gR.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const P_={now:()=>(P_.delegate||Date).now(),delegate:void 0};class k_{constructor(e,t=k_.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}k_.now=P_.now;class Wb extends k_{constructor(e,t=k_.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const hT=new class fp extends Wb{}(class mR extends M_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),N_=new Wb(M_),O_=N_,Zb=new h.GfV("ANGULARFIRE2_VERSION");class F_{constructor(){return((n,e)=>{const t=(0,Hd.getApps)(),r=[];return t.forEach(s=>{s.container.getProvider(n).instances.forEach(u=>{r.includes(u)||r.push(u)})}),r})(Kb)}}const Kb="app-check";function Rs(){}class pp{zone;delegate;constructor(e,t=hT){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const s=this.zone;return this.delegate.schedule(function(u){s.runGuarded(()=>{e.apply(this,[u])})},t,r)}}class zd{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rs,{},Rs,Rs)),t.pipe(dr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let L_=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new pp(Zone.current)),this.insideAngular=t.run(()=>new pp(Zone.current,N_)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(h.LFG(h.R0b))};static \u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qi(n){return function mT(n){return function(t){return(t=t.lift(new zd(n.ngZone))).pipe(ko(n.outsideAngular),xi(n.insideAngular))}}(function Ec(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var xs=Q(106);xs.Z.registerVersion("firebase","10.7.1","app-compat");const yR=["ngOnDestroy"];class gp{constructor(e){return e}}const qd=new h.OlP("angularfire2.app.options"),B_=new h.OlP("angularfire2.app.name");function j_(n,e,t){const s="object"==typeof t&&t||{};s.name=s.name||"string"==typeof t&&t||"[DEFAULT]";const u=xs.Z.apps.filter(m=>m&&m.name===s.name)[0]||e.runOutsideAngular(()=>xs.Z.initializeApp(n,s));try{if(JSON.stringify(n)!==JSON.stringify(u.options)){const m=!!module.hot;Yb("error",`${u.name} Firebase App already initialized with different options${m?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new gp(u)}const Yb=(n,...e)=>{(0,h.X6Q)()&&typeof console<"u"&&console[n](...e)},H_={provide:gp,useFactory:j_,deps:[qd,h.R0b,[new h.FiY,B_]]};let IR=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:qd,useValue:t},{provide:B_,useValue:r}]}}constructor(t){xs.Z.registerVersion("angularfire",Zb.full,"core"),xs.Z.registerVersion("angularfire",Zb.full,"app-compat"),xs.Z.registerVersion("angular",h.q4F.full,t.toString())}static \u0275fac=function(r){return new(r||n)(h.LFG(h.Lbi))};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({providers:[H_]})}return n})();function Qb(n,e,t,r,s){const[,c,u]=globalThis.\u0275AngularfireInstanceCache.find(m=>m[0]===n)||[];if(c)return function ER(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(s,u)||(wR("error",`${e} was already initialized on the ${t} Firebase App with different settings.${vT?" You may need to reload as Firebase is not HMR aware.":""}`),wR("warn",{is:s,was:u})),c;{const m=r();return globalThis.\u0275AngularfireInstanceCache.push([n,m,s]),m}}const vT=typeof module<"u"&&!!module.hot,wR=(n,...e)=>{(0,h.X6Q)()&&typeof console<"u"&&console[n](...e)};function wc(...n){const e=ac(n),t=function P0(n,e){return"number"==typeof Lf(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Nt(r[0]):la(t)(an(r,e)):ti}globalThis.\u0275AngularfireInstanceCache||=[],Q(230);class TR extends cn.x{constructor(e=1/0,t=1/0,r=P_){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:c,_windowTime:u}=this;t||(r.push(e),!s&&r.push(c.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,c=s.slice();for(let u=0;u<c.length&&!e.closed;u+=r?1:2)e.next(c[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,c=(s?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!s){const u=t.now();let m=0;for(let y=1;y<r.length&&r[y]<=u;y+=2)m=y;m&&r.splice(0,m+1)}}}var ql=Q(305);function Jb(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new ql.Hp({next:()=>{r.unsubscribe(),n()}});return Nt(e(...t)).subscribe(r)}function Xb(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,function mp(n={}){const{connector:e=(()=>new cn.x),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:s=!0}=n;return c=>{let u,m,y,w=0,D=!1,S=!1;const M=()=>{m?.unsubscribe(),m=void 0},V=()=>{M(),u=y=void 0,D=S=!1},ee=()=>{const ne=u;V(),ne?.unsubscribe()};return(0,Dn.e)((ne,ue)=>{w++,!S&&!D&&M();const Ee=y=y??e();ue.add(()=>{w--,0===w&&!S&&!D&&(m=Jb(ee,s))}),Ee.subscribe(ue),!u&&w>0&&(u=new ql.Hp({next:Ue=>Ee.next(Ue),error:Ue=>{S=!0,M(),m=Jb(V,t,Ue),Ee.error(Ue)},complete:()=>{D=!0,M(),m=Jb(V,r),Ee.complete()}}),Nt(ne).subscribe(u))})(c)}}({connector:()=>new TR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function yT(n,e){return(0,_n.m)(e)?or(()=>n,e):or(()=>n)}const bT=new h.OlP("angularfire2.auth.use-emulator"),$_=new h.OlP("angularfire2.auth.settings"),DR=new h.OlP("angularfire2.auth.tenant-id"),AR=new h.OlP("angularfire2.auth.langugage-code"),SR=new h.OlP("angularfire2.auth.use-device-language"),IT=new h.OlP("angularfire.auth.persistence"),ET=(n,e,t,r,s,c,u,m)=>Qb(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=s,c&&y.useDeviceLanguage(),u)for(const[w,D]of Object.entries(u))y.settings[w]=D;return m&&y.setPersistence(m),y},[t,r,s,c,u,m]);let RR=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,s,c,u,m,y,w,D,S,M,V){const ee=new cn.x,ne=We(void 0).pipe(xi(u.outsideAngular),or(()=>c.runOutsideAngular(()=>Promise.resolve().then(Q.bind(Q,230)))),(0,mt.U)(()=>j_(t,c,r)),(0,mt.U)(ue=>ET(ue,c,m,w,D,S,y,M)),Xb({bufferSize:1,refCount:!1}));if(Yu(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=We(null);else{ne.pipe(mo()).subscribe();const ue=ne.pipe(or(Ae=>Ae.getRedirectResult().then(Je=>Je,()=>null)),qi,Xb({bufferSize:1,refCount:!1})),Ee=ne.pipe(or(Ae=>new mn.y(Je=>({unsubscribe:c.runOutsideAngular(()=>Ae.onAuthStateChanged(vt=>Je.next(vt),vt=>Je.error(vt),()=>Je.complete()))})))),Ue=ne.pipe(or(Ae=>new mn.y(Je=>({unsubscribe:c.runOutsideAngular(()=>Ae.onIdTokenChanged(vt=>Je.next(vt),vt=>Je.error(vt),()=>Je.complete()))}))));this.authState=ue.pipe(yT(Ee),ko(u.outsideAngular),xi(u.insideAngular)),this.user=ue.pipe(yT(Ue),ko(u.outsideAngular),xi(u.insideAngular)),this.idToken=this.user.pipe(or(Ae=>Ae?an(Ae.getIdToken()):We(null))),this.idTokenResult=this.user.pipe(or(Ae=>Ae?an(Ae.getIdTokenResult()):We(null))),this.credential=wc(ue,ee,this.authState.pipe(Zn(Ae=>!Ae))).pipe((0,mt.U)(Ae=>Ae?.user?Ae:null),ko(u.outsideAngular),xi(u.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(s,c)=>t.runOutsideAngular(()=>{if(n[c])return r?.spy?.get&&r.spy.get(c,n[c]),n[c];if(yR.indexOf(c)>-1)return()=>{};const u=e.toPromise().then(m=>{const y=m?.[c];return"function"==typeof y?y.bind(m):y?.then?y.then(w=>t.run(()=>w)):t.run(()=>y)});return new Proxy(()=>{},{get:(m,y)=>u[y],apply:(m,y,w)=>u.then(D=>{const S=D?.(...w);return r?.spy?.apply&&r.spy.apply(c,w,S),S})})})}))(this,ne,c,{spy:{apply:(ue,Ee,Ue)=>{(ue.startsWith("signIn")||ue.startsWith("createUser"))&&Ue.then(Ae=>ee.next(Ae))}}})}static \u0275fac=function(r){return new(r||n)(h.LFG(qd),h.LFG(B_,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(L_),h.LFG(bT,8),h.LFG($_,8),h.LFG(DR,8),h.LFG(AR,8),h.LFG(SR,8),h.LFG(IT,8),h.LFG(F_,8))};static \u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function tI(){return(0,Dn.e)((n,e)=>{let t,r=!1;n.subscribe((0,sn.x)(e,s=>{const c=t;t=s,r&&e.next([c,s]),r=!0}))})}function nI(n,e=po.y){return n=n??rI,(0,Dn.e)((t,r)=>{let s,c=!0;t.subscribe((0,sn.x)(r,u=>{const m=e(u);(c||!n(s,m))&&(c=!1,s=m,r.next(u))}))})}function rI(n,e){return n===e}var ke,le=Q(861),wT=Q(537),Ms=Q(879),yn=Q(58),xR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Eo={},z_=z_||{},It=xR||self;function G_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var TT="closure_uid_"+(1e9*Math.random()>>>0),CT=0;function oI(n,e,t){return n.call.apply(n.bind,arguments)}function MR(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function fr(n,e,t){return(fr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oI:MR).apply(null,arguments)}function _p(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ir(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,c){for(var u=Array(arguments.length-2),m=2;m<arguments.length;m++)u[m-2]=arguments[m];return e.prototype[s].apply(r,u)}}function Tc(){this.s=this.s,this.o=this.o}Tc.prototype.s=!1,Tc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function iI(n){Object.prototype.hasOwnProperty.call(n,TT)&&n[TT]||(n[TT]=++CT)}(this)},Tc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const DT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function sI(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function AT(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(G_(r)){const s=n.length||0,c=r.length||0;n.length=s+c;for(let u=0;u<c;u++)n[s+u]=r[u]}else n.push(r)}}function ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ii.prototype.h=function(){this.defaultPrevented=!0};var ST=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};It.addEventListener("test",t,e),It.removeEventListener("test",t,e)}catch{}return n}();function Zd(n){return/^[\s\xa0]*$/.test(n)}function vp(){var n=It.navigator;return n&&(n=n.userAgent)?n:""}function jo(n){return-1!=vp().indexOf(n)}function RT(n){return RT[" "](n),n}RT[" "]=function(){};var lI,n,Cc=jo("Opera"),Wl=jo("Trident")||jo("MSIE"),yp=jo("Edge"),q_=yp||Wl,cI=jo("Gecko")&&!(-1!=vp().toLowerCase().indexOf("webkit")&&!jo("Edge"))&&!(jo("Trident")||jo("MSIE"))&&!jo("Edge"),kR=-1!=vp().toLowerCase().indexOf("webkit")&&!jo("Edge");function xT(){var n=It.document;return n?n.documentMode:void 0}e:{var uI="",W_=(n=vp(),cI?/rv:([^\);]+)(\)|;)/.exec(n):yp?/Edge\/([\d\.]+)/.exec(n):Wl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):kR?/WebKit\/(\S+)/.exec(n):Cc?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(W_&&(uI=W_?W_[1]:""),Wl){var MT=xT();if(null!=MT&&MT>parseFloat(uI)){lI=String(MT);break e}}lI=uI}var SP=It.document&&Wl&&(xT()||parseInt(lI,10))||void 0;function Kd(n,e){if(ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(cI){e:{try{RT(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:PT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kd.$.h.call(this)}}Ir(Kd,ii);var PT={2:"touch",3:"pen",4:"mouse"};Kd.prototype.h=function(){Kd.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Z_="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function kT(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Tt,this.fa=this.ia=!1}function bp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Dc(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function OT(n){const e={};for(const t in n)e[t]=n[t];return e}const Ip="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zl(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let c=0;c<Ip.length;c++)t=Ip[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Yd(n){this.src=n,this.g={},this.h=0}function Kl(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],s=DT(r,e);(c=0<=s)&&Array.prototype.splice.call(r,s,1),c&&(bp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function K_(n,e,t,r){for(var s=0;s<n.length;++s){var c=n[s];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==r)return s}return-1}Yd.prototype.add=function(n,e,t,r,s){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var u=K_(n,e,r,s);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new kT(e,this.src,c,!!r,s)).ia=t,n.push(e)),e};var Ep="closure_lm_"+(1e6*Math.random()|0),wp={};function Y_(n,e,t,r,s){if(r&&r.once)return FT(n,e,t,r,s);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Y_(n,e[c],t,r,s);return null}return t=vI(t),n&&n[Z_]?n.O(e,t,Wd(r)?!!r.capture:!!r,s):hI(n,e,t,!1,r,s)}function hI(n,e,t,r,s,c){if(!e)throw Error("Invalid event type");var u=Wd(s)?!!s.capture:!!s,m=mI(n);if(m||(n[Ep]=m=new Yd(n)),(t=m.add(e,t,r,u,c)).proxy)return t;if(r=function fI(){const e=OR;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ST||(s=u),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(gI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function FT(n,e,t,r,s){if(Array.isArray(e)){for(var c=0;c<e.length;c++)FT(n,e[c],t,r,s);return null}return t=vI(t),n&&n[Z_]?n.P(e,t,Wd(r)?!!r.capture:!!r,s):hI(n,e,t,!0,r,s)}function LT(n,e,t,r,s){if(Array.isArray(e))for(var c=0;c<e.length;c++)LT(n,e[c],t,r,s);else r=Wd(r)?!!r.capture:!!r,t=vI(t),n&&n[Z_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=K_(c=n.g[e],t,r,s))&&(bp(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=mI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=K_(e,t,r,s)),(t=-1<n?e[n]:null)&&pI(t))}function pI(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Z_])Kl(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(gI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mI(e))?(Kl(t,n),0==t.h&&(t.src=null,e[Ep]=null)):bp(n)}}}function gI(n){return n in wp?wp[n]:wp[n]="on"+n}function OR(n,e){if(n.fa)n=!0;else{e=new Kd(e,this);var t=n.listener,r=n.la||n.src;n.ia&&pI(n),n=t.call(r,e)}return n}function mI(n){return(n=n[Ep])instanceof Yd?n:null}var _I="__closure_events_fn_"+(1e9*Math.random()>>>0);function vI(n){return"function"==typeof n?n:(n[_I]||(n[_I]=function(e){return n.handleEvent(e)}),n[_I])}function Er(){Tc.call(this),this.i=new Yd(this),this.S=this,this.J=null}function Ur(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ii(e,n);else if(e instanceof ii)e.target=e.target||n;else{var s=e;Zl(e=new ii(r,n),s)}if(s=!0,t)for(var c=t.length-1;0<=c;c--){var u=e.g=t[c];s=Q_(u,r,!0,e)&&s}if(s=Q_(u=e.g=n,r,!0,e)&&s,s=Q_(u,r,!1,e)&&s,t)for(c=0;c<t.length;c++)s=Q_(u=e.g=t[c],r,!1,e)&&s}function Q_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,c=0;c<e.length;++c){var u=e[c];if(u&&!u.fa&&u.capture==t){var m=u.listener,y=u.la||u.src;u.ia&&Kl(n.i,u),s=!1!==m.call(y,r)&&s}}return s&&!r.defaultPrevented}Ir(Er,Tc),Er.prototype[Z_]=!0,Er.prototype.removeEventListener=function(n,e,t,r){LT(this,n,e,t,r)},Er.prototype.N=function(){if(Er.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)bp(t[r]);delete n.g[e],n.h--}}this.J=null},Er.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Er.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var yI=It.JSON.stringify;function FR(){var n=J_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var VR=new class Wi{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new bI,n=>n.reset());class bI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function VT(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function UR(n){It.setTimeout(()=>{throw n},0)}let Tp,Cp=!1,J_=new class LR{constructor(){this.h=this.g=null}add(e,t){const r=VR.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},UT=()=>{const n=It.Promise.resolve(void 0);Tp=()=>{n.then(BR)}};var BR=()=>{for(var n;n=FR();){try{n.h.call(n.g)}catch(t){UR(t)}var e=VR;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Cp=!1};function Qd(n,e){Er.call(this),this.h=n||1,this.g=e||It,this.j=fr(this.qb,this),this.l=Date.now()}function II(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function EI(n,e,t){if("function"==typeof n)t&&(n=fr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=fr(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function BT(n){n.g=EI(()=>{n.g=null,n.i&&(n.i=!1,BT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ir(Qd,Er),(ke=Qd.prototype).ga=!1,ke.T=null,ke.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ur(this,"tick"),this.ga&&(II(this),this.start()))}},ke.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ke.N=function(){Qd.$.N.call(this),II(this),delete this.g};class jR extends Tc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:BT(this)}N(){super.N(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dp(n){Tc.call(this),this.h=n,this.g={}}Ir(Dp,Tc);var Ho=[];function X_(n,e,t,r){Array.isArray(t)||(t&&(Ho[0]=t.toString()),t=Ho);for(var s=0;s<t.length;s++){var c=Y_(e,t[s],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function jT(n){Dc(n.g,function(e,t){this.g.hasOwnProperty(t)&&pI(e)},n),n.g={}}function Ap(){this.g=!0}function Yl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function wI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var c=s[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var u=1;u<s.length;u++)s[u]=""}}}return yI(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Dp.prototype.N=function(){Dp.$.N.call(this),jT(this)},Dp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ap.prototype.Ea=function(){this.g=!1},Ap.prototype.info=function(){};var Jd={},TI=null;function Sp(){return TI=TI||new Er}function CI(n){ii.call(this,Jd.Ta,n)}function Ac(n){const e=Sp();Ur(e,new CI(e))}function tv(n,e){ii.call(this,Jd.STAT_EVENT,n),this.stat=e}function jn(n){const e=Sp();Ur(e,new tv(e,n))}function $T(n,e){ii.call(this,Jd.Ua,n),this.size=e}function Ql(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Jd.Ta="serverreachability",Ir(CI,ii),Jd.STAT_EVENT="statevent",Ir(tv,ii),Jd.Ua="timingevent",Ir($T,ii);var nv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$R={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function DI(){}function AI(){}DI.prototype.h=null;var xp,Rp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function SI(){ii.call(this,"d")}function rv(){ii.call(this,"c")}function Mp(){}function ba(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Dp(this),this.P=GT,this.V=new Qd(n=q_?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Xd}function Xd(){this.i=null,this.g="",this.h=!1}Ir(SI,ii),Ir(rv,ii),Ir(Mp,DI),Mp.prototype.g=function(){return new XMLHttpRequest},Mp.prototype.i=function(){return{}},xp=new Mp;var GT=45e3,qT={},RI={};function xI(n,e,t){n.L=1,n.A=Vn($o(e)),n.u=t,n.S=!0,WT(n,null)}function WT(n,e){n.G=Date.now(),Pp(n),n.B=$o(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),FI(t.i,"t",r),n.o=0,t=n.l.J,n.h=new Xd,n.g=GI(n.l,t?e:null,!n.u),0<n.O&&(n.M=new jR(fr(n.Pa,n,n.g),n.O)),X_(n.U,n.g,"readystatechange",n.nb),e=n.I?OT(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Ac(),function HR(n,e,t,r,s,c){n.info(function(){if(n.g)if(c)for(var u="",m=c.split("&"),y=0;y<m.length;y++){var w=m[y].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");u=2<=S.length&&"type"==S[1]?u+(D+"=")+w+"&":u+(D+"=redacted&")}}else u=null;else u=c;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.v,n.B,n.m,n.W,n.u)}function zR(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function GR(n,e,t){let s,r=!0;for(;!n.J&&n.o<t.length;){if(s=iv(n,t),s==RI){4==e&&(n.s=4,jn(14),r=!1),Yl(n.j,n.m,null,"[Incomplete Response]");break}if(s==qT){n.s=4,jn(15),Yl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Yl(n.j,n.m,s,null),PI(n,s)}zR(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,jn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Pc(e),e.M=!0,jn(11))):(Yl(n.j,n.m,t,"[Invalid Chunked Response]"),Jl(n),kp(n))}function iv(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?RI:(t=Number(e.substring(t,r)),isNaN(t)?qT:(r+=1)+t>e.length?RI:(e=e.slice(r,r+t),n.o=r+t,e))}function Pp(n){n.Y=Date.now()+n.P,ZT(n,n.P)}function ZT(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=Ql(fr(n.lb,n),e)}function MI(n){n.C&&(It.clearTimeout(n.C),n.C=null)}function kp(n){0==n.l.H||n.J||su(n.l,n)}function Jl(n){MI(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,II(n.V),jT(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function PI(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Vp(t.i,n)))if(!n.K&&Vp(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Ia(t),xc(t)}Mc(t),jn(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Ql(fr(t.ib,t),6e3));if(1>=iC(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else To(t,11)}else if((n.K||t.g==n)&&Ia(t),!Zd(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let w=s[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.K=w[1],t.pa=w[2];const D=w[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const S=w[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const M=w[5];null!=M&&"number"==typeof M&&0<M&&(t.L=r=1.5*M,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const ee=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var c=r.i;c.g||-1==ee.indexOf("spdy")&&-1==ee.indexOf("quic")&&-1==ee.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(VI(c,c.h),c.h=null))}if(r.F){const ne=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.Da=ne,Ln(r.I,r.F,ne))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=zI(r,r.J?r.pa:null,r.Y),u.K){Up(r.i,u);var m=u,y=r.L;y&&m.setTimeout(y),m.C&&(MI(m),Pp(m)),r.g=u}else iu(r);0<t.j.length&&ks(t)}else"stop"!=w[0]&&"close"!=w[0]||To(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?To(t,7):wo(t):"noop"!=w[0]&&t.h&&t.h.Aa(w),t.A=0)}Ac()}catch{}}function KT(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(G_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function WR(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(G_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function qR(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(G_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,c=0;c<s;c++)e.call(void 0,r[c],t&&t[c],n)}(ke=ba.prototype).setTimeout=function(n){this.P=n},ke.nb=function(n){n=n.target;const e=this.M;e&&3==Ps(n)?e.l():this.Pa(n)},ke.Pa=function(n){try{if(n==this.g)e:{const D=Ps(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||q_||this.g&&(this.h.h||this.g.ja()||jI(this.g)))){this.J||4!=D||7==e||Ac(),MI(this);var t=this.g.da();this.ca=t;t:if(zR(this)){var r=jI(this.g);n="";var s=r.length,c=4==Ps(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Jl(this),kp(this);var u="";break t}this.h.i=new It.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==s-1});r.length=0,this.h.g+=n,this.o=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function HT(n,e,t,r,s,c,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+c+" "+u})}(this.j,this.v,this.B,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,y=this.g;if((m=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zd(m)){var w=m;break t}}w=null}if(!(t=w)){this.i=!1,this.s=3,jn(12),Jl(this),kp(this);break e}Yl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,PI(this,t)}this.S?(GR(this,D,u),q_&&this.i&&3==D&&(X_(this.U,this.V,"tick",this.mb),this.V.start())):(Yl(this.j,this.m,u,null),PI(this,u)),4==D&&Jl(this),this.i&&!this.J&&(4==D?su(this.l,this):(this.i=!1,Pp(this)))}else(function dC(n){const e={};n=(n.g&&2<=Ps(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Zd(n[r]))continue;var t=VT(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[s]||[];e[s]=c,c.push(t)}!function NT(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.s=3,jn(12)):(this.s=0,jn(13)),Jl(this),kp(this)}}}catch{}},ke.mb=function(){if(this.g){var n=Ps(this.g),e=this.g.ja();this.o<e.length&&(MI(this),GR(this,n,e),this.i&&4!=n&&Pp(this))}},ke.cancel=function(){this.J=!0,Jl(this)},ke.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function ev(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Ac(),jn(17)),Jl(this),this.s=2,kp(this)):ZT(this,this.Y-n)};var kI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof eu){this.h=n.h,Zi(this,n.j),this.s=n.s,this.g=n.g,Np(this,n.m),this.l=n.l;var e=n.i,t=new Fp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),YT(this,t),this.o=n.o}else n&&(e=String(n).match(kI))?(this.h=!1,Zi(this,e[1]||"",!0),this.s=Op(e[2]||""),this.g=Op(e[3]||"",!0),Np(this,e[4]),this.l=Op(e[5]||"",!0),YT(this,e[6]||"",!0),this.o=Op(e[7]||"")):(this.h=!1,this.i=new Fp(null,this.h))}function $o(n){return new eu(n)}function Zi(n,e,t){n.j=t?Op(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Np(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function YT(n,e,t){e instanceof Fp?(n.i=e,function tC(n,e){e&&!n.j&&(Sc(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Rc(this,r),FI(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=tu(e,XT)),n.i=new Fp(e,n.h))}function Ln(n,e,t){n.i.set(e,t)}function Vn(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Op(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function tu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ZR),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ZR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}eu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(tu(e,QT,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(tu(e,QT,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(tu(t,"/"==t.charAt(0)?JT:NI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",tu(t,eC)),n.join("")};var QT=/[#\/\?@]/g,NI=/[#\?:]/g,JT=/[#\?]/g,XT=/[#\?@]/g,eC=/#/g;function Fp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Sc(n){n.g||(n.g=new Map,n.h=0,n.i&&function Xl(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var c=n[t].substring(0,r);s=n[t].substring(r+1)}else c=n[t];e(c,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Rc(n,e){Sc(n),e=eh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function OI(n,e){return Sc(n),e=eh(n,e),n.g.has(e)}function FI(n,e,t){Rc(n,e),0<t.length&&(n.i=null,n.g.set(eh(n,e),sI(t)),n.h+=t.length)}function eh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}(ke=Fp.prototype).add=function(n,e){Sc(this),this.i=null,n=eh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ke.forEach=function(n,e){Sc(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ke.ta=function(){Sc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let c=0;c<s.length;c++)t.push(e[r])}return t},ke.Z=function(n){Sc(this);let e=[];if("string"==typeof n)OI(this,n)&&(e=e.concat(this.g.get(eh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ke.set=function(n,e){return Sc(this),this.i=null,OI(this,n=eh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ke.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const c=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var s=c;""!==u[r]&&(s+="="+encodeURIComponent(String(u[r]))),n.push(s)}}return this.i=n.join("&")};var nC=class{constructor(n,e){this.g=n,this.map=e}};function LI(n){this.l=n||Lp,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ka&&It.g.Ka()&&It.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Lp=10;function rC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function iC(n){return n.h?1:n.g?n.g.size:0}function Vp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function VI(n,e){n.g?n.g.add(e):n.h=e}function Up(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function UI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return sI(n.i)}LI.prototype.cancel=function(){if(this.i=UI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var oC=class{stringify(n){return It.JSON.stringify(n,void 0)}parse(n){return It.JSON.parse(n,void 0)}};function KR(){this.g=new oC}function YR(n,e,t){const r=t||"";try{KT(n,function(s,c){let u=s;Wd(s)&&(u=yI(s)),e.push(r+c+"="+encodeURIComponent(u))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function ov(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function jp(n){this.l=n.ec||null,this.j=n.ob||!1}function sv(n,e){Er.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=BI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ir(jp,DI),jp.prototype.g=function(){return new sv(this.l,this.j)},jp.prototype.i=function(n){return function(){return n}}({}),Ir(sv,Er);var BI=0;function sC(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Hp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$p(n)}function $p(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ke=sv.prototype).open=function(n,e){if(this.readyState!=BI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,$p(this)},ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||It).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hp(this)),this.readyState=BI},ke.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$p(this)),this.g&&(this.readyState=3,$p(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sC(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ke.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Hp(this):$p(this),3==this.readyState&&sC(this)}},ke.Za=function(n){this.g&&(this.response=this.responseText=n,Hp(this))},ke.Ya=function(n){this.g&&(this.response=n,Hp(this))},ke.ka=function(){this.g&&Hp(this)},ke.setRequestHeader=function(n,e){this.v.append(n,e)},ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(sv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var QR=It.JSON.parse;function Hn(n){Er.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=av,this.L=this.M=!1}Ir(Hn,Er);var av="",JR=/^https?$/i,cv=["POST","PUT"];function aC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,cC(n),lv(n)}function cC(n){n.F||(n.F=!0,Ur(n,"complete"),Ur(n,"error"))}function lC(n){if(n.h&&typeof z_<"u"&&(!n.C[1]||4!=Ps(n)||2!=n.da()))if(n.v&&4==Ps(n))EI(n.La,0,n);else if(Ur(n,"readystatechange"),4==Ps(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var s=String(n.I).match(kI)[1]||null;!s&&It.self&&It.self.location&&(s=It.self.location.protocol.slice(0,-1)),r=!JR.test(s?s.toLowerCase():"")}t=r}if(t)Ur(n,"complete"),Ur(n,"success");else{n.m=6;try{var c=2<Ps(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.da()+"]",cC(n)}}finally{lv(n)}}}function lv(n,e){if(n.g){uC(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ur(n,"ready");try{t.onreadystatechange=r}catch{}}}function uC(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Ps(n){return n.g?n.g.readyState:0}function jI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case av:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function hC(n){let e="";return Dc(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function fC(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=hC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function th(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function HI(n){this.Ga=0,this.j=[],this.l=new Ap,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=th("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=th("baseRetryDelayMs",5e3,n),this.hb=th("retryDelaySeedMs",1e4,n),this.eb=th("forwardChannelMaxRetries",2,n),this.xa=th("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new LI(n&&n.concurrentRequestLimit),this.Ja=new KR,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function wo(n){if(sr(n),3==n.H){var e=n.W++,t=$o(n.I);if(Ln(t,"SID",n.K),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),nu(n,t),(e=new ba(n,n.l,e)).L=2,e.A=Vn($o(t)),t=!1,It.navigator&&It.navigator.sendBeacon)try{t=It.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&It.Image&&((new Image).src=e.A,t=!0),t||(e.g=GI(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Pp(e)}$I(n)}function xc(n){n.g&&(Pc(n),n.g.cancel(),n.g=null)}function sr(n){xc(n),n.u&&(It.clearTimeout(n.u),n.u=null),Ia(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function ks(n){if(!rC(n.i)&&!n.m){n.m=!0;var e=n.Na;Tp||UT(),Cp||(Tp(),Cp=!0),J_.add(e,n),n.C=0}}function Ki(n,e){var t;t=e?e.m:n.W++;const r=$o(n.I);Ln(r,"SID",n.K),Ln(r,"RID",t),Ln(r,"AID",n.V),nu(n,r),n.o&&n.s&&fC(r,n.o,n.s),t=new ba(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=ru(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),VI(n.i,t),xI(t,r,e)}function nu(n,e){n.na&&Dc(n.na,function(t,r){Ln(e,r,t)}),n.h&&KT({},function(t,r){Ln(e,r,t)})}function ru(n,e,t){t=Math.min(n.j.length,t);var r=n.h?fr(n.h.Va,n.h,n):null;e:{var s=n.j;let c=-1;for(;;){const u=["count="+t];-1==c?0<t?(c=s[0].g,u.push("ofs="+c)):c=0:u.push("ofs="+c);let m=!0;for(let y=0;y<t;y++){let w=s[y].g;const D=s[y].map;if(w-=c,0>w)c=Math.max(0,s[y].g-100),m=!1;else try{YR(D,u,"req"+w+"_")}catch{r&&r(D)}}if(m){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function iu(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Tp||UT(),Cp||(Tp(),Cp=!0),J_.add(e,n),n.A=0}}function Mc(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Ql(fr(n.Ma,n),au(n,n.A)),n.A++,0))}function Pc(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function ou(n){n.g=new ba(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=$o(n.wa);Ln(e,"RID","rpc"),Ln(e,"SID",n.K),Ln(e,"AID",n.V),Ln(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ln(e,"TO",n.qa),Ln(e,"TYPE","xmlhttp"),nu(n,e),n.o&&n.s&&fC(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Vn($o(e)),t.u=null,t.S=!0,WT(t,n)}function Ia(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function su(n,e){var t=null;if(n.g==e){Ia(n),Pc(n),n.g=null;var r=2}else{if(!Vp(n.i,e))return;t=e.F,Up(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var s=n.C;Ur(r=Sp(),new $T(r,t)),ks(n)}else iu(n);else if(3==(s=e.s)||0==s&&0<e.ca||!(1==r&&function uv(n,e){return!(iC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Ql(fr(n.Na,n,e),au(n,n.C)),n.C++,0)))}(n,e)||2==r&&Mc(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:To(n,5);break;case 4:To(n,10);break;case 3:To(n,6);break;default:To(n,2)}}function au(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function To(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=fr(n.pb,n);t||(t=new eu("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Zi(t,"https"),Vn(t)),function Bp(n,e){const t=new Ap;if(It.Image){const r=new Image;r.onload=_p(ov,t,r,"TestLoadImage: loaded",!0,e),r.onerror=_p(ov,t,r,"TestLoadImage: error",!1,e),r.onabort=_p(ov,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=_p(ov,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else jn(2);n.H=0,n.h&&n.h.za(e),$I(n),sr(n)}function $I(n){if(n.H=0,n.ma=[],n.h){const e=UI(n.i);(0!=e.length||0!=n.j.length)&&(AT(n.ma,e),AT(n.ma,n.j),n.i.i.length=0,sI(n.j),n.j.length=0),n.h.ya()}}function zI(n,e,t){var r=t instanceof eu?$o(t):new eu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Np(r,r.m);else{var s=It.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var c=new eu(null);r&&Zi(c,r),e&&(c.g=e),s&&Np(c,s),t&&(c.l=t),r=c}return e=n.Da,(t=n.F)&&e&&Ln(r,t,e),Ln(r,"VER",n.ra),nu(n,r),r}function GI(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hn(n.Ha&&!n.va?new jp({ob:t}):n.va)).Oa(n.J),e}function qI(){}function zp(){if(Wl&&!(10<=Number(SP)))throw Error("Environmental error: no available transport.")}function Oi(n,e){Er.call(this),this.g=new HI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Zd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zd(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new cu(this)}function WI(n){SI.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ZI(){rv.call(this),this.status=1}function cu(n){this.g=n}function Br(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function KI(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=n.g[3],u=(e=n.g[0])+(c^(t=n.g[1])&((s=n.g[2])^c))+r[0]+3614090360&4294967295;u=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=(t=(s=(c=(e=t+(u<<7&4294967295|u>>>25))+((u=c+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=s+(t^c&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^s&(c^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(c^t&(s^c))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=c+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=s+(t^c&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^s&(c^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(c^t&(s^c))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=c+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=s+(t^c&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^s&(c^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(c^t&(s^c))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=c+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=s+(t^c&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^s&(c^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^c&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=s+(e^t&(c^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(s^c))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(s^c&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=s+(e^t&(c^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(s^c))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(s^c&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=s+(e^t&(c^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(s^c))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(s^c&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=s+(e^t&(c^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(s^c))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^s^c)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=s+(c^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(s^c^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^s^c)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=s+(c^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(s^c^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^s^c)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=s+(c^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(s^c^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^s^c)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=s+(c^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(s^c^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(s^(t|~c))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=s+(e^(c|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(c^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(s^(t|~c))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=s+(e^(c|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(c^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(s^(t|~c))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=s+(e^(c|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(c^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((c=(e=t+((u=e+(s^(t|~c))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((s=c+((u=s+(e^(c|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+c&4294967295}function dn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var c=0|n[s];r&&c==e||(t[s]=c,r=!1)}this.g=t}(ke=Hn.prototype).Oa=function(n){this.M=n},ke.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xp.g(),this.C=function zT(n){return n.h||(n.h=n.i())}(this.u?this.u:xp),this.g.onreadystatechange=fr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(c){return void aC(this,c)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())t.set(c,r.get(c))}r=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),s=It.FormData&&n instanceof It.FormData,!(0<=DT(cv,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,u]of t)this.g.setRequestHeader(c,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{uC(this),0<this.B&&((this.L=function XR(n){return Wl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fr(this.ua,this)):this.A=EI(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){aC(this,c)}},ke.ua=function(){typeof z_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ur(this,"timeout"),this.abort(8))},ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ur(this,"complete"),Ur(this,"abort"),lv(this))},ke.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lv(this,!0)),Hn.$.N.call(this)},ke.La=function(){this.s||(this.G||this.v||this.l?lC(this):this.kb())},ke.kb=function(){lC(this)},ke.isActive=function(){return!!this.g},ke.da=function(){try{return 2<Ps(this)?this.g.status:-1}catch{return-1}},ke.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ke.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),QR(e)}},ke.Ia=function(){return this.m},ke.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ke=HI.prototype).ra=8,ke.H=1,ke.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new ba(this,this.l,n);let c=this.s;if(this.U&&(c?(c=OT(c),Zl(c,this.U)):c=this.U),null!==this.o||this.O||(s.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ru(this,s,e),Ln(t=$o(this.I),"RID",n),Ln(t,"CVER",22),this.F&&Ln(t,"X-HTTP-Session-Id",this.F),nu(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(hC(c)))+"&"+e:this.o&&fC(t,this.o,c)),VI(this.i,s),this.bb&&Ln(t,"TYPE","init"),this.P?(Ln(t,"$req",e),Ln(t,"SID","null"),s.aa=!0,xI(s,t,null)):xI(s,t,e),this.H=2}}else 3==this.H&&(n?Ki(this,n):0==this.j.length||rC(this.i)||Ki(this))},ke.Ma=function(){if(this.u=null,ou(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Ql(fr(this.jb,this),n)}},ke.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,jn(10),xc(this),ou(this))},ke.ib=function(){null!=this.v&&(this.v=null,xc(this),Mc(this),jn(19))},ke.pb=function(n){n?(this.l.info("Successfully pinged google.com"),jn(2)):(this.l.info("Failed to ping google.com"),jn(1))},ke.isActive=function(){return!!this.h&&this.h.isActive(this)},(ke=qI.prototype).Ba=function(){},ke.Aa=function(){},ke.za=function(){},ke.ya=function(){},ke.isActive=function(){return!0},ke.Va=function(){},zp.prototype.g=function(n,e){return new Oi(n,e)},Ir(Oi,Er),Oi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;jn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=zI(n,null,n.Y),ks(n)},Oi.prototype.close=function(){wo(this.g)},Oi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=yI(n),n=t);e.j.push(new nC(e.fb++,n)),3==e.H&&ks(e)},Oi.prototype.N=function(){this.g.h=null,delete this.j,wo(this.g),delete this.g,Oi.$.N.call(this)},Ir(WI,SI),Ir(ZI,rv),Ir(cu,qI),cu.prototype.Ba=function(){Ur(this.g,"a")},cu.prototype.Aa=function(n){Ur(this.g,new WI(n))},cu.prototype.za=function(n){Ur(this.g,new ZI)},cu.prototype.ya=function(){Ur(this.g,"b")},Ir(Br,function dv(){this.blockSize=-1}),Br.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Br.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,c=0;c<e;){if(0==s)for(;c<=t;)KI(this,n,c),c+=this.blockSize;if("string"==typeof n){for(;c<e;)if(r[s++]=n.charCodeAt(c++),s==this.blockSize){KI(this,r),s=0;break}}else for(;c<e;)if(r[s++]=n[c++],s==this.blockSize){KI(this,r),s=0;break}}this.h=s,this.i+=e},Br.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var YI={};function Ea(n){return-128<=n&&128>n?function aI(n,e){var t=YI;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new dn([0|e],0>e?-1:0)}):new dn([0|n],0>n?-1:0)}function Co(n){if(isNaN(n)||!isFinite(n))return qp;if(0>n)return qr(Co(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Gp;return new dn(e,0)}var Gp=4294967296,qp=Ea(0),gC=Ea(1),mC=Ea(16777216);function wa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Yi(n){return-1==n.h}function qr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new dn(t,~n.h).add(gC)}function Kn(n,e){return n.add(qr(e))}function Wp(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Zp(n,e){this.g=n,this.h=e}function hv(n,e){if(wa(e))throw Error("division by zero");if(wa(n))return new Zp(qp,qp);if(Yi(n))return e=hv(qr(n),e),new Zp(qr(e.g),qr(e.h));if(Yi(e))return e=hv(n,qr(e)),new Zp(qr(e.g),e.h);if(30<n.g.length){if(Yi(n)||Yi(e))throw Error("slowDivide_ only works with positive integers.");for(var t=gC,r=e;0>=r.X(n);)t=QI(t),r=QI(r);var s=nh(t,1),c=nh(r,1);for(r=nh(r,2),t=nh(t,2);!wa(r);){var u=c.add(r);0>=u.X(n)&&(s=s.add(t),c=u),r=nh(r,1),t=nh(t,1)}return e=Kn(n,s.R(e)),new Zp(s,e)}for(s=qp;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(c=Co(t)).R(e);Yi(u)||0<u.X(n);)u=(c=Co(t-=r)).R(e);wa(c)&&(c=gC),s=s.add(c),n=Kn(n,u)}return new Zp(s,n)}function QI(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new dn(t,n.h)}function nh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],c=0;c<r;c++)s[c]=0<e?n.D(c+t)>>>e|n.D(c+t+1)<<32-e:n.D(c+t);return new dn(s,n.h)}(ke=dn.prototype).ea=function(){if(Yi(this))return-qr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Gp+r)*e,e*=Gp}return n},ke.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(wa(this))return"0";if(Yi(this))return"-"+qr(this).toString(n);for(var e=Co(Math.pow(n,6)),t=this,r="";;){var s=hv(t,e).g,c=((0<(t=Kn(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(wa(t=s))return c+r;for(;6>c.length;)c="0"+c;r=c+r}},ke.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ke.X=function(n){return Yi(n=Kn(this,n))?-1:wa(n)?0:1},ke.abs=function(){return Yi(this)?qr(this):this},ke.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var c=r+(65535&this.D(s))+(65535&n.D(s)),u=(c>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=u>>>16,t[s]=(u&=65535)<<16|(c&=65535)}return new dn(t,-2147483648&t[t.length-1]?-1:0)},ke.R=function(n){if(wa(this)||wa(n))return qp;if(Yi(this))return Yi(n)?qr(this).R(qr(n)):qr(qr(this).R(n));if(Yi(n))return qr(this.R(qr(n)));if(0>this.X(mC)&&0>n.X(mC))return Co(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var c=this.D(r)>>>16,u=65535&this.D(r),m=n.D(s)>>>16,y=65535&n.D(s);t[2*r+2*s]+=u*y,Wp(t,2*r+2*s),t[2*r+2*s+1]+=c*y,Wp(t,2*r+2*s+1),t[2*r+2*s+1]+=u*m,Wp(t,2*r+2*s+1),t[2*r+2*s+2]+=c*m,Wp(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new dn(t,0)},ke.gb=function(n){return hv(this,n).h},ke.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new dn(t,this.h&n.h)},ke.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new dn(t,this.h|n.h)},ke.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new dn(t,this.h^n.h)},zp.prototype.createWebChannel=zp.prototype.g,Oi.prototype.send=Oi.prototype.u,Oi.prototype.open=Oi.prototype.m,Oi.prototype.close=Oi.prototype.close,nv.NO_ERROR=0,nv.TIMEOUT=8,nv.HTTP_ERROR=6,$R.COMPLETE="complete",AI.EventType=Rp,Rp.OPEN="a",Rp.CLOSE="b",Rp.ERROR="c",Rp.MESSAGE="d",Er.prototype.listen=Er.prototype.O,Hn.prototype.listenOnce=Hn.prototype.P,Hn.prototype.getLastError=Hn.prototype.Sa,Hn.prototype.getLastErrorCode=Hn.prototype.Ia,Hn.prototype.getStatus=Hn.prototype.da,Hn.prototype.getResponseJson=Hn.prototype.Wa,Hn.prototype.getResponseText=Hn.prototype.ja,Hn.prototype.send=Hn.prototype.ha,Hn.prototype.setWithCredentials=Hn.prototype.Oa,Br.prototype.digest=Br.prototype.l,Br.prototype.reset=Br.prototype.reset,Br.prototype.update=Br.prototype.j,dn.prototype.add=dn.prototype.add,dn.prototype.multiply=dn.prototype.R,dn.prototype.modulo=dn.prototype.gb,dn.prototype.compare=dn.prototype.X,dn.prototype.toNumber=dn.prototype.ea,dn.prototype.toString=dn.prototype.toString,dn.prototype.getBits=dn.prototype.D,dn.fromNumber=Co,dn.fromString=function pC(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return qr(pC(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Co(Math.pow(e,8)),r=qp,s=0;s<n.length;s+=8){var c=Math.min(8,n.length-s),u=parseInt(n.substring(s,s+c),e);8>c?(c=Co(Math.pow(e,c)),r=r.R(c).add(Co(u))):r=(r=r.R(t)).add(Co(u))}return r};var _C=Eo.createWebChannelTransport=function(){return new zp},vC=Eo.getStatEventTarget=function(){return Sp()},kc=Eo.ErrorCode=nv,ex=Eo.EventType=$R,tx=Eo.Event=Jd,JI=Eo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Kp=(Eo.FetchXmlHttpFactory=jp,Eo.WebChannel=AI),xP=Eo.XhrIo=Hn,XI=Eo.Md5=Br,Nc=Eo.Integer=dn;const fv="@firebase/firestore";class pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");let gi="10.7.0";const Oc=new Ms.Yd("@firebase/firestore");function lu(){return Oc.logLevel}function fe(n,...e){if(Oc.logLevel<=Ms.in.DEBUG){const t=e.map(pv);Oc.debug(`Firestore (${gi}): ${n}`,...t)}}function tn(n,...e){if(Oc.logLevel<=Ms.in.ERROR){const t=e.map(pv);Oc.error(`Firestore (${gi}): ${n}`,...t)}}function mi(n,...e){if(Oc.logLevel<=Ms.in.WARN){const t=e.map(pv);Oc.warn(`Firestore (${gi}): ${n}`,...t)}}function pv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ve(n="Unexpected state"){const e=`FIRESTORE (${gi}) INTERNAL ASSERTION FAILED: `+n;throw tn(e),new Error(e)}function Ze(n,e){n||Ve()}function xe(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends yn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class eE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pr.UNAUTHENTICATED))}shutdown(){}}class ix{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yC{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const c=w=>this.i!==s?(s=this.i,t(w)):Promise.resolve();let u=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new wr,e.enqueueRetryable(()=>c(this.currentUser))};const m=()=>{const w=u;e.enqueueRetryable((0,le.Z)(function*(){yield w.promise,yield c(r.currentUser)}))},y=w=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new wr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze("string"==typeof r.accessToken),new eE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ze(null===e||"string"==typeof e),new pr(e)}}class bC{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gv{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new bC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=c=>{null!=c.error&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.R;return this.R=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const s=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>s(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?s(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ze("string"==typeof t.token),this.R=t.token,new IC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ox(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class wC{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=ox(40);for(let c=0;c<s.length;++c)r.length<20&&s[c]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[c]%62))}return r}}function _t(n,e){return n<e?-1:n>e?1:0}function rh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function TC(n){return n+"\0"}class Un{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Un.fromMillis(Date.now())}static fromDate(e){return Un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Un(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Un(0,0))}static max(){return new Ye(new Un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yp{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ve(),void 0===r?r=e.length-t:r>e.length-t&&Ve(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Yp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const c=e.get(s),u=t.get(s);if(c<u)return-1;if(c>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Yp{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const tE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends Yp{construct(e,t,r){return new xn(e,t,r)}static isValidIdentifier(e){return tE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const c=()=>{if(0===r.length)throw new ge(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new ge(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[s+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new ge(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,s+=2}else"`"===m?(u=!u,s++):"."!==m||u?(r+=m,s++):(c(),s++)}if(c(),u)throw new ge(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(t)}static emptyPath(){return new xn([])}}class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Zt.fromString(e))}static fromName(e){return new Me(Zt.fromString(e).popFirst(5))}static empty(){return new Me(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Zt(e.slice()))}}class Qp{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function nE(n){return n.fields.find(e=>2===e.kind)}function uu(n){return n.fields.filter(e=>2!==e.kind)}Qp.UNKNOWN_ID=-1;class du{constructor(e,t){this.fieldPath=e,this.kind=t}}class ih{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ih(0,_i.min())}}function CC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ye.fromTimestamp(1e9===r?new Un(t+1,0):new Un(t,r));return new _i(s,Me.empty(),e)}function DC(n){return new _i(n.readTime,n.key,-1)}class _i{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _i(Ye.min(),Me.empty(),-1)}static max(){return new _i(Ye.max(),Me.empty(),-1)}}function hu(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Me.comparator(n.documentKey,e.documentKey),0!==t?t:_t(n.largestBatchId,e.largestBatchId))}const mv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ta(n){return fu.apply(this,arguments)}function fu(){return fu=(0,le.Z)(function*(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==mv)throw n;fe("LocalStore","Unexpectedly lost primary lease")}),fu.apply(this,arguments)}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,s)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let s=0,c=0,u=!1;e.forEach(m=>{++s,m.next(()=>{++c,u&&c===s&&t()},y=>r(y))}),u=!0,c===s&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(s=>s?q.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,c)=>{r.push(t.call(this,s,c))}),this.waitFor(r)}static mapArray(e,t){return new q((r,s)=>{const c=e.length,u=new Array(c);let m=0;for(let y=0;y<c;y++){const w=y;t(e[w]).next(D=>{u[w]=D,++m,m===c&&r(u)},D=>s(D))}})}static doWhile(e,t){return new q((r,s)=>{const c=()=>{!0===e()?t().next(()=>{c()},s):r()};c()})}}class _v{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new wr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Xp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=rE(r.target.error);this.V.reject(new Xp(e,s))}}static open(e,t,r,s){try{return new _v(t,e.transaction(s,r))}catch(c){throw new Xp(t,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vv(t)}}class vi{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===vi.S((0,yn.z$)())&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return fe("SimpleDb","Removing database:",e),pu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,yn.hl)())return!1;if(vi.C())return!0;const e=(0,yn.z$)(),t=vi.S(e),r=0<t&&t<10,s=vi.v(e),c=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,le.Z)(function*(){return t.db||(fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=u=>{r(u.target.result)},c.onblocked=()=>{s(new Xp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=u=>{const m=u.target.error;s("VersionError"===m.name?new ge(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new ge(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Xp(e,m))},c.onupgradeneeded=u=>{fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.p.N(u.target.result,c.transaction,u.oldVersion,t.version).next(()=>{fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var c=this;return(0,le.Z)(function*(){const u="readonly"===t;let m=0;for(;;){++m;try{c.db=yield c.O(e);const y=_v.open(c.db,e,u?"readonly":"readwrite",r),w=s(y).next(D=>(y.g(),D)).catch(D=>(y.abort(D),q.reject(D))).toPromise();return w.catch(()=>{}),yield y.m,w}catch(y){const w=y,D="FirebaseError"!==w.name&&m<3;if(fe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),c.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class AC{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return pu(this.k.delete())}}class Xp extends ge{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ca(n){return"IndexedDbTransactionError"===n.name}class vv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pu(r)}add(e){return fe("SimpleDb","ADD",this.store.name,e,e),pu(this.store.add(e))}get(e){return pu(this.store.get(e)).next(t=>(void 0===t&&(t=null),fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return fe("SimpleDb","DELETE",this.store.name,e),pu(this.store.delete(e))}count(){return fe("SimpleDb","COUNT",this.store.name),pu(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),c=[];return this.G(s,(u,m)=>{c.push(m)}).next(()=>c)}{const s=this.store.getAll(r.range);return new q((c,u)=>{s.onerror=m=>{u(m.target.error)},s.onsuccess=m=>{c(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new q((s,c)=>{r.onerror=u=>{c(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}H(e,t){fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const s=this.cursor(r);return this.G(s,(c,u,m)=>m.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Z(e){const t=this.cursor({});return new q((r,s)=>{t.onerror=c=>{const u=rE(c.target.error);s(u)},t.onsuccess=c=>{const u=c.target.result;u?e(u.primaryKey,u.value).next(m=>{m?u.continue():r()}):r()}})}G(e,t){const r=[];return new q((s,c)=>{e.onerror=u=>{c(u.target.error)},e.onsuccess=u=>{const m=u.target.result;if(!m)return void s();const y=new AC(m),w=t(m.primaryKey,m.value,y);if(w instanceof q){const D=w.catch(S=>(y.done(),q.reject(S)));r.push(D)}y.isDone?s():null===y.$?m.continue():m.continue(y.$)}}).next(()=>q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pu(n){return new q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=rE(r.target.error);t(s)}})}let SC=!1;function rE(n){const e=vi.S((0,yn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SC||(SC=!0,setTimeout(()=>{throw r},0)),r}}return n}class sx{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,le.Z)(function*(){t.task=null;try{fe("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(r){Ca(r)?fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ta(r)}yield t.ee(6e4)}))}}class ax{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let s=t,c=!0;return q.doWhile(()=>!0===c&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return fe("IndexBackiller",`Processing collection: ${u}`),this.re(e,u,s).next(m=>{s-=m,r.add(u)});c=!1})).next(()=>t-s)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(c=>{const u=c.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ie(s,c)).next(m=>(fe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>u.size)}))}ie(e,t){let r=e;return t.changes.forEach((s,c)=>{const u=DC(c);hu(u,r)>0&&(r=u)}),new _i(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let yi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.se(s),this.oe=s=>r.writeSequenceNumber(s))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function Da(n){return null==n}function Fc(n){return 0===n&&1/n==-1/0}function eg(n){return"number"==typeof n&&Number.isInteger(n)&&!Fc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RC(e)),e=cx(n.get(t),e);return RC(e)}function cx(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const c=n.charAt(s);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function RC(n){return n+"\x01\x01"}function Do(n){const e=n.length;if(Ze(e>=2),2===e)return Ze("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let s="";for(let c=0;c<e;){const u=n.indexOf("\x01",c);switch((u<0||u>t)&&Ve(),n.charAt(u+1)){case"\x01":const m=n.substring(c,u);let y;0===s.length?y=m:(s+=m,y=s,s=""),r.push(y);break;case"\x10":s+=n.substring(c,u),s+="\0";break;case"\x11":s+=n.substring(c,u+1);break;default:Ve()}c=u+2}return new Zt(r)}const xC=["userId","batchId"];function tg(n,e){return[n,bi(e)]}function MC(n,e,t){return[n,bi(e),t]}const lx={},PC=["prefixPath","collectionGroup","readTime","documentId"],ux=["prefixPath","collectionGroup","documentId"],dx=["collectionGroup","readTime","prefixPath","documentId"],oh=["canonicalId","targetId"],hx=["targetId","path"],iE=["path","targetId"],fx=["collectionId","parent"],oE=["indexId","uid"],kC=["uid","sequenceNumber"],NC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],OC=["indexId","uid","orderedDocumentKey"],ng=["userId","collectionPath","documentId"],FC=["userId","collectionPath","largestBatchId"],sh=["userId","collectionGroup","largestBatchId"],ah=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sE=[...ah,"documentOverlays"],rg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LC=rg,px=[...LC,"indexConfiguration","indexState","indexEntries"];class yv extends Jp{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Tr(n,e){const t=xe(n);return vi.M(t.ae,e)}function bv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Aa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class bn{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ch(this.root,e,this.comparator,!0)}}class ch{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&s&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,r,s,c){this.key=e,this.value=t,this.color=r??jr.RED,this.left=s??jr.EMPTY,this.right=c??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,c){return new jr(e??this.key,t??this.value,r??this.color,s??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===c?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return jr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const e=this.left.check();if(e!==this.right.check())throw Ve();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(e,t,r,s,c){return this}insert(e,t,r){return new jr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new UC(this.data.getIterator())}getIteratorFrom(e){return new UC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(s,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class UC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lh(n){return n.hasNext()?n.getNext():void 0}class Fi{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new Fi([])}unionWith(e){let t=new hn(xn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class BC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new BC("Invalid base64 string: "+c):c}}(e);return new gr(t)}static fromUint8Array(e){const t=function(s){let c="";for(let u=0;u<s.length;++u)c+=String.fromCharCode(s[u]);return c}(e);return new gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const jC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lc(n){if(Ze(!!n),"string"==typeof n){let e=0;const t=jC.exec(n);if(Ze(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Os(n){return"string"==typeof n?gr.fromBase64String(n):gr.fromUint8Array(n)}function Iv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ev(n){const e=n.mapValue.fields.__previous_value__;return Iv(e)?Ev(e):e}function dh(n){const e=Lc(n.mapValue.fields.__local_write_time__.timestampValue);return new Un(e.seconds,e.nanos)}class gx{constructor(e,t,r,s,c,u,m,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=w}}class Sa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sa&&e.projectId===this.projectId&&e.database===this.database}}const Vc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ig={nullValue:"NULL_VALUE"};function Fs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Iv(n)?4:cE(n)?9007199254740991:10:Ve()}function Ls(n,e){if(n===e)return!0;const t=Fs(n);if(t!==Fs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dh(n).isEqual(dh(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const u=Lc(s.timestampValue),m=Lc(c.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return c=e,Os(n.bytesValue).isEqual(Os(c.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,c){return Yn(s.geoPointValue.latitude)===Yn(c.geoPointValue.latitude)&&Yn(s.geoPointValue.longitude)===Yn(c.geoPointValue.longitude)}(n,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return Yn(s.integerValue)===Yn(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const u=Yn(s.doubleValue),m=Yn(c.doubleValue);return u===m?Fc(u)===Fc(m):isNaN(u)&&isNaN(m)}return!1}(n,e);case 9:return rh(n.arrayValue.values||[],e.arrayValue.values||[],Ls);case 10:return function(s,c){const u=s.mapValue.fields||{},m=c.mapValue.fields||{};if(bv(u)!==bv(m))return!1;for(const y in u)if(u.hasOwnProperty(y)&&(void 0===m[y]||!Ls(u[y],m[y])))return!1;return!0}(n,e);default:return Ve()}var c}function og(n,e){return void 0!==(n.values||[]).find(t=>Ls(t,e))}function Vs(n,e){if(n===e)return 0;const t=Fs(n),r=Fs(e);if(t!==r)return _t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return _t(n.booleanValue,e.booleanValue);case 2:return function(c,u){const m=Yn(c.integerValue||c.doubleValue),y=Yn(u.integerValue||u.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(n,e);case 3:return Qn(n.timestampValue,e.timestampValue);case 4:return Qn(dh(n),dh(e));case 5:return _t(n.stringValue,e.stringValue);case 6:return function(c,u){const m=Os(c),y=Os(u);return m.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(c,u){const m=c.split("/"),y=u.split("/");for(let w=0;w<m.length&&w<y.length;w++){const D=_t(m[w],y[w]);if(0!==D)return D}return _t(m.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(c,u){const m=_t(Yn(c.latitude),Yn(u.latitude));return 0!==m?m:_t(Yn(c.longitude),Yn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(c,u){const m=c.values||[],y=u.values||[];for(let w=0;w<m.length&&w<y.length;++w){const D=Vs(m[w],y[w]);if(D)return D}return _t(m.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(c,u){if(c===Vc.mapValue&&u===Vc.mapValue)return 0;if(c===Vc.mapValue)return 1;if(u===Vc.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),w=u.fields||{},D=Object.keys(w);y.sort(),D.sort();for(let S=0;S<y.length&&S<D.length;++S){const M=_t(y[S],D[S]);if(0!==M)return M;const V=Vs(m[y[S]],w[D[S]]);if(0!==V)return V}return _t(y.length,D.length)}(n.mapValue,e.mapValue);default:throw Ve()}}function Qn(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return _t(n,e);const t=Lc(n),r=Lc(e),s=_t(t.seconds,r.seconds);return 0!==s?s:_t(t.nanos,r.nanos)}function gu(n){return aE(n)}function aE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Lc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Os(n.bytesValue).toBase64():"referenceValue"in n?Me.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const c of t.values||[])s?s=!1:r+=",",r+=aE(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",c=!0;for(const u of r)c?c=!1:s+=",",s+=`${u}:${aE(t.fields[u])}`;return s+"}"}(n.mapValue):Ve()}function zo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Uc(n){return!!n&&"integerValue"in n}function Bc(n){return!!n&&"arrayValue"in n}function hh(n){return!!n&&"nullValue"in n}function sg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ag(n){return!!n&&"mapValue"in n}function fh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Aa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function wv(n){return"nullValue"in n?ig:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zo(Sa.empty(),Me.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ve()}function lE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zo(Sa.empty(),Me.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Vc:Ve()}function uE(n,e){const t=Vs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cg(n,e){const t=Vs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ag(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fh(t)}setAll(e){let t=xn.emptyPath(),r={},s=[];e.forEach((u,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,r,s),r={},s=[],t=m.popLast()}u?r[m.lastSegment()]=fh(u):s.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,s)}delete(e){const t=this.field(e.popLast());ag(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ag(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Aa(t,(s,c)=>e[s]=c);for(const s of r)delete e[s]}clone(){return new zn(fh(this.value))}}function HC(n){const e=[];return Aa(n.fields,(t,r)=>{const s=new xn([t]);if(ag(r)){const c=HC(r.mapValue).fields;if(0===c.length)e.push(s);else for(const u of c)e.push(s.child(u))}else e.push(s)}),new Fi(e)}class jt{constructor(e,t,r,s,c,u,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=c,this.data=u,this.documentState=m}static newInvalidDocument(e){return new jt(e,0,Ye.min(),Ye.min(),Ye.min(),zn.empty(),0)}static newFoundDocument(e,t,r,s){return new jt(e,1,t,Ye.min(),r,s,0)}static newNoDocument(e,t){return new jt(e,2,t,Ye.min(),Ye.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new jt(e,3,t,Ye.min(),Ye.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jc{constructor(e,t){this.position=e,this.inclusive=t}}function $C(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const c=e[s],u=n.position[s];if(r=c.field.isKeyField()?Me.comparator(Me.fromName(u.referenceValue),t.key):Vs(u,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function Tv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ls(n.position[t],e.position[t]))return!1;return!0}class ph{constructor(e,t="asc"){this.field=e,this.dir=t}}function zC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class GC{}class $t extends GC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new hE(e,t,r):"array-contains"===t?new mx(e,r):"in"===t?new ZC(e,r):"not-in"===t?new gh(e,r):"array-contains-any"===t?new KC(e,r):new $t(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new qC(e,r):new WC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Vs(t,this.value)):null!==t&&Fs(this.value)===Fs(t)&&this.matchesComparison(Vs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends GC{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new fn(e,t)}matches(e){return Ra(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ra(n){return"and"===n.op}function lg(n){return"or"===n.op}function ug(n){return mu(n)&&Ra(n)}function mu(n){for(const e of n.filters)if(e instanceof fn)return!1;return!0}function Cv(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+gu(n.value);if(ug(n))return n.filters.map(e=>Cv(e)).join(",");{const e=n.filters.map(t=>Cv(t)).join(",");return`${n.op}(${e})`}}function dE(n,e){return n instanceof $t?(r=n,(s=e)instanceof $t&&r.op===s.op&&r.field.isEqual(s.field)&&Ls(r.value,s.value)):n instanceof fn?function(r,s){return s instanceof fn&&r.op===s.op&&r.filters.length===s.filters.length&&r.filters.reduce((c,u,m)=>c&&dE(u,s.filters[m]),!0)}(n,e):void Ve();var r,s}function _u(n,e){const t=n.filters.concat(e);return fn.create(t,n.op)}function Dv(n){return n instanceof $t?`${(t=n).field.canonicalString()} ${t.op} ${gu(t.value)}`:n instanceof fn?function(t){return t.op.toString()+" {"+t.getFilters().map(Dv).join(" ,")+"}"}(n):"Filter";var t}class hE extends $t{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class qC extends $t{constructor(e,t){super(e,"in",t),this.keys=fE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class WC extends $t{constructor(e,t){super(e,"not-in",t),this.keys=fE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Me.fromName(r.referenceValue))}class mx extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bc(t)&&og(t.arrayValue,this.value)}}class ZC extends $t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&og(this.value.arrayValue,t)}}class gh extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(og(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!og(this.value.arrayValue,t)}}class KC extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>og(this.value.arrayValue,r))}}class _x{constructor(e,t=null,r=[],s=[],c=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=c,this.startAt=u,this.endAt=m,this.ce=null}}function pE(n,e=null,t=[],r=[],s=null,c=null,u=null){return new _x(n,e,t,r,s,c,u)}function vu(n){const e=xe(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Cv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(c=r).field.canonicalString()+c.dir;var c}).join(","),Da(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gu(r)).join(",")),e.ce=t}return e.ce}function mh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Tv(n.startAt,e.startAt)&&Tv(n.endAt,e.endAt)}function dg(n){return Me.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Av(n,e){return n.filters.filter(t=>t instanceof $t&&t.field.isEqual(e))}function vx(n,e,t){let r=ig,s=!0;for(const c of Av(n,e)){let u=ig,m=!0;switch(c.op){case"<":case"<=":u=wv(c.value);break;case"==":case"in":case">=":u=c.value;break;case">":u=c.value,m=!1;break;case"!=":case"not-in":u=ig}uE({value:r,inclusive:s},{value:u,inclusive:m})<0&&(r=u,s=m)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];uE({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}return{value:r,inclusive:s}}function YC(n,e,t){let r=Vc,s=!0;for(const c of Av(n,e)){let u=Vc,m=!0;switch(c.op){case">=":case">":u=lE(c.value),m=!1;break;case"==":case"in":case"<=":u=c.value;break;case"<":u=c.value,m=!1;break;case"!=":case"not-in":u=Vc}cg({value:r,inclusive:s},{value:u,inclusive:m})>0&&(r=u,s=m)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];cg({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}return{value:r,inclusive:s}}class Us{constructor(e,t=null,r=[],s=[],c=null,u="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=c,this.limitType=u,this.startAt=m,this.endAt=y,this.le=null,this.he=null,this.Pe=null}}function Sv(n,e,t,r,s,c,u,m){return new Us(n,e,t,r,s,c,u,m)}function _h(n){return new Us(n)}function QC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function gE(n){return null!==n.collectionGroup}function vh(n){const e=xe(n);if(null===e.le){e.le=[];const t=new Set;for(const c of e.explicitOrderBy)e.le.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new hn(xn.comparator);return u.filters.forEach(y=>{y.getFlattenedFilters().forEach(w=>{w.isInequality()&&(m=m.add(w.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.le.push(new ph(c,r))}),t.has(xn.keyField().canonicalString())||e.le.push(new ph(xn.keyField(),r))}return e.le}function Ii(n){const e=xe(n);return e.he||(e.he=function JC(n,e){if("F"===n.limitType)return pE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>new ph(s.field,"desc"===s.dir?"asc":"desc"));const t=n.endAt?new jc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jc(n.startAt.position,n.startAt.inclusive):null;return pE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,vh(n))),e.he}function mE(n,e){const t=n.filters.concat([e]);return new Us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Rv(n,e,t){return new Us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hg(n,e){return mh(Ii(n),Ii(e))&&n.limitType===e.limitType}function XC(n){return`${vu(Ii(n))}|lt:${n.limitType}`}function yh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>Dv(s)).join(", ")}]`),Da(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>gu(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>gu(s)).join(",")),`Target(${r})`}(Ii(n))}; limitType=${n.limitType})`}function fg(n,e){return e.isFoundDocument()&&function(r,s){const c=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(n,e)&&function(r,s){for(const c of vh(r))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(n,e)&&function(r,s){for(const c of r.filters)if(!c.matches(s))return!1;return!0}(n,e)&&(s=e,!((r=n).startAt&&!function(u,m,y){const w=$C(u,m,y);return u.inclusive?w<=0:w<0}(r.startAt,vh(r),s)||r.endAt&&!function(u,m,y){const w=$C(u,m,y);return u.inclusive?w>=0:w>0}(r.endAt,vh(r),s)));var r,s}function eD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tD(n){return(e,t)=>{let r=!1;for(const s of vh(n)){const c=yx(s,e,t);if(0!==c)return c;r=r||s.field.isKeyField()}return 0}}function yx(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):function(c,u,m){const y=u.data.field(c),w=m.data.field(c);return null!==y&&null!==w?Vs(y,w):Ve()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ve()}}class xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,c]of r)if(this.equalsFn(s,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return void(s[c]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Aa(this.inner,(t,r)=>{for(const[s,c]of r)e(s,c)})}isEmpty(){return VC(this.inner)}size(){return this.innerSize}}const nD=new bn(Me.comparator);function Ei(){return nD}const Ma=new bn(Me.comparator);function bh(...n){let e=Ma;for(const t of n)e=e.insert(t.key,t);return e}function rD(n){let e=Ma;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Go(){return Pa()}function _E(){return Pa()}function Pa(){return new xa(n=>n.toString(),(n,e)=>n.isEqual(e))}const vE=new bn(Me.comparator),Ih=new hn(Me.comparator);function At(...n){let e=Ih;for(const t of n)e=e.add(t);return e}const Eh=new hn(_t);function yE(){return Eh}function pg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function gg(n){return{integerValue:""+n}}function xv(n,e){return eg(e)?gg(e):pg(n,e)}class mg{constructor(){this._=void 0}}function bx(n,e,t){return n instanceof ka?function(s,c){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&Iv(c)&&(c=Ev(c)),c&&(u.fields.__previous_value__=c),{mapValue:u}}(t,e):n instanceof Bs?bE(n,e):n instanceof Hc?oD(n,e):function(s,c){const u=iD(s,c),m=IE(u)+IE(s.Ie);return Uc(u)&&Uc(s.Ie)?gg(m):pg(s.serializer,m)}(n,e)}function Ix(n,e,t){return n instanceof Bs?bE(n,e):n instanceof Hc?oD(n,e):t}function iD(n,e){return n instanceof wh?Uc(r=e)||(c=r)&&"doubleValue"in c?e:{integerValue:0}:null;var r,c}class ka extends mg{}class Bs extends mg{constructor(e){super(),this.elements=e}}function bE(n,e){const t=EE(e);for(const r of n.elements)t.some(s=>Ls(s,r))||t.push(r);return{arrayValue:{values:t}}}class Hc extends mg{constructor(e){super(),this.elements=e}}function oD(n,e){let t=EE(e);for(const r of n.elements)t=t.filter(s=>!Ls(s,r));return{arrayValue:{values:t}}}class wh extends mg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function IE(n){return Yn(n.integerValue||n.doubleValue)}function EE(n){return Bc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Th{constructor(e,t){this.field=e,this.transform=t}}class Ex{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Na(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wE{}function Mv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Dh(n.key,Bn.none()):new qo(n.key,n.data,Bn.none());{const t=n.data,r=zn.empty();let s=new hn(xn.comparator);for(let c of e.fields)if(!s.has(c)){let u=t.field(c);null===u&&c.length>1&&(c=c.popLast(),u=t.field(c)),null===u?r.delete(c):r.set(c,u),s=s.add(c)}return new Oa(n.key,r,new Fi(s.toArray()),Bn.none())}}function NP(n,e,t){n instanceof qo?function(s,c,u){const m=s.value.clone(),y=cD(s.fieldTransforms,c,u.transformResults);m.setAll(y),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):n instanceof Oa?function(s,c,u){if(!Na(s.precondition,c))return void c.convertToUnknownDocument(u.version);const m=cD(s.fieldTransforms,c,u.transformResults),y=c.data;y.setAll(aD(s)),y.setAll(m),c.convertToFoundDocument(u.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ch(n,e,t,r){return n instanceof qo?function(c,u,m,y){if(!Na(c.precondition,u))return m;const w=c.value.clone(),D=bu(c.fieldTransforms,y,u);return w.setAll(D),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Oa?function(c,u,m,y){if(!Na(c.precondition,u))return m;const w=bu(c.fieldTransforms,y,u),D=u.data;return D.setAll(aD(c)),D.setAll(w),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===m?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(S=>S.field))}(n,e,t,r):(m=t,Na(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m);var u,m}function sD(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),c=iD(r.transform,s||null);null!=c&&(null===t&&(t=zn.empty()),t.set(r.field,c))}return t||null}function wx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===s||r&&s&&rh(r,s,(c,u)=>function yu(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(r=n.transform)instanceof Bs&&s instanceof Bs||r instanceof Hc&&s instanceof Hc?rh(r.elements,s.elements,Ls):r instanceof wh&&s instanceof wh?Ls(r.Ie,s.Ie):r instanceof ka&&s instanceof ka);var r,s}(c,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,s}class qo extends wE{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Oa extends wE{constructor(e,t,r,s,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function aD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function cD(n,e,t){const r=new Map;Ze(n.length===t.length);for(let s=0;s<t.length;s++){const c=n[s],u=c.transform,m=e.data.field(c.field);r.set(c.field,Ix(u,m,t[s]))}return r}function bu(n,e,t){const r=new Map;for(const s of n){const c=s.transform,u=t.data.field(s.field);r.set(s.field,bx(c,u,e))}return r}class Dh extends wE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ah extends wE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sh{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const c=this.mutations[s];c.key.isEqual(e.key)&&NP(c,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ch(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ch(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_E();return this.mutations.forEach(s=>{const c=e.get(s.key),u=c.overlayedDocument;let m=this.applyToLocalView(u,c.mutatedFields);m=t.has(s.key)?null:m;const y=Mv(u,m);null!==y&&r.set(s.key,y),u.isValidDocument()||u.convertToNoDocument(Ye.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),At())}isEqual(e){return this.batchId===e.batchId&&rh(this.mutations,e.mutations,(t,r)=>wx(t,r))&&rh(this.baseMutations,e.baseMutations,(t,r)=>wx(t,r))}}class oi{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ze(e.mutations.length===r.length);let s=vE;const c=e.mutations;for(let u=0;u<c.length;u++)s=s.insert(c[u].key,r[u].version);return new oi(e,t,r,s)}}class Pv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Tx{constructor(e,t){this.count=e,this.unchangedNames=t}}var ar,zt;function TE(n){switch(n){default:return Ve();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function CE(n){if(void 0===n)return tn("GRPC error has no .code"),Z.UNKNOWN;switch(n){case ar.OK:return Z.OK;case ar.CANCELLED:return Z.CANCELLED;case ar.UNKNOWN:return Z.UNKNOWN;case ar.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case ar.INTERNAL:return Z.INTERNAL;case ar.UNAVAILABLE:return Z.UNAVAILABLE;case ar.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case ar.NOT_FOUND:return Z.NOT_FOUND;case ar.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case ar.ABORTED:return Z.ABORTED;case ar.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case ar.DATA_LOSS:return Z.DATA_LOSS;default:return Ve()}}(zt=ar||(ar={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";function uD(){return new TextEncoder}const Cx=new Nc([4294967295,4294967295],0);function Rh(n){const e=uD().encode(n),t=new XI;return t.update(e),new Uint8Array(t.digest())}function dD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Nc([t,r],0),new Nc([s,c],0)]}class DE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _g(`Invalid padding: ${t}`);if(r<0)throw new _g(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new _g(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new _g(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Nc.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(Nc.fromNumber(r)));return 1===s.compare(Cx)&&(s=new Nc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Rh(e),[r,s]=dD(t);for(let c=0;c<this.hashCount;c++){const u=this.de(r,s,c);if(!this.Ae(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new DE(c,s,t);return r.forEach(m=>u.insert(m)),u}insert(e){if(0===this.Te)return;const t=Rh(e),[r,s]=dD(t);for(let c=0;c<this.hashCount;c++){const u=this.de(r,s,c);this.Re(u)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class _g extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $c{constructor(e,t,r,s,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,xh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $c(Ye.min(),s,new bn(_t),Ei(),At())}}class xh{constructor(e,t,r,s,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new xh(r,t,At(),At(),At())}}class vg{constructor(e,t,r,s){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=s}}class AE{constructor(e,t){this.targetId=e,this.fe=t}}class hD{constructor(e,t,r=gr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Mh{constructor(){this.ge=0,this.pe=pD(),this.ye=gr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=At(),t=At(),r=At();return this.pe.forEach((s,c)=>{switch(c){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ve()}}),new xh(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=pD()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ze(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class yg{constructor(e){this.Le=e,this.ke=new Map,this.qe=Ei(),this.Qe=fD(),this.Ke=new bn(_t)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:Ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.fe.count,s=this.Ye(t);if(s){const c=s.target;if(dg(c))if(0===r){const u=new Me(c.path);this.We(t,u,jt.newNoDocument(u,Ye.min()))}else Ze(1===r);else{const u=this.Ze(t);if(u!==r){const m=this.Xe(e),y=m?this.et(m,e,u):1;0!==y&&(this.He(t),this.Ke=this.Ke.insert(t,2===y?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:c=0}=t;let u,m;try{u=Os(r).toUint8Array()}catch(y){if(y instanceof BC)return mi("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new DE(u,s,c)}catch(y){return mi(y instanceof _g?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return 0===m.Te?null:m}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(c=>{const u=this.Le.nt(),m=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(t,c,null),s++)}),s}it(e){const t=new Map;this.ke.forEach((c,u)=>{const m=this.Ye(u);if(m){if(c.current&&dg(m.target)){const y=new Me(m.target.path);null!==this.qe.get(y)||this.st(u,y)||this.We(u,y,jt.newNoDocument(y,e))}c.De&&(t.set(u,c.ve()),c.Fe())}});let r=At();this.Qe.forEach((c,u)=>{let m=!0;u.forEachWhile(y=>{const w=this.Ye(y);return!w||"TargetPurposeLimboResolution"===w.purpose||(m=!1,!1)}),m&&(r=r.add(c))}),this.qe.forEach((c,u)=>u.setReadTime(e));const s=new $c(e,t,this.Ke,this.qe,r);return this.qe=Ei(),this.Qe=fD(),this.Ke=new bn(_t),s}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,t)?s.Me(t,1):s.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Mh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new hn(_t),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Mh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function fD(){return new bn(Me.comparator)}function pD(){return new bn(Me.comparator)}const Dx={asc:"ASCENDING",desc:"DESCENDING"},gD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mD={and:"AND",or:"OR"};class _D{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function SE(n,e){return n.useProto3Json||Da(e)?e:{value:e}}function Iu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ax(n,e){return Iu(n,e.toTimestamp())}function mr(n){return Ze(!!n),Ye.fromTimestamp(function(t){const r=Lc(t);return new Un(r.seconds,r.nanos)}(n))}function yD(n,e){return(r=n,new Zt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function Sx(n){const e=Zt.fromString(n);return Ze(SD(e)),e}function Nv(n,e){return yD(n.databaseId,e.path)}function Wo(n,e){const t=Sx(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(RE(t))}function Ph(n,e){return yD(n.databaseId,e)}function bD(n){const e=Sx(n);return 4===e.length?Zt.emptyPath():RE(e)}function bg(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RE(n){return Ze(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kh(n,e,t){return{name:Nv(n,e),fields:t.value.mapValue.fields}}function ID(n,e,t){const r=Wo(n,e.name),s=mr(e.updateTime),c=e.createTime?mr(e.createTime):Ye.min(),u=new zn({mapValue:{fields:e.fields}}),m=jt.newFoundDocument(r,s,c,u);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Ig(n,e){let t;if(e instanceof qo)t={update:kh(n,e.key,e.value)};else if(e instanceof Dh)t={delete:Nv(n,e.key)};else if(e instanceof Oa)t={update:kh(n,e.key,e.data),updateMask:PE(e.fieldMask)};else{if(!(e instanceof Ah))return Ve();t={verify:Nv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(c,u){const m=u.transform;if(m instanceof ka)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Bs)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Hc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof wh)return{fieldPath:u.field.canonicalString(),increment:m.Ie};throw Ve()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Ax(n,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Ve()),t;var c}function ED(n,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?Bn.updateTime(mr(c.updateTime)):void 0!==c.exists?Bn.exists(c.exists):Bn.none():Bn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,m){let y=null;"setToServerValue"in m?(Ze("REQUEST_TIME"===m.setToServerValue),y=new ka):"appendMissingElements"in m?y=new Bs(m.appendMissingElements.values||[]):"removeAllFromArray"in m?y=new Hc(m.removeAllFromArray.values||[]):"increment"in m?y=new wh(u,m.increment):Ve();const w=xn.fromServerFormat(m.fieldPath);return new Th(w,y)}(n,s)):[];var c;if(e.update){const s=Wo(n,e.update.name),c=new zn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Fi((e.updateMask.fieldPaths||[]).map(D=>xn.fromServerFormat(D)));return new Oa(s,c,u,t,r)}return new qo(s,c,t,r)}if(e.delete){const s=Wo(n,e.delete);return new Dh(s,t)}if(e.verify){const s=Wo(n,e.verify);return new Ah(s,t)}return Ve()}function xE(n,e){return{documents:[Ph(n,e.path)]}}function ME(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ph(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ph(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(y){if(0!==y.length)return AD(fn.create(y,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const c=function(y){if(0!==y.length)return y.map(w=>{return{field:zc((S=w).field),direction:CD(S.dir)};var S})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=SE(n,e.limit);return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),t;var y}function wD(n){let e=bD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ze(1===r);const D=t.from[0];D.allDescendants?s=D.collectionId:e=e.child(D.collectionId)}let c=[];t.where&&(c=function(S){const M=TD(S);return M instanceof fn&&ug(M)?M.getFilters():[M]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(M=>{return new ph(Eu((ee=M).field),function(ue){switch(ue){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ee.direction));var ee}));let m=null;t.limit&&(m=function(S){let M;return M="object"==typeof S?S.value:S,Da(M)?null:M}(t.limit));let y=null;var S;t.startAt&&(y=new jc((S=t.startAt).values||[],!!S.before));let w=null;return t.endAt&&(w=function(S){return new jc(S.values||[],!S.before)}(t.endAt)),Sv(e,s,u,c,m,"F",y,w)}function TD(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Eu(t.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Eu(t.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Eu(t.unaryFilter.field);return $t.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Eu(t.unaryFilter.field);return $t.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}}(n):void 0!==n.fieldFilter?$t.create(Eu((t=n).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return fn.create(t.compositeFilter.filters.map(r=>TD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve()}}(t.compositeFilter.op))}(n):Ve();var t}function CD(n){return Dx[n]}function Px(n){return gD[n]}function DD(n){return mD[n]}function zc(n){return{fieldPath:n.canonicalString()}}function Eu(n){return xn.fromServerFormat(n.fieldPath)}function AD(n){return n instanceof $t?function(t){if("=="===t.op){if(sg(t.value))return{unaryFilter:{field:zc(t.field),op:"IS_NAN"}};if(hh(t.value))return{unaryFilter:{field:zc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(sg(t.value))return{unaryFilter:{field:zc(t.field),op:"IS_NOT_NAN"}};if(hh(t.value))return{unaryFilter:{field:zc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zc(t.field),op:Px(t.op),value:t.value}}}(n):n instanceof fn?function(t){const r=t.getFilters().map(s=>AD(s));return 1===r.length?r[0]:{compositeFilter:{op:DD(t.op),filters:r}}}(n):Ve()}function PE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class js{constructor(e,t,r,s,c=Ye.min(),u=Ye.min(),m=gr.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kE{constructor(e){this.ut=e}}function RD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ov(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Nv(c=n.ut,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Iu(c,u.version.toTimestamp()),createTime:Iu(c,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fa(e.version)};else{if(!e.isUnknownDocument())return Ve();r.unknownDocument={path:t.path.toArray(),version:Fa(e.version)}}var c,u;return r}function Ov(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wu(n){const e=new Un(n.seconds,n.nanoseconds);return Ye.fromTimestamp(e)}function Gc(n,e){const t=(e.baseMutations||[]).map(c=>ED(n.ut,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const r=e.mutations.map(c=>ED(n.ut,c)),s=Un.fromMillis(e.localWriteTimeMs);return new Sh(e.batchId,s,t,r)}function wg(n){const e=wu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?wu(n.lastLimboFreeSnapshotVersion):Ye.min();let r;return r=void 0!==n.query.documents?(Ze(1===(c=n.query).documents.length),Ii(_h(bD(c.documents[0])))):function(c){return Ii(wD(c))}(n.query),new js(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,gr.fromBase64String(n.resumeToken));var c}function xD(n,e){const t=Fa(e.snapshotVersion),r=Fa(e.lastLimboFreeSnapshotVersion);let s;s=dg(e.target)?xE(n.ut,e.target):ME(n.ut,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vu(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function NE(n){const e=wD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Rv(e,e.limit,"L"):e}function OE(n,e){return new Pv(e.largestBatchId,ED(n.ut,e.overlayMutation))}function MD(n,e){const t=e.path.lastSegment();return[n,bi(e.path.popLast()),t]}function PD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Fa(r.readTime),documentKey:bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Nx{getBundleMetadata(e,t){return kD(e).get(t).next(r=>{if(r)return{id:(c=r).bundleId,createTime:wu(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return kD(e).put({bundleId:(s=t).id,createTime:Fa(mr(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return FE(e).get(t).next(r=>{if(r)return{name:(c=r).name,query:NE(c.bundledQuery),readTime:wu(c.readTime)};var c})}saveNamedQuery(e,t){return FE(e).put({name:(s=t).name,readTime:Fa(mr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function kD(n){return Tr(n,"bundles")}function FE(n){return Tr(n,"namedQueries")}class Tg{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new Tg(e,t.uid||"")}getOverlay(e,t){return Cg(e).get(MD(this.userId,t)).next(r=>r?OE(this.serializer,r):null)}getOverlays(e,t){const r=Go();return q.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((c,u)=>{const m=new Pv(t,u);s.push(this.lt(e,m))}),q.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(u=>s.add(bi(u.getCollectionPath())));const c=[];return s.forEach(u=>{const m=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);c.push(Cg(e).H("collectionPathOverlayIndex",m))}),q.waitFor(c)}getOverlaysForCollection(e,t,r){const s=Go(),c=bi(t),u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Cg(e).W("collectionPathOverlayIndex",u).next(m=>{for(const y of m){const w=OE(this.serializer,y);s.set(w.getKey(),w)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const c=Go();let u;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cg(e).Y({index:"collectionGroupOverlayIndex",range:m},(y,w,D)=>{const S=OE(this.serializer,w);c.size()<s||S.largestBatchId===u?(c.set(S.getKey(),S),u=S.largestBatchId):D.done()}).next(()=>c)}lt(e,t){return Cg(e).put(function(s,c,u){const[m,y,w]=MD(c,u.mutation.key);return{userId:c,collectionPath:y,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ig(s.ut,u.mutation)}}(this.serializer,this.userId,t))}}function Cg(n){return Tr(n,"documentOverlays")}class Tu{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.Tt(t,13):(this.Tt(t,15),Fc(r)?t.Et(0):t.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt(`${r.seconds||""}`),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Os(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(t,45),t.Et(r.latitude||0),t.Et(r.longitude||0)}else"mapValue"in e?cE(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Ve()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const r=e.fields||{};this.Tt(t,55);for(const s of Object.keys(r))this.At(s,t),this.Pt(r[s],t)}yt(e,t){const r=e.values||[];this.Tt(t,50);for(const s of r)this.Pt(s,t)}ft(e,t){this.Tt(t,37),Me.fromName(e).path.forEach(r=>{this.Tt(t,60),this.wt(r,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function ND(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function OD(n){const e=64-function(r){let s=0;for(let c=0;c<8;++c){const u=ND(255&r[c]);if(s+=u,8!==u)break}return s}(n);return Math.ceil(e/8)}Tu.St=new Tu;class Ox{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Dt(r.value),r=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const s=t.codePointAt(0);this.Dt(240|s>>>18),this.Dt(128|63&s>>>12),this.Dt(128|63&s>>>6),this.Dt(128|63&s)}}this.Ct()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Nt(e){const t=this.Bt(e),r=OD(t);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}kt(e){const t=this.Bt(e),r=OD(t);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(c){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,c,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class LE{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class FD{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Cu{constructor(){this.Wt=new Ox,this.Gt=new LE(this.Wt),this.zt=new FD(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class qc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qc(this.indexId,this.documentKey,this.arrayValue,r)}}function Wc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=VE(n.arrayValue,e.arrayValue),0!==t?t:(t=VE(n.directionalValue,e.directionalValue),0!==t?t:Me.comparator(n.documentKey,e.documentKey)))}function VE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class UE{constructor(e){this.Jt=new hn((t,r)=>xn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ze(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=nE(e);if(void 0!==t&&!this.tn(t))return!1;const r=uu(e);let s=new Set,c=0,u=0;for(;c<r.length&&this.tn(r[c]);++c)s=s.add(r[c].fieldPath.canonicalString());if(c===r.length)return!0;if(this.Jt.size>0){const m=this.Jt.getIterator().getNext();if(!s.has(m.field.canonicalString())){const y=r[c];if(!this.nn(m,y)||!this.rn(this.Yt[u++],y))return!1}++c}for(;c<r.length;++c)if(u>=this.Yt.length||!this.rn(this.Yt[u++],r[c]))return!1;return!0}sn(){if(this.Xt)return null;let e=new hn(xn.comparator);const t=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new du(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new du(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new du(r.field,"asc"===r.dir?0:1)));return new Qp(Qp.UNKNOWN_ID,this.collectionId,t,ih.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function BE(n){var e,t;if(Ze(n instanceof $t||n instanceof fn),n instanceof $t){if(n instanceof ZC){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>$t.create(n.field,"==",c)))||[];return fn.create(s,"or")}return n}const r=n.filters.map(s=>BE(s));return fn.create(r,n.op)}function LD(n){if(0===n.getFilters().length)return[];const e=Lv(BE(n));return Ze(HE(e)),jE(e)||Fv(e)?[e]:e.getFilters()}function jE(n){return n instanceof $t}function Fv(n){return n instanceof fn&&ug(n)}function HE(n){return jE(n)||Fv(n)||function(t){if(t instanceof fn&&lg(t)){for(const r of t.getFilters())if(!jE(r)&&!Fv(r))return!1;return!0}return!1}(n)}function Lv(n){if(Ze(n instanceof $t||n instanceof fn),n instanceof $t)return n;if(1===n.filters.length)return Lv(n.filters[0]);const e=n.filters.map(r=>Lv(r));let t=fn.create(e,n.op);return t=Ag(t),HE(t)?t:(Ze(t instanceof fn),Ze(Ra(t)),Ze(t.filters.length>1),t.filters.reduce((r,s)=>Dg(r,s)))}function Dg(n,e){let t;return Ze(n instanceof $t||n instanceof fn),Ze(e instanceof $t||e instanceof fn),t=n instanceof $t?e instanceof $t?fn.create([n,e],"and"):$E(n,e):e instanceof $t?$E(e,n):function(s,c){if(Ze(s.filters.length>0&&c.filters.length>0),Ra(s)&&Ra(c))return _u(s,c.getFilters());const u=lg(s)?s:c,m=lg(s)?c:s,y=u.filters.map(w=>Dg(w,m));return fn.create(y,"or")}(n,e),Ag(t)}function $E(n,e){if(Ra(e))return _u(e,n.getFilters());{const t=e.filters.map(r=>Dg(n,r));return fn.create(t,"or")}}function Ag(n){if(Ze(n instanceof $t||n instanceof fn),n instanceof $t)return n;const e=n.getFilters();if(1===e.length)return Ag(e[0]);if(mu(n))return n;const t=e.map(s=>Ag(s)),r=[];return t.forEach(s=>{s instanceof $t?r.push(s):s instanceof fn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:fn.create(r,n.op)}class VD{constructor(){this.on=new Vv}addToCollectionParentIndex(e,t){return this.on.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(_i.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class Vv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new hn(Zt.comparator),c=!s.has(r);return this.index[t]=s.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new hn(Zt.comparator)).toArray()}}const Sg=new Uint8Array(0);class UD{constructor(e,t){this.user=e,this.databaseId=t,this._n=new Vv,this.an=new xa(r=>vu(r),(r,s)=>mh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const c={collectionId:r,parent:bi(s)};return zE(e).put(c)}return q.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[TC(t),""],!1,!0);return zE(e).W(s).next(c=>{for(const u of c){if(u.collectionId!==t)break;r.push(Do(u.parent))}return r})}addFieldIndex(e,t){const r=Rg(e),s={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var m;delete s.indexId;const c=r.add(s);if(t.indexState){const u=Au(e);return c.next(m=>{u.put(PD(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=Rg(e),s=Au(e),c=Du(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Rg(e),r=Du(e),s=Au(e);return t.H().next(()=>r.H()).next(()=>s.H())}createTargetIndexes(e,t){return q.forEach(this.un(t),r=>this.getIndexType(e,r).next(s=>{if(0===s||1===s){const c=new UE(r).sn();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,t){const r=Du(e);let s=!0;const c=new Map;return q.forEach(this.un(t),u=>this.cn(e,u).next(m=>{s&&(s=!!m),c.set(u,m)})).next(()=>{if(s){let u=At();const m=[];return q.forEach(c,(y,w)=>{var Ae;fe("IndexedDbIndexManager",`Using index ${Ae=y,`id=${Ae.indexId}|cg=${Ae.collectionGroup}|f=${Ae.fields.map(Je=>`${Je.fieldPath}:${Je.kind}`).join(",")}`} to execute ${vu(t)}`);const D=function(Ae,Je){const vt=nE(Je);if(void 0===vt)return null;for(const Yt of Av(Ae,vt.fieldPath))switch(Yt.op){case"array-contains-any":return Yt.value.arrayValue.values||[];case"array-contains":return[Yt.value]}return null}(w,y),S=function(Ae,Je){const vt=new Map;for(const Yt of uu(Je))for(const Cr of Av(Ae,Yt.fieldPath))switch(Cr.op){case"==":case"in":vt.set(Yt.fieldPath.canonicalString(),Cr.value);break;case"not-in":case"!=":return vt.set(Yt.fieldPath.canonicalString(),Cr.value),Array.from(vt.values())}return null}(w,y),M=function(Ae,Je){const vt=[];let Yt=!0;for(const Cr of uu(Je)){const qs=0===Cr.kind?vx(Ae,Cr.fieldPath,Ae.startAt):YC(Ae,Cr.fieldPath,Ae.startAt);vt.push(qs.value),Yt&&(Yt=qs.inclusive)}return new jc(vt,Yt)}(w,y),V=function(Ae,Je){const vt=[];let Yt=!0;for(const Cr of uu(Je)){const qs=0===Cr.kind?YC(Ae,Cr.fieldPath,Ae.endAt):vx(Ae,Cr.fieldPath,Ae.endAt);vt.push(qs.value),Yt&&(Yt=qs.inclusive)}return new jc(vt,Yt)}(w,y),ee=this.ln(y,w,M),ne=this.ln(y,w,V),ue=this.hn(y,w,S),Ee=this.Pn(y.indexId,D,ee,M.inclusive,ne,V.inclusive,ue);return q.forEach(Ee,Ue=>r.j(Ue,t.limit).next(Ae=>{Ae.forEach(Je=>{const vt=Me.fromSegments(Je.documentKey);u.has(vt)||(u=u.add(vt),m.push(vt))})}))}).next(()=>m)}return q.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:LD(fn.create(e.filters,"and")).map(r=>pE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,r,s,c,u,m){const y=(null!=t?t.length:1)*Math.max(r.length,c.length),w=y/(null!=t?t.length:1),D=[];for(let S=0;S<y;++S){const M=t?this.In(t[S/w]):Sg,V=this.Tn(e,M,r[S%w],s),ee=this.En(e,M,c[S%w],u),ne=m.map(ue=>this.Tn(e,M,ue,!0));D.push(...this.createRange(V,ee,ne))}return D}Tn(e,t,r,s){const c=new qc(e,Me.empty(),t,r);return s?c:c.Ht()}En(e,t,r,s){const c=new qc(e,Me.empty(),t,r);return s?c.Ht():c}cn(e,t){const r=new UE(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(c=>{let u=null;for(const m of c)r.en(m)&&(!u||m.fields.length>u.fields.length)&&(u=m);return u})}getIndexType(e,t){let r=2;const s=this.un(t);return q.forEach(s,c=>this.cn(e,c).next(u=>{u?0!==r&&u.fields.length<function(y){let w=new hn(xn.comparator),D=!1;for(const S of y.filters)for(const M of S.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?D=!0:w=w.add(M.field));for(const S of y.orderBy)S.field.isKeyField()||(w=w.add(S.field));return w.size+(D?1:0)}(c)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}dn(e,t){const r=new Cu;for(const s of uu(e)){const c=t.data.field(s.fieldPath);if(null==c)return null;const u=r.jt(s.kind);Tu.St.ht(c,u)}return r.Ut()}In(e){const t=new Cu;return Tu.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const r=new Cu;return Tu.St.ht(zo(this.databaseId,t),r.jt(function(c){const u=uu(c);return 0===u.length?0:u[u.length-1].kind}(e))),r.Ut()}hn(e,t,r){if(null===r)return[];let s=[];s.push(new Cu);let c=0;for(const u of uu(e)){const m=r[c++];for(const y of s)if(this.Rn(t,u.fieldPath)&&Bc(m))s=this.Vn(s,u,m);else{const w=y.jt(u.kind);Tu.St.ht(m,w)}}return this.mn(s)}ln(e,t,r){return this.hn(e,t,r.position)}mn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ut();return t}Vn(e,t,r){const s=[...e],c=[];for(const u of r.arrayValue.values||[])for(const m of s){const y=new Cu;y.seed(m.Ut()),Tu.St.ht(u,y.jt(t.kind)),c.push(y)}return c}Rn(e,t){return!!e.filters.find(r=>r instanceof $t&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Rg(e),s=Au(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(c=>{const u=[];return q.forEach(c,m=>s.get([m.indexId,this.uid]).next(y=>{u.push(function(D,S){const M=S?new ih(S.sequenceNumber,new _i(wu(S.readTime),new Me(Do(S.documentKey)),S.largestBatchId)):ih.empty(),V=D.fields.map(([ee,ne])=>new du(xn.fromServerFormat(ee),ne));return new Qp(D.indexId,D.collectionGroup,V,M)}(m,y))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const c=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==c?c:_t(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Rg(e),c=Au(e);return this.fn(e).next(u=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>q.forEach(m,y=>c.put(PD(y.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(s,c)=>{const u=r.get(s.collectionGroup);return(u?q.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),q.forEach(m,y=>this.gn(e,s,y).next(w=>{const D=this.pn(c,y);return w.isEqual(D)?q.resolve():this.yn(e,c,y,w,D)}))))})}wn(e,t,r,s){return Du(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.An(r,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,r,s){return Du(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.An(r,t.key),t.key.path.toArray()])}gn(e,t,r){const s=Du(e);let c=new hn(Wc);return s.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,t)])},(u,m)=>{c=c.add(new qc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>c)}pn(e,t){let r=new hn(Wc);const s=this.dn(t,e);if(null==s)return r;const c=nE(t);if(null!=c){const u=e.data.field(c.fieldPath);if(Bc(u))for(const m of u.arrayValue.values||[])r=r.add(new qc(t.indexId,e.key,this.In(m),s))}else r=r.add(new qc(t.indexId,e.key,Sg,s));return r}yn(e,t,r,s,c){fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(y,w,D,S,M){const V=y.getIterator(),ee=w.getIterator();let ne=lh(V),ue=lh(ee);for(;ne||ue;){let Ee=!1,Ue=!1;if(ne&&ue){const Ae=D(ne,ue);Ae<0?Ue=!0:Ae>0&&(Ee=!0)}else null!=ne?Ue=!0:Ee=!0;Ee?(S(ue),ue=lh(ee)):Ue?(M(ne),ne=lh(V)):(ne=lh(V),ue=lh(ee))}}(s,c,Wc,m=>{u.push(this.wn(e,t,r,m))},m=>{u.push(this.Sn(e,t,r,m))}),q.waitFor(u)}fn(e){let t=1;return Au(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,c)=>{c.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,m)=>Wc(u,m)).filter((u,m,y)=>!m||0!==Wc(u,y[m-1]));const s=[];s.push(e);for(const u of r){const m=Wc(u,e),y=Wc(u,t);if(0===m)s[0]=e.Ht();else if(m>0&&y<0)s.push(u),s.push(u.Ht());else if(y>0)break}s.push(t);const c=[];for(let u=0;u<s.length;u+=2){if(this.bn(s[u],s[u+1]))return[];c.push(IDBKeyRange.bound([s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,Sg,[]],[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,Sg,[]]))}return c}bn(e,t){return Wc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(BD)}getMinOffset(e,t){return q.mapArray(this.un(t),r=>this.cn(e,r).next(s=>s||Ve())).next(BD)}}function zE(n){return Tr(n,"collectionParents")}function Du(n){return Tr(n,"indexEntries")}function Rg(n){return Tr(n,"indexConfiguration")}function Au(n){return Tr(n,"indexState")}function BD(n){Ze(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;hu(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new _i(e.readTime,e.documentKey,t)}const jD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class si{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new si(e,si.DEFAULT_COLLECTION_PERCENTILE,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HD(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),c=[],u=IDBKeyRange.only(t.batchId);let m=0;const y=r.Y({range:u},(D,S,M)=>(m++,M.delete()));c.push(y.next(()=>{Ze(1===m)}));const w=[];for(const D of t.mutations){const S=MC(e,D.key.path,t.batchId);c.push(s.delete(S)),w.push(D.key)}return q.waitFor(c).next(()=>w)}function Uv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ve();e=n.noDocument}return JSON.stringify(e).length}si.DEFAULT_COLLECTION_PERCENTILE=10,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,si.DEFAULT=new si(41943040,si.DEFAULT_COLLECTION_PERCENTILE,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),si.DISABLED=new si(-1,0,0);class Bv{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Dn={}}static ct(e,t,r,s){Ze(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Bv(c,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zc(e).Y({index:"userMutationsIndex",range:r},(s,c,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const c=Nh(e),u=Zc(e);return u.add({}).next(m=>{Ze("number"==typeof m);const y=new Sh(m,t,r,s),w=function(V,ee,ne){const ue=ne.baseMutations.map(Ue=>Ig(V.ut,Ue)),Ee=ne.mutations.map(Ue=>Ig(V.ut,Ue));return{userId:ee,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:ue,mutations:Ee}}(this.serializer,this.userId,y),D=[];let S=new hn((M,V)=>_t(M.canonicalString(),V.canonicalString()));for(const M of s){const V=MC(this.userId,M.key.path,m);S=S.add(M.key.path.popLast()),D.push(u.put(w)),D.push(c.put(V,lx))}return S.forEach(M=>{D.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.Dn[m]=y.keys()}),q.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return Zc(e).get(t).next(r=>r?(Ze(r.userId===this.userId),Gc(this.serializer,r)):null)}Cn(e,t){return this.Dn[t]?q.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Dn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Zc(e).Y({index:"userMutationsIndex",range:s},(u,m,y)=>{m.userId===this.userId&&(Ze(m.batchId>=r),c=Gc(this.serializer,m)),y.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zc(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(s,c,u)=>{r=c.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zc(e).W("userMutationsIndex",t).next(r=>r.map(s=>Gc(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tg(this.userId,t.path),s=IDBKeyRange.lowerBound(r),c=[];return Nh(e).Y({range:s},(u,m,y)=>{const[w,D,S]=u,M=Do(D);if(w===this.userId&&t.path.isEqual(M))return Zc(e).get(S).next(V=>{if(!V)throw Ve();Ze(V.userId===this.userId),c.push(Gc(this.serializer,V))});y.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(_t);const s=[];return t.forEach(c=>{const u=tg(this.userId,c.path),m=IDBKeyRange.lowerBound(u),y=Nh(e).Y({range:m},(w,D,S)=>{const[M,V,ee]=w,ne=Do(V);M===this.userId&&c.path.isEqual(ne)?r=r.add(ee):S.done()});s.push(y)}),q.waitFor(s).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,c=tg(this.userId,r),u=IDBKeyRange.lowerBound(c);let m=new hn(_t);return Nh(e).Y({range:u},(y,w,D)=>{const[S,M,V]=y,ee=Do(M);S===this.userId&&r.isPrefixOf(ee)?ee.length===s&&(m=m.add(V)):D.done()}).next(()=>this.vn(e,m))}vn(e,t){const r=[],s=[];return t.forEach(c=>{s.push(Zc(e).get(c).next(u=>{if(null===u)throw Ve();Ze(u.userId===this.userId),r.push(Gc(this.serializer,u))}))}),q.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return HD(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),q.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Nh(e).Y({range:r},(c,u,m)=>{if(c[0]===this.userId){const y=Do(c[1]);s.push(y)}else m.done()}).next(()=>{Ze(0===s.length)})})}containsKey(e,t){return $D(e,this.userId,t)}Mn(e){return GE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $D(n,e,t){const r=tg(e,t.path),s=r[1],c=IDBKeyRange.lowerBound(r);let u=!1;return Nh(n).Y({range:c,J:!0},(m,y,w)=>{const[D,S,M]=m;D===e&&S===s&&(u=!0),w.done()}).next(()=>u)}function Zc(n){return Tr(n,"mutations")}function Nh(n){return Tr(n,"documentMutations")}function GE(n){return Tr(n,"mutationQueues")}class Kc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Kc(0)}static Nn(){return new Kc(-1)}}class zD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Kc(t.highestTargetId);return t.highestTargetId=r.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ye.fromTimestamp(new Un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Ln(e,s)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(t,r),this.Ln(e,r))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Su(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Ze(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,t,r){let s=0;const c=[];return Su(e).Y((u,m)=>{const y=wg(m);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(s++,c.push(this.removeTargetData(e,y)))}).next(()=>q.waitFor(c)).next(()=>s)}forEachTarget(e,t){return Su(e).Y((r,s)=>{const c=wg(s);t(c)})}Bn(e){return qE(e).get("targetGlobalKey").next(t=>(Ze(null!==t),t))}Ln(e,t){return qE(e).put("targetGlobalKey",t)}kn(e,t){return Su(e).put(xD(this.serializer,t))}qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=vu(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Su(e).Y({range:s,index:"queryTargetsIndex"},(u,m,y)=>{const w=wg(m);mh(t,w.target)&&(c=w,y.done())}).next(()=>c)}addMatchingKeys(e,t,r){const s=[],c=La(e);return t.forEach(u=>{const m=bi(u.path);s.push(c.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,u))}),q.waitFor(s)}removeMatchingKeys(e,t,r){const s=La(e);return q.forEach(t,c=>{const u=bi(c.path);return q.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=La(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=La(e);let c=At();return s.Y({range:r,J:!0},(u,m,y)=>{const w=Do(u[1]),D=new Me(w);c=c.add(D)}).next(()=>c)}containsKey(e,t){const r=bi(t.path),s=IDBKeyRange.bound([r],[TC(r)],!1,!0);let c=0;return La(e).Y({index:"documentTargetsIndex",J:!0,range:s},([u,m],y,w)=>{0!==u&&(c++,w.done())}).next(()=>c>0)}_t(e,t){return Su(e).get(t).next(r=>r?wg(r):null)}}function Su(n){return Tr(n,"targets")}function qE(n){return Tr(n,"targetGlobal")}function La(n){return Tr(n,"targetDocuments")}function WE([n,e],[t,r]){const s=_t(n,t);return 0===s?_t(e,r):s}class GD{constructor(e){this.Qn=e,this.buffer=new hn(WE),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();WE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,le.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ca(r)?fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ta(r)}yield t.Gn(3e5)}))}}class qD{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return q.resolve(yi._e);const r=new GD(t);return this.zn.forEachTarget(e,s=>r.Un(s.sequenceNumber)).next(()=>this.zn.Hn(e,s=>r.Un(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(jD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jD):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let r,s,c,u,m,y,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),s=this.params.maximumSequenceNumbersToCollect):s=S,u=Date.now(),this.nthSequenceNumber(e,s))).next(S=>(r=S,m=Date.now(),this.removeTargets(e,r,t))).next(S=>(c=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),lu()<=Ms.in.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-D}ms\n\tDetermined least recently used ${s} in `+(m-u)+`ms\n\tRemoved ${c} targets in `+(y-m)+`ms\n\tRemoved ${S} documents in `+(w-y)+`ms\nTotal Duration: ${w-D}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:c,documentsRemoved:S})))}}class Fx{constructor(e,t){this.db=e,this.garbageCollector=function KE(n,e){return new qD(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Yn(e){let t=0;return this.Hn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(r,s)=>t(s))}addReference(e,t,r){return jv(e,r)}removeReference(e,t,r){return jv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jv(e,t)}Xn(e,t){return function(s,c){let u=!1;return GE(s).Z(m=>$D(s,m,c).next(y=>(y&&(u=!0),q.resolve(!y)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let c=0;return this.Zn(e,(u,m)=>{if(m<=t){const y=this.Xn(e,u).next(w=>{if(!w)return c++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ye.min()),La(e).delete([0,bi(u.path)])))});s.push(y)}}).next(()=>q.waitFor(s)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jv(e,t)}Zn(e,t){const r=La(e);let s,c=yi._e;return r.Y({index:"documentTargetsIndex"},([u,m],{path:y,sequenceNumber:w})=>{0===u?(c!==yi._e&&t(new Me(Do(s)),c),c=w,s=y):c=yi._e}).next(()=>{c!==yi._e&&t(new Me(Do(s)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jv(n,e){return La(n).put((s=n.currentSequenceNumber,{targetId:0,path:bi(e.path),sequenceNumber:s}));var s}class Hv{constructor(){this.changes=new xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $v{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yc(e).put(r)}removeEntry(e,t,r){return Yc(e).delete(function(c,u){const m=c.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Ov(u),m[m.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.er(e,r)))}getEntry(e,t){let r=jt.newInvalidDocument(t);return Yc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(s,c)=>{r=this.tr(t,c)}).next(()=>r)}nr(e,t){let r={size:0,document:jt.newInvalidDocument(t)};return Yc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(s,c)=>{r={document:this.tr(t,c),size:Uv(c)}}).next(()=>r)}getEntries(e,t){let r=Ei();return this.rr(e,t,(s,c)=>{const u=this.tr(s,c);r=r.insert(s,u)}).next(()=>r)}ir(e,t){let r=Ei(),s=new bn(Me.comparator);return this.rr(e,t,(c,u)=>{const m=this.tr(c,u);r=r.insert(c,m),s=s.insert(c,Uv(u))}).next(()=>({documents:r,sr:s}))}rr(e,t,r){if(t.isEmpty())return q.resolve();let s=new hn(XE);t.forEach(y=>s=s.add(y));const c=IDBKeyRange.bound(Oh(s.first()),Oh(s.last())),u=s.getIterator();let m=u.getNext();return Yc(e).Y({index:"documentKeyIndex",range:c},(y,w,D)=>{const S=Me.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;m&&XE(m,S)<0;)r(m,null),m=u.getNext();m&&m.isEqual(S)&&(r(m,w),m=u.hasNext()?u.getNext():null),m?D.U(Oh(m)):D.done()}).next(()=>{for(;m;)r(m,null),m=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,c){const u=t.path,m=[u.popLast().toArray(),u.lastSegment(),Ov(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],y=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yc(e).W(IDBKeyRange.bound(m,y,!0)).next(w=>{c?.incrementDocumentReadCount(w.length);let D=Ei();for(const S of w){const M=this.tr(Me.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);M.isFoundDocument()&&(fg(t,M)||s.has(M.key))&&(D=D.insert(M.key,M))}return D})}getAllFromCollectionGroup(e,t,r,s){let c=Ei();const u=JE(t,r),m=JE(t,_i.max());return Yc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,m,!0)},(y,w,D)=>{const S=this.tr(Me.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);c=c.insert(S.key,S),c.size===s&&D.done()}).next(()=>c)}newChangeBuffer(e){return new YE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QE(e).get("remoteDocumentGlobalKey").next(t=>(Ze(!!t),t))}er(e,t){return QE(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const r=function kx(n,e){let t;if(e.document)t=ID(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Me.fromSegments(e.noDocument.path),s=wu(e.noDocument.readTime);t=jt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ve();{const r=Me.fromSegments(e.unknownDocument.path),s=wu(e.unknownDocument.version);t=jt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const c=new Un(s[0],s[1]);return Ye.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ye.min()))return r}return jt.newInvalidDocument(e)}}function zv(n){return new $v(n)}class YE extends Hv{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new xa(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new hn((c,u)=>_t(c.canonicalString(),u.canonicalString()));return this.changes.forEach((c,u)=>{const m=this.ar.get(c);if(t.push(this._r.removeEntry(e,c,m.readTime)),u.isValidDocument()){const y=RD(this._r.serializer,u);s=s.add(c.path.popLast());const w=Uv(y);r+=w-m.size,t.push(this._r.addEntry(e,c,y))}else if(r-=m.size,this.trackRemovals){const y=RD(this._r.serializer,u.convertToNoDocument(Ye.min()));t.push(this._r.addEntry(e,c,y))}}),s.forEach(c=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,c))}),t.push(this._r.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(r=>(this.ar.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:r,sr:s})=>(s.forEach((c,u)=>{this.ar.set(c,{size:u,readTime:r.get(c).readTime})}),r))}}function QE(n){return Tr(n,"remoteDocumentGlobal")}function Yc(n){return Tr(n,"remoteDocumentsV14")}function Oh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JE(n,e){const t=e.documentKey.path.toArray();return[n,Ov(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XE(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(s=_t(t[c],r[c]),s)return s;return s=_t(t.length,r.length),s||(s=_t(t[t.length-2],r[r.length-2]),s||_t(t[t.length-1],r[r.length-1]))}class WD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ZD{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Ch(r.mutation,s,Fi.empty(),Un.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,At()).next(()=>r))}getLocalViewOfDocuments(e,t,r=At()){const s=Go();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(c=>{let u=bh();return c.forEach((m,y)=>{u=u.insert(m,y.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Go();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,At()))}populateOverlays(e,t,r){const s=[];return r.forEach(c=>{t.has(c)||s.push(c)}),this.documentOverlayCache.getOverlays(e,s).next(c=>{c.forEach((u,m)=>{t.set(u,m)})})}computeViews(e,t,r,s){let c=Ei();const u=Pa(),m=Pa();return t.forEach((y,w)=>{const D=r.get(w.key);s.has(w.key)&&(void 0===D||D.mutation instanceof Oa)?c=c.insert(w.key,w):void 0!==D?(u.set(w.key,D.mutation.getFieldMask()),Ch(D.mutation,w,D.mutation.getFieldMask(),Un.now())):u.set(w.key,Fi.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((w,D)=>u.set(w,D)),t.forEach((w,D)=>{var S;return m.set(w,new WD(D,null!==(S=u.get(w))&&void 0!==S?S:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Pa();let s=new bn((u,m)=>u-m),c=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const m of u)m.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let D=r.get(y)||Fi.empty();D=m.applyToLocalView(w,D),r.set(y,D);const S=(s.get(m.batchId)||At()).add(y);s=s.insert(m.batchId,S)})}).next(()=>{const u=[],m=s.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),w=y.key,D=y.value,S=_E();D.forEach(M=>{if(!c.has(M)){const V=Mv(t.get(M),r.get(M));null!==V&&S.set(M,V),c=c.add(M)}}),u.push(this.documentOverlayCache.saveOverlays(e,w,S))}return q.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return Me.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):gE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s);var u}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(c=>{const u=s-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-c.size):q.resolve(Go());let m=-1,y=c;return u.next(w=>q.forEach(w,(D,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),c.get(D)?q.resolve():this.remoteDocumentCache.getEntry(e,D).next(M=>{y=y.insert(D,M)}))).next(()=>this.populateOverlays(e,w,c)).next(()=>this.computeViews(e,y,w,At())).next(D=>({batchId:m,changes:rD(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next(r=>{let s=bh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const c=t.collectionGroup;let u=bh();return this.indexManager.getCollectionParents(e,c).next(m=>q.forEach(m,y=>{const w=(S=t,M=y.child(c),new Us(M,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt));var S,M;return this.getDocumentsMatchingCollectionQuery(e,w,r,s).next(D=>{D.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,s))).next(u=>{c.forEach((y,w)=>{const D=w.getKey();null===u.get(D)&&(u=u.insert(D,jt.newInvalidDocument(D)))});let m=bh();return u.forEach((y,w)=>{const D=c.get(y);void 0!==D&&Ch(D.mutation,w,Fi.empty(),Un.now()),fg(t,w)&&(m=m.insert(y,w))}),m})}}class ew{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return q.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(s=t).id,version:s.version,createTime:mr(s.createTime)}),q.resolve();var s}getNamedQuery(e,t){return q.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(s=t).name,query:NE(s.bundledQuery),readTime:mr(s.readTime)}),q.resolve();var s}}class tw{constructor(){this.overlays=new bn(Me.comparator),this.lr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Go();return q.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,c)=>{this.lt(e,t,c)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.lr.get(r);return void 0!==s&&(s.forEach(c=>this.overlays=this.overlays.remove(c)),this.lr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const s=Go(),c=t.length+1,u=new Me(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const y=m.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===c&&y.largestBatchId>r&&s.set(y.getKey(),y)}return q.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let c=new bn((w,D)=>w-D);const u=this.overlays.getIterator();for(;u.hasNext();){const w=u.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=c.get(w.largestBatchId);null===D&&(D=Go(),c=c.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const m=Go(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,D)=>m.set(w,D)),!(m.size()>=s)););return q.resolve(m)}lt(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const u=this.lr.get(s.largestBatchId).delete(r.key);this.lr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Pv(t,r));let c=this.lr.get(t);void 0===c&&(c=At(),this.lr.set(t,c)),this.lr.set(t,c.add(r.key))}}class Gv{constructor(){this.hr=new hn(_r.Pr),this.Ir=new hn(_r.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const r=new _r(e,t);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.dr(new _r(e,t))}Ar(e,t){e.forEach(r=>this.removeReference(r,t))}Rr(e){const t=new Me(new Zt([])),r=new _r(t,e),s=new _r(t,e+1),c=[];return this.Ir.forEachInRange([r,s],u=>{this.dr(u),c.push(u.key)}),c}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Me(new Zt([])),r=new _r(t,e),s=new _r(t,e+1);let c=At();return this.Ir.forEachInRange([r,s],u=>{c=c.add(u.key)}),c}containsKey(e){const t=new _r(e,0),r=this.hr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class _r{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Me.comparator(e.key,t.key)||_t(e.gr,t.gr)}static Tr(e,t){return _t(e.gr,t.gr)||Me.comparator(e.key,t.key)}}class Lx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new hn(_r.Pr)}checkEmpty(e){return q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const c=this.pr;this.pr++;const u=new Sh(c,t,r,s);this.mutationQueue.push(u);for(const m of s)this.yr=this.yr.add(new _r(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return q.resolve(u)}lookupMutationBatch(e,t){return q.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Sr(t+1),c=s<0?0:s;return q.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _r(t,0),s=new _r(t,Number.POSITIVE_INFINITY),c=[];return this.yr.forEachInRange([r,s],u=>{const m=this.wr(u.gr);c.push(m)}),q.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(_t);return t.forEach(s=>{const c=new _r(s,0),u=new _r(s,Number.POSITIVE_INFINITY);this.yr.forEachInRange([c,u],m=>{r=r.add(m.gr)})}),q.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let c=r;Me.isDocumentKey(c)||(c=c.child(""));const u=new _r(new Me(c),0);let m=new hn(_t);return this.yr.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===s&&(m=m.add(y.gr)),!0)},u),q.resolve(this.br(m))}br(e){const t=[];return e.forEach(r=>{const s=this.wr(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Ze(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return q.forEach(t.mutations,s=>{const c=new _r(s.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,t){const r=new _r(t,0),s=this.yr.firstAfterOrEqual(r);return q.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return q.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vx{constructor(e){this.Cr=e,this.docs=new bn(Me.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),c=s?s.size:0,u=this.Cr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let r=Ei();return t.forEach(s=>{const c=this.docs.get(s);r=r.insert(s,c?c.document.mutableCopy():jt.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let c=Ei();const u=t.path,m=new Me(u.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:w,value:{document:D}}=y.getNext();if(!u.isPrefixOf(w.path))break;w.path.length>u.length+1||hu(DC(D),r)<=0||(s.has(D.key)||fg(t,D))&&(c=c.insert(D.key,D.mutableCopy()))}return q.resolve(c)}getAllFromCollectionGroup(e,t,r,s){Ve()}vr(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nw(this)}getSize(e){return q.resolve(this.size)}}class nw extends Hv{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this._r.addEntry(e,s)):this._r.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Ux{constructor(e){this.persistence=e,this.Fr=new xa(t=>vu(t),mh),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Gv,this.targetCount=0,this.Nr=Kc.On()}forEachTarget(e,t){return this.Fr.forEach((r,s)=>t(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Mr&&(this.Mr=t),q.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.kn(t),q.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let s=0;const c=[];return this.Fr.forEach((u,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fr.delete(u),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),q.waitFor(c).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Or.Er(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Or.Ar(t,r);const s=this.persistence.referenceDelegate,c=[];return s&&t.forEach(u=>{c.push(s.markPotentiallyOrphaned(e,u))}),q.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Or.mr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Or.containsKey(t))}}class qv{constructor(e,t){this.Br={},this.overlays={},this.Lr=new yi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Ux(this),this.indexManager=new VD,this.remoteDocumentCache=new Vx(r=>this.referenceDelegate.Qr(r)),this.serializer=new kE(t),this.Kr=new ew(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new Lx(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const s=new Ru(this.Lr.next());return this.referenceDelegate.$r(),r(s).next(c=>this.referenceDelegate.Ur(s).next(()=>c)).toPromise().then(c=>(s.raiseOnCommittedEvent(),c))}Wr(e,t){return q.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class Ru extends Jp{constructor(e){super(),this.currentSequenceNumber=e}}class xg{constructor(e){this.persistence=e,this.Gr=new Gv,this.zr=null}static jr(e){return new xg(e)}get Hr(){if(this.zr)return this.zr;throw Ve()}addReference(e,t,r){return this.Gr.addReference(r,t),this.Hr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Gr.removeReference(r,t),this.Hr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(s=>this.Hr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(c=>this.Hr.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Hr,r=>{const s=Me.fromPath(r);return this.Jr(e,s).next(c=>{c||t.removeEntry(s,Ye.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(r=>{r?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return q.or([()=>q.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class OP{constructor(e){this.serializer=e}N(e,t,r,s){const c=new _v("createOrUpgrade",t);var y;r<1&&s>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xC,{unique:!0}),y.createObjectStore("documentMutations"),Zv(e),function(y){y.createObjectStore("remoteDocuments")}(e));let u=q.resolve();return r<3&&s>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),Zv(e)),u=u.next(()=>function(y){const w=y.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ye.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(c))),r<4&&s>=4&&(0!==r&&(u=u.next(()=>function(y,w){return w.store("mutations").W().next(D=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xC,{unique:!0});const S=w.store("mutations"),M=D.map(V=>S.put(V));return q.waitFor(M)})}(e,c))),u=u.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(u=u.next(()=>this.Zr(c))),r<6&&s>=6&&(u=u.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(c)))),r<7&&s>=7&&(u=u.next(()=>this.ei(c))),r<8&&s>=8&&(u=u.next(()=>this.ti(e,c))),r<9&&s>=9&&(u=u.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(u=u.next(()=>this.ni(c))),r<11&&s>=11&&(u=u.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(u=u.next(()=>{!function(y){const w=y.createObjectStore("documentOverlays",{keyPath:ng});w.createIndex("collectionPathOverlayIndex",FC,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",sh,{unique:!1})}(e)})),r<13&&s>=13&&(u=u.next(()=>function(y){const w=y.createObjectStore("remoteDocumentsV14",{keyPath:PC});w.createIndex("documentKeyIndex",ux),w.createIndex("collectionGroupIndex",dx)}(e)).next(()=>this.ri(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(u=u.next(()=>this.ii(e,c))),r<15&&s>=15&&(u=u.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:oE}).createIndex("sequenceNumberIndex",kC,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:NC}).createIndex("documentKeyIndex",OC,{unique:!1})}(e))),u}Xr(e){let t=0;return e.store("remoteDocuments").Y((r,s)=>{t+=Uv(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>q.forEach(s,c=>{const u=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(m=>q.forEach(m,y=>{Ze(y.userId===c.userId);const w=Gc(this.serializer,y);return HD(e,c.userId,w).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const c=[];return r.Y((u,m)=>{const y=new Zt(u),w=[0,bi(y)];c.push(t.get(w).next(D=>D?q.resolve():t.put({targetId:0,path:bi(y),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>q.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:fx});const r=t.store("collectionParents"),s=new Vv,c=u=>{if(s.add(u)){const m=u.lastSegment(),y=u.popLast();return r.put({collectionId:m,parent:bi(y)})}};return t.store("remoteDocuments").Y({J:!0},(u,m)=>{const y=new Zt(u);return c(y.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([u,m,y],w)=>{const D=Do(m);return c(D.popLast())}))}ni(e){const t=e.store("targets");return t.Y((r,s)=>{const c=wg(s),u=xD(this.serializer,c);return t.put(u)})}ri(e,t){const r=t.store("remoteDocuments"),s=[];return r.Y((c,u)=>{const m=t.store("remoteDocumentsV14"),y=(S=u,S.document?new Me(Zt.fromString(S.document.name).popFirst(5)):S.noDocument?Me.fromSegments(S.noDocument.path):S.unknownDocument?Me.fromSegments(S.unknownDocument.path):Ve()).path.toArray(),w={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};var S;s.push(m.put(w))}).next(()=>q.waitFor(s))}ii(e,t){const r=t.store("mutations"),s=zv(this.serializer),c=new qv(xg.jr,this.serializer.ut);return r.W().next(u=>{const m=new Map;return u.forEach(y=>{var w;let D=null!==(w=m.get(y.userId))&&void 0!==w?w:At();Gc(this.serializer,y).keys().forEach(S=>D=D.add(S)),m.set(y.userId,D)}),q.forEach(m,(y,w)=>{const D=new pr(w),S=Tg.ct(this.serializer,D),M=c.getIndexManager(D),V=Bv.ct(D,this.serializer,M,c.referenceDelegate);return new ZD(s,V,S,M).recalculateAndSaveOverlaysForDocumentKeys(new yv(t,yi._e),y).next()})})}}function Zv(n){n.createObjectStore("targetDocuments",{keyPath:hx}).createIndex("documentTargetsIndex",iE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oh,{unique:!0}),n.createObjectStore("targetGlobal")}const Mg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rw{constructor(e,t,r,s,c,u,m,y,w,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=c,this.window=u,this.document=m,this.oi=w,this._i=D,this.ai=S,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=M=>Promise.resolve(),!rw.D())throw new ge(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fx(this,s),this.Ii=t+"main",this.serializer=new kE(y),this.Ti=new vi(this.Ii,this.ai,new OP(this.serializer)),this.qr=new zD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zv(this.serializer),this.Kr=new Nx,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===D&&tn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(Z.FAILED_PRECONDITION,Mg);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new yi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var r=(0,le.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,le.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,le.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(Ca(e))return fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Fh(e).get("owner").next(t=>q.resolve(this.wi(t)))}Si(e){return Pg(e).delete(this.clientId)}bi(){var e=this;return(0,le.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Tr(r,"clientMetadata");return s.W().next(c=>{const u=e.Ci(c,18e5),m=c.filter(y=>-1===u.indexOf(y));return q.forEach(m,y=>s.delete(y.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Ei)for(const r of t)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?q.resolve(!0):Fh(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new ge(Z.FAILED_PRECONDITION,Mg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pg(e).W().next(r=>void 0===this.Ci(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,le.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new yv(t,yi._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(r=>this.Di(r.updateTimeMs,t)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Pg(e).W().next(t=>this.Ci(t,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return Bv.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UD(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Tg.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,r){fe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",c=15===(y=this.ai)?px:14===y?LC:13===y?rg:12===y?sE:11===y?ah:void Ve();var y;let u;return this.Ti.runTransaction(e,s,c,m=>(u=new yv(m,this.Lr?this.Lr.next():yi._e),"readwrite-primary"===t?this.fi(u).next(y=>!!y||this.gi(u)).next(y=>{if(!y)throw tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new ge(Z.FAILED_PRECONDITION,mv);return r(u)}).next(y=>this.yi(u).next(()=>y)):this.Li(u).next(()=>r(u)))).then(m=>(u.raiseOnCommittedEvent(),m))}Li(e){return Fh(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(Z.FAILED_PRECONDITION,Mg)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fh(e).put("owner",t)}static D(){return vi.D()}pi(e){const t=Fh(e);return t.get("owner").next(r=>this.wi(r)?(fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve())}Di(e,t){const r=Date.now();return!(e<r-t||e>r&&(tn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,yn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const r=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){tn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fh(n){return Tr(n,"owner")}function Pg(n){return Tr(n,"clientMetadata")}function iw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Kv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ki=r,this.qi=s}static Qi(e,t){let r=At(),s=At();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:s=s.add(c.doc.key)}return new Kv(e,t.fromCache,r,s)}}class Bx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class KD{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,r,s){const c={result:null};return this.zi(e,t).next(u=>{c.result=u}).next(()=>{if(!c.result)return this.ji(e,t,s,r).next(u=>{c.result=u})}).next(()=>{if(c.result)return;const u=new Bx;return this.Hi(e,t,u).next(m=>{if(c.result=m,this.$i)return this.Ji(e,t,u,m.size)})}).next(()=>c.result)}Ji(e,t,r,s){return r.documentReadCount<this.Ui?(lu()<=Ms.in.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",yh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),q.resolve()):(lu()<=Ms.in.DEBUG&&fe("QueryEngine","Query:",yh(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Wi*s?(lu()<=Ms.in.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",yh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ii(t))):q.resolve())}zi(e,t){if(QC(t))return q.resolve(null);let r=Ii(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Rv(t,null,"F"),r=Ii(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const u=At(...c);return this.Gi.getDocuments(e,u).next(m=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.Yi(t,m);return this.Zi(t,w,u,y.readTime)?this.zi(e,Rv(t,null,"F")):this.Xi(e,w,t,y)}))})))}ji(e,t,r,s){return QC(t)||s.isEqual(Ye.min())?q.resolve(null):this.Gi.getDocuments(e,r).next(c=>{const u=this.Yi(t,c);return this.Zi(t,u,r,s)?q.resolve(null):(lu()<=Ms.in.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yh(t)),this.Xi(e,u,t,CC(s,-1)).next(m=>m))})}Yi(e,t){let r=new hn(tD(e));return t.forEach((s,c)=>{fg(e,c)&&(r=r.add(c))}),r}Zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(s)>0)}Hi(e,t,r){return lu()<=Ms.in.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",yh(t)),this.Gi.getDocumentsMatchingQuery(e,t,_i.min(),r)}Xi(e,t,r,s){return this.Gi.getDocumentsMatchingQuery(e,r,s).next(c=>(t.forEach(u=>{c=c.insert(u.key,u)}),c))}}class Yv{constructor(e,t,r,s){this.persistence=e,this.es=t,this.serializer=s,this.ts=new bn(_t),this.ns=new xa(c=>vu(c),mh),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZD(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function ow(n,e,t,r){return new Yv(n,e,t,r)}function Qv(n,e){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,le.Z)(function*(n,e){const t=xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(c=>(s=c,t.os(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const u=[],m=[];let y=At();for(const w of s){u.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}for(const w of c){m.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}return t.localDocuments.getDocuments(r,y).next(w=>({_s:w,removedBatchIds:u,addedBatchIds:m}))})})}),Jv.apply(this,arguments)}function sw(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function JD(n,e,t){let r=At(),s=At();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let u=Ei();return t.forEach((m,y)=>{const w=c.get(m);y.isFoundDocument()!==w.isFoundDocument()&&(s=s.add(m)),y.isNoDocument()&&y.version.isEqual(Ye.min())?(e.removeEntry(m,y.readTime),u=u.insert(m,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),u=u.insert(m,y)):fe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",w.version," Watch version:",y.version)}),{us:u,cs:s}})}function jx(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Lh(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.qr.getTargetData(r,e).next(c=>c?(s=c,q.resolve(s)):t.qr.allocateTargetId(r).next(u=>(s=new js(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ts.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ts=t.ts.insert(r.targetId,r),t.ns.set(e,r.targetId)),r})}function Vh(n,e,t){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,le.Z)(function*(n,e,t){const r=xe(n),s=r.ts.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Ca(u))throw u;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.ts=r.ts.remove(e),r.ns.delete(s.target)}),Xv.apply(this,arguments)}function aw(n,e,t){const r=xe(n);let s=Ye.min(),c=At();return r.persistence.runTransaction("Execute query","readwrite",u=>function(y,w,D){const S=xe(y),M=S.ns.get(D);return void 0!==M?q.resolve(S.ts.get(M)):S.qr.getTargetData(w,D)}(r,u,Ii(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(u,m.targetId).next(y=>{c=y})}).next(()=>r.es.getDocumentsMatchingQuery(u,e,t?s:Ye.min(),t?c:At())).next(m=>(eA(r,eD(e),m),{documents:m,ls:c})))}function cw(n,e){const t=xe(n),r=xe(t.qr),s=t.ts.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",c=>r._t(c,e).next(u=>u?u.target:null))}function XD(n,e){const t=xe(n),r=t.rs.get(e)||Ye.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ss.getAllFromCollectionGroup(s,e,CC(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(eA(t,e,s),s))}function eA(n,e,t){let r=n.rs.get(e)||Ye.min();t.forEach((s,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.rs.set(e,r)}function lw(){return lw=(0,le.Z)(function*(n,e,t,r){const s=xe(n);let c=At(),u=Ei();for(const w of t){const D=e.hs(w.metadata.name);w.document&&(c=c.add(D));const S=e.Ps(w);S.setReadTime(e.Is(w.metadata.readTime)),u=u.insert(D,S)}const m=s.ss.newChangeBuffer({trackRemovals:!0}),y=yield Lh(s,(D=r,Ii(_h(Zt.fromString(`__bundle__/docs/${D}`)))));var D;return s.persistence.runTransaction("Apply bundle documents","readwrite",w=>JD(w,m,u).next(D=>(m.apply(w),D)).next(D=>s.qr.removeMatchingKeysForTargetId(w,y.targetId).next(()=>s.qr.addMatchingKeys(w,c,y.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(w,D.us,D.cs)).next(()=>D.us)))}),lw.apply(this,arguments)}function ey(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,le.Z)(function*(n,e,t=At()){const r=yield Lh(n,Ii(NE(e.bundledQuery))),s=xe(n);return s.persistence.runTransaction("Save named query","readwrite",c=>{const u=mr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return s.Kr.saveNamedQuery(c,e);const m=r.withResumeToken(gr.EMPTY_BYTE_STRING,u);return s.ts=s.ts.insert(m.targetId,m),s.qr.updateTargetData(c,m).next(()=>s.qr.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>s.qr.addMatchingKeys(c,t,r.targetId)).next(()=>s.Kr.saveNamedQuery(c,e))})}),tA.apply(this,arguments)}function Hx(n,e){return`firestore_clients_${n}_${e}`}function nA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function uw(n,e){return`firestore_targets_${n}_${e}`}class kg{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ts(e,t,r){const s=JSON.parse(r);let c,u="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return u&&s.error&&(u="string"==typeof s.error.message&&"string"==typeof s.error.code,u&&(c=new ge(s.error.code,s.error.message))),u?new kg(e,t,s.state,c):(tn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ts(e,t){const r=JSON.parse(t);let s,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new ge(r.error.code,r.error.message))),c?new Uh(e,r.state,s):(tn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ng{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,c=yE();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=eg(r.activeTargetIds[u]),c=c.add(r.activeTargetIds[u]);return s?new Ng(e,c):(tn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dw{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new dw(t.clientId,t.onlineState):(tn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hw{constructor(){this.activeTargetIds=yE()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fw{constructor(e,t,r,s,c){this.window=e,this.si=t,this.persistenceKey=r,this.Rs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new bn(_t),this.started=!1,this.ps=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ys=Hx(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new hw),this.Ss=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,le.Z)(function*(){const t=yield e.syncEngine.Bi();for(const s of t){if(s===e.Rs)continue;const c=e.getItem(Hx(e.persistenceKey,s));if(c){const u=Ng.Ts(s,c);u&&(e.gs=e.gs.insert(u.clientId,u))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const s=e.Ms(r);s&&e.xs(s)}for(const s of e.ps)e.fs(s);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,r){this.Ns(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(uw(this.persistenceKey,e));if(r){const s=Uh.Ts(e,r);s&&(t=s.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(uw(this.persistenceKey,e))}updateQueryState(e,t,r){this.ks(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Bs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe("SharedClientState","READ",e,t),t}setItem(e,t){fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void tn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,le.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ss.test(r.key)){if(null==r.newValue){const s=t.Ks(r.key);return t.$s(s,null)}{const s=t.Us(r.key,r.newValue);if(s)return t.$s(s.clientId,s)}}else if(t.bs.test(r.key)){if(null!==r.newValue){const s=t.Ws(r.key,r.newValue);if(s)return t.Gs(s)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const s=t.zs(r.key,r.newValue);if(s)return t.js(s)}}else if(r.key===t.Cs){if(null!==r.newValue){const s=t.Ms(r.newValue);if(s)return t.xs(s)}}else if(r.key===t.ws){const s=function(u){let m=yi._e;if(null!=u)try{const y=JSON.parse(u);Ze("number"==typeof y),m=y}catch(y){tn("SharedClientState","Failed to read sequence number from WebStorage",y)}return m}(r.newValue);s!==yi._e&&t.sequenceNumberHandler(s)}else if(r.key===t.vs){const s=t.Hs(r.newValue);yield Promise.all(s.map(c=>t.syncEngine.Js(c)))}}else t.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,r){const s=new kg(this.currentUser,e,t,r),c=nA(this.persistenceKey,this.currentUser,e);this.setItem(c,s.Es())}Bs(e){const t=nA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,r){const s=uw(this.persistenceKey,e),c=new Uh(e,t,r);this.setItem(s,c.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const r=this.Ks(e);return Ng.Ts(r,t)}Ws(e,t){const r=this.bs.exec(e),s=Number(r[1]);return kg.Ts(new pr(void 0!==r[2]?r[2]:null),s,t)}zs(e,t){const r=this.Ds.exec(e),s=Number(r[1]);return Uh.Ts(s,t)}Ms(e){return dw.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const r=t?this.gs.insert(e,t):this.gs.remove(e),s=this.Os(this.gs),c=this.Os(r),u=[],m=[];return c.forEach(y=>{s.has(y)||u.push(y)}),s.forEach(y=>{c.has(y)||m.push(y)}),this.syncEngine.Xs(u,m).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=yE();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class rA{constructor(){this.eo=new hw,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,r){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new hw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $x{ro(e){}shutdown(){}}class iA{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Qc=null;function ty(){return null===Qc?Qc=268435456+Math.round(2147483648*Math.random()):Qc++,"0x"+Qc.toString(16)}const oA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sA{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Wr="WebChannelConnection";class aA extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+t.host,this.fo=`projects/${s}/databases/${c}`,this.po="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${c}`}get yo(){return!1}wo(t,r,s,c,u){const m=ty(),y=this.So(t,r);fe("RestConnection",`Sending RPC '${t}' ${m}:`,y,s);const w={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(w,c,u),this.Do(t,y,w,s).then(D=>(fe("RestConnection",`Received RPC '${t}' ${m}: `,D),D),D=>{throw mi("RestConnection",`RPC '${t}' ${m} failed with error: `,D,"url: ",y,"request:",s),D})}Co(t,r,s,c,u,m){return this.wo(t,r,s,c,u)}bo(t,r,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+gi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((c,u)=>t[u]=c),s&&s.headers.forEach((c,u)=>t[u]=c)}So(t,r){return`${this.mo}/v1/${r}:${oA[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,r,s){const c=ty();return new Promise((u,m)=>{const y=new xP;y.setWithCredentials(!0),y.listenOnce(ex.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case kc.NO_ERROR:const D=y.getResponseJson();fe(Wr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(D)),u(D);break;case kc.TIMEOUT:fe(Wr,`RPC '${e}' ${c} timed out`),m(new ge(Z.DEADLINE_EXCEEDED,"Request time out"));break;case kc.HTTP_ERROR:const S=y.getStatus();if(fe(Wr,`RPC '${e}' ${c} failed with status:`,S,"response text:",y.getResponseText()),S>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const V=M?.error;if(V&&V.status&&V.message){const ee=function(ue){const Ee=ue.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(Ee)>=0?Ee:Z.UNKNOWN}(V.status);m(new ge(ee,V.message))}else m(new ge(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new ge(Z.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{fe(Wr,`RPC '${e}' ${c} completed.`)}});const w=JSON.stringify(s);fe(Wr,`RPC '${e}' ${c} sending request:`,s),y.send(t,"POST",w,r,15)})}vo(e,t,r){const s=ty(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=_C(),m=vC(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(y.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(y.useFetchStreams=!0),this.bo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const D=c.join("");fe(Wr,`Creating RPC '${e}' stream ${s}: ${D}`,y);const S=u.createWebChannel(D,y);let M=!1,V=!1;const ee=new sA({co:ue=>{V?fe(Wr,`Not sending because RPC '${e}' stream ${s} is closed:`,ue):(M||(fe(Wr,`Opening RPC '${e}' stream ${s} transport.`),S.open(),M=!0),fe(Wr,`RPC '${e}' stream ${s} sending:`,ue),S.send(ue))},lo:()=>S.close()}),ne=(ue,Ee,Ue)=>{ue.listen(Ee,Ae=>{try{Ue(Ae)}catch(Je){setTimeout(()=>{throw Je},0)}})};return ne(S,Kp.EventType.OPEN,()=>{V||fe(Wr,`RPC '${e}' stream ${s} transport opened.`)}),ne(S,Kp.EventType.CLOSE,()=>{V||(V=!0,fe(Wr,`RPC '${e}' stream ${s} transport closed`),ee.Ro())}),ne(S,Kp.EventType.ERROR,ue=>{V||(V=!0,mi(Wr,`RPC '${e}' stream ${s} transport errored:`,ue),ee.Ro(new ge(Z.UNAVAILABLE,"The operation could not be completed")))}),ne(S,Kp.EventType.MESSAGE,ue=>{var Ee;if(!V){const Ue=ue.data[0];Ze(!!Ue);const Je=Ue.error||(null===(Ee=Ue[0])||void 0===Ee?void 0:Ee.error);if(Je){fe(Wr,`RPC '${e}' stream ${s} received error:`,Je);const vt=Je.status;let Yt=function(jF){const cN=ar[jF];if(void 0!==cN)return CE(cN)}(vt),Cr=Je.message;void 0===Yt&&(Yt=Z.INTERNAL,Cr="Unknown error status: "+vt+" with message "+Je.message),V=!0,ee.Ro(new ge(Yt,Cr)),S.close()}else fe(Wr,`RPC '${e}' stream ${s} received:`,Ue),ee.Vo(Ue)}}),ne(m,tx.STAT_EVENT,ue=>{ue.stat===JI.PROXY?fe(Wr,`RPC '${e}' stream ${s} detected buffering proxy`):ue.stat===JI.NOPROXY&&fe(Wr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{ee.Ao()},0),ee}}function cA(){return typeof window<"u"?window:null}function ny(){return typeof document<"u"?document:null}function ry(n){return new _D(n,!0)}class lA{constructor(e,t,r=1e3,s=1.5,c=6e4){this.si=e,this.timerId=t,this.Fo=r,this.Mo=s,this.xo=c,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,t-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class uA{constructor(e,t,r,s,c,u,m,y){this.si=e,this.Ko=r,this.$o=s,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new lA(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,le.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,le.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var r=this;return(0,le.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(tn(t.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):t&&t.code===Z.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Uo===t&&this.s_(r,s)},r=>{e(()=>{const s=new ge(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(s)})})}s_(e,t){const r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(s=>{r(()=>this.o_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Jo(){var e=this;this.state=5,this.zo.ko((0,le.Z)(function*(){e.state=0,e.start()}))}o_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zx extends uA{constructor(e,t,r,s,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=c}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function xx(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Ve(),s=e.targetChange.targetIds||[],c=function(w,D){return w.useProto3Json?(Ze(void 0===D||"string"==typeof D),gr.fromBase64String(D||"")):(Ze(void 0===D||D instanceof Uint8Array),gr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&function(w){const D=void 0===w.code?Z.UNKNOWN:CE(w.code);return new ge(D,w.message||"")}(u);t=new hD(r,s,c,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Wo(n,r.document.name),c=mr(r.document.updateTime),u=r.document.createTime?mr(r.document.createTime):Ye.min(),m=new zn({mapValue:{fields:r.document.fields}}),y=jt.newFoundDocument(s,c,u,m);t=new vg(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,s=Wo(n,r.document),c=r.readTime?mr(r.readTime):Ye.min(),u=jt.newNoDocument(s,c);t=new vg([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,s=Wo(n,r.document);t=new vg([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Ve();{const r=e.filter,{count:s=0,unchangedNames:c}=r,u=new Tx(s,c);t=new AE(r.targetId,u)}}var w;return t}(this.serializer,e),r=function(c){if(!("targetChange"in c))return Ye.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Ye.min():u.readTime?mr(u.readTime):Ye.min()}(e);return this.listener.a_(t,r)}u_(e){const t={};t.database=bg(this.serializer),t.addTarget=function(c,u){let m;const y=u.target;if(m=dg(y)?{documents:xE(c,y)}:{query:ME(c,y)},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=vD(c,u.resumeToken);const w=SE(c,u.expectedCount);null!==w&&(m.expectedCount=w)}else if(u.snapshotVersion.compareTo(Ye.min())>0){m.readTime=Iu(c,u.snapshotVersion.toTimestamp());const w=SE(c,u.expectedCount);null!==w&&(m.expectedCount=w)}return m}(this.serializer,e);const r=function Eg(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.e_(t)}c_(e){const t={};t.database=bg(this.serializer),t.removeTarget=e,this.e_(t)}}class Gx extends uA{constructor(e,t,r,s,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=c,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function Mx(n,e){return n&&n.length>0?(Ze(void 0!==e),n.map(t=>function(s,c){let u=mr(s.updateTime?s.updateTime:c);return u.isEqual(Ye.min())&&(u=mr(c)),new Ex(u,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=mr(e.commitTime);return this.listener.I_(r,t)}return Ze(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=bg(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ig(this.serializer,r))};this.e_(t)}}class qx extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.d_=!1}A_(){if(this.d_)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.wo(e,t,r,s,c)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(Z.UNKNOWN,s.toString())})}Co(e,t,r,s){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Co(e,t,r,c,u,s)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(Z.UNKNOWN,c.toString())})}terminate(){this.d_=!0}}class Zx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(tn(t),this.f_=!1):fe("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class iy{constructor(e,t,r,s,c){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=c,this.F_.ro(m=>{r.enqueueAndForget((0,le.Z)(function*(){var y;Jc(u)&&(fe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,le.Z)(function*(D){const S=xe(D);S.C_.add(4),yield Bh(S),S.M_.set("Unknown"),S.C_.delete(4),yield Va(S)}),function w(D){return y.apply(this,arguments)})(u))}))}),this.M_=new Zx(r,s)}}function Va(n){return pw.apply(this,arguments)}function pw(){return pw=(0,le.Z)(function*(n){if(Jc(n))for(const e of n.v_)yield e(!0)}),pw.apply(this,arguments)}function Bh(n){return gw.apply(this,arguments)}function gw(){return gw=(0,le.Z)(function*(n){for(const e of n.v_)yield e(!1)}),gw.apply(this,arguments)}function Mu(n,e){const t=xe(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),Lg(t)?Fg(t):Hh(t).Ho()&&Og(t,e))}function Pu(n,e){const t=xe(n),r=Hh(t);t.D_.delete(e),r.Ho()&&mw(t,e),0===t.D_.size&&(r.Ho()?r.Zo():Jc(t)&&t.M_.set("Unknown"))}function Og(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hh(n).u_(e)}function mw(n,e){n.x_.Oe(e),Hh(n).c_(e)}function Fg(n){n.x_=new yg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Hh(n).start(),n.M_.g_()}function Lg(n){return Jc(n)&&!Hh(n).jo()&&n.D_.size>0}function Jc(n){return 0===xe(n).C_.size}function dA(n){n.x_=void 0}function Kx(n){return _w.apply(this,arguments)}function _w(){return _w=(0,le.Z)(function*(n){n.D_.forEach((e,t)=>{Og(n,e)})}),_w.apply(this,arguments)}function hA(n,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,le.Z)(function*(n,e){dA(n),Lg(n)?(n.M_.w_(e),Fg(n)):n.M_.set("Unknown")}),Vg.apply(this,arguments)}function fA(n,e,t){return oy.apply(this,arguments)}function oy(){return oy=(0,le.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof hD&&2===e.state&&e.cause)try{yield(r=(0,le.Z)(function*(c,u){const m=u.cause;for(const y of u.targetIds)c.D_.has(y)&&(yield c.remoteSyncer.rejectListen(y,m),c.D_.delete(y),c.x_.removeTarget(y))}),function s(c,u){return r.apply(this,arguments)})(n,e)}catch(r){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ug(n,r)}else if(e instanceof vg?n.x_.$e(e):e instanceof AE?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Ye.min()))try{const r=yield sw(n.localStore);t.compareTo(r)>=0&&(yield function(c,u){const m=c.x_.it(u);return m.targetChanges.forEach((y,w)=>{if(y.resumeToken.approximateByteSize()>0){const D=c.D_.get(w);D&&c.D_.set(w,D.withResumeToken(y.resumeToken,u))}}),m.targetMismatches.forEach((y,w)=>{const D=c.D_.get(y);if(!D)return;c.D_.set(y,D.withResumeToken(gr.EMPTY_BYTE_STRING,D.snapshotVersion)),mw(c,y);const S=new js(D.target,y,w,D.sequenceNumber);Og(c,S)}),c.remoteSyncer.applyRemoteEvent(m)}(n,t))}catch(r){fe("RemoteStore","Failed to raise snapshot:",r),yield Ug(n,r)}var r}),oy.apply(this,arguments)}function Ug(n,e,t){return sy.apply(this,arguments)}function sy(){return sy=(0,le.Z)(function*(n,e,t){if(!Ca(e))throw e;n.C_.add(1),yield Bh(n),n.M_.set("Offline"),t||(t=()=>sw(n.localStore)),n.asyncQueue.enqueueRetryable((0,le.Z)(function*(){fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield Va(n)}))}),sy.apply(this,arguments)}function pA(n,e){return e().catch(t=>Ug(n,t,e))}function ku(n){return ay.apply(this,arguments)}function ay(){return ay=(0,le.Z)(function*(n){const e=xe(n),t=Xc(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Yx(e);)try{const s=yield jx(e.localStore,r);if(null===s){0===e.b_.length&&t.Zo();break}r=s.batchId,gA(e,s)}catch(s){yield Ug(e,s)}mA(e)&&_A(e)}),ay.apply(this,arguments)}function Yx(n){return Jc(n)&&n.b_.length<10}function gA(n,e){n.b_.push(e);const t=Xc(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function mA(n){return Jc(n)&&!Xc(n).jo()&&n.b_.length>0}function _A(n){Xc(n).start()}function Qx(n){return Zr.apply(this,arguments)}function Zr(){return Zr=(0,le.Z)(function*(n){Xc(n).E_()}),Zr.apply(this,arguments)}function jh(n){return vw.apply(this,arguments)}function vw(){return vw=(0,le.Z)(function*(n){const e=Xc(n);for(const t of n.b_)e.P_(t.mutations)}),vw.apply(this,arguments)}function Jx(n,e,t){return vA.apply(this,arguments)}function vA(){return vA=(0,le.Z)(function*(n,e,t){const r=n.b_.shift(),s=oi.from(r,e,t);yield pA(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield ku(n)}),vA.apply(this,arguments)}function LP(n,e){return Nu.apply(this,arguments)}function Nu(){return Nu=(0,le.Z)(function*(n,e){var t;e&&Xc(n).h_&&(yield(t=(0,le.Z)(function*(s,c){if(TE(m=c.code)&&m!==Z.ABORTED){const u=s.b_.shift();Xc(s).Yo(),yield pA(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,c)),yield ku(s)}var m}),function r(s,c){return t.apply(this,arguments)})(n,e)),mA(n)&&_A(n)}),Nu.apply(this,arguments)}function yA(n,e){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,le.Z)(function*(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const r=Jc(t);t.C_.add(3),yield Bh(t),r&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield Va(t)}),Bg.apply(this,arguments)}function yw(n,e){return cy.apply(this,arguments)}function cy(){return cy=(0,le.Z)(function*(n,e){const t=xe(n);e?(t.C_.delete(2),yield Va(t)):e||(t.C_.add(2),yield Bh(t),t.M_.set("Unknown"))}),cy.apply(this,arguments)}function Hh(n){return n.O_||(n.O_=function(t,r,s){const c=xe(t);return c.A_(),new zx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(n.datastore,n.asyncQueue,{ho:Kx.bind(null,n),Io:hA.bind(null,n),a_:fA.bind(null,n)}),n.v_.push(function(){var e=(0,le.Z)(function*(t){t?(n.O_.Yo(),Lg(n)?Fg(n):n.M_.set("Unknown")):(yield n.O_.stop(),dA(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function Xc(n){return n.N_||(n.N_=function(t,r,s){const c=xe(t);return c.A_(),new Gx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(n.datastore,n.asyncQueue,{ho:Qx.bind(null,n),Io:LP.bind(null,n),T_:jh.bind(null,n),I_:Jx.bind(null,n)}),n.v_.push(function(){var e=(0,le.Z)(function*(t){t?(n.N_.Yo(),yield ku(n)):(yield n.N_.stop(),n.b_.length>0&&(fe("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class bw{constructor(e,t,r,s,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=c,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,c){const u=Date.now()+r,m=new bw(e,t,u,s,c);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ge(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function el(n,e){if(tn("AsyncQueue",`${e}: ${n}`),Ca(n))return new ge(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class Ou{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=bh(),this.sortedSet=new bn(this.comparator)}static emptySet(e){return new Ou(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ou)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(!s.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ou;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class bA{constructor(){this.B_=new bn(Me.comparator)}track(e){const t=e.doc.key,r=this.B_.get(t);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(t):1===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Ve():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ua{constructor(e,t,r,s,c,u,m,y,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,s,c){const u=[];return t.forEach(m=>{u.push({type:0,doc:m})}),new Ua(e,t,Ou.emptySet(t),u,r,s,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class Iw{constructor(){this.k_=void 0,this.listeners=[]}}class VP{constructor(){this.queries=new xa(e=>XC(e),hg),this.onlineState="Unknown",this.q_=new Set}}function ly(n,e){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,le.Z)(function*(n,e){const t=xe(n),r=e.query;let s=!1,c=t.queries.get(r);if(c||(s=!0,c=new Iw),s)try{c.k_=yield t.onListen(r)}catch(u){const m=el(u,`Initialization of query '${yh(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,c),c.listeners.push(e),e.Q_(t.onlineState),c.k_&&e.K_(c.k_)&&jg(t)}),Ew.apply(this,arguments)}function uy(n,e){return tl.apply(this,arguments)}function tl(){return tl=(0,le.Z)(function*(n,e){const t=xe(n),r=e.query;let s=!1;const c=t.queries.get(r);if(c){const u=c.listeners.indexOf(e);u>=0&&(c.listeners.splice(u,1),s=0===c.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),tl.apply(this,arguments)}function Xx(n,e){const t=xe(n);let r=!1;for(const s of e){const u=t.queries.get(s.query);if(u){for(const m of u.listeners)m.K_(s)&&(r=!0);u.k_=s}}r&&jg(t)}function IA(n,e,t){const r=xe(n),s=r.queries.get(e);if(s)for(const c of s.listeners)c.onError(t);r.queries.delete(e)}function jg(n){n.q_.forEach(e=>{e.next()})}class EA{constructor(e,t,r){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class eM{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class wA{constructor(e){this.serializer=e}hs(e){return Wo(this.serializer,e)}Ps(e){return e.metadata.exists?ID(this.serializer,e.document,!1):jt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return mr(e)}}class tM{constructor(e,t,r){this.X_=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ww(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const r=Zt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,r=new wA(this.serializer);for(const s of e)if(s.metadata.queries){const c=r.hs(s.metadata.name);for(const u of s.metadata.queries){const m=(t.get(u)||At()).add(c);t.set(u,m)}}return t}complete(){var e=this;return(0,le.Z)(function*(){const t=yield function FP(n,e,t,r){return lw.apply(this,arguments)}(e.localStore,new wA(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const s of e.queries)yield ey(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function ww(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Tw{constructor(e){this.key=e}}class TA{constructor(e){this.key=e}}class Cw{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=At(),this.mutatedKeys=At(),this._a=tD(e),this.aa=new Ou(this._a)}get ua(){return this.ia}ca(e,t){const r=t?t.la:new bA,s=t?t.aa:this.aa;let c=t?t.mutatedKeys:this.mutatedKeys,u=s,m=!1;const y="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,w="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((D,S)=>{const M=s.get(D),V=fg(this.query,S)?S:null,ee=!!M&&this.mutatedKeys.has(M.key),ne=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ue=!1;M&&V?M.data.isEqual(V.data)?ee!==ne&&(r.track({type:3,doc:V}),ue=!0):this.ha(M,V)||(r.track({type:2,doc:V}),ue=!0,(y&&this._a(V,y)>0||w&&this._a(V,w)<0)&&(m=!0)):!M&&V?(r.track({type:0,doc:V}),ue=!0):M&&!V&&(r.track({type:1,doc:M}),ue=!0,(y||w)&&(m=!0)),ue&&(V?(u=u.add(V),c=ne?c.add(D):c.delete(D)):(u=u.delete(D),c=c.delete(D)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const D="F"===this.query.limitType?u.last():u.first();u=u.delete(D.key),c=c.delete(D.key),r.track({type:1,doc:D})}return{aa:u,la:r,Zi:m,mutatedKeys:c}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const c=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const u=e.la.L_();u.sort((D,S)=>function(V,ee){const ne=ue=>{switch(ue){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return ne(V)-ne(ee)}(D.type,S.type)||this._a(D.doc,S.doc)),this.Pa(r),s=null!=s&&s;const m=t&&!s?this.Ia():[],y=0===this.oa.size&&this.current&&!s?1:0,w=y!==this.sa;return this.sa=y,0!==u.length||w?{snapshot:new Ua(this.query,e.aa,c,u,e.mutatedKeys,0===y,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:m}:{Ta:m}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new bA,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=At(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const t=[];return e.forEach(r=>{this.oa.has(r)||t.push(new TA(r))}),this.oa.forEach(r=>{e.has(r)||t.push(new Tw(r))}),t}da(e){this.ia=e.ls,this.oa=At();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Ua.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class CA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nM{constructor(e){this.key=e,this.Ra=!1}}class rM{constructor(e,t,r,s,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Va={},this.ma=new xa(m=>XC(m),hg),this.fa=new Map,this.ga=new Set,this.pa=new bn(Me.comparator),this.ya=new Map,this.wa=new Gv,this.Sa={},this.ba=new Map,this.Da=Kc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function DA(n,e){return Dw.apply(this,arguments)}function Dw(){return Dw=(0,le.Z)(function*(n,e){const t=Vw(n);let r,s;const c=t.ma.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),s=c.view.Aa();else{const u=yield Lh(t.localStore,Ii(e)),m=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,s=yield dy(t,e,r,"current"===m,u.resumeToken),t.isPrimaryClient&&Mu(t.remoteStore,u)}return s}),Dw.apply(this,arguments)}function dy(n,e,t,r,s){return hy.apply(this,arguments)}function hy(){return hy=(0,le.Z)(function*(n,e,t,r,s){n.va=(S,M,V)=>{return(ee=(0,le.Z)(function*(ue,Ee,Ue,Ae){let Je=Ee.view.ca(Ue);Je.Zi&&(Je=yield aw(ue.localStore,Ee.query,!1).then(({documents:qs})=>Ee.view.ca(qs,Je)));const vt=Ae&&Ae.targetChanges.get(Ee.targetId),Yt=Ae&&null!=Ae.targetMismatches.get(Ee.targetId),Cr=Ee.view.applyChanges(Je,ue.isPrimaryClient,vt,Yt);return Rw(ue,Ee.targetId,Cr.Ta),Cr.snapshot}),function ne(ue,Ee,Ue,Ae){return ee.apply(this,arguments)})(n,S,M,V);var ee};const c=yield aw(n.localStore,e,!0),u=new Cw(e,c.ls),m=u.ca(c.documents),y=xh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),w=u.applyChanges(m,n.isPrimaryClient,y);Rw(n,t,w.Ta);const D=new CA(e,t,u);return n.ma.set(e,D),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),w.snapshot}),hy.apply(this,arguments)}function AA(n,e){return fy.apply(this,arguments)}function fy(){return fy=(0,le.Z)(function*(n,e){const t=xe(n),r=t.ma.get(e),s=t.fa.get(r.targetId);if(s.length>1)return t.fa.set(r.targetId,s.filter(c=>!hg(c,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Vh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Pu(t.remoteStore,r.targetId),Fu(t,r.targetId)}).catch(Ta))):(Fu(t,r.targetId),yield Vh(t.localStore,r.targetId,!0))}),fy.apply(this,arguments)}function Aw(){return Aw=(0,le.Z)(function*(n,e,t){const r=Uw(n);try{const s=yield function(u,m){const y=xe(u),w=Un.now(),D=m.reduce((V,ee)=>V.add(ee.key),At());let S,M;return y.persistence.runTransaction("Locally write mutations","readwrite",V=>{let ee=Ei(),ne=At();return y.ss.getEntries(V,D).next(ue=>{ee=ue,ee.forEach((Ee,Ue)=>{Ue.isValidDocument()||(ne=ne.add(Ee))})}).next(()=>y.localDocuments.getOverlayedDocuments(V,ee)).next(ue=>{S=ue;const Ee=[];for(const Ue of m){const Ae=sD(Ue,S.get(Ue.key).overlayedDocument);null!=Ae&&Ee.push(new Oa(Ue.key,Ae,HC(Ae.value.mapValue),Bn.exists(!0)))}return y.mutationQueue.addMutationBatch(V,w,Ee,m)}).next(ue=>{M=ue;const Ee=ue.applyToLocalDocumentSet(S,ne);return y.documentOverlayCache.saveOverlays(V,ue.batchId,Ee)})}).then(()=>({batchId:M.batchId,changes:rD(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,m,y){let w=u.Sa[u.currentUser.toKey()];w||(w=new bn(_t)),w=w.insert(m,y),u.Sa[u.currentUser.toKey()]=w}(r,s.batchId,t),yield Ao(r,s.changes),yield ku(r.remoteStore)}catch(s){const c=el(s,"Failed to persist write");t.reject(c)}}),Aw.apply(this,arguments)}function oM(n,e){return py.apply(this,arguments)}function py(){return py=(0,le.Z)(function*(n,e){const t=xe(n);try{const r=yield function QD(n,e){const t=xe(n),r=e.snapshotVersion;let s=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const u=t.ss.newChangeBuffer({trackRemovals:!0});s=t.ts;const m=[];e.targetChanges.forEach((D,S)=>{const M=s.get(S);if(!M)return;m.push(t.qr.removeMatchingKeys(c,D.removedDocuments,S).next(()=>t.qr.addMatchingKeys(c,D.addedDocuments,S)));let V=M.withSequenceNumber(c.currentSequenceNumber);var ne,ue,Ee;null!==e.targetMismatches.get(S)?V=V.withResumeToken(gr.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):D.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(D.resumeToken,r)),s=s.insert(S,V),ue=V,Ee=D,(0===(ne=M).resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&m.push(t.qr.updateTargetData(c,V))});let y=Ei(),w=At();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,D))}),m.push(JD(c,u,e.documentUpdates).next(D=>{y=D.us,w=D.cs})),!r.isEqual(Ye.min())){const D=t.qr.getLastRemoteSnapshotVersion(c).next(S=>t.qr.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(D)}return q.waitFor(m).next(()=>u.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,y,w)).next(()=>y)}).then(c=>(t.ts=s,c))}(t.localStore,e);e.targetChanges.forEach((s,c)=>{const u=t.ya.get(c);u&&(Ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Ra=!0:s.modifiedDocuments.size>0?Ze(u.Ra):s.removedDocuments.size>0&&(Ze(u.Ra),u.Ra=!1))}),yield Ao(t,r,e)}catch(r){yield Ta(r)}}),py.apply(this,arguments)}function sM(n,e,t){const r=xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ma.forEach((c,u)=>{const m=u.view.Q_(e);m.snapshot&&s.push(m.snapshot)}),function(u,m){const y=xe(u);y.onlineState=m;let w=!1;y.queries.forEach((D,S)=>{for(const M of S.listeners)M.Q_(m)&&(w=!0)}),w&&jg(y)}(r.eventManager,e),s.length&&r.Va.a_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function UP(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,le.Z)(function*(n,e,t){const r=xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ya.get(e),c=s&&s.key;if(c){let u=new bn(Me.comparator);u=u.insert(c,jt.newNoDocument(c,Ye.min()));const m=At().add(c),y=new $c(Ye.min(),new Map,new bn(_t),u,m);yield oM(r,y),r.pa=r.pa.remove(c),r.ya.delete(e),kA(r)}else yield Vh(r.localStore,e,!1).then(()=>Fu(r,e,t)).catch(Ta)}),SA.apply(this,arguments)}function BP(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,le.Z)(function*(n,e){const t=xe(n),r=e.batch.batchId;try{const s=yield function YD(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),c=t.ss.newChangeBuffer({trackRemovals:!0});return function(m,y,w,D){const S=w.batch,M=S.keys();let V=q.resolve();return M.forEach(ee=>{V=V.next(()=>D.getEntry(y,ee)).next(ne=>{const ue=w.docVersions.get(ee);Ze(null!==ue),ne.version.compareTo(ue)<0&&(S.applyToRemoteDocument(ne,w),ne.isValidDocument()&&(ne.setReadTime(w.commitVersion),D.addEntry(ne)))})}),V.next(()=>m.mutationQueue.removeMutationBatch(y,S))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=At();for(let w=0;w<m.mutationResults.length;++w)m.mutationResults[w].transformResults.length>0&&(y=y.add(m.batch.mutations[w].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);MA(t,r,null),Sw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ao(t,s)}catch(s){yield Ta(s)}}),RA.apply(this,arguments)}function jP(n,e,t){return xA.apply(this,arguments)}function xA(){return xA=(0,le.Z)(function*(n,e,t){const r=xe(n);try{const s=yield function(u,m){const y=xe(u);return y.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return y.mutationQueue.lookupMutationBatch(w,m).next(S=>(Ze(null!==S),D=S.keys(),y.mutationQueue.removeMutationBatch(w,S))).next(()=>y.mutationQueue.performConsistencyCheck(w)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(w,D,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>y.localDocuments.getDocuments(w,D))})}(r.localStore,e);MA(r,e,t),Sw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ao(r,s)}catch(s){yield Ta(s)}}),xA.apply(this,arguments)}function gy(){return gy=(0,le.Z)(function*(n,e){const t=xe(n);Jc(t.remoteStore)||fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const m=xe(u);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>m.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const s=t.ba.get(r)||[];s.push(e),t.ba.set(r,s)}catch(r){const s=el(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),gy.apply(this,arguments)}function Sw(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function MA(n,e,t){const r=xe(n);let s=r.Sa[r.currentUser.toKey()];if(s){const c=s.get(e);c&&(t?c.reject(t):c.resolve(),s=s.remove(e)),r.Sa[r.currentUser.toKey()]=s}}function Fu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.fa.get(e))n.ma.delete(r),t&&n.Va.Fa(r,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(r=>{n.wa.containsKey(r)||PA(n,r)})}function PA(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(Pu(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),kA(n))}function Rw(n,e,t){for(const r of t)r instanceof Tw?(n.wa.addReference(r.key,e),aM(n,r)):r instanceof TA?(fe("SyncEngine","Document no longer in limbo: "+r.key),n.wa.removeReference(r.key,e),n.wa.containsKey(r.key)||PA(n,r.key)):Ve()}function aM(n,e){const t=e.key,r=t.path.canonicalString();n.pa.get(t)||n.ga.has(r)||(fe("SyncEngine","New document in limbo: "+t),n.ga.add(r),kA(n))}function kA(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new Me(Zt.fromString(e)),r=n.Da.next();n.ya.set(r,new nM(t)),n.pa=n.pa.insert(t,r),Mu(n.remoteStore,new js(Ii(_h(t.path)),r,"TargetPurposeLimboResolution",yi._e))}}function Ao(n,e,t){return xw.apply(this,arguments)}function xw(){return xw=(0,le.Z)(function*(n,e,t){const r=xe(n),s=[],c=[],u=[];var m;r.ma.isEmpty()||(r.ma.forEach((m,y)=>{u.push(r.va(y,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w?.fromCache?"not-current":"current"),w){s.push(w);const D=Kv.Qi(y.targetId,w);c.push(D)}}))}),yield Promise.all(u),r.Va.a_(s),yield(m=(0,le.Z)(function*(w,D){const S=xe(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>q.forEach(D,V=>q.forEach(V.ki,ee=>S.persistence.referenceDelegate.addReference(M,V.targetId,ee)).next(()=>q.forEach(V.qi,ee=>S.persistence.referenceDelegate.removeReference(M,V.targetId,ee)))))}catch(M){if(!Ca(M))throw M;fe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of D){const V=M.targetId;if(!M.fromCache){const ee=S.ts.get(V),ue=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);S.ts=S.ts.insert(V,ue)}}}),function y(w,D){return m.apply(this,arguments)})(r.localStore,c))}),xw.apply(this,arguments)}function Hg(n,e){return $h.apply(this,arguments)}function $h(){return $h=(0,le.Z)(function*(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const r=yield Qv(t.localStore,e);t.currentUser=e,(c=t).ba.forEach(m=>{m.forEach(y=>{y.reject(new ge(Z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ao(t,r._s)}var c}),$h.apply(this,arguments)}function cM(n,e){const t=xe(n),r=t.ya.get(e);if(r&&r.Ra)return At().add(r.key);{let s=At();const c=t.fa.get(e);if(!c)return s;for(const u of c){const m=t.ma.get(u);s=s.unionWith(m.view.ua)}return s}}function lM(n,e){return Mw.apply(this,arguments)}function Mw(){return Mw=(0,le.Z)(function*(n,e){const t=xe(n),r=yield aw(t.localStore,e.query,!0),s=e.view.da(r);return t.isPrimaryClient&&Rw(t,e.targetId,s.Ta),s}),Mw.apply(this,arguments)}function uM(n,e){return Pw.apply(this,arguments)}function Pw(){return Pw=(0,le.Z)(function*(n,e){const t=xe(n);return XD(t.localStore,e).then(r=>Ao(t,r))}),Pw.apply(this,arguments)}function dM(n,e,t,r){return kw.apply(this,arguments)}function kw(){return kw=(0,le.Z)(function*(n,e,t,r){const s=xe(n),c=yield function(m,y){const w=xe(m),D=xe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>D.Cn(S,y).next(M=>M?w.localDocuments.getDocuments(S,M):q.resolve(null)))}(s.localStore,e);var y;null!==c?("pending"===t?yield ku(s.remoteStore):"acknowledged"===t||"rejected"===t?(MA(s,e,r||null),Sw(s,e),y=e,xe(xe(s.localStore).mutationQueue).Fn(y)):Ve(),yield Ao(s,c)):fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),kw.apply(this,arguments)}function Nw(){return Nw=(0,le.Z)(function*(n,e){const t=xe(n);if(Vw(t),Uw(t),!0===e&&!0!==t.Ca){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield OA(t,r.toArray());t.Ca=!0,yield yw(t.remoteStore,!0);for(const c of s)Mu(t.remoteStore,c)}else if(!1===e&&!1!==t.Ca){const r=[];let s=Promise.resolve();t.fa.forEach((c,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then(()=>(Fu(t,u),Vh(t.localStore,u,!0))),Pu(t.remoteStore,u)}),yield s,yield OA(t,r),function(u){const m=xe(u);m.ya.forEach((y,w)=>{Pu(m.remoteStore,w)}),m.wa.Vr(),m.ya=new Map,m.pa=new bn(Me.comparator)}(t),t.Ca=!1,yield yw(t.remoteStore,!1)}}),Nw.apply(this,arguments)}function OA(n,e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=(0,le.Z)(function*(n,e,t){const r=xe(n),s=[],c=[];for(const u of e){let m;const y=r.fa.get(u);if(y&&0!==y.length){m=yield Lh(r.localStore,Ii(y[0]));for(const w of y){const D=r.ma.get(w),S=yield lM(r,D);S.snapshot&&c.push(S.snapshot)}}else{const w=yield cw(r.localStore,u);m=yield Lh(r.localStore,w),yield dy(r,FA(w),u,!1,m.resumeToken)}s.push(m)}return r.Va.a_(c),s}),Ow.apply(this,arguments)}function FA(n){return Sv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function hM(n){return t=xe(n).localStore,xe(xe(t).persistence).Bi();var t}function fM(n,e,t,r){return Fw.apply(this,arguments)}function Fw(){return Fw=(0,le.Z)(function*(n,e,t,r){const s=xe(n);if(s.Ca)return void fe("SyncEngine","Ignoring unexpected query state notification.");const c=s.fa.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const u=yield XD(s.localStore,eD(c[0])),m=$c.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,gr.EMPTY_BYTE_STRING);yield Ao(s,u,m);break}case"rejected":yield Vh(s.localStore,e,!0),Fu(s,e,r);break;default:Ve()}}),Fw.apply(this,arguments)}function pM(n,e,t){return Lw.apply(this,arguments)}function Lw(){return Lw=(0,le.Z)(function*(n,e,t){const r=Vw(n);if(r.Ca){for(const s of e){if(r.fa.has(s)){fe("SyncEngine","Adding an already active target "+s);continue}const c=yield cw(r.localStore,s),u=yield Lh(r.localStore,c);yield dy(r,FA(c),u.targetId,!1,u.resumeToken),Mu(r.remoteStore,u)}for(const s of t)r.fa.has(s)&&(yield Vh(r.localStore,s,!1).then(()=>{Pu(r.remoteStore,s),Fu(r,s)}).catch(Ta))}}),Lw.apply(this,arguments)}function Vw(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UP.bind(null,e),e.Va.a_=Xx.bind(null,e.eventManager),e.Va.Fa=IA.bind(null,e.eventManager),e}function Uw(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jP.bind(null,e),e}class $g{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,le.Z)(function*(){t.serializer=ry(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ow(this.persistence,new KD,e.initialUser,this.serializer)}createPersistence(e){return new qv(xg.jr,this.serializer)}createSharedClientState(e){return new rA}terminate(){var e=this;return(0,le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zg extends $g{constructor(e,t,r){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e),yield r.xa.initialize(r,e),yield Uw(r.xa.syncEngine),yield ku(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ow(this.persistence,new KD,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new ZE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new ax(t,this.persistence);return new sx(e.asyncQueue,r)}createPersistence(e){const t=iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?si.withCacheSize(this.cacheSizeBytes):si.DEFAULT;return new rw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cA(),ny(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rA}}class VA extends zg{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e);const s=r.xa.syncEngine;r.sharedClientState instanceof fw&&(r.sharedClientState.syncEngine={Ys:dM.bind(null,s),Zs:fM.bind(null,s),Xs:pM.bind(null,s),Bi:hM.bind(null,s),Js:uM.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var c=(0,le.Z)(function*(u){yield function NA(n,e){return Nw.apply(this,arguments)}(r.xa.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=cA();if(!fw.D(t))throw new ge(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class zh{initialize(e,t){var r=this;return(0,le.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>sM(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Hg.bind(null,r.syncEngine),yield yw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new VP}createDatastore(e){const t=ry(e.databaseInfo.databaseId),r=new aA(e.databaseInfo);return new qx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,s=this.datastore,c=e.asyncQueue,u=t=>sM(this.syncEngine,t,0),m=iA.D()?new iA:new $x,new iy(r,s,c,u,m);var r,s,c,u,m}createSyncEngine(e,t){return function(s,c,u,m,y,w,D){const S=new rM(s,c,u,m,y,w);return D&&(S.Ca=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,le.Z)(function*(r){const s=xe(r);fe("RemoteStore","RemoteStore shutting down."),s.C_.add(5),yield Bh(s),s.F_.shutdown(),s.M_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function Bw(n,e=10240){let t=0;return{read:()=>(0,le.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class my{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class UA{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new wr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,le.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,le.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,le.Z)(function*(){const t=yield e.qa();if(null===t)return null;const r=e.La.decode(t),s=Number(r);isNaN(s)&&e.Qa(`length string (${r}) is not valid number`);const c=yield e.Ka(s);return new eM(JSON.parse(c),t.length+s)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,le.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ka(e){var t=this;return(0,le.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const r=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,le.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class $P{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ge(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,le.Z)(function*(u,m){const y=xe(u),w=bg(y.serializer)+"/documents",D={documents:m.map(ee=>Nv(y.serializer,ee))},S=yield y.Co("BatchGetDocuments",w,D,m.length),M=new Map;S.forEach(ee=>{const ne=function Rx(n,e){return"found"in e?function(r,s){Ze(!!s.found);const c=Wo(r,s.found.name),u=mr(s.found.updateTime),m=s.found.createTime?mr(s.found.createTime):Ye.min(),y=new zn({mapValue:{fields:s.found.fields}});return jt.newFoundDocument(c,u,m,y)}(n,e):"missing"in e?function(r,s){Ze(!!s.missing),Ze(!!s.readTime);const c=Wo(r,s.missing),u=mr(s.readTime);return jt.newNoDocument(c,u)}(n,e):Ve()}(y.serializer,ee);M.set(ne.key.toString(),ne)});const V=[];return m.forEach(ee=>{const ne=M.get(ee.toString());Ze(!!ne),V.push(ne)}),V}),function c(u,m){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const c=Me.fromPath(s);e.mutations.push(new Ah(c,e.precondition(c)))}),yield(r=(0,le.Z)(function*(c,u){const m=xe(c),y=bg(m.serializer)+"/documents",w={writes:u.map(D=>Ig(m.serializer,D))};yield m.wo("Commit",y,w)}),function s(c,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ve();t=Ye.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ge(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ye.min())?Bn.exists(!1):Bn.updateTime(t):Bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ye.min()))throw new ge(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bn.updateTime(t)}return Bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mM{constructor(e,t,r,s,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=c,this.Wa=r.maxAttempts,this.zo=new lA(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,le.Z)(function*(){const t=new $P(e.datastore),r=e.za(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(c=>{e.ja(c)}))}).catch(s=>{e.ja(s)})}))}za(e){try{const t=this.updateFunction(e);return!Da(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!TE(t)}return!1}}class BA{constructor(e,t,r,s){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=pr.UNAUTHENTICATED,this.clientId=wC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,le.Z)(function*(m){fe("FirestoreClient","Received user=",m.uid),yield c.authCredentialListener(m),c.user=m});return function(m){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(fe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=el(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Gg(n,e){return jw.apply(this,arguments)}function jw(){return jw=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,le.Z)(function*(c){r.isEqual(c)||(yield Qv(e.localStore,c),r=c)});return function(c){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),jw.apply(this,arguments)}function _y(n,e){return Hw.apply(this,arguments)}function Hw(){return Hw=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield yy(n);fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>yA(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,c)=>yA(e.remoteStore,c)),n._onlineComponents=e}),Hw.apply(this,arguments)}function vy(n){return"FirebaseError"===n.name?n.code===Z.FAILED_PRECONDITION||n.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function yy(n){return qg.apply(this,arguments)}function qg(){return qg=(0,le.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Gg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!vy(t))throw t;mi("Error using user provided cache. Falling back to memory cache: "+t),yield Gg(n,new $g)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),yield Gg(n,new $g);return n._offlineComponents}),qg.apply(this,arguments)}function Gh(n){return $w.apply(this,arguments)}function $w(){return $w=(0,le.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield _y(n,n._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),yield _y(n,new zh))),n._onlineComponents}),$w.apply(this,arguments)}function _M(n){return yy(n).then(e=>e.persistence)}function Lu(n){return yy(n).then(e=>e.localStore)}function jA(n){return Gh(n).then(e=>e.remoteStore)}function HA(n){return Gh(n).then(e=>e.syncEngine)}function Vu(n){return Ba.apply(this,arguments)}function Ba(){return Ba=(0,le.Z)(function*(n){const e=yield Gh(n),t=e.eventManager;return t.onListen=DA.bind(null,e.syncEngine),t.onUnlisten=AA.bind(null,e.syncEngine),t}),Ba.apply(this,arguments)}function zA(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(c,u,m,y,w){const D=new my({next:M=>{u.enqueueAndForget(()=>uy(c,S));const V=M.docs.has(m);!V&&M.fromCache?w.reject(new ge(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&M.fromCache&&y&&"server"===y.source?w.reject(new ge(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(M)},error:M=>w.reject(M)}),S=new EA(_h(m.path),D,{includeMetadataChanges:!0,J_:!0});return ly(c,S)}(yield Vu(n),n.asyncQueue,e,t,r)})),r.promise}function yM(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(c,u,m,y,w){const D=new my({next:M=>{u.enqueueAndForget(()=>uy(c,S)),M.fromCache&&"server"===y.source?w.reject(new ge(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(M)},error:M=>w.reject(M)}),S=new EA(m,D,{includeMetadataChanges:!0,J_:!0});return ly(c,S)}(yield Vu(n),n.asyncQueue,e,t,r)})),r.promise}function Wg(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const WA=new Map;function ZA(n,e,t){if(!t)throw new ge(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TM(n,e,t,r){if(!0===e&&!0===r)throw new ge(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function KA(n){if(!Me.isDocumentKey(n))throw new ge(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ey(n){if(Me.isDocumentKey(n))throw new ge(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ve()}function Ct(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zg(n);throw new ge(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Gw(n,e){if(e<=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class YA{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ge(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ge(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Wg(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qh{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ge(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ge(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YA(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new rx;switch(r.type){case"firstParty":return new gv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=WA.get(t);r&&(fe("ComponentProvider","Removing Datastore"),WA.delete(t),r.terminate())}(this),Promise.resolve()}}class Kr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class In{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class ja extends Kr{constructor(e,t,r){super(e,t,_h(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new Me(e))}withConverter(e){return new ja(this.firestore,e,this._path)}}function QA(n,e,...t){if(n=(0,yn.m9)(n),ZA("collection","path",e),n instanceof qh){const r=Zt.fromString(e,...t);return Ey(r),new ja(n,null,r)}{if(!(n instanceof In||n instanceof ja))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return Ey(r),new ja(n.firestore,null,r)}}function wy(n,e,...t){if(n=(0,yn.m9)(n),1===arguments.length&&(e=wC.newId()),ZA("doc","path",e),n instanceof qh){const r=Zt.fromString(e,...t);return KA(r),new In(n,null,new Me(r))}{if(!(n instanceof In||n instanceof ja))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return KA(r),new In(n.firestore,n instanceof ja?n.converter:null,new Me(r))}}function CM(n,e){return n=(0,yn.m9)(n),e=(0,yn.m9)(e),(n instanceof In||n instanceof ja)&&(e instanceof In||e instanceof ja)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function XA(n,e){return n=(0,yn.m9)(n),e=(0,yn.m9)(e),n instanceof Kr&&e instanceof Kr&&n.firestore===e.firestore&&hg(n._query,e._query)&&n.converter===e.converter}class zP{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new lA(this,"async_queue_retry"),this.iu=()=>{const t=ny();t&&fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=ny();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=ny();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new wr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,le.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!Ca(t))throw t;fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,tn("INTERNAL UNHANDLED ERROR: ",function(u){let m=u.message||"";return u.stack&&(m=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),m}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=t,t}enqueueAfterDelay(e,t,r){this.su(),this.ru.indexOf(e)>-1&&(t=0);const s=bw.createAndSchedule(this,e,t,r,c=>this.au(c));return this.Xa.push(s),s}su(){this.eu&&Ve()}verifyOperationInProgress(){}uu(){var e=this;return(0,le.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function Ty(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const s=t;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(n)}class GP{constructor(){this._progressObserver={},this._taskCompletionResolver=new wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Mn extends qh{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new zP,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kg(this),this._firestoreClient.terminate()}}function Jn(n){return n._firestoreClient||Kg(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Kg(n){var e,t,r;const s=n._freezeSettings(),c=(y=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new gx(n._databaseId,y,n._persistenceKey,(D=s).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,Wg(D.experimentalLongPollingOptions),D.useFetchStreams));var y,D;n._firestoreClient=new BA(n._authCredentials,n._appCheckCredentials,n._queue,c),null!==(t=s.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function Ww(n,e,t){const r=new wr;return n.asyncQueue.enqueue((0,le.Z)(function*(){try{yield Gg(n,t),yield _y(n,e),r.resolve()}catch(s){const c=s;if(!vy(c))throw c;mi("Error enabling indexeddb cache. Falling back to memory cache: "+c),r.reject(c)}})).then(()=>r.promise)}function Yg(n){if(n._initialized||n._terminated)throw new ge(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ha(gr.fromBase64String(e))}catch(t){throw new ge(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ha(gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $a{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ge(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wh{constructor(e){this._methodName=e}}class Xn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}}const Qg=/^__.*__$/;class Dy{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new qo(e,this.data,t,this.fieldTransforms)}}class Jg{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class Xw{constructor(e,t,r,s,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===c&&this.Pu(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Xw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Tu({path:r,du:!1});return s.Au(e),s}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Tu({path:r,du:!1});return s.Pu(),s}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return c0(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Jw(this.Iu)&&Qg.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class SM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ry(e)}pu(e,t,r,s=!1){return new Xw({Iu:e,methodName:t,gu:r,path:xn.emptyPath(),du:!1,fu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zh(n){const e=n._freezeSettings(),t=ry(n._databaseId);return new SM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function e0(n,e,t,r,s,c={}){const u=n.pu(c.merge||c.mergeFields?2:0,e,t,s);Hu("Data must be an object, but it was:",u,r);const m=s0(r,u);let y,w;if(c.merge)y=new Fi(u.fieldMask),w=u.fieldTransforms;else if(c.mergeFields){const D=[];for(const S of c.mergeFields){const M=Hs(e,S,t);if(!u.contains(M))throw new ge(Z.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);RM(D,M)||D.push(M)}y=new Fi(D),w=u.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,w=u.fieldTransforms;return new Dy(new zn(m),y,w)}class Bu extends Wh{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bu}}function tS(n,e,t){return new Xw({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ay extends Wh{_toFieldTransform(e){return new Th(e.path,new ka)}isEqual(e){return e instanceof Ay}}class nS extends Wh{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=tS(this,e,!0),r=this.yu.map(c=>ju(c,t)),s=new Bs(r);return new Th(e.path,s)}isEqual(e){return this===e}}class t0 extends Wh{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=tS(this,e,!0),r=this.yu.map(c=>ju(c,t)),s=new Hc(r);return new Th(e.path,s)}isEqual(e){return this===e}}class rS extends Wh{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new wh(e.serializer,xv(e.serializer,this.wu));return new Th(e.path,t)}isEqual(e){return this===e}}function n0(n,e,t,r){const s=n.pu(1,e,t);Hu("Data must be an object, but it was:",s,r);const c=[],u=zn.empty();Aa(r,(y,w)=>{const D=a0(e,y,t);w=(0,yn.m9)(w);const S=s.Ru(D);if(w instanceof Bu)c.push(D);else{const M=ju(w,S);null!=M&&(c.push(D),u.set(D,M))}});const m=new Fi(c);return new Jg(u,m,s.fieldTransforms)}function r0(n,e,t,r,s,c){const u=n.pu(1,e,t),m=[Hs(e,r,t)],y=[s];if(c.length%2!=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<c.length;M+=2)m.push(Hs(e,c[M])),y.push(c[M+1]);const w=[],D=zn.empty();for(let M=m.length-1;M>=0;--M)if(!RM(w,m[M])){const V=m[M];let ee=y[M];ee=(0,yn.m9)(ee);const ne=u.Ru(V);if(ee instanceof Bu)w.push(V);else{const ue=ju(ee,ne);null!=ue&&(w.push(V),D.set(V,ue))}}const S=new Fi(w);return new Jg(D,S,u.fieldTransforms)}function o0(n,e,t,r=!1){return ju(t,n.pu(r?4:3,e))}function ju(n,e){if(Xg(n=(0,yn.m9)(n)))return Hu("Unsupported field value:",e,n),s0(n,e);if(n instanceof Wh)return function(r,s){if(!Jw(s.Iu))throw s.mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.mu(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,s){const c=[];let u=0;for(const m of r){let y=ju(m,s.Vu(u));null==y&&(y={nullValue:"NULL_VALUE"}),c.push(y),u++}return{arrayValue:{values:c}}}(n,e)}return function(r,s){if(null===(r=(0,yn.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return xv(s.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const c=Un.fromDate(r);return{timestampValue:Iu(s.serializer,c)}}if(r instanceof Un){const c=new Un(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Iu(s.serializer,c)}}if(r instanceof Xn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ha)return{bytesValue:vD(s.serializer,r._byteString)};if(r instanceof In){const c=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw s.mu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:yD(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.mu(`Unsupported field value: ${Zg(r)}`)}(n,e)}function s0(n,e){const t={};return VC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Aa(n,(r,s)=>{const c=ju(s,e.Eu(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function Xg(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Un||n instanceof Xn||n instanceof Ha||n instanceof In||n instanceof Wh)}function Hu(n,e,t){if(!Xg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const r=Zg(t);throw e.mu("an object"===r?n+" a custom object":n+" "+r)}var s}function Hs(n,e,t){if((e=(0,yn.m9)(e))instanceof $a)return e._internalPath;if("string"==typeof e)return a0(n,e);throw c0("Field path arguments must be of type string or ",n,!1,void 0,t)}const iS=new RegExp("[~\\*/\\[\\]]");function a0(n,e,t){if(e.search(iS)>=0)throw c0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $a(...e.split("."))._internalPath}catch{throw c0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function c0(n,e,t,r,s){const c=r&&!r.isEmpty(),u=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||u)&&(y+=" (found",c&&(y+=` in field ${r}`),u&&(y+=` in document ${s}`),y+=")"),new ge(Z.INVALID_ARGUMENT,m+n+y)}function RM(n,e){return n.some(t=>t.isEqual(e))}class em{constructor(e,t,r,s,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(l0("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xM extends em{data(){return super.data()}}function l0(n,e){return"string"==typeof e?a0(n,e):e instanceof $a?e._internalPath:e._delegate._internalPath}function u0(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ge(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tm{}class Sy extends tm{}function $s(n,e,...t){let r=[];e instanceof tm&&r.push(e),r=r.concat(t),function(c){const u=c.filter(y=>y instanceof nm).length,m=c.filter(y=>y instanceof Ry).length;if(u>1||u>0&&m>0)throw new ge(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Ry extends Sy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ry(e,t,r)}_apply(e){const t=this._parse(e);return OM(e._query,t),new Kr(e.firestore,e.converter,mE(e._query,t))}_parse(e){const t=Zh(e.firestore);return function(c,u,m,y,w,D,S){let M;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){cS(S,D);const V=[];for(const ee of S)V.push(NM(y,c,ee));M={arrayValue:{values:V}}}else M=NM(y,c,S)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||cS(S,D),M=o0(m,"where",S,"in"===D||"not-in"===D);return $t.create(w,D,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class nm extends tm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let u=s;const m=c.getFlattenedFilters();for(const y of m)OM(u,y),u=mE(u,y)}(e._query,t),new Kr(e.firestore,e.converter,mE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class oS extends Sy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new oS(e,t)}_apply(e){const t=function(s,c,u){if(null!==s.startAt)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ph(c,u)}(e._query,this._field,this._direction);return new Kr(e.firestore,e.converter,function(s,c){const u=s.explicitOrderBy.concat([c]);return new Us(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class rm extends Sy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new rm(e,t,r)}_apply(e){return new Kr(e.firestore,e.converter,Rv(e._query,this._limit,this._limitType))}}class xy extends Sy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new xy(e,t,r)}_apply(e){const t=aS(e,this.type,this._docOrFields,this._inclusive);return new Kr(e.firestore,e.converter,(c=t,new Us((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class im extends Sy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new im(e,t,r)}_apply(e){const t=aS(e,this.type,this._docOrFields,this._inclusive);return new Kr(e.firestore,e.converter,(c=t,new Us((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function aS(n,e,t,r){if(t[0]=(0,yn.m9)(t[0]),t[0]instanceof em)return function(c,u,m,y,w){if(!y)throw new ge(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const D=[];for(const S of vh(c))if(S.field.isKeyField())D.push(zo(u,y.key));else{const M=y.data.field(S.field);if(Iv(M))throw new ge(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const V=S.field.canonicalString();throw new ge(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}D.push(M)}return new jc(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Zh(n.firestore);return function(u,m,y,w,D,S){const M=u.explicitOrderBy;if(D.length>M.length)throw new ge(Z.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let ee=0;ee<D.length;ee++){const ne=D[ee];if(M[ee].field.isKeyField()){if("string"!=typeof ne)throw new ge(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ne}`);if(!gE(u)&&-1!==ne.indexOf("/"))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ne}' contains a slash.`);const ue=u.path.child(Zt.fromString(ne));if(!Me.isDocumentKey(ue))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const Ee=new Me(ue);V.push(zo(m,Ee))}else{const ue=o0(y,w,ne);V.push(ue)}}return new jc(V,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function NM(n,e,t){if("string"==typeof(t=(0,yn.m9)(t))){if(""===t)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gE(e)&&-1!==t.indexOf("/"))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!Me.isDocumentKey(r))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zo(n,new Me(r))}if(t instanceof In)return zo(n,t._key);throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zg(t)}.`)}function cS(n,e){if(!Array.isArray(n)||0===n.length)throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OM(n,e){const t=function(s,c){for(const u of s)for(const m of u.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ge(Z.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class h0{convertValue(e,t="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Aa(e,(s,c)=>{r[s]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new Xn(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ev(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dh(e));default:return null}}convertTimestamp(e){const t=Lc(e);return new Un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);Ze(SD(r));const s=new Sa(r.get(1),r.get(3)),c=new Me(r.popFirst(5));return s.isEqual(t)||tn(`Document ${c} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function My(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lS extends h0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}class $u{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends em{constructor(e,t,r,s,c,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(l0("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Kh extends So{data(e={}){return super.data(e)}}class za{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new $u(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Kh(this._firestore,this._userDataWriter,r.key,r,new $u(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(m=>({type:"added",doc:new Kh(s._firestore,s._userDataWriter,m.doc.key,m.doc,new $u(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:u++}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(m=>c||3!==m.type).map(m=>{const y=new Kh(s._firestore,s._userDataWriter,m.doc.key,m.doc,new $u(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);let w=-1,D=-1;return 0!==m.type&&(w=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),1!==m.type&&(u=u.add(m.doc),D=u.indexOf(m.doc.key)),{type:VM(m.type),doc:y,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function VM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}function dS(n,e){return n instanceof So&&e instanceof So?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof za&&e instanceof za&&n._firestore===e._firestore&&XA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class nl extends h0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}function fS(n,e,t){n=Ct(n,In);const r=Ct(n.firestore,Mn),s=My(n.converter,e,t);return om(r,[e0(Zh(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Bn.none())])}function jM(n,e,t,...r){n=Ct(n,In);const s=Ct(n.firestore,Mn),c=Zh(s);let u;return u="string"==typeof(e=(0,yn.m9)(e))||e instanceof $a?r0(c,"updateDoc",n._key,e,t,r):n0(c,"updateDoc",n._key,e),om(s,[u.toMutation(n._key,Bn.exists(!0))])}function pS(n,...e){var t,r,s;n=(0,yn.m9)(n);let c={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Ty(e[u])||(c=e[u],u++);const m={includeMetadataChanges:c.includeMetadataChanges};if(Ty(e[u])){const S=e[u];e[u]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[u+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[u+2]=null===(s=S.complete)||void 0===s?void 0:s.bind(S)}let y,w,D;if(n instanceof In)w=Ct(n.firestore,Mn),D=_h(n._key.path),y={next:S=>{e[u]&&e[u](gS(w,n,S))},error:e[u+1],complete:e[u+2]};else{const S=Ct(n,Kr);w=Ct(S.firestore,Mn),D=S._query;const M=new nl(w);y={next:V=>{e[u]&&e[u](new za(w,M,S,V))},error:e[u+1],complete:e[u+2]},u0(n._query)}return function(M,V,ee,ne){const ue=new my(ne),Ee=new EA(V,ue,ee);return M.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return ly(yield Vu(M),Ee)})),()=>{ue.Na(),M.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return uy(yield Vu(M),Ee)}))}}(Jn(w),D,m,y)}function om(n,e){return function(r,s){const c=new wr;return r.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function iM(n,e,t){return Aw.apply(this,arguments)}(yield HA(r),s,c)})),c.promise}(Jn(n),e)}function gS(n,e,t){const r=t.docs.get(e._key),s=new nl(n);return new So(n,s,e._key,r,new $u(t.hasPendingWrites,t.fromCache),e.converter)}const d={maxAttempts:5};class p{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zh(e)}set(e,t,r){this._verifyNotCommitted();const s=_(e,this._firestore),c=My(s.converter,t,r),u=e0(this._dataReader,"WriteBatch.set",s._key,c,null!==s.converter,r);return this._mutations.push(u.toMutation(s._key,Bn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const c=_(e,this._firestore);let u;return u="string"==typeof(t=(0,yn.m9)(t))||t instanceof $a?r0(this._dataReader,"WriteBatch.update",c._key,t,r,s):n0(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(u.toMutation(c._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_(e,this._firestore);return this._mutations=this._mutations.concat(new Dh(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _(n,e){if((n=(0,yn.m9)(n)).firestore!==e)throw new ge(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class b extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Zh(t)}get(t){const r=_(t,this._firestore),s=new lS(this._firestore);return this._transaction.lookup([r._key]).then(c=>{if(!c||1!==c.length)return Ve();const u=c[0];if(u.isFoundDocument())return new em(this._firestore,s,u.key,u,r.converter);if(u.isNoDocument())return new em(this._firestore,s,r._key,null,r.converter);throw Ve()})}set(t,r,s){const c=_(t,this._firestore),u=My(c.converter,r,s),m=e0(this._dataReader,"Transaction.set",c._key,u,null!==c.converter,s);return this._transaction.set(c._key,m),this}update(t,r,s,...c){const u=_(t,this._firestore);let m;return m="string"==typeof(r=(0,yn.m9)(r))||r instanceof $a?r0(this._dataReader,"Transaction.update",u._key,r,s,c):n0(this._dataReader,"Transaction.update",u._key,r),this._transaction.update(u._key,m),this}delete(t){const r=_(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_(e,this._firestore),r=new nl(this._firestore);return super.get(e).then(s=>new So(this._firestore,r,t._key,s._document,new $u(!1,!1),t.converter))}}function GM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function dk(){if(typeof Uint8Array>"u")throw new ge("unimplemented","Uint8Arrays are not available in this environment.")}function hk(){if(!function uh(){return typeof atob<"u"}())throw new ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){gi=Hd.SDK_VERSION,(0,Hd._registerComponent)(new wT.wA("firestore",(r,{instanceIdentifier:s,options:c})=>{const u=r.getProvider("app").getImmediate(),m=new Mn(new yC(r.getProvider("auth-internal")),new EC(r.getProvider("app-check-internal")),function(w,D){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ge(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sa(w.options.projectId,D)}(u,s),u);return c=Object.assign({useFetchStreams:t},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),(0,Hd.registerVersion)(fv,"4.4.0",e),(0,Hd.registerVersion)(fv,"4.4.0","esm2017")}();class p0{constructor(e){this._delegate=e}static fromBase64String(e){return hk(),new p0(Ha.fromBase64String(e))}static fromUint8Array(e){return dk(),new p0(Ha.fromUint8Array(e))}toBase64(){return hk(),this._delegate.toBase64()}toUint8Array(){return dk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function qM(n){return function EN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class wN{enableIndexedDbPersistence(e,t){return function DM(n,e){Yg(n=Ct(n,Mn));const t=Jn(n);if(t._uninitializedComponentsProvider)throw new ge(Z.FAILED_PRECONDITION,"SDK cache is already specified.");mi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new zh;return Ww(t,s,new zg(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function AM(n){Yg(n=Ct(n,Mn));const e=Jn(n);if(e._uninitializedComponentsProvider)throw new ge(Z.FAILED_PRECONDITION,"SDK cache is already specified.");mi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new zh;return Ww(e,r,new VA(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Uu(n){if(n._initialized&&!n._terminated)throw new ge(Z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(t=(0,le.Z)(function*(s){if(!vi.D())return Promise.resolve();const c=s+"main";yield vi.delete(c)}),function r(s){return t.apply(this,arguments)})(iw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class fk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function qw(n,e,t,r={}){var s;const c=(n=Ct(n,qh))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==u&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},c),{host:u,ssl:!1})),r.mockUserToken){let m,y;if("string"==typeof r.mockUserToken)m=r.mockUserToken,y=pr.MOCK_USER;else{m=(0,yn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ge(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new pr(w)}n._authCredentials=new ix(new eE(m,y))}}(this._delegate,e,t,r)}enableNetwork(){return function Zw(n){return function by(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield _M(n),t=yield jA(n);return e.setNetworkEnabled(!0),function(s){const c=xe(s);return c.C_.delete(0),Va(c)}(t)}))}(Jn(n=Ct(n,Mn)))}(this._delegate)}disableNetwork(){return function Kw(n){return function $A(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield _M(n),t=yield jA(n);return e.setNetworkEnabled(!1),(r=(0,le.Z)(function*(c){const u=xe(c);u.C_.add(0),yield Bh(u),u.M_.set("Offline")}),function s(c){return r.apply(this,arguments)})(t);var r}))}(Jn(n=Ct(n,Mn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,TM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function eS(n){return function(t){const r=new wr;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function HP(n,e){return gy.apply(this,arguments)}(yield HA(t),r)})),r.promise}(Jn(n=Ct(n,Mn)))}(this._delegate)}onSnapshotsInSync(e){return function $M(n,e){return function GA(n,e){const t=new my(e);return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return s=yield Vu(n),c=t,xe(s).q_.add(c),void c.next();var s,c})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return s=yield Vu(n),c=t,void xe(s).q_.delete(c);var s,c}))}}(Jn(n=Ct(n,Mn)),Ty(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ky(this,QA(this._delegate,e))}catch(t){throw Qi(t,"collection()","Firestore.collection()")}}doc(e){try{return new zs(this,wy(this._delegate,e))}catch(t){throw Qi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ji(this,function JA(n,e){if(n=Ct(n,qh),ZA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ge(Z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kr(n,null,(r=e,new Us(Zt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Qi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function E(n,e,t){n=Ct(n,Mn);const r=Object.assign(Object.assign({},d),t);return function(c){if(c.maxAttempts<1)throw new ge(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(c,u,m){const y=new wr;return c.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const w=yield function zw(n){return Gh(n).then(e=>e.datastore)}(c);new mM(c.asyncQueue,w,m,u,y).run()})),y.promise}(Jn(n),s=>e(new b(n,s)),r)}(this._delegate,t=>e(new pk(this,t)))}batch(){return Jn(this._delegate),new gk(new p(this._delegate,e=>om(this._delegate,e)))}loadBundle(e){return function Yw(n,e){const t=Jn(n=Ct(n,Mn)),r=new GP;return function bM(n,e,t,r){const s=function(u,m){let y;return y="string"==typeof u?uD().encode(u):u,D=function(D,S){if(D instanceof Uint8Array)return Bw(D,S);if(D instanceof ArrayBuffer)return Bw(new Uint8Array(D),S);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new UA(D,m);var D}(t,ry(e));n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function gM(n,e,t){const r=xe(n);var s;(s=(0,le.Z)(function*(u,m,y){try{const w=yield m.getMetadata();if(yield function(ee,ne){const ue=xe(ee),Ee=mr(ne.createTime);return ue.persistence.runTransaction("hasNewerBundle","readonly",Ue=>ue.Kr.getBundleMetadata(Ue,ne.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(Ee)>=0)}(u.localStore,w))return yield m.close(),y._completeWith({taskState:"Success",documentsLoaded:(ee=w).totalDocuments,bytesLoaded:ee.totalBytes,totalDocuments:ee.totalDocuments,totalBytes:ee.totalBytes}),Promise.resolve(new Set);y._updateProgress(ww(w));const D=new tM(w,u.localStore,m.serializer);let S=yield m.Ma();for(;S;){const V=yield D.ea(S);V&&y._updateProgress(V),S=yield m.Ma()}const M=yield D.complete();return yield Ao(u,M.ra,void 0),yield function(ee,ne){const ue=xe(ee);return ue.persistence.runTransaction("Save bundle","readwrite",Ee=>ue.Kr.saveBundleMetadata(Ee,ne))}(u.localStore,w),y._completeWith(M.progress),Promise.resolve(M.na)}catch(w){return mi("SyncEngine",`Loading bundle failed with ${w}`),y._failWith(w),Promise.resolve(new Set)}var ee}),function c(u,m,y){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield HA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Qw(n,e){return function IM(n,e){return n.asyncQueue.enqueue((0,le.Z)(function*(){return function(r,s){const c=xe(r);return c.persistence.runTransaction("Get named query","readonly",u=>c.Kr.getNamedQuery(u,s))}(yield Lu(n),e)}))}(Jn(n=Ct(n,Mn)),e).then(t=>t?new Kr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ji(this,t):null)}}class _S extends h0{constructor(e){super(),this.firestore=e}convertBytes(e){return new p0(new Ha(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zs.forKey(t,this.firestore,null)}}class pk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _S(e)}get(e){const t=cm(e);return this._delegate.get(t).then(r=>new g0(this._firestore,new So(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=cm(e);return r?(GM("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=cm(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=cm(e);return this._delegate.delete(t),this}}class gk{constructor(e){this._delegate=e}set(e,t,r){const s=cm(e);return r?(GM("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=cm(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=cm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class am{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Kh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new m0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=am.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let c=s.get(t);return c||(c=new am(e,new _S(e),t),s.set(t,c)),c}}am.INSTANCES=new WeakMap;class zs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _S(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zs(t,new In(t._delegate,r,new Me(e)))}static forKey(e,t,r){return new zs(t,new In(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ky(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ky(this.firestore,QA(this._delegate,e))}catch(t){throw Qi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,yn.m9)(e))instanceof In&&CM(this._delegate,e)}set(e,t){t=GM("DocumentReference.set",t);try{return t?fS(this._delegate,e,t):fS(this._delegate,e)}catch(r){throw Qi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?jM(this._delegate,e):jM(this._delegate,e,t,...r)}catch(s){throw Qi(s,"updateDoc()","DocumentReference.update()")}}delete(){return function ik(n){return om(Ct(n.firestore,Mn),[new Dh(n._key,Bn.none())])}(this._delegate)}onSnapshot(...e){const t=mk(e),r=_k(e,s=>new g0(this.firestore,new So(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return pS(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function UM(n){n=Ct(n,In);const e=Ct(n.firestore,Mn),t=Jn(e),r=new nl(e);return function Iy(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(c,u,m){try{const y=yield function(D,S){const M=xe(D);return M.persistence.runTransaction("read document","readonly",V=>M.localDocuments.getDocument(V,S))}(c,u);y.isFoundDocument()?m.resolve(y):y.isNoDocument()?m.resolve(null):m.reject(new ge(Z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const w=el(y,`Failed to get document '${u} from cache`);m.reject(w)}}),function s(c,u,m){return r.apply(this,arguments)})(yield Lu(n),e,t);var r})),t.promise}(t,n._key).then(s=>new So(e,r,n._key,s,new $u(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function hS(n){n=Ct(n,In);const e=Ct(n.firestore,Mn);return zA(Jn(e),n._key,{source:"server"}).then(t=>gS(e,n,t))}(this._delegate):function Py(n){n=Ct(n,In);const e=Ct(n.firestore,Mn);return zA(Jn(e),n._key).then(t=>gS(e,n,t))}(this._delegate),t.then(r=>new g0(this.firestore,new So(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new zs(this.firestore,this._delegate.withConverter(e?am.getInstance(this.firestore,e):null))}}function Qi(n,e,t){return n.message=n.message.replace(e,t),n}function mk(n){for(const e of n)if("object"==typeof e&&!qM(e))return e;return{}}function _k(n,e){var t,r;let s;return s=qM(n[0])?n[0]:qM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{s.next&&s.next(e(c))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class g0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dS(this._delegate,e._delegate)}}class m0 extends g0{data(e){const t=this._delegate.data(e);return this._delegate._converter||function nx(n,e){n||Ve()}(void 0!==t),t}}class Ji{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _S(e)}where(e,t,r){try{return new Ji(this.firestore,$s(this._delegate,function YP(n,e,t){const r=e,s=l0("where",n);return Ry._create(s,r,t)}(e,t,r)))}catch(s){throw Qi(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ji(this.firestore,$s(this._delegate,function MM(n,e="asc"){const t=e,r=l0("orderBy",n);return oS._create(r,t)}(e,t)))}catch(r){throw Qi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ji(this.firestore,$s(this._delegate,function JP(n){return Gw("limit",n),rm._create("limit",n,"F")}(e)))}catch(t){throw Qi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ji(this.firestore,$s(this._delegate,function sS(n){return Gw("limitToLast",n),rm._create("limitToLast",n,"L")}(e)))}catch(t){throw Qi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ji(this.firestore,$s(this._delegate,function XP(...n){return xy._create("startAt",n,!0)}(...e)))}catch(t){throw Qi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ji(this.firestore,$s(this._delegate,function PM(...n){return xy._create("startAfter",n,!1)}(...e)))}catch(t){throw Qi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ji(this.firestore,$s(this._delegate,function ek(...n){return im._create("endBefore",n,!1)}(...e)))}catch(t){throw Qi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ji(this.firestore,$s(this._delegate,function kM(...n){return im._create("endAt",n,!0)}(...e)))}catch(t){throw Qi(t,"endAt()","Query.endAt()")}}isEqual(e){return XA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function BM(n){n=Ct(n,Kr);const e=Ct(n.firestore,Mn),t=Jn(e),r=new nl(e);return function vM(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(c,u,m){try{const y=yield aw(c,u,!0),w=new Cw(u,y.ls),D=w.ca(y.documents),S=w.applyChanges(D,!1);m.resolve(S.snapshot)}catch(y){const w=el(y,`Failed to execute query '${u} against cache`);m.reject(w)}}),function s(c,u,m){return r.apply(this,arguments)})(yield Lu(n),e,t);var r})),t.promise}(t,n._query).then(s=>new za(e,r,n,s))}(this._delegate):"server"===e?.source?function rk(n){n=Ct(n,Kr);const e=Ct(n.firestore,Mn),t=Jn(e),r=new nl(e);return yM(t,n._query,{source:"server"}).then(s=>new za(e,r,n,s))}(this._delegate):function nk(n){n=Ct(n,Kr);const e=Ct(n.firestore,Mn),t=Jn(e),r=new nl(e);return u0(n._query),yM(t,n._query).then(s=>new za(e,r,n,s))}(this._delegate),t.then(r=>new WM(this.firestore,new za(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=mk(e),r=_k(e,s=>new WM(this.firestore,new za(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return pS(this._delegate,t,r)}withConverter(e){return new Ji(this.firestore,this._delegate.withConverter(e?am.getInstance(this.firestore,e):null))}}class CN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new m0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class WM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ji(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new m0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new m0(this._firestore,r))})}isEqual(e){return dS(this._delegate,e._delegate)}}class ky extends Ji{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zs(this.firestore,e):null}doc(e){try{return new zs(this.firestore,void 0===e?wy(this._delegate):wy(this._delegate,e))}catch(t){throw Qi(t,"doc()","CollectionReference.doc()")}}add(e){return function HM(n,e){const t=Ct(n.firestore,Mn),r=wy(n),s=My(n.converter,e);return om(t,[e0(Zh(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Bn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new zs(this.firestore,t))}isEqual(e){return CM(this._delegate,e._delegate)}withConverter(e){return new ky(this.firestore,this._delegate.withConverter(e?am.getInstance(this.firestore,e):null))}}function cm(n){return Ct(n,In)}class ZM{constructor(...e){this._delegate=new $a(...e)}static documentId(){return new ZM(xn.keyField().canonicalString())}isEqual(e){return(e=(0,yn.m9)(e))instanceof $a&&this._delegate._internalPath.isEqual(e._internalPath)}}class lm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function A(){return new Ay("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new lm(e)}static delete(){const e=function T(){return new Bu("deleteField")}();return e._methodName="FieldValue.delete",new lm(e)}static arrayUnion(...e){const t=function x(...n){return new nS("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new lm(t)}static arrayRemove(...e){const t=function N(...n){return new t0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new lm(t)}static increment(e){const t=function L(n){return new rS("increment",n)}(e);return t._methodName="FieldValue.increment",new lm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const DN={Firestore:fk,GeoPoint:Xn,Timestamp:Un,Blob:p0,Transaction:pk,WriteBatch:gk,DocumentReference:zs,DocumentSnapshot:g0,Query:Ji,QueryDocumentSnapshot:m0,QuerySnapshot:WM,CollectionReference:ky,FieldPath:ZM,FieldValue:lm,setLogLevel:function TN(n){!function Ns(n){Oc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vk(n,e){return function RN(n,e=N_){return new mn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function KM(n,e){return vk(n,e).pipe((0,mt.U)(t=>({payload:t,type:"query"})))}!function SN(n){(function AN(n,e){n.INTERNAL.registerComponent(new wT.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},DN)))})(n,(e,t)=>new fk(e,t,new wN)),n.registerVersion("@firebase/firestore-compat","0.3.23")}(xs.Z);class yk{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:c}=Ck(r,t);return new Ek(s,c,this.afs)}snapshotChanges(){return function xN(n,e){return vk(n,e).pipe(Pi(void 0),tI(),(0,mt.U)(t=>{const[r,s]=t;return s.exists?r?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qi)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return an(this.ref.get(e)).pipe(qi)}}function vS(n,e){return KM(n,e).pipe(Pi(void 0),tI(),(0,mt.U)(t=>{const[r,s]=t,c=s.payload.docChanges(),u=c.map(m=>({type:m.type,payload:m}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((m,y)=>{const w=c.find(S=>S.doc.ref.isEqual(m.ref)),D=r?.payload.docs.find(S=>S.ref.isEqual(m.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(m.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(m.metadata)||u.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:m}})}),u}))}function bk(n,e,t){return vS(n,t).pipe($f((r,s)=>function MN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function PN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(c=>c.payload),e),[]),nI(),(0,mt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function YM(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function Ik(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Ek{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,mt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Pi(void 0),tI(),Zn(([r,s])=>s.length>0||!r),(0,mt.U)(([,r])=>r),qi)}auditTrail(e){return this.stateChanges(e).pipe($f((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ik(e);return bk(this.query,t,this.afs.schedulers.outsideAngular).pipe(qi)}valueChanges(e={}){return KM(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),qi)}get(e){return an(this.query.get(e)).pipe(qi)}add(e){return this.ref.add(e)}doc(e){return new yk(this.ref.doc(e),this.afs)}}class kN{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vS(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zn(t=>t.length>0),qi):vS(this.query,this.afs.schedulers.outsideAngular).pipe(qi)}auditTrail(e){return this.stateChanges(e).pipe($f((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ik(e);return bk(this.query,t,this.afs.schedulers.outsideAngular).pipe(qi)}valueChanges(e={}){return KM(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(s=>e.idField?{[e.idField]:s.id,...s.data()}:s.data())),qi)}get(e){return an(this.query.get(e)).pipe(qi)}}const wk=new h.OlP("angularfire2.enableFirestorePersistence"),Tk=new h.OlP("angularfire2.firestore.persistenceSettings"),NN=new h.OlP("angularfire2.firestore.settings"),ON=new h.OlP("angularfire2.firestore.use-emulator");function Ck(n,e=(t=>t)){return{query:e(n),ref:n}}let JM,QM=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,s,c,u,m,y,w,D,S,M,V,ee,ne,ue,Ee,Ue){this.schedulers=y;const Ae=j_(t,m,r),Je=D;S&&ET(Ae,m,M,ee,ne,ue,V,Ee),[this.firestore,this.persistenceEnabled$]=Qb(`${Ae.name}.firestore`,"AngularFirestore",Ae.name,()=>{const vt=m.runOutsideAngular(()=>Ae.firestore());if(c&&vt.settings(c),Je&&vt.useEmulator(...Je),s&&!Yu(u)){const Yt=()=>{try{return an(vt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Cr){return typeof console<"u"&&console.warn(Cr),We(!1)}};return[vt,m.runOutsideAngular(Yt)]}return[vt,We(!1)]},[c,Je,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:u}=Ck(s,r),m=this.schedulers.ngZone.run(()=>c);return new Ek(m,u,this)}collectionGroup(t,r){const s=r||(u=>u),c=this.firestore.collectionGroup(t);return new kN(s(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new yk(s,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(h.LFG(qd),h.LFG(B_,8),h.LFG(wk,8),h.LFG(NN,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(L_),h.LFG(Tk,8),h.LFG(ON,8),h.LFG(RR,8),h.LFG(bT,8),h.LFG($_,8),h.LFG(DR,8),h.LFG(AR,8),h.LFG(SR,8),h.LFG(IT,8),h.LFG(F_,8))};static \u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),FN=(()=>{class n{constructor(){xs.Z.registerVersion("angularfire",Zb.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:wk,useValue:!0},{provide:Tk,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({providers:[QM]})}return n})(),Dk=(()=>{class n{constructor(t){this.firestore=t}getTratte(){return this.firestore.collection("tratte").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(QM))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();try{JM=typeof Intl<"u"&&Intl.v8BreakIterator}catch{JM=!1}let _0,rl=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Bi(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!JM)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(h.Lbi))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function v0(n){return function LN(){if(null==_0&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>_0=!0}))}finally{_0=_0||!1}return _0}()?n:!!n.capture}var il=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(il||{});let yS,um,XM;function y0(){if("object"!=typeof document||!document)return il.NORMAL;if(null==yS){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),yS=il.NORMAL,0===n.scrollLeft&&(n.scrollLeft=1,yS=0===n.scrollLeft?il.NEGATED:il.INVERTED),n.remove()}return yS}function Oy(n){return n.composedPath?n.composedPath()[0]:n.target}function Sk(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function eP(n,e=N_){return(0,Dn.e)((t,r)=>{let s=null,c=null,u=null;const m=()=>{if(s){s.unsubscribe(),s=null;const w=c;c=null,r.next(w)}};function y(){const w=u+n,D=e.now();if(D<w)return s=this.schedule(void 0,w-D),void r.add(s);m()}t.subscribe((0,sn.x)(r,w=>{c=w,u=e.now(),s||(s=e.schedule(y,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{c=s=null}))})}function tP(n){return Zn((e,t)=>n<=t)}function Rk(n){return Array.isArray(n)?n:[n]}function dm(n){return n instanceof h.SBq?n.nativeElement:n}const xk=new Set;let hm,dO=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):fO}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function hO(n,e){if(!xk.has(n))try{hm||(hm=document.createElement("style"),e&&(hm.nonce=e),hm.setAttribute("type","text/css"),document.head.appendChild(hm)),hm.sheet&&(hm.sheet.insertRule(`@media ${n} {body{ }}`,0),xk.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(rl),h.LFG(h.Ojb,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fO(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let pO=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new cn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Mk(Rk(t)).some(s=>this._registerQuery(s).mql.matches)}observe(t){let c=cc(Mk(Rk(t)).map(u=>this._registerQuery(u).observable));return c=No(c.pipe(go(1)),c.pipe(tP(1),eP(0))),c.pipe((0,mt.U)(u=>{const m={matches:!1,breakpoints:{}};return u.forEach(({matches:y,query:w})=>{m.matches=m.matches||y,m.breakpoints[w]=y}),m}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),c={observable:new mn.y(u=>{const m=y=>this._zone.run(()=>u.next(y));return r.addListener(m),()=>{r.removeListener(m)}}).pipe(Pi(r),(0,mt.U)(({matches:u})=>({query:t,matches:u})),Fo(this._destroySubject)),mql:r};return this._queries.set(t,c),c}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(dO),h.LFG(h.R0b))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mk(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class _O{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new cn.x,this._typeaheadSubscription=en.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new cn.x,this.change=new cn.x,e instanceof h.n_E&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const s=t.toArray().indexOf(this._activeItem);s>-1&&s!==this._activeItemIndex&&(this._activeItemIndex=s)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(dr(t=>this._pressedLetters.push(t)),eP(e),Zn(()=>this._pressedLetters.length>0),(0,mt.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let s=1;s<r.length+1;s++){const c=(this._activeItemIndex+s)%r.length,u=r[c];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(c);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!e[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&s){const c=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(c>0?c:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&s){const c=this._activeItemIndex+this._pageUpAndDown.delta,u=this._getItemsArray().length;this._setActiveItemByIndex(c<u?c:u-1,-1);break}return;default:return void((s||Sk(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem=t[r]??null,this._activeItemIndex=r}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const s=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof h.n_E?this._items.toArray():this._items}}class vO extends _O{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function Ok(n){return 0===n.buttons||0===n.detail}function Fk(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const TO=new h.OlP("cdk-input-modality-detector-options"),CO={ignoreKeys:[18,17,224,91,16]},Fy=v0({passive:!0,capture:!0});let DO=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,s,c){this._platform=t,this._mostRecentTarget=null,this._modality=new Lr.X(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(m=>m===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Oy(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Ok(u)?"keyboard":"mouse"),this._mostRecentTarget=Oy(u))},this._onTouchstart=u=>{Fk(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Oy(u))},this._options={...CO,...c},this.modalityDetected=this._modality.pipe(tP(1)),this.modalityChanged=this.modalityDetected.pipe(nI()),t.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Fy),s.addEventListener("mousedown",this._onMousedown,Fy),s.addEventListener("touchstart",this._onTouchstart,Fy)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Fy),document.removeEventListener("mousedown",this._onMousedown,Fy),document.removeEventListener("touchstart",this._onTouchstart,Fy))}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(rl),h.LFG(h.R0b),h.LFG(ye),h.LFG(TO,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bS=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(bS||{});const SO=new h.OlP("cdk-focus-monitor-default-options"),IS=v0({passive:!0,capture:!0});let RO=(()=>{class n{constructor(t,r,s,c,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new cn.x,this._rootNodeFocusAndBlurListener=m=>{for(let w=Oy(m);w;w=w.parentElement)"focus"===m.type?this._onFocus(m,w):this._onBlur(m,w)},this._document=c,this._detectionMode=u?.detectionMode||bS.IMMEDIATE}monitor(t,r=!1){const s=dm(t);if(!this._platform.isBrowser||1!==s.nodeType)return We();const c=function BN(n){if(function UN(){if(null==XM){const n=typeof document<"u"?document.head:null;XM=!(!n||!n.createShadowRoot&&!n.attachShadow)}return XM}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(s)||this._getDocument(),u=this._elementInfo.get(s);if(u)return r&&(u.checkChildren=!0),u.subject;const m={checkChildren:r,subject:new cn.x,rootNode:c};return this._elementInfo.set(s,m),this._registerGlobalListeners(m),m.subject}stopMonitoring(t){const r=dm(t),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(t,r,s){const c=dm(t);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(([m,y])=>this._originChanged(m,r,y)):(this._setOrigin(r),"function"==typeof c.focus&&c.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===bS.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===bS.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const s=this._elementInfo.get(r),c=Oy(t);!s||!s.checkChildren&&r!==c||this._originChanged(r,this._getFocusOrigin(c),s)}_onBlur(t,r){const s=this._elementInfo.get(r);!s||s.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,IS),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,IS)}),this._rootNodeFocusListenerCount.set(r,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Fo(this._stopInputModalityDetector)).subscribe(c=>{this._setOrigin(c,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,IS),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,IS),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,s){this._setClasses(t,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((s,c)=>{(c===t||s.checkChildren&&c.contains(t))&&r.push([c,s])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const c=t.labels;if(c)for(let u=0;u<c.length;u++)if(c[u].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(h.R0b),h.LFG(rl),h.LFG(DO),h.LFG(ye,8),h.LFG(SO,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xO=(()=>{class n{constructor(t,r){this._elementRef=t,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new h.vpe}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.SBq),h.Y36(RO))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0})}return n})();var fm=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(fm||{});const Vk="cdk-high-contrast-black-on-white",Uk="cdk-high-contrast-white-on-black",nP="cdk-high-contrast-active";let MO=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,h.f3M)(pO).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return fm.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(t):null,c=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),c){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return fm.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return fm.BLACK_ON_WHITE}return fm.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(nP,Vk,Uk),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===fm.BLACK_ON_WHITE?t.add(nP,Vk):r===fm.WHITE_ON_BLACK&&t.add(nP,Uk)}}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(rl),h.LFG(ye))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const PO=new h.OlP("cdk-dir-doc",{providedIn:"root",factory:function kO(){return(0,h.f3M)(ye)}}),NO=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ES=(()=>{class n{constructor(t){this.value="ltr",this.change=new h.vpe,t&&(this.value=function OO(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?NO.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(PO,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({})}return n})();const LO=new h.OlP("mat-sanity-checks",{providedIn:"root",factory:function FO(){return!0}});let $k=(()=>{class n{constructor(t,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function jN(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(MO),h.LFG(LO,8),h.LFG(ye))};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({imports:[Bk,Bk]})}return n})();var Gs=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Gs||{});class zO{constructor(e,t,r,s=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=s,this.state=Gs.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const zk=v0({passive:!0,capture:!0});class GO{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Oy(e);t&&this._events.get(e.type)?.forEach((r,s)=>{(s===t||s.contains(t))&&r.forEach(c=>c.handleEvent(e))})}}addHandler(e,t,r,s){const c=this._events.get(t);if(c){const u=c.get(r);u?u.add(s):c.set(r,new Set([s]))}else this._events.set(t,new Map([[r,new Set([s])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,zk)})}removeHandler(e,t,r){const s=this._events.get(e);if(!s)return;const c=s.get(t);c&&(c.delete(r),0===c.size&&s.delete(t),0===s.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,zk)))}}const Gk={enterDuration:225,exitDuration:150},qk=v0({passive:!0,capture:!0}),Wk=["mousedown","touchstart"],Zk=["mouseup","mouseleave","touchend","touchcancel"];class wS{static#e=this._eventManager=new GO;constructor(e,t,r,s){this._target=e,this._ngZone=t,this._platform=s,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=dm(r))}fadeInRipple(e,t,r={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c={...Gk,...r.animation};r.centered&&(e=s.left+s.width/2,t=s.top+s.height/2);const u=r.radius||function WO(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),s=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+s*s)}(e,t,s),m=e-s.left,y=t-s.top,w=c.enterDuration,D=document.createElement("div");D.classList.add("mat-ripple-element"),D.style.left=m-u+"px",D.style.top=y-u+"px",D.style.height=2*u+"px",D.style.width=2*u+"px",null!=r.color&&(D.style.backgroundColor=r.color),D.style.transitionDuration=`${w}ms`,this._containerElement.appendChild(D);const S=window.getComputedStyle(D),V=S.transitionDuration,ee="none"===S.transitionProperty||"0s"===V||"0s, 0s"===V||0===s.width&&0===s.height,ne=new zO(this,D,r,ee);D.style.transform="scale3d(1, 1, 1)",ne.state=Gs.FADING_IN,r.persistent||(this._mostRecentTransientRipple=ne);let ue=null;return!ee&&(w||c.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ee=()=>this._finishRippleTransition(ne),Ue=()=>this._destroyRipple(ne);D.addEventListener("transitionend",Ee),D.addEventListener("transitioncancel",Ue),ue={onTransitionEnd:Ee,onTransitionCancel:Ue}}),this._activeRipples.set(ne,ue),(ee||!w)&&this._finishRippleTransition(ne),ne}fadeOutRipple(e){if(e.state===Gs.FADING_OUT||e.state===Gs.HIDDEN)return;const t=e.element,r={...Gk,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Gs.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=dm(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Wk.forEach(r=>{wS._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Zk.forEach(t=>{this._triggerElement.addEventListener(t,this,qk)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Gs.FADING_IN?this._startFadeOutTransition(e):e.state===Gs.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Gs.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Gs.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=Ok(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Fk(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Gs.VISIBLE||e.config.terminateOnPointerUp&&e.state===Gs.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(Wk.forEach(t=>wS._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&Zk.forEach(t=>e.removeEventListener(t,this,qk)))}}const ZO=new h.OlP("mat-ripple-global-options");let Kk=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,s,c,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new wS(this,r,t,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,s){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...s}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.SBq),h.Y36(h.R0b),h.Y36(rl),h.Y36(ZO,8),h.Y36(h.QbO,8))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){2&r&&h.ekj("mat-ripple-unbounded",s.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})();class rP{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class KO extends rP{constructor(e,t,r,s,c){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=s,this.projectableNodes=c}}class iP extends rP{constructor(e,t,r,s){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=s}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class YO extends rP{constructor(e){super(),this.element=e instanceof h.SBq?e.nativeElement:e}}class QO{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof KO?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof iP?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof YO?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}let JO=(()=>{class n extends iP{constructor(t,r){super(t,r)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.Rgc),h.Y36(h.s_b))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[h.qOj]})}return n})(),oP=(()=>{class n extends QO{constructor(t,r,s){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new h.vpe,this.attachDomPortal=c=>{const u=c.element,m=this._document.createComment("dom-portal");c.setAttachedHost(this),u.parentNode.insertBefore(m,u),this._getRootNode().appendChild(u),this._attachedPortal=c,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(u,m)})},this._document=s}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,c=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=r.createComponent(c,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h._Vd),h.Y36(h.s_b),h.Y36(ye))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[h.qOj]})}return n})();const XO=["addListener","removeListener"],e1=["addEventListener","removeEventListener"],t1=["on","off"];function pm(n,e,t,r){if((0,_n.m)(t)&&(r=t,t=void 0),r)return pm(n,e,t).pipe(ca(r));const[s,c]=function o1(n){return(0,_n.m)(n.addEventListener)&&(0,_n.m)(n.removeEventListener)}(n)?e1.map(u=>m=>n[u](e,m,t)):function n1(n){return(0,_n.m)(n.addListener)&&(0,_n.m)(n.removeListener)}(n)?XO.map(Yk(n,e)):function r1(n){return(0,_n.m)(n.on)&&(0,_n.m)(n.off)}(n)?t1.map(Yk(n,e)):[];if(!s&&yl(n))return Wn(u=>pm(u,e,t))(Nt(n));if(!s)throw new TypeError("Invalid event target");return new mn.y(u=>{const m=(...y)=>u.next(1<y.length?y:y[0]);return s(m),()=>c(m)})}function Yk(n,e){return t=>r=>n[t](e,r)}function Qk(n=0,e,t=O_){let r=-1;return null!=e&&(Ff(e)?t=e:r=e),new mn.y(s=>{let c=function s1(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;c<0&&(c=0);let u=0;return t.schedule(function(){s.closed||(s.next(u++),0<=r?this.schedule(void 0,r):s.complete())},c)})}const I0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=I0;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const s=e(c=>{t=void 0,n(c)});return new en.w0(()=>t?.(s))},requestAnimationFrame(...n){const{delegate:e}=I0;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=I0;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class c1 extends Wb{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class a1 extends M_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=I0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:c}=e;null!=t&&(null===(s=c[c.length-1])||void 0===s?void 0:s.id)!==t&&(I0.cancelAnimationFrame(t),e._scheduled=void 0)}});let sP,u1=1;const TS={};function Jk(n){return n in TS&&(delete TS[n],!0)}const d1={setImmediate(n){const e=u1++;return TS[e]=!0,sP||(sP=Promise.resolve()),sP.then(()=>Jk(e)&&n()),e},clearImmediate(n){Jk(n)}},{setImmediate:h1,clearImmediate:f1}=d1,CS={setImmediate(...n){const{delegate:e}=CS;return(e?.setImmediate||h1)(...n)},clearImmediate(n){const{delegate:e}=CS;return(e?.clearImmediate||f1)(n)},delegate:void 0};new class g1 extends Wb{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class p1 extends M_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=CS.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:c}=e;null!=t&&(null===(s=c[c.length-1])||void 0===s?void 0:s.id)!==t&&(CS.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function Xk(n,e=N_){return function _1(n){return(0,Dn.e)((e,t)=>{let r=!1,s=null,c=null,u=!1;const m=()=>{if(c?.unsubscribe(),c=null,r){r=!1;const w=s;s=null,t.next(w)}u&&t.complete()},y=()=>{c=null,u&&t.complete()};e.subscribe((0,sn.x)(t,w=>{r=!0,s=w,c||Nt(n(w)).subscribe(c=(0,sn.x)(t,m,y))},()=>{u=!0,(!r||!c||c.closed)&&t.complete()}))})}(()=>Qk(n,e))}let y1=(()=>{class n{constructor(t,r,s){this._ngZone=t,this._platform=r,this._scrolled=new cn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new mn.y(r=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(Xk(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):We()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const s=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Zn(c=>!c||s.indexOf(c)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((s,c)=>{this._scrollableContainsElement(c,t)&&r.push(c)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let s=dm(r),c=t.getElementRef().nativeElement;do{if(s==c)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>pm(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(h.R0b),h.LFG(rl),h.LFG(ye,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),b1=(()=>{class n{constructor(t,r,s,c){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=s,this.dir=c,this._destroyed=new cn.x,this._elementScrolled=new mn.y(u=>this.ngZone.runOutsideAngular(()=>pm(this.elementRef.nativeElement,"scroll").pipe(Fo(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,s=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=s?t.end:t.start),null==t.right&&(t.right=s?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),s&&y0()!=il.NORMAL?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),y0()==il.INVERTED?t.left=t.right:y0()==il.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;!function VN(){if(null==um){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return um=!1,um;if("scrollBehavior"in document.documentElement.style)um=!0;else{const n=Element.prototype.scrollTo;um=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return um}()?(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left)):r.scrollTo(t)}measureScrollOffset(t){const r="left",s="right",c=this.elementRef.nativeElement;if("top"==t)return c.scrollTop;if("bottom"==t)return c.scrollHeight-c.clientHeight-c.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==t?t=u?s:r:"end"==t&&(t=u?r:s),u&&y0()==il.INVERTED?t==r?c.scrollWidth-c.clientWidth-c.scrollLeft:c.scrollLeft:u&&y0()==il.NEGATED?t==r?c.scrollLeft+c.scrollWidth-c.clientWidth:-c.scrollLeft:t==r?c.scrollLeft:c.scrollWidth-c.clientWidth-c.scrollLeft}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.SBq),h.Y36(y1),h.Y36(h.R0b),h.Y36(ES,8))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return n})(),eN=(()=>{class n{constructor(t,r,s){this._platform=t,this._change=new cn.x,this._changeListener=c=>{this._change.next(c)},this._document=s,r.runOutsideAngular(()=>{if(t.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),s=t.documentElement,c=s.getBoundingClientRect();return{top:-c.top||t.body.scrollTop||r.scrollY||s.scrollTop||0,left:-c.left||t.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Xk(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(rl),h.LFG(h.R0b),h.LFG(ye,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E1=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),w1=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=dm(t);return new mn.y(s=>{const u=this._observeElement(r).subscribe(s);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new cn.x,s=this._mutationObserverFactory.create(c=>r.next(c));s&&s.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:s,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:s}=this._observedElements.get(t);r&&r.disconnect(),s.complete(),this._observedElements.delete(t)}}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(E1))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T1=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function lO(n,e=0){return function uO(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}constructor(t,r,s){this._contentObserver=t,this._elementRef=r,this._ngZone=s,this.event=new h.vpe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(eP(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(w1),h.Y36(h.SBq),h.Y36(h.R0b))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled",h.VuI],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[h.Xq5]})}return n})();var Xi=Q(825);function C1(n,e){1&n&&h.Hsn(0)}const aP=["*"],D1=["tabListContainer"],A1=["tabList"],S1=["tabListInner"],R1=["nextPaginator"],x1=["previousPaginator"];function M1(n,e){}const P1=n=>({animationDuration:n}),k1=(n,e)=>({value:n,params:e}),N1=["tabBodyWrapper"],O1=["tabHeader"];function F1(n,e){}function L1(n,e){if(1&n&&h.YNc(0,F1,0,0,"ng-template",10),2&n){const t=h.oxw().$implicit;h.Q6J("cdkPortalOutlet",t.templateLabel)}}function V1(n,e){if(1&n&&h._uU(0),2&n){const t=h.oxw().$implicit;h.Oqu(t.textLabel)}}function U1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",4,5),h.NdJ("click",function(){const s=h.CHM(t),c=s.$implicit,u=s.$index,m=h.oxw(),y=h.MAs(1);return h.KtG(m._handleClick(c,y,u))})("cdkFocusChange",function(s){const u=h.CHM(t).$index,m=h.oxw();return h.KtG(m._tabFocusChanged(s,u))}),h._UZ(2,"span",6)(3,"div",7),h.TgZ(4,"span",8)(5,"span",9),h.YNc(6,L1,1,1,null,10)(7,V1,1,1),h.qZA()()()}if(2&n){const t=e.$implicit,r=e.$index,s=h.MAs(1),c=h.oxw();h.ekj("mdc-tab--active",c.selectedIndex===r),h.Q6J("id",c._getTabLabelId(r))("ngClass",t.labelClass)("disabled",t.disabled)("fitInkBarToContent",c.fitInkBarToContent),h.uIk("tabIndex",c._getTabIndex(r))("aria-posinset",r+1)("aria-setsize",c._tabs.length)("aria-controls",c._getTabContentId(r))("aria-selected",c.selectedIndex===r)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),h.xp6(3),h.Q6J("matRippleTrigger",s)("matRippleDisabled",t.disabled||c.disableRipple),h.xp6(3),h.um2(6,t.templateLabel?6:7)}}function B1(n,e){1&n&&h.Hsn(0)}function j1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"mat-tab-body",11),h.NdJ("_onCentered",function(){h.CHM(t);const s=h.oxw();return h.KtG(s._removeTabBodyWrapperHeight())})("_onCentering",function(s){h.CHM(t);const c=h.oxw();return h.KtG(c._setTabBodyWrapperHeight(s))}),h.qZA()}if(2&n){const t=e.$implicit,r=e.$index,s=h.oxw();h.ekj("mat-mdc-tab-body-active",s.selectedIndex===r),h.Q6J("id",s._getTabContentId(r))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",s.animationDuration)("preserveContent",s.preserveContent),h.uIk("tabindex",null!=s.contentTabIndex&&s.selectedIndex===r?s.contentTabIndex:null)("aria-labelledby",s._getTabLabelId(r))("aria-hidden",s.selectedIndex!==r)}}const H1=new h.OlP("MatTabContent");let $1=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.Rgc))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","matTabContent",""]],standalone:!0,features:[h._Bn([{provide:H1,useExisting:n}])]})}return n})();const z1=new h.OlP("MatTabLabel"),tN=new h.OlP("MAT_TAB");let G1=(()=>{class n extends JO{constructor(t,r,s){super(t,r),this._closestTab=s}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.Rgc),h.Y36(h.s_b),h.Y36(tN,8))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[h._Bn([{provide:z1,useExisting:n}]),h.qOj]})}return n})();const nN=new h.OlP("MAT_TAB_GROUP");let rN=(()=>{class n{get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}constructor(t,r){this._viewContainerRef=t,this._closestTabGroup=r,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new cn.x,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new iP(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.s_b),h.Y36(nN,8))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["mat-tab"]],contentQueries:function(r,s,c){if(1&r&&(h.Suo(c,G1,5),h.Suo(c,$1,7,h.Rgc)),2&r){let u;h.iGM(u=h.CRH())&&(s.templateLabel=u.first),h.iGM(u=h.CRH())&&(s._explicitContent=u.first)}},viewQuery:function(r,s){if(1&r&&h.Gf(h.Rgc,7),2&r){let c;h.iGM(c=h.CRH())&&(s._implicitContent=c.first)}},hostAttrs:["hidden",""],inputs:{disabled:["disabled","disabled",h.VuI],textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[h._Bn([{provide:tN,useExisting:n}]),h.Xq5,h.TTD,h.jDz],ngContentSelectors:aP,decls:1,vars:0,template:function(r,s){1&r&&(h.F$t(),h.YNc(0,C1,1,0,"ng-template"))},encapsulation:2})}return n})();const cP="mdc-tab-indicator--active",iN="mdc-tab-indicator--no-transition";class q1{constructor(e){this._items=e}hide(){this._items.forEach(e=>e.deactivateInkBar())}alignToElement(e){const t=this._items.find(s=>s.elementRef.nativeElement===e),r=this._currentItem;if(t!==r&&(r?.deactivateInkBar(),t)){const s=r?.elementRef.nativeElement.getBoundingClientRect?.();t.activateInkBar(s),this._currentItem=t}}}function W1(n){return class extends n{constructor(...e){super(...e),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){const t=function cO(n){return null!=n&&"false"!=`${n}`}(e);this._fitToContent!==t&&(this._fitToContent=t,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){const t=this.elementRef.nativeElement;if(!e||!t.getBoundingClientRect||!this._inkBarContentElement)return void t.classList.add(cP);const r=t.getBoundingClientRect(),s=e.width/r.width,c=e.left-r.left;t.classList.add(iN),this._inkBarContentElement.style.setProperty("transform",`translateX(${c}px) scaleX(${s})`),t.getBoundingClientRect(),t.classList.remove(iN),t.classList.add(cP),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this.elementRef.nativeElement.classList.remove(cP)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){const e=this.elementRef.nativeElement.ownerDocument||document;this._inkBarElement=e.createElement("span"),this._inkBarContentElement=e.createElement("span"),this._inkBarElement.className="mdc-tab-indicator",this._inkBarContentElement.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",this._inkBarElement.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){(this._fitToContent?this.elementRef.nativeElement.querySelector(".mdc-tab__content"):this.elementRef.nativeElement).appendChild(this._inkBarElement)}}}const K1=W1(class{});let oN=(()=>{class n extends K1{constructor(t){super(),this.elementRef=t,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.SBq))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(r,s){2&r&&(h.uIk("aria-disabled",!!s.disabled),h.ekj("mat-mdc-tab-disabled",s.disabled))},inputs:{fitInkBarToContent:"fitInkBarToContent",disabled:["disabled","disabled",h.VuI]},standalone:!0,features:[h.Xq5,h.qOj]})}return n})();const sN=v0({passive:!0});let J1=(()=>{class n{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){const r=isNaN(t)?0:t;this._selectedIndex!=r&&(this._selectedIndexChanged=!0,this._selectedIndex=r,this._keyManager&&this._keyManager.updateActiveItem(r))}constructor(t,r,s,c,u,m,y){this._elementRef=t,this._changeDetectorRef=r,this._viewportRuler=s,this._dir=c,this._ngZone=u,this._platform=m,this._animationMode=y,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new cn.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new cn.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new h.vpe,this.indexFocused=new h.vpe,u.runOutsideAngular(()=>{pm(t.nativeElement,"mouseleave").pipe(Fo(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){pm(this._previousPaginator.nativeElement,"touchstart",sN).pipe(Fo(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),pm(this._nextPaginator.nativeElement,"touchstart",sN).pipe(Fo(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:We("ltr"),r=this._viewportRuler.change(150),s=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new vO(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(go(1)).subscribe(s),wc(t,r,this._items.changes,this._itemsResized()).pipe(Fo(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),s()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(c=>{this.indexFocused.emit(c),this._setTabFocus(c)})}_itemsResized(){return"function"!=typeof ResizeObserver?ti:this._items.changes.pipe(Pi(this._items),or(t=>new mn.y(r=>this._ngZone.runOutsideAngular(()=>{const s=new ResizeObserver(c=>r.next(c));return t.forEach(c=>s.observe(c.elementRef.nativeElement)),()=>{s.disconnect()}}))),tP(1),Zn(t=>t.some(r=>r.contentRect.width>0&&r.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Sk(t))switch(t.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){const r=this._items.get(this.focusIndex);r&&!r.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t))}break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){return!this._items||!!this._items.toArray()[t]}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const r=this._tabListContainer.nativeElement;r.scrollLeft="ltr"==this._getLayoutDirection()?0:r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,r="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const r=this._items?this._items.toArray()[t]:null;if(!r)return;const s=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:c,offsetWidth:u}=r.elementRef.nativeElement;let m,y;"ltr"==this._getLayoutDirection()?(m=c,y=m+u):(y=this._tabListInner.nativeElement.offsetWidth-c,m=y-u);const w=this.scrollDistance,D=this.scrollDistance+s;m<w?this.scrollDistance-=w-m:y>D&&(this.scrollDistance+=Math.min(y-D,m-w))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,r=t?t.elementRef.nativeElement:null;r?this._inkBar.alignToElement(r):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,r){r&&null!=r.button&&0!==r.button||(this._stopInterval(),Qk(650,100).pipe(Fo(wc(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:s,distance:c}=this._scrollHeader(t);(0===c||c>=s)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.SBq),h.Y36(h.sBO),h.Y36(eN),h.Y36(ES,8),h.Y36(h.R0b),h.Y36(rl),h.Y36(h.QbO,8))};static#t=this.\u0275dir=h.lG2({type:n,inputs:{disablePagination:["disablePagination","disablePagination",h.VuI],selectedIndex:["selectedIndex","selectedIndex",h.Cb_]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[h.Xq5]})}return n})(),X1=(()=>{class n extends J1{constructor(t,r,s,c,u,m,y){super(t,r,s,c,u,m,y),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new q1(this._items),super.ngAfterContentInit()}_itemSelected(t){t.preventDefault()}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.SBq),h.Y36(h.sBO),h.Y36(eN),h.Y36(ES,8),h.Y36(h.R0b),h.Y36(rl),h.Y36(h.QbO,8))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["mat-tab-header"]],contentQueries:function(r,s,c){if(1&r&&h.Suo(c,oN,4),2&r){let u;h.iGM(u=h.CRH())&&(s._items=u)}},viewQuery:function(r,s){if(1&r&&(h.Gf(D1,7),h.Gf(A1,7),h.Gf(S1,7),h.Gf(R1,5),h.Gf(x1,5)),2&r){let c;h.iGM(c=h.CRH())&&(s._tabListContainer=c.first),h.iGM(c=h.CRH())&&(s._tabList=c.first),h.iGM(c=h.CRH())&&(s._tabListInner=c.first),h.iGM(c=h.CRH())&&(s._nextPaginator=c.first),h.iGM(c=h.CRH())&&(s._previousPaginator=c.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(r,s){2&r&&h.ekj("mat-mdc-tab-header-pagination-controls-enabled",s._showPaginationControls)("mat-mdc-tab-header-rtl","rtl"==s._getLayoutDirection())},inputs:{disableRipple:["disableRipple","disableRipple",h.VuI]},standalone:!0,features:[h.Xq5,h.qOj,h.jDz],ngContentSelectors:aP,decls:13,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-mdc-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(r,s){1&r&&(h.F$t(),h.TgZ(0,"button",0,1),h.NdJ("click",function(){return s._handlePaginatorClick("before")})("mousedown",function(u){return s._handlePaginatorPress("before",u)})("touchend",function(){return s._stopInterval()}),h._UZ(2,"div",2),h.qZA(),h.TgZ(3,"div",3,4),h.NdJ("keydown",function(u){return s._handleKeydown(u)}),h.TgZ(5,"div",5,6),h.NdJ("cdkObserveContent",function(){return s._onContentChanges()}),h.TgZ(7,"div",7,8),h.Hsn(9),h.qZA()()(),h.TgZ(10,"button",9,10),h.NdJ("mousedown",function(u){return s._handlePaginatorPress("after",u)})("click",function(){return s._handlePaginatorClick("after")})("touchend",function(){return s._stopInterval()}),h._UZ(12,"div",2),h.qZA()),2&r&&(h.ekj("mat-mdc-tab-header-pagination-disabled",s._disableScrollBefore),h.Q6J("matRippleDisabled",s._disableScrollBefore||s.disableRipple)("disabled",s._disableScrollBefore||null),h.xp6(3),h.ekj("_mat-animation-noopable","NoopAnimations"===s._animationMode),h.xp6(7),h.ekj("mat-mdc-tab-header-pagination-disabled",s._disableScrollAfter),h.Q6J("matRippleDisabled",s._disableScrollAfter||s.disableRipple)("disabled",s._disableScrollAfter||null))},dependencies:[Kk,T1],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}return n})();const eF=new h.OlP("MAT_TABS_CONFIG"),tF={translateTab:(0,Xi.X$)("translateTab",[(0,Xi.SB)("center, void, left-origin-center, right-origin-center",(0,Xi.oB)({transform:"none"})),(0,Xi.SB)("left",(0,Xi.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,Xi.SB)("right",(0,Xi.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,Xi.eR)("* => left, * => right, left => center, right => center",(0,Xi.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,Xi.eR)("void => left-origin-center",[(0,Xi.oB)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),(0,Xi.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,Xi.eR)("void => right-origin-center",[(0,Xi.oB)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),(0,Xi.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let nF=(()=>{class n extends oP{constructor(t,r,s,c){super(t,r,c),this._host=s,this._centeringSub=en.w0.EMPTY,this._leavingSub=en.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Pi(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h._Vd),h.Y36(h.s_b),h.Y36((0,h.Gpc)(()=>aN)),h.Y36(ye))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[h.qOj]})}return n})(),aN=(()=>{class n{set position(t){this._positionIndex=t,this._computePositionAnimationState()}constructor(t,r,s){this._elementRef=t,this._dir=r,this._dirChangeSubscription=en.w0.EMPTY,this._translateTabComplete=new cn.x,this._onCentering=new h.vpe,this._beforeCentering=new h.vpe,this._afterLeavingCenter=new h.vpe,this._onCentered=new h.vpe(!0),this.animationDuration="500ms",this.preserveContent=!1,r&&(this._dirChangeSubscription=r.change.subscribe(c=>{this._computePositionAnimationState(c),s.markForCheck()})),this._translateTabComplete.pipe(nI((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{this._isCenterPosition(c.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(c.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const r=this._isCenterPosition(t.toState);this._beforeCentering.emit(r),r&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const r=this._getLayoutDirection();return"ltr"==r&&t<=0||"rtl"==r&&t>0?"left-origin-center":"right-origin-center"}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.SBq),h.Y36(ES,8),h.Y36(h.sBO))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["mat-tab-body"]],viewQuery:function(r,s){if(1&r&&h.Gf(oP,5),2&r){let c;h.iGM(c=h.CRH())&&(s._portalHost=c.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[h.jDz],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-mdc-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(r,s){1&r&&(h.TgZ(0,"div",0,1),h.NdJ("@translateTab.start",function(u){return s._onTranslateTabStarted(u)})("@translateTab.done",function(u){return s._translateTabComplete.next(u)}),h.YNc(2,M1,0,0,"ng-template",2),h.qZA()),2&r&&h.Q6J("@translateTab",h.WLB(3,k1,s._position,h.VKq(1,P1,s.animationDuration)))},dependencies:[nF,b1],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[tF.translateTab]}})}return n})(),rF=0,oF=(()=>{class n{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(t){this._fitInkBarToContent=t,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=isNaN(t)?null:t}get animationDuration(){return this._animationDuration}set animationDuration(t){const r=t+"";this._animationDuration=/^\d+$/.test(r)?t+"ms":r}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=isNaN(t)?null:t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const r=this._elementRef.nativeElement.classList;r.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),t&&r.add("mat-tabs-with-background",`mat-background-${t}`),this._backgroundColor=t}constructor(t,r,s,c){this._elementRef=t,this._changeDetectorRef=r,this._animationMode=c,this._tabs=new h.n_E,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=en.w0.EMPTY,this._tabLabelSubscription=en.w0.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new h.vpe,this.focusChange=new h.vpe,this.animationDone=new h.vpe,this.selectedTabChange=new h.vpe(!0),this._isServer=!(0,h.f3M)(rl).isBrowser,this._groupId=rF++,this.animationDuration=s&&s.animationDuration?s.animationDuration:"500ms",this.disablePagination=!(!s||null==s.disablePagination)&&s.disablePagination,this.dynamicHeight=!(!s||null==s.dynamicHeight)&&s.dynamicHeight,null!=s?.contentTabIndex&&(this.contentTabIndex=s.contentTabIndex),this.preserveContent=!!s?.preserveContent,this.fitInkBarToContent=!(!s||null==s.fitInkBarToContent)&&s.fitInkBarToContent,this.stretchTabs=!s||null==s.stretchTabs||s.stretchTabs}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const r=null==this._selectedIndex;if(!r){this.selectedTabChange.emit(this._createChangeEvent(t));const s=this._tabBodyWrapper.nativeElement;s.style.minHeight=s.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((s,c)=>s.isActive=c===t),r||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((r,s)=>{r.position=s-t,null!=this._selectedIndex&&0==r.position&&!r.origin&&(r.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const r=this._tabs.toArray();let s;for(let c=0;c<r.length;c++)if(r[c].isActive){this._indexToSelect=this._selectedIndex=c,this._lastFocusedTabIndex=null,s=r[c];break}!s&&r[t]&&Promise.resolve().then(()=>{r[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Pi(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(r=>r._closestTabGroup===this||!r._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const r=this._tabHeader;r&&(r.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const r=new sF;return r.index=t,this._tabs&&this._tabs.length&&(r.tab=this._tabs.toArray()[t]),r}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=wc(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;const r=this._tabBodyWrapper.nativeElement;r.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(r.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,r,s){r.focusIndex=s,t.disabled||(this.selectedIndex=s)}_getTabIndex(t){return t===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(t,r){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=r)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.SBq),h.Y36(h.sBO),h.Y36(eF,8),h.Y36(h.QbO,8))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["mat-tab-group"]],contentQueries:function(r,s,c){if(1&r&&h.Suo(c,rN,5),2&r){let u;h.iGM(u=h.CRH())&&(s._allTabs=u)}},viewQuery:function(r,s){if(1&r&&(h.Gf(N1,5),h.Gf(O1,5)),2&r){let c;h.iGM(c=h.CRH())&&(s._tabBodyWrapper=c.first),h.iGM(c=h.CRH())&&(s._tabHeader=c.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(r,s){2&r&&(h.Tol("mat-"+(s.color||"primary")),h.Udp("--mat-tab-animation-duration",s.animationDuration),h.ekj("mat-mdc-tab-group-dynamic-height",s.dynamicHeight)("mat-mdc-tab-group-inverted-header","below"===s.headerPosition)("mat-mdc-tab-group-stretch-tabs",s.stretchTabs))},inputs:{color:"color",fitInkBarToContent:["fitInkBarToContent","fitInkBarToContent",h.VuI],stretchTabs:["mat-stretch-tabs","stretchTabs",h.VuI],dynamicHeight:["dynamicHeight","dynamicHeight",h.VuI],selectedIndex:["selectedIndex","selectedIndex",h.Cb_],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:["contentTabIndex","contentTabIndex",h.Cb_],disablePagination:["disablePagination","disablePagination",h.VuI],disableRipple:["disableRipple","disableRipple",h.VuI],preserveContent:["preserveContent","preserveContent",h.VuI],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[h._Bn([{provide:nN,useExisting:n}]),h.Xq5,h.jDz],ngContentSelectors:aP,decls:9,vars:6,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],[1,"mat-mdc-tab-body-wrapper"],["tabBodyWrapper",""],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","ngClass","disabled","fitInkBarToContent","click","cdkFocusChange"],["tabNode",""],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"],["class","mdc-tab mat-mdc-tab mat-mdc-focus-indicator","role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",3,"id","mdc-tab--active","ngClass","disabled","fitInkBarToContent"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent"]],template:function(r,s){1&r&&(h.F$t(),h.TgZ(0,"mat-tab-header",0,1),h.NdJ("indexFocused",function(u){return s._focusChanged(u)})("selectFocusedIndex",function(u){return s.selectedIndex=u}),h.SjG(2,U1,8,16,"div",12,h.x6l),h.qZA(),h.YNc(4,B1,1,0),h.TgZ(5,"div",2,3),h.SjG(7,j1,1,12,"mat-tab-body",13,h.x6l),h.qZA()),2&r&&(h.Q6J("selectedIndex",s.selectedIndex||0)("disableRipple",s.disableRipple)("disablePagination",s.disablePagination),h.xp6(2),h.wJu(s._tabs),h.xp6(2),h.um2(4,s._isServer?4:-1),h.xp6(),h.ekj("_mat-animation-noopable","NoopAnimations"===s._animationMode),h.xp6(2),h.wJu(s._tabs))},dependencies:[X1,oN,xO,Rt,Kk,oP,aN],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}return n})();class sF{}let aF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({imports:[$k,$k]})}return n})();function cF(n,e){1&n&&(h.TgZ(0,"div",19),h._uU(1,"Inspiration"),h.qZA())}function lF(n,e){if(1&n&&(h.TgZ(0,"div",19),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit;h.xp6(),h.Oqu(t.note)}}const Yh=(n,e,t)=>({FCE:n,AMAT:e,atm:t});function uF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"article")(1,"div",9)(2,"div",10)(3,"h3",11)(4,"a",12),h.NdJ("click",function(){const c=h.CHM(t).$implicit,u=h.oxw();return h.KtG(u.sendInfo(c.id))}),h._uU(5),h.qZA()(),h.YNc(6,cF,2,0,"div",13)(7,lF,2,1,"div",13),h.qZA(),h.TgZ(8,"div",14),h._uU(9),h.TgZ(10,"a",15),h.NdJ("click",function(){const c=h.CHM(t).$implicit,u=h.oxw();return h.KtG(u.sendInfo(c.id))}),h._uU(11,"Playlist"),h._UZ(12,"span",16),h.qZA()(),h._UZ(13,"div",17)(14,"div",18),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(),h.Udp("background","url("+t.srcimg+") center no-repeat"),h.xp6(2),h.Q6J("ngClass",h.kEZ(11,Yh,"FCE"==t.note,"AMAT"==t.note,"atm"==t.note)),h.xp6(2),h.AsE("",t.partenza," - ",t.destinazione,""),h.xp6(),h.Q6J("ngIf",""==t.note),h.xp6(),h.Q6J("ngIf",""!=t.note),h.xp6(2),h.lnq(" Vivi il viaggio da ",t.partenza," a ",t.destinazione," (",t.note,") con questa playlist "),h.xp6(),h.Q6J("ngClass",h.kEZ(15,Yh,"FCE"==t.note,"AMAT"==t.note,"atm"==t.note))}}function dF(n,e){1&n&&(h.TgZ(0,"div",19),h._uU(1,"Inspiration"),h.qZA())}function hF(n,e){if(1&n&&(h.TgZ(0,"div",19),h._uU(1),h.qZA()),2&n){const t=h.oxw(2).$implicit;h.xp6(),h.hij(" ",t.note," ")}}function fF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"article")(1,"div",9)(2,"div",10)(3,"h3",11)(4,"a",12),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,c=h.oxw();return h.KtG(c.sendInfo(s.id))}),h._uU(5),h.qZA()(),h.YNc(6,dF,2,0,"div",13)(7,hF,2,1,"div",13),h.qZA(),h.TgZ(8,"div",14),h._uU(9),h.TgZ(10,"a",15),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,c=h.oxw();return h.KtG(c.sendInfo(s.id))}),h._uU(11,"Playlist"),h._UZ(12,"span",16),h.qZA()(),h._UZ(13,"div",17)(14,"div",18),h.qZA()()}if(2&n){const t=h.oxw().$implicit;h.xp6(),h.Udp("background","url("+t.srcimg+") center no-repeat"),h.xp6(2),h.Q6J("ngClass",h.kEZ(11,Yh,"FCE"==t.note,"AMAT"==t.note,"atm"==t.note)),h.xp6(2),h.AsE("",t.partenza," - ",t.destinazione,""),h.xp6(),h.Q6J("ngIf",""==t.note),h.xp6(),h.Q6J("ngIf",""!=t.note),h.xp6(2),h.lnq(" Vivi il viaggio da ",t.partenza," a ",t.destinazione," (",t.note,") con questa playlist "),h.xp6(),h.Q6J("ngClass",h.kEZ(15,Yh,"FCE"==t.note,"AMAT"==t.note,"atm"==t.note))}}function pF(n,e){if(1&n&&(h.ynx(0),h.YNc(1,fF,15,19,"article",20),h.BQk()),2&n){const t=e.$implicit;h.xp6(),h.Q6J("ngIf","treno"==t.mezzo)}}function gF(n,e){1&n&&(h.TgZ(0,"div",19),h._uU(1,"Inspiration"),h.qZA())}function mF(n,e){if(1&n&&(h.TgZ(0,"div",19),h._uU(1),h.qZA()),2&n){const t=h.oxw(2).$implicit;h.xp6(),h.hij(" ",t.note," ")}}function _F(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"article")(1,"div",9)(2,"div",10)(3,"h3",11)(4,"a",12),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,c=h.oxw();return h.KtG(c.sendInfo(s.id))}),h._uU(5),h.qZA()(),h.YNc(6,gF,2,0,"div",13)(7,mF,2,1,"div",13),h.qZA(),h.TgZ(8,"div",14),h._uU(9),h.TgZ(10,"a",15),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,c=h.oxw();return h.KtG(c.sendInfo(s.id))}),h._uU(11,"Playlist"),h._UZ(12,"span",16),h.qZA()(),h._UZ(13,"div",17)(14,"div",18),h.qZA()()}if(2&n){const t=h.oxw().$implicit;h.xp6(),h.Udp("background","url("+t.srcimg+") center no-repeat"),h.xp6(2),h.Q6J("ngClass",h.kEZ(11,Yh,"FCE"==t.note,"AMAT"==t.note,"atm"==t.note)),h.xp6(2),h.AsE("",t.partenza," - ",t.destinazione,""),h.xp6(),h.Q6J("ngIf",""==t.note),h.xp6(),h.Q6J("ngIf",""!=t.note),h.xp6(2),h.lnq(" Vivi il viaggio da ",t.partenza," a ",t.destinazione," (",t.note,") con questa playlist "),h.xp6(),h.Q6J("ngClass",h.kEZ(15,Yh,"FCE"==t.note,"AMAT"==t.note,"atm"==t.note))}}function vF(n,e){if(1&n&&(h.ynx(0),h.YNc(1,_F,15,19,"article",20),h.BQk()),2&n){const t=e.$implicit;h.xp6(),h.Q6J("ngIf","tram"==t.mezzo)}}function yF(n,e){1&n&&(h.TgZ(0,"div",19),h._uU(1,"Inspiration"),h.qZA())}function bF(n,e){if(1&n&&(h.TgZ(0,"div",19),h._uU(1),h.qZA()),2&n){const t=h.oxw(2).$implicit;h.xp6(),h.hij(" ",t.note," ")}}function IF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"article")(1,"div",9)(2,"div",10)(3,"h3",11)(4,"a",12),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,c=h.oxw();return h.KtG(c.sendInfo(s.id))}),h._uU(5),h.qZA()(),h.YNc(6,yF,2,0,"div",13)(7,bF,2,1,"div",13),h.qZA(),h.TgZ(8,"div",14),h._uU(9),h.TgZ(10,"a",15),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,c=h.oxw();return h.KtG(c.sendInfo(s.id))}),h._uU(11,"Playlist"),h._UZ(12,"span",16),h.qZA()(),h._UZ(13,"div",17)(14,"div",18),h.qZA()()}if(2&n){const t=h.oxw().$implicit;h.xp6(),h.Udp("background","url("+t.srcimg+") center no-repeat"),h.xp6(2),h.Q6J("ngClass",h.kEZ(11,Yh,"FCE"==t.note,"AMAT"==t.note,"atm"==t.note)),h.xp6(2),h.AsE("",t.partenza," - ",t.destinazione,""),h.xp6(),h.Q6J("ngIf",""==t.note),h.xp6(),h.Q6J("ngIf",""!=t.note),h.xp6(2),h.lnq(" Vivi il viaggio da ",t.partenza," a ",t.destinazione," (",t.note,") con questa playlist "),h.xp6(),h.Q6J("ngClass",h.kEZ(15,Yh,"FCE"==t.note,"AMAT"==t.note,"atm"==t.note))}}function EF(n,e){if(1&n&&(h.ynx(0),h.YNc(1,IF,15,19,"article",20),h.BQk()),2&n){const t=e.$implicit;h.xp6(),h.Q6J("ngIf","metro"==t.mezzo)}}let wF=(()=>{class n{constructor(t,r){this.firebase=t,this.router=r,this.listaTratte=[],this.sendID=new cn.x,this.sendID$=this.sendID.asObservable()}ngOnInit(){this.firebase.getTratte().subscribe(t=>{this.listaTratte=t})}sendInfo(t){this.sendID.next(t),this.router.navigateByUrl(`/tratta/${t}`)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(Dk),h.Y36(Io))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-tratte"]],decls:24,vars:4,consts:[["id","picture"],[2,"width","auto"],["role","alert","id","disclaimer",1,"alert","alert-warning"],["mat-stretch-tabs","false","mat-align-tabs","center"],["label","Tutti"],[4,"ngFor","ngForOf"],["label","Treno"],["label","Tram"],["label","Metro"],[1,"blog-card","spring-fever"],[1,"title-content"],[3,"ngClass"],[3,"click"],["class","intro",4,"ngIf"],[1,"card-info"],[3,"ngClass","click"],[1,"licon","icon-arr","icon-black"],[1,"gradient-overlay"],[1,"color-overlay"],[1,"intro"],[4,"ngIf"]],template:function(r,s){1&r&&(h._UZ(0,"div",0),h.TgZ(1,"article",1)(2,"div",2)(3,"p")(4,"strong"),h._uU(5,"Disclaimer :"),h.qZA(),h._uU(6," Le canzoni presentate su SpotiRFI sono state scelte esclusivamente sulla base dell'adeguatezza del titolo con il nome delle stazioni ferroviarie. La scelta di una canzone non implica un'approvazione o un'adesione al testo, al significato o a qualsiasi altro aspetto della canzone stessa. Le canzoni sono fornite solo a scopo di intrattenimento e non intendono rappresentare o riflettere le opinioni di SpotiRFI. "),h.qZA()()(),h.TgZ(7,"mat-tab-group",3)(8,"mat-tab",4),h._UZ(9,"br"),h.TgZ(10,"section"),h.YNc(11,uF,15,19,"article",5),h.qZA()(),h.TgZ(12,"mat-tab",6),h._UZ(13,"br"),h.TgZ(14,"section"),h.YNc(15,pF,2,1,"ng-container",5),h.qZA()(),h.TgZ(16,"mat-tab",7),h._UZ(17,"br"),h.TgZ(18,"section"),h.YNc(19,vF,2,1,"ng-container",5),h.qZA()(),h.TgZ(20,"mat-tab",8),h._UZ(21,"br"),h.TgZ(22,"section"),h.YNc(23,EF,2,1,"ng-container",5),h.qZA()()()),2&r&&(h.xp6(11),h.Q6J("ngForOf",s.listaTratte),h.xp6(4),h.Q6J("ngForOf",s.listaTratte),h.xp6(4),h.Q6J("ngForOf",s.listaTratte),h.xp6(4),h.Q6J("ngForOf",s.listaTratte))},dependencies:[Rt,rn,qu,rN,oF],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";@import"//fonts.googleapis.com/css?family=Abril+Fatface|Droid+Serif:400,700,400italic,700italic";#picture[_ngcontent-%COMP%]{background-image:url(104Agnone.ea135585ad9e7ea3.JPG);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}.mat-tab-group[_ngcontent-%COMP%]{margin-bottom:48px}article[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;margin:auto auto 4rem;font-family:Merienda,cursive;width:500px}section[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}#disclaimer[_ngcontent-%COMP%]{margin:4em 1em 3.5em;text-align:justify}p[_ngcontent-%COMP%]{font-size:19px;line-height:1.6}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{background:linear-gradient(to bottom,rgba(0,5,10,.4) 0%,rgba(0,0,0,0) 100%);font-family:"Droid Serif",serif}.blog-card[_ngcontent-%COMP%]{max-width:550px;width:100%;height:500px;position:relative;font-family:"Droid Serif",serif;color:#fff;top:20%;right:0;left:0;margin:0 auto;overflow:hidden;border-radius:0;box-shadow:0 10px 20px -9px #00000080;text-align:center;transition:all .4s;background-size:100%}.blog-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:all .2s;cursor:pointer}.blog-card[_ngcontent-%COMP%]   .color-overlay[_ngcontent-%COMP%]{background:rgba(64,84,94,.5);width:550px;height:500px;position:absolute;z-index:10;top:0;left:0;transition:background .3s cubic-bezier(.33,.66,.66,1)}.blog-card[_ngcontent-%COMP%]   .gradient-overlay[_ngcontent-%COMP%]{background-image:linear-gradient(transparent 0%,rgba(0,0,0,.6) 21%);width:550px;height:500px;position:absolute;top:350px;left:0;z-index:15}.blog-card[_ngcontent-%COMP%]:hover{box-shadow:0 18px 20px -9px #000a1ebf}.blog-card[_ngcontent-%COMP%]:hover   .card-info[_ngcontent-%COMP%]{opacity:1;bottom:100px}.blog-card[_ngcontent-%COMP%]:hover   .color-overlay[_ngcontent-%COMP%]{background:rgba(64,64,70,.8)}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%]{margin-top:70px}.title-content[_ngcontent-%COMP%]{text-align:center;margin:170px 0 0;position:absolute;z-index:20;width:100%;top:0;left:0;transition:all .6s}.blog-card[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_changeLetter .3s 1 linear;width:80%}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-size:1.9em;font-weight:400;letter-spacing:1px;font-family:Abril Fatface,serif;margin-bottom:0;display:inline-block}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-shadow:0px 0px 10px rgba(0,0,0,.5);transition:all .2s}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-shadow:0px 8px 20px rgba(0,0,0,.95)}h3[_ngcontent-%COMP%]:after{content:" ";display:block;width:10%;height:2px;margin:20px auto;border:0;background:#006564;transition:all .2s}h3.FCE[_ngcontent-%COMP%]:after{background:#065DA8}h3.AMAT[_ngcontent-%COMP%]:after{background:#00A0C7}h3.atm[_ngcontent-%COMP%]:after{background:#D60B25}@keyframes _ngcontent-%COMP%_changeLetter{0%{width:10%}to{width:80%}}.intro[_ngcontent-%COMP%]{width:170px;margin:0 auto;color:#ddd;font-style:italic;line-height:18px}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ddd}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.card-info[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;position:absolute;bottom:-40px;left:0;margin:0 auto;padding:0 50px;font-size:16px;line-height:24px;z-index:20;opacity:0;transition:bottom .64s,opacity .63s cubic-bezier(.33,.66,.66,1)}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;width:100px;margin:15px auto;background:#fff;color:#444;padding:3px 10px;border-radius:2px;font-size:.8em}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#006564;color:#fff}.card-info[_ngcontent-%COMP%]   a.FCE[_ngcontent-%COMP%]:hover{background:#065DA8}.card-info[_ngcontent-%COMP%]   a.AMAT[_ngcontent-%COMP%]:hover{background:#00A0C7}.card-info[_ngcontent-%COMP%]   a.atm[_ngcontent-%COMP%]:hover{background:#D60B25}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{filter:brightness(10);opacity:1}.licon[_ngcontent-%COMP%]{position:relative;width:23px;height:15px;display:inline-block;vertical-align:middle}.licon[_ngcontent-%COMP%]:before{content:"";background:url(https://rawcdn.githack.com/Nodws/NodPen/ffad95aa5244b4b09a3c7c1508a018959bbedb7e/postItem/licons.svg?) -2px -6px no-repeat;background-size:250px;width:26px;height:20px;display:inline-block;vertical-align:middle;position:absolute;top:-3px;left:0}.icon-black[_ngcontent-%COMP%]{filter:brightness(0);opacity:.6}@media (max-width:750px){.utility-info[_ngcontent-%COMP%]{text-align:center}.utility-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;margin:0;box-sizing:border-box}.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:49%;display:inline-block;box-sizing:border-box;margin:0}}@media (max-width:500px){.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type{width:100%}.card-info[_ngcontent-%COMP%]{display:none}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%], .title-content[_ngcontent-%COMP%]{margin-top:40px}.blog-card[_ngcontent-%COMP%]{height:300px}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3em}.intro[_ngcontent-%COMP%]{font-size:.8em}}#profile-badges[_ngcontent-%COMP%]:after{content:"BRO";font-family:"Lato","Lucida Grande","Lucida Sans Unicode",Tahoma,Sans-Serif;font-size:13px;font-weight:500;text-transform:uppercase;padding:1px 4px;color:#000!important;border-radius:3px;position:relative;top:-2px;text-shadow:none!important;white-space:nowrap;letter-spacing:0;background:#FFDD40}.profile-header[_ngcontent-%COMP%]{background:#333 url(https://images.unsplash.com/photo-1435783099294-283725c37230?dpr=1&auto=compress,format&fit=crop&w=1376&h=635&q=80&cs=tinysrgb&crop=&bg=) top center no-repeat;background-size:cover;font-size:3em;position:relative}.profile-header[_ngcontent-%COMP%]:after{position:absolute;content:"";display:block;width:100%;height:100%;top:0;left:0;background:rgba(23,23,31,.42);z-index:0}#profile-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Abril Fatface,serif;font-size:1.2em}.profile-links[_ngcontent-%COMP%]   a[href*="nodws.com"][_ngcontent-%COMP%]:before{content:"\\2616";color:#0a45b5;padding-right:3px}.profile-links[_ngcontent-%COMP%]   a[href*=twitter][_ngcontent-%COMP%]:before{content:"\\1f426";color:#08c}.profile-links[_ngcontent-%COMP%]   a[href*=dribbble][_ngcontent-%COMP%]:before{content:"\\26be";color:#d055bf}#following-this-user[_ngcontent-%COMP%]{pointer-events:none}#follow-this-user[_ngcontent-%COMP%]{font-size:1.2em;border-color:#359ef9}#follow-this-user[_ngcontent-%COMP%]:after{content:"\\1f448"}.links-and-stats[_ngcontent-%COMP%]{background:rgb(20,20,21)}.profile-name[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-shadow:0 6px 9px rgba(0,0,0,.48)}.profile-avatar[_ngcontent-%COMP%]{bottom:-10px;width:150px;height:150px;border:0px solid #1E1E1E;background:rgba(2,2,2,.49);box-shadow:0 19px 19px -10px #000000a1}.profile-username[_ngcontent-%COMP%], .upsell[_ngcontent-%COMP%], .profile-location[_ngcontent-%COMP%], .primary-pro[_ngcontent-%COMP%]{opacity:0}.upsell[_ngcontent-%COMP%], #pen-as-header-question[_ngcontent-%COMP%]{display:none}.profile-nav-1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.2rem}.profile-bio[_ngcontent-%COMP%], .profile-nav-1[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .profile-nav-1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#14141596!important;font-size:1.2rem}.meta[_ngcontent-%COMP%]   .pen-title[_ngcontent-%COMP%]{font-family:"Droid Serif",serif;text-align:center}.pagination-button[_ngcontent-%COMP%]{background-color:#2f2f31;border-color:#2f2f31;transition:all .2s}.pagination-button[_ngcontent-%COMP%]:hover{box-shadow:0 3px 8px #0003}.single-project[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%], .single-pen[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{text-align:center;width:100%}.stats[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#bda26b}.stats[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .loves[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{fill:#2f2f3100!important;stroke:#ba6!important;stroke-width:.1em!important}.loves[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{stroke-width:.5em!important}.comments[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-width:.35em!important}.single-stat.loves.loved-1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff!important}.single-pen[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]:after{width:40%;transition:all .2s}.pen-actions[_ngcontent-%COMP%]{border:0px!important}.meta[_ngcontent-%COMP%]{box-shadow:none!important}']})}return n})(),TF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-chisiamo"]],decls:7,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["id","picture"],["id","content"],[1,"mb-4"]],template:function(r,s){1&r&&(h._UZ(0,"link",0)(1,"div",1),h.TgZ(2,"div",2)(3,"h2"),h._uU(4,"Chi Siamo"),h.qZA(),h.TgZ(5,"p",3),h._uU(6," Siamo un gruppo di appassionati di viaggi e di musica, con un amore particolare per le ferrovie. La nostra passione per l'esplorazione e la scoperta ci ha portato a creare SpotiRFI, un progetto unico che unisce la bellezza del viaggio in treno con il potere evocativo della musica. Ogni stazione ferroviaria sulla mappa diventa una tappa di un viaggio musicale attraverso la Sicilia, offrendo un'esperienza unica che speriamo possa arricchire i vostri viaggi tanto quanto ha arricchito i nostri. "),h.qZA()())},styles:["#picture[_ngcontent-%COMP%]{background-image:url(PMAgnone.c90becf0931e3593.JPG);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}h2[_ngcontent-%COMP%]{margin-top:2em}#content[_ngcontent-%COMP%]{max-width:58em;text-align:justify;margin:0 auto;padding:2em}"]})}return n})(),CF=(()=>{class n{constructor(t){this.path="";let r=t.path().split("/");this.path=r[1].toUpperCase()}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36($e))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-tabellone"]],decls:50,vars:1,consts:[["href","https://fonts.cdnfonts.com/css/caros","rel","stylesheet"],[1,"background"],[1,"riga"],[1,"binario"],[1,"destinazione"],[1,"pdest"],[1,"treno"],[1,"ptreno"],[1,"partenza"],[1,"ppart"],[1,"info"],[1,"pinfo"]],template:function(r,s){1&r&&(h._UZ(0,"link",0),h.TgZ(1,"div",1),h._UZ(2,"br"),h.TgZ(3,"div",2)(4,"div",3)(5,"h2")(6,"b"),h._uU(7,"1"),h.qZA()()(),h.TgZ(8,"div",4)(9,"p")(10,"b"),h._uU(11,"destinazione "),h.qZA(),h.TgZ(12,"i"),h._uU(13,"destination"),h.qZA()(),h.TgZ(14,"div",5)(15,"h4"),h._uU(16),h.qZA()()()(),h._UZ(17,"br"),h.TgZ(18,"div",2)(19,"div",6)(20,"p")(21,"b"),h._uU(22,"treno "),h.qZA(),h.TgZ(23,"i"),h._uU(24,"train"),h.qZA()(),h.TgZ(25,"div",7)(26,"h4"),h._uU(27,"SPOTIRFI"),h.qZA(),h.TgZ(28,"h5"),h._uU(29,"REG 21886"),h.qZA()()(),h.TgZ(30,"div",8)(31,"p")(32,"b"),h._uU(33,"partenza "),h.qZA(),h.TgZ(34,"i"),h._uU(35,"departure"),h.qZA()(),h.TgZ(36,"div",9)(37,"h4"),h._uU(38,"CANCELLATO"),h.qZA()()()(),h._UZ(39,"br"),h.TgZ(40,"div",2)(41,"div",10)(42,"p")(43,"b"),h._uU(44,"informazioni "),h.qZA(),h.TgZ(45,"i"),h._uU(46,"informations"),h.qZA()(),h.TgZ(47,"div",11)(48,"h4"),h._uU(49,"E' SEVERAMENTE VIETATO ATTRAVERSARE LA LINEA GIALLA"),h.qZA()()()()()),2&r&&(h.xp6(16),h.Oqu(s.path))},styles:['@import"https://fonts.cdnfonts.com/css/caros";.background[_ngcontent-%COMP%]{width:40em;height:20.35em;background-color:#000;margin:auto}.riga[_ngcontent-%COMP%]{border-top:.1em white solid;width:38em;margin:0 1em}.binario[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}h2[_ngcontent-%COMP%]{font-size:5em}.destinazione[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.destinazione[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pdest[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 20s linear infinite}.pdest[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em;overflow:hidden}.treno[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}.treno[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ptreno[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:10.99em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ptreno[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em;margin-left:.2em;margin-bottom:.1em}.ptreno[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1em;margin-left:.2em}.partenza[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.partenza[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ppart[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ppart[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em}.info[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pinfo[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:38em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite;overflow:hidden}.pinfo[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8em;white-space:nowrap;position:relative;animation:_ngcontent-%COMP%_scroll-left 20s linear infinite}@keyframes _ngcontent-%COMP%_lighting{0%{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}to{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}}@keyframes _ngcontent-%COMP%_scroll-left{0%{transform:translate(100%)}to{transform:translate(-100%)}}']})}return n})(),DF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-notfound"]],decls:6,vars:0,consts:[["controls","","autoplay",""],["src","assets/404.mp3","type","audio/mpeg"]],template:function(r,s){1&r&&(h.TgZ(0,"article"),h._UZ(1,"app-tabellone"),h.qZA(),h.TgZ(2,"article")(3,"audio",0),h._UZ(4,"source",1),h._uU(5," Il tuo browser non supporta l'elemento audio. "),h.qZA()())},dependencies:[CF],styles:["article[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;margin:6em;font-family:Merienda,cursive}"]})}return n})();function AF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",16),h.NdJ("click",function(){const c=h.CHM(t).$implicit,u=h.oxw(2).$implicit,m=h.oxw();return h.KtG(m.stationToModal(c,u.note))}),h._uU(1),h.qZA()}if(2&n){const t=e.$implicit;h.xp6(),h.Oqu(t)}}function SF(n,e){if(1&n&&(h.TgZ(0,"div",13),h._UZ(1,"iframe",14)(2,"br")(3,"br")(4,"br"),h.TgZ(5,"ul"),h.YNc(6,AF,2,1,"li",15),h.qZA()()),2&n){const t=h.oxw().index,r=h.oxw();h.xp6(),h.Q6J("src",r.srcs[t],h.uOi),h.xp6(5),h.Q6J("ngForOf",r.stations[t])}}function RF(n,e){if(1&n&&(h.TgZ(0,"div",11),h.YNc(1,SF,7,2,"div",12),h.qZA()),2&n){const t=e.$implicit,r=h.oxw();h.xp6(),h.Q6J("ngIf",t.id==r.id)}}const xF=[{path:"",component:Ic},{path:"home",component:Ic},{path:"tratte",component:wF},{path:"chisiamo",component:TF},{path:"tratta/:id",component:(()=>{class n{constructor(t,r,s){this.fireServ=t,this.route=r,this.sanitizer=s,this.id=null,this.tratte=[],this.stations=[],this.srcs=[],this.actualStation="",this.actualLine=""}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.fireServ.getTratte().subscribe(t=>{let r=0;for(let s of t){let c;this.trattaSrc=this.sanitizer.bypassSecurityTrustResourceUrl(s.src),this.srcs.push(this.trattaSrc),this.stations[r]=this.stations[r]||[],c=s.stations.split("_"),this.stations[r]=c,r++}this.tratte=t})}stationToModal(t,r){this.actualStation=t,this.actualLine=r}openMaps(){let t,r;r="AMAT"==this.actualLine?"fermata tram "+this.actualLine+" di "+this.actualStation+" Palermo":"atm"==this.actualLine?"fermata tram "+this.actualLine+" di "+this.actualStation+" Messina":"stazione di "+this.actualStation,t="https://www.google.com/maps/search/?api=1&query="+encodeURIComponent(r),window.open(t,"_blank"),console.log(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(Dk),h.Y36(hr),h.Y36(Lm))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-playlist-page"]],decls:15,vars:2,consts:[["class","container",4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],[1,"container"],["class","incontainer",4,"ngIf"],[1,"incontainer"],["width","100%","height","500","frameBorder","0","allowfullscreen","","allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture","loading","lazy",2,"border-radius","12px",3,"src"],["data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click"]],template:function(r,s){1&r&&(h.YNc(0,RF,2,1,"div",0),h.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),h._uU(6),h.qZA(),h._UZ(7,"button",6),h.qZA(),h.TgZ(8,"div",7),h._uU(9," ... "),h.qZA(),h.TgZ(10,"div",8)(11,"button",9),h._uU(12,"Close"),h.qZA(),h.TgZ(13,"button",10),h.NdJ("click",function(){return s.openMaps()}),h._uU(14,"Apri su Maps"),h.qZA()()()()()),2&r&&(h.Q6J("ngForOf",s.tratte),h.xp6(6),h.hij("Stazione di ",s.actualStation,""))},dependencies:[rn,qu],styles:['@import"https://fonts.cdnfonts.com/css/futura-std-4";.container[_ngcontent-%COMP%]{align-items:center;width:55%;margin-bottom:4em;margin-top:6em}.incontainer[_ngcontent-%COMP%]{align-items:center;font-family:Futura Std,sans-serif;font-weight:700;font-size:x-large}.map[_ngcontent-%COMP%]{display:block;margin:auto;width:75%;height:auto}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:auto;width:max-content}li[_ngcontent-%COMP%]:before{content:"";border-radius:50%;width:.625em;height:.625em;background:red;display:inline-block;margin-right:.625em}li[_ngcontent-%COMP%]{margin:.625em 0;position:relative;cursor:pointer}li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:.125em;height:calc(100% + .625em);background:red;left:.25em;top:.625em}li[_ngcontent-%COMP%]:first-child:after{top:.625em}li[_ngcontent-%COMP%]:last-child:after{height:0}@media screen and (min-width: 1025px) and (max-width: 1300px){.container[_ngcontent-%COMP%]{align-items:center;width:72%}}@media screen and (min-width: 768px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{align-items:center;width:77%}}@media screen and (min-width: 281px) and (max-width: 767px){.container[_ngcontent-%COMP%]{align-items:center;width:90%}}@media screen and (max-width: 280px){.container[_ngcontent-%COMP%]{align-items:center;width:97%}}']})}return n})()},{path:"**",component:DF}];let MF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({imports:[R_.forRoot(xF),R_]})}return n})(),PF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-navbar"]],decls:20,vars:0,consts:[["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body","fixed-top"],[1,"container-fluid"],["routerLink","home",1,"navbar-brand"],["src","assets/logocompatto.png","alt","Logo","height","30",1,"d-inline-block","align-text-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","tratte",1,"nav-link"],["routerLink","chisiamo",1,"nav-link"],["href","https://www.rfi.it/it.html","target","_blank",1,"nav-link"],["href","https://open.spotify.com/intl-it","target","_blank",1,"nav-link"]],template:function(r,s){1&r&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),h._UZ(3,"img",3),h.qZA(),h.TgZ(4,"button",4),h._UZ(5,"span",5),h.qZA(),h.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),h._uU(10,"Le tratte"),h.qZA()(),h.TgZ(11,"li",8)(12,"a",10),h._uU(13,"Chi siamo"),h.qZA()(),h.TgZ(14,"li",8)(15,"a",11),h._uU(16," RFI "),h.qZA()(),h.TgZ(17,"li",8)(18,"a",12),h._uU(19," Spotify "),h.qZA()()()()()())},dependencies:[Gl],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";#shareButton[_ngcontent-%COMP%]{color:transparent;background-color:transparent;border:transparent;float:right}nav[_ngcontent-%COMP%]{font-family:Merienda,cursive;font-size:16px}']})}return n})(),kF=(()=>{class n{constructor(){}disclaimer(){window.alert("SpotiRFI \xe8 un sito indipendente e non \xe8 affiliato, sponsorizzato o approvato da Spotify o RFI. Non abbiamo l\u2019intenzione di ledere in alcun modo la loro immagine o reputazione. Il nostro obiettivo \xe8 fornire un servizio utile e di qualit\xe0 per i nostri utenti, nel rispetto dei diritti di propriet\xe0 intellettuale e delle normative vigenti.")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-footer"]],decls:66,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body"],[1,"layout"],[1,"footer-wrapper","clearfix"],[1,"grid-3","footer-logo"],["href","#"],["alt","html layout logo","src","assets/logo.png"],[1,"footer-text"],["type","button","id","liveAlertBtn",3,"click"],["id","liveAlertBtn",1,"material-symbols-outlined"],[1,"grid-3"],[1,"footer-heading"],[1,"footermenu"],["routerLink","tratte"],["routerLink","chisiamo"],["href","https://www.rfi.it/it.html","target","_blank"],["href","https://open.spotify.com/intl-it","target","_blank"],[1,"footer-contact"],["href","./tratta/PalermoMessina"],["href","./tratta/AnelloPalermo"],["href","./tratta/AgrigentoPalermo"],["href","./tratta/SiracusaCaltanissetta"],["href","./tratta/CataniaGela"],[1,"footerblog"],["href","https://www.fsitaliane.it/content/dam/fsitaliane/Documents/impegno/per-lambiente/progetti/Atlante%20delle%20linee%20ferroviarie%20dismesse.pdf","target","_blank"],["href","https://epodweb.rfi.it/Download.ashx?q=lTmHEqG6%2FeC61zq42ZZheV8ouJSzS%2B5udsN2POFdeD4hdoONi5u5MvreFVXiIbvj","target","_blank"],["href","https://www.rfi.it/it/chi-siamo/Il-rapporto-con-lo-Stato-e-con-gli-stakeholder/il-piano-commerciale.html","target","_blank"]],template:function(r,s){1&r&&(h._UZ(0,"link",0),h.TgZ(1,"footer",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),h._UZ(6,"img",6),h.qZA(),h.TgZ(7,"p",7),h._uU(8," SpotiRFI: Un viaggio musicale unico attraverso le linee ferroviarie della Sicilia. Ogni stazione, una nuova canzone. "),h.qZA(),h.TgZ(9,"button",8),h.NdJ("click",function(){return s.disclaimer()}),h.TgZ(10,"span",9),h._uU(11," info "),h.qZA()()(),h.TgZ(12,"div",10)(13,"p",11),h._uU(14,"pagine"),h.qZA(),h.TgZ(15,"ul",12)(16,"li")(17,"a",13),h._uU(18,"Le tratte"),h.qZA()(),h.TgZ(19,"li")(20,"a",14),h._uU(21,"Chi siamo"),h.qZA()(),h.TgZ(22,"li")(23,"a",15),h._uU(24,"RFI"),h.qZA()(),h.TgZ(25,"li")(26,"a",16),h._uU(27,"Spotify"),h.qZA()()()(),h.TgZ(28,"div",10)(29,"p",11),h._uU(30,"link"),h.qZA(),h.TgZ(31,"ul",17)(32,"li")(33,"a",18),h._uU(34,"Palermo - Messina"),h.qZA()(),h.TgZ(35,"li")(36,"a",19),h._uU(37,"Anello Ferroviario Palermo"),h.qZA()(),h.TgZ(38,"li")(39,"a",20),h._uU(40,"Agrigento - Palermo"),h.qZA()(),h.TgZ(41,"li")(42,"a",21),h._uU(43,"Siracusa - Caltanissetta"),h.qZA()(),h.TgZ(44,"li")(45,"a",22),h._uU(46,"Catania - Gela"),h.qZA()()()(),h.TgZ(47,"div",10)(48,"p",11),h._uU(49,"link utili"),h.qZA(),h.TgZ(50,"ul",23)(51,"li")(52,"a",24),h._uU(53,"Linee dismesse"),h.qZA(),h.TgZ(54,"p"),h._uU(55,"FS Italiane"),h.qZA()(),h.TgZ(56,"li")(57,"a",25),h._uU(58,"Regolamento Circolazione Treni"),h.qZA(),h.TgZ(59,"p"),h._uU(60,"RFI"),h.qZA()(),h.TgZ(61,"li")(62,"a",26),h._uU(63,"Piano Commerciale"),h.qZA(),h.TgZ(64,"p"),h._uU(65,"RFI"),h.qZA()()()()()()())},dependencies:[Gl],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-%COMP%]{list-style:none;text-decoration:none;margin:0}img[_ngcontent-%COMP%]{height:3.7em}html[_ngcontent-%COMP%]{overflow-y:scroll}body[_ngcontent-%COMP%]{background:#b7b7b7 none repeat scroll 0 0;font-family:Open Sans,sans-serif}ul[_ngcontent-%COMP%]{padding:0}.clearfix[_ngcontent-%COMP%]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.clearfix[_ngcontent-%COMP%]{display:inline-block}*[_ngcontent-%COMP%]   html[_ngcontent-%COMP%]   .clearfix[_ngcontent-%COMP%]{height:1%}.clearfix[_ngcontent-%COMP%]{display:block}.layout[_ngcontent-%COMP%]{margin:0 auto;max-width:1170px;width:100%;padding:0 15px}.grid-3[_ngcontent-%COMP%]{width:25%;float:left;min-height:1px;padding-left:15px;padding-right:15px;position:relative}.footer-wrapper[_ngcontent-%COMP%]{padding:100px 0}.footer-text[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;margin:40px 0 0;text-align:justify}footer[_ngcontent-%COMP%]   .footer-heading[_ngcontent-%COMP%]{color:#e1e1e1;font:18px/19px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]{margin-top:32px}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{line-height:25px}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"-";margin:0 5px 0 0}.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;line-height:34px;text-transform:capitalize}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;margin:0 8px 0 0;color:#fff}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:14px}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#c7c7c7;font:13px/28px Open Sans,sans-serif;letter-spacing:1.2px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#b4b4b4;font:13px/18px Open Sans,sans-serif;letter-spacing:1.2px;padding-bottom:10px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c7c7c7;font:italic 12px/18px Open Sans,sans-serif}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#22c489}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 200,"GRAD" 200,"opsz" 24}button[_ngcontent-%COMP%]{background-color:transparent;border:none;margin:1em}#liveAlertPlaceholder[_ngcontent-%COMP%]{width:75%;margin:auto}@media (max-width:980px){.layout[_ngcontent-%COMP%]{width:767px}.grid-3[_ngcontent-%COMP%]{width:50%}.footer-heading[_ngcontent-%COMP%]{margin-top:18px}}@media (max-width:640px){.layout[_ngcontent-%COMP%]{width:300px}.grid-3[_ngcontent-%COMP%]{width:100%}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;float:none;line-height:25px}}']})}return n})(),NF=(()=>{class n{constructor(t){this.router=t,this.title="SpotiRFI",this.router.events.subscribe(r=>{r instanceof zi&&window.scrollTo(0,0)})}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(Io))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(r,s){1&r&&h._UZ(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[v,PF,kF]})}return n})();const OF_firebaseConfig={apiKey:"AIzaSyBhT4vrImMOpXLps9RtD_GROoPflfGtM4U",authDomain:"spotirfi-cd7a9.firebaseapp.com",databaseURL:"https://spotirfi-cd7a9-default-rtdb.firebaseio.com",projectId:"spotirfi-cd7a9",storageBucket:"spotirfi-cd7a9.appspot.com",messagingSenderId:"207743558815",appId:"1:207743558815:web:1d28c36da0a303fca7eeaa",measurementId:"G-8Z6DVSWE34"};class LF{constructor(e,t,r,s,c){this.doc=e,this.delegate=t,this.zone=r,this.animationType=s,this.moduleImpl=c,this._rendererFactoryPromise=null}loadImpl(){return(this.moduleImpl??Q.e(108).then(Q.bind(Q,108))).catch(t=>{throw new h.vHH(5300,!1)}).then(({\u0275createEngine:t,\u0275AnimationRendererFactory:r})=>{const s=t(this.animationType,this.doc),c=new r(this.delegate,s,this.zone);return this.delegate=c,c})}createRenderer(e,t){const r=this.delegate.createRenderer(e,t);if(0===r.\u0275type)return r;"boolean"==typeof r.throwOnSyntheticProps&&(r.throwOnSyntheticProps=!1);const s=new VF(r);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{const u=c.createRenderer(e,t);s.use(u)}).catch(c=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}}class VF{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,null!==this.replay){for(const t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,s){this.delegate.insertBefore(e,t,r,s)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(s=>s.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(s=>s.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return null!==this.replay&&e.startsWith("@")}}function UF(n="animations"){return(0,h.MR2)([{provide:h.FYo,useFactory:(e,t,r)=>new LF(e,t,r,n),deps:[ye,nc,h.R0b]},{provide:h.QbO,useValue:"noop"===n?"NoopAnimations":"BrowserAnimations"}])}let BF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n,bootstrap:[NF]});static#n=this.\u0275inj=h.cJS({providers:[QM,UF()],imports:[Om,MF,IR.initializeApp(OF_firebaseConfig),FN,aF]})}return n})();na().bootstrapModule(BF).catch(n=>console.error(n))},619:(nn,Ke,Q)=>{Q.d(Ke,{X:()=>de});var h=Q(645);class de extends h.x{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const Re=super._subscribe(ve);return!Re.closed&&ve.next(this._value),Re}getValue(){const{hasError:ve,thrownError:Re,_value:ye}=this;if(ve)throw Re;return this._throwIfClosed(),ye}next(ve){super.next(this._value=ve)}}},592:(nn,Ke,Q)=>{Q.d(Ke,{y:()=>Mt});var h=Q(305),de=Q(394),H=Q(850),ve=Q(407),Re=Q(653),ye=Q(674),lt=Q(441);let Mt=(()=>{class te{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const dt=new te;return dt.source=this,dt.operator=Pe,dt}subscribe(Pe,dt,St){const $e=function B(te){return te&&te instanceof h.Lv||function G(te){return te&&(0,ye.m)(te.next)&&(0,ye.m)(te.error)&&(0,ye.m)(te.complete)}(te)&&(0,de.Nn)(te)}(Pe)?Pe:new h.Hp(Pe,dt,St);return(0,lt.x)(()=>{const{operator:nt,source:Qt}=this;$e.add(nt?nt.call($e,Qt):Qt?this._subscribe($e):this._trySubscribe($e))}),$e}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(dt){Pe.error(dt)}}forEach(Pe,dt){return new(dt=Be(dt))((St,$e)=>{const nt=new h.Hp({next:Qt=>{try{Pe(Qt)}catch(An){$e(An),nt.unsubscribe()}},error:$e,complete:St});this.subscribe(nt)})}_subscribe(Pe){var dt;return null===(dt=this.source)||void 0===dt?void 0:dt.subscribe(Pe)}[H.L](){return this}pipe(...Pe){return(0,ve.U)(Pe)(this)}toPromise(Pe){return new(Pe=Be(Pe))((dt,St)=>{let $e;this.subscribe(nt=>$e=nt,nt=>St(nt),()=>dt($e))})}}return te.create=ze=>new te(ze),te})();function Be(te){var ze;return null!==(ze=te??Re.config.Promise)&&void 0!==ze?ze:Promise}},645:(nn,Ke,Q)=>{Q.d(Ke,{x:()=>lt});var h=Q(592),de=Q(394);const ve=(0,Q(306).d)(Be=>function(){Be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Re=Q(39),ye=Q(441);let lt=(()=>{class Be extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const te=new Mt(this,this);return te.operator=B,te}_throwIfClosed(){if(this.closed)throw new ve}next(B){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(B)}})}error(B){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:te}=this;for(;te.length;)te.shift().error(B)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:te,isStopped:ze,observers:Pe}=this;return te||ze?de.Lc:(this.currentObservers=null,Pe.push(B),new de.w0(()=>{this.currentObservers=null,(0,Re.P)(Pe,B)}))}_checkFinalizedStatuses(B){const{hasError:te,thrownError:ze,isStopped:Pe}=this;te?B.error(ze):Pe&&B.complete()}asObservable(){const B=new h.y;return B.source=this,B}}return Be.create=(G,B)=>new Mt(G,B),Be})();class Mt extends lt{constructor(G,B){super(),this.destination=G,this.source=B}next(G){var B,te;null===(te=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===te||te.call(B,G)}error(G){var B,te;null===(te=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===te||te.call(B,G)}complete(){var G,B;null===(B=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===B||B.call(G)}_subscribe(G){var B,te;return null!==(te=null===(B=this.source)||void 0===B?void 0:B.subscribe(G))&&void 0!==te?te:de.Lc}}},305:(nn,Ke,Q)=>{Q.d(Ke,{Hp:()=>St,Lv:()=>te});var h=Q(674),de=Q(394),H=Q(653),ve=Q(894),Re=Q(420);const ye=Be("C",void 0,void 0);function Be(ht,Ce,Xe){return{kind:ht,value:Ce,error:Xe}}var G=Q(599),B=Q(441);class te extends de.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,de.Nn)(Ce)&&Ce.add(this)):this.destination=An}static create(Ce,Xe,Gt){return new St(Ce,Xe,Gt)}next(Ce){this.isStopped?Qt(function Mt(ht){return Be("N",ht,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?Qt(function lt(ht){return Be("E",void 0,ht)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Qt(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Pe(ht,Ce){return ze.call(ht,Ce)}class dt{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Xe}=this;if(Xe.next)try{Xe.next(Ce)}catch(Gt){$e(Gt)}}error(Ce){const{partialObserver:Xe}=this;if(Xe.error)try{Xe.error(Ce)}catch(Gt){$e(Gt)}else $e(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Xe){$e(Xe)}}}class St extends te{constructor(Ce,Xe,Gt){let qe;if(super(),(0,h.m)(Ce)||!Ce)qe={next:Ce??void 0,error:Xe??void 0,complete:Gt??void 0};else{let be;this&&H.config.useDeprecatedNextContext?(be=Object.create(Ce),be.unsubscribe=()=>this.unsubscribe(),qe={next:Ce.next&&Pe(Ce.next,be),error:Ce.error&&Pe(Ce.error,be),complete:Ce.complete&&Pe(Ce.complete,be)}):qe=Ce}this.destination=new dt(qe)}}function $e(ht){H.config.useDeprecatedSynchronousErrorHandling?(0,B.O)(ht):(0,ve.h)(ht)}function Qt(ht,Ce){const{onStoppedNotification:Xe}=H.config;Xe&&G.z.setTimeout(()=>Xe(ht,Ce))}const An={closed:!0,next:Re.Z,error:function nt(ht){throw ht},complete:Re.Z}},394:(nn,Ke,Q)=>{Q.d(Ke,{Lc:()=>ye,w0:()=>Re,Nn:()=>lt});var h=Q(674);const H=(0,Q(306).d)(Be=>function(B){Be(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((te,ze)=>`${ze+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ve=Q(39);class Re{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Pe of B)Pe.remove(this);else B.remove(this);const{initialTeardown:te}=this;if((0,h.m)(te))try{te()}catch(Pe){G=Pe instanceof H?Pe.errors:[Pe]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Pe of ze)try{Mt(Pe)}catch(dt){G=G??[],dt instanceof H?G=[...G,...dt.errors]:G.push(dt)}}if(G)throw new H(G)}}add(G){var B;if(G&&G!==this)if(this.closed)Mt(G);else{if(G instanceof Re){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(G)}}_hasParent(G){const{_parentage:B}=this;return B===G||Array.isArray(B)&&B.includes(G)}_addParent(G){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(G),B):B?[B,G]:G}_removeParent(G){const{_parentage:B}=this;B===G?this._parentage=null:Array.isArray(B)&&(0,ve.P)(B,G)}remove(G){const{_finalizers:B}=this;B&&(0,ve.P)(B,G),G instanceof Re&&G._removeParent(this)}}Re.EMPTY=(()=>{const Be=new Re;return Be.closed=!0,Be})();const ye=Re.EMPTY;function lt(Be){return Be instanceof Re||Be&&"closed"in Be&&(0,h.m)(Be.remove)&&(0,h.m)(Be.add)&&(0,h.m)(Be.unsubscribe)}function Mt(Be){(0,h.m)(Be)?Be():Be.unsubscribe()}},653:(nn,Ke,Q)=>{Q.d(Ke,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},251:(nn,Ke,Q)=>{Q.d(Ke,{x:()=>de});var h=Q(305);function de(ve,Re,ye,lt,Mt){return new H(ve,Re,ye,lt,Mt)}class H extends h.Lv{constructor(Re,ye,lt,Mt,Be,G){super(Re),this.onFinalize=Be,this.shouldUnsubscribe=G,this._next=ye?function(B){try{ye(B)}catch(te){Re.error(te)}}:super._next,this._error=Mt?function(B){try{Mt(B)}catch(te){Re.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=lt?function(){try{lt()}catch(B){Re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(Re=this.onFinalize)||void 0===Re||Re.call(this))}}}},398:(nn,Ke,Q)=>{Q.d(Ke,{U:()=>H});var h=Q(360),de=Q(251);function H(ve,Re){return(0,h.e)((ye,lt)=>{let Mt=0;ye.subscribe((0,de.x)(lt,Be=>{lt.next(ve.call(Re,Be,Mt++))}))})}},599:(nn,Ke,Q)=>{Q.d(Ke,{z:()=>h});const h={setTimeout(de,H,...ve){const{delegate:Re}=h;return Re?.setTimeout?Re.setTimeout(de,H,...ve):setTimeout(de,H,...ve)},clearTimeout(de){const{delegate:H}=h;return(H?.clearTimeout||clearTimeout)(de)},delegate:void 0}},850:(nn,Ke,Q)=>{Q.d(Ke,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},39:(nn,Ke,Q)=>{function h(de,H){if(de){const ve=de.indexOf(H);0<=ve&&de.splice(ve,1)}}Q.d(Ke,{P:()=>h})},306:(nn,Ke,Q)=>{function h(de){const ve=de(Re=>{Error.call(Re),Re.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}Q.d(Ke,{d:()=>h})},441:(nn,Ke,Q)=>{Q.d(Ke,{O:()=>ve,x:()=>H});var h=Q(653);let de=null;function H(Re){if(h.config.useDeprecatedSynchronousErrorHandling){const ye=!de;if(ye&&(de={errorThrown:!1,error:null}),Re(),ye){const{errorThrown:lt,error:Mt}=de;if(de=null,lt)throw Mt}}else Re()}function ve(Re){h.config.useDeprecatedSynchronousErrorHandling&&de&&(de.errorThrown=!0,de.error=Re)}},737:(nn,Ke,Q)=>{function h(de){return de}Q.d(Ke,{y:()=>h})},674:(nn,Ke,Q)=>{function h(de){return"function"==typeof de}Q.d(Ke,{m:()=>h})},360:(nn,Ke,Q)=>{Q.d(Ke,{A:()=>de,e:()=>H});var h=Q(674);function de(ve){return(0,h.m)(ve?.lift)}function H(ve){return Re=>{if(de(Re))return Re.lift(function(ye){try{return ve(ye,this)}catch(lt){this.error(lt)}});throw new TypeError("Unable to lift unknown Observable type")}}},420:(nn,Ke,Q)=>{function h(){}Q.d(Ke,{Z:()=>h})},407:(nn,Ke,Q)=>{Q.d(Ke,{U:()=>H,z:()=>de});var h=Q(737);function de(...ve){return H(ve)}function H(ve){return 0===ve.length?h.y:1===ve.length?ve[0]:function(ye){return ve.reduce((lt,Mt)=>Mt(lt),ye)}}},894:(nn,Ke,Q)=>{Q.d(Ke,{h:()=>H});var h=Q(653),de=Q(599);function H(ve){de.z.setTimeout(()=>{const{onUnhandledError:Re}=h.config;if(!Re)throw ve;Re(ve)})}},825:(nn,Ke,Q)=>{Q.d(Ke,{SB:()=>lt,X$:()=>de,ZE:()=>Gt,ZN:()=>Xe,eR:()=>Be,jt:()=>H,k1:()=>qe,l3:()=>h,oB:()=>ye,vP:()=>Re});const h="*";function de(be,O){return{type:7,name:be,definitions:O,options:{}}}function H(be,O=null){return{type:4,styles:O,timings:be}}function Re(be,O=null){return{type:2,steps:be,options:O}}function ye(be){return{type:6,styles:be,offset:null}}function lt(be,O,Se){return{type:0,name:be,styles:O,options:Se}}function Be(be,O,Se=null){return{type:1,expr:be,animation:O,options:Se}}class Xe{constructor(O=0,Se=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=O+Se}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(O=>O()),this._onDoneFns=[])}onStart(O){this._originalOnStartFns.push(O),this._onStartFns.push(O)}onDone(O){this._originalOnDoneFns.push(O),this._onDoneFns.push(O)}onDestroy(O){this._onDestroyFns.push(O)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(O=>O()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(O=>O()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(O){this._position=this.totalTime?O*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(O){const Se="start"==O?this._onStartFns:this._onDoneFns;Se.forEach(yt=>yt()),Se.length=0}}class Gt{constructor(O){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=O;let Se=0,yt=0,Sn=0;const Qr=this.players.length;0==Qr?queueMicrotask(()=>this._onFinish()):this.players.forEach(Dr=>{Dr.onDone(()=>{++Se==Qr&&this._onFinish()}),Dr.onDestroy(()=>{++yt==Qr&&this._onDestroy()}),Dr.onStart(()=>{++Sn==Qr&&this._onStart()})}),this.totalTime=this.players.reduce((Dr,Ar)=>Math.max(Dr,Ar.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(O=>O()),this._onDoneFns=[])}init(){this.players.forEach(O=>O.init())}onStart(O){this._onStartFns.push(O)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(O=>O()),this._onStartFns=[])}onDone(O){this._onDoneFns.push(O)}onDestroy(O){this._onDestroyFns.push(O)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(O=>O.play())}pause(){this.players.forEach(O=>O.pause())}restart(){this.players.forEach(O=>O.restart())}finish(){this._onFinish(),this.players.forEach(O=>O.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(O=>O.destroy()),this._onDestroyFns.forEach(O=>O()),this._onDestroyFns=[])}reset(){this.players.forEach(O=>O.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(O){const Se=O*this.totalTime;this.players.forEach(yt=>{const Sn=yt.totalTime?Math.min(1,Se/yt.totalTime):1;yt.setPosition(Sn)})}getPosition(){const O=this.players.reduce((Se,yt)=>null===Se||yt.totalTime>Se.totalTime?yt:Se,null);return null!=O?O.getPosition():0}beforeDestroy(){this.players.forEach(O=>{O.beforeDestroy&&O.beforeDestroy()})}triggerCallback(O){const Se="start"==O?this._onStartFns:this._onDoneFns;Se.forEach(yt=>yt()),Se.length=0}}const qe="!"},212:(nn,Ke,Q)=>{Q.d(Ke,{QbO:()=>rp,tb:()=>Gh,AFp:()=>Vl,ip1:()=>yy,hGG:()=>KP,z2F:()=>Ba,Ojb:()=>ip,sBO:()=>GT,Sil:()=>Rw,_Vd:()=>wc,EJc:()=>WA,Xts:()=>Is,SBq:()=>mp,lqb:()=>Gr,qLn:()=>Cc,vpe:()=>Zi,XFs:()=>Rt,OlP:()=>Lt,zs3:()=>hi,ZZ4:()=>iI,aQg:()=>oI,soG:()=>Wg,YKP:()=>xg,h0i:()=>Ru,R0b:()=>Vn,FiY:()=>ha,Lbi:()=>ya,g9A:()=>np,n_E:()=>iy,Qsj:()=>yT,FYo:()=>Xb,JOm:()=>h_,q3G:()=>Ic,tp0:()=>xl,Rgc:()=>Va,dDg:()=>jw,eoX:()=>_y,q4F:()=>Sw,GfV:()=>gy,s_b:()=>rg,ifc:()=>ns,T8G:()=>tC,VuI:()=>pS,MMx:()=>Pg,Lck:()=>Wv,eFA:()=>qh,Gpc:()=>Zo,f3M:()=>Ft,X6Q:()=>wy,$WT:()=>li,MR2:()=>yd,Cb_:()=>$M,_c5:()=>$a,qFp:()=>lk,r_H:()=>Eb,rg0:()=>ET,c2e:()=>Fu,zSh:()=>kl,wAp:()=>qo,I6F:()=>Ao,vHH:()=>De,lri:()=>BA,rWj:()=>Gg,JZr:()=>ai,EiD:()=>fR,mCW:()=>A_,qzn:()=>pi,JVY:()=>mP,pB0:()=>iT,eBb:()=>vP,L6k:()=>_P,LAX:()=>rT,cg1:()=>Mv,kuF:()=>xr,kL8:()=>Ch,dqk:()=>nr,Z0I:()=>kt,eJc:()=>Uo,QGY:()=>LE,F4k:()=>FD,RDi:()=>Bo,AaK:()=>kn,z3N:()=>Ss,qOj:()=>av,Xq5:()=>HI,TTD:()=>ta,_Bn:()=>qv,jDz:()=>Kv,xp6:()=>kT,uIk:()=>nu,Tol:()=>lu,ekj:()=>pr,um2:()=>Os,Suo:()=>Ug,Xpm:()=>Ja,lG2:()=>Xa,Yz7:()=>j,cJS:()=>Le,oAB:()=>ei,Yjl:()=>ff,Y36:()=>Dc,_UZ:()=>xv,BQk:()=>Bs,ynx:()=>ka,qZA:()=>gg,TgZ:()=>pg,EpF:()=>IE,n5z:()=>md,LFG:()=>lr,$8M:()=>Pi,$Z:()=>NT,NdJ:()=>Cu,CRH:()=>sy,oxw:()=>LD,Hsn:()=>HE,F$t:()=>Fv,Q6J:()=>XI,VKq:()=>kg,WLB:()=>Uh,kEZ:()=>Ng,iGM:()=>fA,MAs:()=>Au,wJu:()=>ig,SjG:()=>Sa,x6l:()=>dh,KtG:()=>Fm,CHM:()=>rb,uOi:()=>qb,P3R:()=>P_,Udp:()=>fv,YNc:()=>uh,_uU:()=>qD,Oqu:()=>Hv,hij:()=>$v,AsE:()=>zv,lnq:()=>YE,Gf:()=>oy});let de=null,ve=1;function ye(i){const o=de;return de=i,o}function ze(i){if((!Xe(i)||i.dirty)&&(i.dirty||i.lastCleanEpoch!==ve)){if(!i.producerMustRecompute(i)&&!Qt(i))return i.dirty=!1,void(i.lastCleanEpoch=ve);i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=ve}}function Qt(i){Gt(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],l=i.producerLastReadVersion[o];if(l!==a.version||(ze(a),l!==a.version))return!0}return!1}function Ce(i,o){if(function qe(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),Gt(i),1===i.liveConsumerNode.length)for(let l=0;l<i.producerNode.length;l++)Ce(i.producerNode[l],i.producerIndexOfThis[l]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const l=i.liveConsumerIndexOfThis[o],d=i.liveConsumerNode[o];Gt(d),d.producerIndexOfThis[l]=o}}function Xe(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Gt(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let Dr=null;var En=Q(645),Sr=Q(394),Rr=Q(619),pn=Q(398);function bt(i){for(let o in i)if(i[o]===bt)return o;throw Error("Could not find renamed property on target object.")}function Hr(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function kn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(kn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function eo(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const to=bt({__forward_ref__:bt});function Zo(i){return i.__forward_ref__=Zo,i.toString=function(){return kn(this())},i}function Fe(i){return Pt(i)?i():i}function Pt(i){return"function"==typeof i&&i.hasOwnProperty(to)&&i.__forward_ref__===Zo}function ft(i){return i&&!!i.\u0275providers}const ai="https://g.co/ng/security#xss";class De extends Error{constructor(o,a){super(xr(o,a)),this.code=o}}function xr(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}const Nn=bt({\u0275cmp:bt}),Yo=bt({\u0275dir:bt}),Jt=bt({\u0275pipe:bt}),Qo=bt({\u0275mod:bt}),pt=bt({\u0275fac:bt}),Mr=bt({__NG_ELEMENT_ID__:bt}),no=bt({__NG_ENV_ID__:bt});function it(i){return"string"==typeof i?i:null==i?"":String(i)}function Wa(i,o){throw new De(-201,!1)}function tt(i,o){null==i&&function Ge(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function j(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Le(i){return{providers:i.providers||[],imports:i.imports||[]}}function ct(i){return Bt(i,Ui)||Bt(i,Gu)}function kt(i){return null!==ct(i)}function Bt(i,o){return i.hasOwnProperty(o)?i[o]:null}function gn(i){return i&&(i.hasOwnProperty(Xo)||i.hasOwnProperty(gm))?i[Xo]:null}const Ui=bt({\u0275prov:bt}),Xo=bt({\u0275inj:bt}),Gu=bt({ngInjectableDef:bt}),gm=bt({ngInjectorDef:bt});var Rt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Rt||{});let Jh;function Xh(){return Jh}function Jr(i){const o=Jh;return Jh=i,o}function rn(i,o,a){const l=ct(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Rt.Optional?null:void 0!==o?o:void Wa()}const nr=globalThis;class Lt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=j({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const cl={},Xr="__NG_DI_FLAG__",Zu="ngTempTokenPath",jy=/\n/gm,nf="__source";let es;function so(i){const o=es;return es=i,o}function $y(i,o=Rt.Default){if(void 0===es)throw new De(-203,!1);return null===es?rn(i,void 0,o):es.get(i,o&Rt.Optional?null:void 0,o)}function lr(i,o=Rt.Default){return(Xh()||$y)(Fe(i),o)}function Ft(i,o=Rt.Default){return lr(i,Ku(o))}function Ku(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function ll(i){const o=[];for(let a=0;a<i.length;a++){const l=Fe(i[a]);if(Array.isArray(l)){if(0===l.length)throw new De(900,!1);let d,p=Rt.Default;for(let _=0;_<l.length;_++){const b=l[_],E=rf(b);"number"==typeof E?-1===E?d=b.token:p|=E:d=b}o.push(lr(d,p))}else o.push(lr(l))}return o}function ts(i,o){return i[Xr]=o,i.prototype[Xr]=o,i}function rf(i){return i[Xr]}function Ro(i){return{toString:i}.toString()}var Zs=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Zs||{}),ns=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(ns||{});const wi={},Wt=[];function Ya(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}function ul(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const p=a[l++],_=a[l++],b=a[l++];i.setAttribute(o,_,b,p)}else{const p=d,_=a[++l];Gy(p)?i.setProperty(o,p,_):i.setAttribute(o,p,_),l++}}return l}function af(i){return 3===i||4===i||6===i}function Gy(i){return 64===i.charCodeAt(0)}function Ks(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Ys(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Ys(i,o,a,l,d){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const b=i[p++];if("number"==typeof b){if(b===o){_=-1;break}if(b>o){_=p-1;break}}}for(;p<i.length;){const b=i[p];if("number"==typeof b)break;if(b===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}const ao="ng-template";function cf(i,o,a){let l=0,d=!0;for(;l<i.length;){let p=i[l++];if("string"==typeof p&&d){const _=i[l++];if(a&&"class"===p&&-1!==Ya(_.toLowerCase(),o,0))return!0}else{if(1===p){for(;l<i.length&&"string"==typeof(p=i[l++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function ym(i){return 4===i.type&&i.value!==ao}function Bi(i,o,a){return o===(4!==i.type||a?i.value:ao)}function Yu(i,o,a){let l=4;const d=i.attrs||[],p=function uf(i){for(let o=0;o<i.length;o++)if(af(i[o]))return o;return i.length}(d);let _=!1;for(let b=0;b<o.length;b++){const E=o[b];if("number"!=typeof E){if(!_)if(4&l){if(l=2|1&l,""!==E&&!Bi(i,E,a)||""===E&&1===o.length){if(Ti(l))return!1;_=!0}}else{const T=8&l?E:o[++b];if(8&l&&null!==i.attrs){if(!cf(i.attrs,T,a)){if(Ti(l))return!1;_=!0}continue}const x=E0(8&l?"class":E,d,ym(i),a);if(-1===x){if(Ti(l))return!1;_=!0;continue}if(""!==T){let N;N=x>p?"":d[x+1].toLowerCase();const L=8&l?N:null;if(L&&-1!==Ya(L,T,0)||2&l&&T!==N){if(Ti(l))return!1;_=!0}}}}else{if(!_&&!Ti(l)&&!Ti(E))return!1;if(_&&Ti(E))continue;_=!1,l=E|1&l}}return Ti(l)||_}function Ti(i){return 0==(1&i)}function E0(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let b=o[++d];for(;"string"==typeof b;)b=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function Wy(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function lf(i,o,a=!1){for(let l=0;l<o.length;l++)if(Yu(i,o[l],a))return!0;return!1}function Zy(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let d=0;d<i.length;d++)if(i[d]!==l[d])continue e;return!0}}return!1}function Qu(i,o){return i?":not("+o.trim()+")":o}function Qa(i){let o=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const b=i[++a];d+="["+_+(b.length>0?'="'+b+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Ti(_)&&(o+=Qu(p,d),d=""),l=_,p=p||!Ti(l);a++}return""!==d&&(o+=Qu(p,d)),o}function Ja(i){return Ro(()=>{const o=dl(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Zs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||ns.Emulated,styles:i.styles||Wt,_:null,schemas:i.schemas||null,tView:null,id:""};bm(a);const l=i.dependencies;return a.directiveDefs=Ju(l,!1),a.pipeDefs=Ju(l,!0),a.id=function Ci(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function T0(i){return xt(i)||rr(i)}function hf(i){return null!==i}function ei(i){return Ro(()=>({type:i.type,bootstrap:i.bootstrap||Wt,declarations:i.declarations||Wt,imports:i.imports||Wt,exports:i.exports||Wt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Qs(i,o){if(null==i)return wi;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}function Xa(i){return Ro(()=>{const o=dl(i);return bm(o),o})}function ff(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function xt(i){return i[Nn]||null}function rr(i){return i[Yo]||null}function Pr(i){return i[Jt]||null}function li(i){const o=xt(i)||rr(i)||Pr(i);return null!==o&&o.standalone}function kr(i,o){const a=i[Qo]||null;if(!a&&!0===o)throw new Error(`Type ${kn(i)} does not have '\u0275mod' property.`);return a}function dl(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||wi,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Wt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qs(i.inputs,o),outputs:Qs(i.outputs),debugInfo:null}}function bm(i){i.features?.forEach(o=>o(i))}function Ju(i,o){if(!i)return null;const a=o?Pr:T0;return()=>("function"==typeof i?i():i).map(l=>a(l)).filter(hf)}const Rn=0,Ie=1,et=2,wn=3,Di=4,vr=5,co=6,Js=7,ot=8,Nr=9,Ai=10,gt=11,hl=12,gf=13,ec=14,Tn=15,rs=16,Xs=17,lo=18,tc=19,Xu=20,uo=21,ed=22,ji=23,st=25,td=1,ui=7,os=9,Fn=10;var fl=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(fl||{});function $r(i){return Array.isArray(i)&&"object"==typeof i[td]}function yr(i){return Array.isArray(i)&&!0===i[td]}function Im(i){return 0!=(4&i.flags)}function ss(i){return i.componentOffset>-1}function mf(i){return 1==(1&i.flags)}function Si(i){return!!i.template}function _f(i){return 0!=(512&i[et])}function cs(i,o){return i.hasOwnProperty(pt)?i[pt]:null}class yf{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ta(){return bf}function bf(i){return i.type.prototype.ngOnChanges&&(i.setInput=nd),ls}function ls(){const i=Mm(this),o=i?.current;if(o){const a=i.previous;if(a===wi)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function nd(i,o,a,l){const d=this.declaredInputs[a],p=Mm(i)||function Jy(i,o){return i[If]=o}(i,{previous:wi,current:null}),_=p.current||(p.current={}),b=p.previous,E=b[d];_[d]=new yf(E&&E.currentValue,o,b===wi),i[l]=o}ta.ngInherit=!0;const If="__ngSimpleChanges__";function Mm(i){return i[If]||null}const xo=function(i,o,a){};let nc=!1;function Cn(i){for(;Array.isArray(i);)i=i[Rn];return i}function rd(i,o){return Cn(o[i])}function Or(i,o){return Cn(o[i.index])}function id(i,o){return i.data[o]}function ir(i,o){const a=o[i];return $r(a)?a:a[Rn]}function Df(i){return 128==(128&i[et])}function Po(i,o){return null==o?null:i[o]}function km(i){i[Xs]=0}function R0(i){1024&i[et]||(i[et]|=1024,Df(i)&&rc(i))}function od(i){return 9216&i[et]||i[ji]?.dirty}function ml(i){od(i)?rc(i):64&i[et]&&(function wf(){return nc}()?(i[et]|=1024,rc(i)):i[Ai].changeDetectionScheduler?.notify())}function rc(i){i[Ai].changeDetectionScheduler?.notify();let o=us(i);for(;null!==o&&!(8192&o[et])&&(o[et]|=8192,Df(o));)o=us(o)}function na(i,o){if(256==(256&i[et]))throw new De(911,!1);null===i[uo]&&(i[uo]=[]),i[uo].push(o)}function us(i){const o=i[wn];return yr(o)?o[wn]:o}const at={lFrame:Il(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Af(){return at.bindingsEnabled}function ra(){return null!==at.skipHydrationRootTNode}function re(){return at.lFrame.lView}function Vt(){return at.lFrame.tView}function rb(i){return at.lFrame.contextLView=i,i[ot]}function Fm(i){return at.lFrame.contextLView=null,i}function on(){let i=ib();for(;null!==i&&64===i.type;)i=i.parent;return i}function ib(){return at.lFrame.currentTNode}function ho(i,o){const a=at.lFrame;a.currentTNode=i,a.isParent=o}function ic(){return at.lFrame.isParent}function _l(){at.lFrame.isParent=!1}function ur(){const i=at.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function hs(){return at.lFrame.bindingIndex}function fo(){return at.lFrame.bindingIndex++}function fs(i){const o=at.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function vl(i,o){const a=at.lFrame;a.bindingIndex=a.bindingRootIndex=i,_n(o)}function _n(i){at.lFrame.currentDirectiveIndex=i}function oa(){return at.lFrame.currentQueryIndex}function yl(i){at.lFrame.currentQueryIndex=i}function bl(i){const o=i[Ie];return 2===o.type?o.declTNode:1===o.type?i[vr]:null}function Mf(i,o,a){if(a&Rt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&Rt.Host||(d=bl(p),null===d||(p=p[ec],10&d.type))););if(null===d)return!1;o=d,i=p}const l=at.lFrame=Pf();return l.currentTNode=o,l.lView=i,!0}function ud(i){const o=Pf(),a=i[Ie];at.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Pf(){const i=at.lFrame,o=null===i?null:i.child;return null===o?Il(i):o}function Il(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Um(){const i=at.lFrame;return at.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const kf=Um;function dd(){const i=Um();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function br(){return at.lFrame.selectedIndex}function ps(i){at.lFrame.selectedIndex=i}function Nt(){const i=at.lFrame;return id(i.tView,i.selectedIndex)}let jm=!0;function oc(){return jm}function Fr(i){jm=i}function sn(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:b,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:A}=p;_&&(i.contentHooks??=[]).push(-a,_),b&&((i.contentHooks??=[]).push(a,b),(i.contentCheckHooks??=[]).push(a,b)),E&&(i.viewHooks??=[]).push(-a,E),T&&((i.viewHooks??=[]).push(a,T),(i.viewCheckHooks??=[]).push(a,T)),null!=A&&(i.destroyHooks??=[]).push(a,A)}}function xi(i,o,a){sc(i,o,3,a)}function ko(i,o,a,l){(3&i[et])===a&&sc(i,o,a,l)}function wl(i,o){let a=i[et];(3&a)===o&&(a&=16383,a+=1,i[et]=a)}function sc(i,o,a,l){const p=l??-1,_=o.length-1;let b=0;for(let E=void 0!==l?65535&i[Xs]:0;E<_;E++)if("number"==typeof o[E+1]){if(b=o[E],null!=l&&b>=l)break}else o[E]<0&&(i[Xs]+=65536),(b<p||-1==p)&&(Of(i,a,o,E),i[Xs]=(4294901760&i[Xs])+E+2),E++}function gs(i,o){xo(4,i,o);const a=ye(null);try{o.call(i)}finally{ye(a),xo(5,i,o)}}function Of(i,o,a,l){const d=a[l]<0,p=a[l+1],b=i[d?-a[l]:a[l]];d?i[et]>>14<i[Xs]>>16&&(3&i[et])===o&&(i[et]+=16384,gs(b,p)):gs(b,p)}const sa=-1;class Tl{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function We(i){return i!==sa}function Lr(i){return 32767&i}function aa(i,o){let a=function Vf(i){return i>>16}(i),l=o;for(;a>0;)l=l[ec],a--;return l}let Uf=!0;function ms(i){const o=Uf;return Uf=i,o}const Hm=255,po=5;let mt=0;const Mi={};function ca(i,o){const a=cc(i,o);if(-1!==a)return a;const l=o[Ie];l.firstCreatePass&&(i.injectorIndex=o.length,hd(l.data,i),hd(o,null),hd(l.blueprint,null));const d=fd(i,o),p=i.injectorIndex;if(We(d)){const _=Lr(d),b=aa(d,o),E=b[Ie].data;for(let T=0;T<8;T++)o[p+T]=b[_+T]|E[_+T]}return o[p+8]=d,p}function hd(i,o){i.push(0,0,0,0,0,0,0,0,o)}function cc(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function fd(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=go(d),null===l)return sa;if(a++,d=d[ec],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return sa}function pd(i,o,a){!function ub(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Mr)&&(l=a[Mr]),null==l&&(l=a[Mr]=mt++);const d=l&Hm;o.data[i+(d>>po)]|=1<<d}(i,o,a)}function Cl(i,o,a){if(a&Rt.Optional||void 0!==i)return i;Wa()}function $m(i,o,a,l){if(a&Rt.Optional&&void 0===l&&(l=null),!(a&(Rt.Self|Rt.Host))){const d=i[Nr],p=Jr(void 0);try{return d?d.get(o,l,a&Rt.Optional):rn(o,l,a&Rt.Optional)}finally{Jr(p)}}return Cl(l,0,a)}function Wn(i,o,a,l=Rt.Default,d){if(null!==i){if(2048&o[et]&&!(l&Rt.Self)){const _=function or(i,o,a,l,d){let p=i,_=o;for(;null!==p&&null!==_&&2048&_[et]&&!(512&_[et]);){const b=la(p,_,a,l|Rt.Self,Mi);if(b!==Mi)return b;let E=p.parent;if(!E){const T=_[Xu];if(T){const A=T.get(a,Mi,l);if(A!==Mi)return A}E=go(_),_=_[ec]}p=E}return d}(i,o,a,l,Mi);if(_!==Mi)return _}const p=la(i,o,a,l,Mi);if(p!==Mi)return p}return $m(o,a,l,d)}function la(i,o,a,l,d){const p=function jf(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Mr)?i[Mr]:void 0;return"number"==typeof o?o>=0?o&Hm:gd:o}(a);if("function"==typeof p){if(!Mf(o,i,l))return l&Rt.Host?Cl(d,0,l):$m(o,a,l,d);try{let _;if(_=p(l),null!=_||l&Rt.Optional)return _;Wa()}finally{kf()}}else if("number"==typeof p){let _=null,b=cc(i,o),E=sa,T=l&Rt.Host?o[Tn][vr]:null;for((-1===b||l&Rt.SkipSelf)&&(E=-1===b?fd(i,o):o[b+8],E!==sa&&ti(l,!1)?(_=o[Ie],b=Lr(E),o=aa(E,o)):b=-1);-1!==b;){const A=o[Ie];if(vs(p,b,A.data)){const x=db(b,o,a,_,l,T);if(x!==Mi)return x}E=o[b+8],E!==sa&&ti(l,o[Ie].data[b+8]===T)&&vs(p,b,o)?(_=A,b=Lr(E),o=aa(E,o)):b=-1}}return d}function db(i,o,a,l,d,p){const _=o[Ie],b=_.data[i+8],A=No(b,_,a,null==l?ss(b)&&Uf:l!=_&&0!=(3&b.type),d&Rt.Host&&p===b);return null!==A?_s(o,_,A,b):Mi}function No(i,o,a,l,d){const p=i.providerIndexes,_=o.data,b=1048575&p,E=i.directiveStart,A=p>>20,N=d?b+A:i.directiveEnd;for(let L=l?b:b+A;L<N;L++){const K=_[L];if(L<E&&a===K||L>=E&&K.type===a)return L}if(d){const L=_[E];if(L&&Si(L)&&L.type===a)return E}return null}function _s(i,o,a,l){let d=i[a];const p=o.data;if(function cb(i){return i instanceof Tl}(d)){const _=d;_.resolving&&function Vi(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new De(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ot(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():it(i)}(p[a]));const b=ms(_.canSeeViewProviders);_.resolving=!0;const T=_.injectImpl?Jr(_.injectImpl):null;Mf(i,l,Rt.Default);try{d=i[a]=_.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Dn(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const _=bf(o);(a.preOrderHooks??=[]).push(i,_),(a.preOrderCheckHooks??=[]).push(i,_)}d&&(a.preOrderHooks??=[]).push(0-i,d),p&&((a.preOrderHooks??=[]).push(i,p),(a.preOrderCheckHooks??=[]).push(i,p))}(a,p[a],o)}finally{null!==T&&Jr(T),ms(b),_.resolving=!1,kf()}}return d}function vs(i,o,a){return!!(a[o+(i>>po)]&1<<i)}function ti(i,o){return!(i&Rt.Self||i&Rt.Host&&o)}class en{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Wn(this._tNode,this._lView,o,Ku(l),a)}}function gd(){return new en(on(),re())}function md(i){return Ro(()=>{const o=i.prototype.constructor,a=o[pt]||cn(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[pt]||cn(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function cn(i){return Pt(i)?()=>{const o=cn(Fe(i));return o&&o()}:cs(i)}function go(i){const o=i[Ie],a=o.type;return 2===a?o.declTNode:1===a?i[vr]:null}function Pi(i){return function Bf(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(af(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(on(),i)}const Oo="__parameters__";function _o(i,o,a){return Ro(()=>{const l=function mo(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const _=new d(...p);return b.annotation=_,b;function b(E,T,A){const x=E.hasOwnProperty(Oo)?E[Oo]:Object.defineProperty(E,Oo,{value:[]})[Oo];for(;x.length<=A;)x.push(null);return(x[A]=x[A]||[]).push(_),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function zr(i,o){i.forEach(a=>Array.isArray(a)?zr(a,o):o(a))}function Dl(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Al(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Vr(i,o,a){let l=Lo(i,o);return l>=0?i[1|l]=a:(l=~l,function Gf(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function qf(i,o){const a=Lo(i,o);if(a>=0)return i[1|a]}function Lo(i,o){return function hc(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),_=i[p<<a];if(o===_)return p<<a;_>o?d=p:l=p+1}return~(d<<a)}(i,o,1)}const ha=ts(_o("Optional"),8),xl=ts(_o("SkipSelf"),4),Is=new Lt("ENVIRONMENT_INITIALIZER"),Kf=new Lt("INJECTOR",-1),Yf=new Lt("INJECTOR_DEF_TYPES");class yo{get(o,a=cl){if(a===cl){const l=new Error(`NullInjectorError: No provider for ${kn(o)}!`);throw l.name="NullInjectorError",l}return a}}function yd(i){return{\u0275providers:i}}function Qf(...i){return{\u0275providers:Ml(0,i),\u0275fromNgModule:!0}}function Ml(i,...o){const a=[],l=new Set;let d;const p=_=>{a.push(_)};return zr(o,_=>{const b=_;Es(b,p,[],l)&&(d||=[],d.push(b))}),void 0!==d&&Pl(d,p),a}function Pl(i,o){for(let a=0;a<i.length;a++){const{ngModule:l,providers:d}=i[a];mc(d,p=>{o(p,l)})}}function Es(i,o,a,l){if(!(i=Fe(i)))return!1;let d=null,p=gn(i);const _=!p&&xt(i);if(p||_){if(_&&!_.standalone)return!1;d=i}else{const E=i.ngModule;if(p=gn(E),!p)return!1;d=E}const b=l.has(d);if(_){if(b)return!1;if(l.add(d),_.dependencies){const E="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of E)Es(T,o,a,l)}}else{if(!p)return!1;{if(null!=p.imports&&!b){let T;l.add(d);try{zr(p.imports,A=>{Es(A,o,a,l)&&(T||=[],T.push(A))})}finally{}void 0!==T&&Pl(T,o)}if(!b){const T=cs(d)||(()=>new d);o({provide:d,useFactory:T,deps:Wt},d),o({provide:Yf,useValue:d,multi:!0},d),o({provide:Is,useValue:()=>lr(d),multi:!0},d)}const E=p.providers;if(null!=E&&!b){const T=i;mc(E,A=>{o(A,T)})}}}return d!==i&&void 0!==i.providers}function mc(i,o){for(let a of i)ft(a)&&(a=a.\u0275providers),Array.isArray(a)?mc(a,o):o(a)}const e_=bt({provide:String,useValue:bt});function Jf(i){return null!==i&&"object"==typeof i&&e_ in i}function ga(i){return"function"==typeof i}const kl=new Lt("Set Injector scope."),Ts={},Ib={};let Nl;function Id(){return void 0===Nl&&(Nl=new yo),Nl}class Gr{}class ma extends Gr{get destroyed(){return this._destroyed}constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Td(o,_=>this.processProvider(_)),this.records.set(Kf,Gi(void 0,this)),d.has("environment")&&this.records.set(Gr,Gi(void 0,this));const p=this.records.get(kl);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Yf,Wt,Rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=so(this),l=Jr(void 0);try{return o()}finally{so(a),Jr(l)}}get(o,a=cl,l=Rt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(no))return o[no](this);l=Ku(l);const p=so(this),_=Jr(void 0);try{if(!(l&Rt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const T=function wd(i){return"function"==typeof i||"object"==typeof i&&i instanceof Lt}(o)&&ct(o);E=T&&this.injectableDefInScope(T)?Gi(Cs(o),Ts):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&Rt.Self?Id():this.parent).get(o,a=l&Rt.Optional&&a===cl?null:a)}catch(b){if("NullInjectorError"===b.name){if((b[Zu]=b[Zu]||[]).unshift(kn(o)),p)throw b;return function zy(i,o,a,l){const d=i[Zu];throw o[nf]&&d.unshift(o[nf]),i.message=function sf(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=kn(o);if(Array.isArray(o))d=o.map(kn).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let b=o[_];p.push(_+":"+("string"==typeof b?JSON.stringify(b):kn(b)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(jy,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Zu]=null,i}(b,o,"R3InjectorError",this.source)}throw b}finally{Jr(_),so(p)}}resolveInjectorInitializers(){const o=so(this),a=Jr(void 0);try{const d=this.get(Is,Wt,Rt.Self);for(const p of d)p()}finally{so(o),Jr(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(kn(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(o){let a=ga(o=Fe(o))?o:Fe(o&&o.provide);const l=function Ed(i){return Jf(i)?Gi(void 0,i.useValue):Gi(zi(i),Ts)}(o);if(!ga(o)&&!0===o.multi){let d=this.records.get(a);d||(d=Gi(void 0,Ts,!0),d.factory=()=>ll(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Ts&&(a.value=Ib,a.value=a.factory()),"object"==typeof a.value&&a.value&&function _c(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Fe(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Cs(i){const o=ct(i),a=null!==o?o.factory:cs(i);if(null!==a)return a;if(i instanceof Lt)throw new De(204,!1);if(i instanceof Function)return function bo(i){if(i.length>0)throw new De(204,!1);const a=function Gn(i){return i&&(i[Ui]||i[Gu])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new De(204,!1)}function zi(i,o,a){let l;if(ga(i)){const d=Fe(i);return cs(d)||Cs(d)}if(Jf(i))l=()=>Fe(i.useValue);else if(function t_(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...ll(i.deps||[]));else if(function ws(i){return!(!i||!i.useExisting)}(i))l=()=>lr(Fe(i.useExisting));else{const d=Fe(i&&(i.useClass||i.provide));if(!function _a(i){return!!i.deps}(i))return cs(d)||Cs(d);l=()=>new d(...ll(i.deps))}return l}function Gi(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Td(i,o){for(const a of i)Array.isArray(a)?Td(a,o):a&&ft(a)?Td(a.\u0275providers,o):o(a)}function Eb(i,o){i instanceof ma&&i.assertNotDestroyed();const l=so(i),d=Jr(void 0);try{return o()}finally{so(l),Jr(d)}}function Dd(i,o=null,a=null,l){const d=Ds(i,o,a,l);return d.resolveInjectorInitializers(),d}function Ds(i,o=null,a=null,l,d=new Set){const p=[a||Wt,Qf(i)];return l=l||("object"==typeof i?void 0:kn(i)),new ma(p,o||Id(),l||null,d)}let Sd,hi=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=cl;static#t=this.NULL=new yo;static create(a,l){if(Array.isArray(a))return Dd({name:""},l,a,"");{const d=a.name??"";return Dd({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=j({token:i,providedIn:"any",factory:()=>lr(Kf)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function Uo(i){return!!kr(i)}function Bo(i){Sd=i}const Vl=new Lt("AppId",{providedIn:"root",factory:()=>Rd}),Rd="ng",np=new Lt("Platform Initializer"),ya=new Lt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rp=new Lt("AnimationModuleType"),ip=new Lt("CSP nonce",{providedIn:"root",factory:()=>function hr(){if(void 0!==Sd)return Sd;if(typeof document<"u")return document;throw new De(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function R(i){return i instanceof Function?i():i}function u_(i){return 128==(128&i.flags)}var h_=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(h_||{});const FS=/^>|^->|<!--|-->|--!>|<!-$/g,LS=/(<|>)/g,VS="\u200b$1\u200b";const Sb=new Map;let U0=0;const xb="__ngContext__";function ri(i,o){$r(o)?(i[xb]=o[tc],function Fd(i){Sb.set(i[tc],i)}(o)):i[xb]=o}let Nb;function lp(i,o){return Nb(i,o)}function jl(i,o,a,l,d){if(null!=l){let p,_=!1;yr(l)?p=l:$r(l)&&(_=!0,l=l[Rn]);const b=Cn(l);0===i&&null!==a?null==d?Lb(o,a,b):Hl(o,a,b,d||null,!0):1===i&&null!==a?Hl(o,a,b,d||null,!0):2===i?function hp(i,o,a){const l=Vd(i,o);l&&function QS(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,b,_):3===i&&o.destroyNode(b),null!=p&&function JS(i,o,a,l,d){const p=a[ui];p!==Cn(a)&&jl(o,i,l,p,d);for(let b=Fn;b<a.length;b++){const E=a[b];E_(E[Ie],E,i,o,l,p)}}(o,i,p,a,d)}}function Ob(i,o){return i.createComment(function US(i){return i.replace(FS,o=>o.replace(LS,VS))}(o))}function m_(i,o,a){return i.createElement(o,a)}function G0(i,o){o[Ai].changeDetectionScheduler?.notify(),E_(i,o,o[gt],2,null,null)}function q0(i,o){const a=i[os],l=a.indexOf(o);a.splice(l,1)}function up(i,o){if(i.length<=Fn)return;const a=Fn+o,l=i[a];if(l){const d=l[rs];null!==d&&d!==i&&q0(d,l),o>0&&(i[a-1][Di]=l[Di]);const p=Al(i,Fn+o);!function __(i,o){G0(i,o),o[Rn]=null,o[vr]=null}(l[Ie],l);const _=p[lo];null!==_&&_.detachView(p[Ie]),l[wn]=null,l[Di]=null,l[et]&=-129}return l}function v_(i,o){if(!(256&o[et])){const a=o[gt];a.destroyNode&&E_(i,o,a,3,null,null),function WS(i){let o=i[hl];if(!o)return y_(i[Ie],i);for(;o;){let a=null;if($r(o))a=o[hl];else{const l=o[Fn];l&&(a=l)}if(!a){for(;o&&!o[Di]&&o!==i;)$r(o)&&y_(o[Ie],o),o=o[wn];null===o&&(o=i),$r(o)&&y_(o[Ie],o),a=o&&o[Di]}o=a}}(o)}}function y_(i,o){if(!(256&o[et])){o[et]&=-129,o[et]|=256,o[ji]&&function An(i){if(Gt(i),Xe(i))for(let o=0;o<i.producerNode.length;o++)Ce(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}(o[ji]),function YS(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Tl)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const b=d[p[_]],E=p[_+1];xo(4,b,E);try{E.call(b)}finally{xo(5,b,E)}}else{xo(4,d,p);try{p.call(d)}finally{xo(5,d,p)}}}}}(i,o),function hP(i,o){const a=i.cleanup,l=o[Js];if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+3];_>=0?l[_]():l[-_].unsubscribe(),p+=2}else a[p].call(l[a[p+1]]);null!==l&&(o[Js]=null);const d=o[uo];if(null!==d){o[uo]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(i,o),1===o[Ie].type&&o[gt].destroy();const a=o[rs];if(null!==a&&yr(o[wn])){a!==o[wn]&&q0(a,o);const l=o[lo];null!==l&&l.detachView(i)}!function BS(i){Sb.delete(i[tc])}(o)}}function Fb(i,o,a){return function W0(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[Rn];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:p}=i.data[l.directiveStart+d];if(p===ns.None||p===ns.Emulated)return null}return Or(l,a)}}(i,o.parent,a)}function Hl(i,o,a,l,d){i.insertBefore(o,a,l,d)}function Lb(i,o,a){i.appendChild(o,a)}function Z0(i,o,a,l,d){null!==l?Hl(i,o,a,l,d):Lb(i,o,a)}function Vd(i,o){return i.parentNode(o)}function Y0(i,o,a){return zl(i,o,a)}let dp,yc,C_,zl=function $l(i,o,a){return 40&i.type?Or(i,a):null};function b_(i,o,a,l){const d=Fb(i,l,o),p=o[gt],b=Y0(l.parent||o[vr],l,o);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)Z0(p,d,a[E],b,!1);else Z0(p,d,a,b,!1);void 0!==dp&&dp(p,l,o,a,d)}function Ud(i,o){if(null!==o){const a=o.type;if(3&a)return Or(o,i);if(4&a)return Vb(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Ud(i,l);{const d=i[o.index];return yr(d)?Vb(-1,d):Cn(d)}}if(32&a)return lp(o,i)()||Cn(i[o.index]);{const l=I_(i,o);return null!==l?Array.isArray(l)?l[0]:Ud(us(i[Tn]),l):Ud(i,o.next)}}return null}function I_(i,o){return null!==o?i[Tn][vr].projection[o.projection]:null}function Vb(i,o){const a=Fn+i+1;if(a<o.length){const l=o[a],d=l[Ie].firstChild;if(null!==d)return Ud(l,d)}return o[ui]}function Bb(i,o,a,l,d,p,_){for(;null!=a;){const b=l[a.index],E=a.type;if(_&&0===o&&(b&&ri(Cn(b),l),a.flags|=2),32!=(32&a.flags))if(8&E)Bb(i,o,a.child,l,d,p,!1),jl(o,i,d,b,p);else if(32&E){const T=lp(a,l);let A;for(;A=T();)jl(o,i,d,A,p);jl(o,i,d,b,p)}else 16&E?J0(i,o,l,a,d,p):jl(o,i,d,b,p);a=_?a.projectionNext:a.next}}function E_(i,o,a,l,d,p){Bb(a,l,i.firstChild,o,d,p,!1)}function J0(i,o,a,l,d,p){const _=a[Tn],E=_[vr].projection[l.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)jl(o,i,d,E[T],p);else{let T=E;const A=_[wn];u_(l)&&(T.flags|=128),Bb(i,o,T,A,d,p,!0)}}function jb(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function X0(i,o,a){const{mergedAttrs:l,classes:d,styles:p}=a;null!==l&&ul(i,o,l),null!==d&&jb(i,o,d),null!==p&&function eR(i,o,a){i.setAttribute(o,"style",a)}(i,o,p)}function Bd(i){return function T_(){if(void 0===yc&&(yc=null,nr.trustedTypes))try{yc=nr.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return yc}()?.createHTML(i)||i}function Hb(i){return function Gl(){if(void 0===C_&&(C_=null,nr.trustedTypes))try{C_=nr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return C_}()?.createScriptURL(i)||i}class jd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ai})`}}class pP extends jd{getTypeName(){return"HTML"}}class iR extends jd{getTypeName(){return"Style"}}class $b extends jd{getTypeName(){return"Script"}}class nT extends jd{getTypeName(){return"URL"}}class gP extends jd{getTypeName(){return"ResourceURL"}}function Ss(i){return i instanceof jd?i.changingThisBreaksApplicationSecurity:i}function pi(i,o){const a=function oR(i){return i instanceof jd&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ai})`)}return a===o}function mP(i){return new pP(i)}function _P(i){return new iR(i)}function vP(i){return new $b(i)}function rT(i){return new nT(i)}function iT(i){return new gP(i)}class sR{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Bd(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class aR{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const a=this.inertDocument.createElement("template");return a.innerHTML=Bd(o),a}}const oT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function A_(i){return(i=String(i)).match(oT)?i:"unsafe:"+i}function bc(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function S_(...i){const o={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const cR=bc("area,br,col,hr,img,wbr"),sT=bc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),aT=bc("rp,rt"),R_=S_(cR,S_(sT,bc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),S_(aT,bc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),S_(aT,sT)),zb=bc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cT=S_(zb,bc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),bc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),uR=bc("script,style,template");class lT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!R_.hasOwnProperty(a))return this.sanitizedSomething=!0,!uR.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const p=l.item(d),_=p.name,b=_.toLowerCase();if(!cT.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let E=p.value;zb[b]&&(E=A_(E)),this.buf.push(" ",_,'="',hR(E),'"')}return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();R_.hasOwnProperty(a)&&!cR.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(hR(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const dR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wP=/([^\#-~ |!])/g;function hR(i){return i.replace(/&/g,"&amp;").replace(dR,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(wP,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Gb;function fR(i,o){let a=null;try{Gb=Gb||function D_(i){const o=new aR(i);return function yP(){try{return!!(new window.DOMParser).parseFromString(Bd(""),"text/html")}catch{return!1}}()?new sR(o):o}(i);let l=o?String(o):"";a=Gb.getInertBodyElement(l);let d=5,p=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=p,p=a.innerHTML,a=Gb.getInertBodyElement(l)}while(l!==p);return Bd((new lT).sanitizeChildren(uT(a)||a))}finally{if(a){const l=uT(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function uT(i){return"content"in i&&function TP(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Ic=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Ic||{});function dT(i){const o=fp();return o?o.sanitize(Ic.URL,i)||"":pi(i,"URL")?Ss(i):A_(it(i))}function qb(i){const o=fp();if(o)return Hb(o.sanitize(Ic.RESOURCE_URL,i)||"");if(pi(i,"ResourceURL"))return Hb(Ss(i));throw new De(904,!1)}function P_(i,o,a){return function mR(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?qb:dT}(o,a)(i)}function fp(){const i=re();return i&&i[Ai].sanitizer}class hT{}let mT=()=>null;function xs(i,o,a=!1){return mT(i,o,a)}class IR{}class Qb{}class AP{resolveComponentFactory(o){throw function ER(i){const o=Error(`No component factory found for ${kn(i)}.`);return o.ngComponent=i,o}(o)}}let wc=(()=>{class i{static#e=this.NULL=new AP}return i})();function TR(){return ql(on(),re())}function ql(i,o){return new mp(Or(i,o))}let mp=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=TR}return i})();function Jb(i){return i instanceof mp?i.nativeElement:i}class Xb{}let yT=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function CR(){const i=re(),a=ir(on().index,i);return($r(a)?a:i)[gt]}()}return i})(),bT=(()=>{class i{static#e=this.\u0275prov=j({token:i,providedIn:"root",factory:()=>null})}return i})();const $_={};function ET(i){const o=ye(null);try{return i()}finally{ye(o)}}function eI(i){return!!rI(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function rI(i){return null!==i&&("function"==typeof i||"object"==typeof i)}class le{constructor(){}supports(o){return eI(o)}create(o){return new Ms(o)}}const wT=(i,o)=>o;class Ms{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||wT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<ke(l,d,p)?a:l,b=ke(_,d,p),E=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=b-d,A=E-d;if(T!=A){for(let N=0;N<T;N++){const L=N<p.length?p[N]:p[N]=0,K=L+N;A<=K&&K<T&&(p[N]=L+1)}p[_.previousIndex]=A-T}}b!==E&&o(_,b,E)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!eI(o))throw new De(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)p=o[b],_=this._trackByFn(b,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,b)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,b),l=!0),a=a._next}else d=0,function nI(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,b=>{_=this._trackByFn(d,b),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,b,_,d)),Object.is(a.item,b)||this._addIdentityChange(a,b)):(a=this._mismatch(a,b,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new yn(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Eo),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Eo),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class yn{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xR{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Eo{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new xR,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ke(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class z_{constructor(){}supports(o){return o instanceof Map||rI(o)}create(){return new It}}class It{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||rI(o)))throw new De(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const l=new G_(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class G_{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wd(){return new iI([new le])}let iI=(()=>{class i{static#e=this.\u0275prov=j({token:i,providedIn:"root",factory:Wd});constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Wd()),deps:[[i,new xl,new ha]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new De(901,!1)}}return i})();function CT(){return new oI([new z_])}let oI=(()=>{class i{static#e=this.\u0275prov=j({token:i,providedIn:"root",factory:CT});constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||CT()),deps:[[i,new xl,new ha]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new De(901,!1)}}return i})();function fr(i,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];null!==p&&l.push(Cn(p)),yr(p)&&_p(p,l);const _=a.type;if(8&_)fr(i,o,a.child,l);else if(32&_){const b=lp(a,o);let E;for(;E=b();)l.push(E)}else if(16&_){const b=I_(o,a);if(Array.isArray(b))l.push(...b);else{const E=us(o[Tn]);fr(E[Ie],E,b,l,!0)}}a=d?a.projectionNext:a.next}return l}function _p(i,o){for(let a=Fn;a<i.length;a++){const l=i[a],d=l[Ie].firstChild;null!==d&&fr(l[Ie],l,d,o)}i[ui]!==i[Rn]&&o.push(i[ui])}let Ir=[];const sI={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{rc(i.lView)},consumerOnSignalRead(){this.lView[ji]=this}};function ST(i){return vp(i[hl])}function Zd(i){return vp(i[Di])}function vp(i){for(;null!==i&&!yr(i);)i=i[Di];return i}function aI(i){return i.ngOriginalError}class Cc{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&aI(o);for(;a&&aI(a);)a=aI(a);return a||null}}const Wl=new Lt("",{providedIn:"root",factory:()=>Ft(Cc).handleError.bind(void 0)}),cI=new Lt("",{providedIn:"root",factory:()=>!1}),Tt={};function kT(i=1){bp(Vt(),re(),br()+i,!1)}function bp(i,o,a,l){if(!l)if(3==(3&o[et])){const p=i.preOrderCheckHooks;null!==p&&xi(o,p,a)}else{const p=i.preOrderHooks;null!==p&&ko(o,p,0,a)}ps(a)}function Dc(i,o=Rt.Default){const a=re();return null===a?lr(i,o):Wn(on(),a,Fe(i),o)}function NT(){throw new Error("invalid")}function Ip(i,o,a,l,d,p,_,b,E,T,A){const x=o.blueprint.slice();return x[Rn]=d,x[et]=204|l,(null!==T||i&&2048&i[et])&&(x[et]|=2048),km(x),x[wn]=x[ec]=i,x[ot]=a,x[Ai]=_||i&&i[Ai],x[gt]=b||i&&i[gt],x[Nr]=E||i&&i[Nr]||null,x[vr]=p,x[tc]=function f_(){return U0++}(),x[co]=A,x[Xu]=T,x[Tn]=2==o.type?i[Tn]:x,x}function Zl(i,o,a,l,d){let p=i.data[o];if(null===p)p=function Yd(i,o,a,l,d){const p=ib(),_=ic(),E=i.data[o]=function vI(i,o,a,l,d,p){let _=o?o.injectorIndex:-1,b=0;return ra()&&(b|=128),{type:a,index:l,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:b,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=E),null!==p&&(_?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E,E.prev=p)),E}(i,o,a,l,d),function x0(){return at.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const _=function ia(){const i=at.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ho(p,!0),p}function Kl(i,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function K_(i,o,a,l,d){const p=br(),_=2&l;try{ps(-1),_&&o.length>st&&bp(i,o,st,!1),xo(_?2:0,d),a(l,d)}finally{ps(p),xo(_?3:1,d)}}function Ep(i,o,a){if(Im(o)){const l=ye(null);try{const p=o.directiveEnd;for(let _=o.directiveStart;_<p;_++){const b=i.data[_];b.contentQueries&&b.contentQueries(1,a[_],_)}}finally{ye(l)}}}function wp(i,o,a){Af()&&(function Cp(i,o,a,l){const d=a.directiveStart,p=a.directiveEnd;ss(a)&&function Dp(i,o,a){const l=Or(o,i),d=hI(a);let _=16;a.signals?_=4096:a.onPush&&(_=64);const b=ev(i,Ip(i,d,null,_,l,o,null,i[Ai].rendererFactory.createRenderer(l,a),null,null,null));i[o.index]=b}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||ca(a,o),ri(l,o);const _=a.initialInputs;for(let b=d;b<p;b++){const E=i.data[b],T=_s(o,i,b,a);ri(T,o),null!==_&&jT(0,b-d,T,E,0,_),Si(E)&&(ir(a.index,o)[ot]=_s(o,i,b,a))}}(i,o,a,Or(a,o)),64==(64&a.flags)&&J_(i,o,a))}function Y_(i,o,a=Or){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],b=-1===_?a(o,i):i[_];i[d++]=b}}}function hI(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=fI(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function fI(i,o,a,l,d,p,_,b,E,T,A){const x=st+l,N=x+d,L=function FT(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Tt);return a}(x,N),K="function"==typeof T?T():T;return L[Ie]={type:i,blueprint:L,template:a,queries:null,viewQuery:b,declTNode:o,data:L.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:K,incompleteFirstPass:!1,ssrId:A}}let gI=()=>null;function Er(i,o,a,l){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===l?Ur(a,o,d,p):l.hasOwnProperty(d)&&Ur(a,o,l[d],p)}return a}function Ur(i,o,a,l){i.hasOwnProperty(a)?i[a].push(o,l):i[a]=[o,l]}function bI(i,o,a,l){if(Af()){const d=null===l?null:{"":-1},p=function BR(i,o){const a=i.directiveRegistry;let l=null,d=null;if(a)for(let p=0;p<a.length;p++){const _=a[p];if(lf(o,_.selectors,!1))if(l||(l=[]),Si(_))if(null!==_.findHostDirectiveDefs){const b=[];d=d||new Map,_.findHostDirectiveDefs(_,b,d),l.unshift(...b,_),Qd(i,o,b.length)}else l.unshift(_),Qd(i,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,l,d),l.push(_)}return null===l?null:[l,d]}(i,a);let _,b;null===p?_=b=null:[_,b]=p,null!==_&&VT(i,o,a,_,d,b),d&&function II(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new De(-301,!1);l.push(o[d],p)}}}(a,l,d)}a.mergedAttrs=Ks(a.mergedAttrs,a.attrs)}function VT(i,o,a,l,d,p){for(let T=0;T<l.length;T++)pd(ca(a,o),i,l[T].type);!function BT(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,l.length);for(let T=0;T<l.length;T++){const A=l[T];A.providersResolver&&A.providersResolver(A)}let _=!1,b=!1,E=Kl(i,o,l.length,null);for(let T=0;T<l.length;T++){const A=l[T];a.mergedAttrs=Ks(a.mergedAttrs,A.hostAttrs),jR(i,a,o,E,A),EI(E,A,d),null!==A.contentQueries&&(a.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(a.flags|=64);const x=A.type.prototype;!_&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),_=!0),!b&&(x.ngOnChanges||x.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),b=!0),E++}!function Q_(i,o,a){const d=o.directiveEnd,p=i.data,_=o.attrs,b=[];let E=null,T=null;for(let A=o.directiveStart;A<d;A++){const x=p[A],N=a?a.get(x):null,K=N?N.outputs:null;E=Er(x.inputs,A,E,N?N.inputs:null),T=Er(x.outputs,A,T,K);const me=null===E||null===_||ym(o)?null:HR(E,A,_);b.push(me)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=8),E.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=b,o.inputs=E,o.outputs=T}(i,a,p)}function J_(i,o,a){const l=a.directiveStart,d=a.directiveEnd,p=a.index,_=function mn(){return at.lFrame.currentDirectiveIndex}();try{ps(p);for(let b=l;b<d;b++){const E=i.data[b],T=o[b];_n(b),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&UT(E,T)}}finally{ps(-1),_n(_)}}function UT(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Qd(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function EI(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Si(o)&&(a[""]=i)}}function jR(i,o,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=cs(d.type)),_=new Tl(p,Si(d),Dc);i.blueprint[l]=_,a[l]=_,function UR(i,o,a,l,d){const p=d.hostBindings;if(p){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const b=~o.index;(function Tp(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(_)!=b&&_.push(b),_.push(a,l,p)}}(i,o,l,Kl(i,a,d.hostVars,Tt),d)}function Ho(i,o,a,l,d,p){const _=Or(i,o);!function X_(i,o,a,l,d,p,_){if(null==p)i.removeAttribute(o,d,a);else{const b=null==_?it(p):_(p,l||"",d);i.setAttribute(o,d,b,a)}}(o[gt],_,p,i.value,a,l,d)}function jT(i,o,a,l,d,p){const _=p[o];if(null!==_)for(let b=0;b<_.length;)Ap(l,a,_[b++],_[b++],_[b++])}function Ap(i,o,a,l,d){const p=ye(null);try{const _=i.inputTransforms;null!==_&&_.hasOwnProperty(l)&&(d=_[l].call(o,d)),null!==i.setInput?i.setInput(o,d,a,l):o[l]=d}finally{ye(p)}}function HR(i,o,a){let l=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===l&&(l=[]);const _=i[p];for(let b=0;b<_.length;b+=2)if(_[b]===o){l.push(p,_[b+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function HT(i,o,a,l){return[i,!0,0,o,null,l,null,a,null,null]}function Yl(i,o){const a=i.contentQueries;if(null!==a){const l=ye(null);try{for(let d=0;d<a.length;d+=2){const _=a[d+1];if(-1!==_){const b=i.data[_];yl(a[d]),b.contentQueries(2,o[_],_)}}}finally{ye(l)}}}function ev(i,o){return i[hl]?i[gf][Di]=o:i[hl]=o,i[gf]=o,o}function wI(i,o,a){yl(0);const l=ye(null);try{o(i,a)}finally{ye(l)}}function TI(i){return i[Js]||(i[Js]=[])}function Sp(i){return i.cleanup||(i.cleanup=[])}function Ac(i,o){const a=i[Nr],l=a?a.get(Cc,null):null;l&&l.handleError(o)}function tv(i,o,a,l,d){for(let p=0;p<a.length;){const _=a[p++],b=a[p++];Ap(i.data[_],o[_],l,b,d)}}function jn(i,o,a){const l=rd(o,i);!function z0(i,o,a){i.setValue(o,a)}(i[gt],l,a)}function DI(i,o,a,l){const d=o[et];if(256==(256&d))return;o[Ai].inlineEffectRunner?.flush(),ud(o);let _=null,b=null;(function zT(i){return 2!==i.type})(i)&&(b=function Tc(i){return i[ji]??function PR(i){const o=Ir.pop()??Object.create(sI);return o.lView=i,o}(i)}(o),_=function $e(i){return i&&(i.nextProducerIndex=0),ye(i)}(b));try{km(o),function Rf(i){return at.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&K_(i,o,a,2,l);const E=3==(3&d);if(E){const x=i.preOrderCheckHooks;null!==x&&xi(o,x,null)}else{const x=i.preOrderHooks;null!==x&&ko(o,x,0,null),wl(o,0)}if(function Rp(i){for(let o=ST(i);null!==o;o=Zd(o)){if(!(o[et]&fl.HasTransplantedViews))continue;const a=o[os];for(let l=0;l<a.length;l++){R0(a[l])}}}(o),AI(o,0),null!==i.contentQueries&&Yl(i,o),E){const x=i.contentCheckHooks;null!==x&&xi(o,x)}else{const x=i.contentHooks;null!==x&&ko(o,x,1),wl(o,1)}!function OT(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)ps(~d);else{const p=d,_=a[++l],b=a[++l];vl(_,p),b(2,o[p])}}}finally{ps(-1)}}(i,o);const T=i.components;null!==T&&Mp(o,T,0);const A=i.viewQuery;if(null!==A&&wI(2,A,l),E){const x=i.viewCheckHooks;null!==x&&xi(o,x)}else{const x=i.viewHooks;null!==x&&ko(o,x,2),wl(o,2)}if(!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[ed]){for(const x of o[ed])x();o[ed]=null}o[et]&=-73}catch(E){throw rc(o),E}finally{null!==b&&(function nt(i,o){if(ye(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Xe(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)Ce(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}(b,_),function DT(i){i.lView[ji]!==i&&(i.lView=null,Ir.push(i))}(b)),dd()}}function AI(i,o){for(let a=ST(i);null!==a;a=Zd(a))for(let l=Fn;l<a.length;l++)rv(a[l],o)}function SI(i,o,a){rv(ir(o,i),a)}function rv(i,o){Df(i)&&xp(i,o)}function xp(i,o){const l=i[Ie],d=i[et],p=i[ji];let _=!!(0===o&&16&d);if(_||=!!(64&d&&0===o),_||=!!(1024&d),_||=!(!p?.dirty||!Qt(p)),p&&(p.dirty=!1),i[et]&=-9217,_)DI(l,i,l.template,i[ot]);else if(8192&d){AI(i,1);const b=l.components;null!==b&&Mp(i,b,1)}}function Mp(i,o,a){for(let l=0;l<o.length;l++)SI(i,o[l],a)}function ba(i){for(i[Ai].changeDetectionScheduler?.notify();i;){i[et]|=64;const o=us(i);if(_f(i)&&!o)return i;i=o}return null}class Xd{get rootNodes(){const o=this._lView,a=o[Ie];return fr(a,o,a.firstChild,[])}constructor(o,a,l=!0){this._lView=o,this._cdRefInjectingView=a,this.notifyErrorHandler=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ot]}set context(o){this._lView[ot]=o}get destroyed(){return 256==(256&this._lView[et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[wn];if(yr(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(up(o,l),Al(a,l))}this._attachedToViewContainer=!1}v_(this._lView[Ie],this._lView)}onDestroy(o){na(this._lView,o)}markForCheck(){ba(this._cdRefInjectingView||this._lView)}detach(){this._lView[et]&=-129}reattach(){ml(this._lView),this._lView[et]|=128}detectChanges(){this._lView[et]|=1024,function Ql(i,o=!0){const a=i[Ai],l=a.rendererFactory;l.begin?.();try{!function nv(i){xp(i,0);let o=0;for(;od(i);){if(100===o)throw new De(103,!1);o++,xp(i,1)}}(i)}catch(p){throw o&&Ac(i,p),p}finally{l.end?.(),a.inlineEffectRunner?.flush()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,G0(this._lView[Ie],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=o,ml(this._lView)}}let GT=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=qT}return i})();function qT(i){return function RI(i,o,a){if(ss(i)&&!a){const l=ir(i.index,o);return new Xd(l,l)}return 47&i.type?new Xd(o[Tn],o):null}(on(),re(),16==(16&i))}let iv=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=ZT;static#t=this.__NG_ENV_ID__=a=>a}return i})();class Pp extends iv{constructor(o){super(),this._lView=o}onDestroy(o){return na(this._lView,o),()=>function sd(i,o){if(null===i[uo])return;const a=i[uo].indexOf(o);-1!==a&&i[uo].splice(a,1)}(this._lView,o)}}function ZT(){return new Pp(re())}const kI=new Set;function Xl(i){kI.has(i)||(kI.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}function $o(i){return o=>{setTimeout(i,void 0,o)}}const Zi=class eu extends En.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,p=a||(()=>null),_=l;if(o&&"object"==typeof o){const E=o;d=E.next?.bind(E),p=E.error?.bind(E),_=E.complete?.bind(E)}this.__isAsync&&(p=$o(p),d&&(d=$o(d)),_&&(_=$o(_)));const b=super.subscribe({next:d,error:p,complete:_});return o instanceof Sr.w0&&o.add(b),b}};function Np(...i){}class Vn{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zi(!1),this.onMicrotaskEmpty=new Zi(!1),this.onStable=new Zi(!1),this.onError=new Zi(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function YT(){const i="function"==typeof nr.requestAnimationFrame;let o=nr[i?"requestAnimationFrame":"setTimeout"],a=nr[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function QT(i){const o=()=>{!function ZR(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(nr,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,NI(i),i.isCheckStableRunning=!0,tu(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),NI(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,_,b)=>{if(function Fp(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(b))return a.invokeTask(d,p,_,b);try{return JT(i),a.invokeTask(d,p,_,b)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),XT(i)}},onInvoke:(a,l,d,p,_,b,E)=>{try{return JT(i),a.invoke(d,p,_,b,E)}finally{i.shouldCoalesceRunChangeDetection&&o(),XT(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,NI(i),tu(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vn.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Vn.isInAngularZone())throw new De(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,Op,Np,Np);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Op={};function tu(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function NI(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function JT(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function XT(i){i._nesting--,tu(i)}class eC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zi,this.onMicrotaskEmpty=new Zi,this.onStable=new Zi,this.onError=new Zi}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}var Rc=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(Rc||{});const OI={destroy(){}};function tC(i,o){!o&&function Ol(i){if(!Xh()&&!function Hy(){return es}())throw new De(-203,!1)}();const a=o?.injector??Ft(hi);if(!function P(i){return"browser"===(i??Ft(hi)).get(ya)}(a))return OI;Xl("NgAfterNextRender");const l=a.get(Lp),d=l.handler??=new LI,p=o?.phase??Rc.MixedReadWrite,_=()=>{d.unregister(E),b()},b=a.get(iv).onDestroy(_),E=new nC(a,p,()=>{_(),i()});return d.register(E),{destroy:_}}class nC{constructor(o,a,l){this.phase=a,this.callbackFn=l,this.zone=o.get(Vn),this.errorHandler=o.get(Cc,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(o){this.errorHandler?.handleError(o)}}}class LI{constructor(){this.executingCallbacks=!1,this.buckets={[Rc.EarlyRead]:new Set,[Rc.Write]:new Set,[Rc.MixedReadWrite]:new Set,[Rc.Read]:new Set},this.deferredCallbacks=new Set}register(o){(this.executingCallbacks?this.deferredCallbacks:this.buckets[o.phase]).add(o)}unregister(o){this.buckets[o.phase].delete(o),this.deferredCallbacks.delete(o)}execute(){let o=!1;this.executingCallbacks=!0;for(const a of Object.values(this.buckets))for(const l of a)o=!0,l.invoke();this.executingCallbacks=!1;for(const a of this.deferredCallbacks)this.buckets[a.phase].add(a);return this.deferredCallbacks.clear(),o}destroy(){for(const o of Object.values(this.buckets))o.clear();this.deferredCallbacks.clear()}}let Lp=(()=>{class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const a=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const d of a)d();return!!this.handler?.execute()||a.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=j({token:i,providedIn:"root",factory:()=>new i})}return i})();function rC(i,o){const a=ir(o,i),l=a[Ie];!function iC(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(l,a);const d=a[Rn];null!==d&&null===a[co]&&(a[co]=xs(d,a[Nr])),Vp(l,a,a[ot])}function Vp(i,o,a){ud(o);try{const l=i.viewQuery;null!==l&&wI(1,l,a);const d=i.template;null!==d&&K_(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Yl(i,o),i.staticViewQueries&&wI(2,i.viewQuery,a);const p=i.components;null!==p&&function VI(i,o){for(let a=0;a<o.length;a++)rC(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[et]&=-5,dd()}}function Up(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const b=o[_];"number"==typeof b?p=b:1==p?d=eo(d,b):2==p&&(l=eo(l,b+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}class UI extends wc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=xt(o);return new Bp(a,this.ngModule)}}function oC(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class YR{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=Ku(l);const d=this.injector.get(o,$_,l);return d!==$_||a===$_?d:this.parentInjector.get(o,a,l)}}class Bp extends Qb{get inputs(){const o=this.componentDef,a=o.inputTransforms,l=oC(o.inputs);if(null!==a)for(const d of l)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return l}get outputs(){return oC(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function df(i){return i.map(Qa).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,d){let p=(d=d||this.ngModule)instanceof Gr?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new YR(o,p):o,b=_.get(Xb,null);if(null===b)throw new De(407,!1);const x={rendererFactory:b,sanitizer:_.get(bT,null),inlineEffectRunner:null,afterRenderEventManager:_.get(Lp,null),changeDetectionScheduler:_.get(hT,null)},N=b.createRenderer(null,this.componentDef),L=this.componentDef.selectors[0][0]||"div",K=l?function LT(i,o,a,l){const p=l.get(cI,!1)||a===ns.ShadowDom,_=i.selectRootElement(o,p);return function pI(i){gI(i)}(_),_}(N,l,this.componentDef.encapsulation,_):m_(N,L,function KR(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(L));let me=512;this.componentDef.signals?me|=4096:this.componentDef.onPush||(me|=16);let Te=null;null!==K&&(Te=xs(K,_,!0));const He=fI(0,null,null,1,0,null,null,null,null,null,null),pe=Ip(null,He,null,me,null,null,x,N,_,null,Te);let Et,Ht;ud(pe);try{const Kt=this.componentDef;let Yr,sm=null;Kt.findHostDirectiveDefs?(Yr=[],sm=new Map,Kt.findHostDirectiveDefs(Kt,Yr,sm),Yr.push(Kt)):Yr=[Kt];const uk=function jp(i,o){const a=i[Ie],l=st;return i[l]=o,Zl(a,l,2,"#host",null)}(pe,K),f0=function sv(i,o,a,l,d,p,_){const b=d[Ie];!function BI(i,o,a,l){for(const d of i)o.mergedAttrs=Ks(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Up(o,o.mergedAttrs,!0),null!==a&&X0(l,a,o))}(l,i,o,_);let E=null;null!==o&&(E=xs(o,d[Nr]));const T=p.rendererFactory.createRenderer(o,a);let A=16;a.signals?A=4096:a.onPush&&(A=64);const x=Ip(d,hI(a),null,A,d[i.index],i,p,T,null,null,E);return b.firstCreatePass&&Qd(b,i,l.length-1),ev(d,x),d[i.index]=x}(uk,K,Kt,Yr,pe,x,N);Ht=id(He,st),K&&function Hp(i,o,a,l){if(l)ul(i,a,["ng-version","17.0.9"]);else{const{attrs:d,classes:p}=function w0(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++l]):8===d&&a.push(p);else{if(!Ti(d))break;d=p}l++}return{attrs:o,classes:a}}(o.selectors[0]);d&&ul(i,a,d),p&&p.length>0&&jb(i,a,p.join(" "))}}(N,Kt,K,l),void 0!==a&&function $p(i,o,a){const l=i.projection=[];for(let d=0;d<o.length;d++){const p=a[d];l.push(null!=p?Array.from(p):null)}}(Ht,this.ngContentSelectors,a),Et=function sC(i,o,a,l,d,p){const _=on(),b=d[Ie],E=Or(_,d);VT(b,d,_,a,null,l);for(let A=0;A<a.length;A++)ri(_s(d,b,_.directiveStart+A,_),d);J_(b,d,_),E&&ri(E,d);const T=_s(d,b,_.directiveStart+_.componentOffset,_);if(i[ot]=d[ot]=T,null!==p)for(const A of p)A(T,o);return Ep(b,_,i),T}(f0,Kt,Yr,sm,pe,[QR]),Vp(He,pe,null)}finally{dd()}return new ov(this.componentType,Et,ql(Ht,pe),pe,Ht)}}class ov extends IR{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new Xd(d,void 0,!1),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const p=this._rootLView;tv(p[Ie],p,d,o,a),this.previousInputValues.set(o,a),ba(ir(this._tNode.index,p))}}get injector(){return new en(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function QR(){const i=on();sn(re()[Ie],i)}function av(i){let o=function Hn(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(Si(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new De(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=cv(i.inputs),_.inputTransforms=cv(i.inputTransforms),_.declaredInputs=cv(i.declaredInputs),_.outputs=cv(i.outputs);const b=d.hostBindings;b&&cC(i,b);const E=d.viewQuery,T=d.contentQueries;if(E&&XR(i,E),T&&aC(i,T),Hr(i.inputs,d.inputs),Hr(i.declaredInputs,d.declaredInputs),Hr(i.outputs,d.outputs),null!==d.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),Hr(_.inputTransforms,d.inputTransforms)),Si(d)&&d.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const b=p[_];b&&b.ngInherit&&b(i),b===av&&(a=!1)}}o=Object.getPrototypeOf(o)}!function JR(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Ks(d.hostAttrs,a=Ks(a,d.hostAttrs))}}(l)}function cv(i){return i===wi?{}:i===Wt?[]:i}function XR(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function aC(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function cC(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}function HI(i){const o=i.inputConfig,a={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(a[l]=d[2])}i.inputTransforms=a}function wo(i,o,a){return i[o]=a}function sr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function ks(i,o,a,l){const d=sr(i,o,a);return sr(i,o+1,l)||d}function uv(i,o,a,l,d){const p=ks(i,o,a,l);return sr(i,o+2,d)||p}function nu(i,o,a,l){const d=re();return sr(d,fo(),o)&&(Vt(),Ho(Nt(),d,i,o,a,l)),nu}function dv(i,o){return i<<17|o<<2}function Br(i){return i>>17&32767}function YI(i){return 2|i}function Ea(i){return(131068&i)>>2}function Co(i,o){return-131069&i|o<<2}function Gp(i){return 1|i}function Yi(i,o,a,l){const d=i[a+1],p=null===o;let _=l?Br(d):Ea(d),b=!1;for(;0!==_&&(!1===b||p);){const T=i[_+1];qr(i[_],o)&&(b=!0,i[_+1]=l?Gp(T):YI(T)),_=l?Br(T):Ea(T)}b&&(i[a+1]=l?YI(d):Gp(d))}function qr(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Lo(i,o)>=0}const Kn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wp(i){return i.substring(Kn.key,Kn.keyEnd)}function QI(i,o){const a=Kn.textEnd;return a===o?-1:(o=Kn.keyEnd=function ex(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,Kn.key=o,a),kc(i,o,a))}function kc(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function XI(i,o,a){const l=re();return sr(l,fo(),o)&&function Wi(i,o,a,l,d,p,_,b){const E=Or(o,a);let A,T=o.inputs;!b&&null!=T&&(A=T[l])?(tv(i,a,A,l,d),ss(o)&&function FR(i,o){const a=ir(o,i);16&a[et]||(a[et]|=64)}(a,o.index)):3&o.type&&(l=function yI(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,o.value||"",l):d,p.setProperty(E,l,d))}(Vt(),Nt(),l,i,o,l[gt],a,!1),XI}function Nc(i,o,a,l,d){const _=d?"class":"style";tv(i,a,o.inputs[_],_,l)}function fv(i,o,a){return fe(i,o,a,!1),fv}function pr(i,o){return fe(i,o,null,!0),pr}function lu(i){!function tn(i,o,a,l){const d=Vt(),p=fs(2);d.firstUpdatePass&&pv(d,null,p,l);const _=re();if(a!==Tt&&sr(_,p,a)){const b=d.data[br()];if(EC(b,l)&&!mi(d,p)){let E=l?b.classesWithoutHost:b.stylesWithoutHost;null!==E&&(a=eo(E,a||"")),Nc(d,b,_,a,l)}else!function ix(i,o,a,l,d,p,_,b){d===Tt&&(d=Wt);let E=0,T=0,A=0<d.length?d[0]:null,x=0<p.length?p[0]:null;for(;null!==A||null!==x;){const N=E<d.length?d[E+1]:void 0,L=T<p.length?p[T+1]:void 0;let me,K=null;A===x?(E+=2,T+=2,N!==L&&(K=x,me=L)):null===x||null!==A&&A<x?(E+=2,K=A):(T+=2,K=x,me=L),null!==K&&yC(i,o,a,l,K,me,_,b),A=E<d.length?d[E]:null,x=T<p.length?p[T]:null}}(d,b,_,_[gt],_[p+1],_[p+1]=function wr(i,o,a){if(null==a||""===a)return Wt;const l=[],d=Ss(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)i(l,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&i(l,p,d[p]);else"string"==typeof d&&o(l,d);return l}(i,o,a),l,p)}}(rx,Ns,i,!0)}function Ns(i,o){for(let a=function hv(i){return function vC(i){Kn.key=0,Kn.keyEnd=0,Kn.value=0,Kn.valueEnd=0,Kn.textEnd=i.length}(i),QI(i,kc(i,0,Kn.textEnd))}(o);a>=0;a=QI(o,a))Vr(i,Wp(o),!0)}function fe(i,o,a,l){const d=re(),p=Vt(),_=fs(2);p.firstUpdatePass&&pv(p,i,_,l),o!==Tt&&sr(d,_,o)&&yC(p,p.data[br()],d,d[gt],i,d[_+1]=function IC(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=kn(Ss(i)))),i}(o,a),l,_)}function mi(i,o){return o>=i.expandoStartIndex}function pv(i,o,a,l){const d=i.data;if(null===d[a+1]){const p=d[br()],_=mi(i,a);EC(p,l)&&null===o&&!_&&(o=!1),o=function Ve(i,o,a,l){const d=function xf(i){const o=at.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=ge(a=Z(null,i,o,a,l),o.attrs,l),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Z(d,i,o,a,l),null===p){let E=function Ze(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ea(l))return i[Br(l)]}(i,o,l);void 0!==E&&Array.isArray(E)&&(E=Z(null,i,o,E[1],l),E=ge(E,o.attrs,l),function nx(i,o,a,l){i[Br(a?o.classBindings:o.styleBindings)]=l}(i,o,l,E))}else p=function xe(i,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=ge(l,i[p].hostAttrs,a);return ge(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function mC(i,o,a,l,d,p){let _=p?o.classBindings:o.styleBindings,b=Br(_),E=Ea(_);i[l]=a;let A,T=!1;if(Array.isArray(a)?(A=a[1],(null===A||Lo(a,A)>0)&&(T=!0)):A=a,d)if(0!==E){const N=Br(i[b+1]);i[l+1]=dv(N,b),0!==N&&(i[N+1]=Co(i[N+1],l)),i[b+1]=function dn(i,o){return 131071&i|o<<17}(i[b+1],l)}else i[l+1]=dv(b,0),0!==b&&(i[b+1]=Co(i[b+1],l)),b=l;else i[l+1]=dv(E,0),0===b?b=l:i[E+1]=Co(i[E+1],l),E=l;T&&(i[l+1]=YI(i[l+1])),Yi(i,A,l,!0),Yi(i,A,l,!1),function wa(i,o,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Lo(p,o)>=0&&(a[l+1]=Gp(a[l+1]))}(o,A,i,l,p),_=dv(b,E),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,l)}}function Z(i,o,a,l,d){let p=null;const _=a.directiveEnd;let b=a.directiveStylingLast;for(-1===b?b=a.directiveStart:b++;b<_&&(p=o[b],l=ge(l,p.hostAttrs,d),p!==i);)b++;return null!==i&&(a.directiveStylingLast=b),l}function ge(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Vr(i,_,!!a||o[++p]))}return void 0===i?null:i}function rx(i,o,a){const l=String(o);""!==l&&!l.includes(" ")&&Vr(i,l,a)}function yC(i,o,a,l,d,p,_,b){if(!(3&o.type))return;const E=i.data,T=E[b+1],A=function pC(i){return 1==(1&i)}(T)?bC(E,o,a,d,Ea(T),_):void 0;gv(A)||(gv(p)||function KI(i){return 2==(2&i)}(T)&&(p=bC(E,null,a,d,b,_)),function XS(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let p=-1===l.indexOf("-")?void 0:h_.DashCase;null==d?i.removeStyle(a,l,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=h_.Important),i.setStyle(a,l,d,p))}}(l,_,rd(br(),a),d,p))}function bC(i,o,a,l,d,p){const _=null===o;let b;for(;d>0;){const E=i[d],T=Array.isArray(E),A=T?E[1]:E,x=null===A;let N=a[d+1];N===Tt&&(N=x?Wt:void 0);let L=x?qf(N,l):A===l?N:void 0;if(T&&!gv(L)&&(L=qf(E,l)),gv(L)&&(b=L,_))return b;const K=i[d+1];d=_?Br(K):Ea(K)}if(null!==o){let E=p?o.residualClasses:o.residualStyles;null!=E&&(b=qf(E,l))}return b}function gv(i){return void 0!==i}function EC(i,o){return 0!=(i.flags&(o?8:16))}let PC=()=>null;function oh(i,o){return PC(i,o)}class hx{destroy(o){}updateValue(o,a){}swap(o,a){const l=Math.min(o,a),d=Math.max(o,a),p=this.detach(d);if(d-l>1){const _=this.detach(l);this.attach(l,p),this.attach(d,_)}else this.attach(l,p)}move(o,a){this.attach(a,this.detach(o))}}function iE(i,o,a,l,d){return i===a&&Object.is(o,l)?1:Object.is(d(i,o),d(a,l))?-1:0}function oE(i,o,a,l){return!(void 0===o||!o.has(l)||(i.attach(a,o.get(l)),o.delete(l),0))}function kC(i,o,a,l,d){if(oE(i,o,l,a(l,d)))i.updateValue(l,d);else{const p=i.create(l,d);i.attach(l,p)}}function NC(i,o,a,l){const d=new Set;for(let p=o;p<=a;p++)d.add(l(p,i.at(p)));return d}class OC{constructor(){this.kvMap=new Map,this._vMap=void 0}has(o){return this.kvMap.has(o)}delete(o){if(!this.has(o))return!1;const a=this.kvMap.get(o);return void 0!==this._vMap&&this._vMap.has(a)?(this.kvMap.set(o,this._vMap.get(a)),this._vMap.delete(a)):this.kvMap.delete(o),!0}get(o){return this.kvMap.get(o)}set(o,a){if(this.kvMap.has(o)){let l=this.kvMap.get(o);void 0===this._vMap&&(this._vMap=new Map);const d=this._vMap;for(;d.has(l);)l=d.get(l);d.set(l,a)}else this.kvMap.set(o,a)}forEach(o){for(let[a,l]of this.kvMap)if(o(l,a),void 0!==this._vMap){const d=this._vMap;for(;d.has(l);)l=d.get(l),o(l,a)}}}function ng(i,o,a,l){const d=o.tView,b=Ip(i,d,a,4096&i[et]?4096:16,null,o,null,null,null,l?.injector??null,l?.dehydratedView??null);b[rs]=i[o.index];const T=i[lo];return null!==T&&(b[lo]=T.createEmbeddedView(d)),Vp(d,b,a),b}function FC(i,o){const a=Fn+o;if(a<i.length)return i[a]}function sh(i,o){return!o||null===o.firstChild||u_(i)}function ah(i,o,a,l=!0){const d=o[Ie];if(function ZS(i,o,a,l){const d=Fn+l,p=a.length;l>0&&(a[d-1][Di]=o),l<p-Fn?(o[Di]=a[d],Dl(a,Fn+l,o)):(a.push(o),o[Di]=null),o[wn]=a;const _=o[rs];null!==_&&a!==_&&function KS(i,o){const a=i[os];o[Tn]!==o[wn][wn][Tn]&&(i[et]|=fl.HasTransplantedViews),null===a?i[os]=[o]:a.push(o)}(_,o);const b=o[lo];null!==b&&b.insertView(i),ml(o),o[et]|=128}(d,o,i,a),l){const _=Vb(a,i),b=o[gt],E=Vd(b,i[ui]);null!==E&&function qS(i,o,a,l,d,p){l[Rn]=d,l[vr]=o,E_(i,l,a,1,d,p)}(d,i[vr],b,o,E,_)}const p=o[co];null!==p&&null!==p.firstChild&&(p.firstChild=null)}function sE(i,o){const a=up(i,o);return void 0!==a&&v_(a[Ie],a),a}let rg=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=LC}return i})();function LC(){return Aa(on(),re())}const px=rg,yv=class extends px{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return ql(this._hostTNode,this._hostLView)}get injector(){return new en(this._hostTNode,this._hostLView)}get parentInjector(){const o=fd(this._hostTNode,this._hostLView);if(We(o)){const a=aa(o,this._hostLView),l=Lr(o);return new en(a[Ie].data[l+8],a)}return new en(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Tr(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Fn}createEmbeddedView(o,a,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const _=oh(this._lContainer,o.ssrId),b=o.createEmbeddedViewImpl(a||{},p,_);return this.insertImpl(b,d,sh(this._hostTNode,_)),b}createComponent(o,a,l,d,p){const _=o&&!function vo(i){return"function"==typeof i}(o);let b;if(_)b=a;else{const K=a||{};b=K.index,l=K.injector,d=K.projectableNodes,p=K.environmentInjector||K.ngModuleRef}const E=_?o:new Bp(xt(o)),T=l||this.parentInjector;if(!p&&null==E.ngModule){const me=(_?T:this.parentInjector).get(Gr,null);me&&(p=me)}const A=xt(E.componentType??{}),x=oh(this._lContainer,A?.id??null),L=E.create(T,d,x?.firstChild??null,p);return this.insertImpl(L.hostView,b,sh(this._hostTNode,x)),L}insert(o,a){return this.insertImpl(o,a,!0)}insertImpl(o,a,l){const d=o._lView;if(function S0(i){return yr(i[wn])}(d)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const E=d[wn],T=new yv(E,E[vr],E[wn]);T.detach(T.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;return ah(_,d,p,l),o.attachToViewContainerRef(),Dl(bv(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Tr(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=up(this._lContainer,a);l&&(Al(bv(this._lContainer),a),v_(l[Ie],l))}detach(o){const a=this._adjustIndex(o,-1),l=up(this._lContainer,a);return l&&null!=Al(bv(this._lContainer),a)?new Xd(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function Tr(i){return i[8]}function bv(i){return i[8]||(i[8]=[])}function Aa(i,o){let a;const l=o[i.index];return yr(l)?a=l:(a=HT(l,o,null,i),o[i.index]=a,ev(o,a)),bn(a,o,i,l),new yv(a,i,o)}let bn=function hn(i,o,a,l){if(i[ui])return;let d;d=8&a.type?Cn(l):function VC(i,o){const a=i[gt],l=a.createComment(""),d=Or(o,i);return Hl(a,Vd(a,d),l,function K0(i,o){return i.nextSibling(o)}(a,d),!1),l}(o,a),i[ui]=d},ch=()=>!1;function uh(i,o,a,l,d,p,_,b){const E=re(),T=Vt(),A=i+st,x=T.firstCreatePass?function BC(i,o,a,l,d,p,_,b,E){const T=o.consts,A=Zl(o,i,4,_||null,Po(T,b));bI(o,a,A,Po(T,E)),sn(o,A);const x=A.tView=fI(2,A,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T,null);return null!==o.queries&&(o.queries.template(o,A),x.queries=o.queries.embeddedTView(A)),A}(A,T,E,o,a,l,d,p,_):T.data[A];ho(x,!1);const N=gr(T,E,x,i);oc()&&b_(T,E,N,x),ri(N,E);const L=HT(N,E,N,x);return E[A]=L,ev(E,L),function jr(i,o,a){return ch(i,o,a)}(L,x,E),mf(x)&&wp(T,E,x),null!=_&&Y_(E,x,b),uh}let gr=function jC(i,o,a,l){return Fr(!0),o[gt].createComment("")};function Os(i,o,a){Xl("NgControlFlow");const l=re(),d=fo(),p=Fs(l,st+i);if(sr(l,d,o)){const b=ye(null);try{if(sE(p,0),-1!==o){const E=Vs(l[Ie],st+o),T=oh(p,E.tView.ssrId);ah(p,ng(l,E,a,{dehydratedView:T}),0,sh(E,T))}}finally{ye(b)}}else{const b=FC(p,0);void 0!==b&&(b[ot]=a)}}class Iv{constructor(o,a,l){this.lContainer=o,this.$implicit=a,this.$index=l}get $count(){return this.lContainer.length-Fn}}function dh(i,o){return o}class gx{constructor(o,a,l){this.hasEmptyBlock=o,this.trackByFn=a,this.liveCollection=l}}function Sa(i,o,a,l,d,p,_,b,E,T,A){Xl("NgControlFlow");const x=void 0!==E,N=re(),L=b?_.bind(N[Tn][ot]):_,K=new gx(x,L);N[st+i]=K,uh(i+1,o,a,l,d,p),x&&uh(i+2,E,T,A)}class Vc extends hx{constructor(o,a,l){super(),this.lContainer=o,this.hostLView=a,this.templateTNode=l,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Fn}at(o){return this.getLView(o)[ot].$implicit}attach(o,a){const l=a[co];this.needsIndexUpdate||=o!==this.length,ah(this.lContainer,a,o,sh(this.templateTNode,l))}detach(o){return this.needsIndexUpdate||=o!==this.length-1,function Ls(i,o){return up(i,o)}(this.lContainer,o)}create(o,a){const l=oh(this.lContainer,this.templateTNode.tView.ssrId);return ng(this.hostLView,this.templateTNode,new Iv(this.lContainer,a,o),{dehydratedView:l})}destroy(o){v_(o[Ie],o)}updateValue(o,a){this.getLView(o)[ot].$implicit=a}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let o=0;o<this.length;o++)this.getLView(o)[ot].$index=o}getLView(o){return function og(i,o){return FC(i,o)}(this.lContainer,o)}}function ig(i){const o=ye(null),a=br();try{const l=re(),d=l[Ie],p=l[a];if(void 0===p.liveCollection){const b=a+1,E=Fs(l,b),T=Vs(d,b);p.liveCollection=new Vc(E,l,T)}else p.liveCollection.reset();const _=p.liveCollection;if(function fx(i,o,a){let l,d,p=0,_=i.length-1;if(Array.isArray(o)){let b=o.length-1;for(;p<=_&&p<=b;){const E=i.at(p),T=o[p],A=iE(p,E,p,T,a);if(0!==A){A<0&&i.updateValue(p,T),p++;continue}const x=i.at(_),N=o[b],L=iE(_,x,b,N,a);if(0!==L){L<0&&i.updateValue(_,N),_--,b--;continue}const K=a(p,E),me=a(_,x),Te=a(p,T);if(Object.is(Te,me)){const He=a(b,N);Object.is(He,K)?(i.swap(p,_),i.updateValue(_,N),b--,_--):i.move(_,p),i.updateValue(p,T),p++}else if(l??=new OC,d??=NC(i,p,_,a),oE(i,l,p,Te))i.updateValue(p,T),p++,_++;else if(d.has(Te))l.set(K,i.detach(p)),_--;else{const He=i.create(p,o[p]);i.attach(p,He),p++,_++}}for(;p<=b;)kC(i,l,a,p,o[p]),p++}else if(null!=o){const b=o[Symbol.iterator]();let E=b.next();for(;!E.done&&p<=_;){const T=i.at(p),A=E.value,x=iE(p,T,p,A,a);if(0!==x)x<0&&i.updateValue(p,A),p++,E=b.next();else{l??=new OC,d??=NC(i,p,_,a);const N=a(p,A);if(oE(i,l,p,N))i.updateValue(p,A),p++,_++,E=b.next();else if(d.has(N)){const L=a(p,T);l.set(L,i.detach(p)),_--}else i.attach(p,i.create(p,A)),p++,_++,E=b.next()}}for(;!E.done;)kC(i,l,a,i.length,E.value),E=b.next()}for(;p<=_;)i.destroy(i.detach(_--));l?.forEach(b=>{i.destroy(b)})}(_,i,p.trackByFn),_.updateIndexes(),p.hasEmptyBlock){const b=fo(),E=0===_.length;if(sr(l,b,E)){const T=a+2,A=Fs(l,T);if(E){const x=Vs(d,T),N=oh(A,x.tView.ssrId);ah(A,ng(l,x,void 0,{dehydratedView:N}),0,sh(x,N))}else sE(A,0)}}}finally{ye(o)}}function Fs(i,o){return i[o]}function Vs(i,o){return id(i,o)}function pg(i,o,a,l){const d=re(),p=Vt(),_=st+i,b=d[gt],E=p.firstCreatePass?function yE(i,o,a,l,d,p){const _=o.consts,E=Zl(o,i,2,l,Po(_,d));return bI(o,a,E,Po(_,p)),null!==E.attrs&&Up(E,E.attrs,!1),null!==E.mergedAttrs&&Up(E,E.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,E),E}(_,p,d,o,a,l):p.data[_],T=mg(p,d,E,b,o,i);d[_]=T;const A=mf(E);return ho(E,!0),X0(b,T,E),32!=(32&E.flags)&&oc()&&b_(p,d,T,E),0===function ad(){return at.lFrame.elementDepthCount}()&&ri(T,d),function NS(){at.lFrame.elementDepthCount++}(),A&&(wp(p,d,E),Ep(p,E,d)),null!==l&&Y_(d,E),pg}function gg(){let i=on();ic()?_l():(i=i.parent,ho(i,!1));const o=i;(function Ri(i){return at.skipHydrationRootTNode===i})(o)&&function cd(){at.skipHydrationRootTNode=null}(),function ds(){at.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&(sn(a,i),Im(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Lf(i){return 0!=(8&i.flags)}(o)&&Nc(a,o,re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function lb(i){return 0!=(16&i.flags)}(o)&&Nc(a,o,re(),o.stylesWithoutHost,!1),gg}function xv(i,o,a,l){return pg(i,o,a,l),gg(),xv}let mg=(i,o,a,l,d,p)=>(Fr(!0),m_(l,d,function El(){return at.lFrame.currentNamespace}()));function ka(i,o,a){const l=re(),d=Vt(),p=i+st,_=d.firstCreatePass?function iD(i,o,a,l,d){const p=o.consts,_=Po(p,l),b=Zl(o,i,8,"ng-container",_);return null!==_&&Up(b,_,!0),bI(o,a,b,Po(p,d)),null!==o.queries&&o.queries.elementStart(o,b),b}(p,d,l,o,a):d.data[p];ho(_,!0);const b=Hc(d,l,_,i);return l[p]=b,oc()&&b_(d,l,b,_),ri(b,l),mf(_)&&(wp(d,l,_),Ep(d,_,l)),null!=a&&Y_(l,_),ka}function Bs(){let i=on();const o=Vt();return ic()?_l():(i=i.parent,ho(i,!1)),o.firstCreatePass&&(sn(o,i),Im(i)&&o.queries.elementEnd(i)),Bs}let Hc=(i,o,a,l)=>(Fr(!0),Ob(o[gt],""));function IE(){return re()}const yu=void 0;var Bn=["en",[["a","p"],["AM","PM"],yu],[["AM","PM"],yu,yu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yu,"{1} 'at' {0}",yu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ex(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Na={};function Mv(i){const o=function Oa(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=sD(o);if(a)return a;const l=o.split("-")[0];if(a=sD(l),a)return a;if("en"===l)return Bn;throw new De(701,!1)}function Ch(i){return Mv(i)[qo.PluralCase]}function sD(i){return i in Na||(Na[i]=nr.ng&&nr.ng.common&&nr.ng.common.locales&&nr.ng.common.locales[i]),Na[i]}var qo=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(qo||{});const bu="en-US";let Pv=bu;function LE(i){return!!i&&"function"==typeof i.then}function FD(i){return!!i&&"function"==typeof i.subscribe}function Cu(i,o,a,l){const d=re(),p=Vt(),_=on();return function VE(i,o,a,l,d,p,_){const b=mf(l),T=i.firstCreatePass&&Sp(i),A=o[ot],x=TI(o);let N=!0;if(3&l.type||_){const me=Or(l,o),Te=_?_(me):me,He=x.length,pe=_?Ht=>_(Cn(Ht[l.index])):l.index;let Et=null;if(!_&&b&&(Et=function Wc(i,o,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===l){const b=o[Js],E=d[p+2];return b.length>E?b[E]:null}"string"==typeof _&&(p+=2)}return null}(i,o,d,l.index)),null!==Et)(Et.__ngLastListenerFn__||Et).__ngNextListenerFn__=p,Et.__ngLastListenerFn__=p,N=!1;else{p=BE(l,o,A,p,!1);const Ht=a.listen(Te,d,p);x.push(p,Ht),T&&T.push(d,pe,He,He+1)}}else p=BE(l,o,A,p,!1);const L=l.outputs;let K;if(N&&null!==L&&(K=L[d])){const me=K.length;if(me)for(let Te=0;Te<me;Te+=2){const Kt=o[K[Te]][K[Te+1]].subscribe(p),Yr=x.length;x.push(p,Kt),T&&T.push(d,l.index,Yr,-(Yr+1))}}}(p,d,d[gt],_,i,o,l),Cu}function UE(i,o,a,l){try{return xo(6,o,a),!1!==a(l)}catch(d){return Ac(i,d),!1}finally{xo(7,o,a)}}function BE(i,o,a,l,d){return function p(_){if(_===Function)return l;ba(i.componentOffset>-1?ir(i.index,o):o);let E=UE(o,a,l,_),T=p.__ngNextListenerFn__;for(;T;)E=UE(o,a,T,_)&&E,T=T.__ngNextListenerFn__;return d&&!1===E&&_.preventDefault(),E}}function LD(i=1){return function Bm(i){return(at.lFrame.contextLView=function Nm(i,o){for(;i>0;)o=o[ec],i--;return o}(i,at.lFrame.contextLView))[ot]}(i)}function jE(i,o){let a=null;const l=function qy(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(!(1&a))return o[a+1]}return null}(i);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===l?lf(i,p,!0):Zy(l,p))return d}else a=d}return a}function Fv(i){const o=re()[Tn][vr];if(!o.projection){const l=o.projection=function Hi(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(i?i.length:1,null),d=l.slice();let p=o.child;for(;null!==p;){const _=i?jE(p,i):0;null!==_&&(d[_]?d[_].projectionNext=p:l[_]=p,d[_]=p),p=p.next}}}function HE(i,o=0,a){const l=re(),d=Vt(),p=Zl(d,st+i,16,null,a||null);null===p.projection&&(p.projection=o),_l(),(!l[co]||ra())&&32!=(32&p.flags)&&function w_(i,o,a){J0(o[gt],0,o,a,Fb(i,a,o),Y0(a.parent||o[vr],a,o))}(d,l,p)}function Au(i){return function Mo(i,o){return i[o]}(function Lm(){return at.lFrame.contextLView}(),st+i)}function qD(i,o=""){const a=re(),l=Vt(),d=i+st,p=l.firstCreatePass?Zl(l,d,1,o,null):l.data[d],_=KE(l,a,p,o,i);a[d]=_,oc()&&b_(l,a,_,p),ho(p,!1)}let KE=(i,o,a,l,d)=>(Fr(!0),function g_(i,o){return i.createText(o)}(o[gt],l));function Hv(i){return $v("",i,""),Hv}function $v(i,o,a){const l=re(),d=function iu(i,o,a,l){return sr(i,fo(),a)?o+it(a)+l:Tt}(l,i,o,a);return d!==Tt&&jn(l,br(),d),$v}function zv(i,o,a,l,d){const p=re(),_=function Mc(i,o,a,l,d,p){const b=ks(i,hs(),a,d);return fs(2),b?o+it(a)+l+it(d)+p:Tt}(p,i,o,a,l,d);return _!==Tt&&jn(p,br(),_),zv}function YE(i,o,a,l,d,p,_){const b=re(),E=function Pc(i,o,a,l,d,p,_,b){const T=uv(i,hs(),a,d,_);return fs(3),T?o+it(a)+l+it(d)+p+it(_)+b:Tt}(b,i,o,a,l,d,p,_);return E!==Tt&&jn(b,br(),E),YE}function ew(i,o,a,l,d){if(i=Fe(i),Array.isArray(i))for(let p=0;p<i.length;p++)ew(i[p],o,a,l,d);else{const p=Vt(),_=re(),b=on();let E=ga(i)?i:Fe(i.provide);const T=zi(i),A=1048575&b.providerIndexes,x=b.directiveStart,N=b.providerIndexes>>20;if(ga(i)||!i.multi){const L=new Tl(T,d,Dc),K=_r(E,o,d?A:A+N,x);-1===K?(pd(ca(b,_),p,E),tw(p,i,o.length),o.push(E),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(L),_.push(L)):(a[K]=L,_[K]=L)}else{const L=_r(E,o,A+N,x),K=_r(E,o,A,A+N),Te=K>=0&&a[K];if(d&&!Te||!d&&!(L>=0&&a[L])){pd(ca(b,_),p,E);const He=function Ux(i,o,a,l,d){const p=new Tl(i,a,Dc);return p.multi=[],p.index=o,p.componentProviders=0,Gv(p,d,l&&!a),p}(d?Vx:Lx,a.length,d,l,T);!d&&Te&&(a[K].providerFactory=He),tw(p,i,o.length,0),o.push(E),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(He),_.push(He)}else tw(p,i,L>-1?L:K,Gv(a[d?K:L],T,!d&&l));!d&&l&&Te&&a[K].componentProviders++}}}function tw(i,o,a,l){const d=ga(o),p=function bb(i){return!!i.useClass}(o);if(d||p){const E=(p?Fe(o.useClass):o).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const A=T.indexOf(a);-1===A?T.push(a,[l,E]):T[A+1].push(l,E)}else T.push(a,E)}}}function Gv(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function _r(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function Lx(i,o,a,l){return nw(this.multi,[])}function Vx(i,o,a,l){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,b=_s(a,a[Ie],this.providerFactory.index,l);p=b.slice(0,_),nw(d,p);for(let E=_;E<b.length;E++)p.push(b[E])}else p=[],nw(d,p);return p}function nw(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function qv(i,o=[]){return a=>{a.providersResolver=(l,d)=>function ZD(i,o,a){const l=Vt();if(l.firstCreatePass){const d=Si(i);ew(a,l.data,l.blueprint,d,!0),ew(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class Ru{}class xg{}function Wv(i,o){return new Zv(i,o??null,[])}class Zv extends Ru{constructor(o,a,l){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new UI(this);const d=kr(o);this._bootstrapComponents=R(d.bootstrap),this._r3Injector=Ds(o,a,[{provide:Ru,useValue:this},{provide:wc,useValue:this.componentFactoryResolver},...l],kn(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Mg extends xg{constructor(o){super(),this.moduleType=o}create(o){return new Zv(this.moduleType,o,[])}}class Fh extends Ru{constructor(o){super(),this.componentFactoryResolver=new UI(this),this.instance=null;const a=new ma([...o.providers,{provide:Ru,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],o.parent||Id(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Pg(i,o,a=null){return new Fh({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let iw=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const l=Ml(0,a.type),d=l.length>0?Pg([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=j({token:i,providedIn:"environment",factory:()=>new i(lr(Gr))})}return i})();function Kv(i){Xl("NgStandalone"),i.getStandaloneInjector=o=>o.get(iw).getOrCreateStandaloneInjector(i)}function kg(i,o,a,l){return function ty(i,o,a,l,d,p){const _=o+a;return sr(i,_,d)?wo(i,_+1,p?l.call(p,d):l(d)):Qc(i,_+1)}(re(),ur(),i,o,a,l)}function Uh(i,o,a,l,d){return function oA(i,o,a,l,d,p,_){const b=o+a;return ks(i,b,d,p)?wo(i,b+2,_?l.call(_,d,p):l(d,p)):Qc(i,b+2)}(re(),ur(),i,o,a,l,d)}function Ng(i,o,a,l,d,p){return function sA(i,o,a,l,d,p,_,b){const E=o+a;return uv(i,E,d,p,_)?wo(i,E+3,b?l.call(b,d,p,_):l(d,p,_)):Qc(i,E+3)}(re(),ur(),i,o,a,l,d,p)}function Qc(i,o){const a=i[o];return a===Tt?void 0:a}function Zx(){return this._results[Symbol.iterator]()}class iy{static#e=Symbol.iterator;get changes(){return this._changes??=new Zi}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const a=iy.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Zx)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){this.dirty=!1;const l=function ni(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function fb(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(this._results,l,a))&&(this._results=l,this.length=l.length,this.last=l[this.length-1],this.first=l[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}let Va=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=gw}return i})();const pw=Va,Bh=class extends pw{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,l){const d=ng(this._declarationLView,this._declarationTContainer,o,{injector:a,dehydratedView:l});return new Xd(d)}};function gw(){return Mu(on(),re())}function Mu(i,o){return 4&i.type?new Bh(o,i,ql(i,o)):null}class Pu{constructor(o){this.queryList=o,this.matches=null}clone(){return new Pu(this.queryList)}setDirty(){this.queryList.setDirty()}}class Og{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new Og(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==gA(o,a).matches&&this.queries[a].setDirty()}}class mw{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Fg{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Fg(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Lg{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Lg(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,Jc(a,p)),this.matchTNodeWithReadOption(o,a,No(a,o,p,!1,!1))}else l===Va?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,No(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===mp||d===rg||d===Va&&4&a.type)this.addMatch(a.index,-2);else{const p=No(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Jc(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Kx(i,o,a,l){return-1===a?function dA(i,o){return 11&i.type?ql(i,o):4&i.type?Mu(i,o):null}(o,i):-2===a?function _w(i,o,a){return a===mp?ql(o,i):a===Va?Mu(o,i):a===rg?Aa(o,i):void 0}(i,o,l):_s(i,i[Ie],a,o)}function hA(i,o,a,l){const d=o[lo].queries[l];if(null===d.matches){const p=i.data,_=a.matches,b=[];for(let E=0;E<_.length;E+=2){const T=_[E];b.push(T<0?null:Kx(o,p[T],_[E+1],a.metadata.read))}d.matches=b}return d.matches}function Vg(i,o,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=hA(i,o,d,a);for(let b=0;b<p.length;b+=2){const E=p[b];if(E>0)l.push(_[b/2]);else{const T=p[b+1],A=o[-E];for(let x=Fn;x<A.length;x++){const N=A[x];N[rs]===N[wn]&&Vg(N[Ie],N,T,l)}if(null!==A[os]){const x=A[os];for(let N=0;N<x.length;N++){const L=x[N];Vg(L[Ie],L,T,l)}}}}}return l}function fA(i){const o=re(),a=Vt(),l=oa();yl(l+1);const d=gA(a,l);if(i.dirty&&function Cf(i){return 4==(4&i[et])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Vg(a,o,l,[]):hA(a,o,d,l);i.reset(p,Jb),i.notifyOnChanges()}return!0}return!1}function oy(i,o,a){const l=Vt();l.firstCreatePass&&(ay(l,new mw(i,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),ku(l,re(),o)}function Ug(i,o,a,l){const d=Vt();if(d.firstCreatePass){const p=on();ay(d,new mw(o,a,l),p.index),function Yx(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}ku(d,re(),a)}function sy(){return function pA(i,o){return i[lo].queries[o].queryList}(re(),oa())}function ku(i,o,a){const l=new iy(4==(4&a));(function _I(i,o,a,l){const d=TI(o);d.push(a),i.firstCreatePass&&Sp(i).push(l,d.length-1)})(i,o,l,l.destroy),null===o[lo]&&(o[lo]=new Og),o[lo].queries.push(new Pu(l))}function ay(i,o,a){null===i.queries&&(i.queries=new Fg),i.queries.track(new Lg(o,a))}function gA(i,o){return i.queries.getByIndex(o)}class gy{constructor(o){this.full=o;const a=o.split(".");this.major=a[0],this.minor=a[1],this.patch=a.slice(2).join(".")}}const Sw=new gy("17.0.9");let Fu=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();class PA{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Rw=(()=>{class i{compileModuleSync(a){return new Mg(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=R(kr(a).declarations).reduce((_,b)=>{const E=xt(b);return E&&_.push(new Bp(E)),_},[]);return new PA(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ao=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Rr.X(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const BA=new Lt(""),Gg=new Lt("");let vy,jw=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vy||(function Hw(i){vy=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}static#e=this.\u0275fac=function(l){return new(l||i)(lr(Vn),lr(_y),lr(Gg))};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac})}return i})(),_y=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return vy?.findTestabilityInTree(this,a,l)??null}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const yy=new Lt("Application Initializer");let qg=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l}),this.appInits=Ft(yy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const p=d();if(LE(p))a.push(p);else if(FD(p)){const _=new Promise((b,E)=>{p.subscribe({complete:b,error:E})});a.push(_)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Gh=new Lt("appBootstrapListener");function Vu(i,o){return Array.isArray(o)?o.reduce(Vu,i):{...i,...o}}let Ba=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ft(Wl),this.afterRenderEffectManager=Ft(Lp),this.componentTypes=[],this.components=[],this.isStable=Ft(Ao).hasPendingTasks.pipe((0,pn.U)(a=>!a)),this._injector=Ft(Gr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Qb;if(!this._injector.get(qg).done)throw!d&&li(a),new De(405,!1);let _;_=d?a:this._injector.get(wc).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const b=function jA(i){return i.isBoundToModule}(_)?void 0:this._injector.get(Ru),T=_.create(hi.NULL,[],l||_.selector,b),A=T.location.nativeElement,x=T.injector.get(BA,null);return x?.registerApplication(A),T.onDestroy(()=>{this.detachView(T.hostView),by(this.components,T),x?.unregisterApplication(A)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{try{this.afterRenderEffectManager.execute()}catch(a){this.internalErrorHandler(a)}this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;by(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(Gh,[]);[...this._bootstrapListeners,...l].forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>by(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new De(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function by(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let vM=(()=>{class i{constructor(){this.zone=Ft(Vn),this.applicationRef=Ft(Ba)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function bM(){const i=Ft(Vn),o=Ft(Cc);return a=>i.runOutsideAngular(()=>o.handleError(a))}let EM=(()=>{class i{constructor(){this.subscription=new Sr.w0,this.initialized=!1,this.zone=Ft(Vn),this.pendingTasks=Ft(Ao)}initialize(){if(this.initialized)return;this.initialized=!0;let a=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(a=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Vn.assertNotInAngularZone(),queueMicrotask(()=>{null!==a&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(a),a=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Vn.assertInAngularZone(),a??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Wg=new Lt("LocaleId",{providedIn:"root",factory:()=>Ft(Wg,Rt.Optional|Rt.SkipSelf)||function wM(){return typeof $localize<"u"&&$localize.locale||bu}()}),WA=new Lt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),Ey=new Lt("PlatformDestroyListeners");let Zg=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function Sc(i="zone.js",o){return"noop"===i?new eC:"zone.js"===i?new Vn(o):i}(l?.ngZone,function qA(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const p=function rw(i,o,a){return new Zv(i,o,a)}(a.moduleType,this.injector,function GA(i){return[{provide:Vn,useFactory:i},{provide:Is,multi:!0,useFactory:()=>{const o=Ft(vM,{optional:!0});return()=>o.initialize()}},{provide:Is,multi:!0,useFactory:()=>{const o=Ft(EM);return()=>{o.initialize()}}},{provide:Wl,useFactory:bM}]}(()=>d)),_=p.injector.get(Cc,null);return d.runOutsideAngular(()=>{const b=d.onError.subscribe({next:E=>{_.handleError(E)}});p.onDestroy(()=>{by(this._modules,p),b.unsubscribe()})}),function zw(i,o,a){try{const l=a();return LE(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(_,d,()=>{const b=p.injector.get(qg);return b.runInitializers(),b.donePromise.then(()=>(function lD(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(Pv=i.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Wg,bu)||bu),this._moduleDoBootstrap(p),p))})})}bootstrapModule(a,l=[]){const d=Vu({},l);return function $w(i,o,a){const l=new Mg(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(Ba);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new De(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Ey,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||i)(lr(hi))};static#t=this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Ct=null;const Gw=new Lt("AllowMultipleToken");function qh(i,o,a=[]){const l=`Platform: ${o}`,d=new Lt(l);return(p=[])=>{let _=In();if(!_||_.injector.get(Gw,!1)){const b=[...a,...p,{provide:d,useValue:!0}];i?i(b):function YA(i){if(Ct&&!Ct.get(Gw,!1))throw new De(400,!1);(function Lu(){!function Ga(i){Dr=i}(()=>{throw new De(600,!1)})})(),Ct=i;const o=i.get(Zg);(function JA(i){i.get(np,null)?.forEach(a=>a())})(i)}(function qw(i=[],o){return hi.create({name:o,providers:[{provide:kl,useValue:"platform"},{provide:Ey,useValue:new Set([()=>Ct=null])},...i]})}(b,l))}return function Kr(i){const o=In();if(!o)throw new De(401,!1);return o}()}}function In(){return Ct?.get(Zg)??null}function wy(){return!1}const $a=qh(null,"core",[]);let KP=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(l){return new(l||i)(lr(Ba))};static#t=this.\u0275mod=ei({type:i});static#n=this.\u0275inj=Le({})}return i})();function pS(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function $M(i,o=NaN){return isNaN(parseFloat(i))||isNaN(Number(i))?o:Number(i)}function lk(i){const o=xt(i);if(!o)return null;const a=new Bp(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},106:(nn,Ke,Q)=>{Q.d(Ke,{Z:()=>dt});var h=Q(58),de=Q(537),H=Q(534),ve=Q(879);class Re{constructor($e,nt){this._delegate=$e,this.firebase=nt,(0,H._addComponent)($e,new de.wA("app-compat",()=>this,"PUBLIC")),this.container=$e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled($e){this._delegate.automaticDataCollectionEnabled=$e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise($e=>{this._delegate.checkDestroyed(),$e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,H.deleteApp)(this._delegate)))}_getService($e,nt=H._DEFAULT_ENTRY_NAME){var Qt;this._delegate.checkDestroyed();const An=this._delegate.container.getProvider($e);return!An.isInitialized()&&"EXPLICIT"===(null===(Qt=An.getComponent())||void 0===Qt?void 0:Qt.instantiationMode)&&An.initialize(),An.getImmediate({identifier:nt})}_removeServiceInstance($e,nt=H._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider($e).clearInstance(nt)}_addComponent($e){(0,H._addComponent)(this._delegate,$e)}_addOrOverwriteComponent($e){(0,H._addOrOverwriteComponent)(this._delegate,$e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const lt=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function Be(){const St=function Mt(St){const $e={},nt={__esModule:!0,initializeApp:function ht(qe,be={}){const O=H.initializeApp(qe,be);if((0,h.r3)($e,O.name))return $e[O.name];const Se=new St(O,nt);return $e[O.name]=Se,Se},app:An,registerVersion:H.registerVersion,setLogLevel:H.setLogLevel,onLog:H.onLog,apps:null,SDK_VERSION:H.SDK_VERSION,INTERNAL:{registerComponent:function Xe(qe){const be=qe.name,O=be.replace("-compat","");if(H._registerComponent(qe)&&"PUBLIC"===qe.type){const Se=(yt=An())=>{if("function"!=typeof yt[O])throw lt.create("invalid-app-argument",{appName:be});return yt[O]()};void 0!==qe.serviceProps&&(0,h.ZB)(Se,qe.serviceProps),nt[O]=Se,St.prototype[O]=function(...yt){return this._getService.bind(this,be).apply(this,qe.multipleInstances?yt:[])}}return"PUBLIC"===qe.type?nt[O]:null},removeApp:function Qt(qe){delete $e[qe]},useAsService:function Gt(qe,be){return"serverAuth"===be?null:be},modularAPIs:H}};function An(qe){if(!(0,h.r3)($e,qe=qe||H._DEFAULT_ENTRY_NAME))throw lt.create("no-app",{appName:qe});return $e[qe]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Ce(){return Object.keys($e).map(qe=>$e[qe])}}),An.App=St,nt}(Re);return St.INTERNAL=Object.assign(Object.assign({},St.INTERNAL),{createFirebaseNamespace:Be,extendNamespace:function $e(nt){(0,h.ZB)(St,nt)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),St}(),B=new ve.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const St=self.firebase.SDK_VERSION;St&&St.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const dt=G;!function Pe(St){(0,H.registerVersion)("@firebase/app-compat","0.2.25",St)}()},534:(nn,Ke,Q)=>{Q.r(Ke),Q.d(Ke,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>no,_DEFAULT_ENTRY_NAME:()=>Fe,_addComponent:()=>ai,_addOrOverwriteComponent:()=>De,_apps:()=>ft,_clearComponents:()=>Jt,_components:()=>Ko,_getProvider:()=>Nn,_registerComponent:()=>xr,_removeServiceInstance:()=>Yo,deleteApp:()=>ro,getApp:()=>Ot,getApps:()=>ol,initializeApp:()=>it,onLog:()=>Jo,registerVersion:()=>io,setLogLevel:()=>Wa});var h=Q(861),de=Q(537),H=Q(879),ve=Q(58);const Re=(X,j)=>j.some(_e=>X instanceof _e);let ye,lt;const G=new WeakMap,B=new WeakMap,te=new WeakMap,ze=new WeakMap,Pe=new WeakMap;let $e={get(X,j,_e){if(X instanceof IDBTransaction){if("done"===j)return B.get(X);if("objectStoreNames"===j)return X.objectStoreNames||te.get(X);if("store"===j)return _e.objectStoreNames[1]?void 0:_e.objectStore(_e.objectStoreNames[0])}return ht(X[j])},set:(X,j,_e)=>(X[j]=_e,!0),has:(X,j)=>X instanceof IDBTransaction&&("done"===j||"store"===j)||j in X};function An(X){return"function"==typeof X?function Qt(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Be(){return lt||(lt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...j){return X.apply(Ce(this),j),ht(G.get(this))}:function(...j){return ht(X.apply(Ce(this),j))}:function(j,..._e){const Le=X.call(Ce(this),j,..._e);return te.set(Le,j.sort?j.sort():[j]),ht(Le)}}(X):(X instanceof IDBTransaction&&function St(X){if(B.has(X))return;const j=new Promise((_e,Le)=>{const ct=()=>{X.removeEventListener("complete",kt),X.removeEventListener("error",Bt),X.removeEventListener("abort",Bt)},kt=()=>{_e(),ct()},Bt=()=>{Le(X.error||new DOMException("AbortError","AbortError")),ct()};X.addEventListener("complete",kt),X.addEventListener("error",Bt),X.addEventListener("abort",Bt)});B.set(X,j)}(X),Re(X,function Mt(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,$e):X)}function ht(X){if(X instanceof IDBRequest)return function dt(X){const j=new Promise((_e,Le)=>{const ct=()=>{X.removeEventListener("success",kt),X.removeEventListener("error",Bt)},kt=()=>{_e(ht(X.result)),ct()},Bt=()=>{Le(X.error),ct()};X.addEventListener("success",kt),X.addEventListener("error",Bt)});return j.then(_e=>{_e instanceof IDBCursor&&G.set(_e,X)}).catch(()=>{}),Pe.set(j,X),j}(X);if(ze.has(X))return ze.get(X);const j=An(X);return j!==X&&(ze.set(X,j),Pe.set(j,X)),j}const Ce=X=>Pe.get(X),qe=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],O=new Map;function Se(X,j){if(!(X instanceof IDBDatabase)||j in X||"string"!=typeof j)return;if(O.get(j))return O.get(j);const _e=j.replace(/FromIndex$/,""),Le=j!==_e,ct=be.includes(_e);if(!(_e in(Le?IDBIndex:IDBObjectStore).prototype)||!ct&&!qe.includes(_e))return;const kt=function(){var Bt=(0,h.Z)(function*(Gn,...gn){const Ui=this.transaction(Gn,ct?"readwrite":"readonly");let Xo=Ui.store;return Le&&(Xo=Xo.index(gn.shift())),(yield Promise.all([Xo[_e](...gn),ct&&Ui.done]))[0]});return function(gn){return Bt.apply(this,arguments)}}();return O.set(j,kt),kt}!function nt(X){$e=X($e)}(X=>({...X,get:(j,_e,Le)=>Se(j,_e)||X.get(j,_e,Le),has:(j,_e)=>!!Se(j,_e)||X.has(j,_e)}));class yt{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map(_e=>{if(function Sn(X){const j=X.getComponent();return"VERSION"===j?.type}(_e)){const Le=_e.getImmediate();return`${Le.library}/${Le.version}`}return null}).filter(_e=>_e).join(" ")}}const Qr="@firebase/app",Ar=new H.Yd("@firebase/app"),Fe="[DEFAULT]",Pt={[Qr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ft=new Map,Ko=new Map;function ai(X,j){try{X.container.addComponent(j)}catch(_e){Ar.debug(`Component ${j.name} failed to register with FirebaseApp ${X.name}`,_e)}}function De(X,j){X.container.addOrOverwriteComponent(j)}function xr(X){const j=X.name;if(Ko.has(j))return Ar.debug(`There were multiple attempts to register component ${j}.`),!1;Ko.set(j,X);for(const _e of ft.values())ai(_e,X);return!0}function Nn(X,j){const _e=X.container.getProvider("heartbeat").getImmediate({optional:!0});return _e&&_e.triggerHeartbeat(),X.container.getProvider(j)}function Yo(X,j,_e=Fe){Nn(X,j).clearInstance(_e)}function Jt(){Ko.clear()}const pt=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mr{constructor(j,_e,Le){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},_e),this._name=_e.name,this._automaticDataCollectionEnabled=_e.automaticDataCollectionEnabled,this._container=Le,this.container.addComponent(new de.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw pt.create("app-deleted",{appName:this._name})}}const no="10.7.1";function it(X,j={}){let _e=X;"object"!=typeof j&&(j={name:j});const Le=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},j),ct=Le.name;if("string"!=typeof ct||!ct)throw pt.create("bad-app-name",{appName:String(ct)});if(_e||(_e=(0,ve.aH)()),!_e)throw pt.create("no-options");const kt=ft.get(ct);if(kt){if((0,ve.vZ)(_e,kt.options)&&(0,ve.vZ)(Le,kt.config))return kt;throw pt.create("duplicate-app",{appName:ct})}const Bt=new de.H0(ct);for(const gn of Ko.values())Bt.addComponent(gn);const Gn=new Mr(_e,Le,Bt);return ft.set(ct,Gn),Gn}function Ot(X=Fe){const j=ft.get(X);if(!j&&X===Fe&&(0,ve.aH)())return it();if(!j)throw pt.create("no-app",{appName:X});return j}function ol(){return Array.from(ft.values())}function ro(X){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,h.Z)(function*(X){const j=X.name;ft.has(j)&&(ft.delete(j),yield Promise.all(X.container.getProviders().map(_e=>_e.delete())),X.isDeleted=!0)})).apply(this,arguments)}function io(X,j,_e){var Le;let ct=null!==(Le=Pt[X])&&void 0!==Le?Le:X;_e&&(ct+=`-${_e}`);const kt=ct.match(/\s|\//),Bt=j.match(/\s|\//);if(kt||Bt){const Gn=[`Unable to register library "${ct}" with version "${j}":`];return kt&&Gn.push(`library name "${ct}" contains illegal characters (whitespace or "/")`),kt&&Bt&&Gn.push("and"),Bt&&Gn.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void Ar.warn(Gn.join(" "))}xr(new de.wA(`${ct}-version`,()=>({library:ct,version:j}),"VERSION"))}function Jo(X,j){if(null!==X&&"function"!=typeof X)throw pt.create("invalid-log-argument");(0,H.Am)(X,j)}function Wa(X){(0,H.Ub)(X)}const cr="firebase-heartbeat-database",zu=1,F="firebase-heartbeat-store";let k=null;function U(){return k||(k=function Xe(X,j,{blocked:_e,upgrade:Le,blocking:ct,terminated:kt}={}){const Bt=indexedDB.open(X,j),Gn=ht(Bt);return Le&&Bt.addEventListener("upgradeneeded",gn=>{Le(ht(Bt.result),gn.oldVersion,gn.newVersion,ht(Bt.transaction),gn)}),_e&&Bt.addEventListener("blocked",gn=>_e(gn.oldVersion,gn.newVersion,gn)),Gn.then(gn=>{kt&&gn.addEventListener("close",()=>kt()),ct&&gn.addEventListener("versionchange",Ui=>ct(Ui.oldVersion,Ui.newVersion,Ui))}).catch(()=>{}),Gn}(cr,zu,{upgrade:(X,j)=>{0===j&&X.createObjectStore(F)}}).catch(X=>{throw pt.create("idb-open",{originalErrorMessage:X.message})})),k}function W(){return(W=(0,h.Z)(function*(X){try{return yield(yield U()).transaction(F).objectStore(F).get(wt(X))}catch(j){if(j instanceof ve.ZR)Ar.warn(j.message);else{const _e=pt.create("idb-get",{originalErrorMessage:j?.message});Ar.warn(_e.message)}}})).apply(this,arguments)}function Oe(X,j){return ut.apply(this,arguments)}function ut(){return(ut=(0,h.Z)(function*(X,j){try{const Le=(yield U()).transaction(F,"readwrite");yield Le.objectStore(F).put(j,wt(X)),yield Le.done}catch(_e){if(_e instanceof ve.ZR)Ar.warn(_e.message);else{const Le=pt.create("idb-set",{originalErrorMessage:_e?.message});Ar.warn(Le.message)}}})).apply(this,arguments)}function wt(X){return`${X.name}!${X.options.appId}`}class tr{constructor(j){this.container=j,this._heartbeatsCache=null;const _e=this.container.getProvider("app").getImmediate();this._storage=new oo(_e),this._heartbeatsCachePromise=this._storage.read().then(Le=>(this._heartbeatsCache=Le,Le))}triggerHeartbeat(){var j=this;return(0,h.Z)(function*(){var _e,Le;const kt=j.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Bt=tt();if((null!=(null===(_e=j._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)||(j._heartbeatsCache=yield j._heartbeatsCachePromise,null!=(null===(Le=j._heartbeatsCache)||void 0===Le?void 0:Le.heartbeats)))&&j._heartbeatsCache.lastSentHeartbeatDate!==Bt&&!j._heartbeatsCache.heartbeats.some(Gn=>Gn.date===Bt))return j._heartbeatsCache.heartbeats.push({date:Bt,agent:kt}),j._heartbeatsCache.heartbeats=j._heartbeatsCache.heartbeats.filter(Gn=>{const gn=new Date(Gn.date).valueOf();return Date.now()-gn<=2592e6}),j._storage.overwrite(j._heartbeatsCache)})()}getHeartbeatsHeader(){var j=this;return(0,h.Z)(function*(){var _e;if(null===j._heartbeatsCache&&(yield j._heartbeatsCachePromise),null==(null===(_e=j._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)||0===j._heartbeatsCache.heartbeats.length)return"";const Le=tt(),{heartbeatsToSend:ct,unsentEntries:kt}=function Ge(X,j=1024){const _e=[];let Le=X.slice();for(const ct of X){const kt=_e.find(Bt=>Bt.agent===ct.agent);if(kt){if(kt.dates.push(ct.date),Ws(_e)>j){kt.dates.pop();break}}else if(_e.push({agent:ct.agent,dates:[ct.date]}),Ws(_e)>j){_e.pop();break}Le=Le.slice(1)}return{heartbeatsToSend:_e,unsentEntries:Le}}(j._heartbeatsCache.heartbeats),Bt=(0,ve.L)(JSON.stringify({version:2,heartbeats:ct}));return j._heartbeatsCache.lastSentHeartbeatDate=Le,kt.length>0?(j._heartbeatsCache.heartbeats=kt,yield j._storage.overwrite(j._heartbeatsCache)):(j._heartbeatsCache.heartbeats=[],j._storage.overwrite(j._heartbeatsCache)),Bt})()}}function tt(){return(new Date).toISOString().substring(0,10)}class oo{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var j=this;return(0,h.Z)(function*(){if(yield j._canUseIndexedDBPromise){const Le=yield function ce(X){return W.apply(this,arguments)}(j.app);return Le?.heartbeats?Le:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(j){var _e=this;return(0,h.Z)(function*(){var Le;if(yield _e._canUseIndexedDBPromise){const kt=yield _e.read();return Oe(_e.app,{lastSentHeartbeatDate:null!==(Le=j.lastSentHeartbeatDate)&&void 0!==Le?Le:kt.lastSentHeartbeatDate,heartbeats:j.heartbeats})}})()}add(j){var _e=this;return(0,h.Z)(function*(){var Le;if(yield _e._canUseIndexedDBPromise){const kt=yield _e.read();return Oe(_e.app,{lastSentHeartbeatDate:null!==(Le=j.lastSentHeartbeatDate)&&void 0!==Le?Le:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...j.heartbeats]})}})()}}function Ws(X){return(0,ve.L)(JSON.stringify({version:2,heartbeats:X})).length}!function Qh(X){xr(new de.wA("platform-logger",j=>new yt(j),"PRIVATE")),xr(new de.wA("heartbeat",j=>new tr(j),"PRIVATE")),io(Qr,"0.9.25",X),io(Qr,"0.9.25","esm2017"),io("fire-js","")}("")},537:(nn,Ke,Q)=>{Q.d(Ke,{H0:()=>Mt,wA:()=>H});var h=Q(861),de=Q(58);class H{constructor(G,B,te){this.name=G,this.instanceFactory=B,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ve="[DEFAULT]";class Re{constructor(G,B){this.name=G,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const B=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(B)){const te=new de.BH;if(this.instancesDeferred.set(B,te),this.isInitialized(B)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:B});ze&&te.resolve(ze)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(G){var B;const te=this.normalizeInstanceIdentifier(G?.identifier),ze=null!==(B=G?.optional)&&void 0!==B&&B;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Pe){if(ze)return null;throw Pe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function lt(Be){return"EAGER"===Be.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[B,te]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(B);try{const Pe=this.getOrInitializeService({instanceIdentifier:ze});te.resolve(Pe)}catch{}}}}clearInstance(G=ve){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,h.Z)(function*(){const B=Array.from(G.instances.values());yield Promise.all([...B.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...B.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ve){return this.instances.has(G)}getOptions(G=ve){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:B={}}=G,te=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:te,options:B});for(const[Pe,dt]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Pe)&&dt.resolve(ze);return ze}onInit(G,B){var te;const ze=this.normalizeInstanceIdentifier(B),Pe=null!==(te=this.onInitCallbacks.get(ze))&&void 0!==te?te:new Set;Pe.add(G),this.onInitCallbacks.set(ze,Pe);const dt=this.instances.get(ze);return dt&&G(dt,ze),()=>{Pe.delete(G)}}invokeOnInitCallbacks(G,B){const te=this.onInitCallbacks.get(B);if(te)for(const ze of te)try{ze(G,B)}catch{}}getOrInitializeService({instanceIdentifier:G,options:B={}}){let te=this.instances.get(G);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(Be=G,Be===ve?void 0:Be),options:B}),this.instances.set(G,te),this.instancesOptions.set(G,B),this.invokeOnInitCallbacks(te,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,te)}catch{}var Be;return te||null}normalizeInstanceIdentifier(G=ve){return this.component?this.component.multipleInstances?G:ve:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Mt{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const B=this.getProvider(G.name);if(B.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);B.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const B=new Re(G,this);return this.providers.set(G,B),B}getProviders(){return Array.from(this.providers.values())}}},879:(nn,Ke,Q)=>{Q.d(Ke,{Am:()=>Be,Ub:()=>Mt,Yd:()=>lt,in:()=>de});const h=[];var de=function(G){return G[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",G}(de||{});const H={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},ve=de.INFO,Re={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},ye=(G,B,...te)=>{if(B<G.logLevel)return;const ze=(new Date).toISOString(),Pe=Re[B];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Pe](`[${ze}]  ${G.name}:`,...te)};class lt{constructor(B){this.name=B,this._logLevel=ve,this._logHandler=ye,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in de))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?H[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...B),this._logHandler(this,de.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...B),this._logHandler(this,de.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,de.INFO,...B),this._logHandler(this,de.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,de.WARN,...B),this._logHandler(this,de.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...B),this._logHandler(this,de.ERROR,...B)}}function Mt(G){h.forEach(B=>{B.setLogLevel(G)})}function Be(G,B){for(const te of h){let ze=null;B&&B.level&&(ze=H[B.level]),te.userLogHandler=null===G?null:(Pe,dt,...St)=>{const $e=St.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");dt>=(ze??Pe.logLevel)&&G({level:de[dt].toLowerCase(),message:$e,args:St,type:Pe.name})}}}},230:(nn,Ke,Q)=>{Q.r(Ke);var h=Q(861),de=Q(106),H=Q(58),ve=Q(534),Re=Q(879),ye=Q(582),lt=Q(537);const Be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const dt=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},St=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},$e=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qt=new Re.Yd("@firebase/auth");function ht(v,...f){Qt.logLevel<=Re.in.ERROR&&Qt.error(`Auth (${ve.SDK_VERSION}): ${v}`,...f)}function Ce(v,...f){throw be(v,...f)}function Xe(v,...f){return be(v,...f)}function Gt(v,f,g){const I=Object.assign(Object.assign({},St()),{[f]:g});return new H.LL("auth","Firebase",I).create(f,{appName:v.name})}function qe(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ce(v,"argument-error"),Gt(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function be(v,...f){if("string"!=typeof v){const g=f[0],I=[...f.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(g,...I)}return $e.create(v,...f)}function O(v,f,...g){if(!v)throw be(f,...g)}function Se(v){const f="INTERNAL ASSERTION FAILED: "+v;throw ht(f),new Error(f)}function yt(v,f){v||Se(f)}function Sn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Qr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Li{constructor(f,g){this.shortDelay=f,this.longDelay=g,yt(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function Ar(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qr()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Y(v,f){yt(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class J{static initialize(f,g,I){this.fetchImpl=f,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const se={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oe=new Li(3e4,6e4);function ae(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function he(v,f,g,I){return rt.apply(this,arguments)}function rt(){return(rt=(0,h.Z)(function*(v,f,g,I,C={}){return Ut(v,C,(0,h.Z)(function*(){let R={},P={};I&&("GET"===f?P=I:R={body:JSON.stringify(I)});const z=(0,H.xO)(Object.assign({key:v.config.apiKey},P)).slice(1),ie=yield v._getAdditionalHeaders();return ie["Content-Type"]="application/json",v.languageCode&&(ie["X-Firebase-Locale"]=v.languageCode),J.fetch()(Pn(v,v.config.apiHost,g,z),Object.assign({method:f,headers:ie,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Ut(v,f,g){return er.apply(this,arguments)}function er(){return(er=(0,h.Z)(function*(v,f,g){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},se),f);try{const C=new Sr(v),R=yield Promise.race([g(),C.promise]);C.clearNetworkTimeout();const P=yield R.json();if("needConfirmation"in P)throw Rr(v,"account-exists-with-different-credential",P);if(R.ok&&!("errorMessage"in P))return P;{const z=R.ok?P.errorMessage:P.error.message,[ie,we]=z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ie)throw Rr(v,"credential-already-in-use",P);if("EMAIL_EXISTS"===ie)throw Rr(v,"email-already-in-use",P);if("USER_DISABLED"===ie)throw Rr(v,"user-disabled",P);const Ne=I[ie]||ie.toLowerCase().replace(/[_\s]+/g,"-");if(we)throw Gt(v,Ne,we);Ce(v,Ne)}}catch(C){if(C instanceof H.ZR)throw C;Ce(v,"network-request-failed",{message:String(C)})}})).apply(this,arguments)}function Qe(v,f,g,I){return qt.apply(this,arguments)}function qt(){return(qt=(0,h.Z)(function*(v,f,g,I,C={}){const R=yield he(v,f,g,I,C);return"mfaPendingCredential"in R&&Ce(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Pn(v,f,g,I){const C=`${f}${g}?${I}`;return v.config.emulator?Y(v.config,C):`${v.config.apiScheme}://${C}`}function En(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Sr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(Xe(this.auth,"network-request-failed")),oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rr(v,f,g){const I={appName:v.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const C=Xe(v,f,I);return C.customData._tokenResponse=g,C}function pn(v){return void 0!==v&&void 0!==v.getResponse}function bt(v){return void 0!==v&&void 0!==v.enterprise}class Hr{constructor(f){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=f.recaptchaEnforcementState}getProviderEnforcementState(f){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const g of this.recaptchaEnforcementState)if(g.provider&&g.provider===f)return En(g.enforcementState);return null}isProviderEnabled(f){return"ENFORCE"===this.getProviderEnforcementState(f)||"AUDIT"===this.getProviderEnforcementState(f)}}function eo(){return(eo=(0,h.Z)(function*(v){return(yield he(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qa(v,f){return to.apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(v,f){return he(v,"GET","/v2/recaptchaConfig",ae(v,f))})).apply(this,arguments)}function Fe(){return(Fe=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function De(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Yo(){return(Yo=(0,h.Z)(function*(v,f=!1){const g=(0,H.m9)(v),I=yield g.getIdToken(f),C=Qo(I);O(C&&C.exp&&C.auth_time&&C.iat,g.auth,"internal-error");const R="object"==typeof C.firebase?C.firebase:void 0,P=R?.sign_in_provider;return{claims:C,token:I,authTime:De(Jt(C.auth_time)),issuedAtTime:De(Jt(C.iat)),expirationTime:De(Jt(C.exp)),signInProvider:P||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function Jt(v){return 1e3*Number(v)}function Qo(v){const[f,g,I]=v.split(".");if(void 0===f||void 0===g||void 0===I)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,H.tV)(g);return C?JSON.parse(C):(ht("Failed to decode base64 JWT payload"),null)}catch(C){return ht("Caught error parsing JWT payload as JSON",C?.toString()),null}}function Mr(v,f){return no.apply(this,arguments)}function no(){return(no=(0,h.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(I){throw I instanceof H.ZR&&function it({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class Ot{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const C=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),I)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&f.schedule(!0))}f.schedule()})()}}class ol{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=De(this.lastLoginAt),this.creationTime=De(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ro(v){return Vi.apply(this,arguments)}function Vi(){return Vi=(0,h.Z)(function*(v){var f;const g=v.auth,I=yield v.getIdToken(),C=yield Mr(v,function Ko(v,f){return ai.apply(this,arguments)}(g,{idToken:I}));O(C?.users.length,g,"internal-error");const R=C.users[0];v._notifyReloadListener(R);const P=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?function cr(v){return v.map(f=>{var{providerId:g}=f,I=(0,ye._T)(f,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(R.providerUserInfo):[],z=function Wa(v,f){return[...v.filter(I=>!f.some(C=>C.providerId===I.providerId)),...f]}(v.providerData,P),Ne=!!v.isAnonymous&&!(v.email&&R.passwordHash||z?.length),je={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:z,metadata:new ol(R.createdAt,R.lastLoginAt),isAnonymous:Ne};Object.assign(v,je)}),Vi.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(v){const f=(0,H.m9)(v);yield ro(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function F(){return(F=(0,h.Z)(function*(v,f){const g=yield Ut(v,{},(0,h.Z)(function*(){const I=(0,H.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:C,apiKey:R}=v.config,P=Pn(v,C,"/v1/token",`key=${R}`),z=yield v._getAdditionalHeaders();return z["Content-Type"]="application/x-www-form-urlencoded",J.fetch()(P,{method:"POST",headers:z,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}function U(){return(U=(0,h.Z)(function*(v,f){return he(v,"POST","/v2/accounts:revokeToken",ae(v,f))})).apply(this,arguments)}class ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){O(f.idToken,"internal-error"),O(typeof f.idToken<"u","internal-error"),O(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function pt(v){const f=Qo(v);return O(f,"internal-error"),O(typeof f.exp<"u","internal-error"),O(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var I=this;return(0,h.Z)(function*(){return O(!I.accessToken||I.refreshToken,f,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(f,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var I=this;return(0,h.Z)(function*(){const{accessToken:C,refreshToken:R,expiresIn:P}=yield function zu(v,f){return F.apply(this,arguments)}(f,g);I.updateTokensAndExpiration(C,R,Number(P))})()}updateTokensAndExpiration(f,g,I){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(f,g){const{refreshToken:I,accessToken:C,expirationTime:R}=g,P=new ce;return I&&(O("string"==typeof I,"internal-error",{appName:f}),P.refreshToken=I),C&&(O("string"==typeof C,"internal-error",{appName:f}),P.accessToken=C),R&&(O("number"==typeof R,"internal-error",{appName:f}),P.expirationTime=R),P}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new ce,this.toJSON())}_performRefresh(){return Se("not implemented")}}function W(v,f){O("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class Oe{constructor(f){var{uid:g,auth:I,stsTokenManager:C}=f,R=(0,ye._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ot(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ol(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const I=yield Mr(g,g.stsTokenManager.getToken(g.auth,f));return O(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(f){return function Nn(v){return Yo.apply(this,arguments)}(this,f)}reload(){return function io(v){return Jo.apply(this,arguments)}(this)}_assign(f){this!==f&&(O(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const g=new Oe(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(f){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var I=this;return(0,h.Z)(function*(){let C=!1;f.idToken&&f.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(f),C=!0),g&&(yield ro(I)),yield I.auth._persistUserIfCurrent(I),C&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield Mr(f,function Zo(v,f){return Fe.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var I,C,R,P,z,ie,we,Ne;const je=null!==(I=g.displayName)&&void 0!==I?I:void 0,un=null!==(C=g.email)&&void 0!==C?C:void 0,fi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,xd=null!==(P=g.photoURL)&&void 0!==P?P:void 0,o_=null!==(z=g.tenantId)&&void 0!==z?z:void 0,Cb=null!==(ie=g._redirectEventId)&&void 0!==ie?ie:void 0,s_=null!==(we=g.createdAt)&&void 0!==we?we:void 0,L0=null!==(Ne=g.lastLoginAt)&&void 0!==Ne?Ne:void 0,{uid:op,emailVerified:Db,isAnonymous:Md,providerData:a_,stsTokenManager:sp}=g;O(op&&sp,f,"internal-error");const ki=ce.fromJSON(this.name,sp);O("string"==typeof op,f,"internal-error"),W(je,f.name),W(un,f.name),O("boolean"==typeof Db,f,"internal-error"),O("boolean"==typeof Md,f,"internal-error"),W(fi,f.name),W(xd,f.name),W(o_,f.name),W(Cb,f.name),W(s_,f.name),W(L0,f.name);const c_=new Oe({uid:op,auth:f,email:un,emailVerified:Db,displayName:je,isAnonymous:Md,photoURL:xd,phoneNumber:fi,tenantId:o_,stsTokenManager:ki,createdAt:s_,lastLoginAt:L0});return a_&&Array.isArray(a_)&&(c_.providerData=a_.map(Pd=>Object.assign({},Pd))),Cb&&(c_._redirectEventId=Cb),c_}static _fromIdTokenResponse(f,g,I=!1){return(0,h.Z)(function*(){const C=new ce;C.updateFromServerResponse(g);const R=new Oe({uid:g.localId,auth:f,stsTokenManager:C,isAnonymous:I});return yield ro(R),R})()}}const ut=new Map;function wt(v){yt(v instanceof Function,"Expected a class definition");let f=ut.get(v);return f?(yt(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,ut.set(v,f),f)}const On=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,I){var C=this;return(0,h.Z)(function*(){C.storage[g]=I})()}_get(g){var I=this;return(0,h.Z)(function*(){const C=I.storage[g];return void 0===C?null:C})()}_remove(g){var I=this;return(0,h.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return v.type="NONE",v})();function tr(v,f,g){return`firebase:${v}:${f}:${g}`}class tt{constructor(f,g,I){this.persistence=f,this.auth=g,this.userKey=I;const{config:C,name:R}=this.auth;this.fullUserKey=tr(this.userKey,C.apiKey,R),this.fullPersistenceKey=tr("persistence",C.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Oe._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,I="authUser"){return(0,h.Z)(function*(){if(!g.length)return new tt(wt(On),f,I);const C=(yield Promise.all(g.map(function(){var we=(0,h.Z)(function*(Ne){if(yield Ne._isAvailable())return Ne});return function(Ne){return we.apply(this,arguments)}}()))).filter(we=>we);let R=C[0]||wt(On);const P=tr(I,f.config.apiKey,f.name);let z=null;for(const we of g)try{const Ne=yield we._get(P);if(Ne){const je=Oe._fromJSON(f,Ne);we!==R&&(z=je),R=we;break}}catch{}const ie=C.filter(we=>we._shouldAllowMigration);return R._shouldAllowMigration&&ie.length?(R=ie[0],z&&(yield R._set(P,z.toJSON())),yield Promise.all(g.map(function(){var we=(0,h.Z)(function*(Ne){if(Ne!==R)try{yield Ne._remove(P)}catch{}});return function(Ne){return we.apply(this,arguments)}}())),new tt(R,f,I)):new tt(R,f,I)})()}}function Ge(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(X(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(oo(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(_e(f))return"Blackberry";if(Le(f))return"Webos";if(Ws(f))return"Safari";if((f.includes("chrome/")||Qh(f))&&!f.includes("edge/"))return"Chrome";if(j(f))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function oo(v=(0,H.z$)()){return/firefox\//i.test(v)}function Ws(v=(0,H.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Qh(v=(0,H.z$)()){return/crios\//i.test(v)}function X(v=(0,H.z$)()){return/iemobile/i.test(v)}function j(v=(0,H.z$)()){return/android/i.test(v)}function _e(v=(0,H.z$)()){return/blackberry/i.test(v)}function Le(v=(0,H.z$)()){return/webos/i.test(v)}function ct(v=(0,H.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function gn(v=(0,H.z$)()){return ct(v)||j(v)||Le(v)||_e(v)||/windows phone/i.test(v)||X(v)}function Xo(v,f=[]){let g;switch(v){case"Browser":g=Ge((0,H.z$)());break;case"Worker":g=`${Ge((0,H.z$)())}-${v}`;break;default:g=v}const I=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ve.SDK_VERSION}/${I}`}class Gu{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const I=R=>new Promise((P,z)=>{try{P(f(R))}catch(ie){z(ie)}});I.onAbort=g,this.queue.push(I);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===f)return;const I=[];try{for(const C of g.queue)yield C(f),C.onAbort&&I.push(C.onAbort)}catch(C){I.reverse();for(const R of I)try{R()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:C?.message})}})()}}function Rt(){return(Rt=(0,h.Z)(function*(v,f={}){return he(v,"GET","/v2/passwordPolicy",ae(v,f))})).apply(this,arguments)}class Xh{constructor(f){var g,I,C,R;const P=f.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(g=P.minPasswordLength)&&void 0!==g?g:6,P.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=P.maxPasswordLength),void 0!==P.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=P.containsLowercaseCharacter),void 0!==P.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=P.containsUppercaseCharacter),void 0!==P.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=P.containsNumericCharacter),void 0!==P.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=P.containsNonAlphanumericCharacter),this.enforcementState=f.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(C=null===(I=f.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==C?C:"",this.forceUpgradeOnSignin=null!==(R=f.forceUpgradeOnSignin)&&void 0!==R&&R,this.schemaVersion=f.schemaVersion}validatePassword(f){var g,I,C,R,P,z;const ie={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(f,ie),this.validatePasswordCharacterOptions(f,ie),ie.isValid&&(ie.isValid=null===(g=ie.meetsMinPasswordLength)||void 0===g||g),ie.isValid&&(ie.isValid=null===(I=ie.meetsMaxPasswordLength)||void 0===I||I),ie.isValid&&(ie.isValid=null===(C=ie.containsLowercaseLetter)||void 0===C||C),ie.isValid&&(ie.isValid=null===(R=ie.containsUppercaseLetter)||void 0===R||R),ie.isValid&&(ie.isValid=null===(P=ie.containsNumericCharacter)||void 0===P||P),ie.isValid&&(ie.isValid=null===(z=ie.containsNonAlphanumericCharacter)||void 0===z||z),ie}validatePasswordLengthOptions(f,g){const I=this.customStrengthOptions.minPasswordLength,C=this.customStrengthOptions.maxPasswordLength;I&&(g.meetsMinPasswordLength=f.length>=I),C&&(g.meetsMaxPasswordLength=f.length<=C)}validatePasswordCharacterOptions(f,g){let I;this.updatePasswordCharacterOptionsStatuses(g,!1,!1,!1,!1);for(let C=0;C<f.length;C++)I=f.charAt(C),this.updatePasswordCharacterOptionsStatuses(g,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(f,g,I,C,R){this.customStrengthOptions.containsLowercaseLetter&&(f.containsLowercaseLetter||(f.containsLowercaseLetter=g)),this.customStrengthOptions.containsUppercaseLetter&&(f.containsUppercaseLetter||(f.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(f.containsNumericCharacter||(f.containsNumericCharacter=C)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(f.containsNonAlphanumericCharacter||(f.containsNonAlphanumericCharacter=R))}}class Jr{constructor(f,g,I,C){this.app=f,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=I,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mm(this),this.idTokenSubscription=new mm(this),this.beforeStateQueue=new Gu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(f,g){var I=this;return g&&(this._popupRedirectResolver=wt(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var C,R;if(!I._deleted&&(I.persistenceManager=yield tt.create(I,f),!I._deleted)){if(null!==(C=I._popupRedirectResolver)&&void 0!==C&&C._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(R=I.currentUser)||void 0===R?void 0:R.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var I;const C=yield g.assertedPersistence.getCurrentUser();let R=C,P=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const z=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,ie=R?._redirectEventId,we=yield g.tryRedirectSignIn(f);(!z||z===ie)&&we?.user&&(R=we.user,P=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(P)try{yield g.beforeStateQueue.runMiddleware(R)}catch(z){R=C,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(z))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return O(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield ro(f)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ga(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const I=f?(0,H.m9)(f):null;return I&&O(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(f,g=!1){var I=this;return(0,h.Z)(function*(){if(!I._deleted)return f&&O(I.tenantId===f.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(f)),I.queue((0,h.Z)(function*(){yield I.directlySetCurrentUser(f),I.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(wt(f))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(f){var g=this;return(0,h.Z)(function*(){g._getPasswordPolicyInternal()||(yield g._updatePasswordPolicy());const I=g._getPasswordPolicyInternal();return I.schemaVersion!==g.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(g._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(f)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var f=this;return(0,h.Z)(function*(){const g=yield function gm(v){return Rt.apply(this,arguments)}(f),I=new Xh(g);null===f.tenantId?f._projectPasswordPolicy=I:f._tenantPasswordPolicies[f.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new H.LL("auth","Firebase",f())}onAuthStateChanged(f,g,I){return this.registerStateListener(this.authStateSubscription,f,g,I)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,I){return this.registerStateListener(this.idTokenSubscription,f,g,I)}authStateReady(){return new Promise((f,g)=>{if(this.currentUser)f();else{const I=this.onAuthStateChanged(()=>{I(),f()},g)}})}revokeAccessToken(f){var g=this;return(0,h.Z)(function*(){if(g.currentUser){const I=yield g.currentUser.getIdToken(),C={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:f,idToken:I};null!=g.tenantId&&(C.tenantId=g.tenantId),yield function k(v,f){return U.apply(this,arguments)}(g,C)}})()}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var I=this;return(0,h.Z)(function*(){const C=yield I.getOrInitRedirectPersistenceManager(g);return null===f?C.removeCurrentUser():C.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const I=f&&wt(f)||g._popupRedirectResolver;O(I,g,"argument-error"),g.redirectPersistenceManager=yield tt.create(g,[wt(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var I,C;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===f?g._currentUser:(null===(C=g.redirectUser)||void 0===C?void 0:C._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,I,C){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g);let P=!1;const z=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(z,this,"internal-error"),z.then(()=>{P||R(this.currentUser)}),"function"==typeof g){const ie=f.addObserver(g,I,C);return()=>{P=!0,ie()}}{const ie=f.addObserver(g);return()=>{P=!0,ie()}}}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Xo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const I={"X-Client-Version":f.clientVersion};f.app.options.appId&&(I["X-Firebase-gmpid"]=f.app.options.appId);const C=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();C&&(I["X-Firebase-Client"]=C);const R=yield f._getAppCheckToken();return R&&(I["X-Firebase-AppCheck"]=R),I})()}_getAppCheckToken(){var f=this;return(0,h.Z)(function*(){var g;const I=yield null===(g=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return I?.error&&function An(v,...f){Qt.logLevel<=Re.in.WARN&&Qt.warn(`Auth (${ve.SDK_VERSION}): ${v}`,...f)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function rn(v){return(0,H.m9)(v)}class mm{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,H.ne)(g=>this.observer=g)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qu(v){return new Promise((f,g)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=f,I.onerror=C=>{const R=Xe("internal-error");R.customData=C,g(R)},I.type="text/javascript",I.charset="UTF-8",function nr(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(I)})}function Ly(v){return`__${v}${Math.floor(1e6*Math.random())}`}class al{constructor(f){this.type="recaptcha-enterprise",this.auth=rn(f)}verify(f="verify",g=!1){var I=this;return(0,h.Z)(function*(){function R(){return R=(0,h.Z)(function*(z){if(!g){if(null==z.tenantId&&null!=z._agentRecaptchaConfig)return z._agentRecaptchaConfig.siteKey;if(null!=z.tenantId&&void 0!==z._tenantRecaptchaConfigs[z.tenantId])return z._tenantRecaptchaConfigs[z.tenantId].siteKey}return new Promise(function(){var ie=(0,h.Z)(function*(we,Ne){qa(z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(je=>{if(void 0!==je.recaptchaKey){const un=new Hr(je);return null==z.tenantId?z._agentRecaptchaConfig=un:z._tenantRecaptchaConfigs[z.tenantId]=un,we(un.siteKey)}Ne(new Error("recaptcha Enterprise site key undefined"))}).catch(je=>{Ne(je)})});return function(we,Ne){return ie.apply(this,arguments)}}())}),R.apply(this,arguments)}function P(z,ie,we){const Ne=window.grecaptcha;bt(Ne)?Ne.enterprise.ready(()=>{Ne.enterprise.execute(z,{action:f}).then(je=>{ie(je)}).catch(()=>{ie("NO_RECAPTCHA")})}):we(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((z,ie)=>{(function C(z){return R.apply(this,arguments)})(I.auth).then(we=>{if(!g&&bt(window.grecaptcha))P(we,z,ie);else{if(typeof window>"u")return void ie(new Error("RecaptchaVerifier is only supported in browser"));qu("https://www.google.com/recaptcha/enterprise.js?render="+we).then(()=>{P(we,z,ie)}).catch(Ne=>{ie(Ne)})}}).catch(we=>{ie(we)})})})()}}function Wu(v,f,g){return tf.apply(this,arguments)}function tf(){return(tf=(0,h.Z)(function*(v,f,g,I=!1){const C=new al(v);let R;try{R=yield C.verify(g)}catch{R=yield C.verify(g,!0)}const P=Object.assign({},f);return Object.assign(P,I?{captchaResp:R}:{captchaResponse:R}),Object.assign(P,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(P,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),P})).apply(this,arguments)}function Za(v,f,g,I){return Vy.apply(this,arguments)}function Vy(){return Vy=(0,h.Z)(function*(v,f,g,I){var C;if(null!==(C=v._getRecaptchaConfig())&&void 0!==C&&C.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const R=yield Wu(v,f,g,"getOobCode"===g);return I(v,R)}return I(v,f).catch(function(){var R=(0,h.Z)(function*(P){if("auth/missing-recaptcha-token"===P.code){console.log(`${g} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const z=yield Wu(v,f,g,"getOobCode"===g);return I(v,z)}return Promise.reject(P)});return function(P){return R.apply(this,arguments)}}())}),Vy.apply(this,arguments)}function Xr(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function _m(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Ka{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Se("not implemented")}_getIdTokenResponse(f){return Se("not implemented")}_linkToIdToken(f,g){return Se("not implemented")}_getReauthenticationResolver(f){return Se("not implemented")}}function nf(v,f){return es.apply(this,arguments)}function es(){return(es=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:resetPassword",ae(v,f))})).apply(this,arguments)}function so(){return(so=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function $y(v,f){return lr.apply(this,arguments)}function lr(){return(lr=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:signUp",f)})).apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:update",ae(v,f))})).apply(this,arguments)}function Ku(v,f){return ll.apply(this,arguments)}function ll(){return(ll=(0,h.Z)(function*(v,f){return Qe(v,"POST","/v1/accounts:signInWithPassword",ae(v,f))})).apply(this,arguments)}function ts(v,f){return rf.apply(this,arguments)}function rf(){return(rf=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:sendOobCode",ae(v,f))})).apply(this,arguments)}function sf(){return(sf=(0,h.Z)(function*(v,f){return ts(v,f)})).apply(this,arguments)}function Ro(v,f){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,h.Z)(function*(v,f){return ts(v,f)})).apply(this,arguments)}function ns(v,f){return wi.apply(this,arguments)}function wi(){return(wi=(0,h.Z)(function*(v,f){return ts(v,f)})).apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(v,f){return ts(v,f)})).apply(this,arguments)}function af(){return(af=(0,h.Z)(function*(v,f){return Qe(v,"POST","/v1/accounts:signInWithEmailLink",ae(v,f))})).apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(v,f){return Qe(v,"POST","/v1/accounts:signInWithEmailLink",ae(v,f))})).apply(this,arguments)}class Ys extends Ka{constructor(f,g,I,C=null){super("password",I),this._email=f,this._password=g,this._tenantId=C}static _fromEmailAndPassword(f,g){return new Ys(f,g,"password")}static _fromEmailAndCode(f,g,I=null){return new Ys(f,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return Za(f,{returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ku);case"emailLink":return function ul(v,f){return af.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ce(f,"internal-error")}})()}_linkToIdToken(f,g){var I=this;return(0,h.Z)(function*(){switch(I.signInMethod){case"password":return Za(f,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$y);case"emailLink":return function Gy(v,f){return Ks.apply(this,arguments)}(f,{idToken:g,email:I._email,oobCode:I._password});default:Ce(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ao(v,f){return cf.apply(this,arguments)}function cf(){return(cf=(0,h.Z)(function*(v,f){return Qe(v,"POST","/v1/accounts:signInWithIdp",ae(v,f))})).apply(this,arguments)}class Bi extends Ka{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Bi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:C}=g,R=(0,ye._T)(g,["providerId","signInMethod"]);if(!I||!C)return null;const P=new Bi(I,C);return P.idToken=R.idToken||void 0,P.accessToken=R.accessToken||void 0,P.secret=R.secret,P.nonce=R.nonce,P.pendingToken=R.pendingToken||null,P}_getIdTokenResponse(f){return ao(f,this.buildRequest())}_linkToIdToken(f,g){const I=this.buildRequest();return I.idToken=g,ao(f,I)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,ao(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,H.xO)(g)}return f}}function Ti(){return(Ti=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:sendVerificationCode",ae(v,f))})).apply(this,arguments)}function lf(){return(lf=(0,h.Z)(function*(v,f){return Qe(v,"POST","/v1/accounts:signInWithPhoneNumber",ae(v,f))})).apply(this,arguments)}function uf(){return(uf=(0,h.Z)(function*(v,f){const g=yield Qe(v,"POST","/v1/accounts:signInWithPhoneNumber",ae(v,f));if(g.temporaryProof)throw Rr(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Wy={USER_NOT_FOUND:"user-not-found"};function Qu(){return(Qu=(0,h.Z)(function*(v,f){return Qe(v,"POST","/v1/accounts:signInWithPhoneNumber",ae(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Wy)})).apply(this,arguments)}class Qa extends Ka{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Qa({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Qa({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function E0(v,f){return lf.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function qy(v,f){return uf.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Zy(v,f){return Qu.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:I,verificationCode:C}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:I,code:C}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:I,phoneNumber:C,temporaryProof:R}=f;return I||g||C||R?new Qa({verificationId:g,verificationCode:I,phoneNumber:C,temporaryProof:R}):null}}class Ja{constructor(f){var g,I,C,R,P,z;const ie=(0,H.zd)((0,H.pd)(f)),we=null!==(g=ie.apiKey)&&void 0!==g?g:null,Ne=null!==(I=ie.oobCode)&&void 0!==I?I:null,je=function df(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=ie.mode)&&void 0!==C?C:null);O(we&&Ne&&je,"argument-error"),this.apiKey=we,this.operation=je,this.code=Ne,this.continueUrl=null!==(R=ie.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(P=ie.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(z=ie.tenantId)&&void 0!==z?z:null}static parseLink(f){const g=function w0(v){const f=(0,H.zd)((0,H.pd)(v)).link,g=f?(0,H.zd)((0,H.pd)(f)).deep_link_id:null,I=(0,H.zd)((0,H.pd)(v)).deep_link_id;return(I?(0,H.zd)((0,H.pd)(I)).link:null)||I||g||f||v}(f);try{return new Ja(g)}catch{return null}}}let hf=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,I){return Ys._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const C=Ja.parseLink(I);return O(C,"argument-error"),Ys._fromEmailAndCode(g,C.code,C.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ei{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Qs extends ei{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Xa extends Qs{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return O("providerId"in g&&"signInMethod"in g,"argument-error"),Bi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return O(f.idToken||f.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Xa.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Xa.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:C,pendingToken:R,nonce:P,providerId:z}=f;if(!I&&!C&&!g&&!R||!z)return null;try{return new Xa(z)._credential({idToken:g,accessToken:I,nonce:P,pendingToken:R})}catch{return null}}}let ff=(()=>{class v extends Qs{constructor(){super("facebook.com")}static credential(g){return Bi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),xt=(()=>{class v extends Qs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return Bi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:C}=g;if(!I&&!C)return null;try{return v.credential(I,C)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),rr=(()=>{class v extends Qs{constructor(){super("github.com")}static credential(g){return Bi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class li extends Ka{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return ao(f,this.buildRequest())}_linkToIdToken(f,g){const I=this.buildRequest();return I.idToken=g,ao(f,I)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,ao(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:C,pendingToken:R}=g;return I&&C&&R&&I===C?new li(I,R):null}static _create(f,g){return new li(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class dl extends ei{constructor(f){O(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return dl.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return dl.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=li.fromJSON(f);return O(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:I}=f;if(!g||!I)return null;try{return li._create(I,g)}catch{return null}}}let bm=(()=>{class v extends Qs{constructor(){super("twitter.com")}static credential(g,I){return Bi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:C}=g;if(!I||!C)return null;try{return v.credential(I,C)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Ju(v,f){return pf.apply(this,arguments)}function pf(){return(pf=(0,h.Z)(function*(v,f){return Qe(v,"POST","/v1/accounts:signUp",ae(v,f))})).apply(this,arguments)}class Ci{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,I,C=!1){return(0,h.Z)(function*(){const R=yield Oe._fromIdTokenResponse(f,I,C),P=Rn(I);return new Ci({user:R,providerId:P,_tokenResponse:I,operationType:g})})()}static _forOperation(f,g,I){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(I,!0);const C=Rn(I);return new Ci({user:f,providerId:C,_tokenResponse:I,operationType:g})})()}}function Rn(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function et(){return(et=(0,h.Z)(function*(v){var f;const g=rn(v);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Ci({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield Ju(g,{returnSecureToken:!0}),C=yield Ci._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser(C.user),C})).apply(this,arguments)}class wn extends H.ZR{constructor(f,g,I,C){var R;super(g.code,g.message),this.operationType=I,this.user=C,Object.setPrototypeOf(this,wn.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(f,g,I,C){return new wn(f,g,I,C)}}function Di(v,f,g,I){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?wn._fromErrorAndOperation(v,R,f,I):R})}function vr(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Js(){return Js=(0,h.Z)(function*(v,f){const g=(0,H.m9)(v);yield Ai(!0,g,f);const{providerUserInfo:I}=yield function Pt(v,f){return ft.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),C=vr(I||[]);return g.providerData=g.providerData.filter(R=>C.has(R.providerId)),C.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Js.apply(this,arguments)}function ot(v,f){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,h.Z)(function*(v,f,g=!1){const I=yield Mr(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return Ci._forOperation(v,"link",I)})).apply(this,arguments)}function Ai(v,f,g){return gt.apply(this,arguments)}function gt(){return(gt=(0,h.Z)(function*(v,f,g){yield ro(f);const C=!1===v?"provider-already-linked":"no-such-provider";O(vr(f.providerData).has(g)===v,f.auth,C)})).apply(this,arguments)}function hl(v,f){return gf.apply(this,arguments)}function gf(){return(gf=(0,h.Z)(function*(v,f,g=!1){const{auth:I}=v,C="reauthenticate";try{const R=yield Mr(v,Di(I,C,f,v),g);O(R.idToken,I,"internal-error");const P=Qo(R.idToken);O(P,I,"internal-error");const{sub:z}=P;return O(v.uid===z,I,"user-mismatch"),Ci._forOperation(v,C,R)}catch(R){throw"auth/user-not-found"===R?.code&&Ce(I,"user-mismatch"),R}})).apply(this,arguments)}function ec(v,f){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(v,f,g=!1){const I="signIn",C=yield Di(v,I,f),R=yield Ci._fromIdTokenResponse(v,I,C);return g||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function rs(v,f){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(v,f){return ec(rn(v),f)})).apply(this,arguments)}function lo(v,f){return tc.apply(this,arguments)}function tc(){return(tc=(0,h.Z)(function*(v,f){const g=(0,H.m9)(v);return yield Ai(!1,g,f.providerId),ot(g,f)})).apply(this,arguments)}function Xu(v,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(v,f){return hl((0,H.m9)(v),f)})).apply(this,arguments)}function ji(){return(ji=(0,h.Z)(function*(v,f){return Qe(v,"POST","/v1/accounts:signInWithCustomToken",ae(v,f))})).apply(this,arguments)}function td(){return td=(0,h.Z)(function*(v,f){const g=rn(v),I=yield function ed(v,f){return ji.apply(this,arguments)}(g,{token:f,returnSecureToken:!0}),C=yield Ci._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser(C.user),C}),td.apply(this,arguments)}class is{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?ui._fromServerResponse(f,g):"totpInfo"in g?ea._fromServerResponse(f,g):Ce(f,"internal-error")}}class ui extends is{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new ui(g)}}class ea extends is{constructor(f){super("totp",f)}static _fromServerResponse(f,g){return new ea(g)}}function os(v,f,g){var I;O((null===(I=g.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),O(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(O(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(O(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Fn(v){return fl.apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(v){const f=rn(v);f._getPasswordPolicyInternal()&&(yield f._updatePasswordPolicy())})).apply(this,arguments)}function yr(){return(yr=(0,h.Z)(function*(v,f,g){const I=rn(v),C={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};g&&os(I,C,g),yield Za(I,C,"getOobCode",Ro)})).apply(this,arguments)}function ss(){return ss=(0,h.Z)(function*(v,f,g){yield nf((0,H.m9)(v),{oobCode:f,newPassword:g}).catch(function(){var I=(0,h.Z)(function*(C){throw"auth/password-does-not-meet-requirements"===C.code&&Fn(v),C});return function(C){return I.apply(this,arguments)}}())}),ss.apply(this,arguments)}function Si(){return Si=(0,h.Z)(function*(v,f){yield function vm(v,f){return Ft.apply(this,arguments)}((0,H.m9)(v),{oobCode:f})}),Si.apply(this,arguments)}function _f(v,f){return vf.apply(this,arguments)}function vf(){return(vf=(0,h.Z)(function*(v,f){const g=(0,H.m9)(v),I=yield nf(g,{oobCode:f}),C=I.requestType;switch(O(C,g,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":O(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":O(I.mfaInfo,g,"internal-error");default:O(I.email,g,"internal-error")}let R=null;return I.mfaInfo&&(R=is._fromServerResponse(rn(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:R},operation:C}})).apply(this,arguments)}function pl(){return(pl=(0,h.Z)(function*(v,f){const{data:g}=yield _f((0,H.m9)(v),f);return g.email})).apply(this,arguments)}function wm(){return(wm=(0,h.Z)(function*(v,f,g){const I=rn(v),P=yield Za(I,{returnSecureToken:!0,email:f,password:g,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ju).catch(ie=>{throw"auth/password-does-not-meet-requirements"===ie.code&&Fn(v),ie}),z=yield Ci._fromIdTokenResponse(I,"signIn",P);return yield I._updateCurrentUser(z.user),z})).apply(this,arguments)}function Ky(){return(Ky=(0,h.Z)(function*(v,f,g){const I=rn(v),C={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};(function R(P,z){O(z.handleCodeInApp,I,"argument-error"),z&&os(I,P,z)})(C,g),yield Za(I,C,"getOobCode",ns)})).apply(this,arguments)}function Yy(){return(Yy=(0,h.Z)(function*(v,f,g){const I=(0,H.m9)(v),C=hf.credentialWithLink(f,g||Sn());return O(C._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),rs(I,C)})).apply(this,arguments)}function Qy(){return(Qy=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:createAuthUri",ae(v,f))})).apply(this,arguments)}function gl(){return gl=(0,h.Z)(function*(v,f){const I={identifier:f,continueUri:Qr()?Sn():"http://localhost"},{signinMethods:C}=yield function MS(v,f){return Qy.apply(this,arguments)}((0,H.m9)(v),I);return C||[]}),gl.apply(this,arguments)}function Cm(){return Cm=(0,h.Z)(function*(v,f){const g=(0,H.m9)(v),C={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&os(g.auth,C,f);const{email:R}=yield function zy(v,f){return sf.apply(this,arguments)}(g.auth,C);R!==v.email&&(yield v.reload())}),Cm.apply(this,arguments)}function as(){return as=(0,h.Z)(function*(v,f,g){const I=(0,H.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&os(I.auth,R,g);const{email:P}=yield function Wt(v,f){return Ya.apply(this,arguments)}(I.auth,R);P!==v.email&&(yield v.reload())}),as.apply(this,arguments)}function Sm(){return(Sm=(0,h.Z)(function*(v,f){return he(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Rm(){return Rm=(0,h.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const I=(0,H.m9)(v),R={idToken:yield I.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},P=yield Mr(I,function Am(v,f){return Sm.apply(this,arguments)}(I.auth,R));I.displayName=P.displayName||null,I.photoURL=P.photoUrl||null;const z=I.providerData.find(({providerId:ie})=>"password"===ie);z&&(z.displayName=I.displayName,z.photoURL=I.photoURL),yield I._updateTokensIfNecessary(P)}),Rm.apply(this,arguments)}function yf(v,f,g){return ta.apply(this,arguments)}function ta(){return ta=(0,h.Z)(function*(v,f,g){const{auth:I}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const P=yield Mr(v,function Hy(v,f){return so.apply(this,arguments)}(I,R));yield v._updateTokensIfNecessary(P,!0)}),ta.apply(this,arguments)}class ls{constructor(f,g,I={}){this.isNewUser=f,this.providerId=g,this.profile=I}}class nd extends ls{constructor(f,g,I,C){super(f,g,I),this.username=C}}class If extends ls{constructor(f,g){super(f,"facebook.com",g)}}class Mm extends nd{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Jy extends ls{constructor(f,g){super(f,"google.com",g)}}class Ef extends nd{constructor(f,g,I){super(f,"twitter.com",g,I)}}function Xy(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function bf(v){var f,g;if(!v)return null;const{providerId:I}=v,C=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const P=null===(g=null===(f=Qo(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(P)return new ls(R,"anonymous"!==P&&"custom"!==P?P:null)}if(!I)return null;switch(I){case"facebook.com":return new If(R,C);case"github.com":return new Mm(R,C);case"google.com":return new Jy(R,C);case"twitter.com":return new Ef(R,C,v.screenName||null);case"custom":case"anonymous":return new ls(R,null);default:return new ls(R,I,C)}}(g)}class ir{constructor(f,g,I){this.type=f,this.credential=g,this.user=I}static _fromIdtoken(f,g){return new ir("enroll",f,g)}static _fromMfaPendingCredential(f){return new ir("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,I;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return ir._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(I=f.multiFactorSession)&&void 0!==I&&I.idToken)return ir._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Cf{constructor(f,g,I){this.session=f,this.hints=g,this.signInResolver=I}static _fromError(f,g){const I=rn(f),C=g.customData._serverResponse,R=(C.mfaInfo||[]).map(z=>is._fromServerResponse(I,z));O(C.mfaPendingCredential,I,"internal-error");const P=ir._fromMfaPendingCredential(C.mfaPendingCredential);return new Cf(P,R,function(){var z=(0,h.Z)(function*(ie){const we=yield ie._process(I,P);delete C.mfaInfo,delete C.mfaPendingCredential;const Ne=Object.assign(Object.assign({},C),{idToken:we.idToken,refreshToken:we.refreshToken});switch(g.operationType){case"signIn":const je=yield Ci._fromIdTokenResponse(I,g.operationType,Ne);return yield I._updateCurrentUser(je.user),je;case"reauthenticate":return O(g.user,I,"internal-error"),Ci._forOperation(g.user,g.operationType,Ne);default:Ce(I,"internal-error")}});return function(ie){return z.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}class od{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>is._fromServerResponse(f.auth,I)))})}static _fromUser(f){return new od(f)}getSession(){var f=this;return(0,h.Z)(function*(){return ir._fromIdtoken(yield f.user.getIdToken(),f.user)})()}enroll(f,g){var I=this;return(0,h.Z)(function*(){const C=f,R=yield I.getSession(),P=yield Mr(I.user,C._process(I.user.auth,R,g));return yield I.user._updateTokensIfNecessary(P),I.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const I="string"==typeof f?f:f.uid,C=yield g.user.getIdToken();try{const R=yield Mr(g.user,function Nm(v,f){return he(v,"POST","/v2/accounts/mfaEnrollment:withdraw",ae(v,f))}(g.user.auth,{idToken:C,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:P})=>P!==I),yield g.user._updateTokensIfNecessary(R),yield g.user.reload()}catch(R){throw R}})()}}const ml=new WeakMap,na="__sak";class sd{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(na,"1"),this.storage.removeItem(na),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ad=(()=>{class v extends sd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function us(){const v=(0,H.z$)();return Ws(v)||ct(v)}()&&function Ui(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gn(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const C=this.storage.getItem(I),R=this.localCache[I];C!==R&&g(I,R,C)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((z,ie,we)=>{this.notifyListeners(z,we)});const C=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const z=this.storage.getItem(C);if(g.newValue!==z)null!==g.newValue?this.storage.setItem(C,g.newValue):this.storage.removeItem(C);else if(this.localCache[C]===g.newValue&&!I)return}const R=()=>{const z=this.storage.getItem(C);!I&&this.localCache[C]===z||this.notifyListeners(C,z)},P=this.storage.getItem(C);!function Gn(){return(0,H.w1)()&&10===document.documentMode}()||P===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,I){this.localCache[g]=I;const C=this.listeners[g];if(C)for(const R of Array.from(C))R(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var C=()=>super._set,R=this;return(0,h.Z)(function*(){yield C().call(R,g,I),R.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,C=this;return(0,h.Z)(function*(){const R=yield I().call(C,g);return C.localCache[g]=JSON.stringify(R),R})()}_remove(g){var I=()=>super._remove,C=this;return(0,h.Z)(function*(){yield I().call(C,g),delete C.localCache[g]})()}}return v.type="LOCAL",v})(),ds=(()=>{class v extends sd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return v.type="SESSION",v})();let ra=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(R=>R.isListeningto(g));if(I)return I;const C=new v(g);return this.receivers.push(C),C}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,h.Z)(function*(){const C=g,{eventId:R,eventType:P,data:z}=C.data,ie=I.handlersMap[P];if(!ie?.size)return;C.ports[0].postMessage({status:"ack",eventId:R,eventType:P});const we=Array.from(ie).map(function(){var je=(0,h.Z)(function*(un){return un(C.origin,z)});return function(un){return je.apply(this,arguments)}}()),Ne=yield function Af(v){return Promise.all(v.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return f.apply(this,arguments)}}()))}(we);C.ports[0].postMessage({status:"done",eventId:R,eventType:P,response:Ne})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ri(v="",f=10){let g="";for(let I=0;I<f;I++)g+=Math.floor(10*Math.random());return v+g}class nb{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,I=50){var C=this;return(0,h.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let P,z;return new Promise((ie,we)=>{const Ne=Ri("",20);R.port1.start();const je=setTimeout(()=>{we(new Error("unsupported_event"))},I);z={messageChannel:R,onMessage(un){const fi=un;if(fi.data.eventId===Ne)switch(fi.data.status){case"ack":clearTimeout(je),P=setTimeout(()=>{we(new Error("timeout"))},3e3);break;case"done":clearTimeout(P),ie(fi.data.response);break;default:clearTimeout(je),clearTimeout(P),we(new Error("invalid_response"))}}},C.handlers.add(z),R.port1.addEventListener("message",z.onMessage),C.target.postMessage({eventType:f,eventId:Ne,data:g},[R.port2])}).finally(()=>{z&&C.removeMessageHandler(z)})})()}}function qn(){return window}function cd(){return typeof qn().WorkerGlobalScope<"u"&&"function"==typeof qn().importScripts}function Vt(){return(Vt=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const on="firebaseLocalStorageDb",ia="firebaseLocalStorage",ho="fbase_key";class ic{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function _l(v,f){return v.transaction([ia],f?"readwrite":"readonly").objectStore(ia)}function Vm(){const v=indexedDB.open(on,1);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(ia,{keyPath:ho})}catch(C){g(C)}}),v.addEventListener("success",(0,h.Z)(function*(){const I=v.result;I.objectStoreNames.contains(ia)?f(I):(I.close(),yield function Lm(){const v=indexedDB.deleteDatabase(on);return new ic(v).toPromise()}(),f(yield Vm()))}))})}function ld(v,f,g){return ur.apply(this,arguments)}function ur(){return(ur=(0,h.Z)(function*(v,f,g){const I=_l(v,!0).put({[ho]:f,value:g});return new ic(I).toPromise()})).apply(this,arguments)}function Rf(){return(Rf=(0,h.Z)(function*(v,f){const g=_l(v,!1).get(f),I=yield new ic(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function fo(v,f){const g=_l(v,!0).delete(f);return new ic(g).toPromise()}const vl=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield Vm()),g.db})()}_withRetries(g){var I=this;return(0,h.Z)(function*(){let C=0;for(;;)try{const R=yield I._openDb();return yield g(R)}catch(R){if(C++>3)throw R;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return cd()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=ra._getInstance(function Fm(){return cd()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,h.Z)(function*(C,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(C,R){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,h.Z)(function*(C,R){return["keyChanged"]});return function(C,R){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var I,C;if(g.activeServiceWorker=yield function re(){return Vt.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new nb(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);R&&null!==(I=R[0])&&void 0!==I&&I.fulfilled&&null!==(C=R[0])&&void 0!==C&&C.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,h.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function rb(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Vm();return yield ld(g,na,"1"),yield fo(g,na),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,h.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var C=this;return(0,h.Z)(function*(){return C._withPendingWrite((0,h.Z)(function*(){return yield C._withRetries(R=>ld(R,g,I)),C.localCache[g]=I,C.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,h.Z)(function*(){const C=yield I._withRetries(R=>function hs(v,f){return Rf.apply(this,arguments)}(R,g));return I.localCache[g]=C,C})()}_remove(g){var I=this;return(0,h.Z)(function*(){return I._withPendingWrite((0,h.Z)(function*(){return yield I._withRetries(C=>fo(C,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const I=yield g._withRetries(P=>{const z=_l(P,!1).getAll();return new ic(z).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const C=[],R=new Set;if(0!==I.length)for(const{fbase_key:P,value:z}of I)R.add(P),JSON.stringify(g.localCache[P])!==JSON.stringify(z)&&(g.notifyListeners(P,z),C.push(P));for(const P of Object.keys(g.localCache))g.localCache[P]&&!R.has(P)&&(g.notifyListeners(P,null),C.push(P));return C})()}notifyListeners(g,I){this.localCache[g]=I;const C=this.listeners[g];if(C)for(const R of Array.from(C))R(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),bl=1e12;class Mf{constructor(f){this.auth=f,this.counter=bl,this._widgets=new Map}render(f,g){const I=this.counter;return this._widgets.set(I,new ud(f,this.auth.name,g||{})),this.counter++,I}reset(f){var g;const I=f||bl;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(f){var g;return(null===(g=this._widgets.get(f||bl))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var I;return null===(I=g._widgets.get(f||bl))||void 0===I||I.execute(),""})()}}class ud{constructor(f,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof f?document.getElementById(f):f;O(C,"argument-error",{appName:g}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Pf(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)f.push(g.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Il=Ly("rcb"),Um=new Li(3e4,6e4);class dd{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=qn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return O(function Bm(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),f,"argument-error"),this.shouldResolveImmediately(g)&&pn(qn().grecaptcha)?Promise.resolve(qn().grecaptcha):new Promise((I,C)=>{const R=qn().setTimeout(()=>{C(Xe(f,"network-request-failed"))},Um.get());qn()[Il]=()=>{qn().clearTimeout(R),delete qn()[Il];const z=qn().grecaptcha;if(!z||!pn(z))return void C(Xe(f,"internal-error"));const ie=z.render;z.render=(we,Ne)=>{const je=ie(we,Ne);return this.counter++,je},this.hostLanguage=g,I(z)},qu(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:Il,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),C(Xe(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=qn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class br{load(f){return(0,h.Z)(function*(){return new Mf(f)})()}clearedOneInstance(){}}const ps="recaptcha",Nt={theme:"light",type:"image"};class ob{constructor(f,g,I=Object.assign({},Nt)){this.parameters=I,this.type=ps,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rn(f),this.isInvisible="invisible"===this.parameters.size,O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof g?document.getElementById(g):g;O(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new br:new dd,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),I=f.getAssertedRecaptcha();return I.getResponse(g)||new Promise(R=>{const P=z=>{z&&(f.tokenChangeListeners.delete(P),R(z))};f.tokenChangeListeners.add(P),f.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){O(!this.parameters.sitekey,this.auth,"argument-error"),O(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof f)f(g);else if("string"==typeof f){const I=qn()[f];"function"==typeof I&&I(g)}}}assertNotDestroyed(){O(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){O(Qr()&&!cd(),f.auth,"internal-error"),yield function sb(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function kn(v){return eo.apply(this,arguments)}(f.auth);O(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return O(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Nf{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Qa._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function El(){return(El=(0,h.Z)(function*(v,f,g){const I=rn(v),C=yield sn(I,f,(0,H.m9)(g));return new Nf(C,R=>rs(I,R))})).apply(this,arguments)}function oc(){return(oc=(0,h.Z)(function*(v,f,g){const I=(0,H.m9)(v);yield Ai(!1,I,"phone");const C=yield sn(I.auth,f,(0,H.m9)(g));return new Nf(C,R=>lo(I,R))})).apply(this,arguments)}function Dn(){return(Dn=(0,h.Z)(function*(v,f,g){const I=(0,H.m9)(v),C=yield sn(I.auth,f,(0,H.m9)(g));return new Nf(C,R=>Xu(I,R))})).apply(this,arguments)}function sn(v,f,g){return xi.apply(this,arguments)}function xi(){return xi=(0,h.Z)(function*(v,f,g){var I;const C=yield g.verify();try{let R;if(O("string"==typeof C,v,"argument-error"),O(g.type===ps,v,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const P=R.session;if("phoneNumber"in R)return O("enroll"===P.type,v,"internal-error"),(yield function S0(v,f){return he(v,"POST","/v2/accounts/mfaEnrollment:start",ae(v,f))}(v,{idToken:P.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{O("signin"===P.type,v,"internal-error");const z=(null===(I=R.multiFactorHint)||void 0===I?void 0:I.uid)||R.multiFactorUid;return O(z,v,"missing-multi-factor-info"),(yield function mn(v,f){return he(v,"POST","/v2/accounts/mfaSignIn:start",ae(v,f))}(v,{mfaPendingCredential:P.credential,mfaEnrollmentId:z,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:P}=yield function Yu(v,f){return Ti.apply(this,arguments)}(v,{phoneNumber:R.phoneNumber,recaptchaToken:C});return P}}finally{g._reset()}}),xi.apply(this,arguments)}function wl(){return(wl=(0,h.Z)(function*(v,f){yield ot((0,H.m9)(v),f)})).apply(this,arguments)}let sc=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=rn(g)}verifyPhoneNumber(g,I){return sn(this.auth,g,(0,H.m9)(I))}static credential(g,I){return Qa._fromVerification(g,I)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:C}=g;return I&&C?Qa._fromTokenResponse(I,C):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function gs(v,f){return f?wt(f):(O(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Of extends Ka{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ao(f,this._buildIdpRequest())}_linkToIdToken(f,g){return ao(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return ao(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function sa(v){return ec(v.auth,new Of(v),v.bypassAuthState)}function Tl(v){const{auth:f,user:g}=v;return O(g,f,"internal-error"),hl(g,new Of(v),v.bypassAuthState)}function cb(v){return an.apply(this,arguments)}function an(){return(an=(0,h.Z)(function*(v){const{auth:f,user:g}=v;return O(g,f,"internal-error"),ot(g,new Of(v),v.bypassAuthState)})).apply(this,arguments)}class Ff{constructor(f,g,I,C,R=!1){this.auth=f,this.resolver=I,this.user=C,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(I,C){f.pendingPromise={resolve:I,reject:C};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(I,C){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:I,sessionId:C,postBody:R,tenantId:P,error:z,type:ie}=f;if(z)return void g.reject(z);const we={auth:g.auth,requestUri:I,sessionId:C,tenantId:P||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ie)(we))}catch(Ne){g.reject(Ne)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return sa;case"linkViaPopup":case"linkViaRedirect":return cb;case"reauthViaPopup":case"reauthViaRedirect":return Tl;default:Ce(this.auth,"internal-error")}}resolve(f){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lf=new Li(2e3,1e4);function ac(){return(ac=(0,h.Z)(function*(v,f,g){const I=rn(v);qe(v,f,ei);const C=gs(I,g);return new aa(I,"signInViaPopup",f,C).executeNotNull()})).apply(this,arguments)}function We(){return(We=(0,h.Z)(function*(v,f,g){const I=(0,H.m9)(v);qe(I.auth,f,ei);const C=gs(I.auth,g);return new aa(I.auth,"reauthViaPopup",f,C,I).executeNotNull()})).apply(this,arguments)}function Vf(){return(Vf=(0,h.Z)(function*(v,f,g){const I=(0,H.m9)(v);qe(I.auth,f,ei);const C=gs(I.auth,g);return new aa(I.auth,"linkViaPopup",f,C,I).executeNotNull()})).apply(this,arguments)}let aa=(()=>{class v extends Ff{constructor(g,I,C,R,P){super(g,I,R,P),this.provider=C,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const I=yield g.execute();return O(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,h.Z)(function*(){yt(1===g.filter.length,"Popup operations only handle one event");const I=Ri();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch(C=>{g.reject(C)}),g.resolver._isIframeWebStorageSupported(g.auth,C=>{C||g.reject(Xe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,C;this.pollId=null!==(C=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==C&&C.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Xe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Lf.get())};g()}}return v.currentPopupAction=null,v})();const Uf="pendingRedirect",ms=new Map;class k0 extends Ff{constructor(f,g,I=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let I=ms.get(g.auth._key());if(!I){try{const R=(yield function Hm(v,f){return po.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;I=()=>Promise.resolve(R)}catch(C){I=()=>Promise.reject(C)}ms.set(g.auth._key(),I)}return g.bypassAuthState||ms.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,I=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(I,f);if("unknown"!==f.type){if(f.eventId){const C=yield I.auth._redirectUserForId(f.eventId);if(C)return I.user=C,g().call(I,f);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function po(){return(po=(0,h.Z)(function*(v,f){const g=cc(f),I=hd(v);if(!(yield I._isAvailable()))return!1;const C="true"===(yield I._get(g));return yield I._remove(g),C})).apply(this,arguments)}function mt(v,f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,h.Z)(function*(v,f){return hd(v)._set(cc(f),"true")})).apply(this,arguments)}function ca(v,f){ms.set(v._key(),f)}function hd(v){return wt(v._redirectPersistence)}function cc(v){return tr(Uf,v.config.apiKey,v.name)}function fd(v,f,g){return function pd(v,f,g){return Bf.apply(this,arguments)}(v,f,g)}function Bf(){return(Bf=(0,h.Z)(function*(v,f,g){const I=rn(v);qe(v,f,ei),yield I._initializationPromise;const C=gs(I,g);return yield mt(C,I),C._openRedirect(I,f,"signInViaRedirect")})).apply(this,arguments)}function Cl(v,f,g){return function $m(v,f,g){return Wn.apply(this,arguments)}(v,f,g)}function Wn(){return(Wn=(0,h.Z)(function*(v,f,g){const I=(0,H.m9)(v);qe(I.auth,f,ei),yield I.auth._initializationPromise;const C=gs(I.auth,g);yield mt(C,I.auth);const R=yield lc(I);return C._openRedirect(I.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function la(v,f,g){return function db(v,f,g){return No.apply(this,arguments)}(v,f,g)}function No(){return(No=(0,h.Z)(function*(v,f,g){const I=(0,H.m9)(v);qe(I.auth,f,ei),yield I.auth._initializationPromise;const C=gs(I.auth,g);yield Ai(!1,I,f.providerId),yield mt(C,I.auth);const R=yield lc(I);return C._openRedirect(I.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function jf(){return(jf=(0,h.Z)(function*(v,f){return yield rn(v)._initializationPromise,vs(v,f,!1)})).apply(this,arguments)}function vs(v,f){return ti.apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(v,f,g=!1){const I=rn(v),C=gs(I,f),P=yield new k0(I,C,g).execute();return P&&!g&&(delete P.user._redirectEventId,yield I._persistUserIfCurrent(P.user),yield I._setRedirectUser(null,f)),P})).apply(this,arguments)}function lc(v){return ys.apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(v){const f=Ri(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class gd{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(f,I)&&(g=!0,this.sendToConsumer(f,I),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function or(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cn(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var I;if(f.error&&!cn(f)){const C=(null===(I=f.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(Xe(this.auth,C))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const I=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&I}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(md(f))}saveEventToCache(f){this.cachedEventUids.add(md(f)),this.lastProcessedEventTime=Date.now()}}function md(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function cn({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function go(v){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,h.Z)(function*(v,f={}){return he(v,"GET","/v1/projects",f)})).apply(this,arguments)}const Zn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Oo=/^https?/;function _d(){return(_d=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield go(v);for(const g of f)try{if(mo(g))return}catch{}Ce(v,"unauthorized-domain")})).apply(this,arguments)}function mo(v){const f=Sn(),{protocol:g,hostname:I}=new URL(f);if(v.startsWith("chrome-extension://")){const P=new URL(v);return""===P.hostname&&""===I?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&P.hostname===I}if(!Oo.test(g))return!1;if(Zn.test(v))return I===v;const C=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(I)}const _o=new Li(3e4,6e4);function dr(){const v=qn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Hf=null;const zm=new Li(5e3,15e3),N0="__/auth/iframe",O0="emulator/auth/iframe",Gm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fo(v){const f=v.config;O(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?Y(f,O0):`https://${v.config.authDomain}/${N0}`,I={apiKey:f.apiKey,appName:v.name,v:ve.SDK_VERSION},C=dc.get(v.config.apiHost);C&&(I.eid=C);const R=v._getFrameworks();return R.length&&(I.fw=R.join(",")),`${g}?${(0,H.xO)(I).slice(1)}`}function vn(){return vn=(0,h.Z)(function*(v){const f=yield function $f(v){return Hf=Hf||function uc(v){return new Promise((f,g)=>{var I,C,R;function P(){dr(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{dr(),g(Xe(v,"network-request-failed"))},timeout:_o.get()})}if(null!==(C=null===(I=qn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==C&&C.Iframe)f(gapi.iframes.getContext());else{if(null===(R=qn().gapi)||void 0===R||!R.load){const z=Ly("iframefcb");return qn()[z]=()=>{gapi.load?P():g(Xe(v,"network-request-failed"))},qu(`https://apis.google.com/js/api.js?onload=${z}`).catch(ie=>g(ie))}P()}}).catch(f=>{throw Hf=null,f})}(v),Hf}(v),g=qn().gapi;return O(g,v,"internal-error"),f.open({where:document.body,url:Fo(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gm,dontclear:!0},I=>new Promise(function(){var C=(0,h.Z)(function*(R,P){yield I.restyle({setHideOnLeave:!1});const z=Xe(v,"network-request-failed"),ie=qn().setTimeout(()=>{P(z)},zm.get());function we(){qn().clearTimeout(ie),R(I)}I.ping(we).then(we,()=>{P(z)})});return function(R,P){return C.apply(this,arguments)}}()))}),vn.apply(this,arguments)}const hb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dl{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const zf="__/auth/handler",pb="emulator/auth/handler",Gf=encodeURIComponent("fac");function qm(v,f,g,I,C,R){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(v,f,g,I,C,R){O(v.config.authDomain,v,"auth-domain-config-required"),O(v.config.apiKey,v,"invalid-api-key");const P={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:I,v:ve.SDK_VERSION,eventId:C};if(f instanceof ei){f.setDefaultLanguage(v.languageCode),P.providerId=f.providerId||"",(0,H.xb)(f.getCustomParameters())||(P.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ne,je]of Object.entries(R||{}))P[Ne]=je}if(f instanceof Qs){const Ne=f.getScopes().filter(je=>""!==je);Ne.length>0&&(P.scopes=Ne.join(","))}v.tenantId&&(P.tid=v.tenantId);const z=P;for(const Ne of Object.keys(z))void 0===z[Ne]&&delete z[Ne];const ie=yield v._getAppCheckToken(),we=ie?`#${Gf}=${encodeURIComponent(ie)}`:"";return`${function qf({config:v}){return v.emulator?Y(v,pb):`https://${v.authDomain}/${zf}`}(v)}?${(0,H.xO)(z).slice(1)}${we}`})).apply(this,arguments)}const Lo="webStorageSupport",hc=class gb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=vs,this._overrideRedirectResult=ca}_openPopup(f,g,I,C){var R=this;return(0,h.Z)(function*(){var P;yt(null===(P=R.eventManagers[f._key()])||void 0===P?void 0:P.manager,"_initialize() not called before _openPopup()");const z=yield qm(f,g,I,Sn(),C);return function Al(v,f,g,I=500,C=600){const R=Math.max((window.screen.availHeight-C)/2,0).toString(),P=Math.max((window.screen.availWidth-I)/2,0).toString();let z="";const ie=Object.assign(Object.assign({},hb),{width:I.toString(),height:C.toString(),top:R,left:P}),we=(0,H.z$)().toLowerCase();g&&(z=Qh(we)?"_blank":g),oo(we)&&(f=f||"http://localhost",ie.scrollbars="yes");const Ne=Object.entries(ie).reduce((un,[fi,xd])=>`${un}${fi}=${xd},`,"");if(function Bt(v=(0,H.z$)()){var f;return ct(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(we)&&"_self"!==z)return function Hi(v,f){const g=document.createElement("a");g.href=v,g.target=f;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(f||"",z),new Dl(null);const je=window.open(f||"",z,Ne);O(je,v,"popup-blocked");try{je.focus()}catch{}return new Dl(je)}(f,z,Ri())})()}_openRedirect(f,g,I,C){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(f),function Sf(v){qn().location.href=v}(yield qm(f,g,I,Sn(),C)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:C,promise:R}=this.eventManagers[g];return C?Promise.resolve(C):(yt(R,"If manager is not set, promise should be"),R)}const I=this.initAndGetManager(f);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const I=yield function Dt(v){return vn.apply(this,arguments)}(f),C=new gd(f);return I.register("authEvent",R=>(O(R?.authEvent,f,"invalid-auth-event"),{status:C.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:C},g.iframes[f._key()]=I,C})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Lo,{type:Lo},C=>{var R;const P=null===(R=C?.[0])||void 0===R?void 0:R[Lo];void 0!==P&&g(!!P),Ce(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ua(v){return _d.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return gn()||Ws()||ct()}};class fc{constructor(f){this.factorId=f}_process(f,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,I);case"signin":return this._finalizeSignIn(f,g.credential);default:return Se("unexpected MultiFactorSessionType")}}}class Xt extends fc{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Xt(f)}_finalizeEnroll(f,g,I){return function Po(v,f){return he(v,"POST","/v2/accounts/mfaEnrollment:finalize",ae(v,f))}(f,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function _n(v,f){return he(v,"POST","/v2/accounts/mfaSignIn:finalize",ae(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Sl=(()=>{class v{constructor(){}static assertion(g){return Xt._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var da="@firebase/auth";class ha{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(I=>{f(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);g&&(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bs(){return window}(0,H.Pz)("authIdTokenMaxAge"),function xl(v){(0,ve._registerComponent)(new lt.wA("auth",(f,{options:g})=>{const I=f.getProvider("app").getImmediate(),C=f.getProvider("heartbeat"),R=f.getProvider("app-check-internal"),{apiKey:P,authDomain:z}=I.options;O(P&&!P.includes(":"),"invalid-api-key",{appName:I.name});const ie={apiKey:P,authDomain:z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xo(v)},we=new Jr(I,C,R,ie);return function AS(v,f){const g=f?.persistence||[],I=(Array.isArray(g)?g:[g]).map(wt);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(I,f?.popupRedirectResolver)}(we,g),we},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,I)=>{f.getProvider("auth-internal").initialize()})),(0,ve._registerComponent)(new lt.wA("auth-internal",f=>{const g=rn(f.getProvider("auth").getImmediate());return new ha(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ve.registerVersion)(da,"1.5.1",function Rl(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ve.registerVersion)(da,"1.5.1","esm2017")}("Browser");function pa(){return pa=(0,h.Z)(function*(v,f,g){var I;const{BuildInfo:C}=bs();yt(f.sessionId,"AuthEvent did not contain a session ID");const R=yield function yb(v){return Zf.apply(this,arguments)}(f.sessionId),P={};return ct()?P.ibi=C.packageName:j()?P.apn=C.packageName:Ce(v,"operation-not-supported-in-this-environment"),C.displayName&&(P.appDisplayName=C.displayName),P.sessionId=R,qm(v,g,f.type,void 0,null!==(I=f.eventId)&&void 0!==I?I:void 0,P)}),pa.apply(this,arguments)}function Qm(){return(Qm=(0,h.Z)(function*(v){const{BuildInfo:f}=bs(),g={};ct()?g.iosBundleId=f.packageName:j()?g.androidPackageName=f.packageName:Ce(v,"operation-not-supported-in-this-environment"),yield go(v,g)})).apply(this,arguments)}function Xm(){return(Xm=(0,h.Z)(function*(v,f,g){const{cordova:I}=bs();let C=()=>{};try{yield new Promise((R,P)=>{let z=null;function ie(){var je;R();const un=null===(je=I.plugins.browsertab)||void 0===je?void 0:je.close;"function"==typeof un&&un(),"function"==typeof g?.close&&g.close()}function we(){z||(z=window.setTimeout(()=>{P(Xe(v,"redirect-cancelled-by-user"))},2e3))}function Ne(){"visible"===document?.visibilityState&&we()}f.addPassiveListener(ie),document.addEventListener("resume",we,!1),j()&&document.addEventListener("visibilitychange",Ne,!1),C=()=>{f.removePassiveListener(ie),document.removeEventListener("resume",we,!1),document.removeEventListener("visibilitychange",Ne,!1),z&&window.clearTimeout(z)}})}finally{C()}})).apply(this,arguments)}function Zf(){return(Zf=(0,h.Z)(function*(v){const f=function Is(v){if(yt(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),g=new Uint8Array(f);for(let I=0;I<v.length;I++)g[I]=v.charCodeAt(I);return g}(v),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Yf extends gd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function Qf(v){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,h.Z)(function*(v){const f=yield bd()._get(mc(v));return f&&(yield bd()._remove(mc(v))),f})).apply(this,arguments)}function Es(){const v=[];for(let g=0;g<20;g++){const I=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return v.join("")}function bd(){return wt(ad)}function mc(v){return tr("authEvent",v.config.apiKey,v.name)}function ws(v){if(!v?.includes("?"))return{};const[f,...g]=v.split("?");return(0,H.zd)(g.join("?"))}const bb=class ga{constructor(){this._redirectPersistence=ds,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vs,this._overrideRedirectResult=ca}_initialize(f){var g=this;return(0,h.Z)(function*(){const I=f._key();let C=g.eventManagers.get(I);return C||(C=new Yf(f),g.eventManagers.set(I,C),g.attachCallbackListeners(f,C)),C})()}_openPopup(f){Ce(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,I,C){var R=this;return(0,h.Z)(function*(){!function vb(v){var f,g,I,C,R,P,z,ie,we,Ne;const je=bs();O("function"==typeof(null===(f=je?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),O(typeof(null===(g=je?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),O("function"==typeof(null===(R=null===(C=null===(I=je?.cordova)||void 0===I?void 0:I.plugins)||void 0===C?void 0:C.browsertab)||void 0===R?void 0:R.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O("function"==typeof(null===(ie=null===(z=null===(P=je?.cordova)||void 0===P?void 0:P.plugins)||void 0===z?void 0:z.browsertab)||void 0===ie?void 0:ie.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O("function"==typeof(null===(Ne=null===(we=je?.cordova)||void 0===we?void 0:we.InAppBrowser)||void 0===Ne?void 0:Ne.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const P=yield R._initialize(f);yield P.initialized(),P.resetRedirect(),function ub(){ms.clear()}(),yield R._originValidation(f);const z=function yo(v,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Es(),postBody:null,tenantId:v.tenantId,error:Xe(v,"no-auth-event")}}(f,I,C);yield function yd(v,f){return bd()._set(mc(v),f)}(f,z);const ie=yield function gc(v,f,g){return pa.apply(this,arguments)}(f,z,g),we=yield function Jm(v){const{cordova:f}=bs();return new Promise(g=>{f.plugins.browsertab.isAvailable(I=>{let C=null;I?f.plugins.browsertab.openUrl(v):C=f.InAppBrowser.open(v,function kt(v=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(C)})})}(ie);return function _b(v,f,g){return Xm.apply(this,arguments)}(f,P,we)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Wf(v){return Qm.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:I,handleOpenURL:C,BuildInfo:R}=bs(),P=setTimeout((0,h.Z)(function*(){yield Qf(f),g.onEvent(kl())}),500),z=function(){var Ne=(0,h.Z)(function*(je){clearTimeout(P);const un=yield Qf(f);let fi=null;un&&je?.url&&(fi=function Pl(v,f){var g,I;const C=function Jf(v){const f=ws(v),g=f.link?decodeURIComponent(f.link):void 0,I=ws(g).link,C=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ws(C).link||C||I||g||v}(f);if(C.includes("/__/auth/callback")){const R=ws(C),P=R.firebaseError?function e_(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,z=null===(I=null===(g=P?.code)||void 0===g?void 0:g.split("auth/"))||void 0===I?void 0:I[1],ie=z?Xe(z):null;return ie?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:ie,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:C,postBody:null}}return null}(un,je.url)),g.onEvent(fi||kl())});return function(un){return Ne.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,z);const ie=C,we=`${R.packageName.toLowerCase()}://`;bs().handleOpenURL=function(){var Ne=(0,h.Z)(function*(je){if(je.toLowerCase().startsWith(we)&&z({url:je}),"function"==typeof ie)try{ie(je)}catch(un){console.error(un)}});return function(je){return Ne.apply(this,arguments)}}()}};function kl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xe("no-auth-event")}}function Gr(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Cs(v=(0,H.z$)()){return!("file:"!==Gr()&&"ionic:"!==Gr()&&"capacitor:"!==Gr()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function _a(){try{const v=self.localStorage,f=Ri();if(v)return v.setItem(f,"1"),v.removeItem(f),!function Gi(v=(0,H.z$)()){return function Ed(){return(0,H.w1)()&&11===document?.documentMode}()||function zi(v=(0,H.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,H.hl)()}catch{return _c()&&(0,H.hl)()}return!1}function _c(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function wd(){return(function ma(){return"http:"===Gr()||"https:"===Gr()}()||(0,H.ru)()||Cs())&&!function bo(){return(0,H.b$)()||(0,H.UG)()}()&&_a()&&!_c()}function Td(){return Cs()&&typeof document<"u"}function Ol(){return(Ol=(0,h.Z)(function*(){return!!Td()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const di={LOCAL:"local",NONE:"none",SESSION:"session"},Fl=O,Xf="persistence";function Cd(v){return ep.apply(this,arguments)}function ep(){return(ep=(0,h.Z)(function*(v){yield v._initializationPromise;const f=tp(),g=tr(Xf,v.config.apiKey,v.name);f&&f.setItem(g,v._getPersistence())})).apply(this,arguments)}function tp(){var v;try{return(null===(v=function n_(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Dd=O;class Ds{constructor(){this.browserResolver=wt(hc),this.cordovaResolver=wt(bb),this.underlyingResolver=null,this._redirectPersistence=ds,this._completeRedirectFn=vs,this._overrideRedirectResult=ca}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,I,C){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,I,C)})()}_openRedirect(f,g,I,C){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,I,C)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Td()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Eb(){return Ol.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function hi(v){return v.unwrap()}function Uo(v){return Ll(v)}function Ll(v){const{_tokenResponse:f}=v instanceof H.ZR?v.customData:v;if(!f)return null;if(!(v instanceof H.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return sc.credentialFromResult(v);const g=f.providerId;if(!g||g===Be.PASSWORD)return null;let I;switch(g){case Be.GOOGLE:I=xt;break;case Be.FACEBOOK:I=ff;break;case Be.GITHUB:I=rr;break;case Be.TWITTER:I=bm;break;default:const{oauthIdToken:C,oauthAccessToken:R,oauthTokenSecret:P,pendingToken:z,nonce:ie}=f;return R||P||C||z?z?g.startsWith("saml.")?li._create(g,z):Bi._fromParams({providerId:g,signInMethod:g,pendingToken:z,idToken:C,accessToken:R}):new Xa(g).credential({idToken:C,accessToken:R,rawNonce:ie}):null}return v instanceof H.ZR?I.credentialFromError(v):I.credentialFromResult(v)}function ln(v,f){return f.catch(g=>{throw g instanceof H.ZR&&function vc(v,f){var g;const I=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Sd(v,function Df(v,f){var g;const I=(0,H.m9)(v),C=f;return O(f.customData.operationType,I,"argument-error"),O(null===(g=C.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),Cf._fromError(I,C)}(v,f));else if(I){const C=Ll(f),R=f;C&&(R.credential=C,R.tenantId=I.tenantId||void 0,R.email=I.email||void 0,R.phoneNumber=I.phoneNumber||void 0)}}(v,g),g}).then(g=>{const C=g.user;return{operationType:g.operationType,credential:Uo(g),additionalUserInfo:Xy(g),user:Bo.getOrCreate(C)}})}function As(v,f){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,h.Z)(function*(v,f){const g=yield f;return{verificationId:g.verificationId,confirm:I=>ln(v,g.confirm(I))}})).apply(this,arguments)}class Sd{constructor(f,g){this.resolver=g,this.auth=function va(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ln(hi(this.auth),this.resolver.resolveSignIn(f))}}class Bo{constructor(f){this._delegate=f,this.multiFactor=function rc(v){const f=(0,H.m9)(v);return ml.has(f)||ml.set(f,od._fromUser(f)),ml.get(f)}(f)}static getOrCreate(f){return Bo.USER_MAP.has(f)||Bo.USER_MAP.set(f,new Bo(f)),Bo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return ln(g.auth,lo(g._delegate,f))})()}linkWithPhoneNumber(f,g){var I=this;return(0,h.Z)(function*(){return As(I.auth,function jm(v,f,g){return oc.apply(this,arguments)}(I._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return ln(g.auth,function Lr(v,f,g){return Vf.apply(this,arguments)}(g._delegate,f,Ds))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Cd(rn(g.auth)),la(g._delegate,f,Ds)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return ln(g.auth,Xu(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return As(this.auth,function Fr(v,f,g){return Dn.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ln(this.auth,function P0(v,f,g){return We.apply(this,arguments)}(this._delegate,f,Ds))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Cd(rn(g.auth)),Cl(g._delegate,f,Ds)})()}sendEmailVerification(f){return function kS(v,f){return Cm.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function co(v,f){return Js.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function xm(v,f){return yf((0,H.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function cs(v,f){return yf((0,H.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ko(v,f){return wl.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function D0(v,f){return Rm.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Dm(v,f,g){return as.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bo.USER_MAP=new WeakMap;const hr=O;let Vl=(()=>{class v{constructor(g,I){if(this.app=g,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=g.options;hr(C,"invalid-api-key",{appName:g.name}),hr(C,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?Ds:void 0;this._delegate=I.initialize({options:{persistence:np(C,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(dt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,I){!function cl(v,f,g){const I=rn(v);O(I._canInitEmulator,I,"emulator-config-failed"),O(/^https?:\/\//.test(f),I,"invalid-emulator-scheme");const C=!!g?.disableWarnings,R=Xr(f),{host:P,port:z}=function Zu(v){const f=Xr(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(I);if(C){const R=C[1];return{host:R,port:_m(I.substr(R.length+1))}}{const[R,P]=I.split(":");return{host:R,port:_m(P)}}}(f);I.config.emulator={url:`${R}//${P}${null===z?"":`:${z}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:P,port:z,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function jy(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,I)}applyActionCode(g){return function mf(v,f){return Si.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return _f(this._delegate,g)}confirmPasswordReset(g,I){return function Im(v,f,g){return ss.apply(this,arguments)}(this._delegate,g,I)}createUserWithEmailAndPassword(g,I){var C=this;return(0,h.Z)(function*(){return ln(C._delegate,function Em(v,f,g){return wm.apply(this,arguments)}(C._delegate,g,I))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function PS(v,f){return gl.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function RS(v,f){const g=Ja.parseLink(f);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){hr(wd(),g._delegate,"operation-not-supported-in-this-environment");const I=yield function _s(v,f){return jf.apply(this,arguments)}(g._delegate,Ds);return I?ln(g._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Ts(v,f){rn(v)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,I,C){const{next:R,error:P,complete:z}=Rd(g,I,C);return this._delegate.onAuthStateChanged(R,P,z)}onIdTokenChanged(g,I,C){const{next:R,error:P,complete:z}=Rd(g,I,C);return this._delegate.onIdTokenChanged(R,P,z)}sendSignInLinkToEmail(g,I){return function SS(v,f,g){return Ky.apply(this,arguments)}(this._delegate,g,I)}sendPasswordResetEmail(g,I){return function $r(v,f,g){return yr.apply(this,arguments)}(this._delegate,g,I||void 0)}setPersistence(g){var I=this;return(0,h.Z)(function*(){let C;switch(function wb(v,f){Fl(Object.values(di).includes(f),v,"invalid-persistence-type"),(0,H.b$)()?Fl(f!==di.SESSION,v,"unsupported-persistence-type"):(0,H.UG)()?Fl(f===di.NONE,v,"unsupported-persistence-type"):_c()?Fl(f===di.NONE||f===di.LOCAL&&(0,H.hl)(),v,"unsupported-persistence-type"):Fl(f===di.NONE||_a(),v,"unsupported-persistence-type")}(I._delegate,g),g){case di.SESSION:C=ds;break;case di.LOCAL:C=(yield wt(vl)._isAvailable())?vl:ad;break;case di.NONE:C=On;break;default:return Ce("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ln(this._delegate,function Ie(v){return et.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ln(this._delegate,rs(this._delegate,g))}signInWithCustomToken(g){return ln(this._delegate,function st(v,f){return td.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,I){return ln(this._delegate,function Tm(v,f,g){return rs((0,H.m9)(v),hf.credential(f,g)).catch(function(){var I=(0,h.Z)(function*(C){throw"auth/password-does-not-meet-requirements"===C.code&&Fn(v),C});return function(C){return I.apply(this,arguments)}}())}(this._delegate,g,I))}signInWithEmailLink(g,I){return ln(this._delegate,function xS(v,f,g){return Yy.apply(this,arguments)}(this._delegate,g,I))}signInWithPhoneNumber(g,I){return As(this._delegate,function ab(v,f,g){return El.apply(this,arguments)}(this._delegate,g,I))}signInWithPopup(g){var I=this;return(0,h.Z)(function*(){return hr(wd(),I._delegate,"operation-not-supported-in-this-environment"),ln(I._delegate,function lb(v,f,g){return ac.apply(this,arguments)}(I._delegate,g,Ds))})()}signInWithRedirect(g){var I=this;return(0,h.Z)(function*(){return hr(wd(),I._delegate,"operation-not-supported-in-this-environment"),yield Cd(I._delegate),fd(I._delegate,g,Ds)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function C0(v,f){return pl.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=di,v})();function Rd(v,f,g){let I=v;"function"!=typeof v&&({next:I,error:f,complete:g}=v);const C=I;return{next:P=>C(P&&Bo.getOrCreate(P)),error:f,complete:g}}function np(v,f){const g=function r_(v,f){const g=tp();if(!g)return[];const I=tr(Xf,v,f);switch(g.getItem(I)){case di.NONE:return[On];case di.LOCAL:return[vl,ds];case di.SESSION:return[ds];default:return[]}}(v,f);if(typeof self<"u"&&!g.includes(vl)&&g.push(vl),typeof window<"u")for(const I of[ad,ds])g.includes(I)||g.push(I);return g.includes(On)||g.push(On),g}class ya{constructor(){this.providerId="phone",this._delegate=new sc(hi(de.Z.auth()))}static credential(f,g){return sc.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}ya.PHONE_SIGN_IN_METHOD=sc.PHONE_SIGN_IN_METHOD,ya.PROVIDER_ID=sc.PROVIDER_ID;const Tb=O;class rp{constructor(f,g,I=de.Z.app()){var C;Tb(null===(C=I.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new ob(I.auth(),f,g),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function i_(v){v.INTERNAL.registerComponent(new lt.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),I=f.getProvider("auth");return new Vl(g,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:hf,FacebookAuthProvider:ff,GithubAuthProvider:rr,GoogleAuthProvider:xt,OAuthProvider:Xa,SAMLAuthProvider:dl,PhoneAuthProvider:ya,PhoneMultiFactorGenerator:Sl,RecaptchaVerifier:rp,TwitterAuthProvider:bm,Auth:Vl,AuthCredential:Ka,Error:H.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.5.1")}(de.Z)},861:(nn,Ke,Q)=>{function h(H,ve,Re,ye,lt,Mt,Be){try{var G=H[Mt](Be),B=G.value}catch(te){return void Re(te)}G.done?ve(B):Promise.resolve(B).then(ye,lt)}function de(H){return function(){var ve=this,Re=arguments;return new Promise(function(ye,lt){var Mt=H.apply(ve,Re);function Be(B){h(Mt,ye,lt,Be,G,"next",B)}function G(B){h(Mt,ye,lt,Be,G,"throw",B)}Be(void 0)})}}Q.d(Ke,{Z:()=>de})},582:(nn,Ke,Q)=>{function ve(Y,J){var se={};for(var oe in Y)Object.prototype.hasOwnProperty.call(Y,oe)&&J.indexOf(oe)<0&&(se[oe]=Y[oe]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(oe=Object.getOwnPropertySymbols(Y);ae<oe.length;ae++)J.indexOf(oe[ae])<0&&Object.prototype.propertyIsEnumerable.call(Y,oe[ae])&&(se[oe[ae]]=Y[oe[ae]])}return se}function te(Y,J,se,oe){return new(se||(se=Promise))(function(he,rt){function Ut(qt){try{Qe(oe.next(qt))}catch(Pn){rt(Pn)}}function er(qt){try{Qe(oe.throw(qt))}catch(Pn){rt(Pn)}}function Qe(qt){qt.done?he(qt.value):function ae(he){return he instanceof se?he:new se(function(rt){rt(he)})}(qt.value).then(Ut,er)}Qe((oe=oe.apply(Y,J||[])).next())})}function ht(Y){return this instanceof ht?(this.v=Y,this):new ht(Y)}function Ce(Y,J,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,oe=se.apply(Y,J||[]),he=[];return ae={},rt("next"),rt("throw"),rt("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function rt(En){oe[En]&&(ae[En]=function(Sr){return new Promise(function(Rr,pn){he.push([En,Sr,Rr,pn])>1||Ut(En,Sr)})})}function Ut(En,Sr){try{!function er(En){En.value instanceof ht?Promise.resolve(En.value.v).then(Qe,qt):Pn(he[0][2],En)}(oe[En](Sr))}catch(Rr){Pn(he[0][3],Rr)}}function Qe(En){Ut("next",En)}function qt(En){Ut("throw",En)}function Pn(En,Sr){En(Sr),he.shift(),he.length&&Ut(he[0][0],he[0][1])}}function Gt(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,J=Y[Symbol.asyncIterator];return J?J.call(Y):(Y=function St(Y){var J="function"==typeof Symbol&&Symbol.iterator,se=J&&Y[J],oe=0;if(se)return se.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&oe>=Y.length&&(Y=void 0),{value:Y&&Y[oe++],done:!Y}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),se={},oe("next"),oe("throw"),oe("return"),se[Symbol.asyncIterator]=function(){return this},se);function oe(he){se[he]=Y[he]&&function(rt){return new Promise(function(Ut,er){!function ae(he,rt,Ut,er){Promise.resolve(er).then(function(Qe){he({value:Qe,done:Ut})},rt)}(Ut,er,(rt=Y[he](rt)).done,rt.value)})}}}Q.d(Ke,{FC:()=>Ce,KL:()=>Gt,_T:()=>ve,mG:()=>te,qq:()=>ht}),"function"==typeof SuppressedError&&SuppressedError}},nn=>{nn(nn.s=172)}]);