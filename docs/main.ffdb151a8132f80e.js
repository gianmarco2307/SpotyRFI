"use strict";(self.webpackChunkSpotyRFI=self.webpackChunkSpotyRFI||[]).push([[179],{58:(Bi,An,Be)=>{Be.d(An,{BH:()=>At,G6:()=>_i,L:()=>Je,LL:()=>V,Pz:()=>pt,Sg:()=>ur,UG:()=>K,ZB:()=>we,ZR:()=>Y,aH:()=>Nt,b$:()=>dn,eu:()=>F,hl:()=>O,jU:()=>$t,m9:()=>Ps,ne:()=>$i,pd:()=>Ma,r3:()=>Yn,ru:()=>Ot,tV:()=>Q,uI:()=>_n,vZ:()=>ji,w1:()=>mi,xO:()=>Pa,xb:()=>Tr,z$:()=>qe,zd:()=>ei});const Ne=function(D){const T=[];let A=0;for(let q=0;q<D.length;q++){let M=D.charCodeAt(q);M<128?T[A++]=M:M<2048?(T[A++]=M>>6|192,T[A++]=63&M|128):55296==(64512&M)&&q+1<D.length&&56320==(64512&D.charCodeAt(q+1))?(M=65536+((1023&M)<<10)+(1023&D.charCodeAt(++q)),T[A++]=M>>18|240,T[A++]=M>>12&63|128,T[A++]=M>>6&63|128,T[A++]=63&M|128):(T[A++]=M>>12|224,T[A++]=M>>6&63|128,T[A++]=63&M|128)}return T},jt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(D,T){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let M=0;M<D.length;M+=3){const G=D[M],Oe=M+1<D.length,Ge=Oe?D[M+1]:0,gt=M+2<D.length,zt=gt?D[M+2]:0;let Mn=(15&Ge)<<2|zt>>6,wt=63&zt;gt||(wt=64,Oe||(Mn=64)),q.push(A[G>>2],A[(3&G)<<4|Ge>>4],A[Mn],A[wt])}return q.join("")},encodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(D):this.encodeByteArray(Ne(D),T)},decodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(D):function(D){const T=[];let A=0,q=0;for(;A<D.length;){const M=D[A++];if(M<128)T[q++]=String.fromCharCode(M);else if(M>191&&M<224){const G=D[A++];T[q++]=String.fromCharCode((31&M)<<6|63&G)}else if(M>239&&M<365){const gt=((7&M)<<18|(63&D[A++])<<12|(63&D[A++])<<6|63&D[A++])-65536;T[q++]=String.fromCharCode(55296+(gt>>10)),T[q++]=String.fromCharCode(56320+(1023&gt))}else{const G=D[A++],Oe=D[A++];T[q++]=String.fromCharCode((15&M)<<12|(63&G)<<6|63&Oe)}}return T.join("")}(this.decodeStringToByteArray(D,T))},decodeStringToByteArray(D,T){this.init_();const A=T?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let M=0;M<D.length;){const G=A[D.charAt(M++)],Ge=M<D.length?A[D.charAt(M)]:0;++M;const zt=M<D.length?A[D.charAt(M)]:64;++M;const ye=M<D.length?A[D.charAt(M)]:64;if(++M,null==G||null==Ge||null==zt||null==ye)throw new Qt;q.push(G<<2|Ge>>4),64!==zt&&(q.push(Ge<<4&240|zt>>2),64!==ye&&q.push(zt<<6&192|ye))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class Qt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Je=function(D){return function(D){const T=Ne(D);return jt.encodeByteArray(T,!0)}(D).replace(/\./g,"")},Q=function(D){try{return jt.decodeString(D,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function we(D,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===D&&(D={});break;case Array:D=[];break;default:return T}for(const A in T)!T.hasOwnProperty(A)||!Qe(A)||(D[A]=we(D[A],T[A]));return D}function Qe(D){return"__proto__"!==D}const ze=()=>{try{return function lt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const D=process.env.__FIREBASE_DEFAULTS__;return D?JSON.parse(D):void 0})()||(()=>{if(typeof document>"u")return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=D&&Q(D[1]);return T&&JSON.parse(T)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},Nt=()=>{var D;return null===(D=ze())||void 0===D?void 0:D.config},pt=D=>{var T;return null===(T=ze())||void 0===T?void 0:T[`_${D}`]};class At{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,A)=>{this.resolve=T,this.reject=A})}wrapCallback(T){return(A,q)=>{A?this.reject(A):this.resolve(q),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(A):T(A,q))}}}function ur(D,T){if(D.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=T||"demo-project",M=D.iat||0,G=D.sub||D.user_id;if(!G)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Oe=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:M,exp:M+3600,auth_time:M,sub:G,user_id:G,firebase:{sign_in_provider:"custom",identities:{}}},D);return[Je(JSON.stringify({alg:"none",type:"JWT"})),Je(JSON.stringify(Oe)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _n(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function K(){var D;const T=null===(D=ze())||void 0===D?void 0:D.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $t(){return"object"==typeof self&&self.self===self}function Ot(){const D="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof D&&void 0!==D.id}function dn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mi(){const D=qe();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function _i(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O(){try{return"object"==typeof indexedDB}catch{return!1}}function F(){return new Promise((D,T)=>{try{let A=!0;const q="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(q);M.onsuccess=()=>{M.result.close(),A||self.indexedDB.deleteDatabase(q),D(!0)},M.onupgradeneeded=()=>{A=!1},M.onerror=()=>{var G;T((null===(G=M.error)||void 0===G?void 0:G.message)||"")}}catch(A){T(A)}})}class Y extends Error{constructor(T,A,q){super(A),this.code=T,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,V.prototype.create)}}class V{constructor(T,A,q){this.service=T,this.serviceName=A,this.errors=q}create(T,...A){const q=A[0]||{},M=`${this.service}/${T}`,G=this.errors[T],Oe=G?function de(D,T){return D.replace(rt,(A,q)=>{const M=T[q];return null!=M?String(M):`<${q}?>`})}(G,q):"Error";return new Y(M,`${this.serviceName}: ${Oe} (${M}).`,q)}}const rt=/\{\$([^}]+)}/g;function Yn(D,T){return Object.prototype.hasOwnProperty.call(D,T)}function Tr(D){for(const T in D)if(Object.prototype.hasOwnProperty.call(D,T))return!1;return!0}function ji(D,T){if(D===T)return!0;const A=Object.keys(D),q=Object.keys(T);for(const M of A){if(!q.includes(M))return!1;const G=D[M],Oe=T[M];if(vn(G)&&vn(Oe)){if(!ji(G,Oe))return!1}else if(G!==Oe)return!1}for(const M of q)if(!A.includes(M))return!1;return!0}function vn(D){return null!==D&&"object"==typeof D}function Pa(D){const T=[];for(const[A,q]of Object.entries(D))Array.isArray(q)?q.forEach(M=>{T.push(encodeURIComponent(A)+"="+encodeURIComponent(M))}):T.push(encodeURIComponent(A)+"="+encodeURIComponent(q));return T.length?"&"+T.join("&"):""}function ei(D){const T={};return D.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[M,G]=q.split("=");T[decodeURIComponent(M)]=decodeURIComponent(G)}}),T}function Ma(D){const T=D.indexOf("?");if(!T)return"";const A=D.indexOf("#",T);return D.substring(T,A>0?A:void 0)}function $i(D,T){const A=new so(D,T);return A.subscribe.bind(A)}class so{constructor(T,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{T(this)}).catch(q=>{this.error(q)})}next(T){this.forEachObserver(A=>{A.next(T)})}error(T){this.forEachObserver(A=>{A.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,A,q){let M;if(void 0===T&&void 0===A&&void 0===q)throw new Error("Missing Observer.");M=function Go(D,T){if("object"!=typeof D||null===D)return!1;for(const A of T)if(A in D&&"function"==typeof D[A])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:A,complete:q},void 0===M.next&&(M.next=kt),void 0===M.error&&(M.error=kt),void 0===M.complete&&(M.complete=kt);const G=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),G}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,T)}sendOne(T,A){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{A(this.observers[T])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kt(){}function Ps(D){return D&&D._delegate?D._delegate:D}},666:(Bi,An,Be)=>{function I(t){return"function"==typeof t}function xe(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const U=xe(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ne(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(o){e=o instanceof U?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{bn(o)}catch(s){e=e??[],s instanceof U?e=[...e,...s.errors]:e.push(s)}}if(e)throw new U(e)}}add(e){var n;if(e&&e!==this)if(this.closed)bn(e);else{if(e instanceof ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ne(n,e)}remove(e){const{_finalizers:n}=this;n&&Ne(n,e),e instanceof ct&&e._removeParent(this)}}ct.EMPTY=(()=>{const t=new ct;return t.closed=!0,t})();const jt=ct.EMPTY;function Qt(t){return t instanceof ct||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function bn(t){I(t)?t():t.unsubscribe()}const Je={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Q={setTimeout(t,e,...n){const{delegate:r}=Q;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Q;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function re(t){Q.setTimeout(()=>{const{onUnhandledError:e}=Je;if(!e)throw t;e(t)})}function we(){}const Qe=ft("C",void 0,void 0);function ft(t,e,n){return{kind:t,value:e,error:n}}let Fe=null;function ze(t){if(Je.useDeprecatedSynchronousErrorHandling){const e=!Fe;if(e&&(Fe={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Fe;if(Fe=null,n)throw r}}else t()}class Pn extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qt(e)&&e.add(this)):this.destination=$t}static create(e,n,r){return new ur(e,n,r)}next(e){this.isStopped?K(function Sn(t){return ft("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?K(function lt(t){return ft("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?K(Qe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Nt=Function.prototype.bind;function pt(t,e){return Nt.call(t,e)}class At{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qe(r)}else qe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qe(n)}}}class ur extends Pn{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Je.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&pt(e.next,o),error:e.error&&pt(e.error,o),complete:e.complete&&pt(e.complete,o)}):i=e}this.destination=new At(i)}}function qe(t){Je.useDeprecatedSynchronousErrorHandling?function Rn(t){Je.useDeprecatedSynchronousErrorHandling&&Fe&&(Fe.errorThrown=!0,Fe.error=t)}(t):re(t)}function K(t,e){const{onStoppedNotification:n}=Je;n&&Q.setTimeout(()=>n(t,e))}const $t={closed:!0,next:we,error:function _n(t){throw t},complete:we},Ot="function"==typeof Symbol&&Symbol.observable||"@@observable";function dn(t){return t}function mi(t){return 0===t.length?dn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let st=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function O(t){return t&&t instanceof Pn||function _i(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&Qt(t)}(n)?n:new ur(n,r,i);return ze(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=qo(r))((i,o)=>{const s=new ur({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ot](){return this}pipe(...n){return mi(n)(this)}toPromise(n){return new(n=qo(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function qo(t){var e;return null!==(e=t??Je.Promise)&&void 0!==e?e:Promise}const F=xe(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let B=(()=>{class t extends st{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new H(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new F}next(n){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?jt:(this.currentObservers=null,o.push(n),new ct(()=>{this.currentObservers=null,Ne(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new st;return n.source=this,n}}return t.create=(e,n)=>new H(e,n),t})();class H extends B{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:jt}}function Y(t){return I(t?.lift)}function V(t){return e=>{if(Y(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(t,e,n,r,i){return new rt(t,e,n,r,i)}class rt extends Pn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ce(t,e){return V((n,r)=>{let i=0;n.subscribe(de(r,o=>{r.next(t.call(e,o,i++))}))})}var Te=Be(582);const at=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ht(t){return I(t?.then)}function Rt(t){return I(t[Ot])}function Hn(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function yn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const cr=function Yn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Tr(t){return I(t?.[cr])}function Ra(t){return(0,Te.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Te.qq)(n.read());if(i)return yield(0,Te.qq)(void 0);yield yield(0,Te.qq)(r)}}finally{n.releaseLock()}})}function ji(t){return I(t?.getReader)}function vn(t){if(t instanceof st)return t;if(null!=t){if(Rt(t))return function As(t){return new st(e=>{const n=t[Ot]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(at(t))return function Pa(t){return new st(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Ht(t))return function ei(t){return new st(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,re)})}(t);if(Hn(t))return lr(t);if(Tr(t))return function Ma(t){return new st(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(ji(t))return function $i(t){return lr(Ra(t))}(t)}throw yn(t)}function lr(t){return new st(e=>{(function so(t,e){var n,r,i,o;return(0,Te.mG)(this,void 0,void 0,function*(){try{for(n=(0,Te.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function zn(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function kt(t,e,n=1/0){return I(e)?kt((r,i)=>Ce((o,s)=>e(r,o,i,s))(vn(t(r,i))),n):("number"==typeof e&&(n=e),V((r,i)=>function Go(t,e,n,r,i,o,s,a){const u=[];let d=0,p=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},v=C=>d<r?E(C):u.push(C),E=C=>{o&&e.next(C),d++;let S=!1;vn(n(C,p++)).subscribe(de(e,N=>{i?.(N),o?v(N):e.next(N)},()=>{S=!0},void 0,()=>{if(S)try{for(d--;u.length&&d<r;){const N=u.shift();s?zn(e,s,()=>E(N)):E(N)}_()}catch(N){e.error(N)}}))};return t.subscribe(de(e,v,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function ti(t=1/0){return kt(dn,t)}const In=new st(t=>t.complete());function ao(t){return t[t.length-1]}function uo(t){return function $r(t){return t&&I(t.schedule)}(ao(t))?t.pop():void 0}function Jn(t,e=0){return V((n,r)=>{n.subscribe(de(r,i=>zn(r,t,()=>r.next(i),e),()=>zn(r,t,()=>r.complete(),e),i=>zn(r,t,()=>r.error(i),e)))})}function dr(t,e=0){return V((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Ps(t,e){if(!t)throw new Error("Iterable cannot be null");return new st(n=>{zn(n,e,()=>{const r=t[Symbol.asyncIterator]();zn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function A(t,e){return e?function T(t,e){if(null!=t){if(Rt(t))return function co(t,e){return vn(t).pipe(dr(e),Jn(e))}(t,e);if(at(t))return function rc(t,e){return new st(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Ht(t))return function Rs(t,e){return vn(t).pipe(dr(e),Jn(e))}(t,e);if(Hn(t))return Ps(t,e);if(Tr(t))return function Na(t,e){return new st(n=>{let r;return zn(n,e,()=>{r=t[cr](),zn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(ji(t))return function D(t,e){return Ps(Ra(t),e)}(t,e)}throw yn(t)}(t,e):vn(t)}function q(...t){const e=uo(t),n=function Ss(t,e){return"number"==typeof ao(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?vn(r[0]):ti(n)(A(r,e)):In}class M extends B{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function G(...t){return A(t,uo(t))}function Oe(t={}){const{connector:e=(()=>new B),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,d=0,p=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),s=u=void 0,p=g=!1},E=()=>{const C=s;v(),C?.unsubscribe()};return V((C,S)=>{d++,!g&&!p&&_();const N=u=u??e();S.add(()=>{d--,0===d&&!g&&!p&&(a=Ge(E,i))}),N.subscribe(S),!s&&d>0&&(s=new ur({next:R=>N.next(R),error:R=>{g=!0,_(),a=Ge(v,n,R),N.error(R)},complete:()=>{p=!0,_(),a=Ge(v,r),N.complete()}}),vn(C).subscribe(s))})(o)}}function Ge(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new ur({next:()=>{r.unsubscribe(),t()}});return vn(e(...n)).subscribe(r)}function gt(t,e){return V((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(de(r,u=>{i?.unsubscribe();let d=0;const p=o++;vn(t(u,p)).subscribe(i=de(r,g=>r.next(e?e(u,g,p,d++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function zt(t,e=dn){return t=t??En,V((n,r)=>{let i,o=!0;n.subscribe(de(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function En(t,e){return t===e}function ye(t){for(let e in t)if(t[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function wt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(wt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function yi(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ic=ye({__forward_ref__:ye});function L(t){return t.__forward_ref__=L,t.toString=function(){return wt(this())},t}function b(t){return ee(t)?t():t}function ee(t){return"function"==typeof t&&t.hasOwnProperty(ic)&&t.__forward_ref__===L}function ve(t){return t&&!!t.\u0275providers}const Xe="https://g.co/ng/security#xss";class W extends Error{constructor(e,n){super(function Yt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ie(t){return"string"==typeof t?t:null==t?"":String(t)}function Oa(t,e){throw new W(-201,!1)}function hr(t,e){null==t&&function Pe(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Se(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ni(t){return{providers:t.providers||[],imports:t.imports||[]}}function ka(t){return Sd(t,Fa)||Sd(t,Xp)}function Sd(t,e){return t.hasOwnProperty(e)?t[e]:null}function Hi(t){return t&&(t.hasOwnProperty(La)||t.hasOwnProperty(Rd))?t[La]:null}const Fa=ye({\u0275prov:ye}),La=ye({\u0275inj:ye}),Xp=ye({ngInjectableDef:ye}),Rd=ye({ngInjectorDef:ye});var et=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(et||{});let Va;function qn(t){const e=Va;return Va=t,e}function tg(t,e,n){const r=ka(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&et.Optional?null:void 0!==e?e:void Oa(wt(t))}const mt=globalThis;class he{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Se({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Dr={},$a="__NG_DI_FLAG__",sc="ngTempTokenPath",Pv=/\n/gm,ag="__source";let ho;function Ii(t){const e=ho;return ho=t,e}function xv(t,e=et.Default){if(void 0===ho)throw new W(-203,!1);return null===ho?tg(t,void 0,e):ho.get(t,e&et.Optional?null:void 0,e)}function ie(t,e=et.Default){return(function eg(){return Va}()||xv)(b(t),e)}function fe(t,e=et.Default){return ie(t,uc(e))}function uc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function xd(t){const e=[];for(let n=0;n<t.length;n++){const r=b(t[n]);if(Array.isArray(r)){if(0===r.length)throw new W(900,!1);let i,o=et.Default;for(let s=0;s<r.length;s++){const a=r[s],u=eA(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(ie(i,o))}else e.push(ie(r))}return e}function zi(t,e){return t[$a]=e,t.prototype[$a]=e,t}function eA(t){return t[$a]}function fr(t){return{toString:t}.toString()}var Gi=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Gi||{}),Hr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Hr||{});const ri={},ut=[],cc=ye({\u0275cmp:ye}),fo=ye({\u0275dir:ye}),Od=ye({\u0275pipe:ye}),Ha=ye({\u0275mod:ye}),Ei=ye({\u0275fac:ye}),xs=ye({__NG_ELEMENT_ID__:ye}),lc=ye({__NG_ENV_ID__:ye});function Ar(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function dc(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];hc(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function ug(t){return 3===t||4===t||6===t}function hc(t){return 64===t.charCodeAt(0)}function po(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||kd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function kd(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const Fd="ng-template";function Nv(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if("string"==typeof o&&i){const s=t[r++];if(n&&"class"===o&&-1!==Ar(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function fc(t){return 4===t.type&&t.value!==Fd}function Ld(t,e,n){return e===(4!==t.type||n?t.value:Fd)}function Vd(t,e,n){let r=4;const i=t.attrs||[],o=function cg(t){for(let e=0;e<t.length;e++)if(ug(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Ld(t,u,n)||""===u&&1===e.length){if(pr(r))return!1;s=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Nv(t.attrs,d,n)){if(pr(r))return!1;s=!0}continue}const g=Ud(8&r?"class":u,i,fc(t),n);if(-1===g){if(pr(r))return!1;s=!0;continue}if(""!==d){let _;_=g>o?"":i[g+1].toLowerCase();const v=8&r?_:null;if(v&&-1!==Ar(v,d,0)||2&r&&d!==_){if(pr(r))return!1;s=!0}}}}else{if(!s&&!pr(r)&&!pr(u))return!1;if(s&&pr(u))continue;s=!1,r=u|1&r}}return pr(r)||s}function pr(t){return 0==(1&t)}function Ud(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function $d(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Bd(t,e,n=!1){for(let r=0;r<e.length;r++)if(Vd(t,e[r],n))return!0;return!1}function gc(t,e){return t?":not("+e.trim()+")":e}function lg(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!pr(s)&&(e+=gc(o,i),i=""),r=s,o=o||!pr(r);n++}return""!==i&&(e+=gc(o,i)),e}function br(t){return fr(()=>{const e=_c(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Gi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Hr.Emulated,styles:t.styles||ut,_:null,schemas:t.schemas||null,tView:null,id:""};hg(n);const r=t.dependencies;return n.directiveDefs=Ns(r,!1),n.pipeDefs=Ns(r,!0),n.id=function qd(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function zd(t){return tt(t)||hn(t)}function kv(t){return null!==t}function ii(t){return fr(()=>({type:t.type,bootstrap:t.bootstrap||ut,declarations:t.declarations||ut,imports:t.imports||ut,exports:t.exports||ut,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function mc(t,e){if(null==t)return ri;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function xn(t){return fr(()=>{const e=_c(t);return hg(e),e})}function tt(t){return t[cc]||null}function hn(t){return t[fo]||null}function Xn(t){return t[Od]||null}function Sr(t,e){const n=t[Ha]||null;if(!n&&!0===e)throw new Error(`Type ${wt(t)} does not have '\u0275mod' property.`);return n}function _c(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ri,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ut,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mc(t.inputs,e),outputs:mc(t.outputs)}}function hg(t){t.features?.forEach(e=>e(t))}function Ns(t,e){if(!t)return null;const n=e?Xn:zd;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(kv)}const Jt=0,ce=1,je=2,bt=3,oi=4,qa=5,wn=6,Os=7,rn=8,wi=9,ks=10,ke=11,Ga=12,yc=13,Fs=14,qt=15,Wa=16,mo=17,Ti=18,Wo=19,pg=20,Ci=21,Wi=22,Za=23,Ls=24,Ke=25,_o=1,Gd=2,Di=7,Vs=9,On=11;function Rr(t){return Array.isArray(t)&&"object"==typeof t[_o]}function gr(t){return Array.isArray(t)&&!0===t[_o]}function Qa(t){return 0!=(4&t.flags)}function Zo(t){return t.componentOffset>-1}function Ic(t){return 1==(1&t.flags)}function Ai(t){return!!t.template}function gg(t){return 0!=(512&t[je])}function bi(t,e){return t.hasOwnProperty(Ei)?t[Ei]:null}let kn=null,yo=!1;function zr(t){const e=kn;return kn=t,e}const on={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ec(t){if(!Io(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Tg(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function wg(t){t.dirty=!0,function Eg(t){if(void 0===t.liveConsumerNode)return;const e=yo;yo=!0;try{for(const n of t.liveConsumerNode)n.dirty||wg(n)}finally{yo=e}}(t),t.consumerMarkedDirty?.(t)}function Qd(t){return t&&(t.nextProducerIndex=0),zr(t)}function wc(t,e){if(zr(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Io(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)vo(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Tg(t){Bs(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Ec(n),r!==n.version))return!0}return!1}function Ja(t){if(Bs(t),Io(t))for(let e=0;e<t.producerNode.length;e++)vo(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function vo(t,e){if(function Tc(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Bs(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)vo(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Bs(i),i.producerIndexOfThis[r]=e}}function Io(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Bs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Ag=null;const Rg=()=>{},$v=(()=>({...on,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Rg}))();class Hv{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Eo(){return Pg}function Pg(t){return t.type.prototype.ngOnChanges&&(t.setInput=qv),zv}function zv(){const t=Mg(this),e=t?.current;if(e){const n=t.previous;if(n===ri)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function qv(t,e,n,r){const i=this.declaredInputs[n],o=Mg(t)||function eh(t,e){return t[Dc]=e}(t,{previous:ri,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new Hv(u&&u.currentValue,e,a===ri),t[r]=e}Eo.ngInherit=!0;const Dc="__ngSimpleChanges__";function Mg(t){return t[Dc]||null}const Si=function(t,e,n){};function It(t){for(;Array.isArray(t);)t=t[Jt];return t}function $s(t,e){return It(e[t])}function Tn(t,e){return It(e[t.index])}function bc(t,e){return t.data[e]}function Pr(t,e){const n=e[t];return Rr(n)?n:n[Jt]}function wo(t,e){return null==e?null:t[e]}function Ng(t){t[mo]=0}function oh(t){1024&t[je]||(t[je]|=1024,Sc(t,1))}function Og(t){1024&t[je]&&(t[je]&=-1025,Sc(t,-1))}function Sc(t,e){let n=t[bt];if(null===n)return;n[qa]+=e;let r=n;for(n=n[bt];null!==n&&(1===e&&1===r[qa]||-1===e&&0===r[qa]);)n[qa]+=e,r=n,n=n[bt]}const Me={lFrame:jg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Pc(){return Me.bindingsEnabled}function J(){return Me.lFrame.lView}function nt(){return Me.lFrame.tView}function ch(t){return Me.lFrame.contextLView=t,t[rn]}function lh(t){return Me.lFrame.contextLView=null,t}function fn(){let t=Ug();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ug(){return Me.lFrame.currentTNode}function qr(t,e){const n=Me.lFrame;n.currentTNode=t,n.isParent=e}function dh(){return Me.lFrame.isParent}function Zi(){return Me.lFrame.bindingIndex}function Jo(){return Me.lFrame.bindingIndex++}function Ri(t){const e=Me.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function gh(t,e){const n=Me.lFrame;n.bindingIndex=n.bindingRootIndex=t,mh(e)}function mh(t){Me.lFrame.currentDirectiveIndex=t}function yh(t){Me.lFrame.currentQueryIndex=t}function Xv(t){const e=t[ce];return 2===e.type?e.declTNode:1===e.type?t[wn]:null}function vh(t,e,n){if(n&et.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&et.Host||(i=Xv(o),null===i||(o=o[Fs],10&i.type))););if(null===i)return!1;e=i,t=o}const r=Me.lFrame=ru();return r.currentTNode=e,r.lView=t,!0}function Ih(t){const e=ru(),n=t[ce];Me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ru(){const t=Me.lFrame,e=null===t?null:t.child;return null===e?jg(t):e}function jg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function $g(){const t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Hg=$g;function Eh(){const t=$g();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function er(){return Me.lFrame.selectedIndex}function Xo(t){Me.lFrame.selectedIndex=t}function Pt(){const t=Me.lFrame;return bc(t.tView,t.selectedIndex)}let wh=!0;function Nc(){return wh}function Co(t){wh=t}function Oc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=p&&(t.destroyHooks??=[]).push(n,p)}}function kc(t,e,n){qg(t,e,3,n)}function zs(t,e,n,r){(3&t[je])===n&&qg(t,e,n,r)}function iu(t,e){let n=t[je];(3&n)===e&&(n&=8191,n+=1,t[je]=n)}function qg(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[mo]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[mo]+=65536),(a<o||-1==o)&&(aI(t,n,e,u),t[mo]=(4294901760&t[mo])+u+2),u++}function Fc(t,e){Si(4,t,e);const n=zr(null);try{e.call(t)}finally{zr(n),Si(5,t,e)}}function aI(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[je]>>13<t[mo]>>16&&(3&t[je])===e&&(t[je]+=8192,Fc(a,o)):Fc(a,o)}const es=-1;class ou{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Ch(t){return t!==es}function su(t){return 32767&t}function au(t,e){let n=function lI(t){return t>>16}(t),r=e;for(;n>0;)r=r[Fs],n--;return r}let Dh=!0;function uu(t){const e=Dh;return Dh=t,e}const dI=255,Do=5;let hI=0;const Pi={};function Vc(t,e){const n=Kg(t,e);if(-1!==n)return n;const r=e[ce];r.firstCreatePass&&(t.injectorIndex=e.length,cu(r.data,t),cu(e,null),cu(r.blueprint,null));const i=Uc(t,e),o=t.injectorIndex;if(Ch(i)){const s=su(i),a=au(i,e),u=a[ce].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|u[s+d]}return e[o+8]=i,o}function cu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Kg(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Uc(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=nm(i),null===r)return es;if(n++,i=i[Fs],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return es}function lu(t,e,n){!function Ah(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(xs)&&(r=n[xs]),null==r&&(r=n[xs]=hI++);const i=r&dI;e.data[t+(i>>Do)]|=1<<i}(t,e,n)}function Qg(t,e,n){if(n&et.Optional||void 0!==t)return t;Oa()}function Bc(t,e,n,r){if(n&et.Optional&&void 0===r&&(r=null),!(n&(et.Self|et.Host))){const i=t[wi],o=qn(void 0);try{return i?i.get(e,r,n&et.Optional):tg(e,r,n&et.Optional)}finally{qn(o)}}return Qg(r,0,n)}function Yg(t,e,n,r=et.Default,i){if(null!==t){if(2048&e[je]&&!(r&et.Self)){const s=function mI(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[je]&&!(512&s[je]);){const a=Jg(o,s,n,r|et.Self,Pi);if(a!==Pi)return a;let u=o.parent;if(!u){const d=s[pg];if(d){const p=d.get(n,Pi,r);if(p!==Pi)return p}u=nm(s),s=s[Fs]}o=u}return i}(t,e,n,r,Pi);if(s!==Pi)return s}const o=Jg(t,e,n,r,Pi);if(o!==Pi)return o}return Bc(e,n,r,i)}function Jg(t,e,n,r,i){const o=function Xg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(xs)?t[xs]:void 0;return"number"==typeof e?e>=0?e&dI:gI:e}(n);if("function"==typeof o){if(!vh(e,t,r))return r&et.Host?Qg(i,0,r):Bc(e,n,r,i);try{let s;if(s=o(r),null!=s||r&et.Optional)return s;Oa()}finally{Hg()}}else if("number"==typeof o){let s=null,a=Kg(t,e),u=es,d=r&et.Host?e[qt][wn]:null;for((-1===a||r&et.SkipSelf)&&(u=-1===a?Uc(t,e):e[a+8],u!==es&&em(r,!1)?(s=e[ce],a=su(u),e=au(u,e)):a=-1);-1!==a;){const p=e[ce];if($c(o,a,p.data)){const g=pI(a,e,n,s,r,d);if(g!==Pi)return g}u=e[a+8],u!==es&&em(r,e[ce].data[a+8]===d)&&$c(o,a,e)?(s=p,a=su(u),e=au(u,e)):a=-1}}return i}function pI(t,e,n,r,i,o){const s=e[ce],a=s.data[t+8],p=function jc(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,p=o>>20,_=i?a+p:t.directiveEnd;for(let v=r?a:a+p;v<_;v++){const E=s[v];if(v<u&&n===E||v>=u&&E.type===n)return v}if(i){const v=s[u];if(v&&Ai(v)&&v.type===n)return u}return null}(a,s,n,null==r?Zo(a)&&Dh:r!=s&&0!=(3&a.type),i&et.Host&&o===a);return null!==p?ts(e,s,p,a):Pi}function ts(t,e,n,r){let i=t[n];const o=e.data;if(function Th(t){return t instanceof ou}(i)){const s=i;s.resolving&&function Ms(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ye(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ie(t)}(o[n]));const a=uu(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?qn(s.injectImpl):null;vh(t,r,et.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function sI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=Pg(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==d&&qn(d),uu(a),s.resolving=!1,Hg()}}return i}function $c(t,e,n){return!!(n[e+(t>>Do)]&1<<t)}function em(t,e){return!(t&et.Self||t&et.Host&&e)}class Ln{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Yg(this._tNode,this._lView,e,uc(r),n)}}function gI(){return new Ln(fn(),J())}function qs(t){return ee(t)?()=>{const e=qs(b(t));return e&&e()}:bi(t)}function nm(t){const e=t[ce],n=e.type;return 2===n?e.declTNode:1===n?t[wn]:null}const Gs="__parameters__";function Mi(t,e,n){return fr(()=>{const r=function Sh(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,d,p){const g=u.hasOwnProperty(Gs)?u[Gs]:Object.defineProperty(u,Gs,{value:[]})[Gs];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Zs(t,e){t.forEach(n=>Array.isArray(n)?Zs(n,e):e(n))}function zc(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ks(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function xr(t,e,n){let r=Qs(t,e);return r>=0?t[1|r]=n:(r=~r,function bo(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Rh(t,e){const n=Qs(t,e);if(n>=0)return t[1|n]}function Qs(t,e){return function tr(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const gu=zi(Mi("Optional"),8),Wc=zi(Mi("SkipSelf"),4);function gm(t){return 128==(128&t.flags)}var Js=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Js||{});const SI=new Map;let IV=0;const PI="__ngContext__";function mr(t,e){Rr(e)?(t[PI]=e[Wo],function wV(t){SI.set(t[Wo],t)}(e)):t[PI]=e}let MI;function xI(t,e){return MI(t,e)}function Fh(t){const e=t[bt];return gr(e)?e[bt]:e}function jA(t){return HA(t[Ga])}function $A(t){return HA(t[oi])}function HA(t){for(;null!==t&&!gr(t);)t=t[oi];return t}function Yc(t,e,n,r,i){if(null!=r){let o,s=!1;gr(r)?o=r:Rr(r)&&(s=!0,r=r[Jt]);const a=It(r);0===t&&null!==n?null==i?WA(e,n,a):_u(e,n,a,i||null,!0):1===t&&null!==n?_u(e,n,a,i||null,!0):2===t?function wm(t,e,n){const r=Im(t,e);r&&function jV(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function zV(t,e,n,r,i){const o=n[Di];o!==It(n)&&Yc(e,t,r,o,i);for(let a=On;a<n.length;a++){const u=n[a];Vh(u[ce],u,t,e,r,o)}}(e,t,o,n,i)}}function ym(t,e,n){return t.createElement(e,n)}function qA(t,e){const n=t[Vs],r=n.indexOf(e);Og(e),n.splice(r,1)}function vm(t,e){if(t.length<=On)return;const n=On+e,r=t[n];if(r){const i=r[Wa];null!==i&&i!==t&&qA(i,r),e>0&&(t[n-1][oi]=r[oi]);const o=Ks(t,On+e);!function NV(t,e){Vh(t,e,e[ke],2,null,null),e[Jt]=null,e[wn]=null}(r[ce],r);const s=o[Ti];null!==s&&s.detachView(o[ce]),r[bt]=null,r[oi]=null,r[je]&=-129}return r}function OI(t,e){if(!(256&e[je])){const n=e[ke];e[Za]&&Ja(e[Za]),e[Ls]&&Ja(e[Ls]),n.destroyNode&&Vh(t,e,n,3,null,null),function FV(t){let e=t[Ga];if(!e)return kI(t[ce],t);for(;e;){let n=null;if(Rr(e))n=e[Ga];else{const r=e[On];r&&(n=r)}if(!n){for(;e&&!e[oi]&&e!==t;)Rr(e)&&kI(e[ce],e),e=e[bt];null===e&&(e=t),Rr(e)&&kI(e[ce],e),n=e&&e[oi]}e=n}}(e)}}function kI(t,e){if(!(256&e[je])){e[je]&=-129,e[je]|=256,function BV(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof ou)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Si(4,a,u);try{u.call(a)}finally{Si(5,a,u)}}else{Si(4,i,o);try{o.call(i)}finally{Si(5,i,o)}}}}}(t,e),function UV(t,e){const n=t.cleanup,r=e[Os];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[Os]=null);const i=e[Ci];if(null!==i){e[Ci]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[ce].type&&e[ke].destroy();const n=e[Wa];if(null!==n&&gr(e[bt])){n!==e[bt]&&qA(n,e);const r=e[Ti];null!==r&&r.detachView(t)}!function TV(t){SI.delete(t[Wo])}(e)}}function FI(t,e,n){return function GA(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Jt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===Hr.None||o===Hr.Emulated)return null}return Tn(r,n)}}(t,e.parent,n)}function _u(t,e,n,r,i){t.insertBefore(e,n,r,i)}function WA(t,e,n){t.appendChild(e,n)}function ZA(t,e,n,r,i){null!==r?_u(t,e,n,r,i):WA(t,e,n)}function Im(t,e){return t.parentNode(e)}let LI,Tm,jI,Cm,YA=function QA(t,e,n){return 40&t.type?Tn(t,n):null};function Em(t,e,n,r){const i=FI(t,r,e),o=e[ke],a=function KA(t,e,n){return YA(t,e,n)}(r.parent||e[wn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)ZA(o,i,n[u],a,!1);else ZA(o,i,n,a,!1);void 0!==LI&&LI(o,r,e,n,i)}function Lh(t,e){if(null!==e){const n=e.type;if(3&n)return Tn(e,t);if(4&n)return VI(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Lh(t,r);{const i=t[e.index];return gr(i)?VI(-1,i):It(i)}}if(32&n)return xI(e,t)()||It(t[e.index]);{const r=XA(t,e);return null!==r?Array.isArray(r)?r[0]:Lh(Fh(t[qt]),r):Lh(t,e.next)}}return null}function XA(t,e){return null!==e?t[qt][wn].projection[e.projection]:null}function VI(t,e){const n=On+t+1;if(n<e.length){const r=e[n],i=r[ce].firstChild;if(null!==i)return Lh(r,i)}return e[Di]}function UI(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&mr(It(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)UI(t,e,n.child,r,i,o,!1),Yc(e,t,i,a,o);else if(32&u){const d=xI(n,r);let p;for(;p=d();)Yc(e,t,i,p,o);Yc(e,t,i,a,o)}else 16&u?tb(t,e,r,n,i,o):Yc(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Vh(t,e,n,r,i,o){UI(n,r,t.firstChild,e,i,o,!1)}function tb(t,e,n,r,i,o){const s=n[qt],u=s[wn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Yc(e,t,i,u[d],o);else{let d=u;const p=s[bt];gm(r)&&(d.flags|=128),UI(t,e,d,p,i,o,!0)}}function nb(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function rb(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&dc(t,e,r),null!==i&&nb(t,e,i),null!==o&&function GV(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function Jc(t){return function BI(){if(void 0===Tm&&(Tm=null,mt.trustedTypes))try{Tm=mt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Tm}()?.createHTML(t)||t}function sb(t){return function $I(){if(void 0===Cm&&(Cm=null,mt.trustedTypes))try{Cm=mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Cm}()?.createScriptURL(t)||t}class yu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xe})`}}class YV extends yu{getTypeName(){return"HTML"}}class JV extends yu{getTypeName(){return"Style"}}class XV extends yu{getTypeName(){return"Script"}}class e2 extends yu{getTypeName(){return"URL"}}class t2 extends yu{getTypeName(){return"ResourceURL"}}function ai(t){return t instanceof yu?t.changingThisBreaksApplicationSecurity:t}function So(t,e){const n=function n2(t){return t instanceof yu&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Xe})`)}return n===e}class u2{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Jc(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class c2{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Jc(e),n}}const d2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dm(t){return(t=String(t)).match(d2)?t:"unsafe:"+t}function rs(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Uh(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const ub=rs("area,br,col,hr,img,wbr"),cb=rs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),lb=rs("rp,rt"),HI=Uh(ub,Uh(cb,rs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Uh(lb,rs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Uh(lb,cb)),zI=rs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),db=Uh(zI,rs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),h2=rs("script,style,template");class f2{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!HI.hasOwnProperty(n))return this.sanitizedSomething=!0,!h2.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!db.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;zI[a]&&(u=Dm(u)),this.buf.push(" ",s,'="',hb(u),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();HI.hasOwnProperty(n)&&!ub.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(hb(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const p2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g2=/([^\#-~ |!])/g;function hb(t){return t.replace(/&/g,"&amp;").replace(p2,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(g2,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Am;function fb(t,e){let n=null;try{Am=Am||function ab(t){const e=new c2(t);return function l2(){try{return!!(new window.DOMParser).parseFromString(Jc(""),"text/html")}catch{return!1}}()?new u2(e):e}(t);let r=e?String(e):"";n=Am.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Am.getInertBodyElement(r)}while(r!==o);return Jc((new f2).sanitizeChildren(qI(n)||n))}finally{if(n){const r=qI(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function qI(t){return"content"in t&&function m2(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var xi=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(xi||{});function pb(t){const e=Bh();return e?e.sanitize(xi.URL,t)||"":So(t,"URL")?ai(t):Dm(Ie(t))}function GI(t){const e=Bh();if(e)return sb(e.sanitize(xi.RESOURCE_URL,t)||"");if(So(t,"ResourceURL"))return sb(ai(t));throw new W(904,!1)}function Bh(){const t=J();return t&&t[ks].sanitizer}const jh=new he("ENVIRONMENT_INITIALIZER"),mb=new he("INJECTOR",-1),_b=new he("INJECTOR_DEF_TYPES");class WI{get(e,n=Dr){if(n===Dr){const r=new Error(`NullInjectorError: No provider for ${wt(e)}!`);throw r.name="NullInjectorError",r}return n}}function T2(...t){return{\u0275providers:vb(0,t),\u0275fromNgModule:!0}}function vb(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Zs(e,s=>{const a=s;bm(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Ib(i,o),n}function Ib(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];ZI(i,o=>{e(o,r)})}}function bm(t,e,n,r){if(!(t=b(t)))return!1;let i=null,o=Hi(t);const s=!o&&tt(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=Hi(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of u)bm(d,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;r.add(i);try{Zs(o.imports,p=>{bm(p,e,n,r)&&(d||=[],d.push(p))})}finally{}void 0!==d&&Ib(d,e)}if(!a){const d=bi(i)||(()=>new i);e({provide:i,useFactory:d,deps:ut},i),e({provide:_b,useValue:i,multi:!0},i),e({provide:jh,useValue:()=>ie(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const d=t;ZI(u,p=>{e(p,d)})}}}return i!==t&&void 0!==t.providers}function ZI(t,e){for(let n of t)ve(n)&&(n=n.\u0275providers),Array.isArray(n)?ZI(n,e):e(n)}const C2=ye({provide:String,useValue:ye});function KI(t){return null!==t&&"object"==typeof t&&C2 in t}function vu(t){return"function"==typeof t}const QI=new he("Set Injector scope."),Sm={},A2={};let YI;function Rm(){return void 0===YI&&(YI=new WI),YI}class Ni{}class el extends Ni{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,XI(e,s=>this.processProvider(s)),this.records.set(mb,tl(void 0,this)),i.has("environment")&&this.records.set(Ni,tl(void 0,this));const o=this.records.get(QI);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_b.multi,ut,et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Ii(this),r=qn(void 0);try{return e()}finally{Ii(n),qn(r)}}get(e,n=Dr,r=et.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lc))return e[lc](this);r=uc(r);const o=Ii(this),s=qn(void 0);try{if(!(r&et.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function M2(t){return"function"==typeof t||"object"==typeof t&&t instanceof he}(e)&&ka(e);u=d&&this.injectableDefInScope(d)?tl(JI(e),Sm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&et.Self?Rm():this.parent).get(e,n=r&et.Optional&&n===Dr?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[sc]=a[sc]||[]).unshift(wt(e)),o)throw a;return function Nd(t,e,n,r){const i=t[sc];throw e[ag]&&i.unshift(e[ag]),t.message=function qi(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=wt(e);if(Array.isArray(e))i=e.map(wt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):wt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Pv,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[sc]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{qn(s),Ii(o)}}resolveInjectorInitializers(){const e=Ii(this),n=qn(void 0);try{const i=this.get(jh.multi,ut,et.Self);for(const o of i)o()}finally{Ii(e),qn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){let n=vu(e=b(e))?e:b(e&&e.provide);const r=function S2(t){return KI(t)?tl(void 0,t.useValue):tl(function Tb(t,e,n){let r;if(vu(t)){const i=b(t);return bi(i)||JI(i)}if(KI(t))r=()=>b(t.useValue);else if(function wb(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...xd(t.deps||[]));else if(function Eb(t){return!(!t||!t.useExisting)}(t))r=()=>ie(b(t.useExisting));else{const i=b(t&&(t.useClass||t.provide));if(!function R2(t){return!!t.deps}(t))return bi(i)||JI(i);r=()=>new i(...xd(t.deps))}return r}(t),Sm)}(e);if(vu(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=tl(void 0,Sm,!0),i.factory=()=>xd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Sm&&(n.value=A2,n.value=n.factory()),"object"==typeof n.value&&n.value&&function P2(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=b(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function JI(t){const e=ka(t),n=null!==e?e.factory:bi(t);if(null!==n)return n;if(t instanceof he)throw new W(204,!1);if(t instanceof Function)return function b2(t){const e=t.length;if(e>0)throw function fu(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new W(204,!1);const n=function Sv(t){return t&&(t[Fa]||t[Xp])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new W(204,!1)}function tl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function XI(t,e){for(const n of t)Array.isArray(n)?XI(n,e):n&&ve(n)?XI(n.\u0275providers,e):e(n)}const Pm=new he("AppId",{providedIn:"root",factory:()=>x2}),x2="ng",Cb=new he("Platform Initializer"),is=new he("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Db=new he("CSP nonce",{providedIn:"root",factory:()=>function Xc(){if(void 0!==jI)return jI;if(typeof document<"u")return document;throw new W(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ab=(t,e,n)=>null;function aE(t,e,n=!1){return Ab(t,e,n)}class $2{}class Rb{}class z2{resolveComponentFactory(e){throw function H2(t){const e=Error(`No component factory found for ${wt(t)}.`);return e.ngComponent=t,e}(e)}}let Fm=(()=>{class t{static#e=this.NULL=new z2}return t})();function q2(){return il(fn(),J())}function il(t,e){return new Xs(Tn(t,e))}let Xs=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=q2}return t})();class Mb{}let Lm=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function W2(){const t=J(),n=Pr(fn().index,t);return(Rr(n)?n:t)[ke]}()}return t})(),Z2=(()=>{class t{static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:()=>null})}return t})();class zh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const xb=new zh("16.2.11"),lE={};function Fb(t,e=null,n=null,r){const i=Lb(t,e,n,r);return i.resolveInjectorInitializers(),i}function Lb(t,e=null,n=null,r,i=new Set){const o=[n||ut,T2(t)];return r=r||("object"==typeof t?void 0:wt(t)),new el(o,e||Rm(),r||null,i)}let ui=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Dr;static#t=this.NULL=new WI;static create(n,r){if(Array.isArray(n))return Fb({name:""},r,n,"");{const i=n.name??"";return Fb({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Se({token:t,providedIn:"any",factory:()=>ie(mb)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function hE(t){return t.ngOriginalError}class os{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&hE(e);for(;n&&hE(n);)n=hE(n);return n||null}}function pE(t){return e=>{setTimeout(t,void 0,e)}}const Nr=class tU extends B{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=pE(o),i&&(i=pE(i)),s&&(s=pE(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof ct&&e.add(a),a}};function Ub(...t){}class Et{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nr(!1),this.onMicrotaskEmpty=new Nr(!1),this.onStable=new Nr(!1),this.onError=new Nr(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function nU(){const t="function"==typeof mt.requestAnimationFrame;let e=mt[t?"requestAnimationFrame":"setTimeout"],n=mt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function oU(t){const e=()=>{!function iU(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(mt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,mE(t),t.isCheckStableRunning=!0,gE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),mE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function aU(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return Bb(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),jb(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Bb(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),jb(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,mE(t),gE(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Et.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(Et.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,rU,Ub,Ub);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const rU={};function gE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Bb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function jb(t){t._nesting--,gE(t)}class sU{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nr,this.onMicrotaskEmpty=new Nr,this.onStable=new Nr,this.onError=new Nr}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const $b=new he("",{providedIn:"root",factory:Hb});function Hb(){const t=fe(Et);let e=!0;return q(new st(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new st(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{Et.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=t.onUnstable.subscribe(()=>{Et.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Oe()))}function ss(t){return t instanceof Function?t():t}let _E=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:()=>new t})}return t})();function qh(t){for(;t;){t[je]|=64;const e=Fh(t);if(gg(t)&&!e)return t;t=e}return null}const Zb=new he("",{providedIn:"root",factory:()=>!1});let Um=null;function Jb(t,e){return t[e]??tS()}function Xb(t,e){const n=tS();n.producerNode?.length&&(t[e]=Um,n.lView=t,Um=eS())}const _U={...on,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{qh(t.lView)},lView:null};function eS(){return Object.create(_U)}function tS(){return Um??=eS(),Um}const He={};function Oi(t){nS(nt(),J(),er()+t,!1)}function nS(t,e,n,r){if(!r)if(3==(3&e[je])){const o=t.preOrderCheckHooks;null!==o&&kc(e,o,n)}else{const o=t.preOrderHooks;null!==o&&zs(e,o,0,n)}Xo(n)}function Re(t,e=et.Default){const n=J();return null===n?ie(t,e):Yg(fn(),n,b(t),e)}function Bm(t,e,n,r,i,o,s,a,u,d,p){const g=e.blueprint.slice();return g[Jt]=i,g[je]=140|r,(null!==d||t&&2048&t[je])&&(g[je]|=2048),Ng(g),g[bt]=g[Fs]=t,g[rn]=n,g[ks]=s||t&&t[ks],g[ke]=a||t&&t[ke],g[wi]=u||t&&t[wi]||null,g[wn]=o,g[Wo]=function EV(){return IV++}(),g[Wi]=p,g[pg]=d,g[qt]=2==e.type?t[qt]:g,g}function al(t,e,n,r,i){let o=t.data[e];if(null===o)o=function yE(t,e,n,r,i){const o=Ug(),s=dh(),u=t.data[e]=function DU(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function To(){return null!==Me.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function Yv(){return Me.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function tu(){const t=Me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return qr(o,!0),o}function Gh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function iS(t,e,n,r,i){const o=Jb(e,Za),s=er(),a=2&r;try{Xo(-1),a&&e.length>Ke&&nS(t,e,Ke,!1),Si(a?2:0,i);const d=a?o:null,p=Qd(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{wc(d,p)}}finally{a&&null===e[Za]&&Xb(e,Za),Xo(s),Si(a?3:1,i)}}function vE(t,e,n){if(Qa(e)){const r=zr(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{zr(r)}}}function IE(t,e,n){Pc()&&(function xU(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;Zo(n)&&function UU(t,e,n){const r=Tn(e,t),i=oS(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=jm(t,Bm(t,i,null,s,r,e,null,t[ks].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Vc(n,e),mr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],d=ts(e,t,a,n);mr(d,e),null!==s&&BU(0,a-i,d,u,0,s),Ai(u)&&(Pr(n.index,e)[rn]=ts(e,t,a,n))}}(t,e,n,Tn(n,e)),64==(64&n.flags)&&lS(t,e,n))}function EE(t,e,n=Tn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function oS(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=wE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function wE(t,e,n,r,i,o,s,a,u,d,p){const g=Ke+r,_=g+i,v=function vU(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:He);return n}(g,_),E="function"==typeof d?d():d;return v[ce]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:p}}let sS=t=>null;function aS(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?uS(n,e,i,o):r.hasOwnProperty(i)&&uS(n,e,r[i],o)}return n}function uS(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function TE(t,e,n,r){if(Pc()){const i=null===r?null:{"":-1},o=function OU(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(Bd(e,s.selectors,!1))if(r||(r=[]),Ai(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),CE(t,e,a.length)}else r.unshift(s),CE(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&cS(t,e,n,s,i,a),i&&function kU(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new W(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=po(n.mergedAttrs,n.attrs)}function cS(t,e,n,r,i,o){for(let d=0;d<r.length;d++)lu(Vc(n,e),t,r[d].type);!function LU(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,u=Gh(t,e,r.length,null);for(let d=0;d<r.length;d++){const p=r[d];n.mergedAttrs=po(n.mergedAttrs,p.hostAttrs),VU(t,n,e,u,p),FU(u,p,i),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const g=p.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function AU(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,d=null;for(let p=e.directiveStart;p<i;p++){const g=o[p],_=n?n.get(g):null,E=_?_.outputs:null;u=aS(g.inputs,p,u,_?_.inputs:null),d=aS(g.outputs,p,d,E);const C=null===u||null===s||fc(e)?null:jU(u,p,s);a.push(C)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,o)}function lS(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function Jv(){return Me.lFrame.currentDirectiveIndex}();try{Xo(o);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];mh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&NU(u,d)}}finally{Xo(-1),mh(s)}}function NU(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function CE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function FU(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ai(e)&&(n[""]=t)}}function VU(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bi(i.type)),s=new ou(o,Ai(i),Re);t.blueprint[r]=s,n[r]=s,function PU(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function MU(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Gh(t,n,i.hostVars,He),i)}function Ro(t,e,n,r,i,o){const s=Tn(t,e);!function DE(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?Ie(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[ke],s,o,t.value,n,r,i)}function BU(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)dS(r,n,s[a++],s[a++],s[a++])}function dS(t,e,n,r,i){const o=zr(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{zr(o)}}function jU(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function hS(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function fS(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=t.data[o];yh(n[r]),s.contentQueries(2,e[o],o)}}}function jm(t,e){return t[Ga]?t[yc][oi]=e:t[Ga]=e,t[yc]=e,e}function AE(t,e,n){yh(0);const r=zr(null);try{e(t,n)}finally{zr(r)}}function _S(t,e){const n=t[wi],r=n?n.get(os,null):null;r&&r.handleError(e)}function bE(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];dS(t.data[s],e[s],r,a,i)}}function as(t,e,n){const r=$s(e,t);!function zA(t,e,n){t.setValue(e,n)}(t[ke],r,n)}function $U(t,e){const n=Pr(e,t),r=n[ce];!function HU(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Jt];null!==i&&null===n[Wi]&&(n[Wi]=aE(i,n[wi])),SE(r,n,n[rn])}function SE(t,e,n){Ih(e);try{const r=t.viewQuery;null!==r&&AE(1,r,n);const i=t.template;null!==i&&iS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fS(t,e),t.staticViewQueries&&AE(2,t.viewQuery,n);const o=t.components;null!==o&&function zU(t,e){for(let n=0;n<e.length;n++)$U(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[je]&=-5,Eh()}}let yS=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function jv(t,e,n){const r=Object.create($v);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>wg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Tg(r))return;r.hasRun=!0;const s=Qd(r);try{r.cleanupFn(),r.cleanupFn=Rg,r.fn(i)}finally{wc(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:()=>new t})}return t})();function $m(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=yi(i,a):2==o&&(r=yi(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Wh(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(It(o)),gr(o)&&vS(o,r);const s=n.type;if(8&s)Wh(t,e,n.child,r);else if(32&s){const a=xI(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=XA(e,n);if(Array.isArray(a))r.push(...a);else{const u=Fh(e[qt]);Wh(u[ce],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function vS(t,e){for(let n=On;n<t.length;n++){const r=t[n],i=r[ce].firstChild;null!==i&&Wh(r[ce],r,i,e)}t[Di]!==t[Jt]&&e.push(t[Di])}function Hm(t,e,n,r=!0){const i=e[ks],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{IS(t,e,t.template,n)}catch(u){throw r&&_S(e,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function IS(t,e,n,r){const i=e[je];if(256!=(256&i)){e[ks].effectManager?.flush(),Ih(e);try{Ng(e),function fh(t){return Me.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&iS(t,e,n,2,r);const s=3==(3&i);if(s){const d=t.preOrderCheckHooks;null!==d&&kc(e,d,null)}else{const d=t.preOrderHooks;null!==d&&zs(e,d,0,null),iu(e,0)}if(function WU(t){for(let e=jA(t);null!==e;e=$A(e)){if(!e[Gd])continue;const n=e[Vs];for(let r=0;r<n.length;r++){oh(n[r])}}}(e),ES(e,2),null!==t.contentQueries&&fS(t,e),s){const d=t.contentCheckHooks;null!==d&&kc(e,d)}else{const d=t.contentHooks;null!==d&&zs(e,d,1),iu(e,1)}!function yU(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=Jb(e,Ls);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)Xo(~o);else{const s=o,a=n[++i],u=n[++i];gh(a,s),r.dirty=!1;const d=Qd(r);try{u(2,e[s])}finally{wc(r,d)}}}}finally{null===e[Ls]&&Xb(e,Ls),Xo(-1)}}(t,e);const a=t.components;null!==a&&TS(e,a,0);const u=t.viewQuery;if(null!==u&&AE(2,u,r),s){const d=t.viewCheckHooks;null!==d&&kc(e,d)}else{const d=t.viewHooks;null!==d&&zs(e,d,2),iu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[je]&=-73,Og(e)}finally{Eh()}}}function ES(t,e){for(let n=jA(t);null!==n;n=$A(n))for(let r=On;r<n.length;r++)wS(n[r],e)}function ZU(t,e,n){wS(Pr(e,t),n)}function wS(t,e){if(!function ih(t){return 128==(128&t[je])}(t))return;const n=t[ce],r=t[je];if(80&r&&0===e||1024&r||2===e)IS(n,t,n.template,t[rn]);else if(t[qa]>0){ES(t,1);const i=n.components;null!==i&&TS(t,i,1)}}function TS(t,e,n){for(let r=0;r<e.length;r++)ZU(t,e[r],n)}class Zh{get rootNodes(){const e=this._lView,n=e[ce];return Wh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rn]}set context(e){this._lView[rn]=e}get destroyed(){return 256==(256&this._lView[je])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[bt];if(gr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(vm(e,r),Ks(n,r))}this._attachedToViewContainer=!1}OI(this._lView[ce],this._lView)}onDestroy(e){!function kg(t,e){if(256==(256&t[je]))throw new W(911,!1);null===t[Ci]&&(t[Ci]=[]),t[Ci].push(e)}(this._lView,e)}markForCheck(){qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[je]&=-129}reattach(){this._lView[je]|=128}detectChanges(){Hm(this._lView[ce],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kV(t,e){Vh(t,e,e[ke],2,null,null)}(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e}}class KU extends Zh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Hm(e[ce],e,e[rn],!1)}checkNoChanges(){}get context(){return null}}class CS extends Fm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=tt(e);return new Kh(n,this.ngModule)}}function DS(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class YU{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=uc(r);const i=this.injector.get(e,lE,r);return i!==lE||n===lE?i:this.parentInjector.get(e,n,r)}}class Kh extends Rb{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=DS(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return DS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Hd(t){return t.map(lg).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof Ni?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new YU(e,o):e,a=s.get(Mb,null);if(null===a)throw new W(407,!1);const g={rendererFactory:a,sanitizer:s.get(Z2,null),effectManager:s.get(yS,null),afterRenderEventManager:s.get(_E,null)},_=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",E=r?function IU(t,e,n,r){const o=r.get(Zb,!1)||n===Hr.ShadowDom,s=t.selectRootElement(e,o);return function EU(t){sS(t)}(s),s}(_,r,this.componentDef.encapsulation,s):ym(_,v,function QU(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),N=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=aE(E,s,!0));const j=wE(0,null,null,1,0,null,null,null,null,null,null),ne=Bm(null,j,null,N,null,null,g,_,s,null,R);let ue,Ue;Ih(ne);try{const vt=this.componentDef;let $n,Zp=null;vt.findHostDirectiveDefs?($n=[],Zp=new Map,vt.findHostDirectiveDefs(vt,$n,Zp),$n.push(vt)):$n=[vt];const Ev=function XU(t,e){const n=t[ce],r=Ke;return t[r]=e,al(n,r,2,"#host",null)}(ne,E),NK=function eB(t,e,n,r,i,o,s){const a=i[ce];!function tB(t,e,n,r){for(const i of t)e.mergedAttrs=po(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&($m(e,e.mergedAttrs,!0),null!==n&&rb(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=aE(e,i[wi]));const d=o.rendererFactory.createRenderer(e,n);let p=16;n.signals?p=4096:n.onPush&&(p=64);const g=Bm(i,oS(n),null,p,i[t.index],t,o,d,null,null,u);return a.firstCreatePass&&CE(a,t,r.length-1),jm(i,g),i[t.index]=g}(Ev,E,vt,$n,ne,g,_);Ue=bc(j,Ke),E&&function rB(t,e,n,r){if(r)dc(t,n,["ng-version",xb.full]);else{const{attrs:i,classes:o}=function dg(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!pr(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&dc(t,n,i),o&&o.length>0&&nb(t,n,o.join(" "))}}(_,vt,E,r),void 0!==n&&function iB(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(Ue,this.ngContentSelectors,n),ue=function nB(t,e,n,r,i,o){const s=fn(),a=i[ce],u=Tn(s,i);cS(a,i,s,n,null,r);for(let p=0;p<n.length;p++)mr(ts(i,a,s.directiveStart+p,s),i);lS(a,i,s),u&&mr(u,i);const d=ts(i,a,s.directiveStart+s.componentOffset,s);if(t[rn]=i[rn]=d,null!==o)for(const p of o)p(d,e);return vE(a,s,t),d}(NK,vt,$n,Zp,ne,[oB]),SE(j,ne,null)}finally{Eh()}return new JU(this.componentType,ue,il(Ue,ne),ne,Ue)}}class JU extends $2{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new KU(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;bE(o[ce],o,i,e,n),this.previousInputValues.set(e,n),qh(Pr(this._tNode.index,o))}}get injector(){return new Ln(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function oB(){const t=fn();Oc(J()[ce],t)}function MS(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function qm(t){return!!function RE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function _r(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Iu(t,e,n,r){const i=_r(t,e,n);return _r(t,e+1,r)||i}function PE(t,e,n,r){const i=J();return _r(i,Jo(),e)&&(nt(),Ro(Pt(),i,t,e,n,r)),PE}function cl(t,e,n,r){return _r(t,Jo(),n)?e+Ie(n)+r:He}function dl(t,e,n,r,i,o,s,a){const d=function Gm(t,e,n,r,i){const o=Iu(t,e,n,r);return _r(t,e+2,i)||o}(t,Zi(),n,i,s);return Ri(3),d?e+Ie(n)+r+Ie(i)+o+Ie(s)+a:He}function _l(t,e,n,r,i,o,s,a){const u=J(),d=nt(),p=t+Ke,g=d.firstCreatePass?function OB(t,e,n,r,i,o,s,a,u){const d=e.consts,p=al(e,t,4,s||null,wo(d,a));TE(e,n,p,wo(d,u)),Oc(e,p);const g=p.tView=wE(2,p,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,p),g.queries=e.queries.embeddedTView(p)),p}(p,d,u,e,n,r,i,o,s):d.data[p];qr(g,!1);const _=zS(d,u,g,t);Nc()&&Em(d,u,_,g),mr(_,u),jm(u,u[p]=hS(_,u,_,g)),Ic(g)&&IE(d,u,g),null!=s&&EE(u,g,a)}let zS=function qS(t,e,n,r){return Co(!0),e[ke].createComment("")};function ea(t,e,n){const r=J();return _r(r,Jo(),e)&&function ci(t,e,n,r,i,o,s,a){const u=Tn(e,n);let p,d=e.inputs;!a&&null!=d&&(p=d[r])?(bE(t,n,p,r,i),Zo(e)&&function SU(t,e){const n=Pr(e,t);16&n[je]||(n[je]|=64)}(n,e.index)):3&e.type&&(r=function bU(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}(nt(),Pt(),r,t,e,r[ke],n,!1),ea}function FE(t,e,n,r,i){const s=i?"class":"style";bE(t,n,e.inputs[s],s,r)}function pe(t,e,n,r){const i=J(),o=nt(),s=Ke+t,a=i[ke],u=o.firstCreatePass?function UB(t,e,n,r,i,o){const s=e.consts,u=al(e,t,2,r,wo(s,i));return TE(e,n,u,wo(s,o)),null!==u.attrs&&$m(u,u.attrs,!1),null!==u.mergedAttrs&&$m(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],d=GS(o,i,u,a,e,t);i[s]=d;const p=Ic(u);return qr(u,!0),rb(a,d,u),32!=(32&u.flags)&&Nc()&&Em(o,i,d,u),0===function Wv(){return Me.lFrame.elementDepthCount}()&&mr(d,i),function Zv(){Me.lFrame.elementDepthCount++}(),p&&(IE(o,i,u),vE(o,u,i)),null!==r&&EE(i,u),pe}function ge(){let t=fn();dh()?function nu(){Me.lFrame.isParent=!1}():(t=t.parent,qr(t,!1));const e=t;(function Kv(t){return Me.skipHydrationRootTNode===t})(e)&&function Qv(){Me.skipHydrationRootTNode=null}(),function ah(){Me.lFrame.elementDepthCount--}();const n=nt();return n.firstCreatePass&&(Oc(n,t),Qa(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Zg(t){return 0!=(8&t.flags)}(e)&&FE(n,e,J(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Lc(t){return 0!=(16&t.flags)}(e)&&FE(n,e,J(),e.stylesWithoutHost,!1),ge}function en(t,e,n,r){return pe(t,e,n,r),ge(),en}let GS=(t,e,n,r,i,o)=>(Co(!0),ym(r,i,function zg(){return Me.lFrame.currentNamespace}()));function Qm(t){return!!t&&"function"==typeof t.then}function QS(t){return!!t&&"function"==typeof t.subscribe}function yl(t,e,n,r){const i=J(),o=nt(),s=fn();return function JS(t,e,n,r,i,o,s){const a=Ic(r),d=t.firstCreatePass&&function gS(t){return t.cleanup||(t.cleanup=[])}(t),p=e[rn],g=function pS(t){return t[Os]||(t[Os]=[])}(e);let _=!0;if(3&r.type||s){const C=Tn(r,e),S=s?s(C):C,N=g.length,R=s?ne=>s(It(ne[r.index])):r.index;let j=null;if(!s&&a&&(j=function qB(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[Os],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==j)(j.__ngLastListenerFn__||j).__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,_=!1;else{o=eR(r,e,p,o,!1);const ne=n.listen(S,i,o);g.push(o,ne),d&&d.push(i,R,N,N+1)}}else o=eR(r,e,p,o,!1);const v=r.outputs;let E;if(_&&null!==v&&(E=v[i])){const C=E.length;if(C)for(let S=0;S<C;S+=2){const ue=e[E[S]][E[S+1]].subscribe(o),Ue=g.length;g.push(o,ue),d&&d.push(i,r.index,Ue,-(Ue+1))}}}(o,i,i[ke],s,t,e,r),yl}function XS(t,e,n,r){try{return Si(6,e,n),!1!==n(r)}catch(i){return _S(t,i),!1}finally{Si(7,e,n)}}function eR(t,e,n,r,i){return function o(s){if(s===Function)return r;qh(t.componentOffset>-1?Pr(t.index,e):e);let u=XS(e,n,r,s),d=o.__ngNextListenerFn__;for(;d;)u=XS(e,n,d,s)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function Eu(t=1){return function eI(t){return(Me.lFrame.contextLView=function tI(t,e){for(;t>0;)e=e[Fs],t--;return e}(t,Me.lFrame.contextLView))[rn]}(t)}function Ym(t,e){return t<<17|e<<2}function ta(t){return t>>17&32767}function BE(t){return 2|t}function wu(t){return(131068&t)>>2}function jE(t,e){return-131069&t|e<<2}function $E(t){return 1|t}function lR(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ta(o):wu(o),u=!1;for(;0!==a&&(!1===u||s);){const p=t[a+1];ej(t[a],e)&&(u=!0,t[a+1]=r?$E(p):BE(p)),a=r?ta(p):wu(p)}u&&(t[n+1]=r?BE(o):$E(o))}function ej(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Qs(t,e)>=0}const Un={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function dR(t){return t.substring(Un.key,Un.keyEnd)}function tj(t){return t.substring(Un.value,Un.valueEnd)}function fR(t,e){const n=Un.textEnd;let r=Un.key=vl(t,e,n);return n===r?-1:(r=Un.keyEnd=function oj(t,e,n){let r;for(;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=gR(t,r,n),r=Un.value=vl(t,r,n),r=Un.valueEnd=function sj(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){const u=t.charCodeAt(s++);if(59===u)return a;34===u||39===u?a=s=mR(t,u,s,n):e===s-4&&85===o&&82===i&&76===r&&40===u?a=s=mR(t,41,s,n):u>32&&(a=s),o=i,i=r,r=-33&u}return a}(t,r,n),gR(t,r,n))}function vl(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function gR(t,e,n,r){return(e=vl(t,e,n))<n&&e++,e}function mR(t,e,n,r){let i=-1,o=n;for(;o<r;){const s=t.charCodeAt(o++);if(s==e&&92!==i)return o;i=92==s&&92===i?0:s}throw new Error}function Mo(t){!function Yi(t,e,n,r){const i=nt(),o=Ri(2);i.firstUpdatePass&&function IR(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[er()],s=vR(t,n);CR(o,r)&&null===e&&!s&&(e=!1),e=function cj(t,e,n,r){const i=function _h(t){const e=Me.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ef(n=HE(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=HE(i,t,e,n,r),null===o){let u=function lj(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==wu(r))return t[ta(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=HE(null,t,e,u[1],r),u=ef(u,e.attrs,r),function dj(t,e,n,r){t[ta(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function hj(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ef(r,t[o].hostAttrs,n);return ef(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function JB(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ta(s),u=wu(s);t[r]=n;let p,d=!1;if(Array.isArray(n)?(p=n[1],(null===p||Qs(n,p)>0)&&(d=!0)):p=n,i)if(0!==u){const _=ta(t[a+1]);t[r+1]=Ym(_,a),0!==_&&(t[_+1]=jE(t[_+1],r)),t[a+1]=function QB(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Ym(a,0),0!==a&&(t[a+1]=jE(t[a+1],r)),a=r;else t[r+1]=Ym(u,0),0===a?a=r:t[u+1]=jE(t[u+1],r),u=r;d&&(t[r+1]=BE(t[r+1])),lR(t,p,r,!0),lR(t,p,r,!1),function XB(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Qs(o,e)>=0&&(n[r+1]=$E(n[r+1]))}(e,p,t,r,o),s=Ym(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(i,null,o,r);const s=J();if(n!==He&&_r(s,o,n)){const a=i.data[er()];if(CR(a,r)&&!vR(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=yi(u,n||"")),FE(i,a,s,n,r)}else!function gj(t,e,n,r,i,o,s,a){i===He&&(i=ut);let u=0,d=0,p=0<i.length?i[0]:null,g=0<o.length?o[0]:null;for(;null!==p||null!==g;){const _=u<i.length?i[u+1]:void 0,v=d<o.length?o[d+1]:void 0;let C,E=null;p===g?(u+=2,d+=2,_!==v&&(E=g,C=v)):null===g||null!==p&&p<g?(u+=2,E=p):(d+=2,E=g,C=v),null!==E&&wR(t,e,n,r,E,C,s,a),p=u<i.length?i[u]:null,g=d<o.length?o[d]:null}}(i,a,s,s[ke],s[o+1],s[o+1]=function fj(t,e,n){if(null==n||""===n)return ut;const r=[],i=ai(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}(ER,aj,t,!1)}function aj(t,e){for(let n=function rj(t){return function pR(t){Un.key=0,Un.keyEnd=0,Un.value=0,Un.valueEnd=0,Un.textEnd=t.length}(t),fR(t,vl(t,0,Un.textEnd))}(e);n>=0;n=fR(e,n))ER(t,dR(e),tj(e))}function vR(t,e){return e>=t.expandoStartIndex}function HE(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=ef(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ef(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),xr(t,s,!!n||e[++o]))}return void 0===t?null:t}function ER(t,e,n){xr(t,e,ai(n))}function wR(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],p=function YB(t){return 1==(1&t)}(d)?TR(u,e,n,i,wu(d),s):void 0;Jm(p)||(Jm(o)||function KB(t){return 2==(2&t)}(d)&&(o=TR(u,null,n,i,a,s)),function qV(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Js.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Js.Important),t.setStyle(n,r,i,o))}}(r,s,$s(er(),n),i,o))}function TR(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),p=d?u[1]:u,g=null===p;let _=n[i+1];_===He&&(_=g?ut:void 0);let v=g?Rh(_,r):p===r?_:void 0;if(d&&!Jm(v)&&(v=Rh(u,r)),Jm(v)&&(a=v,s))return a;const E=t[i+1];i=s?ta(E):wu(E)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=Rh(u,r))}return a}function Jm(t){return void 0!==t}function CR(t,e){return 0!=(t.flags&(e?8:16))}function Ae(t,e=""){const n=J(),r=nt(),i=t+Ke,o=r.firstCreatePass?al(r,i,1,e,null):r.data[i],s=DR(r,n,o,e,t);n[i]=s,Nc()&&Em(r,n,s,o),qr(o,!1)}let DR=(t,e,n,r,i)=>(Co(!0),function _m(t,e){return t.createText(e)}(e[ke],r));function Xm(t){return zE("",t,""),Xm}function zE(t,e,n){const r=J(),i=cl(r,t,e,n);return i!==He&&as(r,er(),i),zE}function qE(t,e,n,r,i){const o=J(),s=function ll(t,e,n,r,i,o){const a=Iu(t,Zi(),n,i);return Ri(2),a?e+Ie(n)+r+Ie(i)+o:He}(o,t,e,n,r,i);return s!==He&&as(o,er(),s),qE}function GE(t,e,n,r,i,o,s){const a=J(),u=dl(a,t,e,n,r,i,o,s);return u!==He&&as(a,er(),u),GE}const El="en-US";let GR=El;class Cu{}class yP{}class XE extends Cu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new CS(this);const i=Sr(e);this._bootstrapComponents=ss(i.bootstrap),this._r3Injector=Lb(e,n,[{provide:Cu,useValue:this},{provide:Fm,useValue:this.componentFactoryResolver},...r],wt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ew extends yP{constructor(e){super(),this.moduleType=e}create(e){return new XE(this.moduleType,e,[])}}class vP extends Cu{constructor(e){super(),this.componentFactoryResolver=new CS(this),this.instance=null;const n=new el([...e.providers,{provide:Cu,useValue:this},{provide:Fm,useValue:this.componentFactoryResolver}],e.parent||Rm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function tw(t,e,n=null){return new vP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let B$=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=vb(0,n.type),i=r.length>0?tw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Se({token:t,providedIn:"environment",factory:()=>new t(ie(Ni))})}return t})();function IP(t){t.getStandaloneInjector=e=>e.get(B$).getOrCreateStandaloneInjector(t)}function p4(t,e,n,r=!0){const i=e[ce];if(function LV(t,e,n,r){const i=On+r,o=n.length;r>0&&(n[i-1][oi]=e),r<o-On?(e[oi]=n[i],zc(n,On+r,e)):(n.push(e),e[oi]=null),e[bt]=n;const s=e[Wa];null!==s&&n!==s&&function VV(t,e){const n=t[Vs];e[qt]!==e[bt][bt][qt]&&(t[Gd]=!0),null===n?t[Vs]=[e]:n.push(e)}(s,e);const a=e[Ti];null!==a&&a.insertView(t),e[je]|=128}(i,e,t,n),r){const o=VI(n,t),s=e[ke],a=Im(s,t[Di]);null!==a&&function OV(t,e,n,r,i,o){r[Jt]=i,r[wn]=e,Vh(t,r,n,1,i,o)}(i,t[wn],s,e,a,o)}}Symbol;let us=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=_4}return t})();const g4=us,m4=class extends g4{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function f4(t,e,n,r){const i=e.tView,a=Bm(t,i,n,4096&t[je]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Wa]=t[e.index];const d=t[Ti];return null!==d&&(a[Ti]=d.createEmbeddedView(i)),SE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Zh(i)}};function _4(){return function i_(t,e){return 4&t.type?new m4(e,t,il(t,e)):null}(fn(),J())}let Ji=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=T4}return t})();function T4(){return function VP(t,e){let n;const r=e[t.index];return gr(r)?n=r:(n=hS(r,e,null,t),e[t.index]=n,jm(e,n)),UP(n,e,t,r),new FP(n,t,e)}(fn(),J())}const C4=Ji,FP=class extends C4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return il(this._hostTNode,this._hostLView)}get injector(){return new Ln(this._hostTNode,this._hostLView)}get parentInjector(){const e=Uc(this._hostTNode,this._hostLView);if(Ch(e)){const n=au(e,this._hostLView),r=su(e);return new Ln(n[ce].data[r+8],n)}return new Ln(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=LP(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-On}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,o){const s=e&&!function Vn(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}const u=s?e:new Kh(tt(e)),d=r||this.parentInjector;if(!o&&null==u.ngModule){const S=(s?d:this.parentInjector).get(Ni,null);S&&(o=S)}tt(u.componentType??{});const v=u.create(d,i,null,o);return this.insertImpl(v.hostView,a,false),v}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function xg(t){return gr(t[bt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[bt],p=new FP(d,d[wn],d[bt]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return p4(a,i,s,!r),e.attachToViewContainerRef(),zc(iw(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=LP(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=vm(this._lContainer,n);r&&(Ks(iw(this._lContainer),n),OI(r[ce],r))}detach(e){const n=this._adjustIndex(e,-1),r=vm(this._lContainer,n);return r&&null!=Ks(iw(this._lContainer),n)?new Zh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function LP(t){return t[8]}function iw(t){return t[8]||(t[8]=[])}let UP=function BP(t,e,n,r){if(t[Di])return;let i;i=8&n.type?It(r):function D4(t,e){const n=t[ke],r=n.createComment(""),i=Tn(e,t);return _u(n,Im(n,i),r,function $V(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Di]=i};const gw=new he("Application Initializer");let mw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=fe(gw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(Qm(o))n.push(o);else if(QS(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const cs=new he("LocaleId",{providedIn:"root",factory:()=>fe(cs,et.Optional|et.SkipSelf)||function nH(){return typeof $localize<"u"&&$localize.locale||El}()});let hM=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class oH{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let fM=(()=>{class t{compileModuleSync(n){return new ew(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=ss(Sr(n).declarations).reduce((s,a)=>{const u=tt(a);return u&&s.push(new Kh(u)),s},[]);return new oH(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const _M=new he(""),u_=new he("");let Ew,vw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ew||(function bH(t){Ew=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Et.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Et),ie(Iw),ie(u_))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})(),Iw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ew?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),na=null;const yM=new he("AllowMultipleToken"),ww=new he("PlatformDestroyListeners"),Tw=new he("appBootstrapListener");class IM{constructor(e,n){this.name=e,this.token=n}}function wM(t,e,n=[]){const r=`Platform: ${e}`,i=new he(r);return(o=[])=>{let s=Cw();if(!s||s.injector.get(yM,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function PH(t){if(na&&!na.get(yM,!1))throw new W(400,!1);(function vM(){!function js(t){Ag=t}(()=>{throw new W(600,!1)})})(),na=t;const e=t.get(CM);(function EM(t){t.get(Cb,null)?.forEach(n=>n())})(t)}(function TM(t=[],e){return ui.create({name:e,providers:[{provide:QI,useValue:"platform"},{provide:ww,useValue:new Set([()=>na=null])},...t]})}(a,r))}return function xH(t){const e=Cw();if(!e)throw new W(401,!1);return e}()}}function Cw(){return na?.get(CM)??null}let CM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function NH(t="zone.js",e){return"noop"===t?new sU:"zone.js"===t?new Et(e):t}(r?.ngZone,function DM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function U$(t,e,n){return new XE(t,e,n)}(n.moduleType,this.injector,function PM(t){return[{provide:Et,useFactory:t},{provide:jh,multi:!0,useFactory:()=>{const e=fe(kH,{optional:!0});return()=>e.initialize()}},{provide:RM,useFactory:OH},{provide:$b,useFactory:Hb}]}(()=>i)),s=o.injector.get(os,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{c_(this._modules,o),a.unsubscribe()})}),function AM(t,e,n){try{const r=n();return Qm(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(mw);return a.runInitializers(),a.donePromise.then(()=>(function WR(t){hr(t,"Expected localeId to be defined"),"string"==typeof t&&(GR=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(cs,El)||El),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=bM({},r);return function SH(t,e,n){const r=new ew(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Cl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new W(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(ww,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(ie(ui))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function bM(t,e){return Array.isArray(e)?e.reduce(bM,t):{...t,...e}}let Cl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=fe(RM),this.zoneIsStable=fe($b),this.componentTypes=[],this.components=[],this.isStable=fe(hM).hasPendingTasks.pipe(gt(n=>n?G(!1):this.zoneIsStable),zt(),Oe()),this._injector=fe(Ni)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Rb;if(!this._injector.get(mw).done)throw!i&&function go(t){const e=tt(t)||hn(t)||Xn(t);return null!==e&&e.standalone}(n),new W(405,!1);let s;s=i?n:this._injector.get(Fm).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function RH(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Cu),d=s.create(ui.NULL,[],r||s.selector,a),p=d.location.nativeElement,g=d.injector.get(_M,null);return g?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),c_(this.components,d),g?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new W(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;c_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Tw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>c_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function c_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const RM=new he("",{providedIn:"root",factory:()=>fe(os).handleError.bind(void 0)});function OH(){const t=fe(Et),e=fe(os);return n=>t.runOutsideAngular(()=>e.handleError(n))}let kH=(()=>{class t{constructor(){this.zone=fe(Et),this.applicationRef=fe(Cl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Dw=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=LH}return t})();function LH(t){return function VH(t,e,n){if(Zo(t)&&!n){const r=Pr(t.index,e);return new Zh(r,r)}return 47&t.type?new Zh(e[qt],e):null}(fn(),J(),16==(16&t))}class kM{constructor(){}supports(e){return qm(e)}create(e){return new zH(e)}}const HH=(t,e)=>e;class zH{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||HH}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<LM(r,i,o)?n:r,a=LM(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const d=a-i,p=u-i;if(d!=p){for(let _=0;_<d;_++){const v=_<o.length?o[_]:o[_]=0,E=v+_;p<=E&&E<d&&(o[_]=v+1)}o[s.previousIndex]=p-d}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!qm(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function mB(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new qH(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new FM),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class qH{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class GH{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class FM{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new GH,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LM(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function UM(){return new h_([new kM])}let h_=(()=>{class t{static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:UM});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||UM()),deps:[[t,new Wc,new gu]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new W(901,!1)}}return t})();const YH=wM(null,"core",[]);let JH=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Cl))};static#t=this.\u0275mod=ii({type:t});static#n=this.\u0275inj=ni({})}return t})();function Mw(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let xw=null;function Dl(){return xw}class hz{}const Kr=new he("DocumentToken");let Nw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return fe(pz)},providedIn:"platform"})}return t})();const fz=new he("Location Initialized");let pz=(()=>{class t extends Nw{constructor(){super(),this._doc=fe(Kr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dl().getBaseHref(this._doc)}onPopState(n){const r=Dl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Dl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function Ow(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function KM(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ls(t){return t&&"?"!==t[0]?"?"+t:t}let Au=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return fe(YM)},providedIn:"root"})}return t})();const QM=new he("appBaseHref");let YM=(()=>{class t extends Au{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??fe(Kr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Ow(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+ls(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+ls(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+ls(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Nw),ie(QM,8))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gz=(()=>{class t extends Au{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Ow(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ls(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ls(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Nw),ie(QM,8))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})(),p_=(()=>{class t{constructor(n){this._subject=new Nr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function yz(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(KM(JM(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ls(r))}normalize(n){return t.stripTrailingSlash(function _z(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,JM(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ls(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ls(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=ls;static#t=this.joinWithSlash=Ow;static#n=this.stripTrailingSlash=KM;static#r=this.\u0275fac=function(r){return new(r||t)(ie(Au))};static#i=this.\u0275prov=Se({token:t,factory:function(){return function mz(){return new p_(ie(Au))}()},providedIn:"root"})}return t})();function JM(t){return t.replace(/\/index.html$/,"")}class o3{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qw=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new o3(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),cx(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{cx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Ji),Re(us),Re(h_))};static#t=this.\u0275dir=xn({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function cx(t,e){t.context.$implicit=e.item}let Gw=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new s3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){lx("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){lx("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Ji),Re(us))};static#t=this.\u0275dir=xn({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class s3{constructor(){this.$implicit=null,this.ngIf=null}}function lx(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${wt(e)}'.`)}let M3=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ii({type:t});static#n=this.\u0275inj=ni({})}return t})();function D_(t){return"server"===t}let k3=(()=>{class t{static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:()=>new F3(ie(Kr),window)})}return t})();class F3{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function L3(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class a9 extends hz{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Xw extends a9{static makeCurrent(){!function dz(t){xw||(xw=t)}(new Xw)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function u9(){return mf=mf||document.querySelector("base"),mf?mf.getAttribute("href"):null}();return null==n?null:function c9(t){S_=S_||document.createElement("a"),S_.setAttribute("href",t);const e=S_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){mf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function n3(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let S_,mf=null,d9=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();const e0=new he("EventManagerPlugins");let yx=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(ie(e0),ie(Et))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();class vx{constructor(e){this._doc=e}}const t0="ng-app-id";let Ix=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=D_(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${t0}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(t0),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(t0,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Kr),ie(Pm),ie(Db,8),ie(is))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();const n0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},r0=/%COMP%/g,g9=new he("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function wx(t,e){return e.map(n=>n.replace(r0,t))}let Tx=(()=>{class t{constructor(n,r,i,o,s,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=D_(a),this.defaultRenderer=new o0(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Hr.ShadowDom&&(r={...r,encapsulation:Hr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof Dx?i.applyToHost(n):i instanceof s0&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Hr.Emulated:o=new Dx(u,d,r,this.appId,p,s,a,g);break;case Hr.ShadowDom:return new v9(u,d,n,r,s,a,this.nonce,g);default:o=new s0(u,d,r,p,s,a,g)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(ie(yx),ie(Ix),ie(Pm),ie(g9),ie(Kr),ie(is),ie(Et),ie(Db))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();class o0{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(n0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Cx(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Cx(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=n0[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=n0[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Js.DashCase|Js.Important)?e.style.setProperty(n,r,i&Js.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Js.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Dl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function Cx(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class v9 extends o0{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=wx(i.id,i.styles);for(const p of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class s0 extends o0{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?wx(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Dx extends s0{constructor(e,n,r,i,o,s,a,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,u,d),this.contentAttr=function m9(t){return"_ngcontent-%COMP%".replace(r0,t)}(d),this.hostAttr=function _9(t){return"_nghost-%COMP%".replace(r0,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let I9=(()=>{class t extends vx{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Kr))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();const Ax=["alt","control","meta","shift"],E9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},w9={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let T9=(()=>{class t extends vx{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dl().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ax.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),s+=d+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=E9[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ax.forEach(s=>{s!==i&&(0,w9[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Kr))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();const Sx=[{provide:is,useValue:"browser"},{provide:Cb,useValue:function C9(){Xw.makeCurrent()},multi:!0},{provide:Kr,useFactory:function A9(){return function QV(t){jI=t}(document),document},deps:[]}],b9=wM(YH,"browser",Sx),S9=new he(""),Rx=[{provide:u_,useClass:class l9{addToWindow(e){mt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new W(5103,!1);return o},mt.getAllAngularTestabilities=()=>e.getAllTestabilities(),mt.getAllAngularRootElements=()=>e.getAllRootElements(),mt.frameworkStabilizers||(mt.frameworkStabilizers=[]),mt.frameworkStabilizers.push(r=>{const i=mt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Dl().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:_M,useClass:vw,deps:[Et,Iw,u_]},{provide:vw,useClass:vw,deps:[Et,Iw,u_]}],Px=[{provide:QI,useValue:"root"},{provide:os,useFactory:function D9(){return new os},deps:[]},{provide:e0,useClass:I9,multi:!0,deps:[Kr,Et,is]},{provide:e0,useClass:T9,multi:!0,deps:[Kr]},Tx,Ix,yx,{provide:Mb,useExisting:Tx},{provide:class V3{},useClass:d9,deps:[]},[]];let R9=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Pm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(ie(S9,12))};static#t=this.\u0275mod=ii({type:t});static#n=this.\u0275inj=ni({providers:[...Px,...Rx],imports:[M3,JH]})}return t})(),Mx=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Kr))};static#t=this.\u0275prov=Se({token:t,factory:function(r){let i=null;return i=r?new r:function M9(){return new Mx(ie(Kr))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;let Ox=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(r){let i=null;return i=r?new(r||t):ie(kx),i},providedIn:"root"})}return t})(),kx=(()=>{class t extends Ox{constructor(n){super(),this._doc=n}sanitize(n,r){if(null==r)return null;switch(n){case xi.NONE:return r;case xi.HTML:return So(r,"HTML")?ai(r):fb(this._doc,String(r)).toString();case xi.STYLE:return So(r,"Style")?ai(r):r;case xi.SCRIPT:if(So(r,"Script"))return ai(r);throw new W(5200,!1);case xi.URL:return So(r,"URL")?ai(r):Dm(String(r));case xi.RESOURCE_URL:if(So(r,"ResourceURL"))return ai(r);throw new W(5201,!1);default:throw new W(5202,!1)}}bypassSecurityTrustHtml(n){return function r2(t){return new YV(t)}(n)}bypassSecurityTrustStyle(n){return function i2(t){return new JV(t)}(n)}bypassSecurityTrustScript(n){return function o2(t){return new XV(t)}(n)}bypassSecurityTrustUrl(n){return function s2(t){return new e2(t)}(n)}bypassSecurityTrustResourceUrl(n){return function a2(t){return new t2(t)}(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Kr))};static#t=this.\u0275prov=Se({token:t,factory:function(r){let i=null;return i=r?new r:function k9(t){return new kx(t.get(Kr))}(ie(ui)),i},providedIn:"root"})}return t})();const{isArray:L9}=Array,{getPrototypeOf:V9,prototype:U9,keys:B9}=Object;const{isArray:H9}=Array;function u0(...t){const e=uo(t),n=function xa(t){return I(ao(t))?t.pop():void 0}(t),{args:r,keys:i}=function j9(t){if(1===t.length){const e=t[0];if(L9(e))return{args:e,keys:null};if(function $9(t){return t&&"object"==typeof t&&V9(t)===U9}(e)){const n=B9(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return A([],e);const o=new st(function W9(t,e,n=dn){return r=>{Lx(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)Lx(e,()=>{const d=A(t[u],e);let p=!1;d.subscribe(de(r,g=>{o[u]=g,p||(p=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>function G9(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,s):dn));return n?o.pipe(function q9(t){return Ce(e=>function z9(t,e){return H9(e)?t(...e):t(e)}(t,e))}(n)):o}function Lx(t,e,n){t?zn(n,t,e):e()}const R_=xe(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function c0(...t){return function Z9(){return ti(1)}()(A(t,uo(t)))}function Vx(t){return new st(e=>{vn(t()).subscribe(e)})}function _f(t,e){const n=I(t)?t:()=>t,r=i=>i.error(n());return new st(e?i=>e.schedule(r,0,i):r)}function l0(){return V((t,e)=>{let n=null;t._refCount++;const r=de(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class Ux extends st{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Y(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct;const n=this.getSubject();e.add(this.source.subscribe(de(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.EMPTY)}return e}refCount(){return l0()(this)}}function bl(t){return t<=0?()=>In:V((e,n)=>{let r=0;e.subscribe(de(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function P_(...t){const e=uo(t);return V((n,r)=>{(e?c0(t,n,e):c0(t,n)).subscribe(r)})}function to(t,e){return V((n,r)=>{let i=0;n.subscribe(de(r,o=>t.call(e,o,i++)&&r.next(o)))})}function M_(t){return V((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Bx(t=K9){return V((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function K9(){return new R_}function ia(t,e){const n=arguments.length>=2;return r=>r.pipe(t?to((i,o)=>t(i,o,r)):dn,bl(1),n?M_(e):Bx(()=>new R_))}function yf(t,e){return I(e)?kt(t,e,1):kt(t,1)}function nr(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?V((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(de(o,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),o.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):dn}function bu(t){return V((e,n)=>{let o,r=null,i=!1;r=e.subscribe(de(n,void 0,void 0,s=>{o=vn(t(s,bu(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function x_(t,e){return V(function Q9(t,e,n,r,i){return(o,s)=>{let a=n,u=e,d=0;o.subscribe(de(s,p=>{const g=d++;u=a?t(u,p,g):(a=!0,p),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(t,e,arguments.length>=2,!0))}function d0(t){return t<=0?()=>In:V((e,n)=>{let r=[];e.subscribe(de(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function h0(t){return V((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const We="primary",vf=Symbol("RouteTitle");class eq{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Sl(t){return new eq(t)}function tq(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function No(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!jx(t[i],e[i]))return!1;return!0}function jx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function $x(t){return t.length>0?t[t.length-1]:null}function oa(t){return function F9(t){return!!t&&(t instanceof st||I(t.lift)&&I(t.subscribe))}(t)?t:Qm(t)?A(Promise.resolve(t)):G(t)}const rq={exact:function qx(t,e,n){if(!Su(t.segments,e.segments)||!N_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!qx(t.children[r],e.children[r],n))return!1;return!0},subset:Gx},Hx={exact:function iq(t,e){return No(t,e)},subset:function oq(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>jx(t[n],e[n]))},ignored:()=>!0};function zx(t,e,n){return rq[n.paths](t.root,e.root,n.matrixParams)&&Hx[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Gx(t,e,n){return Wx(t,e,e.segments,n)}function Wx(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Su(i,n)||e.hasChildren()||!N_(i,n,r))}if(t.segments.length===n.length){if(!Su(t.segments,n)||!N_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!Gx(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Su(t.segments,i)&&N_(t.segments,i,r)&&t.children[We])&&Wx(t.children[We],e,o,r)}}function N_(t,e,n){return e.every((r,i)=>Hx[n](t[i].parameters,r.parameters))}class Rl{constructor(e=new Tt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sl(this.queryParams)),this._queryParamMap}toString(){return uq.serialize(this)}}class Tt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return O_(this)}}class If{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Sl(this.parameters)),this._parameterMap}toString(){return Qx(this)}}function Su(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Ef=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return new f0},providedIn:"root"})}return t})();class f0{parse(e){const n=new vq(e);return new Rl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${wf(e.root,!0)}`,r=function dq(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${k_(n)}=${k_(i)}`).join("&"):`${k_(n)}=${k_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function cq(t){return encodeURI(t)}(e.fragment)}`:""}`}}const uq=new f0;function O_(t){return t.segments.map(e=>Qx(e)).join("/")}function wf(t,e){if(!t.hasChildren())return O_(t);if(e){const n=t.children[We]?wf(t.children[We],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==We&&r.push(`${i}:${wf(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function aq(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===We&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==We&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===We?[wf(t.children[We],!1)]:[`${i}:${wf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[We]?`${O_(t)}/${n[0]}`:`${O_(t)}/(${n.join("//")})`}}function Zx(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function k_(t){return Zx(t).replace(/%3B/gi,";")}function p0(t){return Zx(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function F_(t){return decodeURIComponent(t)}function Kx(t){return F_(t.replace(/\+/g,"%20"))}function Qx(t){return`${p0(t.path)}${function lq(t){return Object.keys(t).map(e=>`;${p0(e)}=${p0(t[e])}`).join("")}(t.parameters)}`}const hq=/^[^\/()?;#]+/;function g0(t){const e=t.match(hq);return e?e[0]:""}const fq=/^[^\/()?;=#]+/,gq=/^[^=?&#]+/,_q=/^[^&#]+/;class vq{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tt([],{}):new Tt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[We]=new Tt(e,n)),r}parseSegment(){const e=g0(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new If(F_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function pq(t){const e=t.match(fq);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=g0(this.remaining);i&&(r=i,this.capture(r))}e[F_(n)]=F_(r)}parseQueryParam(e){const n=function mq(t){const e=t.match(gq);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function yq(t){const e=t.match(_q);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=Kx(n),o=Kx(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=g0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new W(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=We);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[We]:new Tt([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}}function Yx(t){return t.segments.length>0?new Tt([],{[We]:t}):t}function Jx(t){const e={};for(const r of Object.keys(t.children)){const o=Jx(t.children[r]);if(r===We&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Iq(t){if(1===t.numberOfChildren&&t.children[We]){const e=t.children[We];return new Tt(t.segments.concat(e.segments),e.children)}return t}(new Tt(t.segments,e))}function Ru(t){return t instanceof Rl}function Xx(t){let e;const i=Yx(function n(o){const s={};for(const u of o.children){const d=n(u);s[u.outlet]=d}const a=new Tt(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function eN(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return m0(i,i,i,n,r);const o=function wq(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new nN(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new nN(n,e,r)}(e);if(o.toRoot())return m0(i,i,new Tt([],{}),n,r);const s=function Tq(t,e,n){if(t.isAbsolute)return new V_(e,!0,0);if(!n)return new V_(e,!1,NaN);if(null===n.parent)return new V_(n,!0,0);const r=L_(t.commands[0])?0:1;return function Cq(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new V_(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?Cf(s.segmentGroup,s.index,o.commands):rN(s.segmentGroup,s.index,o.commands);return m0(i,s.segmentGroup,a,n,r)}function L_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Tf(t){return"object"==typeof t&&null!=t&&t.outlets}function m0(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,d])=>{o[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`}),s=t===e?n:tN(t,e,n);const a=Yx(Jx(s));return new Rl(a,o,i)}function tN(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:tN(o,e,n)}),new Tt(t.segments,r)}class nN{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&L_(r[0]))throw new W(4003,!1);const i=r.find(Tf);if(i&&i!==$x(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class V_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function rN(t,e,n){if(t||(t=new Tt([],{})),0===t.segments.length&&t.hasChildren())return Cf(t,e,n);const r=function Aq(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Tf(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!oN(u,d,s))return o;r+=2}else{if(!oN(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Tt(t.segments.slice(0,r.pathIndex),{});return o.children[We]=new Tt(t.segments.slice(r.pathIndex),t.children),Cf(o,0,i)}return r.match&&0===i.length?new Tt(t.segments,{}):r.match&&!t.hasChildren()?_0(t,e,n):r.match?Cf(t,0,i):_0(t,e,n)}function Cf(t,e,n){if(0===n.length)return new Tt(t.segments,{});{const r=function Dq(t){return Tf(t[0])?t[0].outlets:{[We]:t}}(n),i={};if(Object.keys(r).some(o=>o!==We)&&t.children[We]&&1===t.numberOfChildren&&0===t.children[We].segments.length){const o=Cf(t.children[We],e,n);return new Tt(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=rN(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Tt(t.segments,i)}}function _0(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Tf(o)){const u=bq(o.outlets);return new Tt(r,u)}if(0===i&&L_(n[0])){r.push(new If(t.segments[e].path,iN(n[0]))),i++;continue}const s=Tf(o)?o.outlets[We]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&L_(a)?(r.push(new If(s,iN(a))),i+=2):(r.push(new If(s,{})),i++)}return new Tt(r,{})}function bq(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=_0(new Tt([],{}),0,r))}),e}function iN(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function oN(t,e,n){return t==n.path&&No(e,n.parameters)}const Df="imperative";class Oo{constructor(e,n){this.id=e,this.url=n}}class U_ extends Oo{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fs extends Oo{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Af extends Oo{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pl extends Oo{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class B_ extends Oo{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sN extends Oo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sq extends Oo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rq extends Oo{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pq extends Oo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mq extends Oo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xq{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nq{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Oq{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kq{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fq{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lq{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aN{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class y0{}class v0{constructor(e){this.url=e}}class Vq{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bf,this.attachRef=null}}let bf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Vq,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class uN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=I0(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=I0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=E0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return E0(e,this._root).map(n=>n.value)}}function I0(t,e){if(t===e.value)return e;for(const n of e.children){const r=I0(t,n);if(r)return r}return null}function E0(t,e){if(t===e.value)return[e];for(const n of e.children){const r=E0(t,n);if(r.length)return r.unshift(e),r}return[]}class ps{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ml(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class cN extends uN{constructor(e,n){super(e),this.snapshot=n,w0(this,e)}toString(){return this.snapshot.toString()}}function lN(t,e){const n=function Uq(t,e){const s=new j_([],{},{},"",{},We,e,null,{});return new hN("",new ps(s,[]))}(0,e),r=new M([new If("",{})]),i=new M({}),o=new M({}),s=new M({}),a=new M(""),u=new Pu(r,i,s,a,o,We,e,n.root);return u.snapshot=n.root,new cN(new ps(u,[]),n)}class Pu{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ce(d=>d[vf]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ce(e=>Sl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ce(e=>Sl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dN(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Bq(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class j_{get title(){return this.data?.[vf]}constructor(e,n,r,i,o,s,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hN extends uN{constructor(e,n){super(n),this.url=e,w0(this,n)}toString(){return fN(this._root)}}function w0(t,e){e.value._routerState=t,e.children.forEach(n=>w0(t,n))}function fN(t){const e=t.children.length>0?` { ${t.children.map(fN).join(", ")} } `:"";return`${t.value}${e}`}function T0(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,No(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),No(e.params,n.params)||t.paramsSubject.next(n.params),function nq(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!No(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),No(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function C0(t,e){const n=No(t.params,e.params)&&function sq(t,e){return Su(t,e)&&t.every((n,r)=>No(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||C0(t.parent,e.parent))}let D0=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=We,this.activateEvents=new Nr,this.deactivateEvents=new Nr,this.attachEvents=new Nr,this.detachEvents=new Nr,this.parentContexts=fe(bf),this.location=fe(Ji),this.changeDetector=fe(Dw),this.environmentInjector=fe(Ni),this.inputBinder=fe($_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new jq(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Eo]})}return t})();class jq{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Pu?this.route:e===bf?this.childContexts:this.parent.get(e,n)}}const $_=new he("");let pN=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=u0([r.queryParams,r.params,r.data]).pipe(gt(([o,s,a],u)=>(a={...o,...s,...a},0===u?G(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function lz(t){const e=tt(t);if(!e)return null;const n=new Kh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();function Sf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Hq(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Sf(t,r,i);return Sf(t,r)})}(t,e,n);return new ps(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Sf(t,a)),s}}const r=function zq(t){return new Pu(new M(t.url),new M(t.params),new M(t.queryParams),new M(t.fragment),new M(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Sf(t,o));return new ps(r,i)}}const A0="ngNavigationCancelingError";function gN(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Ru(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mN(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function mN(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[A0]=!0,r.cancellationCode=e,n&&(r.url=n),r}function _N(t){return t&&t[A0]}let yN=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=br({type:t,selectors:[["ng-component"]],standalone:!0,features:[IP],decls:1,vars:0,template:function(r,i){1&r&&en(0,"router-outlet")},dependencies:[D0],encapsulation:2})}return t})();function b0(t){const e=t.children&&t.children.map(b0),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==We&&(n.component=yN),n}function no(t){return t.outlet||We}function Rf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Jq{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),T0(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Ml(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ml(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ml(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Ml(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Lq(o.value.snapshot))}),e.children.length&&this.forwardEvent(new kq(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(T0(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),T0(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Rf(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class vN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class H_{constructor(e,n){this.component=e,this.route=n}}function Xq(t,e,n){const r=t._root;return Pf(r,e?e._root:null,n,[r.value])}function xl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function bv(t){return null!==ka(t)}(t)?e.get(t):t:r}function Pf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ml(e);return t.children.forEach(s=>{(function t6(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function n6(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Su(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Su(t.url,e.url)||!No(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!C0(t,e)||!No(t.queryParams,e.queryParams);default:return!C0(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new vN(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Pf(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new H_(a.outlet.component,s))}else s&&Mf(e,a,i),i.canActivateChecks.push(new vN(r)),Pf(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Mf(a,n.getContext(s),i)),i}function Mf(t,e,n){const r=Ml(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Mf(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new H_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function xf(t){return"function"==typeof t}function IN(t){return t instanceof R_||"EmptyError"===t?.name}const z_=Symbol("INITIAL_VALUE");function Nl(){return gt(t=>u0(t.map(e=>e.pipe(bl(1),P_(z_)))).pipe(Ce(e=>{for(const n of e)if(!0!==n){if(n===z_)return z_;if(!1===n||n instanceof Rl)return n}return!0}),to(e=>e!==z_),bl(1)))}function EN(t){return function gi(...t){return mi(t)}(nr(e=>{if(Ru(e))throw gN(0,e)}),Ce(e=>!0===e))}class q_{constructor(e){this.segmentGroup=e||null}}class wN{constructor(e){this.urlTree=e}}function Ol(t){return _f(new q_(t))}function TN(t){return _f(new wN(t))}class w6{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new W(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return G(r);if(i.numberOfChildren>1||!i.children[We])return _f(new W(4e3,!1));i=i.children[We]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Rl(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Tt(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const S0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function T6(t,e,n,r,i){const o=R0(t,e,n);return o.matched?(r=function Gq(t,e){return t.providers&&!t._injector&&(t._injector=tw(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function v6(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?G(i.map(s=>{const a=xl(s,t);return oa(function u6(t){return t&&xf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Nl(),EN()):G(!0)}(r,e,n).pipe(Ce(s=>!0===s?o:{...S0}))):G(o)}function R0(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...S0}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||tq)(n,t,e);if(!i)return{...S0};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function CN(t,e,n,r){return n.length>0&&function A6(t,e,n){return n.some(r=>G_(t,e,r)&&no(r)!==We)}(t,n,r)?{segmentGroup:new Tt(e,D6(r,new Tt(n,t.children))),slicedSegments:[]}:0===n.length&&function b6(t,e,n){return n.some(r=>G_(t,e,r))}(t,n,r)?{segmentGroup:new Tt(t.segments,C6(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Tt(t.segments,t.children),slicedSegments:n}}function C6(t,e,n,r,i){const o={};for(const s of r)if(G_(t,n,s)&&!i[no(s)]){const a=new Tt([],{});o[no(s)]=a}return{...i,...o}}function D6(t,e){const n={};n[We]=e;for(const r of t)if(""===r.path&&no(r)!==We){const i=new Tt([],{});n[no(r)]=i}return n}function G_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class M6{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new w6(this.urlSerializer,this.urlTree)}noMatchError(e){return new W(4002,!1)}recognize(){const e=CN(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,We).pipe(bu(n=>{if(n instanceof wN)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof q_?this.noMatchError(n):n}),Ce(n=>{const r=new j_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},We,this.rootComponentType,null,{}),i=new ps(r,n),o=new hN("",i),s=function Eq(t,e,n=null,r=null){return eN(Xx(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,We).pipe(bu(r=>{throw r instanceof q_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=dN(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return A(i).pipe(yf(o=>{const s=r.children[o],a=function Qq(t,e){const n=t.filter(r=>no(r)===e);return n.push(...t.filter(r=>no(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),x_((o,s)=>(o.push(...s),o)),M_(null),function Y9(t,e){const n=arguments.length>=2;return r=>r.pipe(t?to((i,o)=>t(i,o,r)):dn,d0(1),n?M_(e):Bx(()=>new R_))}(),kt(o=>{if(null===o)return Ol(r);const s=DN(o);return function x6(t){t.sort((e,n)=>e.value.outlet===We?-1:n.value.outlet===We?1:e.value.outlet.localeCompare(n.value.outlet))}(s),G(s)}))}processSegment(e,n,r,i,o,s){return A(n).pipe(yf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(bu(u=>{if(u instanceof q_)return G(null);throw u}))),ia(a=>!!a),bu(a=>{if(IN(a))return function R6(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?G([]):Ol(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function S6(t,e,n,r){return!!(no(t)===r||r!==We&&G_(e,n,t))&&("**"===t.path||R0(e,t,n).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Ol(i):Ol(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?TN(o):this.applyRedirects.lineralizeSegments(r,o).pipe(kt(s=>{const a=new Tt(s,{});return this.processSegment(e,n,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:p}=R0(n,i,o);if(!a)return Ol(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,p);return i.redirectTo.startsWith("/")?TN(g):this.applyRedirects.lineralizeSegments(i,g).pipe(kt(_=>this.processSegment(e,r,n,_.concat(d),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a;if("**"===r.path){const u=i.length>0?$x(i).parameters:{};a=G({snapshot:new j_(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AN(r),no(r),r.component??r._loadedComponent??null,r,bN(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=T6(n,r,i,e).pipe(Ce(({matched:u,consumedSegments:d,remainingSegments:p,parameters:g})=>u?{snapshot:new j_(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AN(r),no(r),r.component??r._loadedComponent??null,r,bN(r)),consumedSegments:d,remainingSegments:p}:null));return a.pipe(gt(u=>null===u?Ol(n):this.getChildConfig(e=r._injector??e,r,i).pipe(gt(({routes:d})=>{const p=r._loadedInjector??e,{snapshot:g,consumedSegments:_,remainingSegments:v}=u,{segmentGroup:E,slicedSegments:C}=CN(n,_,v,d);if(0===C.length&&E.hasChildren())return this.processChildren(p,d,E).pipe(Ce(N=>null===N?null:[new ps(g,N)]));if(0===d.length&&0===C.length)return G([new ps(g,[])]);const S=no(r)===o;return this.processSegment(p,d,E,C,S?We:o,!0).pipe(Ce(N=>[new ps(g,N)]))}))))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?G({routes:n._loadedRoutes,injector:n._loadedInjector}):function y6(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?G(!0):G(i.map(s=>{const a=xl(s,t);return oa(function i6(t){return t&&xf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Nl(),EN())}(e,n,r).pipe(kt(i=>i?this.configLoader.loadChildren(e,n).pipe(nr(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function E6(t){return _f(mN(!1,3))}())):G({routes:[],injector:e})}}function N6(t){const e=t.value.routeConfig;return e&&""===e.path}function DN(t){const e=[],n=new Set;for(const r of t){if(!N6(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=DN(r.children);e.push(new ps(r.value,i))}return e.filter(r=>!n.has(r))}function AN(t){return t.data||{}}function bN(t){return t.resolve||{}}function SN(t){return"string"==typeof t.title||null===t.title}function P0(t){return gt(e=>{const n=t(e);return n?A(n).pipe(Ce(()=>e)):G(e)})}const kl=new he("ROUTES");let M0=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=fe(fM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=oa(n.loadComponent()).pipe(Ce(RN),nr(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),h0(()=>{this.componentLoaders.delete(n)})),i=new Ux(r,()=>new B).pipe(l0());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function B6(t,e,n,r){return oa(t.loadChildren()).pipe(Ce(RN),kt(i=>i instanceof yP||Array.isArray(i)?G(i):A(e.compileModuleAsync(i))),Ce(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(kl,[],{optional:!0,self:!0}).flat()),{routes:s.map(b0),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(h0(()=>{this.childrenLoaders.delete(r)})),s=new Ux(o,()=>new B).pipe(l0());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function RN(t){return function j6(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let W_=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new B,this.transitionAbortSubject=new B,this.configLoader=fe(M0),this.environmentInjector=fe(Ni),this.urlSerializer=fe(Ef),this.rootContexts=fe(bf),this.inputBindingEnabled=null!==fe($_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Nq(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new xq(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Df,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(to(o=>0!==o.id),Ce(o=>({...o,extractedUrl:n.urlHandlingStrategy.extract(o.rawUrl)})),gt(o=>{this.currentTransition=o;let s=!1,a=!1;return G(o).pipe(nr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gt(u=>{const d=u.currentBrowserUrl.toString(),p=!n.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!p&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const _="";return this.events.next(new Pl(u.id,this.urlSerializer.serialize(u.rawUrl),_,0)),u.resolve(null),In}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(gt(_=>{const v=this.transitions?.getValue();return this.events.next(new U_(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),v!==this.transitions?.getValue()?In:Promise.resolve(_)}),function O6(t,e,n,r,i,o){return kt(s=>function P6(t,e,n,r,i,o,s="emptyOnly"){return new M6(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(Ce(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),nr(_=>{o.targetSnapshot=_.targetSnapshot,o.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const v=new sN(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(v)}));if(p&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:_,extractedUrl:v,source:E,restoredState:C,extras:S}=u,N=new U_(_,this.urlSerializer.serialize(v),E,C);this.events.next(N);const R=lN(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:R,urlAfterRedirects:v,extras:{...S,skipLocationChange:!1,replaceUrl:!1}},G(o)}{const _="";return this.events.next(new Pl(u.id,this.urlSerializer.serialize(u.extractedUrl),_,1)),u.resolve(null),In}}),nr(u=>{const d=new Sq(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ce(u=>(this.currentTransition=o={...u,guards:Xq(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function l6(t,e){return kt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?G({...n,guardsResult:!0}):function d6(t,e,n,r){return A(t).pipe(kt(i=>function _6(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?G(o.map(a=>{const u=Rf(e)??i,d=xl(a,u);return oa(function a6(t){return t&&xf(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):u.runInContext(()=>d(t,e,n,r))).pipe(ia())})).pipe(Nl()):G(!0)}(i.component,i.route,n,e,r)),ia(i=>!0!==i,!0))}(s,r,i,t).pipe(kt(a=>a&&function r6(t){return"boolean"==typeof t}(a)?function h6(t,e,n,r){return A(e).pipe(yf(i=>c0(function p6(t,e){return null!==t&&e&&e(new Oq(t)),G(!0)}(i.route.parent,r),function f6(t,e){return null!==t&&e&&e(new Fq(t)),G(!0)}(i.route,r),function m6(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function e6(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Vx(()=>G(s.guards.map(u=>{const d=Rf(s.node)??n,p=xl(u,d);return oa(function s6(t){return t&&xf(t.canActivateChild)}(p)?p.canActivateChild(r,t):d.runInContext(()=>p(r,t))).pipe(ia())})).pipe(Nl())));return G(o).pipe(Nl())}(t,i.path,n),function g6(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return G(!0);const i=r.map(o=>Vx(()=>{const s=Rf(e)??n,a=xl(o,s);return oa(function o6(t){return t&&xf(t.canActivate)}(a)?a.canActivate(e,t):s.runInContext(()=>a(e,t))).pipe(ia())}));return G(i).pipe(Nl())}(t,i.route,n))),ia(i=>!0!==i,!0))}(r,o,t,e):G(a)),Ce(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),nr(u=>{if(o.guardsResult=u.guardsResult,Ru(u.guardsResult))throw gN(0,u.guardsResult);const d=new Rq(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),to(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),P0(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(nr(d=>{const p=new Pq(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),gt(d=>{let p=!1;return G(d).pipe(function k6(t,e){return kt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let o=0;return A(i).pipe(yf(s=>function F6(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!SN(i)&&(o[vf]=i.title),function L6(t,e,n,r){const i=function V6(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return G({});const o={};return A(i).pipe(kt(s=>function U6(t,e,n,r){const i=Rf(e)??r,o=xl(t,i);return oa(o.resolve?o.resolve(e,n):i.runInContext(()=>o(e,n)))}(t[s],e,n,r).pipe(ia(),nr(a=>{o[s]=a}))),d0(1),function J9(t){return Ce(()=>t)}(o),bu(s=>IN(s)?In:_f(s)))}(o,t,e,r).pipe(Ce(s=>(t._resolvedData=s,t.data=dN(t,n).resolve,i&&SN(i)&&(t.data[vf]=i.title),null)))}(s.route,r,t,e)),nr(()=>o++),d0(1),kt(s=>o===i.length?G(n):In))})}(n.paramsInheritanceStrategy,this.environmentInjector),nr({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",2)}}))}),nr(d=>{const p=new Mq(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),P0(u=>{const d=p=>{const g=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(p.routeConfig).pipe(nr(_=>{p.component=_}),Ce(()=>{})));for(const _ of p.children)g.push(...d(_));return g};return u0(d(u.targetSnapshot.root)).pipe(M_(),bl(1))}),P0(()=>this.afterPreactivation()),Ce(u=>{const d=function $q(t,e,n){const r=Sf(t,e._root,n?n._root:void 0);return new cN(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:d},o}),nr(()=>{this.events.next(new y0)}),((t,e,n,r)=>Ce(i=>(new Jq(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),bl(1),nr({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fs(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function X9(t){return V((e,n)=>{vn(t).subscribe(de(n,()=>n.complete(),we)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(nr(u=>{throw u}))),h0(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),bu(u=>{if(a=!0,_N(u))this.events.next(new Af(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function qq(t){return _N(t)&&Ru(t.url)}(u)?this.events.next(new v0(u.url)):o.resolve(!1);else{this.events.next(new B_(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(d){o.reject(d)}}return In}))}))}cancelNavigationTransition(n,r,i){const o=new Af(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function PN(t){return t!==Df}let MN=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===We);return r}getResolvedTitleForRoute(n){return n.data[vf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return fe($6)},providedIn:"root"})}return t})(),$6=(()=>{class t extends MN{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Mx))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),H6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return fe(q6)},providedIn:"root"})}return t})();class z6{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let q6=(()=>{class t extends z6{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=function tm(t){return fr(()=>{const e=t.prototype.constructor,n=e[Ei]||qs(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[Ei]||qs(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}(t)))(i||t)}}();static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Z_=new he("",{providedIn:"root",factory:()=>({})});let G6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return fe(W6)},providedIn:"root"})}return t})(),W6=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Nf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Nf||{});function xN(t,e){t.events.pipe(to(n=>n instanceof fs||n instanceof Af||n instanceof B_||n instanceof Pl),Ce(n=>n instanceof fs||n instanceof Pl?Nf.COMPLETE:n instanceof Af&&(0===n.code||1===n.code)?Nf.REDIRECTING:Nf.FAILED),to(n=>n!==Nf.REDIRECTING),bl(1)).subscribe(()=>{e()})}function Z6(t){throw t}function K6(t,e,n){return e.parse("/")}const Q6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Y6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qr=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=fe(dM),this.isNgZoneEnabled=!1,this._events=new B,this.options=fe(Z_,{optional:!0})||{},this.pendingTasks=fe(hM),this.errorHandler=this.options.errorHandler||Z6,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||K6,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=fe(G6),this.routeReuseStrategy=fe(H6),this.titleStrategy=fe(MN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=fe(kl,{optional:!0})?.flat()??[],this.navigationTransitions=fe(W_),this.urlSerializer=fe(Ef),this.location=fe(p_),this.componentInputBindingEnabled=!!fe($_,{optional:!0}),this.eventsSubscription=new ct,this.isNgZoneEnabled=fe(Et)instanceof Et&&Et.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Rl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=lN(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(NN(r)&&this._events.next(r));if(r instanceof U_)PN(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Pl)this.rawUrlTree=i.rawUrl;else if(r instanceof sN){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof y0)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Af)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof v0){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||PN(i.source)};this.scheduleNavigation(o,Df,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof B_&&this.restoreHistory(i,!0),r instanceof fs&&(this.navigated=!0),NN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Df,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(b0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:s;let g,p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...o};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}null!==p&&(p=this.removeEmptyProps(p));try{g=Xx(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return eN(g,n,p,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ru(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Df,null,r)}navigate(n,r={skipLocationChange:!1}){return function J6(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new W(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...Q6}:!1===r?{...Y6}:r,Ru(n))return zx(this.currentUrlTree,n,i);const o=this.parseUrl(n);return zx(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,d;s?(a=s.resolve,u=s.reject,d=s.promise):d=new Promise((g,_)=>{a=g,u=_});const p=this.pendingTasks.add();return xN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function NN(t){return!(t instanceof y0||t instanceof v0)}let Of=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof fs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function gb(t,e,n){return function w2(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?GI:pb}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Qr),Re(Pu),function Hc(t){return function fI(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(ug(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(fn(),t)}("tabindex"),Re(Lm),Re(Xs),Re(Au))};static#t=this.\u0275dir=xn({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&yl("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&PE("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Mw],skipLocationChange:["skipLocationChange","skipLocationChange",Mw],replaceUrl:["replaceUrl","replaceUrl",Mw],routerLink:"routerLink"},standalone:!0,features:[MS,Eo]})}return t})();class ON{}let t5=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(to(n=>n instanceof fs),yf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=tw(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return A(i).pipe(ti())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):G(null);const o=i.pipe(kt(s=>null===s?G(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?A([o,this.loader.loadComponent(r)]).pipe(ti()):o})}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Qr),ie(fM),ie(Ni),ie(ON),ie(M0))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const x0=new he("");let kN=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof U_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof fs?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Pl&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof aN&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new aN(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function rS(){throw new Error("invalid")}()};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();function gs(t,e){return{\u0275kind:t,\u0275providers:e}}function LN(){const t=fe(ui);return e=>{const n=t.get(Cl);if(e!==n.components[0])return;const r=t.get(Qr),i=t.get(VN);1===t.get(N0)&&r.initialNavigation(),t.get(UN,null,et.Optional)?.setUpPreloading(),t.get(x0,null,et.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const VN=new he("",{factory:()=>new B}),N0=new he("",{providedIn:"root",factory:()=>1}),UN=new he("");function o5(t){return gs(0,[{provide:UN,useExisting:t5},{provide:ON,useExisting:t}])}const BN=new he("ROUTER_FORROOT_GUARD"),a5=[p_,{provide:Ef,useClass:f0},Qr,bf,{provide:Pu,useFactory:function FN(t){return t.routerState.root},deps:[Qr]},M0,[]];function u5(){return new IM("Router",Qr)}let jN=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[a5,[],{provide:kl,multi:!0,useValue:n},{provide:BN,useFactory:h5,deps:[[Qr,new gu,new Wc]]},{provide:Z_,useValue:r||{}},r?.useHash?{provide:Au,useClass:gz}:{provide:Au,useClass:YM},{provide:x0,useFactory:()=>{const t=fe(k3),e=fe(Et),n=fe(Z_),r=fe(W_),i=fe(Ef);return n.scrollOffset&&t.setOffset(n.scrollOffset),new kN(i,r,t,e,n)}},r?.preloadingStrategy?o5(r.preloadingStrategy).\u0275providers:[],{provide:IM,multi:!0,useFactory:u5},r?.initialNavigation?f5(r):[],r?.bindToComponentInputs?gs(8,[pN,{provide:$_,useExisting:pN}]).\u0275providers:[],[{provide:$N,useFactory:LN},{provide:Tw,multi:!0,useExisting:$N}]]}}static forChild(n){return{ngModule:t,providers:[{provide:kl,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(ie(BN,8))};static#t=this.\u0275mod=ii({type:t});static#n=this.\u0275inj=ni({})}return t})();function h5(t){return"guarded"}function f5(t){return["disabled"===t.initialNavigation?gs(3,[{provide:gw,multi:!0,useFactory:()=>{const e=fe(Qr);return()=>{e.setUpLocationChangeListener()}}},{provide:N0,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?gs(2,[{provide:N0,useValue:0},{provide:gw,multi:!0,deps:[ui],useFactory:e=>{const n=e.get(fz,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Qr),o=e.get(VN);xN(i,()=>{r(!0)}),e.get(W_).afterPreactivation=()=>(r(!0),o.closed?G(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const $N=new he("");let HN=(()=>{class t{constructor(){this.title="app"}ngAfterViewInit(){$(function(){$('[data-toggle="popover"]').popover()})}openLink(n){window.open(n,"_blank")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=br({type:t,selectors:[["app-home"]],decls:49,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["id","picture"],[1,"about-section","mt-5"],[1,"container"],[1,"row","img-wrap","mb-5","mb-lg-0"],[1,"col-12"],[1,"row"],[1,"mb-4","margin-lg-0","col-lg-6","order-lg-2"],[1,"effect"],["src","assets/lineesiciliane.png","alt","Mappa linee ferroviarie siciliane di RFI",1,"img-fluid"],[1,"col-lg-5","mr-auto","text-lg-right","align-self-center","order-lg-1"],[1,"mb-4"],["id","popover","data-bs-container","body","data-toggle","popover","data-bs-placement","bottom","data-bs-content","Non sono attualmente previsti i posti di movimento, solo STAZIONI e FERMATE. Non sono considerate le linee dismesse. Sono considerate le linee non attive IN FASE DI RIPRISTINO",1,"btn"],["href","https://normativaesercizio.rfi.it/NormativaEsercizio/detail.xhtml?doctype=FCL&compartimento=PA","target","_blank",1,"btn","btn-about"],[1,"material-symbols-outlined"],[1,"mb-4","margin-lg-0","col-lg-6"],["src","https://www.palermomania.it/public/news/image/images/metro.jpg","alt","Cartello passante ferroviario di Palermo",1,"img-fluid"],[1,"col-lg-5","ml-auto","align-self-center","order-lg-1"],["href","https://www.palermomania.it/","target","_blank",1,"btn","btn-about"],["src","https://www.stagniweb.it/altro/orizzf/636gioi0.jpg","alt","Locomotiva E636.010 in transito a Gioiosa Marea(ME)",1,"img-fluid"],["href","https://www.stagniweb.it/foto6.asp?File=orizzf&Inizio=68&Righe=10&InizioI=1&RigheI=150&Col=5&Titolo=0","target","_blank",1,"btn","btn-about"]],template:function(r,i){1&r&&(en(0,"link",0)(1,"div",1),pe(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"a",8),en(9,"img",9),ge()(),pe(10,"div",10)(11,"h2"),Ae(12,"Benvenuto su SpotiRFI! \u{1f684}\u{1f3b5}"),ge(),pe(13,"p",11),Ae(14," SpotiRFI \xe8 un viaggio unico attraverso la musica e le linee ferroviarie della Sicilia. Ogni stazione ferroviaria sulla mappa \xe8 associata a una canzone che porta il suo nome"),pe(15,"span",12),Ae(16," * "),ge(),Ae(17,", creando un'esperienza musicale che riflette il viaggio attraverso la nostra bellissima regione. "),ge(),pe(18,"a",13)(19,"span",14),Ae(20," open_in_new "),ge()()()()()(),pe(21,"div",4)(22,"div",5)(23,"div",6)(24,"div",15)(25,"a",8),en(26,"img",16),ge()(),pe(27,"div",17)(28,"h2"),Ae(29,"Come funziona? \u{1f9d0}"),ge(),pe(30,"p",11),Ae(31," Scegli una linea ferroviaria sulla mappa e inizia il tuo viaggio musicale. Ad ogni fermata, ti verr\xe0 presentata una canzone che porta il nome della stazione. Puoi ascoltare la canzone mentre leggi informazioni sulla stazione e sulla sua storia. "),ge(),pe(32,"a",18)(33,"span",14),Ae(34," open_in_new "),ge()()()()()(),pe(35,"div",4)(36,"div",5)(37,"div",6)(38,"div",7)(39,"a",8),en(40,"img",19),ge()(),pe(41,"div",10)(42,"h2"),Ae(43,"Perch\xe9 SpotiRFI? \u{1f914}"),ge(),pe(44,"p",11),Ae(45," La musica e i viaggi sono due esperienze che possono portarci in luoghi che non abbiamo mai visitato. SpotiRFI combina queste due esperienze in un unico viaggio, permettendoti di esplorare la Sicilia attraverso le sue linee ferroviarie e la sua musica. "),ge(),pe(46,"a",20)(47,"span",14),Ae(48," open_in_new "),ge()()()()()()()())},styles:['#popover[_ngcontent-%COMP%]{background-color:transparent;border:none;color:inherit;padding:0 0 0 5px}.about-section[_ngcontent-%COMP%]{margin:auto}#picture[_ngcontent-%COMP%]{background-image:url(https://external-preview.redd.it/in-sicilia-su-strade-colabrodo-e-treni-lumaca-aspettando-il-v0-YGYToK560tbwieHeMTYEEwdI9G0MiCoAnOe-kdmPdrU.jpg?auto=webp&s=0d0a9a6e7891b6fe511766e49a45ffb84cf2124f);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}.img-wrap[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{position:relative;margin-bottom:0;display:block}.img-wrap[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]:after{z-index:-1;content:"";position:absolute;inset:10px;background:#2b3035;transition:.3s all ease-in-out}.img-wrap[_ngcontent-%COMP%]:hover   .effect[_ngcontent-%COMP%]:after{right:-10px;bottom:-10px;position:absolute}.btn-about[_ngcontent-%COMP%]{color:#000!important;margin-right:5px;margin-left:5px;animation:skew 3s infinite;animation-direction:normal;animation-direction:alternate;padding:5px 17px}.row[_ngcontent-%COMP%]{color:#000;margin-bottom:4em}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}']})}return t})();var Fl=Be(534);(0,Fl.registerVersion)("firebase","10.7.0","app");class _5 extends ct{constructor(e,n){super()}schedule(e,n=0){return this}}const K_={setInterval(t,e,...n){const{delegate:r}=K_;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=K_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class zN extends _5{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return K_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&K_.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ne(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const O0={now:()=>(O0.delegate||Date).now(),delegate:void 0};class kf{constructor(e,n=kf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}kf.now=O0.now;class qN extends kf{constructor(e,n=kf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const I5=new class v5 extends qN{}(class y5 extends zN{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),GN=new qN(zN),k0=new zh("ANGULARFIRE2_VERSION");class WN{constructor(){return((t,e)=>{const n=(0,Fl.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(w5)}}const w5="app-check";function Ll(){}class ZN{zone;delegate;constructor(e,n=I5){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class T5{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ll,{},Ll,Ll)),n.pipe(nr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let KN=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ZN(Zone.current)),this.insideAngular=n.run(()=>new ZN(Zone.current,GN)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ie(Et))};static \u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function di(t){return function D5(t){return function(n){return(n=n.lift(new T5(t.ngZone))).pipe(dr(t.outsideAngular),Jn(t.insideAngular))}}(function Vl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var sa=Be(106);sa.Z.registerVersion("firebase","10.7.0","app-compat");const R5=["ngOnDestroy"];class QN{constructor(e){return e}}const Q_=new he("angularfire2.app.options"),Y_=new he("angularfire2.app.name");function F0(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=sa.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>sa.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;x5("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new QN(s)}const x5=(t,...e)=>{},N5={provide:QN,useFactory:F0,deps:[Q_,Et,[new gu,Y_]]};let O5=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Q_,useValue:n},{provide:Y_,useValue:r}]}}constructor(n){sa.Z.registerVersion("angularfire",k0.full,"core"),sa.Z.registerVersion("angularfire",k0.full,"app-compat"),sa.Z.registerVersion("angular",xb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(ie(is))};static \u0275mod=ii({type:t});static \u0275inj=ni({providers:[N5]})}return t})();function YN(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function k5(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(JN("error",`${e} was already initialized on the ${n} Firebase App with different settings.${F5?" You may need to reload as Firebase is not HMR aware.":""}`),JN("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const F5=typeof module<"u"&&!!module.hot,JN=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Be(377);class L5 extends B{constructor(e=1/0,n=1/0,r=O0){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function XN(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,Oe({connector:()=>new L5(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function eO(t,e){return I(e)?gt(()=>t,e):gt(()=>t)}const tO=new he("angularfire2.auth.use-emulator"),nO=new he("angularfire2.auth.settings"),rO=new he("angularfire2.auth.tenant-id"),iO=new he("angularfire2.auth.langugage-code"),oO=new he("angularfire2.auth.use-device-language"),sO=new he("angularfire.auth.persistence"),aO=(t,e,n,r,i,o,s,a)=>YN(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[d,p]of Object.entries(s))u.settings[d]=p;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]);let uO=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,d,p,g,_,v){const E=new B,C=G(void 0).pipe(Jn(s.outsideAngular),gt(()=>o.runOutsideAngular(()=>Promise.resolve().then(Be.bind(Be,377)))),Ce(()=>F0(n,o,r)),Ce(S=>aO(S,o,a,d,p,g,u,_)),XN({bufferSize:1,refCount:!1}));if(D_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=G(null);else{C.pipe(ia()).subscribe();const S=C.pipe(gt(j=>j.getRedirectResult().then(ne=>ne,()=>null)),di,XN({bufferSize:1,refCount:!1})),N=C.pipe(gt(j=>new st(ne=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(ue=>ne.next(ue),ue=>ne.error(ue),()=>ne.complete()))})))),R=C.pipe(gt(j=>new st(ne=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(ue=>ne.next(ue),ue=>ne.error(ue),()=>ne.complete()))}))));this.authState=S.pipe(eO(N),dr(s.outsideAngular),Jn(s.insideAngular)),this.user=S.pipe(eO(R),dr(s.outsideAngular),Jn(s.insideAngular)),this.idToken=this.user.pipe(gt(j=>j?A(j.getIdToken()):G(null))),this.idTokenResult=this.user.pipe(gt(j=>j?A(j.getIdTokenResult()):G(null))),this.credential=q(S,E,this.authState.pipe(to(j=>!j))).pipe(Ce(j=>j?.user?j:null),dr(s.outsideAngular),Jn(s.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(R5.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,d)=>s.then(p=>{const g=p?.(...d);return r?.spy?.apply&&r.spy.apply(o,d,g),g})})})}))(this,C,o,{spy:{apply:(S,N,R)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&R.then(j=>E.next(j))}}})}static \u0275fac=function(r){return new(r||t)(ie(Q_),ie(Y_,8),ie(is),ie(Et),ie(KN),ie(tO,8),ie(nO,8),ie(rO,8),ie(iO,8),ie(oO,8),ie(sO,8),ie(WN,8))};static \u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function L0(){return V((t,e)=>{let n,r=!1;t.subscribe(de(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}var le,Z=Be(861),cO=Be(537),ko=Be(879),xt=Be(58),U5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ro={},V0=V0||{},$e=U5||self;function J_(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ff(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var U0="closure_uid_"+(1e9*Math.random()>>>0),j5=0;function $5(t,e,n){return t.call.apply(t.bind,arguments)}function H5(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function yr(t,e,n){return(yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$5:H5).apply(null,arguments)}function X_(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Gn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function aa(){this.s=this.s,this.o=this.o}aa.prototype.s=!1,aa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function B5(t){Object.prototype.hasOwnProperty.call(t,U0)&&t[U0]||(t[U0]=++j5)}(this)},aa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lO=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function B0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function dO(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(J_(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function vr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}vr.prototype.h=function(){this.defaultPrevented=!0};var q5=function(){if(!$e.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};$e.addEventListener("test",n,e),$e.removeEventListener("test",n,e)}catch{}return t}();function Lf(t){return/^[\s\xa0]*$/.test(t)}function ey(){var t=$e.navigator;return t&&(t=t.userAgent)?t:""}function Fo(t){return-1!=ey().indexOf(t)}function j0(t){return j0[" "](t),t}j0[" "]=function(){};var H0,t,W5=Fo("Opera"),Ul=Fo("Trident")||Fo("MSIE"),hO=Fo("Edge"),$0=hO||Ul,fO=Fo("Gecko")&&!(-1!=ey().toLowerCase().indexOf("webkit")&&!Fo("Edge"))&&!(Fo("Trident")||Fo("MSIE"))&&!Fo("Edge"),Z5=-1!=ey().toLowerCase().indexOf("webkit")&&!Fo("Edge");function pO(){var t=$e.document;return t?t.documentMode:void 0}e:{var z0="",q0=(t=ey(),fO?/rv:([^\);]+)(\)|;)/.exec(t):hO?/Edge\/([\d\.]+)/.exec(t):Ul?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Z5?/WebKit\/(\S+)/.exec(t):W5?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(q0&&(z0=q0?q0[1]:""),Ul){var G0=pO();if(null!=G0&&G0>parseFloat(z0)){H0=String(G0);break e}}H0=z0}var K5=$e.document&&Ul&&(pO()||parseInt(H0,10))||void 0;function Vf(t,e){if(vr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(fO){e:{try{j0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Q5[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Vf.$.h.call(this)}}Gn(Vf,vr);var Q5={2:"touch",3:"pen",4:"mouse"};Vf.prototype.h=function(){Vf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Uf="closure_listenable_"+(1e6*Math.random()|0),Y5=0;function J5(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Y5,this.fa=this.ia=!1}function ty(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Z0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function mO(t){const e={};for(const n in t)e[n]=t[n];return e}const _O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yO(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<_O.length;o++)n=_O[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ny(t){this.src=t,this.g={},this.h=0}function K0(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=lO(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(ty(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Q0(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}ny.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Q0(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new J5(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var Y0="closure_lm_"+(1e6*Math.random()|0),J0={};function vO(t,e,n,r,i){if(r&&r.once)return EO(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vO(t,e[o],n,r,i);return null}return n=nT(n),t&&t[Uf]?t.O(e,n,Ff(r)?!!r.capture:!!r,i):IO(t,e,n,!1,r,i)}function IO(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ff(i)?!!i.capture:!!i,a=eT(t);if(a||(t[Y0]=a=new ny(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function e8(){const e=t8;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)q5||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(TO(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function EO(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)EO(t,e[o],n,r,i);return null}return n=nT(n),t&&t[Uf]?t.P(e,n,Ff(r)?!!r.capture:!!r,i):IO(t,e,n,!0,r,i)}function wO(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)wO(t,e[o],n,r,i);else r=Ff(r)?!!r.capture:!!r,n=nT(n),t&&t[Uf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Q0(o=t.g[e],n,r,i))&&(ty(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=eT(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Q0(e,n,r,i)),(n=-1<t?e[t]:null)&&X0(n))}function X0(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Uf])K0(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(TO(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=eT(e))?(K0(n,t),0==n.h&&(n.src=null,e[Y0]=null)):ty(t)}}}function TO(t){return t in J0?J0[t]:J0[t]="on"+t}function t8(t,e){if(t.fa)t=!0;else{e=new Vf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&X0(t),t=n.call(r,e)}return t}function eT(t){return(t=t[Y0])instanceof ny?t:null}var tT="__closure_events_fn_"+(1e9*Math.random()>>>0);function nT(t){return"function"==typeof t?t:(t[tT]||(t[tT]=function(e){return t.handleEvent(e)}),t[tT])}function Wn(){aa.call(this),this.i=new ny(this),this.S=this,this.J=null}function rr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new vr(e,t);else if(e instanceof vr)e.target=e.target||t;else{var i=e;yO(e=new vr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=ry(s,r,!0,e)&&i}if(i=ry(s=e.g=t,r,!0,e)&&i,i=ry(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ry(s=e.g=n[o],r,!1,e)&&i}function ry(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&K0(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Gn(Wn,aa),Wn.prototype[Uf]=!0,Wn.prototype.removeEventListener=function(t,e,n,r){wO(this,t,e,n,r)},Wn.prototype.N=function(){if(Wn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ty(n[r]);delete t.g[e],t.h--}}this.J=null},Wn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Wn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var rT=$e.JSON.stringify;function r8(){var t=iT;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var CO=new class n8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new o8,t=>t.reset());class o8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function s8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function a8(t){$e.setTimeout(()=>{throw t},0)}let Bf,jf=!1,iT=new class i8{constructor(){this.h=this.g=null}add(e,n){const r=CO.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},DO=()=>{const t=$e.Promise.resolve(void 0);Bf=()=>{t.then(u8)}};var u8=()=>{for(var t;t=r8();){try{t.h.call(t.g)}catch(n){a8(n)}var e=CO;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}jf=!1};function iy(t,e){Wn.call(this),this.h=t||1,this.g=e||$e,this.j=yr(this.qb,this),this.l=Date.now()}function oT(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function sT(t,e,n){if("function"==typeof t)n&&(t=yr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=yr(t.handleEvent,t)}return 2147483647<Number(e)?-1:$e.setTimeout(t,e||0)}function AO(t){t.g=sT(()=>{t.g=null,t.i&&(t.i=!1,AO(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Gn(iy,Wn),(le=iy.prototype).ga=!1,le.T=null,le.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),rr(this,"tick"),this.ga&&(oT(this),this.start()))}},le.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},le.N=function(){iy.$.N.call(this),oT(this),delete this.g};class c8 extends aa{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AO(this)}N(){super.N(),this.g&&($e.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $f(t){aa.call(this),this.h=t,this.g={}}Gn($f,aa);var bO=[];function SO(t,e,n,r){Array.isArray(n)||(n&&(bO[0]=n.toString()),n=bO);for(var i=0;i<n.length;i++){var o=vO(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function RO(t){Z0(t.g,function(e,n){this.g.hasOwnProperty(n)&&X0(e)},t),t.g={}}function oy(){this.g=!0}function Bl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function f8(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return rT(n)}catch{return e}}(t,n)+(r?" "+r:"")})}$f.prototype.N=function(){$f.$.N.call(this),RO(this)},$f.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},oy.prototype.Ea=function(){this.g=!1},oy.prototype.info=function(){};var xu={},PO=null;function sy(){return PO=PO||new Wn}function MO(t){vr.call(this,xu.Ta,t)}function Hf(t){const e=sy();rr(e,new MO(e))}function xO(t,e){vr.call(this,xu.STAT_EVENT,t),this.stat=e}function Lr(t){const e=sy();rr(e,new xO(e,t))}function NO(t,e){vr.call(this,xu.Ua,t),this.size=e}function zf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return $e.setTimeout(function(){t()},e)}xu.Ta="serverreachability",Gn(MO,vr),xu.STAT_EVENT="statevent",Gn(xO,vr),xu.Ua="timingevent",Gn(NO,vr);var ay={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},OO={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function aT(){}function FO(){}aT.prototype.h=null;var lT,qf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function uT(){vr.call(this,"d")}function cT(){vr.call(this,"c")}function uy(){}function Gf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new $f(this),this.P=p8,this.V=new iy(t=$0?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new LO}function LO(){this.i=null,this.g="",this.h=!1}Gn(uT,vr),Gn(cT,vr),Gn(uy,aT),uy.prototype.g=function(){return new XMLHttpRequest},uy.prototype.i=function(){return{}},lT=new uy;var p8=45e3,VO={},dT={};function hT(t,e,n){t.L=1,t.A=hy(ms(e)),t.u=n,t.S=!0,UO(t,null)}function UO(t,e){t.G=Date.now(),Wf(t),t.B=ms(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),KO(n.i,"t",r),t.o=0,n=t.l.J,t.h=new LO,t.g=v1(t.l,n?e:null,!t.u),0<t.O&&(t.M=new c8(yr(t.Pa,t,t.g),t.O)),SO(t.U,t.g,"readystatechange",t.nb),e=t.I?mO(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Hf(),function l8(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");s=2<=g.length&&"type"==g[1]?s+(p+"=")+d+"&":s+(p+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function BO(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function jO(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=g8(t,n),i==dT){4==e&&(t.s=4,Lr(14),r=!1),Bl(t.j,t.m,null,"[Incomplete Response]");break}if(i==VO){t.s=4,Lr(15),Bl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Bl(t.j,t.m,i,null),fT(t,i)}BO(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Lr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),IT(e),e.M=!0,Lr(11))):(Bl(t.j,t.m,n,"[Invalid Chunked Response]"),Nu(t),Zf(t))}function g8(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?dT:(n=Number(e.substring(n,r)),isNaN(n)?VO:(r+=1)+n>e.length?dT:(e=e.slice(r,r+n),t.o=r+n,e))}function Wf(t){t.Y=Date.now()+t.P,$O(t,t.P)}function $O(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=zf(yr(t.lb,t),e)}function cy(t){t.C&&($e.clearTimeout(t.C),t.C=null)}function Zf(t){0==t.l.H||t.J||g1(t.l,t)}function Nu(t){cy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,oT(t.V),RO(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function fT(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||pT(n.i,t)))if(!t.K&&pT(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;yy(n),my(n)}vT(n),Lr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=zf(yr(n.ib,n),6e3));if(1>=JO(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ku(n,11)}else if((t.K||n.g==t)&&yy(n),!Lf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const p=d[3];null!=p&&(n.ra=p,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const E=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var o=r.i;o.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(gT(o,o.h),o.h=null))}if(r.F){const C=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.Da=C,Gt(r.I,r.F,C))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=y1(r,r.J?r.pa:null,r.Y),s.K){XO(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(cy(a),Wf(a)),r.g=s}else f1(r);0<n.j.length&&_y(n)}else"stop"!=d[0]&&"close"!=d[0]||ku(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?ku(n,7):yT(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}Hf()}catch{}}function HO(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(J_(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function _8(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(J_(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function m8(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(J_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(le=Gf.prototype).setTimeout=function(t){this.P=t},le.nb=function(t){t=t.target;const e=this.M;e&&3==Lo(t)?e.l():this.Pa(t)},le.Pa=function(t){try{if(t==this.g)e:{const p=Lo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>p)&&(3!=p||$0||this.g&&(this.h.h||this.g.ja()||a1(this.g)))){this.J||4!=p||7==e||Hf(),cy(this);var n=this.g.da();this.ca=n;t:if(BO(this)){var r=a1(this.g);t="";var i=r.length,o=4==Lo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Nu(this),Zf(this);var s="";break t}this.h.i=new $e.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function d8(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lf(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.s=3,Lr(12),Nu(this),Zf(this);break e}Bl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fT(this,n)}this.S?(jO(this,p,s),$0&&this.i&&3==p&&(SO(this.U,this.V,"tick",this.mb),this.V.start())):(Bl(this.j,this.m,s,null),fT(this,s)),4==p&&Nu(this),this.i&&!this.J&&(4==p?g1(this.l,this):(this.i=!1,Wf(this)))}else(function k8(t){const e={};t=(t.g&&2<=Lo(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Lf(t[r]))continue;var n=s8(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function X5(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Lr(12)):(this.s=0,Lr(13)),Nu(this),Zf(this)}}}catch{}},le.mb=function(){if(this.g){var t=Lo(this.g),e=this.g.ja();this.o<e.length&&(cy(this),jO(this,t,e),this.i&&4!=t&&Wf(this))}},le.cancel=function(){this.J=!0,Nu(this)},le.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function h8(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Hf(),Lr(17)),Nu(this),this.s=2,Zf(this)):$O(this,this.Y-t)};var zO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ou(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ou){this.h=t.h,ly(this,t.j),this.s=t.s,this.g=t.g,dy(this,t.m),this.l=t.l;var e=t.i,n=new Yf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),qO(this,n),this.o=t.o}else t&&(e=String(t).match(zO))?(this.h=!1,ly(this,e[1]||"",!0),this.s=Kf(e[2]||""),this.g=Kf(e[3]||"",!0),dy(this,e[4]),this.l=Kf(e[5]||"",!0),qO(this,e[6]||"",!0),this.o=Kf(e[7]||"")):(this.h=!1,this.i=new Yf(null,this.h))}function ms(t){return new Ou(t)}function ly(t,e,n){t.j=n?Kf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function dy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function qO(t,e,n){e instanceof Yf?(t.i=e,function C8(t,e){e&&!t.j&&(ua(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(WO(this,r),KO(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Qf(e,w8)),t.i=new Yf(e,t.h))}function Gt(t,e,n){t.i.set(e,n)}function hy(t){return Gt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Kf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,v8),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function v8(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ou.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qf(e,GO,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Qf(e,GO,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Qf(n,"/"==n.charAt(0)?E8:I8,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Qf(n,T8)),t.join("")};var GO=/[#\/\?@]/g,I8=/[#\?:]/g,E8=/[#\?]/g,w8=/[#\?@]/g,T8=/#/g;function Yf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ua(t){t.g||(t.g=new Map,t.h=0,t.i&&function y8(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function WO(t,e){ua(t),e=jl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ZO(t,e){return ua(t),e=jl(t,e),t.g.has(e)}function KO(t,e,n){WO(t,e),0<n.length&&(t.i=null,t.g.set(jl(t,e),B0(n)),t.h+=n.length)}function jl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function QO(t){this.l=t||A8,t=$e.PerformanceNavigationTiming?0<(t=$e.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!($e.g&&$e.g.Ka&&$e.g.Ka()&&$e.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(le=Yf.prototype).add=function(t,e){ua(this),this.i=null,t=jl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},le.forEach=function(t,e){ua(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},le.ta=function(){ua(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},le.Z=function(t){ua(this);let e=[];if("string"==typeof t)ZO(this,t)&&(e=e.concat(this.g.get(jl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},le.set=function(t,e){return ua(this),this.i=null,ZO(this,t=jl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},le.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},le.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var A8=10;function YO(t){return!!t.h||!!t.g&&t.g.size>=t.j}function JO(t){return t.h?1:t.g?t.g.size:0}function pT(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function gT(t,e){t.g?t.g.add(e):t.h=e}function XO(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function e1(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return B0(t.i)}QO.prototype.cancel=function(){if(this.i=e1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var b8=class{stringify(t){return $e.JSON.stringify(t,void 0)}parse(t){return $e.JSON.parse(t,void 0)}};function S8(){this.g=new b8}function R8(t,e,n){const r=n||"";try{HO(t,function(i,o){let s=i;Ff(i)&&(s=rT(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function fy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Jf(t){this.l=t.ec||null,this.j=t.ob||!1}function py(t,e){Wn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=mT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gn(Jf,aT),Jf.prototype.g=function(){return new py(this.l,this.j)},Jf.prototype.i=function(t){return function(){return t}}({}),Gn(py,Wn);var mT=0;function t1(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Xf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ep(t)}function ep(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(le=py.prototype).open=function(t,e){if(this.readyState!=mT)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ep(this)},le.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||$e).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xf(this)),this.readyState=mT},le.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ep(this)),this.g&&(this.readyState=3,ep(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof $e.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;t1(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},le.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Xf(this):ep(this),3==this.readyState&&t1(this)}},le.Za=function(t){this.g&&(this.response=this.responseText=t,Xf(this))},le.Ya=function(t){this.g&&(this.response=t,Xf(this))},le.ka=function(){this.g&&Xf(this)},le.setRequestHeader=function(t,e){this.v.append(t,e)},le.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},le.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(py.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var M8=$e.JSON.parse;function un(t){Wn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=n1,this.L=this.M=!1}Gn(un,Wn);var n1="",x8=/^https?$/i,N8=["POST","PUT"];function r1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,i1(t),gy(t)}function i1(t){t.F||(t.F=!0,rr(t,"complete"),rr(t,"error"))}function o1(t){if(t.h&&typeof V0<"u"&&(!t.C[1]||4!=Lo(t)||2!=t.da()))if(t.v&&4==Lo(t))sT(t.La,0,t);else if(rr(t,"readystatechange"),4==Lo(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(zO)[1]||null;!i&&$e.self&&$e.self.location&&(i=$e.self.location.protocol.slice(0,-1)),r=!x8.test(i?i.toLowerCase():"")}n=r}if(n)rr(t,"complete"),rr(t,"success");else{t.m=6;try{var o=2<Lo(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",i1(t)}}finally{gy(t)}}}function gy(t,e){if(t.g){s1(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||rr(t,"ready");try{n.onreadystatechange=r}catch{}}}function s1(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&($e.clearTimeout(t.A),t.A=null)}function Lo(t){return t.g?t.g.readyState:0}function a1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case n1:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function u1(t){let e="";return Z0(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function _T(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=u1(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Gt(t,e,n))}function tp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function c1(t){this.Ga=0,this.j=[],this.l=new oy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=tp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=tp("baseRetryDelayMs",5e3,t),this.hb=tp("retryDelaySeedMs",1e4,t),this.eb=tp("forwardChannelMaxRetries",2,t),this.xa=tp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new QO(t&&t.concurrentRequestLimit),this.Ja=new S8,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function yT(t){if(l1(t),3==t.H){var e=t.W++,n=ms(t.I);if(Gt(n,"SID",t.K),Gt(n,"RID",e),Gt(n,"TYPE","terminate"),np(t,n),(e=new Gf(t,t.l,e)).L=2,e.A=hy(ms(n)),n=!1,$e.navigator&&$e.navigator.sendBeacon)try{n=$e.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&$e.Image&&((new Image).src=e.A,n=!0),n||(e.g=v1(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Wf(e)}_1(t)}function my(t){t.g&&(IT(t),t.g.cancel(),t.g=null)}function l1(t){my(t),t.u&&($e.clearTimeout(t.u),t.u=null),yy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&$e.clearTimeout(t.m),t.m=null)}function _y(t){if(!YO(t.i)&&!t.m){t.m=!0;var e=t.Na;Bf||DO(),jf||(Bf(),jf=!0),iT.add(e,t),t.C=0}}function d1(t,e){var n;n=e?e.m:t.W++;const r=ms(t.I);Gt(r,"SID",t.K),Gt(r,"RID",n),Gt(r,"AID",t.V),np(t,r),t.o&&t.s&&_T(r,t.o,t.s),n=new Gf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=h1(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),gT(t.i,n),hT(n,r,e)}function np(t,e){t.na&&Z0(t.na,function(n,r){Gt(e,r,n)}),t.h&&HO({},function(n,r){Gt(e,r,n)})}function h1(t,e,n){n=Math.min(t.j.length,n);var r=t.h?yr(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const p=i[u].map;if(d-=o,0>d)o=Math.max(0,i[u].g-100),a=!1;else try{R8(p,s,"req"+d+"_")}catch{r&&r(p)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function f1(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Bf||DO(),jf||(Bf(),jf=!0),iT.add(e,t),t.A=0}}function vT(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=zf(yr(t.Ma,t),m1(t,t.A)),t.A++,0))}function IT(t){null!=t.B&&($e.clearTimeout(t.B),t.B=null)}function p1(t){t.g=new Gf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=ms(t.wa);Gt(e,"RID","rpc"),Gt(e,"SID",t.K),Gt(e,"AID",t.V),Gt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Gt(e,"TO",t.qa),Gt(e,"TYPE","xmlhttp"),np(t,e),t.o&&t.s&&_T(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=hy(ms(e)),n.u=null,n.S=!0,UO(n,t)}function yy(t){null!=t.v&&($e.clearTimeout(t.v),t.v=null)}function g1(t,e){var n=null;if(t.g==e){yy(t),IT(t),t.g=null;var r=2}else{if(!pT(t.i,e))return;n=e.F,XO(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;rr(r=sy(),new NO(r,n)),_y(t)}else f1(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function F8(t,e){return!(JO(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=zf(yr(t.Na,t,e),m1(t,t.C)),t.C++,0)))}(t,e)||2==r&&vT(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ku(t,5);break;case 4:ku(t,10);break;case 3:ku(t,6);break;default:ku(t,2)}}function m1(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ku(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=yr(t.pb,t);n||(n=new Ou("//www.google.com/images/cleardot.gif"),$e.location&&"http"==$e.location.protocol||ly(n,"https"),hy(n)),function P8(t,e){const n=new oy;if($e.Image){const r=new Image;r.onload=X_(fy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=X_(fy,n,r,"TestLoadImage: error",!1,e),r.onabort=X_(fy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=X_(fy,n,r,"TestLoadImage: timeout",!1,e),$e.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Lr(2);t.H=0,t.h&&t.h.za(e),_1(t),l1(t)}function _1(t){if(t.H=0,t.ma=[],t.h){const e=e1(t.i);(0!=e.length||0!=t.j.length)&&(dO(t.ma,e),dO(t.ma,t.j),t.i.i.length=0,B0(t.j),t.j.length=0),t.h.ya()}}function y1(t,e,n){var r=n instanceof Ou?ms(n):new Ou(n);if(""!=r.g)e&&(r.g=e+"."+r.g),dy(r,r.m);else{var i=$e.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Ou(null);r&&ly(o,r),e&&(o.g=e),i&&dy(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&Gt(r,n,e),Gt(r,"VER",t.ra),np(t,r),r}function v1(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new un(t.Ha&&!t.va?new Jf({ob:n}):t.va)).Oa(t.J),e}function I1(){}function vy(){if(Ul&&!(10<=Number(K5)))throw Error("Environmental error: no available transport.")}function hi(t,e){Wn.call(this),this.g=new c1(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Lf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Lf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new $l(this)}function E1(t){uT.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function w1(){cT.call(this),this.status=1}function $l(t){this.g=t}function io(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ET(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function Ct(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(le=un.prototype).Oa=function(t){this.M=t},le.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():lT.g(),this.C=function kO(t){return t.h||(t.h=t.i())}(this.u?this.u:lT),this.g.onreadystatechange=yr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void r1(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=$e.FormData&&t instanceof $e.FormData,!(0<=lO(N8,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{s1(this),0<this.B&&((this.L=function O8(t){return Ul&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yr(this.ua,this)):this.A=sT(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){r1(this,o)}},le.ua=function(){typeof V0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rr(this,"timeout"),this.abort(8))},le.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,rr(this,"complete"),rr(this,"abort"),gy(this))},le.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gy(this,!0)),un.$.N.call(this)},le.La=function(){this.s||(this.G||this.v||this.l?o1(this):this.kb())},le.kb=function(){o1(this)},le.isActive=function(){return!!this.g},le.da=function(){try{return 2<Lo(this)?this.g.status:-1}catch{return-1}},le.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},le.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),M8(e)}},le.Ia=function(){return this.m},le.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(le=c1.prototype).ra=8,le.H=1,le.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Gf(this,this.l,t);let o=this.s;if(this.U&&(o?(o=mO(o),yO(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=h1(this,i,e),Gt(n=ms(this.I),"RID",t),Gt(n,"CVER",22),this.F&&Gt(n,"X-HTTP-Session-Id",this.F),np(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(u1(o)))+"&"+e:this.o&&_T(n,this.o,o)),gT(this.i,i),this.bb&&Gt(n,"TYPE","init"),this.P?(Gt(n,"$req",e),Gt(n,"SID","null"),i.aa=!0,hT(i,n,null)):hT(i,n,e),this.H=2}}else 3==this.H&&(t?d1(this,t):0==this.j.length||YO(this.i)||d1(this))},le.Ma=function(){if(this.u=null,p1(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=zf(yr(this.jb,this),t)}},le.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Lr(10),my(this),p1(this))},le.ib=function(){null!=this.v&&(this.v=null,my(this),vT(this),Lr(19))},le.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Lr(2)):(this.l.info("Failed to ping google.com"),Lr(1))},le.isActive=function(){return!!this.h&&this.h.isActive(this)},(le=I1.prototype).Ba=function(){},le.Aa=function(){},le.za=function(){},le.ya=function(){},le.isActive=function(){return!0},le.Va=function(){},vy.prototype.g=function(t,e){return new hi(t,e)},Gn(hi,Wn),hi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Lr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=y1(t,null,t.Y),_y(t)},hi.prototype.close=function(){yT(this.g)},hi.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=rT(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&_y(e)},hi.prototype.N=function(){this.g.h=null,delete this.j,yT(this.g),delete this.g,hi.$.N.call(this)},Gn(E1,uT),Gn(w1,cT),Gn($l,I1),$l.prototype.Ba=function(){rr(this.g,"a")},$l.prototype.Aa=function(t){rr(this.g,new E1(t))},$l.prototype.za=function(t){rr(this.g,new w1)},$l.prototype.ya=function(){rr(this.g,"b")},Gn(io,function L8(){this.blockSize=-1}),io.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},io.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)ET(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){ET(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){ET(this,r),i=0;break}}this.h=i,this.i+=e},io.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var V8={};function wT(t){return-128<=t&&128>t?function G5(t,e){var n=V8;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Ct([0|e],0>e?-1:0)}):new Ct([0|t],0>t?-1:0)}function Vo(t){if(isNaN(t)||!isFinite(t))return Hl;if(0>t)return ir(Vo(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=TT;return new Ct(e,0)}var TT=4294967296,Hl=wT(0),CT=wT(1),C1=wT(16777216);function _s(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Vi(t){return-1==t.h}function ir(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ct(n,~t.h).add(CT)}function Iy(t,e){return t.add(ir(e))}function Ey(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function rp(t,e){this.g=t,this.h=e}function wy(t,e){if(_s(e))throw Error("division by zero");if(_s(t))return new rp(Hl,Hl);if(Vi(t))return e=wy(ir(t),e),new rp(ir(e.g),ir(e.h));if(Vi(e))return e=wy(t,ir(e)),new rp(ir(e.g),e.h);if(30<t.g.length){if(Vi(t)||Vi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=CT,r=e;0>=r.X(t);)n=D1(n),r=D1(r);var i=zl(n,1),o=zl(r,1);for(r=zl(r,2),n=zl(n,2);!_s(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=zl(r,1),n=zl(n,1)}return e=Iy(t,i.R(e)),new rp(i,e)}for(i=Hl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Vo(n)).R(e);Vi(s)||0<s.X(t);)s=(o=Vo(n-=r)).R(e);_s(o)&&(o=CT),i=i.add(o),t=Iy(t,s)}return new rp(i,t)}function D1(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ct(n,t.h)}function zl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Ct(i,t.h)}(le=Ct.prototype).ea=function(){if(Vi(this))return-ir(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:TT+r)*e,e*=TT}return t},le.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(_s(this))return"0";if(Vi(this))return"-"+ir(this).toString(t);for(var e=Vo(Math.pow(t,6)),n=this,r="";;){var i=wy(n,e).g,o=((0<(n=Iy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(_s(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},le.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},le.X=function(t){return Vi(t=Iy(this,t))?-1:_s(t)?0:1},le.abs=function(){return Vi(this)?ir(this):this},le.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new Ct(n,-2147483648&n[n.length-1]?-1:0)},le.R=function(t){if(_s(this)||_s(t))return Hl;if(Vi(this))return Vi(t)?ir(this).R(ir(t)):ir(ir(this).R(t));if(Vi(t))return ir(this.R(ir(t)));if(0>this.X(C1)&&0>t.X(C1))return Vo(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=s*u,Ey(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Ey(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Ey(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Ey(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ct(n,0)},le.gb=function(t){return wy(this,t).h},le.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ct(n,this.h&t.h)},le.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ct(n,this.h|t.h)},le.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ct(n,this.h^t.h)},vy.prototype.createWebChannel=vy.prototype.g,hi.prototype.send=hi.prototype.u,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,ay.NO_ERROR=0,ay.TIMEOUT=8,ay.HTTP_ERROR=6,OO.COMPLETE="complete",FO.EventType=qf,qf.OPEN="a",qf.CLOSE="b",qf.ERROR="c",qf.MESSAGE="d",Wn.prototype.listen=Wn.prototype.O,un.prototype.listenOnce=un.prototype.P,un.prototype.getLastError=un.prototype.Sa,un.prototype.getLastErrorCode=un.prototype.Ia,un.prototype.getStatus=un.prototype.da,un.prototype.getResponseJson=un.prototype.Wa,un.prototype.getResponseText=un.prototype.ja,un.prototype.send=un.prototype.ha,un.prototype.setWithCredentials=un.prototype.Oa,io.prototype.digest=io.prototype.l,io.prototype.reset=io.prototype.reset,io.prototype.update=io.prototype.j,Ct.prototype.add=Ct.prototype.add,Ct.prototype.multiply=Ct.prototype.R,Ct.prototype.modulo=Ct.prototype.gb,Ct.prototype.compare=Ct.prototype.X,Ct.prototype.toNumber=Ct.prototype.ea,Ct.prototype.toString=Ct.prototype.toString,Ct.prototype.getBits=Ct.prototype.D,Ct.fromNumber=Vo,Ct.fromString=function T1(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return ir(T1(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Vo(Math.pow(e,8)),r=Hl,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Vo(Math.pow(e,o)),r=r.R(o).add(Vo(s))):r=(r=r.R(n)).add(Vo(s))}return r};var U8=ro.createWebChannelTransport=function(){return new vy},B8=ro.getStatEventTarget=function(){return sy()},DT=ro.ErrorCode=ay,j8=ro.EventType=OO,$8=ro.Event=xu,A1=ro.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ty=(ro.FetchXmlHttpFactory=Jf,ro.WebChannel=FO),H8=ro.XhrIo=un,z8=ro.Md5=io,ql=ro.Integer=Ct;const b1="@firebase/firestore";class Zn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");let Gl="10.7.0";const ca=new ko.Yd("@firebase/firestore");function Wl(){return ca.logLevel}function te(t,...e){if(ca.logLevel<=ko.in.DEBUG){const n=e.map(AT);ca.debug(`Firestore (${Gl}): ${t}`,...n)}}function gn(t,...e){if(ca.logLevel<=ko.in.ERROR){const n=e.map(AT);ca.error(`Firestore (${Gl}): ${t}`,...n)}}function Yr(t,...e){if(ca.logLevel<=ko.in.WARN){const n=e.map(AT);ca.warn(`Firestore (${Gl}): ${t}`,...n)}}function AT(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function _e(t="Unexpected state"){const e=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: `+t;throw gn(e),new Error(e)}function De(t,e){t||_e()}function oe(t,e){return t}const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends xt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class S1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zn.UNAUTHENTICATED))}shutdown(){}}class Z8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class K8{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let s=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bn,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const d=s;e.enqueueRetryable((0,Z.Z)(function*(){yield d.promise,yield o(r.currentUser)}))},u=d=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De("string"==typeof r.accessToken),new S1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(null===e||"string"==typeof e),new Zn(e)}}class Q8{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Y8{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Q8(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class R1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,te("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De("string"==typeof n.token),this.R=n.token,new R1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function X8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class P1{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=X8(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function Zl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function M1(t){return t+"\0"}class tn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tn.fromMillis(Date.now())}static fromDate(e){return tn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new tn(0,0))}static max(){return new be(new tn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ip{constructor(e,n,r){void 0===n?n=0:n>e.length&&_e(),void 0===r?r=e.length-n:r>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ip.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ip?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dt extends ip{construct(e,n,r){return new dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const eG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends ip{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return eG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new X(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new X(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new X(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new X(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(dt.fromString(e))}static fromName(e){return new ae(dt.fromString(e).popFirst(5))}static empty(){return new ae(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new dt(e.slice()))}}class Kl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function bT(t){return t.fields.find(e=>2===e.kind)}function Fu(t){return t.fields.filter(e=>2!==e.kind)}Kl.UNKNOWN_ID=-1;class Lu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ql{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ql(0,fi.min())}}function x1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(1e9===r?new tn(n+1,0):new tn(n,r));return new fi(i,ae.empty(),e)}function N1(t){return new fi(t.readTime,t.key,-1)}class fi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fi(be.min(),ae.empty(),-1)}static max(){return new fi(be.max(),ae.empty(),-1)}}function ST(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ae.comparator(t.documentKey,e.documentKey),0!==n?n:Ve(t.largestBatchId,e.largestBatchId))}const O1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function la(t){return RT.apply(this,arguments)}function RT(){return RT=(0,Z.Z)(function*(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==O1)throw t;te("LocalStore","Unexpectedly lost primary lease")}),RT.apply(this,arguments)}class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new x((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):x.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):x.reject(n)}static resolve(e){return new x((n,r)=>{n(e)})}static reject(e){return new x((n,r)=>{r(e)})}static waitFor(e){return new x((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=x.resolve(!1);for(const r of e)n=n.next(i=>i?x.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new x((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(p=>{s[d]=p,++a,a===o&&r(s)},p=>i(p))}})}static doWhile(e,n){return new x((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Cy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Bn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new op(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=PT(r.target.error);this.V.reject(new op(e,i))}}static open(e,n,r,i){try{return new Cy(n,e.transaction(i,r))}catch(o){throw new op(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new iG(n)}}class oo{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===oo.S((0,xt.z$)())&&gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),Vu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,xt.hl)())return!1;if(oo.C())return!0;const e=(0,xt.z$)(),n=oo.S(e),r=0<n&&n<10,i=oo.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,Z.Z)(function*(){return n.db||(te("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new op(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new X(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new X(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new op(e,a))},o.onupgradeneeded=s=>{te("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{te("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,Z.Z)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=Cy.open(o.db,e,s?"readonly":"readwrite",r),d=i(u).next(p=>(u.g(),p)).catch(p=>(u.abort(p),x.reject(p))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,p="FirebaseError"!==d.name&&a<3;if(te("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),o.close(),!p)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rG{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Vu(this.k.delete())}}class op extends X{constructor(e,n){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function da(t){return"IndexedDbTransactionError"===t.name}class iG{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(te("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vu(r)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),Vu(this.store.add(e))}get(e){return Vu(this.store.get(e)).next(n=>(void 0===n&&(n=null),te("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),Vu(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),Vu(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(s,a)=>{o.push(a)}).next(()=>o)}{const i=this.store.getAll(r.range);return new x((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new x((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){te("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new x((r,i)=>{n.onerror=o=>{const s=PT(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new x((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new rG(a),d=n(a.primaryKey,a.value,u);if(d instanceof x){const p=d.catch(g=>(u.done(),x.reject(g)));r.push(p)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>x.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Vu(t){return new x((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=PT(r.target.error);n(i)}})}let F1=!1;function PT(t){const e=oo.S((0,xt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return F1||(F1=!0,setTimeout(()=>{throw r},0)),r}}return t}class oG{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;te("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Z.Z)(function*(){n.task=null;try{te("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){da(r)?te("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield la(r)}yield n.ee(6e4)}))}}class sG{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Z.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return x.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return te("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(te("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=N1(o);ST(s,r)>0&&(r=s)}),new fi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let pi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function sp(t){return null==t}function ap(t){return 0===t&&1/t==-1/0}function L1(t){return"number"==typeof t&&Number.isInteger(t)&&!ap(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Ir(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=V1(e)),e=aG(t.get(n),e);return V1(e)}function aG(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function V1(t){return t+"\x01\x01"}function Uo(t){const e=t.length;if(De(e>=2),2===e)return De("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),dt.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&_e(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:_e()}o=s+2}return new dt(r)}const U1=["userId","batchId"];function Dy(t,e){return[t,Ir(e)]}function B1(t,e,n){return[t,Ir(e),n]}const uG={},cG=["prefixPath","collectionGroup","readTime","documentId"],lG=["prefixPath","collectionGroup","documentId"],dG=["collectionGroup","readTime","prefixPath","documentId"],hG=["canonicalId","targetId"],fG=["targetId","path"],pG=["path","targetId"],gG=["collectionId","parent"],mG=["indexId","uid"],_G=["uid","sequenceNumber"],yG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vG=["indexId","uid","orderedDocumentKey"],IG=["userId","collectionPath","documentId"],EG=["userId","collectionPath","largestBatchId"],wG=["userId","collectionGroup","largestBatchId"],j1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TG=[...j1,"documentOverlays"],$1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],H1=$1,CG=[...H1,"indexConfiguration","indexState","indexEntries"];class MT extends k1{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Kn(t,e){const n=oe(t);return oo.M(n.ae,e)}function z1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ha(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function q1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ut{constructor(e,n){this.comparator=e,this.root=n||or.EMPTY}insert(e,n){return new Ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,or.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,or.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ay(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ay(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ay(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ay(this.root,e,this.comparator,!0)}}class Ay{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class or{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??or.RED,this.left=i??or.EMPTY,this.right=o??or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new or(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return or.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}or.EMPTY=null,or.RED=!0,or.BLACK=!1,or.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,r,i,o){return this}insert(e,n,r){return new or(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class St{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G1(this.data.getIterator())}getIteratorFrom(e){return new G1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class G1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yl(t){return t.hasNext()?t.getNext():void 0}class Jr{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Jr([])}unionWith(e){let n=new St(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class W1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new W1("Invalid base64 string: "+o):o}}(e);return new jn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new jn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const AG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(t){if(De(!!t),"string"==typeof t){let e=0;const n=AG.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cn(t.seconds),nanos:cn(t.nanos)}}function cn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ys(t){return"string"==typeof t?jn.fromBase64String(t):jn.fromUint8Array(t)}function by(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sy(t){const e=t.mapValue.fields.__previous_value__;return by(e)?Sy(e):e}function up(t){const e=fa(t.mapValue.fields.__local_write_time__.timestampValue);return new tn(e.seconds,e.nanos)}class bG{constructor(e,n,r,i,o,s,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class pa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new pa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pa&&e.projectId===this.projectId&&e.database===this.database}}const ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ry={nullValue:"NULL_VALUE"};function ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?by(t)?4:Y1(t)?9007199254740991:10:_e()}function Bo(t,e){if(t===e)return!0;const n=ma(t);if(n!==ma(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return up(t).isEqual(up(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=fa(i.timestampValue),a=fa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,ys(t.bytesValue).isEqual(ys(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return cn(i.geoPointValue.latitude)===cn(o.geoPointValue.latitude)&&cn(i.geoPointValue.longitude)===cn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return cn(i.integerValue)===cn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=cn(i.doubleValue),a=cn(o.doubleValue);return s===a?ap(s)===ap(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Zl(t.arrayValue.values||[],e.arrayValue.values||[],Bo);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(z1(s)!==z1(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!Bo(s[u],a[u])))return!1;return!0}(t,e);default:return _e()}var o}function cp(t,e){return void 0!==(t.values||[]).find(n=>Bo(n,e))}function _a(t,e){if(t===e)return 0;const n=ma(t),r=ma(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=cn(o.integerValue||o.doubleValue),u=cn(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Z1(t.timestampValue,e.timestampValue);case 4:return Z1(up(t),up(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(o,s){const a=ys(o),u=ys(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let d=0;d<a.length&&d<u.length;d++){const p=Ve(a[d],u[d]);if(0!==p)return p}return Ve(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Ve(cn(o.latitude),cn(s.latitude));return 0!==a?a:Ve(cn(o.longitude),cn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let d=0;d<a.length&&d<u.length;++d){const p=_a(a[d],u[d]);if(p)return p}return Ve(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ga.mapValue&&s===ga.mapValue)return 0;if(o===ga.mapValue)return 1;if(s===ga.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),d=s.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const _=Ve(u[g],p[g]);if(0!==_)return _;const v=_a(a[u[g]],d[p[g]]);if(0!==v)return v}return Ve(u.length,p.length)}(t.mapValue,e.mapValue);default:throw _e()}}function Z1(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ve(t,e);const n=fa(t),r=fa(e),i=Ve(n.seconds,r.seconds);return 0!==i?i:Ve(n.nanos,r.nanos)}function Jl(t){return xT(t)}function xT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ys(t.bytesValue).toBase64():"referenceValue"in t?ae.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=xT(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${xT(n.fields[s])}`;return i+"}"}(t.mapValue):_e()}function Uu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function NT(t){return!!t&&"integerValue"in t}function lp(t){return!!t&&"arrayValue"in t}function K1(t){return!!t&&"nullValue"in t}function Q1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function My(t){return!!t&&"mapValue"in t}function dp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ha(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Y1(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function SG(t){return"nullValue"in t?Ry:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Uu(pa.empty(),ae.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:_e()}function RG(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Uu(pa.empty(),ae.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ga:_e()}function J1(t,e){const n=_a(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function X1(t,e){const n=_a(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!My(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dp(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=dp(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());My(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];My(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ha(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new sr(dp(this.value))}}function ek(t){const e=[];return ha(t.fields,(n,r)=>{const i=new Wt([n]);if(My(r)){const o=ek(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Jr(e)}class Zt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Zt(e,0,be.min(),be.min(),be.min(),sr.empty(),0)}static newFoundDocument(e,n,r,i){return new Zt(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new Zt(e,2,n,be.min(),be.min(),sr.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,be.min(),be.min(),sr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ya{constructor(e,n){this.position=e,this.inclusive=n}}function tk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ae.comparator(ae.fromName(s.referenceValue),n.key):_a(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function nk(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bo(t.position[n],e.position[n]))return!1;return!0}class hp{constructor(e,n="asc"){this.field=e,this.dir=n}}function PG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class rk{}class ot extends rk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new MG(e,n,r):"array-contains"===n?new OG(e,r):"in"===n?new ck(e,r):"not-in"===n?new kG(e,r):"array-contains-any"===n?new FG(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new xG(e,r):new NG(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(_a(n,this.value)):null!==n&&ma(this.value)===ma(n)&&this.matchesComparison(_a(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dt extends rk{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Dt(e,n)}matches(e){return Xl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Xl(t){return"and"===t.op}function OT(t){return"or"===t.op}function kT(t){return ik(t)&&Xl(t)}function ik(t){for(const e of t.filters)if(e instanceof Dt)return!1;return!0}function FT(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+Jl(t.value);if(kT(t))return t.filters.map(e=>FT(e)).join(",");{const e=t.filters.map(n=>FT(n)).join(",");return`${t.op}(${e})`}}function ok(t,e){return t instanceof ot?(r=t,(i=e)instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&Bo(r.value,i.value)):t instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&ok(s,i.filters[a]),!0)}(t,e):void _e();var r,i}function sk(t,e){const n=t.filters.concat(e);return Dt.create(n,t.op)}function ak(t){return t instanceof ot?`${(n=t).field.canonicalString()} ${n.op} ${Jl(n.value)}`:t instanceof Dt?function(n){return n.op.toString()+" {"+n.getFilters().map(ak).join(" ,")+"}"}(t):"Filter";var n}class MG extends ot{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class xG extends ot{constructor(e,n){super(e,"in",n),this.keys=uk(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class NG extends ot{constructor(e,n){super(e,"not-in",n),this.keys=uk(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uk(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class OG extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lp(n)&&cp(n.arrayValue,this.value)}}class ck extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&cp(this.value.arrayValue,n)}}class kG extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!cp(this.value.arrayValue,n)}}class FG extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cp(this.value.arrayValue,r))}}class LG{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function LT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new LG(t,e,n,r,i,o,s)}function Bu(t){const e=oe(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>FT(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),sp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jl(r)).join(",")),e.ce=n}return e.ce}function fp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ok(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nk(t.startAt,e.startAt)&&nk(t.endAt,e.endAt)}function xy(t){return ae.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Ny(t,e){return t.filters.filter(n=>n instanceof ot&&n.field.isEqual(e))}function lk(t,e,n){let r=Ry,i=!0;for(const o of Ny(t,e)){let s=Ry,a=!0;switch(o.op){case"<":case"<=":s=SG(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Ry}J1({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];J1({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function dk(t,e,n){let r=ga,i=!0;for(const o of Ny(t,e)){let s=ga,a=!0;switch(o.op){case">=":case">":s=RG(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ga}X1({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];X1({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class vs{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function hk(t,e,n,r,i,o,s,a){return new vs(t,e,n,r,i,o,s,a)}function ed(t){return new vs(t)}function fk(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function VT(t){return null!==t.collectionGroup}function td(t){const e=oe(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new St(Wt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new hp(o,r))}),n.has(Wt.keyField().canonicalString())||e.le.push(new hp(Wt.keyField(),r))}return e.le}function Vr(t){const e=oe(t);return e.he||(e.he=function pk(t,e){if("F"===t.limitType)return LT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new hp(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new ya(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ya(t.startAt.position,t.startAt.inclusive):null;return LT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,td(t))),e.he}function UT(t,e){const n=t.filters.concat([e]);return new vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Oy(t,e,n){return new vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pp(t,e){return fp(Vr(t),Vr(e))&&t.limitType===e.limitType}function gk(t){return`${Bu(Vr(t))}|lt:${t.limitType}`}function nd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ak(i)).join(", ")}]`),sp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Jl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Jl(i)).join(",")),`Target(${r})`}(Vr(t))}; limitType=${t.limitType})`}function gp(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of td(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const d=tk(s,a,u);return s.inclusive?d<=0:d<0}(r.startAt,td(r),i)||r.endAt&&!function(s,a,u){const d=tk(s,a,u);return s.inclusive?d>=0:d>0}(r.endAt,td(r),i)));var r,i}function mk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _k(t){return(e,n)=>{let r=!1;for(const i of td(t)){const o=VG(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function VG(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),d=a.data.field(o);return null!==u&&null!==d?_a(u,d):_e()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e()}}class Is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return q1(this.inner)}size(){return this.innerSize}}const UG=new Ut(ae.comparator);function Xr(){return UG}const yk=new Ut(ae.comparator);function mp(...t){let e=yk;for(const n of t)e=e.insert(n.key,n);return e}function vk(t){let e=yk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function jo(){return _p()}function Ik(){return _p()}function _p(){return new Is(t=>t.toString(),(t,e)=>t.isEqual(e))}const BG=new Ut(ae.comparator),jG=new St(ae.comparator);function Ze(...t){let e=jG;for(const n of t)e=e.add(n);return e}const $G=new St(Ve);function BT(){return $G}function Ek(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ap(e)?"-0":e}}function wk(t){return{integerValue:""+t}}function Tk(t,e){return L1(e)?wk(e):Ek(t,e)}class ky{constructor(){this._=void 0}}function HG(t,e,n){return t instanceof rd?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&by(o)&&(o=Sy(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ju?Dk(t,e):t instanceof $u?Ak(t,e):function(i,o){const s=Ck(i,o),a=bk(s)+bk(i.Ie);return NT(s)&&NT(i.Ie)?wk(a):Ek(i.serializer,a)}(t,e)}function zG(t,e,n){return t instanceof ju?Dk(t,e):t instanceof $u?Ak(t,e):n}function Ck(t,e){return t instanceof id?NT(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class rd extends ky{}class ju extends ky{constructor(e){super(),this.elements=e}}function Dk(t,e){const n=Sk(e);for(const r of t.elements)n.some(i=>Bo(i,r))||n.push(r);return{arrayValue:{values:n}}}class $u extends ky{constructor(e){super(),this.elements=e}}function Ak(t,e){let n=Sk(e);for(const r of t.elements)n=n.filter(i=>!Bo(i,r));return{arrayValue:{values:n}}}class id extends ky{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function bk(t){return cn(t.integerValue||t.doubleValue)}function Sk(t){return lp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class yp{constructor(e,n){this.field=e,this.transform=n}}class GG{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fy(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ly{}function Rk(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new sd(t.key,nn.none()):new od(t.key,t.data,nn.none());{const n=t.data,r=sr.empty();let i=new St(Wt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Es(t.key,r,new Jr(i.toArray()),nn.none())}}function WG(t,e,n){t instanceof od?function(i,o,s){const a=i.value.clone(),u=xk(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Es?function(i,o,s){if(!Fy(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=xk(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Mk(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function vp(t,e,n,r){return t instanceof od?function(o,s,a,u){if(!Fy(o.precondition,s))return a;const d=o.value.clone(),p=Nk(o.fieldTransforms,u,s);return d.setAll(p),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Es?function(o,s,a,u){if(!Fy(o.precondition,s))return a;const d=Nk(o.fieldTransforms,u,s),p=s.data;return p.setAll(Mk(o)),p.setAll(d),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,Fy(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function ZG(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Ck(r.transform,i||null);null!=o&&(null===n&&(n=sr.empty()),n.set(r.field,o))}return n||null}function Pk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Zl(r,i,(o,s)=>function qG(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof ju&&i instanceof ju||r instanceof $u&&i instanceof $u?Zl(r.elements,i.elements,Bo):r instanceof id&&i instanceof id?Bo(r.Ie,i.Ie):r instanceof rd&&i instanceof rd);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class od extends Ly{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Es extends Ly{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Mk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xk(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,zG(s,a,n[i]))}return r}function Nk(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,HG(o,s,e))}return r}class sd extends Ly{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jT extends Ly{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $T{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&WG(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ik();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=Rk(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(n,r)=>Pk(n,r))&&Zl(this.baseMutations,e.baseMutations,(n,r)=>Pk(n,r))}}class HT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=BG;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new HT(e,n,r,i)}}class zT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class QG{constructor(e,n){this.count=e,this.unchangedNames=n}}var Dn,ht;function Ok(t){switch(t){default:return _e();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function kk(t){if(void 0===t)return gn("GRPC error has no .code"),k.UNKNOWN;switch(t){case Dn.OK:return k.OK;case Dn.CANCELLED:return k.CANCELLED;case Dn.UNKNOWN:return k.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return k.INTERNAL;case Dn.UNAVAILABLE:return k.UNAVAILABLE;case Dn.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Dn.NOT_FOUND:return k.NOT_FOUND;case Dn.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Dn.ABORTED:return k.ABORTED;case Dn.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Dn.DATA_LOSS:return k.DATA_LOSS;default:return _e()}}(ht=Dn||(Dn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";function Fk(){return new TextEncoder}const YG=new ql([4294967295,4294967295],0);function Lk(t){const e=Fk().encode(t),n=new z8;return n.update(e),new Uint8Array(n.digest())}function Vk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ql([n,r],0),new ql([i,o],0)]}class qT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ip(`Invalid padding: ${n}`);if(r<0)throw new Ip(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ip(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Ip(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ql.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ql.fromNumber(r)));return 1===i.compare(YG)&&(i=new ql([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Lk(e),[r,i]=Vk(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new qT(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=Lk(e),[r,i]=Vk(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ip extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ep{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,wp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ep(be.min(),i,new Ut(Ve),Xr(),Ze())}}class wp{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wp(r,n,Ze(),Ze(),Ze())}}class Uy{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class Uk{constructor(e,n){this.targetId=e,this.fe=n}}class Bk{constructor(e,n,r=jn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class jk{constructor(){this.ge=0,this.pe=Hk(),this.ye=jn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ze(),n=Ze(),r=Ze();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:_e()}}),new wp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Hk()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,De(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class JG{constructor(e){this.Le=e,this.ke=new Map,this.qe=Xr(),this.Qe=$k(),this.Ke=new Ut(Ve)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(xy(o))if(0===r){const s=new ae(o.path);this.We(n,s,Zt.newNoDocument(s,be.min()))}else De(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=ys(r).toUint8Array()}catch(u){if(u instanceof W1)return Yr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new qT(s,i,o)}catch(u){return Yr(u instanceof Ip?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&xy(a.target)){const u=new ae(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,Zt.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Ze();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new Ep(e,n,this.Ke,this.qe,r);return this.qe=Xr(),this.Qe=$k(),this.Ke=new Ut(Ve),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new jk,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new St(Ve),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||te("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new jk),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $k(){return new Ut(ae.comparator)}function Hk(){return new Ut(ae.comparator)}const XG={asc:"ASCENDING",desc:"DESCENDING"},eW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tW={and:"AND",or:"OR"};class nW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function GT(t,e){return t.useProto3Json||sp(e)?e:{value:e}}function ad(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rW(t,e){return ad(t,e.toTimestamp())}function mn(t){return De(!!t),be.fromTimestamp(function(n){const r=fa(n);return new tn(r.seconds,r.nanos)}(t))}function WT(t,e){return(r=t,new dt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function qk(t){const e=dt.fromString(t);return De(eF(e)),e}function Tp(t,e){return WT(t.databaseId,e.path)}function $o(t,e){const n=qk(e);if(n.get(1)!==t.databaseId.projectId)throw new X(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(Wk(n))}function ZT(t,e){return WT(t.databaseId,e)}function Gk(t){const e=qk(t);return 4===e.length?dt.emptyPath():Wk(e)}function Cp(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Wk(t){return De(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Zk(t,e,n){return{name:Tp(t,e),fields:n.value.mapValue.fields}}function Kk(t,e,n){const r=$o(t,e.name),i=mn(e.updateTime),o=e.createTime?mn(e.createTime):be.min(),s=new sr({mapValue:{fields:e.fields}}),a=Zt.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Dp(t,e){let n;if(e instanceof od)n={update:Zk(t,e.key,e.value)};else if(e instanceof sd)n={delete:Tp(t,e.key)};else if(e instanceof Es)n={update:Zk(t,e.key,e.data),updateMask:dW(e.fieldMask)};else{if(!(e instanceof jT))return _e();n={verify:Tp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof rd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ju)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $u)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof id)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw _e()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:rW(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:_e()),n;var o}function KT(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?nn.updateTime(mn(o.updateTime)):void 0!==o.exists?nn.exists(o.exists):nn.none():nn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(De("REQUEST_TIME"===a.setToServerValue),u=new rd):"appendMissingElements"in a?u=new ju(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new $u(a.removeAllFromArray.values||[]):"increment"in a?u=new id(s,a.increment):_e();const d=Wt.fromServerFormat(a.fieldPath);return new yp(d,u)}(t,i)):[];var o;if(e.update){const i=$o(t,e.update.name),o=new sr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Jr((e.updateMask.fieldPaths||[]).map(p=>Wt.fromServerFormat(p)));return new Es(i,o,s,n,r)}return new od(i,o,n,r)}if(e.delete){const i=$o(t,e.delete);return new sd(i,n)}if(e.verify){const i=$o(t,e.verify);return new jT(i,n)}return _e()}function Qk(t,e){return{documents:[ZT(t,e.path)]}}function QT(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ZT(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ZT(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return Xk(Dt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(0!==u.length)return u.map(d=>{return{field:va((g=d).field),direction:uW(g.dir)};var g})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const s=GT(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function Yk(t){let e=Gk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(1===r);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(g){const _=Jk(g);return _ instanceof Dt&&kT(_)?_.getFilters():[_]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(_=>{return new hp(ud((E=_).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,sp(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new ya((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new ya(g.values||[],!g.before)}(n.endAt)),hk(e,i,s,o,a,"F",u,d)}function Jk(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ud(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ud(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ud(n.unaryFilter.field);return ot.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ud(n.unaryFilter.field);return ot.create(s,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):void 0!==t.fieldFilter?ot.create(ud((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Dt.create(n.compositeFilter.filters.map(r=>Jk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(t):_e();var n}function uW(t){return XG[t]}function cW(t){return eW[t]}function lW(t){return tW[t]}function va(t){return{fieldPath:t.canonicalString()}}function ud(t){return Wt.fromServerFormat(t.fieldPath)}function Xk(t){return t instanceof ot?function(n){if("=="===n.op){if(Q1(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NAN"}};if(K1(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Q1(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NOT_NAN"}};if(K1(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(n.field),op:cW(n.op),value:n.value}}}(t):t instanceof Dt?function(n){const r=n.getFilters().map(i=>Xk(i));return 1===r.length?r[0]:{compositeFilter:{op:lW(n.op),filters:r}}}(t):_e()}function dW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class ws{constructor(e,n,r,i,o=be.min(),s=be.min(),a=jn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tF{constructor(e){this.ut=e}}function nF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:By(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Tp(o=t.ut,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:ad(o,s.version.toTimestamp()),createTime:ad(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Hu(e.version)};else{if(!e.isUnknownDocument())return _e();r.unknownDocument={path:n.path.toArray(),version:Hu(e.version)}}var o,s;return r}function By(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Hu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zu(t){const e=new tn(t.seconds,t.nanoseconds);return be.fromTimestamp(e)}function qu(t,e){const n=(e.baseMutations||[]).map(o=>KT(t.ut,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>KT(t.ut,o)),i=tn.fromMillis(e.localWriteTimeMs);return new $T(e.batchId,i,n,r)}function Ap(t){const e=zu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?zu(t.lastLimboFreeSnapshotVersion):be.min();let r;return r=void 0!==t.query.documents?(De(1===(o=t.query).documents.length),Vr(ed(Gk(o.documents[0])))):function(o){return Vr(Yk(o))}(t.query),new ws(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,jn.fromBase64String(t.resumeToken));var o}function rF(t,e){const n=Hu(e.snapshotVersion),r=Hu(e.lastLimboFreeSnapshotVersion);let i;i=xy(e.target)?Qk(t.ut,e.target):QT(t.ut,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bu(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function YT(t){const e=Yk({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Oy(e,e.limit,"L"):e}function JT(t,e){return new zT(e.largestBatchId,KT(t.ut,e.overlayMutation))}function iF(t,e){const n=e.path.lastSegment();return[t,Ir(e.path.popLast()),n]}function oF(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Hu(r.readTime),documentKey:Ir(r.documentKey.path),largestBatchId:r.largestBatchId}}class fW{getBundleMetadata(e,n){return sF(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:zu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return sF(e).put({bundleId:(i=n).id,createTime:Hu(mn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return aF(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:YT(o.bundledQuery),readTime:zu(o.readTime)};var o})}saveNamedQuery(e,n){return aF(e).put({name:(i=n).name,readTime:Hu(mn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function sF(t){return Kn(t,"bundles")}function aF(t){return Kn(t,"namedQueries")}class jy{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new jy(e,n.uid||"")}getOverlay(e,n){return bp(e).get(iF(this.userId,n)).next(r=>r?JT(this.serializer,r):null)}getOverlays(e,n){const r=jo();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new zT(n,s);i.push(this.lt(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(Ir(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(bp(e).H("collectionPathOverlayIndex",a))}),x.waitFor(o)}getOverlaysForCollection(e,n,r){const i=jo(),o=Ir(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return bp(e).W("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const d=JT(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=jo();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bp(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,p)=>{const g=JT(this.serializer,d);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):p.done()}).next(()=>o)}lt(e,n){return bp(e).put(function(i,o,s){const[a,u,d]=iF(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:d,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Dp(i.ut,s.mutation)}}(this.serializer,this.userId,n))}}function bp(t){return Kn(t,"documentOverlays")}class Gu{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(cn(e.integerValue));else if("doubleValue"in e){const r=cn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),ap(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(ys(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?Y1(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):_e()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),ae.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function pW(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function uF(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=pW(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}Gu.St=new Gu;class gW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=uF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=uF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class mW{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class _W{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Sp{constructor(){this.Wt=new gW,this.Gt=new mW(this.Wt),this.zt=new _W(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Wu{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wu(this.indexId,this.documentKey,this.arrayValue,r)}}function Ia(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=cF(t.arrayValue,e.arrayValue),0!==n?n:(n=cF(t.directionalValue,e.directionalValue),0!==n?n:ae.comparator(t.documentKey,e.documentKey)))}function cF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class lF{constructor(e){this.Jt=new St((n,r)=>Wt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(De(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=bT(e);if(void 0!==n&&!this.tn(n))return!1;const r=Fu(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.nn(a,u)||!this.rn(this.Yt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Yt.length||!this.rn(this.Yt[s++],r[o]))return!1;return!0}sn(){if(this.Xt)return null;let e=new St(Wt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Lu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Lu(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Lu(r.field,"asc"===r.dir?0:1)));return new Kl(Kl.UNKNOWN_ID,this.collectionId,n,Ql.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function dF(t){var e,n;if(De(t instanceof ot||t instanceof Dt),t instanceof ot){if(t instanceof ck){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>ot.create(t.field,"==",o)))||[];return Dt.create(i,"or")}return t}const r=t.filters.map(i=>dF(i));return Dt.create(r,t.op)}function yW(t){if(0===t.getFilters().length)return[];const e=tC(dF(t));return De(hF(e)),XT(e)||eC(e)?[e]:e.getFilters()}function XT(t){return t instanceof ot}function eC(t){return t instanceof Dt&&kT(t)}function hF(t){return XT(t)||eC(t)||function(n){if(n instanceof Dt&&OT(n)){for(const r of n.getFilters())if(!XT(r)&&!eC(r))return!1;return!0}return!1}(t)}function tC(t){if(De(t instanceof ot||t instanceof Dt),t instanceof ot)return t;if(1===t.filters.length)return tC(t.filters[0]);const e=t.filters.map(r=>tC(r));let n=Dt.create(e,t.op);return n=$y(n),hF(n)?n:(De(n instanceof Dt),De(Xl(n)),De(n.filters.length>1),n.filters.reduce((r,i)=>nC(r,i)))}function nC(t,e){let n;return De(t instanceof ot||t instanceof Dt),De(e instanceof ot||e instanceof Dt),n=t instanceof ot?e instanceof ot?Dt.create([t,e],"and"):fF(t,e):e instanceof ot?fF(e,t):function(i,o){if(De(i.filters.length>0&&o.filters.length>0),Xl(i)&&Xl(o))return sk(i,o.getFilters());const s=OT(i)?i:o,a=OT(i)?o:i,u=s.filters.map(d=>nC(d,a));return Dt.create(u,"or")}(t,e),$y(n)}function fF(t,e){if(Xl(e))return sk(e,t.getFilters());{const n=e.filters.map(r=>nC(t,r));return Dt.create(n,"or")}}function $y(t){if(De(t instanceof ot||t instanceof Dt),t instanceof ot)return t;const e=t.getFilters();if(1===e.length)return $y(e[0]);if(ik(t))return t;const n=e.map(i=>$y(i)),r=[];return n.forEach(i=>{i instanceof ot?r.push(i):i instanceof Dt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Dt.create(r,t.op)}class vW{constructor(){this.on=new rC}addToCollectionParentIndex(e,n){return this.on.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(fi.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(fi.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}}class rC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new St(dt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new St(dt.comparator)).toArray()}}const Hy=new Uint8Array(0);class IW{constructor(e,n){this.user=e,this.databaseId=n,this._n=new rC,this.an=new Is(r=>Bu(r),(r,i)=>fp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const o={collectionId:r,parent:Ir(i)};return pF(e).put(o)}return x.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[M1(n),""],!1,!0);return pF(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Uo(s.parent))}return r})}addFieldIndex(e,n){const r=Rp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=ld(e);return o.next(a=>{s.put(oF(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=Rp(e),i=ld(e),o=cd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Rp(e),r=cd(e),i=ld(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return x.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new lF(r).sn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=cd(e);let i=!0;const o=new Map;return x.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ze();const a=[];return x.forEach(o,(u,d)=>{var j;te("IndexedDbIndexManager",`Using index ${j=u,`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`} to execute ${Bu(n)}`);const p=function(j,ne){const ue=bT(ne);if(void 0===ue)return null;for(const Ue of Ny(j,ue.fieldPath))switch(Ue.op){case"array-contains-any":return Ue.value.arrayValue.values||[];case"array-contains":return[Ue.value]}return null}(d,u),g=function(j,ne){const ue=new Map;for(const Ue of Fu(ne))for(const vt of Ny(j,Ue.fieldPath))switch(vt.op){case"==":case"in":ue.set(Ue.fieldPath.canonicalString(),vt.value);break;case"not-in":case"!=":return ue.set(Ue.fieldPath.canonicalString(),vt.value),Array.from(ue.values())}return null}(d,u),_=function(j,ne){const ue=[];let Ue=!0;for(const vt of Fu(ne)){const $n=0===vt.kind?lk(j,vt.fieldPath,j.startAt):dk(j,vt.fieldPath,j.startAt);ue.push($n.value),Ue&&(Ue=$n.inclusive)}return new ya(ue,Ue)}(d,u),v=function(j,ne){const ue=[];let Ue=!0;for(const vt of Fu(ne)){const $n=0===vt.kind?dk(j,vt.fieldPath,j.endAt):lk(j,vt.fieldPath,j.endAt);ue.push($n.value),Ue&&(Ue=$n.inclusive)}return new ya(ue,Ue)}(d,u),E=this.ln(u,d,_),C=this.ln(u,d,v),S=this.hn(u,d,g),N=this.Pn(u.indexId,p,E,_.inclusive,C,v.inclusive,S);return x.forEach(N,R=>r.j(R,n.limit).next(j=>{j.forEach(ne=>{const ue=ae.fromSegments(ne.documentKey);s.has(ue)||(s=s.add(ue),a.push(ue))})}))}).next(()=>a)}return x.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:yW(Dt.create(e.filters,"and")).map(r=>LT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){const u=(null!=n?n.length:1)*Math.max(r.length,o.length),d=u/(null!=n?n.length:1),p=[];for(let g=0;g<u;++g){const _=n?this.In(n[g/d]):Hy,v=this.Tn(e,_,r[g%d],i),E=this.En(e,_,o[g%d],s),C=a.map(S=>this.Tn(e,_,S,!0));p.push(...this.createRange(v,E,C))}return p}Tn(e,n,r,i){const o=new Wu(e,ae.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){const o=new Wu(e,ae.empty(),n,r);return i?o.Ht():o}cn(e,n){const r=new lF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.un(n);return x.forEach(i,o=>this.cn(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let d=new St(Wt.comparator),p=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?p=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Sp;for(const i of Fu(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.jt(i.kind);Gu.St.ht(o,s)}return r.Ut()}In(e){const n=new Sp;return Gu.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Sp;return Gu.St.ht(Uu(this.databaseId,n),r.jt(function(o){const s=Fu(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Sp);let o=0;for(const s of Fu(e)){const a=r[o++];for(const u of i)if(this.Rn(n,s.fieldPath)&&lp(a))i=this.Vn(i,s,a);else{const d=u.jt(s.kind);Gu.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new Sp;u.seed(a.Ut()),Gu.St.ht(s,u.jt(n.kind)),o.push(u)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof ot&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Rp(e),i=ld(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return x.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(p,g){const _=g?new Ql(g.sequenceNumber,new fi(zu(g.readTime),new ae(Uo(g.documentKey)),g.largestBatchId)):Ql.empty(),v=p.fields.map(([E,C])=>new Lu(Wt.fromServerFormat(E),C));return new Kl(p.indexId,p.collectionGroup,v,_)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Ve(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Rp(e),o=ld(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,u=>o.put(oF(u.indexId,this.user,s,r)))))}updateIndexEntries(e,n){const r=new Map;return x.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?x.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,u=>this.gn(e,i,u).next(d=>{const p=this.pn(o,u);return d.isEqual(p)?x.resolve():this.yn(e,o,u,d,p)}))))})}wn(e,n,r,i){return cd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return cd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=cd(e);let o=new St(Ia);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new Wu(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new St(Ia);const i=this.dn(n,e);if(null==i)return r;const o=bT(n);if(null!=o){const s=e.data.field(o.fieldPath);if(lp(s))for(const a of s.arrayValue.values||[])r=r.add(new Wu(n.indexId,e.key,this.In(a),i))}else r=r.add(new Wu(n.indexId,e.key,Hy,i));return r}yn(e,n,r,i,o){te("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(u,d,p,g,_){const v=u.getIterator(),E=d.getIterator();let C=Yl(v),S=Yl(E);for(;C||S;){let N=!1,R=!1;if(C&&S){const j=p(C,S);j<0?R=!0:j>0&&(N=!0)}else null!=C?R=!0:N=!0;N?(g(S),S=Yl(E)):R?(_(C),C=Yl(v)):(C=Yl(v),S=Yl(E))}}(i,o,Ia,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),x.waitFor(s)}fn(e){let n=1;return ld(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Ia(s,a)).filter((s,a,u)=>!a||0!==Ia(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=Ia(s,e),u=Ia(s,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(s),i.push(s.Ht());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Hy,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Hy,[]]))}return o}bn(e,n){return Ia(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(gF)}getMinOffset(e,n){return x.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||_e())).next(gF)}}function pF(t){return Kn(t,"collectionParents")}function cd(t){return Kn(t,"indexEntries")}function Rp(t){return Kn(t,"indexConfiguration")}function ld(t){return Kn(t,"indexState")}function gF(t){De(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;ST(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fi(e.readTime,e.documentKey,n)}const mF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Er{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Er(e,Er.DEFAULT_COLLECTION_PERCENTILE,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _F(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},(p,g,_)=>(a++,_.delete()));o.push(u.next(()=>{De(1===a)}));const d=[];for(const p of n.mutations){const g=B1(e,p.key.path,n.batchId);o.push(i.delete(g)),d.push(p.key)}return x.waitFor(o).next(()=>d)}function zy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _e();e=t.noDocument}return JSON.stringify(e).length}Er.DEFAULT_COLLECTION_PERCENTILE=10,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Er.DEFAULT=new Er(41943040,Er.DEFAULT_COLLECTION_PERCENTILE,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Er.DISABLED=new Er(-1,0,0);class qy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){De(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new qy(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ea(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=dd(e),s=Ea(e);return s.add({}).next(a=>{De("number"==typeof a);const u=new $T(a,n,r,i),d=function(v,E,C){const S=C.baseMutations.map(R=>Dp(v.ut,R)),N=C.mutations.map(R=>Dp(v.ut,R));return{userId:E,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:S,mutations:N}}(this.serializer,this.userId,u),p=[];let g=new St((_,v)=>Ve(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=B1(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),p.push(s.put(d)),p.push(o.put(v,uG))}return g.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),x.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return Ea(e).get(n).next(r=>r?(De(r.userId===this.userId),qu(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?x.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ea(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(De(a.batchId>=r),o=qu(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ea(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ea(e).W("userMutationsIndex",n).next(r=>r.map(i=>qu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Dy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return dd(e).Y({range:i},(s,a,u)=>{const[d,p,g]=s,_=Uo(p);if(d===this.userId&&n.path.isEqual(_))return Ea(e).get(g).next(v=>{if(!v)throw _e();De(v.userId===this.userId),o.push(qu(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ve);const i=[];return n.forEach(o=>{const s=Dy(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=dd(e).Y({range:a},(d,p,g)=>{const[_,v,E]=d,C=Uo(v);_===this.userId&&o.path.isEqual(C)?r=r.add(E):g.done()});i.push(u)}),x.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=Dy(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new St(Ve);return dd(e).Y({range:s},(u,d,p)=>{const[g,_,v]=u,E=Uo(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(v)):p.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(Ea(e).get(o).next(s=>{if(null===s)throw _e();De(s.userId===this.userId),r.push(qu(this.serializer,s))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return _F(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return dd(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=Uo(o[1]);i.push(u)}else a.done()}).next(()=>{De(0===i.length)})})}containsKey(e,n){return yF(e,this.userId,n)}Mn(e){return vF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yF(t,e,n){const r=Dy(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return dd(t).Y({range:o,J:!0},(a,u,d)=>{const[p,g,_]=a;p===e&&g===i&&(s=!0),d.done()}).next(()=>s)}function Ea(t){return Kn(t,"mutations")}function dd(t){return Kn(t,"documentMutations")}function vF(t){return Kn(t,"mutationQueues")}class Zu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Zu(0)}static Nn(){return new Zu(-1)}}class EW{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Zu(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>be.fromTimestamp(new tn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>hd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(De(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return hd(e).Y((s,a)=>{const u=Ap(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>x.waitFor(o)).next(()=>i)}forEachTarget(e,n){return hd(e).Y((r,i)=>{const o=Ap(i);n(o)})}Bn(e){return IF(e).get("targetGlobalKey").next(n=>(De(null!==n),n))}Ln(e,n){return IF(e).put("targetGlobalKey",n)}kn(e,n){return hd(e).put(rF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Bu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return hd(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const d=Ap(a);fp(n,d.target)&&(o=d,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=wa(e);return n.forEach(s=>{const a=Ir(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),x.waitFor(i)}removeMatchingKeys(e,n,r){const i=wa(e);return x.forEach(n,o=>{const s=Ir(o.path);return x.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=wa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=wa(e);let o=Ze();return i.Y({range:r,J:!0},(s,a,u)=>{const d=Uo(s[1]),p=new ae(d);o=o.add(p)}).next(()=>o)}containsKey(e,n){const r=Ir(n.path),i=IDBKeyRange.bound([r],[M1(r)],!1,!0);let o=0;return wa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,d)=>{0!==s&&(o++,d.done())}).next(()=>o>0)}_t(e,n){return hd(e).get(n).next(r=>r?Ap(r):null)}}function hd(t){return Kn(t,"targets")}function IF(t){return Kn(t,"targetGlobal")}function wa(t){return Kn(t,"targetDocuments")}function EF([t,e],[n,r]){const i=Ve(t,n);return 0===i?Ve(e,r):i}class wW{constructor(e){this.Qn=e,this.buffer=new St(EF),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();EF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Z.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){da(r)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield la(r)}yield n.Gn(3e5)}))}}class TW{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return x.resolve(pi._e);const r=new wW(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(mF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mF):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Wl()<=ko.in.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-p}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-p}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}class CW{constructor(e,n){this.db=e,this.garbageCollector=function TF(t,e){return new TW(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Gy(e,r)}removeReference(e,n,r){return Gy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Gy(e,n)}Xn(e,n){return function(i,o){let s=!1;return vF(i).Z(a=>yF(i,a,o).next(u=>(u&&(s=!0),x.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Zn(e,(s,a)=>{if(a<=n){const u=this.Xn(e,s).next(d=>{if(!d)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,be.min()),wa(e).delete([0,Ir(s.path)])))});i.push(u)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Gy(e,n)}Zn(e,n){const r=wa(e);let i,o=pi._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:d})=>{0===s?(o!==pi._e&&n(new ae(Uo(i)),o),o=d,i=u):o=pi._e}).next(()=>{o!==pi._e&&n(new ae(Uo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gy(t,e){return wa(t).put((i=t.currentSequenceNumber,{targetId:0,path:Ir(e.path),sequenceNumber:i}));var i}class CF{constructor(){this.changes=new Is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ku(e).put(r)}removeEntry(e,n,r){return Ku(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],By(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Zt.newInvalidDocument(n);return Ku(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pp(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:Zt.newInvalidDocument(n)};return Ku(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pp(n))},(i,o)=>{r={document:this.tr(n,o),size:zy(o)}}).next(()=>r)}getEntries(e,n){let r=Xr();return this.rr(e,n,(i,o)=>{const s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=Xr(),i=new Ut(ae.comparator);return this.rr(e,n,(o,s)=>{const a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,zy(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return x.resolve();let i=new St(SF);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(Pp(i.first()),Pp(i.last())),s=i.getIterator();let a=s.getNext();return Ku(e).Y({index:"documentKeyIndex",range:o},(u,d,p)=>{const g=ae.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&SF(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,d),a=s.hasNext()?s.getNext():null),a?p.U(Pp(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),By(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ku(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{o?.incrementDocumentReadCount(d.length);let p=Xr();for(const g of d){const _=this.tr(ae.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(gp(n,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,r,i){let o=Xr();const s=bF(n,r),a=bF(n,fi.max());return Ku(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,d,p)=>{const g=this.tr(ae.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(g.key,g),o.size===i&&p.done()}).next(()=>o)}newChangeBuffer(e){return new AW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return AF(e).get("remoteDocumentGlobalKey").next(n=>(De(!!n),n))}er(e,n){return AF(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function hW(t,e){let n;if(e.document)n=Kk(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ae.fromSegments(e.noDocument.path),i=zu(e.noDocument.readTime);n=Zt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e();{const r=ae.fromSegments(e.unknownDocument.path),i=zu(e.unknownDocument.version);n=Zt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new tn(i[0],i[1]);return be.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(be.min()))return r}return Zt.newInvalidDocument(e)}}function DF(t){return new DW(t)}class AW extends CF{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Is(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new St((o,s)=>Ve(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=nF(this._r.serializer,s);i=i.add(o.path.popLast());const d=zy(u);r+=d-a.size,n.push(this._r.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=nF(this._r.serializer,s.convertToNoDocument(be.min()));n.push(this._r.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function AF(t){return Kn(t,"remoteDocumentGlobal")}function Ku(t){return Kn(t,"remoteDocumentsV14")}function Pp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bF(t,e){const n=e.documentKey.path.toArray();return[t,By(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function SF(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ve(n[o],r[o]),i)return i;return i=Ve(n.length,r.length),i||(i=Ve(n[n.length-2],r[r.length-2]),i||Ve(n[n.length-1],r[r.length-1]))}class bW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class RF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&vp(r.mutation,i,Jr.empty(),tn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const i=jo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=mp();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=jo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Xr();const s=_p(),a=_p();return n.forEach((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(void 0===p||p.mutation instanceof Es)?o=o.insert(d.key,d):void 0!==p?(s.set(d.key,p.mutation.getFieldMask()),vp(p.mutation,d,p.mutation.getFieldMask(),tn.now())):s.set(d.key,Jr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,p)=>s.set(d,p)),n.forEach((d,p)=>{var g;return a.set(d,new bW(p,null!==(g=s.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_p();let i=new Ut((s,a)=>s-a),o=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let p=r.get(u)||Jr.empty();p=a.applyToLocalView(d,p),r.set(u,p);const g=(i.get(a.batchId)||Ze()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,p=u.value,g=Ik();p.forEach(_=>{if(!o.has(_)){const v=Rk(n.get(_),r.get(_));null!==v&&g.set(_,v),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ae.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):VT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(jo());let a=-1,u=o;return s.next(d=>x.forEach(d,(p,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(p)?x.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{u=u.insert(p,_)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,Ze())).next(p=>({batchId:a,changes:vk(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=mp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=mp();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{const d=(g=n,_=u.child(o),new vs(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,_)=>{s=s.insert(g,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,d)=>{const p=d.getKey();null===s.get(p)&&(s=s.insert(p,Zt.newInvalidDocument(p)))});let a=mp();return s.forEach((u,d)=>{const p=o.get(u);void 0!==p&&vp(p.mutation,d,Jr.empty(),tn.now()),gp(n,d)&&(a=a.insert(u,d))}),a})}}class SW{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return x.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:mn(i.createTime)}),x.resolve();var i}getNamedQuery(e,n){return x.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:YT(i.bundledQuery),readTime:mn(i.readTime)}),x.resolve();var i}}class RW{constructor(){this.overlays=new Ut(ae.comparator),this.lr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jo();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){const i=jo(),o=n.length+1,s=new ae(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ut((d,p)=>d-p);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=o.get(d.largestBatchId);null===p&&(p=jo(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const a=jo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>a.set(d,p)),!(a.size()>=i)););return x.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new zT(n,r));let o=this.lr.get(n);void 0===o&&(o=Ze(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}}class iC{constructor(){this.hr=new St(Qn.Pr),this.Ir=new St(Qn.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new Qn(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Qn(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new ae(new dt([])),r=new Qn(n,e),i=new Qn(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new ae(new dt([])),r=new Qn(n,e),i=new Qn(n,e+1);let o=Ze();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Qn(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Qn{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return ae.comparator(e.key,n.key)||Ve(e.gr,n.gr)}static Tr(e,n){return Ve(e.gr,n.gr)||ae.comparator(e.key,n.key)}}class PW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new St(Qn.Pr)}checkEmpty(e){return x.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.pr;this.pr++;const s=new $T(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.yr=this.yr.add(new Qn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qn(n,0),i=new Qn(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{const a=this.wr(s.gr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ve);return n.forEach(i=>{const o=new Qn(i,0),s=new Qn(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),x.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ae.isDocumentKey(o)||(o=o.child(""));const s=new Qn(new ae(o),0);let a=new St(Ve);return this.yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.gr)),!0)},s),x.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){De(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return x.forEach(n.mutations,i=>{const o=new Qn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new Qn(n,0),i=this.yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return x.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class MW{constructor(e){this.Cr=e,this.docs=new Ut(ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=Xr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Zt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Xr();const s=n.path,a=new ae(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||ST(N1(p),r)<=0||(i.has(p.key)||gp(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){_e()}vr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xW(this)}getSize(e){return x.resolve(this.size)}}class xW extends CF{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class NW{constructor(e){this.persistence=e,this.Fr=new Is(n=>Bu(n),fp),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Mr=0,this.Or=new iC,this.targetCount=0,this.Nr=Zu.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),x.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Zu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.kn(n),x.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),x.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Or.containsKey(n))}}class oC{constructor(e,n){this.Br={},this.overlays={},this.Lr=new pi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new NW(this),this.indexManager=new vW,this.remoteDocumentCache=new MW(r=>this.referenceDelegate.Qr(r)),this.serializer=new tF(n),this.Kr=new SW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new PW(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new OW(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class OW extends k1{constructor(e){super(),this.currentSequenceNumber=e}}class Wy{constructor(e){this.persistence=e,this.Gr=new iC,this.zr=null}static jr(e){return new Wy(e)}get Hr(){if(this.zr)return this.zr;throw _e()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Hr,r=>{const i=ae.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,be.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return x.or([()=>x.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class kW{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Cy("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U1,{unique:!0}),u.createObjectStore("documentMutations"),PF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=x.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),PF(e)),s=s.next(()=>function(u){const d=u.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,d){return d.store("mutations").W().next(p=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U1,{unique:!0});const g=d.store("mutations"),_=p.map(v=>g.put(v));return x.waitFor(_)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:IG});d.createIndex("collectionPathOverlayIndex",EG,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",wG,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:cG});d.createIndex("documentKeyIndex",lG),d.createIndex("collectionGroupIndex",dG)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:mG}).createIndex("sequenceNumberIndex",_G,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:yG}).createIndex("documentKeyIndex",vG,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=zy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>x.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>x.forEach(a,u=>{De(u.userId===o.userId);const d=qu(this.serializer,u);return _F(e,o.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const u=new dt(s),d=[0,Ir(u)];o.push(n.get(d).next(p=>p?x.resolve():n.put({targetId:0,path:Ir(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>x.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:gG});const r=n.store("collectionParents"),i=new rC,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Ir(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const u=new dt(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],d)=>{const p=Uo(a);return o(p.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const o=Ap(i),s=rF(this.serializer,o);return n.put(s)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),u=(g=s,g.document?new ae(dt.fromString(g.document.name).popFirst(5)):g.noDocument?ae.fromSegments(g.noDocument.path):g.unknownDocument?ae.fromSegments(g.unknownDocument.path):_e()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>x.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=DF(this.serializer),o=new oC(Wy.jr,this.serializer.ut);return r.W().next(s=>{const a=new Map;return s.forEach(u=>{var d;let p=null!==(d=a.get(u.userId))&&void 0!==d?d:Ze();qu(this.serializer,u).keys().forEach(g=>p=p.add(g)),a.set(u.userId,p)}),x.forEach(a,(u,d)=>{const p=new Zn(d),g=jy.ct(this.serializer,p),_=o.getIndexManager(p),v=qy.ct(p,this.serializer,_,o.referenceDelegate);return new RF(i,v,g,_).recalculateAndSaveOverlaysForDocumentKeys(new MT(n,pi._e),u).next()})})}}function PF(t){t.createObjectStore("targetDocuments",{keyPath:fG}).createIndex("documentTargetsIndex",pG,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hG,{unique:!0}),t.createObjectStore("targetGlobal")}const sC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aC{constructor(e,n,r,i,o,s,a,u,d,p,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=d,this._i=p,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!aC.D())throw new X(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CW(this,i),this.Ii=n+"main",this.serializer=new tF(u),this.Ti=new oo(this.Ii,this.ai,new kW(this.serializer)),this.qr=new EW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DF(this.serializer),this.Kr=new fW,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===p&&gn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(k.FAILED_PRECONDITION,sC);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new pi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,Z.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Z.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ky(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(da(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Mp(e).get("owner").next(n=>x.resolve(this.wi(n)))}Si(e){return Ky(e).delete(this.clientId)}bi(){var e=this;return(0,Z.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Kn(r,"clientMetadata");return i.W().next(o=>{const s=e.Ci(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return x.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?x.resolve(!0):Mp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new X(k.FAILED_PRECONDITION,sC);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ky(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&te("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Z.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new MT(n,pi._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Ky(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return qy.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IW(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return jy.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){te("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(u=this.ai)?CG:14===u?H1:13===u?$1:12===u?TG:11===u?j1:void _e();var u;let s;return this.Ti.runTransaction(e,i,o,a=>(s=new MT(a,this.Lr?this.Lr.next():pi._e),"readwrite-primary"===n?this.fi(s).next(u=>!!u||this.gi(s)).next(u=>{if(!u)throw gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new X(k.FAILED_PRECONDITION,O1);return r(s)}).next(u=>this.yi(s).next(()=>u)):this.Li(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return Mp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new X(k.FAILED_PRECONDITION,sC)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mp(e).put("owner",n)}static D(){return oo.D()}pi(e){const n=Mp(e);return n.get("owner").next(r=>this.wi(r)?(te("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(gn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,xt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return te("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){gn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mp(t){return Kn(t,"owner")}function Ky(t){return Kn(t,"clientMetadata")}function uC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class cC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ze(),i=Ze();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new cC(e,n.fromCache,r,i)}}class FW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class MF{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new FW;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Wl()<=ko.in.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",nd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),x.resolve()):(Wl()<=ko.in.DEBUG&&te("QueryEngine","Query:",nd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Wl()<=ko.in.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",nd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(n))):x.resolve())}zi(e,n){if(fk(n))return x.resolve(null);let r=Vr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Oy(n,null,"F"),r=Vr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ze(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Yi(n,a);return this.Zi(n,d,s,u.readTime)?this.zi(e,Oy(n,null,"F")):this.Xi(e,d,n,u)}))})))}ji(e,n,r,i){return fk(n)||i.isEqual(be.min())?x.resolve(null):this.Gi.getDocuments(e,r).next(o=>{const s=this.Yi(n,o);return this.Zi(n,s,r,i)?x.resolve(null):(Wl()<=ko.in.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nd(n)),this.Xi(e,s,n,x1(i,-1)).next(a=>a))})}Yi(e,n){let r=new St(_k(e));return n.forEach((i,o)=>{gp(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return Wl()<=ko.in.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",nd(n)),this.Gi.getDocumentsMatchingQuery(e,n,fi.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class LW{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Ut(Ve),this.ns=new Is(o=>Bu(o),fp),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RF(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function xF(t,e,n,r){return new LW(t,e,n,r)}function NF(t,e){return lC.apply(this,arguments)}function lC(){return lC=(0,Z.Z)(function*(t,e){const n=oe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=Ze();for(const d of i){s.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of o){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({_s:d,removedBatchIds:s,addedBatchIds:a}))})})}),lC.apply(this,arguments)}function OF(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function kF(t,e,n){let r=Ze(),i=Ze();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Xr();return n.forEach((a,u)=>{const d=o.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{us:s,cs:i}})}function BW(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fd(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new ws(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function pd(t,e,n){return dC.apply(this,arguments)}function dC(){return dC=(0,Z.Z)(function*(t,e,n){const r=oe(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!da(s))throw s;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),dC.apply(this,arguments)}function Qy(t,e,n){const r=oe(t);let i=be.min(),o=Ze();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,p){const g=oe(u),_=g.ns.get(p);return void 0!==_?x.resolve(g.ts.get(_)):g.qr.getTargetData(d,p)}(r,s,Vr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:be.min(),n?o:Ze())).next(a=>(VF(r,mk(e),a),{documents:a,ls:o})))}function FF(t,e){const n=oe(t),r=oe(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function LF(t,e){const n=oe(t),r=n.rs.get(e)||be.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,x1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(VF(n,e,i),i))}function VF(t,e,n){let r=t.rs.get(e)||be.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function hC(){return hC=(0,Z.Z)(function*(t,e,n,r){const i=oe(t);let o=Ze(),s=Xr();for(const d of n){const p=e.hs(d.metadata.name);d.document&&(o=o.add(p));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),s=s.insert(p,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield fd(i,(p=r,Vr(ed(dt.fromString(`__bundle__/docs/${p}`)))));var p;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>kF(d,a,s).next(p=>(a.apply(d),p)).next(p=>i.qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.qr.addMatchingKeys(d,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,p.us,p.cs)).next(()=>p.us)))}),hC.apply(this,arguments)}function $W(t,e){return fC.apply(this,arguments)}function fC(){return fC=(0,Z.Z)(function*(t,e,n=Ze()){const r=yield fd(t,Vr(YT(e.bundledQuery))),i=oe(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=mn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(o,e);const a=r.withResumeToken(jn.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(o,a).next(()=>i.qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(o,e))})}),fC.apply(this,arguments)}function UF(t,e){return`firestore_clients_${t}_${e}`}function BF(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function pC(t,e){return`firestore_targets_${t}_${e}`}class Yy{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new X(i.error.code,i.error.message))),s?new Yy(e,n,i.state,o):(gn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new X(r.error.code,r.error.message))),o?new xp(e,r.state,i):(gn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jy{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=BT();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=L1(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new Jy(e,o):(gn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class gC{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new gC(n.clientId,n.onlineState):(gn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mC{constructor(){this.activeTargetIds=BT()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _C{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ut(Ve),this.started=!1,this.ps=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=UF(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new mC),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Z.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const o=e.getItem(UF(e.persistenceKey,i));if(o){const s=Jy.Ts(i,o);s&&(e.gs=e.gs.insert(s.clientId,s))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(pC(this.persistenceKey,e));if(r){const i=xp.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pC(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return te("SharedClientState","READ",e,n),n}setItem(e,n){te("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){te("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(te("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Z.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(s){let a=pi._e;if(null!=s)try{const u=JSON.parse(s);De("number"==typeof u),a=u}catch(u){gn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==pi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Js(o)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new Yy(this.currentUser,e,n,r),o=BF(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){const n=BF(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=pC(this.persistenceKey,e),o=new xp(e,n,r);this.setItem(i,o.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return Jy.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return Yy.Ts(new Zn(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return xp.Ts(i,n)}Ms(e){return gC.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Z.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);te("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=BT();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class jF{constructor(){this.eo=new mC,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new mC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HW{ro(e){}shutdown(){}}class $F{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xy=null;function yC(){return null===Xy?Xy=268435456+Math.round(2147483648*Math.random()):Xy++,"0x"+Xy.toString(16)}const zW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qW{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const wr="WebChannelConnection";class GW extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){const a=yC(),u=this.So(n,r);te("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,o,s),this.Do(n,u,d,i).then(p=>(te("RestConnection",`Received RPC '${n}' ${a}: `,p),p),p=>{throw Yr("RestConnection",`RPC '${n}' ${a} failed with error: `,p,"url: ",u,"request:",i),p})}Co(n,r,i,o,s,a){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Gl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){return`${this.mo}/v1/${r}:${zW[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const o=yC();return new Promise((s,a)=>{const u=new H8;u.setWithCredentials(!0),u.listenOnce(j8.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case DT.NO_ERROR:const p=u.getResponseJson();te(wr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case DT.TIMEOUT:te(wr,`RPC '${e}' ${o} timed out`),a(new X(k.DEADLINE_EXCEEDED,"Request time out"));break;case DT.HTTP_ERROR:const g=u.getStatus();if(te(wr,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const E=function(S){const N=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(N)>=0?N:k.UNKNOWN}(v.status);a(new X(E,v.message))}else a(new X(k.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new X(k.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{te(wr,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);te(wr,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}vo(e,n,r){const i=yC(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=U8(),a=B8(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=o.join("");te(wr,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=s.createWebChannel(p,u);let _=!1,v=!1;const E=new qW({co:S=>{v?te(wr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(te(wr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),te(wr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},lo:()=>g.close()}),C=(S,N,R)=>{S.listen(N,j=>{try{R(j)}catch(ne){setTimeout(()=>{throw ne},0)}})};return C(g,Ty.EventType.OPEN,()=>{v||te(wr,`RPC '${e}' stream ${i} transport opened.`)}),C(g,Ty.EventType.CLOSE,()=>{v||(v=!0,te(wr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),C(g,Ty.EventType.ERROR,S=>{v||(v=!0,Yr(wr,`RPC '${e}' stream ${i} transport errored:`,S),E.Ro(new X(k.UNAVAILABLE,"The operation could not be completed")))}),C(g,Ty.EventType.MESSAGE,S=>{var N;if(!v){const R=S.data[0];De(!!R);const ne=R.error||(null===(N=R[0])||void 0===N?void 0:N.error);if(ne){te(wr,`RPC '${e}' stream ${i} received error:`,ne);const ue=ne.status;let Ue=function(Zp){const Ev=Dn[Zp];if(void 0!==Ev)return kk(Ev)}(ue),vt=ne.message;void 0===Ue&&(Ue=k.INTERNAL,vt="Unknown error status: "+ue+" with message "+ne.message),v=!0,E.Ro(new X(Ue,vt)),g.close()}else te(wr,`RPC '${e}' stream ${i} received:`,R),E.Vo(R)}}),C(a,$8.STAT_EVENT,S=>{S.stat===A1.PROXY?te(wr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===A1.NOPROXY&&te(wr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function HF(){return typeof window<"u"?window:null}function ev(){return typeof document<"u"?document:null}function Np(t){return new nW(t,!0)}class vC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class zF{constructor(e,n,r,i,o,s,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new vC(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Z.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Z.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,Z.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(gn(n.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===k.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new X(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Z.Z)(function*(){e.state=0,e.start()}))}o_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WW extends zF{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function oW(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:_e(),i=e.targetChange.targetIds||[],o=function(d,p){return d.useProto3Json?(De(void 0===p||"string"==typeof p),jn.fromBase64String(p||"")):(De(void 0===p||p instanceof Uint8Array),jn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){const p=void 0===d.code?k.UNKNOWN:kk(d.code);return new X(p,d.message||"")}(s);n=new Bk(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=$o(t,r.document.name),o=mn(r.document.updateTime),s=r.document.createTime?mn(r.document.createTime):be.min(),a=new sr({mapValue:{fields:r.document.fields}}),u=Zt.newFoundDocument(i,o,s,a);n=new Uy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=$o(t,r.document),o=r.readTime?mn(r.readTime):be.min(),s=Zt.newNoDocument(i,o);n=new Uy([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=$o(t,r.document);n=new Uy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return _e();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new QG(i,o);n=new Uk(r.targetId,s)}}var d;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return be.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?be.min():s.readTime?mn(s.readTime):be.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Cp(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=xy(u)?{documents:Qk(o,u)}:{query:QT(o,u)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=zk(o,s.resumeToken);const d=GT(o,s.expectedCount);null!==d&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(be.min())>0){a.readTime=ad(o,s.snapshotVersion.toTimestamp());const d=GT(o,s.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function aW(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Cp(this.serializer),n.removeTarget=e,this.e_(n)}}class ZW extends zF{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function sW(t,e){return t&&t.length>0?(De(void 0!==e),t.map(n=>function(i,o){let s=mn(i.updateTime?i.updateTime:o);return s.isEqual(be.min())&&(s=mn(o)),new GG(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.I_(r,n)}return De(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Cp(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Dp(this.serializer,r))};this.e_(n)}}class KW extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new X(k.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(k.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(k.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class YW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(gn(n),this.f_=!1):te("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class JW{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(a=>{r.enqueueAndForget((0,Z.Z)(function*(){var u;Ta(s)&&(te("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Z.Z)(function*(p){const g=oe(p);g.C_.add(4),yield gd(g),g.M_.set("Unknown"),g.C_.delete(4),yield Op(g)}),function d(p){return u.apply(this,arguments)})(s))}))}),this.M_=new YW(r,i)}}function Op(t){return EC.apply(this,arguments)}function EC(){return EC=(0,Z.Z)(function*(t){if(Ta(t))for(const e of t.v_)yield e(!0)}),EC.apply(this,arguments)}function gd(t){return wC.apply(this,arguments)}function wC(){return wC=(0,Z.Z)(function*(t){for(const e of t.v_)yield e(!1)}),wC.apply(this,arguments)}function tv(t,e){const n=oe(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),DC(n)?CC(n):_d(n).Ho()&&TC(n,e))}function kp(t,e){const n=oe(t),r=_d(n);n.D_.delete(e),r.Ho()&&qF(n,e),0===n.D_.size&&(r.Ho()?r.Zo():Ta(n)&&n.M_.set("Unknown"))}function TC(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_d(t).u_(e)}function qF(t,e){t.x_.Oe(e),_d(t).c_(e)}function CC(t){t.x_=new JG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),_d(t).start(),t.M_.g_()}function DC(t){return Ta(t)&&!_d(t).jo()&&t.D_.size>0}function Ta(t){return 0===oe(t).C_.size}function GF(t){t.x_=void 0}function XW(t){return AC.apply(this,arguments)}function AC(){return AC=(0,Z.Z)(function*(t){t.D_.forEach((e,n)=>{TC(t,e)})}),AC.apply(this,arguments)}function e7(t,e){return bC.apply(this,arguments)}function bC(){return bC=(0,Z.Z)(function*(t,e){GF(t),DC(t)?(t.M_.w_(e),CC(t)):t.M_.set("Unknown")}),bC.apply(this,arguments)}function t7(t,e,n){return SC.apply(this,arguments)}function SC(){return SC=(0,Z.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof Bk&&2===e.state&&e.cause)try{yield(r=(0,Z.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.D_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.D_.delete(u),o.x_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nv(t,r)}else if(e instanceof Uy?t.x_.$e(e):e instanceof Uk?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(be.min()))try{const r=yield OF(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=o.D_.get(d);p&&o.D_.set(d,p.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,d)=>{const p=o.D_.get(u);if(!p)return;o.D_.set(u,p.withResumeToken(jn.EMPTY_BYTE_STRING,p.snapshotVersion)),qF(o,u);const g=new ws(p.target,u,d,p.sequenceNumber);TC(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){te("RemoteStore","Failed to raise snapshot:",r),yield nv(t,r)}var r}),SC.apply(this,arguments)}function nv(t,e,n){return RC.apply(this,arguments)}function RC(){return RC=(0,Z.Z)(function*(t,e,n){if(!da(e))throw e;t.C_.add(1),yield gd(t),t.M_.set("Offline"),n||(n=()=>OF(t.localStore)),t.asyncQueue.enqueueRetryable((0,Z.Z)(function*(){te("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Op(t)}))}),RC.apply(this,arguments)}function WF(t,e){return e().catch(n=>nv(t,n,e))}function md(t){return PC.apply(this,arguments)}function PC(){return PC=(0,Z.Z)(function*(t){const e=oe(t),n=Ca(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;n7(e);)try{const i=yield BW(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,r7(e,i)}catch(i){yield nv(e,i)}ZF(e)&&KF(e)}),PC.apply(this,arguments)}function n7(t){return Ta(t)&&t.b_.length<10}function r7(t,e){t.b_.push(e);const n=Ca(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function ZF(t){return Ta(t)&&!Ca(t).jo()&&t.b_.length>0}function KF(t){Ca(t).start()}function i7(t){return MC.apply(this,arguments)}function MC(){return MC=(0,Z.Z)(function*(t){Ca(t).E_()}),MC.apply(this,arguments)}function o7(t){return xC.apply(this,arguments)}function xC(){return xC=(0,Z.Z)(function*(t){const e=Ca(t);for(const n of t.b_)e.P_(n.mutations)}),xC.apply(this,arguments)}function s7(t,e,n){return NC.apply(this,arguments)}function NC(){return NC=(0,Z.Z)(function*(t,e,n){const r=t.b_.shift(),i=HT.from(r,e,n);yield WF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield md(t)}),NC.apply(this,arguments)}function a7(t,e){return OC.apply(this,arguments)}function OC(){return OC=(0,Z.Z)(function*(t,e){var n;e&&Ca(t).h_&&(yield(n=(0,Z.Z)(function*(i,o){if(Ok(a=o.code)&&a!==k.ABORTED){const s=i.b_.shift();Ca(i).Yo(),yield WF(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield md(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),ZF(t)&&KF(t)}),OC.apply(this,arguments)}function QF(t,e){return kC.apply(this,arguments)}function kC(){return kC=(0,Z.Z)(function*(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=Ta(n);n.C_.add(3),yield gd(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Op(n)}),kC.apply(this,arguments)}function FC(t,e){return LC.apply(this,arguments)}function LC(){return LC=(0,Z.Z)(function*(t,e){const n=oe(t);e?(n.C_.delete(2),yield Op(n)):e||(n.C_.add(2),yield gd(n),n.M_.set("Unknown"))}),LC.apply(this,arguments)}function _d(t){return t.O_||(t.O_=function(n,r,i){const o=oe(n);return o.A_(),new WW(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:XW.bind(null,t),Io:e7.bind(null,t),a_:t7.bind(null,t)}),t.v_.push(function(){var e=(0,Z.Z)(function*(n){n?(t.O_.Yo(),DC(t)?CC(t):t.M_.set("Unknown")):(yield t.O_.stop(),GF(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function Ca(t){return t.N_||(t.N_=function(n,r,i){const o=oe(n);return o.A_(),new ZW(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:i7.bind(null,t),Io:a7.bind(null,t),T_:o7.bind(null,t),I_:s7.bind(null,t)}),t.v_.push(function(){var e=(0,Z.Z)(function*(n){n?(t.N_.Yo(),yield md(t)):(yield t.N_.stop(),t.b_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class VC{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new VC(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new X(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yd(t,e){if(gn("AsyncQueue",`${e}: ${t}`),da(t))return new X(k.UNAVAILABLE,`${e}: ${t}`);throw t}class vd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=mp(),this.sortedSet=new Ut(this.comparator)}static emptySet(e){return new vd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new vd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class YF{constructor(){this.B_=new Ut(ae.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):_e():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Id{constructor(e,n,r,i,o,s,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Id(e,n,vd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class u7{constructor(){this.k_=void 0,this.listeners=[]}}class c7{constructor(){this.queries=new Is(e=>gk(e),pp),this.onlineState="Unknown",this.q_=new Set}}function UC(t,e){return BC.apply(this,arguments)}function BC(){return BC=(0,Z.Z)(function*(t,e){const n=oe(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new u7),i)try{o.k_=yield n.onListen(r)}catch(s){const a=yd(s,`Initialization of query '${nd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&HC(n)}),BC.apply(this,arguments)}function jC(t,e){return $C.apply(this,arguments)}function $C(){return $C=(0,Z.Z)(function*(t,e){const n=oe(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),$C.apply(this,arguments)}function l7(t,e){const n=oe(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.listeners)a.K_(i)&&(r=!0);s.k_=i}}r&&HC(n)}function d7(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(e)}function HC(t){t.q_.forEach(e=>{e.next()})}class zC{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Id(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class h7{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class JF{constructor(e){this.serializer=e}hs(e){return $o(this.serializer,e)}Ps(e){return e.metadata.exists?Kk(this.serializer,e.document,!1):Zt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return mn(e)}}class f7{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XF(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=dt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new JF(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.hs(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||Ze()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,Z.Z)(function*(){const n=yield function jW(t,e,n,r){return hC.apply(this,arguments)}(e.localStore,new JF(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield $W(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function XF(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class eL{constructor(e){this.key=e}}class tL{constructor(e){this.key=e}}class nL{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ze(),this.mutatedKeys=Ze(),this._a=_k(e),this.aa=new vd(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new YF,i=n?n.aa:this.aa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const _=i.get(p),v=gp(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;_&&v?_.data.isEqual(v.data)?E!==C&&(r.track({type:3,doc:v}),S=!0):this.ha(_,v)||(r.track({type:2,doc:v}),S=!0,(u&&this._a(v,u)>0||d&&this._a(v,d)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),S=!0):_&&!v&&(r.track({type:1,doc:_}),S=!0,(u||d)&&(a=!0)),S&&(v?(s=s.add(v),o=C?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const p="F"===this.query.limitType?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{aa:s,la:r,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((p,g)=>function(v,E){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return C(v)-C(E)}(p.type,g.type)||this._a(p.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,d=u!==this.sa;return this.sa=u,0!==s.length||d?{snapshot:new Id(this.query,e.aa,o,s,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new YF,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ze(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new tL(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new eL(r))}),n}da(e){this.ia=e.ls,this.oa=Ze();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Id.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class p7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class g7{constructor(e){this.key=e,this.Ra=!1}}class m7{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Is(a=>gk(a),pp),this.fa=new Map,this.ga=new Set,this.pa=new Ut(ae.comparator),this.ya=new Map,this.wa=new iC,this.Sa={},this.ba=new Map,this.Da=Zu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function _7(t,e){return qC.apply(this,arguments)}function qC(){return qC=(0,Z.Z)(function*(t,e){const n=pD(t);let r,i;const o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const s=yield fd(n.localStore,Vr(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield GC(n,e,r,"current"===a,s.resumeToken),n.isPrimaryClient&&tv(n.remoteStore,s)}return i}),qC.apply(this,arguments)}function GC(t,e,n,r,i){return WC.apply(this,arguments)}function WC(){return WC=(0,Z.Z)(function*(t,e,n,r,i){t.va=(g,_,v)=>{return(E=(0,Z.Z)(function*(S,N,R,j){let ne=N.view.ca(R);ne.Zi&&(ne=yield Qy(S.localStore,N.query,!1).then(({documents:$n})=>N.view.ca($n,ne)));const ue=j&&j.targetChanges.get(N.targetId),Ue=j&&null!=j.targetMismatches.get(N.targetId),vt=N.view.applyChanges(ne,S.isPrimaryClient,ue,Ue);return rD(S,N.targetId,vt.Ta),vt.snapshot}),function C(S,N,R,j){return E.apply(this,arguments)})(t,g,_,v);var E};const o=yield Qy(t.localStore,e,!0),s=new nL(e,o.ls),a=s.ca(o.documents),u=wp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=s.applyChanges(a,t.isPrimaryClient,u);rD(t,n,d.Ta);const p=new p7(e,n,s);return t.ma.set(e,p),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),WC.apply(this,arguments)}function y7(t,e){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,Z.Z)(function*(t,e){const n=oe(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!pp(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield pd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),kp(n.remoteStore,r.targetId),Ed(n,r.targetId)}).catch(la))):(Ed(n,r.targetId),yield pd(n.localStore,r.targetId,!0))}),ZC.apply(this,arguments)}function KC(){return KC=(0,Z.Z)(function*(t,e,n){const r=gD(t);try{const i=yield function(s,a){const u=oe(s),d=tn.now(),p=a.reduce((v,E)=>v.add(E.key),Ze());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let E=Xr(),C=Ze();return u.ss.getEntries(v,p).next(S=>{E=S,E.forEach((N,R)=>{R.isValidDocument()||(C=C.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,E)).next(S=>{g=S;const N=[];for(const R of a){const j=ZG(R,g.get(R.key).overlayedDocument);null!=j&&N.push(new Es(R.key,j,ek(j.value.mapValue),nn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,N,a)}).next(S=>{_=S;const N=S.applyToLocalDocumentSet(g,C);return u.documentOverlayCache.saveOverlays(v,S.batchId,N)})}).then(()=>({batchId:_.batchId,changes:vk(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let d=s.Sa[s.currentUser.toKey()];d||(d=new Ut(Ve)),d=d.insert(a,u),s.Sa[s.currentUser.toKey()]=d}(r,i.batchId,n),yield Ts(r,i.changes),yield md(r.remoteStore)}catch(i){const o=yd(i,"Failed to persist write");n.reject(o)}}),KC.apply(this,arguments)}function rL(t,e){return QC.apply(this,arguments)}function QC(){return QC=(0,Z.Z)(function*(t,e){const n=oe(t);try{const r=yield function UW(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((p,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(o,p.removedDocuments,g).next(()=>n.qr.addMatchingKeys(o,p.addedDocuments,g)));let v=_.withSequenceNumber(o.currentSequenceNumber);var C,S,N;null!==e.targetMismatches.get(g)?v=v.withResumeToken(jn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,r)),i=i.insert(g,v),S=v,N=p,(0===(C=_).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(o,v))});let u=Xr(),d=Ze();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),a.push(kF(o,s,e.documentUpdates).next(p=>{u=p.us,d=p.cs})),!r.isEqual(be.min())){const p=n.qr.getLastRemoteSnapshotVersion(o).next(g=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(p)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.ts=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.ya.get(o);s&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?De(s.Ra):i.removedDocuments.size>0&&(De(s.Ra),s.Ra=!1))}),yield Ts(n,r,e)}catch(r){yield la(r)}}),QC.apply(this,arguments)}function iL(t,e,n){const r=oe(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=oe(s);u.onlineState=a;let d=!1;u.queries.forEach((p,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&HC(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function I7(t,e,n){return YC.apply(this,arguments)}function YC(){return YC=(0,Z.Z)(function*(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),o=i&&i.key;if(o){let s=new Ut(ae.comparator);s=s.insert(o,Zt.newNoDocument(o,be.min()));const a=Ze().add(o),u=new Ep(be.min(),new Map,new Ut(Ve),s,a);yield rL(r,u),r.pa=r.pa.remove(o),r.ya.delete(e),iD(r)}else yield pd(r.localStore,e,!1).then(()=>Ed(r,e,n)).catch(la)}),YC.apply(this,arguments)}function E7(t,e){return JC.apply(this,arguments)}function JC(){return JC=(0,Z.Z)(function*(t,e){const n=oe(t),r=e.batch.batchId;try{const i=yield function VW(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,d,p){const g=d.batch,_=g.keys();let v=x.resolve();return _.forEach(E=>{v=v.next(()=>p.getEntry(u,E)).next(C=>{const S=d.docVersions.get(E);De(null!==S),C.version.compareTo(S)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),p.addEntry(C)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ze();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);nD(n,r,null),tD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ts(n,i)}catch(i){yield la(i)}}),JC.apply(this,arguments)}function w7(t,e,n){return XC.apply(this,arguments)}function XC(){return XC=(0,Z.Z)(function*(t,e,n){const r=oe(t);try{const i=yield function(s,a){const u=oe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(De(null!==g),p=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);nD(r,e,n),tD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ts(r,i)}catch(i){yield la(i)}}),XC.apply(this,arguments)}function eD(){return eD=(0,Z.Z)(function*(t,e){const n=oe(t);Ta(n.remoteStore)||te("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=oe(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=yd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),eD.apply(this,arguments)}function tD(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function nD(t,e,n){const r=oe(t);let i=r.Sa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Ed(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||oL(t,r)})}function oL(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(kp(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),iD(t))}function rD(t,e,n){for(const r of n)r instanceof eL?(t.wa.addReference(r.key,e),C7(t,r)):r instanceof tL?(te("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||oL(t,r.key)):_e()}function C7(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(te("SyncEngine","New document in limbo: "+n),t.ga.add(r),iD(t))}function iD(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new ae(dt.fromString(e)),r=t.Da.next();t.ya.set(r,new g7(n)),t.pa=t.pa.insert(n,r),tv(t.remoteStore,new ws(Vr(ed(n.path)),r,"TargetPurposeLimboResolution",pi._e))}}function Ts(t,e,n){return oD.apply(this,arguments)}function oD(){return oD=(0,Z.Z)(function*(t,e,n){const r=oe(t),i=[],o=[],s=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{s.push(r.va(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const p=cC.Qi(u.targetId,d);o.push(p)}}))}),yield Promise.all(s),r.Va.a_(i),yield(a=(0,Z.Z)(function*(d,p){const g=oe(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>x.forEach(p,v=>x.forEach(v.ki,E=>g.persistence.referenceDelegate.addReference(_,v.targetId,E)).next(()=>x.forEach(v.qi,E=>g.persistence.referenceDelegate.removeReference(_,v.targetId,E)))))}catch(_){if(!da(_))throw _;te("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of p){const v=_.targetId;if(!_.fromCache){const E=g.ts.get(v),S=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(v,S)}}}),function u(d,p){return a.apply(this,arguments)})(r.localStore,o))}),oD.apply(this,arguments)}function D7(t,e){return sD.apply(this,arguments)}function sD(){return sD=(0,Z.Z)(function*(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=yield NF(n.localStore,e);n.currentUser=e,(o=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new X(k.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ts(n,r._s)}var o}),sD.apply(this,arguments)}function A7(t,e){const n=oe(t),r=n.ya.get(e);if(r&&r.Ra)return Ze().add(r.key);{let i=Ze();const o=n.fa.get(e);if(!o)return i;for(const s of o){const a=n.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function b7(t,e){return aD.apply(this,arguments)}function aD(){return aD=(0,Z.Z)(function*(t,e){const n=oe(t),r=yield Qy(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&rD(n,e.targetId,i.Ta),i}),aD.apply(this,arguments)}function S7(t,e){return uD.apply(this,arguments)}function uD(){return uD=(0,Z.Z)(function*(t,e){const n=oe(t);return LF(n.localStore,e).then(r=>Ts(n,r))}),uD.apply(this,arguments)}function R7(t,e,n,r){return cD.apply(this,arguments)}function cD(){return cD=(0,Z.Z)(function*(t,e,n,r){const i=oe(t),o=yield function(a,u){const d=oe(a),p=oe(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.Cn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):x.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===n?yield md(i.remoteStore):"acknowledged"===n||"rejected"===n?(nD(i,e,r||null),tD(i,e),u=e,oe(oe(i.localStore).mutationQueue).Fn(u)):_e(),yield Ts(i,o)):te("SyncEngine","Cannot apply mutation batch with id: "+e)}),cD.apply(this,arguments)}function lD(){return lD=(0,Z.Z)(function*(t,e){const n=oe(t);if(pD(n),gD(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield sL(n,r.toArray());n.Ca=!0,yield FC(n.remoteStore,!0);for(const o of i)tv(n.remoteStore,o)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ed(n,s),pd(n.localStore,s,!0))),kp(n.remoteStore,s)}),yield i,yield sL(n,r),function(s){const a=oe(s);a.ya.forEach((u,d)=>{kp(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new Ut(ae.comparator)}(n),n.Ca=!1,yield FC(n.remoteStore,!1)}}),lD.apply(this,arguments)}function sL(t,e,n){return dD.apply(this,arguments)}function dD(){return dD=(0,Z.Z)(function*(t,e,n){const r=oe(t),i=[],o=[];for(const s of e){let a;const u=r.fa.get(s);if(u&&0!==u.length){a=yield fd(r.localStore,Vr(u[0]));for(const d of u){const p=r.ma.get(d),g=yield b7(r,p);g.snapshot&&o.push(g.snapshot)}}else{const d=yield FF(r.localStore,s);a=yield fd(r.localStore,d),yield GC(r,aL(d),s,!1,a.resumeToken)}i.push(a)}return r.Va.a_(o),i}),dD.apply(this,arguments)}function aL(t){return hk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function M7(t){return n=oe(t).localStore,oe(oe(n).persistence).Bi();var n}function x7(t,e,n,r){return hD.apply(this,arguments)}function hD(){return hD=(0,Z.Z)(function*(t,e,n,r){const i=oe(t);if(i.Ca)return void te("SyncEngine","Ignoring unexpected query state notification.");const o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield LF(i.localStore,mk(o[0])),a=Ep.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,jn.EMPTY_BYTE_STRING);yield Ts(i,s,a);break}case"rejected":yield pd(i.localStore,e,!0),Ed(i,e,r);break;default:_e()}}),hD.apply(this,arguments)}function N7(t,e,n){return fD.apply(this,arguments)}function fD(){return fD=(0,Z.Z)(function*(t,e,n){const r=pD(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){te("SyncEngine","Adding an already active target "+i);continue}const o=yield FF(r.localStore,i),s=yield fd(r.localStore,o);yield GC(r,aL(o),s.targetId,!1,s.resumeToken),tv(r.remoteStore,s)}for(const i of n)r.fa.has(i)&&(yield pd(r.localStore,i,!1).then(()=>{kp(r.remoteStore,i),Ed(r,i)}).catch(la))}}),fD.apply(this,arguments)}function pD(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I7.bind(null,e),e.Va.a_=l7.bind(null,e.eventManager),e.Va.Fa=d7.bind(null,e.eventManager),e}function gD(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w7.bind(null,e),e}class Fp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Z.Z)(function*(){n.serializer=Np(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return xF(this.persistence,new MF,e.initialUser,this.serializer)}createPersistence(e){return new oC(Wy.jr,this.serializer)}createSharedClientState(e){return new jF}terminate(){var e=this;return(0,Z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class mD extends Fp{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,Z.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield gD(r.xa.syncEngine),yield md(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return xF(this.persistence,new MF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new wF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new sG(n,this.persistence);return new oG(e.asyncQueue,r)}createPersistence(e){const n=uC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Er.withCacheSize(this.cacheSizeBytes):Er.DEFAULT;return new aC(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,HF(),ev(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new jF}}class uL extends mD{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,Z.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof _C&&(r.sharedClientState.syncEngine={Ys:R7.bind(null,i),Zs:x7.bind(null,i),Xs:N7.bind(null,i),Bi:M7.bind(null,i),Js:S7.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var o=(0,Z.Z)(function*(s){yield function P7(t,e){return lD.apply(this,arguments)}(r.xa.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=HF();if(!_C.D(n))throw new X(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=uC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _C(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class wd{initialize(e,n){var r=this;return(0,Z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>iL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=D7.bind(null,r.syncEngine),yield FC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new c7}createDatastore(e){const n=Np(e.databaseInfo.databaseId),r=new GW(e.databaseInfo);return new KW(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>iL(this.syncEngine,n,0),a=$F.D()?new $F:new HW,new JW(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,u,d,p){const g=new m7(i,o,s,a,u,d);return p&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Z.Z)(function*(r){const i=oe(r);te("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield gd(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function cL(t,e=10240){let n=0;return{read:()=>(0,Z.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,Z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class rv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class F7{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Bn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Z.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Z.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Z.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const o=yield e.Ka(i);return new h7(JSON.parse(o),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Z.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,Z.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Z.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class L7{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Z.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new X(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Z.Z)(function*(s,a){const u=oe(s),d=Cp(u.serializer)+"/documents",p={documents:a.map(E=>Tp(u.serializer,E))},g=yield u.Co("BatchGetDocuments",d,p,a.length),_=new Map;g.forEach(E=>{const C=function iW(t,e){return"found"in e?function(r,i){De(!!i.found);const o=$o(r,i.found.name),s=mn(i.found.updateTime),a=i.found.createTime?mn(i.found.createTime):be.min(),u=new sr({mapValue:{fields:i.found.fields}});return Zt.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){De(!!i.missing),De(!!i.readTime);const o=$o(r,i.missing),s=mn(i.readTime);return Zt.newNoDocument(o,s)}(t,e):_e()}(u.serializer,E);_.set(C.key.toString(),C)});const v=[];return a.forEach(E=>{const C=_.get(E.toString());De(!!C),v.push(C)}),v}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=ae.fromPath(i);e.mutations.push(new jT(o,e.precondition(o)))}),yield(r=(0,Z.Z)(function*(o,s){const a=oe(o),u=Cp(a.serializer)+"/documents",d={writes:s.map(p=>Dp(a.serializer,p))};yield a.wo("Commit",u,d)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw _e();n=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new X(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(be.min())?nn.exists(!1):nn.updateTime(n):nn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(be.min()))throw new X(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nn.updateTime(n)}return nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class V7{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new vC(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Z.Z)(function*(){const n=new L7(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.ja(o)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!sp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Ok(n)}return!1}}class U7{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zn.UNAUTHENTICATED,this.clientId=P1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,Z.Z)(function*(a){te("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(te("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return(0,Z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=yd(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function iv(t,e){return _D.apply(this,arguments)}function _D(){return _D=(0,Z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,Z.Z)(function*(o){r.isEqual(o)||(yield NF(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),_D.apply(this,arguments)}function yD(t,e){return vD.apply(this,arguments)}function vD(){return vD=(0,Z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield ID(t);te("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>QF(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>QF(e.remoteStore,o)),t._onlineComponents=e}),vD.apply(this,arguments)}function lL(t){return"FirebaseError"===t.name?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function ID(t){return ED.apply(this,arguments)}function ED(){return ED=(0,Z.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{yield iv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!lL(n))throw n;Yr("Error using user provided cache. Falling back to memory cache: "+n),yield iv(t,new Fp)}}else te("FirestoreClient","Using default OfflineComponentProvider"),yield iv(t,new Fp);return t._offlineComponents}),ED.apply(this,arguments)}function ov(t){return wD.apply(this,arguments)}function wD(){return wD=(0,Z.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),yield yD(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),yield yD(t,new wd))),t._onlineComponents}),wD.apply(this,arguments)}function dL(t){return ID(t).then(e=>e.persistence)}function Td(t){return ID(t).then(e=>e.localStore)}function hL(t){return ov(t).then(e=>e.remoteStore)}function TD(t){return ov(t).then(e=>e.syncEngine)}function Cd(t){return CD.apply(this,arguments)}function CD(){return CD=(0,Z.Z)(function*(t){const e=yield ov(t),n=e.eventManager;return n.onListen=_7.bind(null,e.syncEngine),n.onUnlisten=y7.bind(null,e.syncEngine),n}),CD.apply(this,arguments)}function pL(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(o,s,a,u,d){const p=new rv({next:_=>{s.enqueueAndForget(()=>jC(o,g));const v=_.docs.has(a);!v&&_.fromCache?d.reject(new X(k.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&u&&"server"===u.source?d.reject(new X(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new zC(ed(a.path),p,{includeMetadataChanges:!0,J_:!0});return UC(o,g)}(yield Cd(t),t.asyncQueue,e,n,r)})),r.promise}function gL(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(o,s,a,u,d){const p=new rv({next:_=>{s.enqueueAndForget(()=>jC(o,g)),_.fromCache&&"server"===u.source?d.reject(new X(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new zC(a,p,{includeMetadataChanges:!0,J_:!0});return UC(o,g)}(yield Cd(t),t.asyncQueue,e,n,r)})),r.promise}function mL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const _L=new Map;function DD(t,e,n){if(!n)throw new X(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yL(t,e,n,r){if(!0===e&&!0===r)throw new X(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vL(t){if(!ae.isDocumentKey(t))throw new X(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function IL(t){if(ae.isDocumentKey(t))throw new X(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":_e()}function it(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sv(t);throw new X(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function EL(t,e){if(e<=0)throw new X(k.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class wL{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new X(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new X(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=mL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new X(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new X(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new X(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new X(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new W8;switch(r.type){case"firstParty":return new Y8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_L.get(n);r&&(te("ComponentProvider","Removing Datastore"),_L.delete(n),r.terminate())}(this),Promise.resolve()}}class ar{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ar(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class Ho extends ar{constructor(e,n,r){super(e,n,ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ae(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function CL(t,e,...n){if(t=(0,xt.m9)(t),DD("collection","path",e),t instanceof Lp){const r=dt.fromString(e,...n);return IL(r),new Ho(t,null,r)}{if(!(t instanceof Kt||t instanceof Ho))throw new X(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return IL(r),new Ho(t.firestore,null,r)}}function av(t,e,...n){if(t=(0,xt.m9)(t),1===arguments.length&&(e=P1.newId()),DD("doc","path",e),t instanceof Lp){const r=dt.fromString(e,...n);return vL(r),new Kt(t,null,new ae(r))}{if(!(t instanceof Kt||t instanceof Ho))throw new X(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return vL(r),new Kt(t.firestore,t instanceof Ho?t.converter:null,new ae(r))}}function DL(t,e){return t=(0,xt.m9)(t),e=(0,xt.m9)(e),(t instanceof Kt||t instanceof Ho)&&(e instanceof Kt||e instanceof Ho)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function AD(t,e){return t=(0,xt.m9)(t),e=(0,xt.m9)(e),t instanceof ar&&e instanceof ar&&t.firestore===e.firestore&&pp(t._query,e._query)&&t.converter===e.converter}class Y7{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new vC(this,"async_queue_retry"),this.iu=()=>{const n=ev();n&&te("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=ev();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=ev();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Bn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Z.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!da(n))throw n;te("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,gn("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=VC.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&_e()}verifyOperationInProgress(){}uu(){var e=this;return(0,Z.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function bD(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class J7{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bt extends Lp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Y7,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AL(this),this._firestoreClient.terminate()}}function ln(t){return t._firestoreClient||AL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function AL(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new bG(t._databaseId,u,t._persistenceKey,(p=i).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,mL(p.experimentalLongPollingOptions),p.useFetchStreams));var u,p;t._firestoreClient=new U7(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function bL(t,e,n){const r=new Bn;return t.asyncQueue.enqueue((0,Z.Z)(function*(){try{yield iv(t,n),yield yD(t,e),r.resolve()}catch(i){const o=i;if(!lL(o))throw o;Yr("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function SL(t){if(t._initialized||t._terminated)throw new X(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(jn.fromBase64String(e))}catch(n){throw new X(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zo(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cs{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new X(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qu{constructor(e){this._methodName=e}}class uv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}const cZ=/^__.*__$/;class lZ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Es(e,this.data,this.fieldMask,n,this.fieldTransforms):new od(e,this.data,n,this.fieldTransforms)}}class RL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class cv{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return hv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(PL(this.Iu)&&cZ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class dZ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Np(e)}pu(e,n,r,i=!1){return new cv({Iu:e,methodName:n,gu:r,path:Wt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yu(t){const e=t._freezeSettings(),n=Np(t._databaseId);return new dZ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lv(t,e,n,r,i,o={}){const s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);MD("Data must be an object, but it was:",s,r);const a=NL(r,s);let u,d;if(o.merge)u=new Jr(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const p=[];for(const g of o.mergeFields){const _=Bp(e,g,n);if(!s.contains(_))throw new X(k.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);kL(p,_)||p.push(_)}u=new Jr(p),d=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=s.fieldTransforms;return new lZ(new sr(a),u,d)}class Up extends Qu{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Up}}function ML(t,e,n){return new cv({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class SD extends Qu{_toFieldTransform(e){return new yp(e.path,new rd)}isEqual(e){return e instanceof SD}}class hZ extends Qu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=ML(this,e,!0),r=this.yu.map(o=>Ju(o,n)),i=new ju(r);return new yp(e.path,i)}isEqual(e){return this===e}}class fZ extends Qu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=ML(this,e,!0),r=this.yu.map(o=>Ju(o,n)),i=new $u(r);return new yp(e.path,i)}isEqual(e){return this===e}}class pZ extends Qu{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new id(e.serializer,Tk(e.serializer,this.wu));return new yp(e.path,n)}isEqual(e){return this===e}}function RD(t,e,n,r){const i=t.pu(1,e,n);MD("Data must be an object, but it was:",i,r);const o=[],s=sr.empty();ha(r,(u,d)=>{const p=dv(e,u,n);d=(0,xt.m9)(d);const g=i.Ru(p);if(d instanceof Up)o.push(p);else{const _=Ju(d,g);null!=_&&(o.push(p),s.set(p,_))}});const a=new Jr(o);return new RL(s,a,i.fieldTransforms)}function PD(t,e,n,r,i,o){const s=t.pu(1,e,n),a=[Bp(e,r,n)],u=[i];if(o.length%2!=0)throw new X(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(Bp(e,o[_])),u.push(o[_+1]);const d=[],p=sr.empty();for(let _=a.length-1;_>=0;--_)if(!kL(d,a[_])){const v=a[_];let E=u[_];E=(0,xt.m9)(E);const C=s.Ru(v);if(E instanceof Up)d.push(v);else{const S=Ju(E,C);null!=S&&(d.push(v),p.set(v,S))}}const g=new Jr(d);return new RL(p,g,s.fieldTransforms)}function xL(t,e,n,r=!1){return Ju(n,t.pu(r?4:3,e))}function Ju(t,e){if(OL(t=(0,xt.m9)(t)))return MD("Unsupported field value:",e,t),NL(t,e);if(t instanceof Qu)return function(r,i){if(!PL(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=Ju(a,i.Vu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,xt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Tk(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=tn.fromDate(r);return{timestampValue:ad(i.serializer,o)}}if(r instanceof tn){const o=new tn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ad(i.serializer,o)}}if(r instanceof uv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zo)return{bytesValue:zk(i.serializer,r._byteString)};if(r instanceof Kt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:WT(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${sv(r)}`)}(t,e)}function NL(t,e){const n={};return q1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(t,(r,i)=>{const o=Ju(i,e.Eu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function OL(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof tn||t instanceof uv||t instanceof zo||t instanceof Kt||t instanceof Qu)}function MD(t,e,n){if(!OL(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=sv(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Bp(t,e,n){if((e=(0,xt.m9)(e))instanceof Cs)return e._internalPath;if("string"==typeof e)return dv(t,e);throw hv("Field path arguments must be of type string or ",t,!1,void 0,n)}const gZ=new RegExp("[~\\*/\\[\\]]");function dv(t,e,n){if(e.search(gZ)>=0)throw hv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cs(...e.split("."))._internalPath}catch{throw hv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hv(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new X(k.INVALID_ARGUMENT,a+t+u)}function kL(t,e){return t.some(n=>n.isEqual(e))}class jp{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class mZ extends jp{data(){return super.data()}}function fv(t,e){return"string"==typeof e?dv(t,e):e instanceof Cs?e._internalPath:e._delegate._internalPath}function FL(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new X(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xD{}class $p extends xD{}function Da(t,e,...n){let r=[];e instanceof xD&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Dd).length,a=o.filter(u=>u instanceof Hp).length;if(s>1||s>0&&a>0)throw new X(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Hp extends $p{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hp(e,n,r)}_apply(e){const n=this._parse(e);return BL(e._query,n),new ar(e.firestore,e.converter,UT(e._query,n))}_parse(e){const n=Yu(e.firestore);return function(o,s,a,u,d,p,g){let _;if(d.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new X(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){UL(g,p);const v=[];for(const E of g)v.push(VL(u,o,E));_={arrayValue:{values:v}}}else _=VL(u,o,g)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||UL(g,p),_=xL(a,"where",g,"in"===p||"not-in"===p);return ot.create(d,p,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Dd extends xD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Dt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)BL(s,u),s=UT(s,u)}(e._query,n),new ar(e.firestore,e.converter,UT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ND extends $p{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ND(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new X(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new X(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hp(o,s)}(e._query,this._field,this._direction);return new ar(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new vs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class pv extends $p{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new pv(e,n,r)}_apply(e){return new ar(e.firestore,e.converter,Oy(e._query,this._limit,this._limitType))}}class gv extends $p{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new gv(e,n,r)}_apply(e){const n=LL(e,this.type,this._docOrFields,this._inclusive);return new ar(e.firestore,e.converter,(o=n,new vs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class mv extends $p{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new mv(e,n,r)}_apply(e){const n=LL(e,this.type,this._docOrFields,this._inclusive);return new ar(e.firestore,e.converter,(o=n,new vs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function LL(t,e,n,r){if(n[0]=(0,xt.m9)(n[0]),n[0]instanceof jp)return function(o,s,a,u,d){if(!u)throw new X(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const p=[];for(const g of td(o))if(g.field.isKeyField())p.push(Uu(s,u.key));else{const _=u.data.field(g.field);if(by(_))throw new X(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=g.field.canonicalString();throw new X(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}p.push(_)}return new ya(p,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Yu(t.firestore);return function(s,a,u,d,p,g){const _=s.explicitOrderBy;if(p.length>_.length)throw new X(k.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let E=0;E<p.length;E++){const C=p[E];if(_[E].field.isKeyField()){if("string"!=typeof C)throw new X(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof C}`);if(!VT(s)&&-1!==C.indexOf("/"))throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${C}' contains a slash.`);const S=s.path.child(dt.fromString(C));if(!ae.isDocumentKey(S))throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const N=new ae(S);v.push(Uu(a,N))}else{const S=xL(u,d,C);v.push(S)}}return new ya(v,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function VL(t,e,n){if("string"==typeof(n=(0,xt.m9)(n))){if(""===n)throw new X(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VT(e)&&-1!==n.indexOf("/"))throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(dt.fromString(n));if(!ae.isDocumentKey(r))throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uu(t,new ae(r))}if(n instanceof Kt)return Uu(t,n._key);throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sv(n)}.`)}function UL(t,e){if(!Array.isArray(t)||0===t.length)throw new X(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BL(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new X(k.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class OD{convertValue(e,n="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ha(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new uv(cn(e.latitude),cn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sy(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(up(e));default:return null}}convertTimestamp(e){const n=fa(e);return new tn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dt.fromString(e);De(eF(r));const i=new pa(r.get(1),r.get(3)),o=new ae(r.popFirst(5));return i.isEqual(n)||gn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function _v(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class DZ extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}class Xu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ds extends jp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zp extends Ds{data(e={}){return super.data(e)}}class Aa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zp(this._firestore,this._userDataWriter,r.key,r,new Xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new zp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new zp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return 0!==a.type&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),p=s.indexOf(a.doc.key)),{type:bZ(a.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}function $L(t,e){return t instanceof Ds&&e instanceof Ds?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Aa&&e instanceof Aa&&t._firestore===e._firestore&&AD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class ba extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function HL(t,e,n){t=it(t,Kt);const r=it(t.firestore,Bt),i=_v(t.converter,e,n);return Ad(r,[lv(Yu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,nn.none())])}function zL(t,e,n,...r){t=it(t,Kt);const i=it(t.firestore,Bt),o=Yu(i);let s;return s="string"==typeof(e=(0,xt.m9)(e))||e instanceof Cs?PD(o,"updateDoc",t._key,e,n,r):RD(o,"updateDoc",t._key,e),Ad(i,[s.toMutation(t._key,nn.exists(!0))])}function qL(t,...e){var n,r,i;t=(0,xt.m9)(t);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||bD(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(bD(e[s])){const g=e[s];e[s]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[s+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[s+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,p;if(t instanceof Kt)d=it(t.firestore,Bt),p=ed(t._key.path),u={next:g=>{e[s]&&e[s](kD(d,t,g))},error:e[s+1],complete:e[s+2]};else{const g=it(t,ar);d=it(g.firestore,Bt),p=g._query;const _=new ba(d);u={next:v=>{e[s]&&e[s](new Aa(d,_,g,v))},error:e[s+1],complete:e[s+2]},FL(t._query)}return function(_,v,E,C){const S=new rv(C),N=new zC(v,S,E);return _.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return UC(yield Cd(_),N)})),()=>{S.Na(),_.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return jC(yield Cd(_),N)}))}}(ln(d),p,a,u)}function Ad(t,e){return function(r,i){const o=new Bn;return r.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function v7(t,e,n){return KC.apply(this,arguments)}(yield TD(r),i,o)})),o.promise}(ln(t),e)}function kD(t,e,n){const r=n.docs.get(e._key),i=new ba(t);return new Ds(t,i,e._key,r,new Xu(n.hasPendingWrites,n.fromCache),e.converter)}const qZ={maxAttempts:5};class GL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yu(e)}set(e,n,r){this._verifyNotCommitted();const i=Sa(e,this._firestore),o=_v(i.converter,n,r),s=lv(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,nn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Sa(e,this._firestore);let s;return s="string"==typeof(n=(0,xt.m9)(n))||n instanceof Cs?PD(this._dataReader,"WriteBatch.update",o._key,n,r,i):RD(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Sa(e,this._firestore);return this._mutations=this._mutations.concat(new sd(n._key,nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sa(t,e){if((t=(0,xt.m9)(t)).firestore!==e)throw new X(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class GZ extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Yu(n)}get(n){const r=Sa(n,this._firestore),i=new DZ(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return _e();const s=o[0];if(s.isFoundDocument())return new jp(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new jp(this._firestore,i,r._key,null,r.converter);throw _e()})}set(n,r,i){const o=Sa(n,this._firestore),s=_v(o.converter,r,i),a=lv(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=Sa(n,this._firestore);let a;return a="string"==typeof(r=(0,xt.m9)(r))||r instanceof Cs?PD(this._dataReader,"Transaction.update",s._key,r,i,o):RD(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=Sa(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Sa(e,this._firestore),r=new ba(this._firestore);return super.get(e).then(i=>new Ds(this._firestore,r,n._key,i._document,new Xu(!1,!1),n.converter))}}function LD(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new X("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function QL(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function YL(){if(!function DG(){return typeof atob<"u"}())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Gl=Fl.SDK_VERSION,(0,Fl._registerComponent)(new cO.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Bt(new K8(r.getProvider("auth-internal")),new J8(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(d.options.projectId,p)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Fl.registerVersion)(b1,"4.4.0",e),(0,Fl.registerVersion)(b1,"4.4.0","esm2017")}();class qp{constructor(e){this._delegate=e}static fromBase64String(e){return YL(),new qp(zo.fromBase64String(e))}static fromUint8Array(e){return QL(),new qp(zo.fromUint8Array(e))}toBase64(){return YL(),this._delegate.toBase64()}toUint8Array(){return QL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function VD(t){return function nK(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class rK{enableIndexedDbPersistence(e,n){return function eZ(t,e){SL(t=it(t,Bt));const n=ln(t);if(n._uninitializedComponentsProvider)throw new X(k.FAILED_PRECONDITION,"SDK cache is already specified.");Yr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new wd;return bL(n,i,new mD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function tZ(t){SL(t=it(t,Bt));const e=ln(t);if(e._uninitializedComponentsProvider)throw new X(k.FAILED_PRECONDITION,"SDK cache is already specified.");Yr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new wd;return bL(e,r,new uL(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function nZ(t){if(t._initialized&&!t._terminated)throw new X(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Bn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{yield(n=(0,Z.Z)(function*(i){if(!oo.D())return Promise.resolve();const o=i+"main";yield oo.delete(o)}),function r(i){return n.apply(this,arguments)})(uC(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class JL{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof pa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Yr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function TL(t,e,n,r={}){var i;const o=(t=it(t,Lp))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Zn.MOCK_USER;else{a=(0,xt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new X(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Zn(d)}t._authCredentials=new Z8(new S1(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function iZ(t){return function B7(t){return t.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield dL(t),n=yield hL(t);return e.setNetworkEnabled(!0),function(i){const o=oe(i);return o.C_.delete(0),Op(o)}(n)}))}(ln(t=it(t,Bt)))}(this._delegate)}disableNetwork(){return function oZ(t){return function j7(t){return t.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield dL(t),n=yield hL(t);return e.setNetworkEnabled(!1),(r=(0,Z.Z)(function*(o){const s=oe(o);s.C_.add(0),yield gd(s),s.M_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(ln(t=it(t,Bt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function rZ(t){return function(n){const r=new Bn;return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function T7(t,e){return eD.apply(this,arguments)}(yield TD(n),r)})),r.promise}(ln(t=it(t,Bt)))}(this._delegate)}onSnapshotsInSync(e){return function FZ(t,e){return function z7(t,e){const n=new rv(e);return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield Cd(t),o=n,oe(i).q_.add(o),void o.next();var i,o})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield Cd(t),o=n,void oe(i).q_.delete(o);var i,o}))}}(ln(t=it(t,Bt)),bD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bd(this,CL(this._delegate,e))}catch(n){throw Ur(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ui(this,av(this._delegate,e))}catch(n){throw Ur(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Br(this,function Q7(t,e){if(t=it(t,Lp),DD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(k.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ar(t,null,(r=e,new vs(dt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Ur(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function WZ(t,e,n){t=it(t,Bt);const r=Object.assign(Object.assign({},qZ),n);return function(o){if(o.maxAttempts<1)throw new X(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new Bn;return o.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){const d=yield function fL(t){return ov(t).then(e=>e.datastore)}(o);new V7(o.asyncQueue,d,a,s,u).run()})),u.promise}(ln(t),i=>e(new GZ(t,i)),r)}(this._delegate,n=>e(new XL(this,n)))}batch(){return ln(this._delegate),new eV(new GL(this._delegate,e=>Ad(this._delegate,e)))}loadBundle(e){return function sZ(t,e){const n=ln(t=it(t,Bt)),r=new J7;return function q7(t,e,n,r){const i=function(s,a){let u;return u="string"==typeof s?Fk().encode(s):s,p=function(p,g){if(p instanceof Uint8Array)return cL(p,g);if(p instanceof ArrayBuffer)return cL(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new F7(p,a);var p}(n,Np(e));t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){!function O7(t,e,n){const r=oe(t);var i;(i=(0,Z.Z)(function*(s,a,u){try{const d=yield a.getMetadata();if(yield function(E,C){const S=oe(E),N=mn(C.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",R=>S.Kr.getBundleMetadata(R,C.id)).then(R=>!!R&&R.createTime.compareTo(N)>=0)}(s.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(XF(d));const p=new f7(d,s.localStore,a.serializer);let g=yield a.Ma();for(;g;){const v=yield p.ea(g);v&&u._updateProgress(v),g=yield a.Ma()}const _=yield p.complete();return yield Ts(s,_.ra,void 0),yield function(E,C){const S=oe(E);return S.persistence.runTransaction("Save bundle","readwrite",N=>S.Kr.saveBundleMetadata(N,C))}(s.localStore,d),u._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return Yr("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var E}),function o(s,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield TD(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function aZ(t,e){return function G7(t,e){return t.asyncQueue.enqueue((0,Z.Z)(function*(){return function(r,i){const o=oe(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield Td(t),e)}))}(ln(t=it(t,Bt)),e).then(n=>n?new ar(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Br(this,n):null)}}class vv extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new qp(new zo(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ui.forKey(n,this.firestore,null)}}class XL{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new vv(e)}get(e){const n=tc(e);return this._delegate.get(n).then(r=>new Gp(this._firestore,new Ds(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=tc(e);return r?(LD("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=tc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=tc(e);return this._delegate.delete(n),this}}class eV{constructor(e){this._delegate=e}set(e,n,r){const i=tc(e);return r?(LD("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=tc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=tc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ec{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new zp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ec.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new ec(e,new vv(e),n),i.set(n,o)),o}}ec.INSTANCES=new WeakMap;class Ui{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ui(n,new Kt(n._delegate,r,new ae(e)))}static forKey(e,n,r){return new Ui(n,new Kt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new bd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bd(this.firestore,CL(this._delegate,e))}catch(n){throw Ur(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Kt&&DL(this._delegate,e)}set(e,n){n=LD("DocumentReference.set",n);try{return n?HL(this._delegate,e,n):HL(this._delegate,e)}catch(r){throw Ur(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?zL(this._delegate,e):zL(this._delegate,e,n,...r)}catch(i){throw Ur(i,"updateDoc()","DocumentReference.update()")}}delete(){return function OZ(t){return Ad(it(t.firestore,Bt),[new sd(t._key,nn.none())])}(this._delegate)}onSnapshot(...e){const n=tV(e),r=nV(e,i=>new Gp(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return qL(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function RZ(t){t=it(t,Kt);const e=it(t.firestore,Bt),n=ln(e),r=new ba(e);return function $7(t,e){const n=new Bn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(r=(0,Z.Z)(function*(o,s,a){try{const u=yield function(p,g){const _=oe(p);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,g))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new X(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=yd(u,`Failed to get document '${s} from cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Td(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Ds(e,r,t._key,i,new Xu(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function PZ(t){t=it(t,Kt);const e=it(t.firestore,Bt);return pL(ln(e),t._key,{source:"server"}).then(n=>kD(e,t,n))}(this._delegate):function SZ(t){t=it(t,Kt);const e=it(t.firestore,Bt);return pL(ln(e),t._key).then(n=>kD(e,t,n))}(this._delegate),n.then(r=>new Gp(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ui(this.firestore,this._delegate.withConverter(e?ec.getInstance(this.firestore,e):null))}}function Ur(t,e,n){return t.message=t.message.replace(e,n),t}function tV(t){for(const e of t)if("object"==typeof e&&!VD(e))return e;return{}}function nV(t,e){var n,r;let i;return i=VD(t[0])?t[0]:VD(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Gp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ui(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return $L(this._delegate,e._delegate)}}class Wp extends Gp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function G8(t,e){t||_e()}(void 0!==n),n}}class Br{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vv(e)}where(e,n,r){try{return new Br(this.firestore,Da(this._delegate,function _Z(t,e,n){const r=e,i=fv("where",t);return Hp._create(i,r,n)}(e,n,r)))}catch(i){throw Ur(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Br(this.firestore,Da(this._delegate,function yZ(t,e="asc"){const n=e,r=fv("orderBy",t);return ND._create(r,n)}(e,n)))}catch(r){throw Ur(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Br(this.firestore,Da(this._delegate,function vZ(t){return EL("limit",t),pv._create("limit",t,"F")}(e)))}catch(n){throw Ur(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Br(this.firestore,Da(this._delegate,function IZ(t){return EL("limitToLast",t),pv._create("limitToLast",t,"L")}(e)))}catch(n){throw Ur(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Br(this.firestore,Da(this._delegate,function EZ(...t){return gv._create("startAt",t,!0)}(...e)))}catch(n){throw Ur(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Br(this.firestore,Da(this._delegate,function wZ(...t){return gv._create("startAfter",t,!1)}(...e)))}catch(n){throw Ur(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Br(this.firestore,Da(this._delegate,function TZ(...t){return mv._create("endBefore",t,!1)}(...e)))}catch(n){throw Ur(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Br(this.firestore,Da(this._delegate,function CZ(...t){return mv._create("endAt",t,!0)}(...e)))}catch(n){throw Ur(n,"endAt()","Query.endAt()")}}isEqual(e){return AD(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function xZ(t){t=it(t,ar);const e=it(t.firestore,Bt),n=ln(e),r=new ba(e);return function H7(t,e){const n=new Bn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(r=(0,Z.Z)(function*(o,s,a){try{const u=yield Qy(o,s,!0),d=new nL(s,u.ls),p=d.ca(u.documents),g=d.applyChanges(p,!1);a.resolve(g.snapshot)}catch(u){const d=yd(u,`Failed to execute query '${s} against cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Td(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Aa(e,r,t,i))}(this._delegate):"server"===e?.source?function NZ(t){t=it(t,ar);const e=it(t.firestore,Bt),n=ln(e),r=new ba(e);return gL(n,t._query,{source:"server"}).then(i=>new Aa(e,r,t,i))}(this._delegate):function MZ(t){t=it(t,ar);const e=it(t.firestore,Bt),n=ln(e),r=new ba(e);return FL(t._query),gL(n,t._query).then(i=>new Aa(e,r,t,i))}(this._delegate),n.then(r=>new UD(this.firestore,new Aa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=tV(e),r=nV(e,i=>new UD(this.firestore,new Aa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return qL(this._delegate,n,r)}withConverter(e){return new Br(this.firestore,this._delegate.withConverter(e?ec.getInstance(this.firestore,e):null))}}class oK{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Wp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UD{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Br(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new oK(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Wp(this._firestore,r))})}isEqual(e){return $L(this._delegate,e._delegate)}}class bd extends Br{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ui(this.firestore,e):null}doc(e){try{return new Ui(this.firestore,void 0===e?av(this._delegate):av(this._delegate,e))}catch(n){throw Ur(n,"doc()","CollectionReference.doc()")}}add(e){return function kZ(t,e){const n=it(t.firestore,Bt),r=av(t),i=_v(t.converter,e);return Ad(n,[lv(Yu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Ui(this.firestore,n))}isEqual(e){return DL(this._delegate,e._delegate)}withConverter(e){return new bd(this.firestore,this._delegate.withConverter(e?ec.getInstance(this.firestore,e):null))}}function tc(t){return it(t,Kt)}class BD{constructor(...e){this._delegate=new Cs(...e)}static documentId(){return new BD(Wt.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof Cs&&this._delegate._internalPath.isEqual(e._internalPath)}}class nc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function KZ(){return new SD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new nc(e)}static delete(){const e=function ZZ(){return new Up("deleteField")}();return e._methodName="FieldValue.delete",new nc(e)}static arrayUnion(...e){const n=function QZ(...t){return new hZ("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new nc(n)}static arrayRemove(...e){const n=function YZ(...t){return new fZ("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new nc(n)}static increment(e){const n=function JZ(t){return new pZ("increment",t)}(e);return n._methodName="FieldValue.increment",new nc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sK={Firestore:JL,GeoPoint:uv,Timestamp:tn,Blob:qp,Transaction:XL,WriteBatch:eV,DocumentReference:Ui,DocumentSnapshot:Gp,Query:Br,QueryDocumentSnapshot:Wp,QuerySnapshot:UD,CollectionReference:bd,FieldPath:BD,FieldValue:nc,setLogLevel:function iK(t){!function q8(t){ca.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function rV(t,e){return function cK(t,e=GN){return new st(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function jD(t,e){return rV(t,e).pipe(Ce(n=>({payload:n,type:"query"})))}!function uK(t){(function aK(t,e){t.INTERNAL.registerComponent(new cO.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},sK)))})(t,(e,n)=>new JL(e,n,new rK)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(sa.Z);class iV{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=lV(r,n);return new aV(i,o,this.afs)}snapshotChanges(){return function lK(t,e){return rV(t,e).pipe(P_(void 0),L0(),Ce(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(di)}valueChanges(e={}){return this.snapshotChanges().pipe(Ce(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return A(this.ref.get(e)).pipe(di)}}function Iv(t,e){return jD(t,e).pipe(P_(void 0),L0(),Ce(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=o.find(g=>g.doc.ref.isEqual(a.ref)),p=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&p&&JSON.stringify(p.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function oV(t,e,n){return Iv(t,n).pipe(x_((r,i)=>function dK(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function hK(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return $D(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return $D(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $D(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),zt(),Ce(r=>r.map(i=>({type:i.type,payload:i}))))}function $D(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function sV(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class aV{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Iv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Ce(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(P_(void 0),L0(),to(([r,i])=>i.length>0||!r),Ce(([,r])=>r),di)}auditTrail(e){return this.stateChanges(e).pipe(x_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=sV(e);return oV(this.query,n,this.afs.schedulers.outsideAngular).pipe(di)}valueChanges(e={}){return jD(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),di)}get(e){return A(this.query.get(e)).pipe(di)}add(e){return this.ref.add(e)}doc(e){return new iV(this.ref.doc(e),this.afs)}}class fK{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Iv(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(n=>n.filter(r=>e.indexOf(r.type)>-1)),to(n=>n.length>0),di):Iv(this.query,this.afs.schedulers.outsideAngular).pipe(di)}auditTrail(e){return this.stateChanges(e).pipe(x_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=sV(e);return oV(this.query,n,this.afs.schedulers.outsideAngular).pipe(di)}valueChanges(e={}){return jD(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),di)}get(e){return A(this.query.get(e)).pipe(di)}}const uV=new he("angularfire2.enableFirestorePersistence"),cV=new he("angularfire2.firestore.persistenceSettings"),pK=new he("angularfire2.firestore.settings"),gK=new he("angularfire2.firestore.use-emulator");function lV(t,e=(n=>n)){return{query:e(t),ref:t}}let HD=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,d,p,g,_,v,E,C,S,N,R){this.schedulers=u;const j=F0(n,a,r),ne=p;g&&aO(j,a,_,E,C,S,v,N),[this.firestore,this.persistenceEnabled$]=YN(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{const ue=a.runOutsideAngular(()=>j.firestore());if(o&&ue.settings(o),ne&&ue.useEmulator(...ne),i&&!D_(s)){const Ue=()=>{try{return A(ue.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(vt){return typeof console<"u"&&console.warn(vt),G(!1)}};return[ue,a.runOutsideAngular(Ue)]}return[ue,G(!1)]},[o,ne,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:o,query:s}=lV(i,r),a=this.schedulers.ngZone.run(()=>o);return new aV(a,s,this)}collectionGroup(n,r){const i=r||(s=>s),o=this.firestore.collectionGroup(n);return new fK(i(o),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new iV(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(ie(Q_),ie(Y_,8),ie(uV,8),ie(pK,8),ie(is),ie(Et),ie(KN),ie(cV,8),ie(gK,8),ie(uO,8),ie(tO,8),ie(nO,8),ie(rO,8),ie(iO,8),ie(oO,8),ie(sO,8),ie(WN,8))};static \u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),mK=(()=>{class t{constructor(){sa.Z.registerVersion("angularfire",k0.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:uV,useValue:!0},{provide:cV,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ii({type:t});static \u0275inj=ni({providers:[HD]})}return t})(),dV=(()=>{class t{constructor(n){this.firestore=n}getTratte(){return this.firestore.collection("tratte").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||t)(ie(HD))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _K(t,e){1&t&&(pe(0,"div",12),Ae(1,"Inspiration"),ge())}function yK(t,e){if(1&t&&(pe(0,"div",12),Ae(1),ge()),2&t){const n=Eu().$implicit;Oi(1),Xm(n.note)}}function vK(t,e){if(1&t){const n=function KS(){return J()}();pe(0,"article")(1,"div",4)(2,"div",5)(3,"h3")(4,"a",6),yl("click",function(){const o=ch(n).$implicit;return lh(Eu().sendInfo(o.id))}),Ae(5),ge()(),_l(6,_K,2,0,"div",7),_l(7,yK,2,1,"div",7),ge(),pe(8,"div",8),Ae(9),pe(10,"a",6),yl("click",function(){const o=ch(n).$implicit;return lh(Eu().sendInfo(o.id))}),Ae(11,"Playlist"),en(12,"span",9),ge()(),en(13,"div",10)(14,"div",11),ge()()}if(2&t){const n=e.$implicit;Oi(1),function xR(t,e,n){Mo(cl(J(),t,e,n))}("background: url(",n.srcimg,") center no-repeat;"),Oi(4),qE("",n.partenza," - ",n.destinazione,""),Oi(1),ea("ngIf",""==n.note),Oi(1),ea("ngIf",""!=n.note),Oi(2),GE(" Vivi il viaggio da ",n.partenza," a ",n.destinazione," ",n.note," con questa playlist ")}}let IK=(()=>{class t{constructor(n,r){this.firebase=n,this.router=r,this.listaTratte=[],this.sendID=new B,this.sendID$=this.sendID.asObservable()}ngOnInit(){this.firebase.getTratte().subscribe(n=>{this.listaTratte=n})}sendInfo(n){this.sendID.next(n),this.router.navigateByUrl(`/tratta/${n}`)}static#e=this.\u0275fac=function(r){return new(r||t)(Re(dV),Re(Qr))};static#t=this.\u0275cmp=br({type:t,selectors:[["app-tratte"]],decls:9,vars:1,consts:[["id","picture"],[2,"width","auto"],["role","alert","id","disclaimer",1,"alert","alert-warning"],[4,"ngFor","ngForOf"],[1,"blog-card","spring-fever"],[1,"title-content"],[3,"click"],["class","intro",4,"ngIf"],[1,"card-info"],[1,"licon","icon-arr","icon-black"],[1,"gradient-overlay"],[1,"color-overlay"],[1,"intro"]],template:function(r,i){1&r&&(en(0,"div",0),pe(1,"article",1)(2,"div",2)(3,"p")(4,"strong"),Ae(5,"Disclaimer :"),ge(),Ae(6," Le canzoni presentate su SpotiRFI sono state scelte esclusivamente sulla base dell'adeguatezza del titolo con il nome delle stazioni ferroviarie. La scelta di una canzone non implica un'approvazione o un'adesione al testo, al significato o a qualsiasi altro aspetto della canzone stessa. Le canzoni sono fornite solo a scopo di intrattenimento e non intendono rappresentare o riflettere le opinioni di SpotiRFI. "),ge()()(),pe(7,"section"),_l(8,vK,15,10,"article",3),ge()),2&r&&(Oi(8),ea("ngForOf",i.listaTratte))},dependencies:[qw,Gw],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";@import"//fonts.googleapis.com/css?family=Abril+Fatface|Droid+Serif:400,700,400italic,700italic";#picture[_ngcontent-%COMP%]{background-image:url(https://images.lonelyplanetitalia.it/uploads/treno-sicilia?q=80&p=slider&s=d688b722008ebe2d69bad96ef1c4624f);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:bottom center;background-attachment:fixed;z-index:0}article[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;margin:auto auto 4rem;font-family:Merienda,cursive;width:500px}section[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}#disclaimer[_ngcontent-%COMP%]{margin:4em 1em 3.5em;text-align:justify}p[_ngcontent-%COMP%]{font-size:1.2em}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{background:linear-gradient(to bottom,rgba(0,5,10,.4) 0%,rgba(0,0,0,0) 100%);font-family:"Droid Serif",serif}.blog-card[_ngcontent-%COMP%]{max-width:550px;width:100%;height:500px;position:relative;font-family:"Droid Serif",serif;color:#fff;top:20%;right:0;left:0;margin:0 auto;overflow:hidden;border-radius:0;box-shadow:0 10px 20px -9px #00000080;text-align:center;transition:all .4s;background-size:100%}.blog-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:all .2s;cursor:pointer}.blog-card[_ngcontent-%COMP%]   .color-overlay[_ngcontent-%COMP%]{background:rgba(64,84,94,.5);width:550px;height:500px;position:absolute;z-index:10;top:0;left:0;transition:background .3s cubic-bezier(.33,.66,.66,1)}.blog-card[_ngcontent-%COMP%]   .gradient-overlay[_ngcontent-%COMP%]{background-image:linear-gradient(transparent 0%,rgba(0,0,0,.6) 21%);width:550px;height:500px;position:absolute;top:350px;left:0;z-index:15}.blog-card[_ngcontent-%COMP%]:hover{box-shadow:0 18px 20px -9px #000a1ebf}.blog-card[_ngcontent-%COMP%]:hover   .card-info[_ngcontent-%COMP%]{opacity:1;bottom:100px}.blog-card[_ngcontent-%COMP%]:hover   .color-overlay[_ngcontent-%COMP%]{background:rgba(64,64,70,.8)}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%]{margin-top:70px}.title-content[_ngcontent-%COMP%]{text-align:center;margin:170px 0 0;position:absolute;z-index:20;width:100%;top:0;left:0;transition:all .6s}.blog-card[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_changeLetter .3s 1 linear;width:80%}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-size:1.9em;font-weight:400;letter-spacing:1px;font-family:Abril Fatface,serif;margin-bottom:0;display:inline-block}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-shadow:0px 0px 10px rgba(0,0,0,.5);transition:all .2s}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-shadow:0px 8px 20px rgba(0,0,0,.95)}h3[_ngcontent-%COMP%]:after{content:" ";display:block;width:10%;height:2px;margin:20px auto;border:0;background:#BDA26B;transition:all .2s}@keyframes _ngcontent-%COMP%_changeLetter{0%{width:10%}to{width:80%}}.intro[_ngcontent-%COMP%]{width:170px;margin:0 auto;color:#ddd;font-style:italic;line-height:18px}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ddd}.intro[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.card-info[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;position:absolute;bottom:-40px;left:0;margin:0 auto;padding:0 50px;font-style:16px;line-height:24px;z-index:20;opacity:0;transition:bottom .64s,opacity .63s cubic-bezier(.33,.66,.66,1)}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;width:100px;margin:15px auto;background:#fff;color:#444;padding:3px 10px;border-radius:2px;font-size:.8em}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#8e7c49;color:#fff}.card-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{filter:brightness(10);opacity:1}.licon[_ngcontent-%COMP%]{position:relative;width:23px;height:15px;display:inline-block;vertical-align:middle}.licon[_ngcontent-%COMP%]:before{content:"";background:url(https://rawcdn.githack.com/Nodws/NodPen/ffad95aa5244b4b09a3c7c1508a018959bbedb7e/postItem/licons.svg?) -2px -6px no-repeat;background-size:250px;width:26px;height:20px;display:inline-block;vertical-align:middle;position:absolute;top:-3px;left:0}.icon-black[_ngcontent-%COMP%]{filter:brightness(0);opacity:.6}@media (max-width:750px){.utility-info[_ngcontent-%COMP%]{text-align:center}.utility-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;margin:0;box-sizing:border-box}.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:49%;display:inline-block;box-sizing:border-box;margin:0}}@media (max-width:500px){.utility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type{width:100%}.card-info[_ngcontent-%COMP%]{display:none}.blog-card[_ngcontent-%COMP%]:hover   .title-content[_ngcontent-%COMP%], .title-content[_ngcontent-%COMP%]{margin-top:40px}.blog-card[_ngcontent-%COMP%]{height:300px}.blog-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3em}.intro[_ngcontent-%COMP%]{font-size:.8em}}#profile-badges[_ngcontent-%COMP%]:after{content:"BRO";font-family:"Lato","Lucida Grande","Lucida Sans Unicode",Tahoma,Sans-Serif;font-size:13px;font-weight:500;text-transform:uppercase;padding:1px 4px;color:#000!important;border-radius:3px;position:relative;top:-2px;text-shadow:none!important;white-space:nowrap;letter-spacing:0;background:#FFDD40}.profile-header[_ngcontent-%COMP%]{background:#333 url(https://images.unsplash.com/photo-1435783099294-283725c37230?dpr=1&auto=compress,format&fit=crop&w=1376&h=635&q=80&cs=tinysrgb&crop=&bg=) top center no-repeat;background-size:cover;font-size:3em;position:relative}.profile-header[_ngcontent-%COMP%]:after{position:absolute;content:"";display:block;width:100%;height:100%;top:0;left:0;background:rgba(23,23,31,.42);z-index:0}#profile-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Abril Fatface,serif;font-size:1.2em}.profile-links[_ngcontent-%COMP%]   a[href*="nodws.com"][_ngcontent-%COMP%]:before{content:"\\2616";color:#0a45b5;padding-right:3px}.profile-links[_ngcontent-%COMP%]   a[href*=twitter][_ngcontent-%COMP%]:before{content:"\\1f426";color:#08c}.profile-links[_ngcontent-%COMP%]   a[href*=dribbble][_ngcontent-%COMP%]:before{content:"\\26be";color:#d055bf}#following-this-user[_ngcontent-%COMP%]{pointer-events:none}#follow-this-user[_ngcontent-%COMP%]{font-size:1.2em;border-color:#359ef9}#follow-this-user[_ngcontent-%COMP%]:after{content:"\\1f448"}.links-and-stats[_ngcontent-%COMP%]{background:rgb(20,20,21)}.profile-name[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-shadow:0 6px 9px rgba(0,0,0,.48)}.profile-avatar[_ngcontent-%COMP%]{bottom:-10px;width:150px;height:150px;border:0px solid #1E1E1E;background:rgba(2,2,2,.49);box-shadow:0 19px 19px -10px #000000a1}.profile-username[_ngcontent-%COMP%], .upsell[_ngcontent-%COMP%], .profile-location[_ngcontent-%COMP%], .primary-pro[_ngcontent-%COMP%]{opacity:0}.upsell[_ngcontent-%COMP%], #pen-as-header-question[_ngcontent-%COMP%]{display:none}.profile-nav-1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.2rem}.profile-bio[_ngcontent-%COMP%], .profile-nav-1[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .profile-nav-1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#14141596!important;font-size:1.2rem}.meta[_ngcontent-%COMP%]   .pen-title[_ngcontent-%COMP%]{font-family:"Droid Serif",serif;text-align:center}.pagination-button[_ngcontent-%COMP%]{background-color:#2f2f31;border-color:#2f2f31;transition:all .2s}.pagination-button[_ngcontent-%COMP%]:hover{box-shadow:0 3px 8px #0003}.single-project[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%], .single-pen[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{text-align:center;width:100%}.stats[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#bda26b}.stats[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .loves[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{fill:#2f2f3100!important;stroke:#ba6!important;stroke-width:.1em!important}.loves[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{stroke-width:.5em!important}.comments[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-width:.35em!important}.single-stat.loves.loved-1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff!important}.single-pen[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]:after{width:40%;transition:all .2s}.pen-actions[_ngcontent-%COMP%]{border:0px!important}.meta[_ngcontent-%COMP%]{box-shadow:none!important}']})}return t})(),EK=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=br({type:t,selectors:[["app-chisiamo"]],decls:7,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["id","picture"],["id","content"],[1,"mb-4"]],template:function(r,i){1&r&&(en(0,"link",0)(1,"div",1),pe(2,"div",2)(3,"h2"),Ae(4,"Chi Siamo"),ge(),pe(5,"p",3),Ae(6," Siamo un gruppo di appassionati di viaggi e di musica, con un amore particolare per le ferrovie. La nostra passione per l'esplorazione e la scoperta ci ha portato a creare SpotiRFI, un progetto unico che unisce la bellezza del viaggio in treno con il potere evocativo della musica. Ogni stazione ferroviaria sulla mappa diventa una tappa di un viaggio musicale attraverso la Sicilia, offrendo un'esperienza unica che speriamo possa arricchire i vostri viaggi tanto quanto ha arricchito i nostri. "),ge()())},styles:["#picture[_ngcontent-%COMP%]{background-image:url(https://www.ilportaledeitreni.it/wp-content/uploads/2020/10/E656.439D345.1118E656.590E646.028Carrozza-Centoporte-INV-Arquata-Scrivia-La-Spezia-Migliarina.jpg);width:100%;height:550px;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed;z-index:0}h2[_ngcontent-%COMP%]{margin-top:2em}#content[_ngcontent-%COMP%]{max-width:58em;text-align:justify;margin:0 auto;padding:2em}"]})}return t})(),wK=(()=>{class t{constructor(n){this.path="";let r=n.path().split("/");this.path=r[1].toUpperCase()}static#e=this.\u0275fac=function(r){return new(r||t)(Re(p_))};static#t=this.\u0275cmp=br({type:t,selectors:[["app-tabellone"]],decls:50,vars:1,consts:[["href","https://fonts.cdnfonts.com/css/caros","rel","stylesheet"],[1,"background"],[1,"riga"],[1,"binario"],[1,"destinazione"],[1,"pdest"],[1,"treno"],[1,"ptreno"],[1,"partenza"],[1,"ppart"],[1,"info"],[1,"pinfo"]],template:function(r,i){1&r&&(en(0,"link",0),pe(1,"div",1),en(2,"br"),pe(3,"div",2)(4,"div",3)(5,"h2")(6,"b"),Ae(7,"1"),ge()()(),pe(8,"div",4)(9,"p")(10,"b"),Ae(11,"destinazione "),ge(),pe(12,"i"),Ae(13,"destination"),ge()(),pe(14,"div",5)(15,"h4"),Ae(16),ge()()()(),en(17,"br"),pe(18,"div",2)(19,"div",6)(20,"p")(21,"b"),Ae(22,"treno "),ge(),pe(23,"i"),Ae(24,"train"),ge()(),pe(25,"div",7)(26,"h4"),Ae(27,"SPOTIRFI"),ge(),pe(28,"h5"),Ae(29,"REG 21886"),ge()()(),pe(30,"div",8)(31,"p")(32,"b"),Ae(33,"partenza "),ge(),pe(34,"i"),Ae(35,"departure"),ge()(),pe(36,"div",9)(37,"h4"),Ae(38,"CANCELLATO"),ge()()()(),en(39,"br"),pe(40,"div",2)(41,"div",10)(42,"p")(43,"b"),Ae(44,"informazioni "),ge(),pe(45,"i"),Ae(46,"informations"),ge()(),pe(47,"div",11)(48,"h4"),Ae(49,"E' SEVERAMENTE VIETATO ATTRAVERSARE LA LINEA GIALLA"),ge()()()()()),2&r&&(Oi(16),Xm(i.path))},styles:['@import"https://fonts.cdnfonts.com/css/caros";.background[_ngcontent-%COMP%]{width:40em;height:20.35em;background-color:#000;margin:auto}.riga[_ngcontent-%COMP%]{border-top:.1em white solid;width:38em;margin:0 1em}.binario[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}h2[_ngcontent-%COMP%]{font-size:5em}.destinazione[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.destinazione[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pdest[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 20s linear infinite}.pdest[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em;overflow:hidden}.treno[_ngcontent-%COMP%]{color:#fff;font-family:Caros,sans-serif;width:11.5em;float:left}.treno[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ptreno[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:10.99em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ptreno[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em;margin-left:.2em;margin-bottom:.1em}.ptreno[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1em;margin-left:.2em}.partenza[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.partenza[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.ppart[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:11em;width:27em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite}.ppart[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2.4em}.info[_ngcontent-%COMP%]{color:#fff;width:61em;float:initial}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;font-family:Caros,sans-serif}.pinfo[_ngcontent-%COMP%]{background-color:#484848;color:#484848;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;width:38em;height:3em;float:initial;animation:_ngcontent-%COMP%_lighting 15s linear infinite;overflow:hidden}.pinfo[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8em;white-space:nowrap;position:relative;animation:_ngcontent-%COMP%_scroll-left 20s linear infinite}@keyframes _ngcontent-%COMP%_lighting{0%{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}to{color:#fff900;text-shadow:0 0 7px #fff900,0 0 50px #ff6c00}}@keyframes _ngcontent-%COMP%_scroll-left{0%{transform:translate(100%)}to{transform:translate(-100%)}}']})}return t})(),TK=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=br({type:t,selectors:[["app-notfound"]],decls:6,vars:0,consts:[["controls","","autoplay",""],["src","assets/404.mp3","type","audio/mpeg"]],template:function(r,i){1&r&&(pe(0,"article"),en(1,"app-tabellone"),ge(),pe(2,"article")(3,"audio",0),en(4,"source",1),Ae(5," Il tuo browser non supporta l'elemento audio. "),ge()())},dependencies:[wK],styles:["article[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;margin:6em;font-family:Merienda,cursive}"]})}return t})();function CK(t,e){if(1&t&&(pe(0,"div",3),en(1,"iframe",4),ge()),2&t){const n=Eu().index,r=Eu();Oi(1),ea("src",r.srcs[n],GI)}}function DK(t,e){if(1&t&&(pe(0,"div",1),_l(1,CK,2,1,"div",2),ge()),2&t){const n=e.$implicit,r=Eu();Oi(1),ea("ngIf",n.id==r.id)}}const AK=[{path:"",component:HN},{path:"home",component:HN},{path:"tratte",component:IK},{path:"chisiamo",component:EK},{path:"tratta/:id",component:(()=>{class t{constructor(n,r,i){this.fireServ=n,this.route=r,this.sanitizer=i,this.id=null,this.tratte=[],this.srcs=[]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.fireServ.getTratte().subscribe(n=>{for(let r of n)this.trattaSrc=this.sanitizer.bypassSecurityTrustResourceUrl(r.src),this.srcs.push(this.trattaSrc);this.tratte=n})}static#e=this.\u0275fac=function(r){return new(r||t)(Re(dV),Re(Pu),Re(Ox))};static#t=this.\u0275cmp=br({type:t,selectors:[["app-playlist-page"]],decls:5,vars:1,consts:[["class","container",4,"ngFor","ngForOf"],[1,"container"],["class","incontainer",4,"ngIf"],[1,"incontainer"],["width","100%","height","500","frameBorder","0","allowfullscreen","","allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture","loading","lazy",2,"border-radius","12px",3,"src"]],template:function(r,i){1&r&&(en(0,"br")(1,"br")(2,"br")(3,"br"),_l(4,DK,2,1,"div",0)),2&r&&(Oi(4),ea("ngForOf",i.tratte))},dependencies:[qw,Gw],styles:[".container[_ngcontent-%COMP%]{align-items:center;width:55%}.incontainer[_ngcontent-%COMP%]{align-items:center}@media screen and (min-width: 1025px) and (max-width: 1300px){.container[_ngcontent-%COMP%]{align-items:center;width:72%}}@media screen and (min-width: 768px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{align-items:center;width:77%}}@media screen and (min-width: 281px) and (max-width: 767px){.container[_ngcontent-%COMP%]{align-items:center;width:90%}}@media screen and (max-width: 280px){.container[_ngcontent-%COMP%]{align-items:center;width:97%}}"]})}return t})()},{path:"**",component:TK}];let bK=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ii({type:t});static#n=this.\u0275inj=ni({imports:[jN.forRoot(AK),jN]})}return t})(),SK=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=br({type:t,selectors:[["app-navbar"]],decls:20,vars:0,consts:[["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body","fixed-top"],[1,"container-fluid"],["routerLink","home",1,"navbar-brand"],["src","assets/logocompatto.png","alt","Logo","height","30",1,"d-inline-block","align-text-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","tratte",1,"nav-link"],["routerLink","chisiamo",1,"nav-link"],["href","https://www.rfi.it/it.html","target","_blank",1,"nav-link"],["href","https://open.spotify.com/intl-it","target","_blank",1,"nav-link"]],template:function(r,i){1&r&&(pe(0,"nav",0)(1,"div",1)(2,"a",2),en(3,"img",3),ge(),pe(4,"button",4),en(5,"span",5),ge(),pe(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),Ae(10,"Le tratte"),ge()(),pe(11,"li",8)(12,"a",10),Ae(13,"Chi siamo"),ge()(),pe(14,"li",8)(15,"a",11),Ae(16," RFI "),ge()(),pe(17,"li",8)(18,"a",12),Ae(19," Spotify "),ge()()()()()())},dependencies:[Of],styles:['@import"https://fonts.googleapis.com/css2?family=Merienda&family=Tilt+Neon&family=Ubuntu:ital,wght@1,500&family=Young+Serif&display=swap";nav[_ngcontent-%COMP%]{font-family:Merienda,cursive}']})}return t})(),RK=(()=>{class t{constructor(){}disclaimer(){window.alert("SpotiRFI \xe8 un sito indipendente e non \xe8 affiliato, sponsorizzato o approvato da Spotify o RFI. Non abbiamo l\u2019intenzione di ledere in alcun modo la loro immagine o reputazione. Il nostro obiettivo \xe8 fornire un servizio utile e di qualit\xe0 per i nostri utenti, nel rispetto dei diritti di propriet\xe0 intellettuale e delle normative vigenti.")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=br({type:t,selectors:[["app-footer"]],decls:66,vars:0,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"],["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark","border-bottom","border-body"],[1,"layout"],[1,"footer-wrapper","clearfix"],[1,"grid-3","footer-logo"],["href","#"],["alt","html layout logo","src","assets/logo.png"],[1,"footer-text"],["type","button","id","liveAlertBtn",3,"click"],["id","liveAlertBtn",1,"material-symbols-outlined"],[1,"grid-3"],[1,"footer-heading"],[1,"footermenu"],["routerLink","tratte"],["routerLink","chisiamo"],["href","https://www.rfi.it/it.html","target","_blank"],["href","https://open.spotify.com/intl-it","target","_blank"],[1,"footer-contact"],["href","./tratta/08"],["href","./tratta/04"],["href","./tratta/02"],["href","./tratta/01"],["href","./tratta/05"],[1,"footerblog"],["href","https://www.fsitaliane.it/content/dam/fsitaliane/Documents/impegno/per-lambiente/progetti/Atlante%20delle%20linee%20ferroviarie%20dismesse.pdf","target","_blank"],["href","https://epodweb.rfi.it/Download.ashx?q=lTmHEqG6%2FeC61zq42ZZheV8ouJSzS%2B5udsN2POFdeD4hdoONi5u5MvreFVXiIbvj","target","_blank"],["href","https://www.rfi.it/it/chi-siamo/Il-rapporto-con-lo-Stato-e-con-gli-stakeholder/il-piano-commerciale.html","target","_blank"]],template:function(r,i){1&r&&(en(0,"link",0),pe(1,"footer",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),en(6,"img",6),ge(),pe(7,"p",7),Ae(8," SpotiRFI: Un viaggio musicale unico attraverso le linee ferroviarie della Sicilia. Ogni stazione, una nuova canzone. "),ge(),pe(9,"button",8),yl("click",function(){return i.disclaimer()}),pe(10,"span",9),Ae(11," info "),ge()()(),pe(12,"div",10)(13,"p",11),Ae(14,"pagine"),ge(),pe(15,"ul",12)(16,"li")(17,"a",13),Ae(18,"Le tratte"),ge()(),pe(19,"li")(20,"a",14),Ae(21,"Chi siamo"),ge()(),pe(22,"li")(23,"a",15),Ae(24,"RFI"),ge()(),pe(25,"li")(26,"a",16),Ae(27,"Spotify"),ge()()()(),pe(28,"div",10)(29,"p",11),Ae(30,"link"),ge(),pe(31,"ul",17)(32,"li")(33,"a",18),Ae(34,"Palermo - Messina"),ge()(),pe(35,"li")(36,"a",19),Ae(37,"Anello Ferroviario Palermo"),ge()(),pe(38,"li")(39,"a",20),Ae(40,"Agrigento - Palermo"),ge()(),pe(41,"li")(42,"a",21),Ae(43,"Siracusa - Caltanissetta"),ge()(),pe(44,"li")(45,"a",22),Ae(46,"Catania - Gela"),ge()()()(),pe(47,"div",10)(48,"p",11),Ae(49,"link utili"),ge(),pe(50,"ul",23)(51,"li")(52,"a",24),Ae(53,"Linee dismesse"),ge(),pe(54,"p"),Ae(55,"FS Italiane"),ge()(),pe(56,"li")(57,"a",25),Ae(58,"Regolamento Circolazione Treni"),ge(),pe(59,"p"),Ae(60,"RFI"),ge()(),pe(61,"li")(62,"a",26),Ae(63,"Piano Commerciale"),ge(),pe(64,"p"),Ae(65,"RFI"),ge()()()()()()())},dependencies:[Of],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-%COMP%]{list-style:none;text-decoration:none;margin:0}img[_ngcontent-%COMP%]{height:3.7em}html[_ngcontent-%COMP%]{overflow-y:scroll}body[_ngcontent-%COMP%]{background:#b7b7b7 none repeat scroll 0 0;font-family:Open Sans,sans-serif}ul[_ngcontent-%COMP%]{padding:0}.clearfix[_ngcontent-%COMP%]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.clearfix[_ngcontent-%COMP%]{display:inline-block}*[_ngcontent-%COMP%]   html[_ngcontent-%COMP%]   .clearfix[_ngcontent-%COMP%]{height:1%}.clearfix[_ngcontent-%COMP%]{display:block}.layout[_ngcontent-%COMP%]{margin:0 auto;max-width:1170px;width:100%;padding:0 15px}.grid-3[_ngcontent-%COMP%]{width:25%;float:left;min-height:1px;padding-left:15px;padding-right:15px;position:relative}.footer-wrapper[_ngcontent-%COMP%]{padding:100px 0}.footer-text[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;margin:40px 0 0;text-align:justify}footer[_ngcontent-%COMP%]   .footer-heading[_ngcontent-%COMP%]{color:#e1e1e1;font:18px/19px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]{margin-top:32px}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{line-height:25px}.footer-wrapper[_ngcontent-%COMP%]   ul.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"-";margin:0 5px 0 0}.footermenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#dcdcdc;font-size:14px;line-height:34px;text-transform:capitalize}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;margin:0 8px 0 0;color:#fff}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:14px}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#c7c7c7;font:13px/28px Open Sans,sans-serif;letter-spacing:1.2px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#b4b4b4;font:13px/18px Open Sans,sans-serif;letter-spacing:1.2px;padding-bottom:10px}.footerblog[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c7c7c7;font:italic 12px/18px Open Sans,sans-serif}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#22c489}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 200,"GRAD" 200,"opsz" 24}button[_ngcontent-%COMP%]{background-color:transparent;border:none;margin:1em}#liveAlertPlaceholder[_ngcontent-%COMP%]{width:75%;margin:auto}@media (max-width:980px){.layout[_ngcontent-%COMP%]{width:767px}.grid-3[_ngcontent-%COMP%]{width:50%}.footer-heading[_ngcontent-%COMP%]{margin-top:18px}}@media (max-width:640px){.layout[_ngcontent-%COMP%]{width:300px}.grid-3[_ngcontent-%COMP%]{width:100%}.footermenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;float:none;line-height:25px}}']})}return t})(),PK=(()=>{class t{constructor(n){this.router=n,this.title="SpotiRFI",this.router.events.subscribe(r=>{r instanceof fs&&window.scrollTo(0,0)})}static#e=this.\u0275fac=function(r){return new(r||t)(Re(Qr))};static#t=this.\u0275cmp=br({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(r,i){1&r&&en(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[D0,SK,RK]})}return t})();const MK_firebaseConfig={apiKey:"AIzaSyBhT4vrImMOpXLps9RtD_GROoPflfGtM4U",authDomain:"spotirfi-cd7a9.firebaseapp.com",databaseURL:"https://spotirfi-cd7a9-default-rtdb.firebaseio.com",projectId:"spotirfi-cd7a9",storageBucket:"spotirfi-cd7a9.appspot.com",messagingSenderId:"207743558815",appId:"1:207743558815:web:1d28c36da0a303fca7eeaa",measurementId:"G-8Z6DVSWE34"};let xK=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=ii({type:t,bootstrap:[PK]});static#n=this.\u0275inj=ni({providers:[HD],imports:[R9,bK,O5.initializeApp(MK_firebaseConfig),mK]})}return t})();b9().bootstrapModule(xK).catch(t=>console.error(t))},106:(Bi,An,Be)=>{Be.d(An,{Z:()=>Sn});var I=Be(58),xe=Be(537),U=Be(534),Ne=Be(879);class ct{constructor(Fe,ze){this._delegate=Fe,this.firebase=ze,(0,U._addComponent)(Fe,new xe.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(Fe,ze=U._DEFAULT_ENTRY_NAME){var Rn;this._delegate.checkDestroyed();const Pn=this._delegate.container.getProvider(Fe);return!Pn.isInitialized()&&"EXPLICIT"===(null===(Rn=Pn.getComponent())||void 0===Rn?void 0:Rn.instantiationMode)&&Pn.initialize(),Pn.getImmediate({identifier:ze})}_removeServiceInstance(Fe,ze=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(ze)}_addComponent(Fe){(0,U._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,U._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Qt=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function Je(){const ft=function bn(ft){const Fe={},ze={__esModule:!0,initializeApp:function Nt(qe,_n={}){const K=U.initializeApp(qe,_n);if((0,I.r3)(Fe,K.name))return Fe[K.name];const $t=new ft(K,ze);return Fe[K.name]=$t,$t},app:Pn,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function At(qe){const _n=qe.name,K=_n.replace("-compat","");if(U._registerComponent(qe)&&"PUBLIC"===qe.type){const $t=(Ot=Pn())=>{if("function"!=typeof Ot[K])throw Qt.create("invalid-app-argument",{appName:_n});return Ot[K]()};void 0!==qe.serviceProps&&(0,I.ZB)($t,qe.serviceProps),ze[K]=$t,ft.prototype[K]=function(...Ot){return this._getService.bind(this,_n).apply(this,qe.multipleInstances?Ot:[])}}return"PUBLIC"===qe.type?ze[K]:null},removeApp:function Rn(qe){delete Fe[qe]},useAsService:function ur(qe,_n){return"serverAuth"===_n?null:_n},modularAPIs:U}};function Pn(qe){if(!(0,I.r3)(Fe,qe=qe||U._DEFAULT_ENTRY_NAME))throw Qt.create("no-app",{appName:qe});return Fe[qe]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function pt(){return Object.keys(Fe).map(qe=>Fe[qe])}}),Pn.App=ft,ze}(ct);return ft.INTERNAL=Object.assign(Object.assign({},ft.INTERNAL),{createFirebaseNamespace:Je,extendNamespace:function Fe(ze){(0,I.ZB)(ft,ze)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),ft}(),re=new Ne.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ft=self.firebase.SDK_VERSION;ft&&ft.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Sn=Q;!function lt(ft){(0,U.registerVersion)("@firebase/app-compat","0.2.24",ft)}()},534:(Bi,An,Be)=>{Be.r(An),Be.d(An,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>ao,_DEFAULT_ENTRY_NAME:()=>ei,_addComponent:()=>so,_addOrOverwriteComponent:()=>zn,_apps:()=>lr,_clearComponents:()=>In,_components:()=>$i,_getProvider:()=>kt,_registerComponent:()=>Go,_removeServiceInstance:()=>ti,deleteApp:()=>Jn,getApp:()=>uo,getApps:()=>Ss,initializeApp:()=>xa,onLog:()=>Rs,registerVersion:()=>co,setLogLevel:()=>rc});var I=Be(861),xe=Be(537),U=Be(879),Ne=Be(58);const ct=(L,b)=>b.some(ee=>L instanceof ee);let jt,Qt;const Q=new WeakMap,re=new WeakMap,we=new WeakMap,Qe=new WeakMap,lt=new WeakMap;let Fe={get(L,b,ee){if(L instanceof IDBTransaction){if("done"===b)return re.get(L);if("objectStoreNames"===b)return L.objectStoreNames||we.get(L);if("store"===b)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return Nt(L[b])},set:(L,b,ee)=>(L[b]=ee,!0),has:(L,b)=>L instanceof IDBTransaction&&("done"===b||"store"===b)||b in L};function Pn(L){return"function"==typeof L?function Rn(L){return L!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Je(){return Qt||(Qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(L)?function(...b){return L.apply(pt(this),b),Nt(Q.get(this))}:function(...b){return Nt(L.apply(pt(this),b))}:function(b,...ee){const ve=L.call(pt(this),b,...ee);return we.set(ve,b.sort?b.sort():[b]),Nt(ve)}}(L):(L instanceof IDBTransaction&&function ft(L){if(re.has(L))return;const b=new Promise((ee,ve)=>{const Le=()=>{L.removeEventListener("complete",Xe),L.removeEventListener("error",W),L.removeEventListener("abort",W)},Xe=()=>{ee(),Le()},W=()=>{ve(L.error||new DOMException("AbortError","AbortError")),Le()};L.addEventListener("complete",Xe),L.addEventListener("error",W),L.addEventListener("abort",W)});re.set(L,b)}(L),ct(L,function bn(){return jt||(jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(L,Fe):L)}function Nt(L){if(L instanceof IDBRequest)return function Sn(L){const b=new Promise((ee,ve)=>{const Le=()=>{L.removeEventListener("success",Xe),L.removeEventListener("error",W)},Xe=()=>{ee(Nt(L.result)),Le()},W=()=>{ve(L.error),Le()};L.addEventListener("success",Xe),L.addEventListener("error",W)});return b.then(ee=>{ee instanceof IDBCursor&&Q.set(ee,L)}).catch(()=>{}),lt.set(b,L),b}(L);if(Qe.has(L))return Qe.get(L);const b=Pn(L);return b!==L&&(Qe.set(L,b),lt.set(b,L)),b}const pt=L=>lt.get(L),qe=["get","getKey","getAll","getAllKeys","count"],_n=["put","add","delete","clear"],K=new Map;function $t(L,b){if(!(L instanceof IDBDatabase)||b in L||"string"!=typeof b)return;if(K.get(b))return K.get(b);const ee=b.replace(/FromIndex$/,""),ve=b!==ee,Le=_n.includes(ee);if(!(ee in(ve?IDBIndex:IDBObjectStore).prototype)||!Le&&!qe.includes(ee))return;const Xe=function(){var W=(0,I.Z)(function*(Yt,...Ie){const Ye=this.transaction(Yt,Le?"readwrite":"readonly");let Ms=Ye.store;return ve&&(Ms=Ms.index(Ie.shift())),(yield Promise.all([Ms[ee](...Ie),Le&&Ye.done]))[0]});return function(Ie){return W.apply(this,arguments)}}();return K.set(b,Xe),Xe}!function ze(L){Fe=L(Fe)}(L=>({...L,get:(b,ee,ve)=>$t(b,ee)||L.get(b,ee,ve),has:(b,ee)=>!!$t(b,ee)||L.has(b,ee)}));class Ot{constructor(b){this.container=b}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function dn(L){const b=L.getComponent();return"VERSION"===b?.type}(ee)){const ve=ee.getImmediate();return`${ve.library}/${ve.version}`}return null}).filter(ee=>ee).join(" ")}}const gi="@firebase/app",st=new U.Yd("@firebase/app"),ei="[DEFAULT]",Ma={[gi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lr=new Map,$i=new Map;function so(L,b){try{L.container.addComponent(b)}catch(ee){st.debug(`Component ${b.name} failed to register with FirebaseApp ${L.name}`,ee)}}function zn(L,b){L.container.addOrOverwriteComponent(b)}function Go(L){const b=L.name;if($i.has(b))return st.debug(`There were multiple attempts to register component ${b}.`),!1;$i.set(b,L);for(const ee of lr.values())so(ee,L);return!0}function kt(L,b){const ee=L.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),L.container.getProvider(b)}function ti(L,b,ee=ei){kt(L,b).clearInstance(ee)}function In(){$i.clear()}const jr=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $r{constructor(b,ee,ve){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=ve,this.container.addComponent(new xe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(b){this.checkDestroyed(),this._automaticDataCollectionEnabled=b}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(b){this._isDeleted=b}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}const ao="10.7.0";function xa(L,b={}){let ee=L;"object"!=typeof b&&(b={name:b});const ve=Object.assign({name:ei,automaticDataCollectionEnabled:!1},b),Le=ve.name;if("string"!=typeof Le||!Le)throw jr.create("bad-app-name",{appName:String(Le)});if(ee||(ee=(0,Ne.aH)()),!ee)throw jr.create("no-options");const Xe=lr.get(Le);if(Xe){if((0,Ne.vZ)(ee,Xe.options)&&(0,Ne.vZ)(ve,Xe.config))return Xe;throw jr.create("duplicate-app",{appName:Le})}const W=new xe.H0(Le);for(const Ie of $i.values())W.addComponent(Ie);const Yt=new $r(ee,ve,W);return lr.set(Le,Yt),Yt}function uo(L=ei){const b=lr.get(L);if(!b&&L===ei&&(0,Ne.aH)())return xa();if(!b)throw jr.create("no-app",{appName:L});return b}function Ss(){return Array.from(lr.values())}function Jn(L){return dr.apply(this,arguments)}function dr(){return(dr=(0,I.Z)(function*(L){const b=L.name;lr.has(b)&&(lr.delete(b),yield Promise.all(L.container.getProviders().map(ee=>ee.delete())),L.isDeleted=!0)})).apply(this,arguments)}function co(L,b,ee){var ve;let Le=null!==(ve=Ma[L])&&void 0!==ve?ve:L;ee&&(Le+=`-${ee}`);const Xe=Le.match(/\s|\//),W=b.match(/\s|\//);if(Xe||W){const Yt=[`Unable to register library "${Le}" with version "${b}":`];return Xe&&Yt.push(`library name "${Le}" contains illegal characters (whitespace or "/")`),Xe&&W&&Yt.push("and"),W&&Yt.push(`version name "${b}" contains illegal characters (whitespace or "/")`),void st.warn(Yt.join(" "))}Go(new xe.wA(`${Le}-version`,()=>({library:Le,version:b}),"VERSION"))}function Rs(L,b){if(null!==L&&"function"!=typeof L)throw jr.create("invalid-log-argument");(0,U.Am)(L,b)}function rc(L){(0,U.Ub)(L)}const Na="firebase-heartbeat-database",Ps=1,D="firebase-heartbeat-store";let T=null;function A(){return T||(T=function At(L,b,{blocked:ee,upgrade:ve,blocking:Le,terminated:Xe}={}){const W=indexedDB.open(L,b),Yt=Nt(W);return ve&&W.addEventListener("upgradeneeded",Ie=>{ve(Nt(W.result),Ie.oldVersion,Ie.newVersion,Nt(W.transaction),Ie)}),ee&&W.addEventListener("blocked",Ie=>ee(Ie.oldVersion,Ie.newVersion,Ie)),Yt.then(Ie=>{Xe&&Ie.addEventListener("close",()=>Xe()),Le&&Ie.addEventListener("versionchange",Ye=>Le(Ye.oldVersion,Ye.newVersion,Ye))}).catch(()=>{}),Yt}(Na,Ps,{upgrade:(L,b)=>{0===b&&L.createObjectStore(D)}}).catch(L=>{throw jr.create("idb-open",{originalErrorMessage:L.message})})),T}function M(){return(M=(0,I.Z)(function*(L){try{return yield(yield A()).transaction(D).objectStore(D).get(Ge(L))}catch(b){if(b instanceof Ne.ZR)st.warn(b.message);else{const ee=jr.create("idb-get",{originalErrorMessage:b?.message});st.warn(ee.message)}}})).apply(this,arguments)}function G(L,b){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,I.Z)(function*(L,b){try{const ve=(yield A()).transaction(D,"readwrite");yield ve.objectStore(D).put(b,Ge(L)),yield ve.done}catch(ee){if(ee instanceof Ne.ZR)st.warn(ee.message);else{const ve=jr.create("idb-set",{originalErrorMessage:ee?.message});st.warn(ve.message)}}})).apply(this,arguments)}function Ge(L){return`${L.name}!${L.options.appId}`}class En{constructor(b){this.container=b,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new wt(ee),this._heartbeatsCachePromise=this._storage.read().then(ve=>(this._heartbeatsCache=ve,ve))}triggerHeartbeat(){var b=this;return(0,I.Z)(function*(){var ee,ve;const Xe=b.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),W=ye();if((null!=(null===(ee=b._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||(b._heartbeatsCache=yield b._heartbeatsCachePromise,null!=(null===(ve=b._heartbeatsCache)||void 0===ve?void 0:ve.heartbeats)))&&b._heartbeatsCache.lastSentHeartbeatDate!==W&&!b._heartbeatsCache.heartbeats.some(Yt=>Yt.date===W))return b._heartbeatsCache.heartbeats.push({date:W,agent:Xe}),b._heartbeatsCache.heartbeats=b._heartbeatsCache.heartbeats.filter(Yt=>{const Ie=new Date(Yt.date).valueOf();return Date.now()-Ie<=2592e6}),b._storage.overwrite(b._heartbeatsCache)})()}getHeartbeatsHeader(){var b=this;return(0,I.Z)(function*(){var ee;if(null===b._heartbeatsCache&&(yield b._heartbeatsCachePromise),null==(null===(ee=b._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===b._heartbeatsCache.heartbeats.length)return"";const ve=ye(),{heartbeatsToSend:Le,unsentEntries:Xe}=function Mn(L,b=1024){const ee=[];let ve=L.slice();for(const Le of L){const Xe=ee.find(W=>W.agent===Le.agent);if(Xe){if(Xe.dates.push(Le.date),yi(ee)>b){Xe.dates.pop();break}}else if(ee.push({agent:Le.agent,dates:[Le.date]}),yi(ee)>b){ee.pop();break}ve=ve.slice(1)}return{heartbeatsToSend:ee,unsentEntries:ve}}(b._heartbeatsCache.heartbeats),W=(0,Ne.L)(JSON.stringify({version:2,heartbeats:Le}));return b._heartbeatsCache.lastSentHeartbeatDate=ve,Xe.length>0?(b._heartbeatsCache.heartbeats=Xe,yield b._storage.overwrite(b._heartbeatsCache)):(b._heartbeatsCache.heartbeats=[],b._storage.overwrite(b._heartbeatsCache)),W})()}}function ye(){return(new Date).toISOString().substring(0,10)}class wt{constructor(b){this.app=b,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var b=this;return(0,I.Z)(function*(){if(yield b._canUseIndexedDBPromise){const ve=yield function q(L){return M.apply(this,arguments)}(b.app);return ve?.heartbeats?ve:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(b){var ee=this;return(0,I.Z)(function*(){var ve;if(yield ee._canUseIndexedDBPromise){const Xe=yield ee.read();return G(ee.app,{lastSentHeartbeatDate:null!==(ve=b.lastSentHeartbeatDate)&&void 0!==ve?ve:Xe.lastSentHeartbeatDate,heartbeats:b.heartbeats})}})()}add(b){var ee=this;return(0,I.Z)(function*(){var ve;if(yield ee._canUseIndexedDBPromise){const Xe=yield ee.read();return G(ee.app,{lastSentHeartbeatDate:null!==(ve=b.lastSentHeartbeatDate)&&void 0!==ve?ve:Xe.lastSentHeartbeatDate,heartbeats:[...Xe.heartbeats,...b.heartbeats]})}})()}}function yi(L){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:L})).length}!function ic(L){Go(new xe.wA("platform-logger",b=>new Ot(b),"PRIVATE")),Go(new xe.wA("heartbeat",b=>new En(b),"PRIVATE")),co(gi,"0.9.24",L),co(gi,"0.9.24","esm2017"),co("fire-js","")}("")},537:(Bi,An,Be)=>{Be.d(An,{H0:()=>bn,wA:()=>U});var I=Be(861),xe=Be(58);class U{constructor(Q,re,we){this.name=Q,this.instanceFactory=re,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const Ne="[DEFAULT]";class ct{constructor(Q,re){this.name=Q,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const re=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(re)){const we=new xe.BH;if(this.instancesDeferred.set(re,we),this.isInitialized(re)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:re});Qe&&we.resolve(Qe)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(Q){var re;const we=this.normalizeInstanceIdentifier(Q?.identifier),Qe=null!==(re=Q?.optional)&&void 0!==re&&re;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(lt){if(Qe)return null;throw lt}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function Qt(Je){return"EAGER"===Je.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch{}for(const[re,we]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(re);try{const lt=this.getOrInitializeService({instanceIdentifier:Qe});we.resolve(lt)}catch{}}}}clearInstance(Q=Ne){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,I.Z)(function*(){const re=Array.from(Q.instances.values());yield Promise.all([...re.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...re.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=Ne){return this.instances.has(Q)}getOptions(Q=Ne){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:re={}}=Q,we=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:we,options:re});for(const[lt,Sn]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(lt)&&Sn.resolve(Qe);return Qe}onInit(Q,re){var we;const Qe=this.normalizeInstanceIdentifier(re),lt=null!==(we=this.onInitCallbacks.get(Qe))&&void 0!==we?we:new Set;lt.add(Q),this.onInitCallbacks.set(Qe,lt);const Sn=this.instances.get(Qe);return Sn&&Q(Sn,Qe),()=>{lt.delete(Q)}}invokeOnInitCallbacks(Q,re){const we=this.onInitCallbacks.get(re);if(we)for(const Qe of we)try{Qe(Q,re)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:re={}}){let we=this.instances.get(Q);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(Je=Q,Je===Ne?void 0:Je),options:re}),this.instances.set(Q,we),this.instancesOptions.set(Q,re),this.invokeOnInitCallbacks(we,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,we)}catch{}var Je;return we||null}normalizeInstanceIdentifier(Q=Ne){return this.component?this.component.multipleInstances?Q:Ne:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bn{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const re=this.getProvider(Q.name);if(re.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);re.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const re=new ct(Q,this);return this.providers.set(Q,re),re}getProviders(){return Array.from(this.providers.values())}}},879:(Bi,An,Be)=>{Be.d(An,{Am:()=>Je,Ub:()=>bn,Yd:()=>Qt,in:()=>xe});const I=[];var xe=function(Q){return Q[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",Q}(xe||{});const U={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Ne=xe.INFO,ct={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},jt=(Q,re,...we)=>{if(re<Q.logLevel)return;const Qe=(new Date).toISOString(),lt=ct[re];if(!lt)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[lt](`[${Qe}]  ${Q.name}:`,...we)};class Qt{constructor(re){this.name=re,this._logLevel=Ne,this._logHandler=jt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in xe))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?U[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...re),this._logHandler(this,xe.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...re),this._logHandler(this,xe.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...re),this._logHandler(this,xe.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...re),this._logHandler(this,xe.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...re),this._logHandler(this,xe.ERROR,...re)}}function bn(Q){I.forEach(re=>{re.setLogLevel(Q)})}function Je(Q,re){for(const we of I){let Qe=null;re&&re.level&&(Qe=U[re.level]),we.userLogHandler=null===Q?null:(lt,Sn,...ft)=>{const Fe=ft.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch{return null}}).filter(ze=>ze).join(" ");Sn>=(Qe??lt.logLevel)&&Q({level:xe[Sn].toLowerCase(),message:Fe,args:ft,type:lt.name})}}}},377:(Bi,An,Be)=>{Be.r(An);var I=Be(861),xe=Be(106),U=Be(58),Ne=Be(534),ct=Be(879),jt=Be(582),Qt=Be(537);const Je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Sn=function Qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ft=function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Fe=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rn=new ct.Yd("@firebase/auth");function Nt(h,...c){Rn.logLevel<=ct.in.ERROR&&Rn.error(`Auth (${Ne.SDK_VERSION}): ${h}`,...c)}function pt(h,...c){throw _n(h,...c)}function At(h,...c){return _n(h,...c)}function ur(h,c,l){const f=Object.assign(Object.assign({},ft()),{[c]:l});return new U.LL("auth","Firebase",f).create(c,{appName:h.name})}function qe(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&pt(h,"argument-error"),ur(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _n(h,...c){if("string"!=typeof h){const l=c[0],f=[...c.slice(1)];return f[0]&&(f[0].appName=h.name),h._errorFactory.create(l,...f)}return Fe.create(h,...c)}function K(h,c,...l){if(!h)throw _n(c,...l)}function $t(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Nt(c),new Error(c)}function Ot(h,c){h||$t(c)}function dn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function gi(){return"http:"===mi()||"https:"===mi()}function mi(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class _i{constructor(c,l){this.shortDelay=c,this.longDelay=l,Ot(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function st(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gi()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function O(h,c){Ot(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class F{static initialize(c,l,f){this.fetchImpl=c,l&&(this.headersImpl=l),f&&(this.responseImpl=f)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void $t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void $t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void $t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const B={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},H=new _i(3e4,6e4);function Y(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function V(h,c,l,f){return de.apply(this,arguments)}function de(){return(de=(0,I.Z)(function*(h,c,l,f,m={}){return rt(h,m,(0,I.Z)(function*(){let y={},w={};f&&("GET"===c?w=f:y={body:JSON.stringify(f)});const P=(0,U.xO)(Object.assign({key:h.config.apiKey},w)).slice(1),z=yield h._getAdditionalHeaders();return z["Content-Type"]="application/json",h.languageCode&&(z["X-Firebase-Locale"]=h.languageCode),F.fetch()(Ht(h,h.config.apiHost,l,P),Object.assign({method:c,headers:z,referrerPolicy:"no-referrer"},y))}))})).apply(this,arguments)}function rt(h,c,l){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,I.Z)(function*(h,c,l){h._canInitEmulator=!1;const f=Object.assign(Object.assign({},B),c);try{const m=new Hn(h),y=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const w=yield y.json();if("needConfirmation"in w)throw yn(h,"account-exists-with-different-credential",w);if(y.ok&&!("errorMessage"in w))return w;{const P=y.ok?w.errorMessage:w.error.message,[z,se]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===z)throw yn(h,"credential-already-in-use",w);if("EMAIL_EXISTS"===z)throw yn(h,"email-already-in-use",w);if("USER_DISABLED"===z)throw yn(h,"user-disabled",w);const me=f[z]||z.toLowerCase().replace(/[_\s]+/g,"-");if(se)throw ur(h,me,se);pt(h,me)}}catch(m){if(m instanceof U.ZR)throw m;pt(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function Te(h,c,l,f){return at.apply(this,arguments)}function at(){return(at=(0,I.Z)(function*(h,c,l,f,m={}){const y=yield V(h,c,l,f,m);return"mfaPendingCredential"in y&&pt(h,"multi-factor-auth-required",{_serverResponse:y}),y})).apply(this,arguments)}function Ht(h,c,l,f){const m=`${c}${l}?${f}`;return h.config.emulator?O(h.config,m):`${h.config.apiScheme}://${m}`}function Rt(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,f)=>{this.timer=setTimeout(()=>f(At(this.auth,"network-request-failed")),H.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yn(h,c,l){const f={appName:h.name};l.email&&(f.email=l.email),l.phoneNumber&&(f.phoneNumber=l.phoneNumber);const m=At(h,c,f);return m.customData._tokenResponse=l,m}function Yn(h){return void 0!==h&&void 0!==h.getResponse}function cr(h){return void 0!==h&&void 0!==h.enterprise}class Tr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return Rt(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function ji(){return(ji=(0,I.Z)(function*(h){return(yield V(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vn(h,c){return As.apply(this,arguments)}function As(){return(As=(0,I.Z)(function*(h,c){return V(h,"GET","/v2/recaptchaConfig",Y(h,c))})).apply(this,arguments)}function ei(){return(ei=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function lr(){return(lr=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function so(){return(so=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function zn(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ti(){return(ti=(0,I.Z)(function*(h,c=!1){const l=(0,U.m9)(h),f=yield l.getIdToken(c),m=bs(f);K(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const y="object"==typeof m.firebase?m.firebase:void 0,w=y?.sign_in_provider;return{claims:m,token:f,authTime:zn(In(m.auth_time)),issuedAtTime:zn(In(m.iat)),expirationTime:zn(In(m.exp)),signInProvider:w||null,signInSecondFactor:y?.sign_in_second_factor||null}})).apply(this,arguments)}function In(h){return 1e3*Number(h)}function bs(h){const[c,l,f]=h.split(".");if(void 0===c||void 0===l||void 0===f)return Nt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,U.tV)(l);return m?JSON.parse(m):(Nt("Failed to decode base64 JWT payload"),null)}catch(m){return Nt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function $r(h,c){return ao.apply(this,arguments)}function ao(){return(ao=(0,I.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(f){throw f instanceof U.ZR&&function xa({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(f)&&h.auth.currentUser===h&&(yield h.auth.signOut()),f}})).apply(this,arguments)}class uo{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const f=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),f}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const f=this.getInterval(c);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),f)}iteration(){var c=this;return(0,I.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Ss{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=zn(this.lastLoginAt),this.creationTime=zn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jn(h){return dr.apply(this,arguments)}function dr(){return dr=(0,I.Z)(function*(h){var c;const l=h.auth,f=yield h.getIdToken(),m=yield $r(h,function $i(h,c){return so.apply(this,arguments)}(l,{idToken:f}));K(m?.users.length,l,"internal-error");const y=m.users[0];h._notifyReloadListener(y);const w=null!==(c=y.providerUserInfo)&&void 0!==c&&c.length?function Na(h){return h.map(c=>{var{providerId:l}=c,f=(0,jt._T)(c,["providerId"]);return{providerId:l,uid:f.rawId||"",displayName:f.displayName||null,email:f.email||null,phoneNumber:f.phoneNumber||null,photoURL:f.photoUrl||null}})}(y.providerUserInfo):[],P=function rc(h,c){return[...h.filter(f=>!c.some(m=>m.providerId===f.providerId)),...c]}(h.providerData,w),me=!!h.isAnonymous&&!(h.email&&y.passwordHash||P?.length),Ee={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:P,metadata:new Ss(y.createdAt,y.lastLoginAt),isAnonymous:me};Object.assign(h,Ee)}),dr.apply(this,arguments)}function Rs(){return(Rs=(0,I.Z)(function*(h){const c=(0,U.m9)(h);yield Jn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function D(){return(D=(0,I.Z)(function*(h,c){const l=yield rt(h,{},(0,I.Z)(function*(){const f=(0,U.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:y}=h.config,w=Ht(h,m,"/v1/token",`key=${y}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(w,{method:"POST",headers:P,body:f})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(h,c){return V(h,"POST","/v2/accounts:revokeToken",Y(h,c))})).apply(this,arguments)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){K(c.idToken,"internal-error"),K(typeof c.idToken<"u","internal-error"),K(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function jr(h){const c=bs(h);return K(c,"internal-error"),K(typeof c.exp<"u","internal-error"),K(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var f=this;return(0,I.Z)(function*(){return K(!f.accessToken||f.refreshToken,c,"user-token-expired"),l||!f.accessToken||f.isExpired?f.refreshToken?(yield f.refresh(c,f.refreshToken),f.accessToken):null:f.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var f=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:y,expiresIn:w}=yield function Ps(h,c){return D.apply(this,arguments)}(c,l);f.updateTokensAndExpiration(m,y,Number(w))})()}updateTokensAndExpiration(c,l,f){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*f}static fromJSON(c,l){const{refreshToken:f,accessToken:m,expirationTime:y}=l,w=new q;return f&&(K("string"==typeof f,"internal-error",{appName:c}),w.refreshToken=f),m&&(K("string"==typeof m,"internal-error",{appName:c}),w.accessToken=m),y&&(K("number"==typeof y,"internal-error",{appName:c}),w.expirationTime=y),w}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return $t("not implemented")}}function M(h,c){K("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class G{constructor(c){var{uid:l,auth:f,stsTokenManager:m}=c,y=(0,jt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=f,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=y.displayName||null,this.email=y.email||null,this.emailVerified=y.emailVerified||!1,this.phoneNumber=y.phoneNumber||null,this.photoURL=y.photoURL||null,this.isAnonymous=y.isAnonymous||!1,this.tenantId=y.tenantId||null,this.providerData=y.providerData?[...y.providerData]:[],this.metadata=new Ss(y.createdAt||void 0,y.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,I.Z)(function*(){const f=yield $r(l,l.stsTokenManager.getToken(l.auth,c));return K(f,l.auth,"internal-error"),l.accessToken!==f&&(l.accessToken=f,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),f})()}getIdTokenResult(c){return function kt(h){return ti.apply(this,arguments)}(this,c)}reload(){return function co(h){return Rs.apply(this,arguments)}(this)}_assign(c){this!==c&&(K(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new G(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var f=this;return(0,I.Z)(function*(){let m=!1;c.idToken&&c.idToken!==f.stsTokenManager.accessToken&&(f.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield Jn(f)),yield f.auth._persistUserIfCurrent(f),m&&f.auth._notifyListenersIfCurrent(f)})()}delete(){var c=this;return(0,I.Z)(function*(){const l=yield c.getIdToken();return yield $r(c,function Pa(h,c){return ei.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var f,m,y,w,P,z,se,me;const Ee=null!==(f=l.displayName)&&void 0!==f?f:void 0,Xt=null!==(m=l.email)&&void 0!==m?m:void 0,si=null!==(y=l.phoneNumber)&&void 0!==y?y:void 0,Zc=null!==(w=l.photoURL)&&void 0!==w?w:void 0,cm=null!==(P=l.tenantId)&&void 0!==P?P:void 0,Ys=null!==(z=l._redirectEventId)&&void 0!==z?z:void 0,Nh=null!==(se=l.createdAt)&&void 0!==se?se:void 0,lm=null!==(me=l.lastLoginAt)&&void 0!==me?me:void 0,{uid:Kc,emailVerified:DI,isAnonymous:Oh,providerData:dm,stsTokenManager:hm}=l;K(Kc&&hm,c,"internal-error");const AI=q.fromJSON(this.name,hm);K("string"==typeof Kc,c,"internal-error"),M(Ee,c.name),M(Xt,c.name),K("boolean"==typeof DI,c,"internal-error"),K("boolean"==typeof Oh,c,"internal-error"),M(si,c.name),M(Zc,c.name),M(cm,c.name),M(Ys,c.name),M(Nh,c.name),M(lm,c.name);const mu=new G({uid:Kc,auth:c,email:Xt,emailVerified:DI,displayName:Ee,isAnonymous:Oh,photoURL:Zc,phoneNumber:si,tenantId:cm,stsTokenManager:AI,createdAt:Nh,lastLoginAt:lm});return dm&&Array.isArray(dm)&&(mu.providerData=dm.map(bA=>Object.assign({},bA))),Ys&&(mu._redirectEventId=Ys),mu}static _fromIdTokenResponse(c,l,f=!1){return(0,I.Z)(function*(){const m=new q;m.updateFromServerResponse(l);const y=new G({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:f});return yield Jn(y),y})()}}const Oe=new Map;function Ge(h){Ot(h instanceof Function,"Expected a class definition");let c=Oe.get(h);return c?(Ot(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Oe.set(h,c),c)}const zt=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,f){var m=this;return(0,I.Z)(function*(){m.storage[l]=f})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=f.storage[l];return void 0===m?null:m})()}_remove(l){var f=this;return(0,I.Z)(function*(){delete f.storage[l]})()}_addListener(l,f){}_removeListener(l,f){}}return h.type="NONE",h})();function En(h,c,l){return`firebase:${h}:${c}:${l}`}class ye{constructor(c,l,f){this.persistence=c,this.auth=l,this.userKey=f;const{config:m,name:y}=this.auth;this.fullUserKey=En(this.userKey,m.apiKey,y),this.fullPersistenceKey=En("persistence",m.apiKey,y),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,I.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?G._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,I.Z)(function*(){if(l.persistence===c)return;const f=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,f?l.setCurrentUser(f):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,f="authUser"){return(0,I.Z)(function*(){if(!l.length)return new ye(Ge(zt),c,f);const m=(yield Promise.all(l.map(function(){var se=(0,I.Z)(function*(me){if(yield me._isAvailable())return me});return function(me){return se.apply(this,arguments)}}()))).filter(se=>se);let y=m[0]||Ge(zt);const w=En(f,c.config.apiKey,c.name);let P=null;for(const se of l)try{const me=yield se._get(w);if(me){const Ee=G._fromJSON(c,me);se!==y&&(P=Ee),y=se;break}}catch{}const z=m.filter(se=>se._shouldAllowMigration);return y._shouldAllowMigration&&z.length?(y=z[0],P&&(yield y._set(w,P.toJSON())),yield Promise.all(l.map(function(){var se=(0,I.Z)(function*(me){if(me!==y)try{yield me._remove(w)}catch{}});return function(me){return se.apply(this,arguments)}}())),new ye(y,c,f)):new ye(y,c,f)})()}}function Mn(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(L(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(wt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ee(c))return"Blackberry";if(ve(c))return"Webos";if(yi(c))return"Safari";if((c.includes("chrome/")||ic(c))&&!c.includes("edge/"))return"Chrome";if(b(c))return"Android";{const f=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===f?.length)return f[1]}return"Other"}function wt(h=(0,U.z$)()){return/firefox\//i.test(h)}function yi(h=(0,U.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function ic(h=(0,U.z$)()){return/crios\//i.test(h)}function L(h=(0,U.z$)()){return/iemobile/i.test(h)}function b(h=(0,U.z$)()){return/android/i.test(h)}function ee(h=(0,U.z$)()){return/blackberry/i.test(h)}function ve(h=(0,U.z$)()){return/webos/i.test(h)}function Le(h=(0,U.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function Ie(h=(0,U.z$)()){return Le(h)||b(h)||ve(h)||ee(h)||/windows phone/i.test(h)||L(h)}function Ms(h,c=[]){let l;switch(h){case"Browser":l=Mn((0,U.z$)());break;case"Worker":l=`${Mn((0,U.z$)())}-${h}`;break;default:l=h}const f=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Ne.SDK_VERSION}/${f}`}class zD{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const f=y=>new Promise((w,P)=>{try{w(c(y))}catch(z){P(z)}});f.onAbort=l,this.queue.push(f);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===c)return;const f=[];try{for(const m of l.queue)yield m(c),m.onAbort&&f.push(m.onAbort)}catch(m){f.reverse();for(const y of f)try{y()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function Oa(){return(Oa=(0,I.Z)(function*(h,c={}){return V(h,"GET","/v2/passwordPolicy",Y(h,c))})).apply(this,arguments)}class qD{constructor(c){var l,f,m,y;const w=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=w.minPasswordLength)&&void 0!==l?l:6,w.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=w.maxPasswordLength),void 0!==w.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=w.containsLowercaseCharacter),void 0!==w.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=w.containsUppercaseCharacter),void 0!==w.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=w.containsNumericCharacter),void 0!==w.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=w.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(f=c.allowedNonAlphanumericCharacters)||void 0===f?void 0:f.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(y=c.forceUpgradeOnSignin)&&void 0!==y&&y,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,f,m,y,w,P;const z={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,z),this.validatePasswordCharacterOptions(c,z),z.isValid&&(z.isValid=null===(l=z.meetsMinPasswordLength)||void 0===l||l),z.isValid&&(z.isValid=null===(f=z.meetsMaxPasswordLength)||void 0===f||f),z.isValid&&(z.isValid=null===(m=z.containsLowercaseLetter)||void 0===m||m),z.isValid&&(z.isValid=null===(y=z.containsUppercaseLetter)||void 0===y||y),z.isValid&&(z.isValid=null===(w=z.containsNumericCharacter)||void 0===w||w),z.isValid&&(z.isValid=null===(P=z.containsNonAlphanumericCharacter)||void 0===P||P),z}validatePasswordLengthOptions(c,l){const f=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;f&&(l.meetsMinPasswordLength=c.length>=f),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let f;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)f=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,f>="a"&&f<="z",f>="A"&&f<="Z",f>="0"&&f<="9",this.allowedNonAlphanumericCharacters.includes(f))}updatePasswordCharacterOptionsStatuses(c,l,f,m,y){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=f)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=y))}}class Tv{constructor(c,l,f,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lo(this),this.idTokenSubscription=new lo(this),this.beforeStateQueue=new zD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var f=this;return l&&(this._popupRedirectResolver=Ge(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,y;if(!f._deleted&&(f.persistenceManager=yield ye.create(f,c),!f._deleted)){if(null!==(m=f._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield f._popupRedirectResolver._initialize(f)}catch{}yield f.initializeCurrentUser(l),f.lastNotifiedUid=(null===(y=f.currentUser)||void 0===y?void 0:y.uid)||null,!f._deleted&&(f._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,I.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,I.Z)(function*(){var f;const m=yield l.assertedPersistence.getCurrentUser();let y=m,w=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(f=l.redirectUser)||void 0===f?void 0:f._redirectEventId,z=y?._redirectEventId,se=yield l.tryRedirectSignIn(c);(!P||P===z)&&se?.user&&(y=se.user,w=!0)}if(!y)return l.directlySetCurrentUser(null);if(!y._redirectEventId){if(w)try{yield l.beforeStateQueue.runMiddleware(y)}catch(P){y=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return y?l.reloadAndSetCurrentUserOrClear(y):l.directlySetCurrentUser(null)}return K(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===y._redirectEventId?l.directlySetCurrentUser(y):l.reloadAndSetCurrentUserOrClear(y)})()}tryRedirectSignIn(c){var l=this;return(0,I.Z)(function*(){let f=null;try{f=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return f})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,I.Z)(function*(){try{yield Jn(c)}catch(f){if("auth/network-request-failed"!==f?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function qo(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,I.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,I.Z)(function*(){const f=c?(0,U.m9)(c):null;return f&&K(f.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(f&&f._clone(l))})()}_updateCurrentUser(c,l=!1){var f=this;return(0,I.Z)(function*(){if(!f._deleted)return c&&K(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),l||(yield f.beforeStateQueue.runMiddleware(c)),f.queue((0,I.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,I.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence(Ge(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const f=l._getPasswordPolicyInternal();return f.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):f.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,I.Z)(function*(){const l=yield function wv(h){return Oa.apply(this,arguments)}(c),f=new qD(l);null===c.tenantId?c._projectPasswordPolicy=f:c._tenantPasswordPolicies[c.tenantId]=f})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new U.LL("auth","Firebase",c())}onAuthStateChanged(c,l,f){return this.registerStateListener(this.authStateSubscription,c,l,f)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,f){return this.registerStateListener(this.idTokenSubscription,c,l,f)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const f=this.onAuthStateChanged(()=>{f(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,I.Z)(function*(){if(l.currentUser){const f=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:f};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function T(h,c){return A.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var f=this;return(0,I.Z)(function*(){const m=yield f.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const f=c&&Ge(c)||l._popupRedirectResolver;K(f,l,"argument-error"),l.redirectPersistenceManager=yield ye.create(l,[Ge(f._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,I.Z)(function*(){var f,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(f=l._currentUser)||void 0===f?void 0:f._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,I.Z)(function*(){if(c===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const f=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==f&&(this.lastNotifiedUid=f,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,f,m){if(this._deleted)return()=>{};const y="function"==typeof l?l:l.next.bind(l);let w=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(P,this,"internal-error"),P.then(()=>{w||y(this.currentUser)}),"function"==typeof l){const z=c.addObserver(l,f,m);return()=>{w=!0,z()}}{const z=c.addObserver(l);return()=>{w=!0,z()}}}directlySetCurrentUser(c){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Ms(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,I.Z)(function*(){var l;const f={"X-Client-Version":c.clientVersion};c.app.options.appId&&(f["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(f["X-Firebase-Client"]=m);const y=yield c._getAppCheckToken();return y&&(f["X-Firebase-AppCheck"]=y),f})()}_getAppCheckToken(){var c=this;return(0,I.Z)(function*(){var l;const f=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return f?.error&&function Pn(h,...c){Rn.logLevel<=ct.in.WARN&&Rn.warn(`Auth (${Ne.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${f.error}`),f?.token})()}}function Ft(h){return(0,U.m9)(h)}class lo{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,U.ne)(l=>this.observer=l)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kp(h){return new Promise((c,l)=>{const f=document.createElement("script");f.setAttribute("src",h),f.onload=c,f.onerror=m=>{const y=At("internal-error");y.customData=m,l(y)},f.type="text/javascript",f.charset="UTF-8",function GD(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(f)})}function Cv(h){return`__${h}${Math.floor(1e6*Math.random())}`}class Qp{constructor(c){this.type="recaptcha-enterprise",this.auth=Ft(c)}verify(c="verify",l=!1){var f=this;return(0,I.Z)(function*(){function y(){return y=(0,I.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var z=(0,I.Z)(function*(se,me){vn(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ee=>{if(void 0!==Ee.recaptchaKey){const Xt=new Tr(Ee);return null==P.tenantId?P._agentRecaptchaConfig=Xt:P._tenantRecaptchaConfigs[P.tenantId]=Xt,se(Xt.siteKey)}me(new Error("recaptcha Enterprise site key undefined"))}).catch(Ee=>{me(Ee)})});return function(se,me){return z.apply(this,arguments)}}())}),y.apply(this,arguments)}function w(P,z,se){const me=window.grecaptcha;cr(me)?me.enterprise.ready(()=>{me.enterprise.execute(P,{action:c}).then(Ee=>{z(Ee)}).catch(()=>{z("NO_RECAPTCHA")})}):se(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,z)=>{(function m(P){return y.apply(this,arguments)})(f.auth).then(se=>{if(!l&&cr(window.grecaptcha))w(se,P,z);else{if(typeof window>"u")return void z(new Error("RecaptchaVerifier is only supported in browser"));Kp("https://www.google.com/recaptcha/enterprise.js?render="+se).then(()=>{w(se,P,z)}).catch(me=>{z(me)})}}).catch(se=>{z(se)})})})()}}function Av(h,c,l){return hr.apply(this,arguments)}function hr(){return(hr=(0,I.Z)(function*(h,c,l,f=!1){const m=new Qp(h);let y;try{y=yield m.verify(l)}catch{y=yield m.verify(l,!0)}const w=Object.assign({},c);return Object.assign(w,f?{captchaResp:y}:{captchaResponse:y}),Object.assign(w,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(w,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),w})).apply(this,arguments)}function Pe(h,c,l,f){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,I.Z)(function*(h,c,l,f){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const y=yield Av(h,c,l,"getOobCode"===l);return f(h,y)}return f(h,c).catch(function(){var y=(0,I.Z)(function*(w){if("auth/missing-recaptcha-token"===w.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield Av(h,c,l,"getOobCode"===l);return f(h,P)}return Promise.reject(w)});return function(w){return y.apply(this,arguments)}}())}),Yp.apply(this,arguments)}function ka(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function Sd(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class Hi{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return $t("not implemented")}_getIdTokenResponse(c){return $t("not implemented")}_linkToIdToken(c,l){return $t("not implemented")}_getReauthenticationResolver(c){return $t("not implemented")}}function Fa(h,c){return La.apply(this,arguments)}function La(){return(La=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:resetPassword",Y(h,c))})).apply(this,arguments)}function Rd(){return(Rd=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function et(h,c){return Va.apply(this,arguments)}function Va(){return(Va=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function qn(){return(qn=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:update",Y(h,c))})).apply(this,arguments)}function tg(h,c){return ng.apply(this,arguments)}function ng(){return(ng=(0,I.Z)(function*(h,c){return Te(h,"POST","/v1/accounts:signInWithPassword",Y(h,c))})).apply(this,arguments)}function mt(h,c){return rg.apply(this,arguments)}function rg(){return(rg=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:sendOobCode",Y(h,c))})).apply(this,arguments)}function he(){return(he=(0,I.Z)(function*(h,c){return mt(h,c)})).apply(this,arguments)}function Pd(h,c){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,I.Z)(function*(h,c){return mt(h,c)})).apply(this,arguments)}function ig(h,c){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,I.Z)(function*(h,c){return mt(h,c)})).apply(this,arguments)}function ja(){return(ja=(0,I.Z)(function*(h,c){return mt(h,c)})).apply(this,arguments)}function og(){return(og=(0,I.Z)(function*(h,c){return Te(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}function sg(){return(sg=(0,I.Z)(function*(h,c){return Te(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}class oc extends Hi{constructor(c,l,f,m=null){super("password",f),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new oc(c,l,"password")}static _fromEmailAndCode(c,l,f=null){return new oc(c,l,"emailLink",f)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return Pe(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",tg);case"emailLink":return function JD(h,c){return og.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:pt(c,"internal-error")}})()}_linkToIdToken(c,l){var f=this;return(0,I.Z)(function*(){switch(f.signInMethod){case"password":return Pe(c,{idToken:l,returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",et);case"emailLink":return function XD(h,c){return sg.apply(this,arguments)}(c,{idToken:l,email:f._email,oobCode:f._password});default:pt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Dr(h,c){return $a.apply(this,arguments)}function $a(){return($a=(0,I.Z)(function*(h,c){return Te(h,"POST","/v1/accounts:signInWithIdp",Y(h,c))})).apply(this,arguments)}class vi extends Hi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new vi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):pt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:f,signInMethod:m}=l,y=(0,jt._T)(l,["providerId","signInMethod"]);if(!f||!m)return null;const w=new vi(f,m);return w.idToken=y.idToken||void 0,w.accessToken=y.accessToken||void 0,w.secret=y.secret,w.nonce=y.nonce,w.pendingToken=y.pendingToken||null,w}_getIdTokenResponse(c){return Dr(c,this.buildRequest())}_linkToIdToken(c,l){const f=this.buildRequest();return f.idToken=l,Dr(c,f)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Dr(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,U.xO)(l)}return c}}function Md(){return(Md=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:sendVerificationCode",Y(h,c))})).apply(this,arguments)}function ho(){return(ho=(0,I.Z)(function*(h,c){return Te(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c))})).apply(this,arguments)}function Ii(){return(Ii=(0,I.Z)(function*(h,c){const l=yield Te(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c));if(l.temporaryProof)throw yn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const xv={USER_NOT_FOUND:"user-not-found"};function ac(){return(ac=(0,I.Z)(function*(h,c){return Te(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),xv)})).apply(this,arguments)}class fe extends Hi{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new fe({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new fe({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function ag(h,c){return ho.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function Mv(h,c){return Ii.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function ie(h,c){return ac.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:f,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:f,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:y}=c;return f||l||m||y?new fe({verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:y}):null}}class zi{constructor(c){var l,f,m,y,w,P;const z=(0,U.zd)((0,U.pd)(c)),se=null!==(l=z.apiKey)&&void 0!==l?l:null,me=null!==(f=z.oobCode)&&void 0!==f?f:null,Ee=function uc(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=z.mode)&&void 0!==m?m:null);K(se&&me&&Ee,"argument-error"),this.apiKey=se,this.operation=Ee,this.code=me,this.continueUrl=null!==(y=z.continueUrl)&&void 0!==y?y:null,this.languageCode=null!==(w=z.languageCode)&&void 0!==w?w:null,this.tenantId=null!==(P=z.tenantId)&&void 0!==P?P:null}static parseLink(c){const l=function xd(h){const c=(0,U.zd)((0,U.pd)(h)).link,l=c?(0,U.zd)((0,U.pd)(c)).deep_link_id:null,f=(0,U.zd)((0,U.pd)(h)).deep_link_id;return(f?(0,U.zd)((0,U.pd)(f)).link:null)||f||l||c||h}(c);try{return new zi(l)}catch{return null}}}let Nd=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,f){return oc._fromEmailAndPassword(l,f)}static credentialWithLink(l,f){const m=zi.parseLink(f);return K(m,"argument-error"),oc._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class qi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class fr extends qi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Gi extends fr{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return K("providerId"in l&&"signInMethod"in l,"argument-error"),vi._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return K(c.idToken||c.accessToken,"argument-error"),vi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Gi.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Gi.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:f,oauthTokenSecret:m,pendingToken:y,nonce:w,providerId:P}=c;if(!f&&!m&&!l&&!y||!P)return null;try{return new Gi(P)._credential({idToken:l,accessToken:f,nonce:w,pendingToken:y})}catch{return null}}}let Hr=(()=>{class h extends fr{constructor(){super("facebook.com")}static credential(l){return vi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),ri=(()=>{class h extends fr{constructor(){super("google.com"),this.addScope("profile")}static credential(l,f){return vi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:f,oauthAccessToken:m}=l;if(!f&&!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),ut=(()=>{class h extends fr{constructor(){super("github.com")}static credential(l){return vi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class fo extends Hi{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return Dr(c,this.buildRequest())}_linkToIdToken(c,l){const f=this.buildRequest();return f.idToken=l,Dr(c,f)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Dr(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:f,signInMethod:m,pendingToken:y}=l;return f&&m&&y&&f===m?new fo(f,y):null}static _create(c,l){return new fo(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ha extends qi{constructor(c){K(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Ha.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Ha.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=fo.fromJSON(c);return K(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:f}=c;if(!l||!f)return null;try{return fo._create(f,l)}catch{return null}}}let Ei=(()=>{class h extends fr{constructor(){super("twitter.com")}static credential(l,f){return vi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:f,oauthTokenSecret:m}=l;if(!f||!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function xs(h,c){return lc.apply(this,arguments)}function lc(){return(lc=(0,I.Z)(function*(h,c){return Te(h,"POST","/v1/accounts:signUp",Y(h,c))})).apply(this,arguments)}class Ar{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,f,m=!1){return(0,I.Z)(function*(){const y=yield G._fromIdTokenResponse(c,f,m),w=dc(f);return new Ar({user:y,providerId:w,_tokenResponse:f,operationType:l})})()}static _forOperation(c,l,f){return(0,I.Z)(function*(){yield c._updateTokensIfNecessary(f,!0);const m=dc(f);return new Ar({user:c,providerId:m,_tokenResponse:f,operationType:l})})()}}function dc(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function hc(){return(hc=(0,I.Z)(function*(h){var c;const l=Ft(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new Ar({user:l.currentUser,providerId:null,operationType:"signIn"});const f=yield xs(l,{returnSecureToken:!0}),m=yield Ar._fromIdTokenResponse(l,"signIn",f,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class po extends U.ZR{constructor(c,l,f,m){var y;super(l.code,l.message),this.operationType=f,this.user=m,Object.setPrototypeOf(this,po.prototype),this.customData={appName:c.name,tenantId:null!==(y=c.tenantId)&&void 0!==y?y:void 0,_serverResponse:l.customData._serverResponse,operationType:f}}static _fromErrorAndOperation(c,l,f,m){return new po(c,l,f,m)}}function kd(h,c,l,f){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(y=>{throw"auth/multi-factor-auth-required"===y.code?po._fromErrorAndOperation(h,y,c,f):y})}function Fd(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function fc(){return fc=(0,I.Z)(function*(h,c){const l=(0,U.m9)(h);yield pr(!0,l,c);const{providerUserInfo:f}=yield function Ma(h,c){return lr.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=Fd(f||[]);return l.providerData=l.providerData.filter(y=>m.has(y.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),fc.apply(this,arguments)}function Ld(h,c){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,I.Z)(function*(h,c,l=!1){const f=yield $r(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return Ar._forOperation(h,"link",f)})).apply(this,arguments)}function pr(h,c,l){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,I.Z)(function*(h,c,l){yield Jn(c);const m=!1===h?"provider-already-linked":"no-such-provider";K(Fd(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function Bd(h,c){return jd.apply(this,arguments)}function jd(){return(jd=(0,I.Z)(function*(h,c,l=!1){const{auth:f}=h,m="reauthenticate";try{const y=yield $r(h,kd(f,m,c,h),l);K(y.idToken,f,"internal-error");const w=bs(y.idToken);K(w,f,"internal-error");const{sub:P}=w;return K(h.uid===P,f,"user-mismatch"),Ar._forOperation(h,m,y)}catch(y){throw"auth/user-not-found"===y?.code&&pt(f,"user-mismatch"),y}})).apply(this,arguments)}function cg(h,c){return $d.apply(this,arguments)}function $d(){return($d=(0,I.Z)(function*(h,c,l=!1){const f="signIn",m=yield kd(h,f,c),y=yield Ar._fromIdTokenResponse(h,f,m);return l||(yield h._updateCurrentUser(y.user)),y})).apply(this,arguments)}function pc(h,c){return gc.apply(this,arguments)}function gc(){return(gc=(0,I.Z)(function*(h,c){return cg(Ft(h),c)})).apply(this,arguments)}function lg(h,c){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,I.Z)(function*(h,c){const l=(0,U.m9)(h);return yield pr(!1,l,c.providerId),Ld(l,c)})).apply(this,arguments)}function dg(h,c){return br.apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(h,c){return Bd((0,U.m9)(h),c)})).apply(this,arguments)}function zd(){return(zd=(0,I.Z)(function*(h,c){return Te(h,"POST","/v1/accounts:signInWithCustomToken",Y(h,c))})).apply(this,arguments)}function ii(){return ii=(0,I.Z)(function*(h,c){const l=Ft(h),f=yield function Ov(h,c){return zd.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield Ar._fromIdTokenResponse(l,"signIn",f);return yield l._updateCurrentUser(m.user),m}),ii.apply(this,arguments)}class za{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?mc._fromServerResponse(c,l):"totpInfo"in l?xn._fromServerResponse(c,l):pt(c,"internal-error")}}class mc extends za{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new mc(l)}}class xn extends za{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new xn(l)}}function Nn(h,c,l){var f;K((null===(f=l.url)||void 0===f?void 0:f.length)>0,h,"invalid-continue-uri"),K(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(K(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(K(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function tt(h){return hn.apply(this,arguments)}function hn(){return(hn=(0,I.Z)(function*(h){const c=Ft(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function go(){return(go=(0,I.Z)(function*(h,c,l){const f=Ft(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Nn(f,m,l),yield Pe(f,m,"getOobCode",Pd)})).apply(this,arguments)}function _c(){return _c=(0,I.Z)(function*(h,c,l){yield Fa((0,U.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&tt(h),m});return function(m){return f.apply(this,arguments)}}())}),_c.apply(this,arguments)}function Ns(){return Ns=(0,I.Z)(function*(h,c){yield function eg(h,c){return qn.apply(this,arguments)}((0,U.m9)(h),{oobCode:c})}),Ns.apply(this,arguments)}function fg(h,c){return qd.apply(this,arguments)}function qd(){return(qd=(0,I.Z)(function*(h,c){const l=(0,U.m9)(h),f=yield Fa(l,{oobCode:c}),m=f.requestType;switch(K(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(f.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(f.mfaInfo,l,"internal-error");default:K(f.email,l,"internal-error")}let y=null;return f.mfaInfo&&(y=za._fromServerResponse(Ft(l),f.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.newEmail:f.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.email:f.newEmail)||null,multiFactorInfo:y},operation:m}})).apply(this,arguments)}function ce(){return(ce=(0,I.Z)(function*(h,c){const{data:l}=yield fg((0,U.m9)(h),c);return l.email})).apply(this,arguments)}function bt(){return(bt=(0,I.Z)(function*(h,c,l){const f=Ft(h),w=yield Pe(f,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xs).catch(z=>{throw"auth/password-does-not-meet-requirements"===z.code&&tt(h),z}),P=yield Ar._fromIdTokenResponse(f,"signIn",w);return yield f._updateCurrentUser(P.user),P})).apply(this,arguments)}function wn(){return(wn=(0,I.Z)(function*(h,c,l){const f=Ft(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function y(w,P){K(P.handleCodeInApp,f,"argument-error"),P&&Nn(f,w,P)})(m,l),yield Pe(f,m,"getOobCode",ig)})).apply(this,arguments)}function wi(){return(wi=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h),m=Nd.credentialWithLink(c,l||dn());return K(m._tenantId===(f.tenantId||null),f,"tenant-id-mismatch"),pc(f,m)})).apply(this,arguments)}function ke(){return(ke=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:createAuthUri",Y(h,c))})).apply(this,arguments)}function yc(){return yc=(0,I.Z)(function*(h,c){const f={identifier:c,continueUri:gi()?dn():"http://localhost"},{signinMethods:m}=yield function ks(h,c){return ke.apply(this,arguments)}((0,U.m9)(h),f);return m||[]}),yc.apply(this,arguments)}function qt(){return qt=(0,I.Z)(function*(h,c){const l=(0,U.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&Nn(l.auth,m,c);const{email:y}=yield function YD(h,c){return he.apply(this,arguments)}(l.auth,m);y!==h.email&&(yield h.reload())}),qt.apply(this,arguments)}function mo(){return mo=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h),y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&Nn(f.auth,y,l);const{email:w}=yield function Rv(h,c){return ja.apply(this,arguments)}(f.auth,y);w!==h.email&&(yield h.reload())}),mo.apply(this,arguments)}function Wo(){return(Wo=(0,I.Z)(function*(h,c){return V(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ci(){return Ci=(0,I.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const f=(0,U.m9)(h),y={idToken:yield f.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},w=yield $r(f,function Ti(h,c){return Wo.apply(this,arguments)}(f.auth,y));f.displayName=w.displayName||null,f.photoURL=w.photoUrl||null;const P=f.providerData.find(({providerId:z})=>"password"===z);P&&(P.displayName=f.displayName,P.photoURL=f.photoURL),yield f._updateTokensIfNecessary(w)}),Ci.apply(this,arguments)}function Ls(h,c,l){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,I.Z)(function*(h,c,l){const{auth:f}=h,y={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(y.email=c),l&&(y.password=l);const w=yield $r(h,function Xp(h,c){return Rd.apply(this,arguments)}(f,y));yield h._updateTokensIfNecessary(w,!0)}),Ke.apply(this,arguments)}class _o{constructor(c,l,f={}){this.isNewUser=c,this.providerId=l,this.profile=f}}class Gd extends _o{constructor(c,l,f,m){super(c,l,f),this.username=m}}class Di extends _o{constructor(c,l){super(c,"facebook.com",l)}}class vc extends Gd{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class Vs extends _o{constructor(c,l){super(c,"google.com",l)}}class Ka extends Gd{constructor(c,l,f){super(c,"twitter.com",l,f)}}function On(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function tA(h){var c,l;if(!h)return null;const{providerId:f}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},y=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!f&&h?.idToken){const w=null===(l=null===(c=bs(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(w)return new _o(y,"anonymous"!==w&&"custom"!==w?w:null)}if(!f)return null;switch(f){case"facebook.com":return new Di(y,m);case"github.com":return new vc(y,m);case"google.com":return new Vs(y,m);case"twitter.com":return new Ka(y,m,h.screenName||null);case"custom":case"anonymous":return new _o(y,null);default:return new _o(y,f,m)}}(l)}class Us{constructor(c,l,f){this.type=c,this.credential=l,this.user=f}static _fromIdtoken(c,l){return new Us("enroll",c,l)}static _fromMfaPendingCredential(c){return new Us("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,f;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return Us._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.idToken)return Us._fromIdtoken(c.multiFactorSession.idToken)}return null}}class mg{constructor(c,l,f){this.session=c,this.hints=l,this.signInResolver=f}static _fromError(c,l){const f=Ft(c),m=l.customData._serverResponse,y=(m.mfaInfo||[]).map(P=>za._fromServerResponse(f,P));K(m.mfaPendingCredential,f,"internal-error");const w=Us._fromMfaPendingCredential(m.mfaPendingCredential);return new mg(w,y,function(){var P=(0,I.Z)(function*(z){const se=yield z._process(f,w);delete m.mfaInfo,delete m.mfaPendingCredential;const me=Object.assign(Object.assign({},m),{idToken:se.idToken,refreshToken:se.refreshToken});switch(l.operationType){case"signIn":const Ee=yield Ar._fromIdTokenResponse(f,l.operationType,me);return yield f._updateCurrentUser(Ee.user),Ee;case"reauthenticate":return K(l.user,f,"internal-error"),Ar._forOperation(l.user,l.operationType,me);default:pt(f,"internal-error")}});return function(z){return P.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,I.Z)(function*(){return l.signInResolver(c)})()}}class _g{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(f=>za._fromServerResponse(c.auth,f)))})}static _fromUser(c){return new _g(c)}getSession(){var c=this;return(0,I.Z)(function*(){return Us._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var f=this;return(0,I.Z)(function*(){const m=c,y=yield f.getSession(),w=yield $r(f.user,m._process(f.user.auth,y,l));return yield f.user._updateTokensIfNecessary(w),f.user.reload()})()}unenroll(c){var l=this;return(0,I.Z)(function*(){const f="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const y=yield $r(l.user,function cA(h,c){return V(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Y(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:f}));l.enrolledFactors=l.enrolledFactors.filter(({uid:w})=>w!==f),yield l.user._updateTokensIfNecessary(y),yield l.user.reload()}catch(y){throw y}})()}}const yg=new WeakMap,Zd="__sak";class Kd{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Zd,"1"),this.storage.removeItem(Zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const bi=(()=>{class h extends Kd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,f)=>this.onStorageEvent(l,f),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vg(){const h=(0,U.z$)();return yi(h)||Le(h)}()&&function Ye(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ie(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const f of Object.keys(this.listeners)){const m=this.storage.getItem(f),y=this.localCache[f];m!==y&&l(f,y,m)}}onStorageEvent(l,f=!1){if(!l.key)return void this.forAllChangedKeys((P,z,se)=>{this.notifyListeners(P,se)});const m=l.key;if(f?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!f)return}const y=()=>{const P=this.storage.getItem(m);!f&&this.localCache[m]===P||this.notifyListeners(m,P)},w=this.storage.getItem(m);!function Yt(){return(0,U.w1)()&&10===document.documentMode}()||w===l.newValue||l.newValue===l.oldValue?y():setTimeout(y,10)}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const y of Array.from(m))y(f&&JSON.parse(f))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,f,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:f,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,f){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,f){var m=()=>super._set,y=this;return(0,I.Z)(function*(){yield m().call(y,l,f),y.localCache[l]=JSON.stringify(f)})()}_get(l){var f=()=>super._get,m=this;return(0,I.Z)(function*(){const y=yield f().call(m,l);return m.localCache[l]=JSON.stringify(y),y})()}_remove(l){var f=()=>super._remove,m=this;return(0,I.Z)(function*(){yield f().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),Qo=(()=>{class h extends Kd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,f){}_removeListener(l,f){}}return h.type="SESSION",h})();let kn=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const f=this.receivers.find(y=>y.isListeningto(l));if(f)return f;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var f=this;return(0,I.Z)(function*(){const m=l,{eventId:y,eventType:w,data:P}=m.data,z=f.handlersMap[w];if(!z?.size)return;m.ports[0].postMessage({status:"ack",eventId:y,eventType:w});const se=Array.from(z).map(function(){var Ee=(0,I.Z)(function*(Xt){return Xt(m.origin,P)});return function(Xt){return Ee.apply(this,arguments)}}()),me=yield function fA(h){return Promise.all(h.map(function(){var c=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(f){return{fulfilled:!1,reason:f}}});return function(l){return c.apply(this,arguments)}}()))}(se);m.ports[0].postMessage({status:"done",eventId:y,eventType:w,response:me})})()}_subscribe(l,f){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(f)}_unsubscribe(l,f){this.handlersMap[l]&&f&&this.handlersMap[l].delete(f),(!f||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function yo(h="",c=10){let l="";for(let f=0;f<c;f++)l+=Math.floor(10*Math.random());return h+l}class zr{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,f=50){var m=this;return(0,I.Z)(function*(){const y=typeof MessageChannel<"u"?new MessageChannel:null;if(!y)throw new Error("connection_unavailable");let w,P;return new Promise((z,se)=>{const me=yo("",20);y.port1.start();const Ee=setTimeout(()=>{se(new Error("unsupported_event"))},f);P={messageChannel:y,onMessage(Xt){const si=Xt;if(si.data.eventId===me)switch(si.data.status){case"ack":clearTimeout(Ee),w=setTimeout(()=>{se(new Error("timeout"))},3e3);break;case"done":clearTimeout(w),z(si.data.response);break;default:clearTimeout(Ee),clearTimeout(w),se(new Error("invalid_response"))}}},m.handlers.add(P),y.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:c,eventId:me,data:l},[y.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function on(){return window}function Ec(){return typeof on().WorkerGlobalScope<"u"&&"function"==typeof on().importScripts}function Ya(){return(Ya=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wc="firebaseLocalStorageDb",Ja="firebaseLocalStorage",Yd="fbase_key";class vo{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Io(h,c){return h.transaction([Ja],c?"readwrite":"readonly").objectStore(Ja)}function Tc(){const h=indexedDB.open(wc,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const f=h.result;try{f.createObjectStore(Ja,{keyPath:Yd})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const f=h.result;f.objectStoreNames.contains(Ja)?c(f):(f.close(),yield function Bs(){const h=indexedDB.deleteDatabase(wc);return new vo(h).toPromise()}(),c(yield Tc()))}))})}function Fv(h,c,l){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,I.Z)(function*(h,c,l){const f=Io(h,!0).put({[Yd]:c,value:l});return new vo(f).toPromise()})).apply(this,arguments)}function Jd(){return(Jd=(0,I.Z)(function*(h,c){const l=Io(h,!1).get(c),f=yield new vo(l).toPromise();return void 0===f?null:f.value})).apply(this,arguments)}function Dg(h,c){const l=Io(h,!0).delete(c);return new vo(l).toPromise()}const js=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield Tc()),l.db})()}_withRetries(l){var f=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const y=yield f._openDb();return yield l(y)}catch(y){if(m++>3)throw y;f.db&&(f.db.close(),f.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return Ec()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=kn._getInstance(function Qd(){return Ec()?self:null}()),l.receiver._subscribe("keyChanged",function(){var f=(0,I.Z)(function*(m,y){return{keyProcessed:(yield l._poll()).includes(y.key)}});return function(m,y){return f.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var f=(0,I.Z)(function*(m,y){return["keyChanged"]});return function(m,y){return f.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var f,m;if(l.activeServiceWorker=yield function Eg(){return Ya.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new zr(l.activeServiceWorker);const y=yield l.sender._send("ping",{},800);y&&null!==(f=y[0])&&void 0!==f&&f.fulfilled&&null!==(m=y[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var f=this;return(0,I.Z)(function*(){if(f.sender&&f.activeServiceWorker&&function wg(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===f.activeServiceWorker)try{yield f.sender._send("keyChanged",{key:l},f.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield Tc();return yield Fv(l,Zd,"1"),yield Dg(l,Zd),!0}catch{}return!1})()}_withPendingWrite(l){var f=this;return(0,I.Z)(function*(){f.pendingWrites++;try{yield l()}finally{f.pendingWrites--}})()}_set(l,f){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(y=>Fv(y,l,f)),m.localCache[l]=f,m.notifyServiceWorker(l)}))})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=yield f._withRetries(y=>function pA(h,c){return Jd.apply(this,arguments)}(y,l));return f.localCache[l]=m,m})()}_remove(l){var f=this;return(0,I.Z)(function*(){return f._withPendingWrite((0,I.Z)(function*(){return yield f._withRetries(m=>Dg(m,l)),delete f.localCache[l],f.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const f=yield l._withRetries(w=>{const P=Io(w,!1).getAll();return new vo(P).toPromise()});if(!f)return[];if(0!==l.pendingWrites)return[];const m=[],y=new Set;for(const{fbase_key:w,value:P}of f)y.add(w),JSON.stringify(l.localCache[w])!==JSON.stringify(P)&&(l.notifyListeners(w,P),m.push(w));for(const w of Object.keys(l.localCache))l.localCache[w]&&!y.has(w)&&(l.notifyListeners(w,null),m.push(w));return m})()}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const y of Array.from(m))y(f)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,f){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),Xa=1e12;class Vv{constructor(c){this.auth=c,this.counter=Xa,this._widgets=new Map}render(c,l){const f=this.counter;return this._widgets.set(f,new Uv(c,this.auth.name,l||{})),this.counter++,f}reset(c){var l;const f=c||Xa;null===(l=this._widgets.get(f))||void 0===l||l.delete(),this._widgets.delete(f)}getResponse(c){var l;return(null===(l=this._widgets.get(c||Xa))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,I.Z)(function*(){var f;return null===(f=l._widgets.get(c||Xa))||void 0===f||f.execute(),""})()}}class Uv{constructor(c,l,f){this.params=f,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;K(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bv(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<h;f++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cc=Cv("rcb"),jv=new _i(3e4,6e4);class $v{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=on().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return K(function yA(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&Yn(on().grecaptcha)?Promise.resolve(on().grecaptcha):new Promise((f,m)=>{const y=on().setTimeout(()=>{m(At(c,"network-request-failed"))},jv.get());on()[Cc]=()=>{on().clearTimeout(y),delete on()[Cc];const P=on().grecaptcha;if(!P||!Yn(P))return void m(At(c,"internal-error"));const z=P.render;P.render=(se,me)=>{const Ee=z(se,me);return this.counter++,Ee},this.hostLanguage=l,f(P)},Kp(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Cc,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(y),m(At(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=on().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hv{load(c){return(0,I.Z)(function*(){return new Vv(c)})()}clearedOneInstance(){}}const Eo="recaptcha",Pg={theme:"light",type:"image"};class zv{constructor(c,l,f=Object.assign({},Pg)){this.parameters=f,this.type=Eo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ft(c),this.isInvisible="invisible"===this.parameters.size,K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;K(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hv:new $v,this.validateStartingState()}verify(){var c=this;return(0,I.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),f=c.getAssertedRecaptcha();return f.getResponse(l)||new Promise(y=>{const w=P=>{P&&(c.tokenChangeListeners.delete(w),y(P))};c.tokenChangeListeners.add(w),c.isInvisible&&f.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(f=>f(l)),"function"==typeof c)c(l);else if("string"==typeof c){const f=on()[c];"function"==typeof f&&f(l)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,I.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const f=document.createElement("div");l.appendChild(f),l=f}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,I.Z)(function*(){K(gi()&&!Ec(),c.auth,"internal-error"),yield function qv(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function Ra(h){return ji.apply(this,arguments)}(c.auth);K(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Dc{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=fe._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function eh(){return(eh=(0,I.Z)(function*(h,c,l){const f=Ft(h),m=yield eu(f,c,(0,U.m9)(l));return new Dc(m,y=>pc(f,y))})).apply(this,arguments)}function nh(){return(nh=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);yield pr(!1,f,"phone");const m=yield eu(f.auth,c,(0,U.m9)(l));return new Dc(m,y=>lg(f,y))})).apply(this,arguments)}function Ac(){return(Ac=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h),m=yield eu(f.auth,c,(0,U.m9)(l));return new Dc(m,y=>dg(f,y))})).apply(this,arguments)}function eu(h,c,l){return It.apply(this,arguments)}function It(){return It=(0,I.Z)(function*(h,c,l){var f;const m=yield l.verify();try{let y;if(K("string"==typeof m,h,"argument-error"),K(l.type===Eo,h,"argument-error"),y="string"==typeof c?{phoneNumber:c}:c,"session"in y){const w=y.session;if("phoneNumber"in y)return K("enroll"===w.type,h,"internal-error"),(yield function sA(h,c){return V(h,"POST","/v2/accounts/mfaEnrollment:start",Y(h,c))}(h,{idToken:w.credential,phoneEnrollmentInfo:{phoneNumber:y.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{K("signin"===w.type,h,"internal-error");const P=(null===(f=y.multiFactorHint)||void 0===f?void 0:f.uid)||y.multiFactorUid;return K(P,h,"missing-multi-factor-info"),(yield function Xd(h,c){return V(h,"POST","/v2/accounts/mfaSignIn:start",Y(h,c))}(h,{mfaPendingCredential:w.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:w}=yield function Pv(h,c){return Md.apply(this,arguments)}(h,{phoneNumber:y.phoneNumber,recaptchaToken:m});return w}}finally{l._reset()}}),It.apply(this,arguments)}function $s(){return($s=(0,I.Z)(function*(h,c){yield Ld((0,U.m9)(h),c)})).apply(this,arguments)}let Tn=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Ft(l)}verifyPhoneNumber(l,f){return eu(this.auth,l,(0,U.m9)(f))}static credential(l,f){return fe._fromVerification(l,f)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:f,temporaryProof:m}=l;return f&&m?fe._fromTokenResponse(f,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function Yo(h,c){return c?Ge(c):(K(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class bc extends Hi{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Dr(c,this._buildIdpRequest())}_linkToIdToken(c,l){return Dr(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return Dr(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function Hs(h){return cg(h.auth,new bc(h),h.bypassAuthState)}function Pr(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),Bd(l,new bc(h),h.bypassAuthState)}function Gv(h){return ih.apply(this,arguments)}function ih(){return(ih=(0,I.Z)(function*(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),Ld(l,new bc(h),h.bypassAuthState)})).apply(this,arguments)}class xg{constructor(c,l,f,m,y=!1){this.auth=c,this.resolver=f,this.user=m,this.bypassAuthState=y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,I.Z)(function*(f,m){c.pendingPromise={resolve:f,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(y){c.reject(y)}});return function(f,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,I.Z)(function*(){const{urlResponse:f,sessionId:m,postBody:y,tenantId:w,error:P,type:z}=c;if(P)return void l.reject(P);const se={auth:l.auth,requestUri:f,sessionId:m,tenantId:w||void 0,postBody:y||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(z)(se))}catch(me){l.reject(me)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Hs;case"linkViaPopup":case"linkViaRedirect":return Gv;case"reauthViaPopup":case"reauthViaRedirect":return Pr;default:pt(this.auth,"internal-error")}}resolve(c){Ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wo=new _i(2e3,1e4);function oh(){return(oh=(0,I.Z)(function*(h,c,l){const f=Ft(h);qe(h,c,qi);const m=Yo(f,l);return new Me(f,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function Sc(){return(Sc=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);qe(f.auth,c,qi);const m=Yo(f.auth,l);return new Me(f.auth,"reauthViaPopup",c,m,f).executeNotNull()})).apply(this,arguments)}function sh(){return(sh=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);qe(f.auth,c,qi);const m=Yo(f.auth,l);return new Me(f.auth,"linkViaPopup",c,m,f).executeNotNull()})).apply(this,arguments)}let Me=(()=>{class h extends xg{constructor(l,f,m,y,w){super(l,f,y,w),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const f=yield l.execute();return K(f,l.auth,"internal-error"),f})()}onExecution(){var l=this;return(0,I.Z)(function*(){Ot(1===l.filter.length,"Popup operations only handle one event");const f=yo();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],f),l.authWindow.associatedEvent=f,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(At(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(At(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var f,m;this.pollId=null!==(m=null===(f=this.authWindow)||void 0===f?void 0:f.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(At(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,wo.get())};l()}}return h.currentPopupAction=null,h})();const Fg="pendingRedirect",Rc=new Map;class Wv extends xg{constructor(c,l,f=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,f),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,I.Z)(function*(){let f=Rc.get(l.auth._key());if(!f){try{const y=(yield function Zv(h,c){return ah.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;f=()=>Promise.resolve(y)}catch(m){f=()=>Promise.reject(m)}Rc.set(l.auth._key(),f)}return l.bypassAuthState||Rc.set(l.auth._key(),()=>Promise.resolve(null)),f()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,f=this;return(0,I.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(f,c);if("unknown"!==c.type){if(c.eventId){const m=yield f.auth._redirectUserForId(c.eventId);if(m)return f.user=m,l().call(f,c);f.resolve(null)}}else f.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function ah(){return(ah=(0,I.Z)(function*(h,c){const l=Vg(c),f=Lg(h);if(!(yield f._isAvailable()))return!1;const m="true"===(yield f._get(l));return yield f._remove(l),m})).apply(this,arguments)}function Pc(h,c){return To.apply(this,arguments)}function To(){return(To=(0,I.Z)(function*(h,c){return Lg(h)._set(Vg(c),"true")})).apply(this,arguments)}function uh(h,c){Rc.set(h._key(),c)}function Lg(h){return Ge(h._redirectPersistence)}function Vg(h){return En(Fg,h.config.apiKey,h.name)}function Qv(h,c,l){return function J(h,c,l){return nt.apply(this,arguments)}(h,c,l)}function nt(){return(nt=(0,I.Z)(function*(h,c,l){const f=Ft(h);qe(h,c,qi),yield f._initializationPromise;const m=Yo(f,l);return yield Pc(m,f),m._openRedirect(f,c,"signInViaRedirect")})).apply(this,arguments)}function ch(h,c,l){return function lh(h,c,l){return fn.apply(this,arguments)}(h,c,l)}function fn(){return(fn=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);qe(f.auth,c,qi),yield f.auth._initializationPromise;const m=Yo(f.auth,l);yield Pc(m,f.auth);const y=yield hh(f);return m._openRedirect(f.auth,c,"reauthViaRedirect",y)})).apply(this,arguments)}function Ug(h,c,l){return function tu(h,c,l){return qr.apply(this,arguments)}(h,c,l)}function qr(){return(qr=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);qe(f.auth,c,qi),yield f.auth._initializationPromise;const m=Yo(f.auth,l);yield pr(!1,f,c.providerId),yield Pc(m,f.auth);const y=yield hh(f);return m._openRedirect(f.auth,c,"linkViaRedirect",y)})).apply(this,arguments)}function nu(){return(nu=(0,I.Z)(function*(h,c){return yield Ft(h)._initializationPromise,Mc(h,c,!1)})).apply(this,arguments)}function Mc(h,c){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,I.Z)(function*(h,c,l=!1){const f=Ft(h),m=Yo(f,c),w=yield new Wv(f,m,l).execute();return w&&!l&&(delete w.user._redirectEventId,yield f._persistUserIfCurrent(w.user),yield f._setRedirectUser(null,c)),w})).apply(this,arguments)}function hh(h){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,I.Z)(function*(h){const c=yo(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class fh{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(f=>{this.isEventForConsumer(c,f)&&(l=!0,this.sendToConsumer(c,f),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Yv(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ri(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var f;if(c.error&&!Ri(c)){const m=(null===(f=c.error.code)||void 0===f?void 0:f.split("auth/")[1])||"internal-error";l.onError(At(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const f=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&f}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jo(c))}saveEventToCache(c){this.cachedEventUids.add(Jo(c)),this.lastProcessedEventTime=Date.now()}}function Jo(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function Ri({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function ph(h){return gh.apply(this,arguments)}function gh(){return(gh=(0,I.Z)(function*(h,c={}){return V(h,"GET","/v1/projects",c)})).apply(this,arguments)}const Jv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mh=/^https?/;function xc(){return(xc=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield ph(h);for(const l of c)try{if(yh(l))return}catch{}pt(h,"unauthorized-domain")})).apply(this,arguments)}function yh(h){const c=dn(),{protocol:l,hostname:f}=new URL(c);if(h.startsWith("chrome-extension://")){const w=new URL(h);return""===w.hostname&&""===f?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&w.hostname===f}if(!mh.test(l))return!1;if(Jv.test(h))return f===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(f)}const Xv=new _i(3e4,6e4);function vh(){const h=on().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let ru=null;const $g=new _i(5e3,15e3),Hg="__/auth/iframe",Eh="emulator/auth/iframe",eI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function er(h){const c=h.config;K(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?O(c,Eh):`https://${h.config.authDomain}/${Hg}`,f={apiKey:c.apiKey,appName:h.name,v:Ne.SDK_VERSION},m=tI.get(h.config.apiHost);m&&(f.eid=m);const y=h._getFrameworks();return y.length&&(f.fw=y.join(",")),`${l}?${(0,U.xO)(f).slice(1)}`}function Pt(){return Pt=(0,I.Z)(function*(h){const c=yield function jg(h){return ru=ru||function Ih(h){return new Promise((c,l)=>{var f,m,y;function w(){vh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{vh(),l(At(h,"network-request-failed"))},timeout:Xv.get()})}if(null!==(m=null===(f=on().gapi)||void 0===f?void 0:f.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(y=on().gapi)||void 0===y||!y.load){const P=Cv("iframefcb");return on()[P]=()=>{gapi.load?w():l(At(h,"network-request-failed"))},Kp(`https://apis.google.com/js/api.js?onload=${P}`).catch(z=>l(z))}w()}}).catch(c=>{throw ru=null,c})}(h),ru}(h),l=on().gapi;return K(l,h,"internal-error"),c.open({where:document.body,url:er(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eI,dontclear:!0},f=>new Promise(function(){var m=(0,I.Z)(function*(y,w){yield f.restyle({setHideOnLeave:!1});const P=At(h,"network-request-failed"),z=on().setTimeout(()=>{w(P)},$g.get());function se(){on().clearTimeout(z),y(f)}f.ping(se).then(se,()=>{w(P)})});return function(y,w){return m.apply(this,arguments)}}()))}),Pt.apply(this,arguments)}const nI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const sI="__/auth/handler",Oc="emulator/auth/handler",kc=encodeURIComponent("fac");function zs(h,c,l,f,m,y){return iu.apply(this,arguments)}function iu(){return(iu=(0,I.Z)(function*(h,c,l,f,m,y){K(h.config.authDomain,h,"auth-domain-config-required"),K(h.config.apiKey,h,"invalid-api-key");const w={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:f,v:Ne.SDK_VERSION,eventId:m};if(c instanceof qi){c.setDefaultLanguage(h.languageCode),w.providerId=c.providerId||"",(0,U.xb)(c.getCustomParameters())||(w.customParameters=JSON.stringify(c.getCustomParameters()));for(const[me,Ee]of Object.entries(y||{}))w[me]=Ee}if(c instanceof fr){const me=c.getScopes().filter(Ee=>""!==Ee);me.length>0&&(w.scopes=me.join(","))}h.tenantId&&(w.tid=h.tenantId);const P=w;for(const me of Object.keys(P))void 0===P[me]&&delete P[me];const z=yield h._getAppCheckToken(),se=z?`#${kc}=${encodeURIComponent(z)}`:"";return`${function qg({config:h}){return h.emulator?O(h,Oc):`https://${h.authDomain}/${sI}`}(h)}?${(0,U.xO)(P).slice(1)}${se}`})).apply(this,arguments)}const Fc="webStorageSupport",es=class aI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qo,this._completeRedirectFn=Mc,this._overrideRedirectResult=uh}_openPopup(c,l,f,m){var y=this;return(0,I.Z)(function*(){var w;Ot(null===(w=y.eventManagers[c._key()])||void 0===w?void 0:w.manager,"_initialize() not called before _openPopup()");const P=yield zs(c,l,f,dn(),m);return function Nc(h,c,l,f=500,m=600){const y=Math.max((window.screen.availHeight-m)/2,0).toString(),w=Math.max((window.screen.availWidth-f)/2,0).toString();let P="";const z=Object.assign(Object.assign({},nI),{width:f.toString(),height:m.toString(),top:y,left:w}),se=(0,U.z$)().toLowerCase();l&&(P=ic(se)?"_blank":l),wt(se)&&(c=c||"http://localhost",z.scrollbars="yes");const me=Object.entries(z).reduce((Xt,[si,Zc])=>`${Xt}${si}=${Zc},`,"");if(function W(h=(0,U.z$)()){var c;return Le(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(se)&&"_self"!==P)return function Co(h,c){const l=document.createElement("a");l.href=h,l.target=c;const f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(f)}(c||"",P),new wh(null);const Ee=window.open(c||"",P,me);K(Ee,h,"popup-blocked");try{Ee.focus()}catch{}return new wh(Ee)}(c,P,yo())})()}_openRedirect(c,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y._originValidation(c),function Ig(h){on().location.href=h}(yield zs(c,l,f,dn(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:y}=this.eventManagers[l];return m?Promise.resolve(m):(Ot(y,"If manager is not set, promise should be"),y)}const f=this.initAndGetManager(c);return this.eventManagers[l]={promise:f},f.catch(()=>{delete this.eventManagers[l]}),f}initAndGetManager(c){var l=this;return(0,I.Z)(function*(){const f=yield function Xo(h){return Pt.apply(this,arguments)}(c),m=new fh(c);return f.register("authEvent",y=>(K(y?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=f,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Fc,{type:Fc},m=>{var y;const w=null===(y=m?.[0])||void 0===y?void 0:y[Fc];void 0!==w&&l(!!w),pt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function _h(h){return xc.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return Ie()||yi()||Le()}};class ou{constructor(c){this.factorId=c}_process(c,l,f){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,f);case"signin":return this._finalizeSignIn(c,l.credential);default:return $t("unexpected MultiFactorSessionType")}}}class Th extends ou{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Th(c)}_finalizeEnroll(c,l,f){return function aA(h,c){return V(h,"POST","/v2/accounts/mfaEnrollment:finalize",Y(h,c))}(c,{idToken:l,displayName:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function mA(h,c){return V(h,"POST","/v2/accounts/mfaSignIn:finalize",Y(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let vA=(()=>{class h{constructor(){}static assertion(l){return Th._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var uI="@firebase/auth";class Ch{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(f=>{c(f?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Do(){return window}(0,U.Pz)("authIdTokenMaxAge"),function lI(h){(0,Ne._registerComponent)(new Qt.wA("auth",(c,{options:l})=>{const f=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),y=c.getProvider("app-check-internal"),{apiKey:w,authDomain:P}=f.options;K(w&&!w.includes(":"),"invalid-api-key",{appName:f.name});const z={apiKey:w,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ms(h)},se=new Tv(f,m,y,z);return function QD(h,c){const l=c?.persistence||[],f=(Array.isArray(l)?l:[l]).map(Ge);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(f,c?.popupRedirectResolver)}(se,l),se},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,f)=>{c.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Qt.wA("auth-internal",c=>{const l=Ft(c.getProvider("auth").getImmediate());return new Ch(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(uI,"1.5.0",function su(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Ne.registerVersion)(uI,"1.5.0","esm2017")}("Browser");function Ah(){return Ah=(0,I.Z)(function*(h,c,l){var f;const{BuildInfo:m}=Do();Ot(c.sessionId,"AuthEvent did not contain a session ID");const y=yield function Qg(h){return Bc.apply(this,arguments)}(c.sessionId),w={};return Le()?w.ibi=m.packageName:b()?w.apn=m.packageName:pt(h,"operation-not-supported-in-this-environment"),m.displayName&&(w.appDisplayName=m.displayName),w.sessionId=y,zs(h,l,c.type,void 0,null!==(f=c.eventId)&&void 0!==f?f:void 0,w)}),Ah.apply(this,arguments)}function cu(){return(cu=(0,I.Z)(function*(h){const{BuildInfo:c}=Do(),l={};Le()?l.iosBundleId=c.packageName:b()?l.androidPackageName=c.packageName:pt(h,"operation-not-supported-in-this-environment"),yield ph(h,l)})).apply(this,arguments)}function lu(){return(lu=(0,I.Z)(function*(h,c,l){const{cordova:f}=Do();let m=()=>{};try{yield new Promise((y,w)=>{let P=null;function z(){var Ee;y();const Xt=null===(Ee=f.plugins.browsertab)||void 0===Ee?void 0:Ee.close;"function"==typeof Xt&&Xt(),"function"==typeof l?.close&&l.close()}function se(){P||(P=window.setTimeout(()=>{w(At(h,"redirect-cancelled-by-user"))},2e3))}function me(){"visible"===document?.visibilityState&&se()}c.addPassiveListener(z),document.addEventListener("resume",se,!1),b()&&document.addEventListener("visibilitychange",me,!1),m=()=>{c.removePassiveListener(z),document.removeEventListener("resume",se,!1),document.removeEventListener("visibilitychange",me,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function Bc(){return(Bc=(0,I.Z)(function*(h){const c=function Yg(h){if(Ot(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let f=0;f<h.length;f++)l[f]=h.charCodeAt(f);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class pI extends fh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,I.Z)(function*(){yield c.initPromise})()}}function Xg(h){return $c.apply(this,arguments)}function $c(){return($c=(0,I.Z)(function*(h){const c=yield bh()._get(Ln(h));return c&&(yield bh()._remove(Ln(h))),c})).apply(this,arguments)}function du(){const h=[];for(let l=0;l<20;l++){const f=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(f))}return h.join("")}function bh(){return Ge(bi)}function Ln(h){return En("authEvent",h.config.apiKey,h.name)}function qs(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,U.zd)(l.join("?"))}const Hc=class nm{constructor(){this._redirectPersistence=Qo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mc,this._overrideRedirectResult=uh}_initialize(c){var l=this;return(0,I.Z)(function*(){const f=c._key();let m=l.eventManagers.get(f);return m||(m=new pI(c),l.eventManagers.set(f,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){pt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,f,m){var y=this;return(0,I.Z)(function*(){!function fI(h){var c,l,f,m,y,w,P,z,se,me;const Ee=Do();K("function"==typeof(null===(c=Ee?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(typeof(null===(l=Ee?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(y=null===(m=null===(f=Ee?.cordova)||void 0===f?void 0:f.plugins)||void 0===m?void 0:m.browsertab)||void 0===y?void 0:y.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(z=null===(P=null===(w=Ee?.cordova)||void 0===w?void 0:w.plugins)||void 0===P?void 0:P.browsertab)||void 0===z?void 0:z.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(me=null===(se=Ee?.cordova)||void 0===se?void 0:se.InAppBrowser)||void 0===me?void 0:me.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const w=yield y._initialize(c);yield w.initialized(),w.resetRedirect(),function Kv(){Rc.clear()}(),yield y._originValidation(c);const P=function jc(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:du(),postBody:null,tenantId:h.tenantId,error:At(h,"no-auth-event")}}(c,f,m);yield function ts(h,c){return bh()._set(Ln(h),c)}(c,P);const z=yield function Pi(h,c,l){return Ah.apply(this,arguments)}(c,P,l),se=yield function Kg(h){const{cordova:c}=Do();return new Promise(l=>{c.plugins.browsertab.isAvailable(f=>{let m=null;f?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function Xe(h=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(z);return function Uc(h,c,l){return lu.apply(this,arguments)}(c,w,se)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Vc(h){return cu.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:f,handleOpenURL:m,BuildInfo:y}=Do(),w=setTimeout((0,I.Z)(function*(){yield Xg(c),l.onEvent(ns())}),500),P=function(){var me=(0,I.Z)(function*(Ee){clearTimeout(w);const Xt=yield Xg(c);let si=null;Xt&&Ee?.url&&(si=function em(h,c){var l,f;const m=function tm(h){const c=qs(h),l=c.link?decodeURIComponent(c.link):void 0,f=qs(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return qs(m).link||m||f||l||h}(c);if(m.includes("/__/auth/callback")){const y=qs(m),w=y.firebaseError?function gI(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(y.firebaseError)):null,P=null===(f=null===(l=w?.code)||void 0===l?void 0:l.split("auth/"))||void 0===f?void 0:f[1],z=P?At(P):null;return z?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:z,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(Xt,Ee.url)),l.onEvent(si||ns())});return function(Xt){return me.apply(this,arguments)}}();typeof f<"u"&&"function"==typeof f.subscribe&&f.subscribe(null,P);const z=m,se=`${y.packageName.toLowerCase()}://`;Do().handleOpenURL=function(){var me=(0,I.Z)(function*(Ee){if(Ee.toLowerCase().startsWith(se)&&P({url:Ee}),"function"==typeof z)try{z(Ee)}catch(Xt){console.error(Xt)}});return function(Ee){return me.apply(this,arguments)}}()}};function ns(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:At("no-auth-event")}}function Mi(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function im(h=(0,U.z$)()){return!("file:"!==Mi()&&"ionic:"!==Mi()&&"capacitor:"!==Mi()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function _I(){try{const h=self.localStorage,c=yo();if(h)return h.setItem(c,"1"),h.removeItem(c),!function DA(h=(0,U.z$)()){return function TA(){return(0,U.w1)()&&11===document?.documentMode}()||function CA(h=(0,U.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,U.hl)()}catch{return om()&&(0,U.hl)()}return!1}function om(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ao(){return(function EA(){return"http:"===Mi()||"https:"===Mi()}()||(0,U.ru)()||im())&&!function wA(){return(0,U.b$)()||(0,U.UG)()}()&&_I()&&!om()}function sm(){return im()&&typeof document<"u"}function sn(){return(sn=(0,I.Z)(function*(){return!!sm()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const Vn={LOCAL:"local",NONE:"none",SESSION:"session"},hu=K,Mr="persistence";function zc(h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,I.Z)(function*(h){yield h._initializationPromise;const c=am(),l=En(Mr,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function am(){var h;try{return(null===(h=function vI(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const AA=K;class bo{constructor(){this.browserResolver=Ge(es),this.cordovaResolver=Ge(Hc),this.underlyingResolver=null,this._redirectPersistence=Qo,this._completeRedirectFn=Mc,this._overrideRedirectResult=uh}_initialize(c){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openPopup(c,l,f,m)})()}_openRedirect(c,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openRedirect(c,l,f,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return sm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return AA(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,I.Z)(function*(){if(c.underlyingResolver)return;const l=yield function yI(){return sn.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function II(h){return h.unwrap()}function Rh(h){return EI(h)}function EI(h){const{_tokenResponse:c}=h instanceof U.ZR?h.customData:h;if(!c)return null;if(!(h instanceof U.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Tn.credentialFromResult(h);const l=c.providerId;if(!l||l===Je.PASSWORD)return null;let f;switch(l){case Je.GOOGLE:f=ri;break;case Je.FACEBOOK:f=Hr;break;case Je.GITHUB:f=ut;break;case Je.TWITTER:f=Ei;break;default:const{oauthIdToken:m,oauthAccessToken:y,oauthTokenSecret:w,pendingToken:P,nonce:z}=c;return y||w||m||P?P?l.startsWith("saml.")?fo._create(l,P):vi._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:y}):new Gi(l).credential({idToken:m,accessToken:y,rawNonce:z}):null}return h instanceof U.ZR?f.credentialFromError(h):f.credentialFromResult(h)}function tr(h,c){return c.catch(l=>{throw l instanceof U.ZR&&function Qs(h,c){var l;const f=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new wI(h,function oA(h,c){var l;const f=(0,U.m9)(h),m=c;return K(c.customData.operationType,f,"argument-error"),K(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,f,"argument-error"),mg._fromError(f,m)}(h,c));else if(f){const m=EI(c),y=c;m&&(y.credential=m,y.tenantId=f.tenantId||void 0,y.email=f.email||void 0,y.phoneNumber=f.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Rh(l),additionalUserInfo:On(l),user:Ki.getOrCreate(m)}})}function Ph(h,c){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,I.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:f=>tr(h,l.confirm(f))}})).apply(this,arguments)}class wI{constructor(c,l){this.resolver=l,this.auth=function xr(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return tr(II(this.auth),this.resolver.resolveSignIn(c))}}class Ki{constructor(c){this._delegate=c,this.multiFactor=function lA(h){const c=(0,U.m9)(h);return yg.has(c)||yg.set(c,_g._fromUser(c)),yg.get(c)}(c)}static getOrCreate(c){return Ki.USER_MAP.has(c)||Ki.USER_MAP.set(c,new Ki(c)),Ki.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,I.Z)(function*(){return tr(l.auth,lg(l._delegate,c))})()}linkWithPhoneNumber(c,l){var f=this;return(0,I.Z)(function*(){return Ph(f.auth,function th(h,c,l){return nh.apply(this,arguments)}(f._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,I.Z)(function*(){return tr(l.auth,function kg(h,c,l){return sh.apply(this,arguments)}(l._delegate,c,bo))})()}linkWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield zc(Ft(l.auth)),Ug(l._delegate,c,bo)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,I.Z)(function*(){return tr(l.auth,dg(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Ph(this.auth,function Si(h,c,l){return Ac.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return tr(this.auth,function Og(h,c,l){return Sc.apply(this,arguments)}(this._delegate,c,bo))}reauthenticateWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield zc(Ft(l.auth)),ch(l._delegate,c,bo)})()}sendEmailVerification(c){return function Fs(h,c){return qt.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,I.Z)(function*(){return yield function Nv(h,c){return fc.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function Wi(h,c){return Ls((0,U.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function Za(h,c){return Ls((0,U.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function rh(h,c){return $s.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function pg(h,c){return Ci.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function Wa(h,c,l){return mo.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ki.USER_MAP=new WeakMap;const pu=K;let um=(()=>{class h{constructor(l,f){if(this.app=l,f.isInitialized())return this._delegate=f.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;pu(m,"invalid-api-key",{appName:l.name}),pu(m,"invalid-api-key",{appName:l.name});const y=typeof window<"u"?bo:void 0;this._delegate=f.initialize({options:{persistence:Gc(m,l.name),popupRedirectResolver:y}}),this._delegate._updateErrorMap(Sn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ki.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,f){!function ni(h,c,l){const f=Ft(h);K(f._canInitEmulator,f,"emulator-config-failed"),K(/^https?:\/\//.test(c),f,"invalid-emulator-scheme");const m=!!l?.disableWarnings,y=ka(c),{host:w,port:P}=function bv(h){const c=ka(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const f=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(f);if(m){const y=m[1];return{host:y,port:Sd(f.substr(y.length+1))}}{const[y,w]=f.split(":");return{host:y,port:Sd(w)}}}(c);f.config.emulator={url:`${y}//${w}${null===P?"":`:${P}`}/`},f.settings.appVerificationDisabledForTesting=!0,f.emulatorConfig=Object.freeze({host:w,port:P,protocol:y.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function Sv(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,f)}applyActionCode(l){return function hg(h,c){return Ns.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return fg(this._delegate,l)}confirmPasswordReset(l,f){return function Sr(h,c,l){return _c.apply(this,arguments)}(this._delegate,l,f)}createUserWithEmailAndPassword(l,f){var m=this;return(0,I.Z)(function*(){return tr(m._delegate,function je(h,c,l){return bt.apply(this,arguments)}(m._delegate,l,f))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Ga(h,c){return yc.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function Os(h,c){const l=zi.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){pu(Ao(),l._delegate,"operation-not-supported-in-this-environment");const f=yield function dh(h,c){return nu.apply(this,arguments)}(l._delegate,bo);return f?tr(l._delegate,Promise.resolve(f)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function Gs(h,c){Ft(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,f,m){const{next:y,error:w,complete:P}=qc(l,f,m);return this._delegate.onAuthStateChanged(y,w,P)}onIdTokenChanged(l,f,m){const{next:y,error:w,complete:P}=qc(l,f,m);return this._delegate.onIdTokenChanged(y,w,P)}sendSignInLinkToEmail(l,f){return function qa(h,c,l){return wn.apply(this,arguments)}(this._delegate,l,f)}sendPasswordResetEmail(l,f){return function Xn(h,c,l){return go.apply(this,arguments)}(this._delegate,l,f||void 0)}setPersistence(l){var f=this;return(0,I.Z)(function*(){let m;switch(function Zs(h,c){hu(Object.values(Vn).includes(c),h,"invalid-persistence-type"),(0,U.b$)()?hu(c!==Vn.SESSION,h,"unsupported-persistence-type"):(0,U.UG)()?hu(c===Vn.NONE,h,"unsupported-persistence-type"):om()?hu(c===Vn.NONE||c===Vn.LOCAL&&(0,U.hl)(),h,"unsupported-persistence-type"):hu(c===Vn.NONE||_I(),h,"unsupported-persistence-type")}(f._delegate,l),l){case Vn.SESSION:m=Qo;break;case Vn.LOCAL:m=(yield Ge(js)._isAvailable())?js:bi;break;case Vn.NONE:m=zt;break;default:return pt("argument-error",{appName:f._delegate.name})}return f._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return tr(this._delegate,function ug(h){return hc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return tr(this._delegate,pc(this._delegate,l))}signInWithCustomToken(l){return tr(this._delegate,function kv(h,c){return ii.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,f){return tr(this._delegate,function oi(h,c,l){return pc((0,U.m9)(h),Nd.credential(c,l)).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&tt(h),m});return function(m){return f.apply(this,arguments)}}())}(this._delegate,l,f))}signInWithEmailLink(l,f){return tr(this._delegate,function rn(h,c,l){return wi.apply(this,arguments)}(this._delegate,l,f))}signInWithPhoneNumber(l,f){return Ph(this._delegate,function Mg(h,c,l){return eh.apply(this,arguments)}(this._delegate,l,f))}signInWithPopup(l){var f=this;return(0,I.Z)(function*(){return pu(Ao(),f._delegate,"operation-not-supported-in-this-environment"),tr(f._delegate,function Ng(h,c,l){return oh.apply(this,arguments)}(f._delegate,l,bo))})()}signInWithRedirect(l){var f=this;return(0,I.Z)(function*(){return pu(Ao(),f._delegate,"operation-not-supported-in-this-environment"),yield zc(f._delegate),Qv(f._delegate,l,bo)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Jt(h,c){return ce.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=Vn,h})();function qc(h,c,l){let f=h;"function"!=typeof h&&({next:f,error:c,complete:l}=h);const m=f;return{next:w=>m(w&&Ki.getOrCreate(w)),error:c,complete:l}}function Gc(h,c){const l=function fu(h,c){const l=am();if(!l)return[];const f=En(Mr,h,c);switch(l.getItem(f)){case Vn.NONE:return[zt];case Vn.LOCAL:return[js,Qo];case Vn.SESSION:return[Qo];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(js)&&l.push(js),typeof window<"u")for(const f of[bi,Qo])l.includes(f)||l.push(f);return l.includes(zt)||l.push(zt),l}class xh{constructor(){this.providerId="phone",this._delegate=new Tn(II(xe.Z.auth()))}static credential(c,l){return Tn.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}xh.PHONE_SIGN_IN_METHOD=Tn.PHONE_SIGN_IN_METHOD,xh.PROVIDER_ID=Tn.PROVIDER_ID;const gu=K;class TI{constructor(c,l,f=xe.Z.app()){var m;gu(null===(m=f.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:f.name}),this._delegate=new zv(f.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function CI(h){h.INTERNAL.registerComponent(new Qt.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),f=c.getProvider("auth");return new um(l,f)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Nd,FacebookAuthProvider:Hr,GithubAuthProvider:ut,GoogleAuthProvider:ri,OAuthProvider:Gi,SAMLAuthProvider:Ha,PhoneAuthProvider:xh,PhoneMultiFactorGenerator:vA,RecaptchaVerifier:TI,TwitterAuthProvider:Ei,Auth:um,AuthCredential:Hi,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.0")}(xe.Z)},861:(Bi,An,Be)=>{function I(U,Ne,ct,jt,Qt,bn,Je){try{var Q=U[bn](Je),re=Q.value}catch(we){return void ct(we)}Q.done?Ne(re):Promise.resolve(re).then(jt,Qt)}function xe(U){return function(){var Ne=this,ct=arguments;return new Promise(function(jt,Qt){var bn=U.apply(Ne,ct);function Je(re){I(bn,jt,Qt,Je,Q,"next",re)}function Q(re){I(bn,jt,Qt,Je,Q,"throw",re)}Je(void 0)})}}Be.d(An,{Z:()=>xe})},582:(Bi,An,Be)=>{function Ne(O,F){var B={};for(var H in O)Object.prototype.hasOwnProperty.call(O,H)&&F.indexOf(H)<0&&(B[H]=O[H]);if(null!=O&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(H=Object.getOwnPropertySymbols(O);Y<H.length;Y++)F.indexOf(H[Y])<0&&Object.prototype.propertyIsEnumerable.call(O,H[Y])&&(B[H[Y]]=O[H[Y]])}return B}function we(O,F,B,H){return new(B||(B=Promise))(function(V,de){function rt(at){try{Te(H.next(at))}catch(Ht){de(Ht)}}function Ce(at){try{Te(H.throw(at))}catch(Ht){de(Ht)}}function Te(at){at.done?V(at.value):function Y(V){return V instanceof B?V:new B(function(de){de(V)})}(at.value).then(rt,Ce)}Te((H=H.apply(O,F||[])).next())})}function Nt(O){return this instanceof Nt?(this.v=O,this):new Nt(O)}function pt(O,F,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,H=B.apply(O,F||[]),V=[];return Y={},de("next"),de("throw"),de("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function de(Rt){H[Rt]&&(Y[Rt]=function(Hn){return new Promise(function(yn,Yn){V.push([Rt,Hn,yn,Yn])>1||rt(Rt,Hn)})})}function rt(Rt,Hn){try{!function Ce(Rt){Rt.value instanceof Nt?Promise.resolve(Rt.value.v).then(Te,at):Ht(V[0][2],Rt)}(H[Rt](Hn))}catch(yn){Ht(V[0][3],yn)}}function Te(Rt){rt("next",Rt)}function at(Rt){rt("throw",Rt)}function Ht(Rt,Hn){Rt(Hn),V.shift(),V.length&&rt(V[0][0],V[0][1])}}function ur(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,F=O[Symbol.asyncIterator];return F?F.call(O):(O=function ft(O){var F="function"==typeof Symbol&&Symbol.iterator,B=F&&O[F],H=0;if(B)return B.call(O);if(O&&"number"==typeof O.length)return{next:function(){return O&&H>=O.length&&(O=void 0),{value:O&&O[H++],done:!O}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(O),B={},H("next"),H("throw"),H("return"),B[Symbol.asyncIterator]=function(){return this},B);function H(V){B[V]=O[V]&&function(de){return new Promise(function(rt,Ce){!function Y(V,de,rt,Ce){Promise.resolve(Ce).then(function(Te){V({value:Te,done:rt})},de)}(rt,Ce,(de=O[V](de)).done,de.value)})}}}Be.d(An,{FC:()=>pt,KL:()=>ur,_T:()=>Ne,mG:()=>we,qq:()=>Nt}),"function"==typeof SuppressedError&&SuppressedError}},Bi=>{Bi(Bi.s=666)}]);